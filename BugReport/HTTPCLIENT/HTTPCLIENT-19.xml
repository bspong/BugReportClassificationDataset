<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:14:31 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-19/HTTPCLIENT-19.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-19] Response Folded Headers throws HttpException</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-19</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>As of 4/4/02 CVS repository the HttpMethodBase class&lt;br/&gt;
doesn&amp;#39;t handle folded headers in the &lt;br/&gt;
readResponseHeaders method&lt;br/&gt;
&lt;br/&gt;
HTTP/1.1 and HTTP/1.0 descriptions of folded headers (see &lt;br/&gt;
section 2.2 Basic Rules)&lt;br/&gt;
&lt;a href=&quot;http://www.ietf.org/rfc/rfc2616.txt&quot;&gt;http://www.ietf.org/rfc/rfc2616.txt&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www-&quot;&gt;http://www-&lt;/a&gt;&lt;br/&gt;
old.ics.uci.edu/pub/ietf/http/rfc1945.html#Basic-Rules&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve prepared a patch and was &lt;br/&gt;
emailed to &lt;a href=&apos;mailto:jakarta-commons@jakarta.apache.org&apos;&gt;jakarta-commons@jakarta.apache.org&lt;/a&gt;</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: All</environment>
            <key id="12333578">HTTPCLIENT-19</key>
            <summary>Response Folded Headers throws HttpException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="dims@yahoo.com">Davanum Srinivas</assignee>
                                <reporter username="ericv@kinzan.com">Eric van Lydegraf</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Apr 2002 11:37:08 +0100</created>
                <updated>Sun, 22 Apr 2007 08:09:56 +0100</updated>
                    <resolved>Sun, 22 Apr 2007 08:09:56 +0100</resolved>
                            <version>2.0 Milestone 1</version>
                                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12379238" author="ericv@kinzan.com" created="Tue, 23 Apr 2002 00:09:31 +0100"  >Index: &lt;br/&gt;
HttpMethodBase.java&lt;br/&gt;
===================================================================&lt;br/&gt;
RCS &lt;br/&gt;
file: /home/cvspublic/jakarta-&lt;br/&gt;
commons/httpclient/src/java/org/apache/commons/httpclient/HttpMethodBase.java,v&lt;br/&gt;
retrieving &lt;br/&gt;
revision 1.28&lt;br/&gt;
diff -u -b -r1.28 HttpMethodBase.java&lt;br/&gt;
--- HttpMethodBase.java	16 Apr 2002 &lt;br/&gt;
14:30:42 -0000	1.28&lt;br/&gt;
+++ HttpMethodBase.java	19 Apr 2002 19:49:40 -0000&lt;br/&gt;
@@ -1032,6 +1032,8 &lt;br/&gt;
@@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;responseHeaders.clear();&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
+        String name = null;&lt;br/&gt;
+        String value = null;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for(;;) &lt;br/&gt;
{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String line = conn.readLine();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if ((line == null) || (line.length() &amp;lt; 1)) {&lt;br/&gt;
@@ -1039,20 &lt;br/&gt;
+1041,42 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Parse the header name and value&lt;br/&gt;
+            // Check for folded headers first&lt;br/&gt;
+            // &lt;br/&gt;
Detect LWS-char see HTTP/1.0 or HTTP/1.1 Section 2.2 &lt;br/&gt;
+            // discussion on folded headers&lt;br/&gt;
+            &lt;br/&gt;
boolean isFolded = false;&lt;br/&gt;
+            if ( line.charAt(0) == &amp;#39; &amp;#39; || line.charAt(0) == &amp;#39;\t&amp;#39; )&lt;br/&gt;
+            {&lt;br/&gt;
+                // we &lt;br/&gt;
have continuation folded header&lt;br/&gt;
+                // so append value&lt;br/&gt;
+                isFolded = true;&lt;br/&gt;
+                value = &lt;br/&gt;
line.substring(1).trim();&lt;br/&gt;
+            }&lt;br/&gt;
+            else&lt;br/&gt;
+            {&lt;br/&gt;
+                // Otherwise we should have normal HTTP header &lt;br/&gt;
line&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int colon = line.indexOf(&amp;quot;:&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (colon &amp;lt; 0) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throw new HttpException(&amp;quot;Unable to &lt;br/&gt;
parse header: &amp;quot; + line);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
-            String name = line.substring(0, colon).trim();&lt;br/&gt;
+                name = &lt;br/&gt;
line.substring(0, colon).trim();&lt;br/&gt;
+                value = line.substring(colon + 1).trim();&lt;br/&gt;
+            }&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
String match = name.toLowerCase();&lt;br/&gt;
-            String value = line.substring(colon + 1).trim();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
Header header = (Header)(responseHeaders.get(match));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (null == header) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;header = new &lt;br/&gt;
Header(name, value);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} else {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String oldvalue =  header.getValue();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (null != oldvalue) &lt;br/&gt;
{&lt;br/&gt;
+                    if ( isFolded ) {&lt;br/&gt;
+                        // LWS becomes space plus extended value&lt;br/&gt;
+                        header = new &lt;br/&gt;
Header(name,oldvalue + &amp;quot; &amp;quot; + value);&lt;br/&gt;
+                    }&lt;br/&gt;
+                    else {&lt;br/&gt;
+                        // Append additional header value&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
header = new Header(name,oldvalue + &amp;quot;, &amp;quot; + value);&lt;br/&gt;
+                    }&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} else {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;header = new &lt;br/&gt;
Header(name,value);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}</comment>
                    <comment id="12379239" author="jsdever@sympatico.ca" created="Fri, 19 Jul 2002 02:04:29 +0100"  >Eric is quite right about this problem.  I was not around for the discussion of &lt;br/&gt;
this during April so I do not know if there is a good reason not to fullfill &lt;br/&gt;
this bug.&lt;br/&gt;
&lt;br/&gt;
The patch is not good inlined in the message like it is, and refrences some &lt;br/&gt;
strnage file names and does not apply directly.&lt;br/&gt;
&lt;br/&gt;
Eric, perhaps you can re-submit this patch in context with the current code &lt;br/&gt;
base, and please use the &amp;quot;Create a new attachment&amp;quot; on the bug itself and use &lt;br/&gt;
cvs diff -u to create the patch.  Don&amp;#39;t forget to add your name to the authors &lt;br/&gt;
list at the top of the file.&lt;br/&gt;
&lt;br/&gt;
&amp;lt;cite href=&amp;quot;&lt;a href=&quot;http://www.ietf.org/rfc/rfc2616.txt&quot;&gt;http://www.ietf.org/rfc/rfc2616.txt&lt;/a&gt;&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;HTTP/1.1 header field values can be folded onto multiple lines if the&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;continuation line begins with a space or horizontal tab. All linear&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;white space, including folding, has the same semantics as SP. A&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;recipient MAY replace any linear white space with a single SP before&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;interpreting the field value or forwarding the message downstream.&lt;br/&gt;
&amp;lt;/cite&amp;gt;</comment>
                    <comment id="12379240" author="dims@yahoo.com" created="Sat, 20 Jul 2002 00:16:45 +0100"  >Created an attachment (id=2416)&lt;br/&gt;
Uptodate patch for this bug.&lt;br/&gt;
</comment>
                    <comment id="12379241" author="dims@yahoo.com" created="Sat, 20 Jul 2002 00:17:41 +0100"  >Created an attachment (id=2417)&lt;br/&gt;
TestCase for this bug.&lt;br/&gt;
</comment>
                    <comment id="12379242" author="dims@yahoo.com" created="Sat, 20 Jul 2002 00:18:53 +0100"  >Jeff,&lt;br/&gt;
&lt;br/&gt;
Added an up-to-date patch and a testcase....See attachments at&lt;br/&gt;
&lt;a href=&quot;http://nagoya.apache.org/bugzilla/show_bug.cgi?id=7754&quot;&gt;http://nagoya.apache.org/bugzilla/show_bug.cgi?id=7754&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
Thanks,&lt;br/&gt;
dims</comment>
                    <comment id="12379243" author="jsdever@sympatico.ca" created="Sat, 20 Jul 2002 14:48:44 +0100"  >Patch applied.  &lt;br/&gt;
Test cases added.</comment>
                </comments>
                    <attachments>
                    <attachment id="12326603" name="ASF.LICENSE.NOT.GRANTED--httpmethodbase.diff" size="4289" author="dims@yahoo.com" created="Sat, 20 Jul 2002 00:16:45 +0100" />
                    <attachment id="12326604" name="ASF.LICENSE.NOT.GRANTED--TestResponseHeaders.java" size="8253" author="dims@yahoo.com" created="Sat, 20 Jul 2002 00:17:41 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>7754</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 19 Jul 2002 01:04:29 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133076</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189234</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>