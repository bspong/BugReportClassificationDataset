<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:22:49 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-979/HTTPCLIENT-979.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-979] cache entry resource management should be extracted from CachingHttpClient</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-979</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>As we have built in support for stream-based management of cached response bodies, the CachingHttpClient class has its fingers in too many pies and is involved in resource management but not storage of the actual HttpCacheEntries.&lt;br/&gt;
&lt;br/&gt;
I have a patch forthcoming. :)&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12471853">HTTPCLIENT-979</key>
            <summary>cache entry resource management should be extracted from CachingHttpClient</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="cimjmoore">Jonathan Moore</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Aug 2010 22:23:30 +0100</created>
                <updated>Tue, 25 Jan 2011 11:00:17 +0000</updated>
                    <resolved>Wed, 18 Aug 2010 20:43:32 +0100</resolved>
                            <version>4.1 Alpha2</version>
                                <fixVersion>4.1 Beta1</fixVersion>
                                <component>HttpCache</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12899598" author="cimjmoore" created="Tue, 17 Aug 2010 22:29:11 +0100"  >The attached patch makes a number of significant cleanup steps.&lt;br/&gt;
* What was previously the HttpCache interface and implementations is now the HttpCacheStorage interface.&lt;br/&gt;
* A new class (BasicHttpCache) and higher-level interface (HttpCache) were introduced to encapsulate both resource management and cache entry storage.&lt;br/&gt;
* As a result, a lot of dependencies could be removed from CachingHttpClient, making it much easier to understand.&lt;br/&gt;
* In turn, many of the mock-driven unit tests previously in TestCachingHttpClient were able to be turned into non-mock unit tests when they moved.&lt;br/&gt;
* Finally, added the MAX_CACHE_ENTRIES notion into CacheConfig, which can be passed as a constructor to all existing HttpCache and HttpCacheStorage implementations in addition to the CachingHttpClient itself.&lt;br/&gt;
&lt;br/&gt;
One follow up is that there is a Javadoc cleanup/addition pass that will be needed, which I would be happy to do as a subsequent patch (because this was a largish change I wanted to try to get the code changes into trunk first).&lt;br/&gt;
&lt;br/&gt;
This patch is contributed to the ASF with the permission of my employer.</comment>
                    <comment id="12899985" author="olegk" created="Wed, 18 Aug 2010 20:43:32 +0100"  >Patch checked in. Many thanks for contributing it, Jon.&lt;br/&gt;
&lt;br/&gt;
How certain are you about stability of HttpCache interface, though? Once 4.1 beta1 is released we will no longer be able to change it. Would it be worthwhile to consider making an abstract class out of it and making those methods that are unlikely to very in different implementations non-abstract?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12900025" author="cimjmoore" created="Wed, 18 Aug 2010 21:48:21 +0100"  >I think the easiest way to answer this will be to get the following cache implementations sanity-checked:&lt;br/&gt;
&lt;br/&gt;
1. your &amp;quot;store the bodies on the filesystem&amp;quot; cache&lt;br/&gt;
2. the memcached cache&lt;br/&gt;
3. the ehcache cache&lt;br/&gt;
&lt;br/&gt;
The one other suspicion I have is that the HttpCache#cacheEntry method might want to return an HttpResponse instead of an HttpCacheEntry. This would move revalidation into the BasicHttpCache, leaving the CachingHttpClient very simple indeed. I think let&amp;#39;s get #1-#3 shorn up and then see where we are.&lt;br/&gt;
&lt;br/&gt;
What is the target release date for 4.1-beta1?&lt;br/&gt;
</comment>
                    <comment id="12900216" author="olegk" created="Thu, 19 Aug 2010 09:41:15 +0100"  >We do not have to rush it, but would be nice to have beta1 released by the end of the year and 4.1 GA sometime in Q1 2011.&lt;br/&gt;
&lt;br/&gt;
I am going to cross-check ManagedHttpCacheStorage and related classes and probably add an option to save cache entries to disk, so that ManagedHttpCacheStorage can be fully persistent. &lt;br/&gt;
&lt;br/&gt;
Anyway, I really like the way things have been shaping up.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12452327" name="separate-cache-and-storage.patch" size="138543" author="cimjmoore" created="Tue, 17 Aug 2010 22:29:11 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 18 Aug 2010 19:43:32 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133980</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47333</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>