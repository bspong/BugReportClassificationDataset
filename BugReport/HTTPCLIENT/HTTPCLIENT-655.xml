<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:19:39 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-655/HTTPCLIENT-655.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-655] User-Agent string violates RFC</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-655</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Our User-Agent says &amp;quot;Jakarta Commons-HttpClient/3.1-rc1&amp;quot;. But space is a reserved character to separate individual *products* and comments according to RFC 2616, section 14.43. Jakarta is not a product. At the same time we may want to drop the Jakarta name altogether.&lt;br/&gt;
&lt;br/&gt;
We should change this to something more standard like: &lt;br/&gt;
&lt;br/&gt;
&amp;quot;Apache-HttpClient/3.1-rc1 (&amp;quot;+ System.getProperty(&amp;quot;os.name&amp;quot;) +&amp;quot;;&amp;quot;+ System.getProperty(&amp;quot;os.arch&amp;quot;) +&amp;quot;) &amp;quot;+&lt;br/&gt;
&amp;quot;Java/&amp;quot;+ System.getProperty(&amp;quot;java.vm.version&amp;quot;) +&amp;quot; (&amp;quot;+ System.getProperty(&amp;quot;java.vm.vendor&amp;quot;) +&amp;quot;)&amp;quot;&lt;br/&gt;
&lt;br/&gt;
which renders:&lt;br/&gt;
&lt;br/&gt;
&amp;quot;Apache-HttpClient/3.1-rc1 (Windows XP 5.1;x86) Java/1.5.0_08 (Sun Microsystems Inc.)&amp;quot;&lt;br/&gt;
&lt;br/&gt;
Sun&amp;#39;s internal Http client uses something like &amp;quot;Java/1.5.0_08&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
I am completely ignoring the fact that real-world user agents use almost arbitrary strings.&lt;br/&gt;
Some fine examples of misbehaviour from my private logs:&lt;br/&gt;
&lt;br/&gt;
&amp;quot;Jakmpqes dihurxf wfyiupsc&amp;quot; -- apparently somebody has to hide something...&lt;br/&gt;
&amp;quot;Missigua Locator 1.9&amp;quot;&lt;br/&gt;
&amp;quot;Poodle predictor 1.0&amp;quot;&lt;br/&gt;
&amp;quot;shelob v1.0&amp;quot;&lt;br/&gt;
&amp;quot;ISC Systems iRc Search 2.1&amp;quot;&lt;br/&gt;
&amp;quot;ping.blogug.ch aggregator 1.0&amp;quot;&lt;br/&gt;
&amp;quot;&lt;a href=&quot;http://www.uni-koblenz.de/~flocke/robot-info.txt&quot;&gt;http://www.uni-koblenz.de/~flocke/robot-info.txt&lt;/a&gt;&amp;quot;  -- ...sigh&lt;br/&gt;
&lt;br/&gt;
I am very tempted to write a User-Agent string validator that prevents misuse of this field in HttpClient.</description>
                <environment></environment>
            <key id="12370851">HTTPCLIENT-655</key>
            <summary>User-Agent string violates RFC</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="oglueck">Ortwin Gl&#252;ck</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jun 2007 16:13:39 +0100</created>
                <updated>Fri, 20 Jul 2007 19:36:11 +0100</updated>
                    <resolved>Tue, 3 Jul 2007 09:27:08 +0100</resolved>
                            <version>3.1 RC1</version>
                                <fixVersion>4.0 Alpha 1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12501982" author="rolandw" created="Wed, 6 Jun 2007 17:51:50 +0100"  >Hi Odi,&lt;br/&gt;
&lt;br/&gt;
a) I don&amp;#39;t think we should make significant changes to the User-Agent header in the 3.1 code base, like dropping Jakarta from it. People may have set up filter rules that rely on the name. That is also the reason why I&amp;#39;m not sure about changing anything but the version indicator at all. Since it&amp;#39;s an RFC violation, we might change the space character to a dash. Btw, section 3.8 of RFC 2616 also mentions:&lt;br/&gt;
[quote]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;successive versions of the same product SHOULD only differ in the product-version portion of the product value&lt;br/&gt;
[/quote]&lt;br/&gt;
What is the lesser evil here?&lt;br/&gt;
&lt;br/&gt;
b) Dropping Jakarta for the 4.0 code base is fine. What I don&amp;#39;t like are calls to System.getProperty() to collect a user agent string, at least not in the default User-Agent interceptor. We can have a selection of them of course. Like one that says Apache-HttpCore/J-4.0-a5 in core and another one that says Apache-HttpClient/J-4.0-a1 in client. And another one that collects values from system properties.&lt;br/&gt;
(I&amp;#39;d like to see the version number being updated by the build process, but I don&amp;#39;t have the time nor inclination to learn Maven2...)&lt;br/&gt;
&lt;br/&gt;
c) You suggestion also generates space characters in &amp;quot;(Windows XP 5.1;x86) and &amp;quot;(Sun Microsystems Inc.)&amp;quot; ;-)&lt;br/&gt;
&lt;br/&gt;
d) A request interceptor that checks a header for compliance is a _really_ good idea. I am in favor of enabling such verification interceptors by default. People will never learn to comply with specifications unless exceptions are thrown into their faces. Misbehaviour must be punished, immediately and without mercy (Dubious API Dictator Roland ;-)&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12502025" author="oglueck" created="Wed, 6 Jun 2007 19:40:20 +0100"  >Hi Roland,&lt;br/&gt;
&lt;br/&gt;
I agree that changing the User-Agent string may break existing filtering rules. So better don&amp;#39;t change that now.&lt;br/&gt;
&lt;br/&gt;
System properties: Well, yes, they are a bit nasty (SecurityManager comes to mind). But that&amp;#39;s the official way to obtain that sort of information. Look at other User-Agent strings and you will see that most of them carry this information.&lt;br/&gt;
&lt;br/&gt;
Spaces are legal within a comment. That is the text between parantheses.&lt;br/&gt;
&lt;br/&gt;
Okay, I&amp;#39;ll happily contribute a User-Agent validator :-)&lt;br/&gt;
&lt;br/&gt;
Odi</comment>
                    <comment id="12509791" author="olegk" created="Tue, 3 Jul 2007 09:27:08 +0100"  >Fixed in SVN trunk. The User-Agent string now conforms to the standard defined in RFC 2616 and looks like &amp;quot;Apache-HttpClient/&amp;quot; + VersionInfo.getReleaseVersion() + &amp;quot; (java 1.4)&amp;quot;&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 6 Jun 2007 16:51:50 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133694</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47877</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>