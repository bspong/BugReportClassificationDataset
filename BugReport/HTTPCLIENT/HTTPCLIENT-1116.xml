<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:13:01 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-1116/HTTPCLIENT-1116.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-1116] ResponseCachingPolicy uses integers for sizes</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-1116</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>ResponseCachingPolicy currently uses integers for interpreting the size of Content-Length, as well internally.&lt;br/&gt;
&lt;br/&gt;
This causes issues in attempting to use the module for caching entities that are over 2GB in size, the module does not fail gracefully, but throws a NumberFormatException&lt;br/&gt;
&lt;br/&gt;
I have a patch that fixes this, by promoting the int -&amp;gt; long, which should allow for larger entities to be cached, it also updates the public facing API where possible, I don&amp;#39;t think that the promotion should break compatibility massively&lt;br/&gt;
&lt;br/&gt;
The changes can also be seen here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/GregBowyer/httpclient/commit/1197d3f94bd2eedcec32646cd6146748ca2e6fa1&quot;&gt;https://github.com/GregBowyer/httpclient/commit/1197d3f94bd2eedcec32646cd6146748ca2e6fa1&lt;/a&gt;</description>
                <environment></environment>
            <key id="12518740">HTTPCLIENT-1116</key>
            <summary>ResponseCachingPolicy uses integers for sizes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="gbowyer@fastmail.co.uk">Greg Bowyer</reporter>
                        <labels>
                        <label>cache</label>
                        <label>policy</label>
                    </labels>
                <created>Fri, 12 Aug 2011 21:42:03 +0100</created>
                <updated>Sun, 18 Sep 2011 17:33:48 +0100</updated>
                    <resolved>Sun, 18 Sep 2011 17:33:48 +0100</resolved>
                            <version>4.1.1</version>
                                <fixVersion>4.2 Alpha1</fixVersion>
                                <component>HttpCache</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13084364" author="gbowyer@fastmail.co.uk" created="Fri, 12 Aug 2011 21:43:31 +0100"  >Made the caching policy use longs instead of ints for content sizes</comment>
                    <comment id="13084585" author="olegk" created="Sat, 13 Aug 2011 12:06:56 +0100"  >Greg,&lt;br/&gt;
There is certainly a way to fix the problem without breaking API compatibility at all, which would be preferred.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="13084885" author="gbowyer@fastmail.co.uk" created="Sun, 14 Aug 2011 20:03:50 +0100"  >I might be dumb here, but the return type of CacheConfig.getMaxObjectSizeBytes currently returns an int, I cant see how to change that without breaking the API (a little)&lt;br/&gt;
&lt;br/&gt;
Everything else should be fine, but that method poses a problem</comment>
                    <comment id="13084886" author="olegk" created="Sun, 14 Aug 2011 20:18:49 +0100"  >Change internal representation of maxObjectSizeBytes from int to long, deprecate CacheConfig.getMaxObjectSizeBytes make it return maxObjectSizeBytes value cast to int, add another method with a similar name (say CacheConfig#getMaxObjectSize) that returns maxObjectSizeBytes as long, do the same for setters, make sure HttpClient cache classes use new methods only.&lt;br/&gt;
&lt;br/&gt;
I think this should do the trick.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="13084890" author="gbowyer@fastmail.co.uk" created="Sun, 14 Aug 2011 20:51:39 +0100"  >Ah check, I thought that might add confusion as the API does not appear to have many deprecated methods. I will try to get the done by Monday&lt;br/&gt;
&lt;br/&gt;
If I cast getMaxObjectSizeBytes to an int, whhich is the desirable behaviour if maxObjectSizeBytes &amp;gt; Integer.MAX_VALUE&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- throw an exception&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- return (maxObjectSizeBytes &amp;gt;= Integer.MAX_VALUE) ? Integer.MAX_VALUE : (int) maxObjectSizeBytes&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- allow the thing to miscast and overflow into negative numbers&lt;br/&gt;
&lt;br/&gt;
I think the exception would be the preferred idea, but then that breaks the API at runtime :S&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</comment>
                    <comment id="13084907" author="olegk" created="Sun, 14 Aug 2011 22:28:52 +0100"  >As far as I can tell the second option should be good enough.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="13107466" author="olegk" created="Sun, 18 Sep 2011 17:33:48 +0100"  >Patch checked in with minor tweaks to preserve binary compatibility with 4.1&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12490287" name="0001-Changed-the-ResponseCachingPolicy-to-use-longs.patch" size="7409" author="gbowyer@fastmail.co.uk" created="Fri, 12 Aug 2011 21:43:31 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sat, 13 Aug 2011 11:06:56 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>60271</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>46941</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>