<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:22:13 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-917/HTTPCLIENT-917.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-917] When authentication is invalidated during redirection, proxy authentication also should be invalidated</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-917</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>This was discovered during use by Lucene Connector Framework, on 3.1.&lt;br/&gt;
&lt;br/&gt;
When a document is fetched through a proxy authenticated with NTLM, and&lt;br/&gt;
that document is a redirection (301 or 302), the httpclient fails to&lt;br/&gt;
properly use the right proxy credentials on the subsequent document&lt;br/&gt;
fetch. This leads to 407 errors on these kinds of documents.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve attached a proposed patch.&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12457215">HTTPCLIENT-917</key>
            <summary>When authentication is invalidated during redirection, proxy authentication also should be invalidated</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="kwright@metacarta.com">Karl Wright</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2010 20:44:49 +0000</created>
                <updated>Tue, 25 Jan 2011 10:59:30 +0000</updated>
                    <resolved>Wed, 24 Feb 2010 19:33:10 +0000</resolved>
                            <version>3.1 (end of life)</version>
                                <fixVersion>3.1.1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12837484" author="olegk" created="Tue, 23 Feb 2010 22:33:28 +0000"  >Karl,&lt;br/&gt;
&lt;br/&gt;
The 3.1 code line is pretty much at end of life. I can commit the patch but there will be no official releases from the 3.x code line. Please consider upgrading to HttpClient 4.0&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12837489" author="kwright@metacarta.com" created="Tue, 23 Feb 2010 22:43:17 +0000"  >I&amp;#39;m aware of 3.1&amp;#39;s older status, but 4.x is not yet available via the stable debian distribution, so until it is available that&amp;#39;s the version I&amp;#39;m stuck with.&lt;br/&gt;
&lt;br/&gt;
In any case, the goal of this submission is as much to verify that 4.x does not have the problem as it is to request a fix in 3.1.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12837680" author="oglueck" created="Wed, 24 Feb 2010 08:27:32 +0000"  >Then I suggest you file the issue with Debian.</comment>
                    <comment id="12837684" author="kwright@metacarta.com" created="Wed, 24 Feb 2010 08:38:54 +0000"  >&amp;quot;Then I suggest you file the issue with Debian. &amp;quot;&lt;br/&gt;
That is what I have done.  But that is nevertheless immaterial if this problem still exists in HttpClient 4.0, which I believe is the latest stable release.  Can you guarantee that it is resolved in that version?&lt;br/&gt;
</comment>
                    <comment id="12837701" author="olegk" created="Wed, 24 Feb 2010 09:12:48 +0000"  >Karl,&lt;br/&gt;
&lt;br/&gt;
(1) HttpComponents is an open-source project overseen by ASF. The only thing we can truly _guarantee_ here is that you get full source code and _nothing_ else. &lt;br/&gt;
&lt;br/&gt;
(2) HttpClient 4.0 does a lot of things very differently compared to HttpClient 3.1, so there is really no way of telling whether the problem is still there without proper testing. However, just by looking at the code I do think HttpClient 4.0 is no longer affected by the bug.&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://hc.apache.org/httpcomponents-client/httpclient/xref/org/apache/http/impl/client/DefaultRequestDirector.html#995&quot;&gt;http://hc.apache.org/httpcomponents-client/httpclient/xref/org/apache/http/impl/client/DefaultRequestDirector.html#995&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
(3) I will commit your patch to the 3.x branch tonight.&lt;br/&gt;
&lt;br/&gt;
(4) I am not sure I fully understand why you are not able to upgrade Lucene Connector Framework to the latest version of HttpClient and what this has to do with Debian stable. &lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
</comment>
                    <comment id="12837716" author="kwright@metacarta.com" created="Wed, 24 Feb 2010 09:42:16 +0000"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
Believing it is resolved is good enough for me - thanks.&lt;br/&gt;
&lt;br/&gt;
The issue of adoption of 4.x is complex.  There are several stakeholders involved here, so maybe a little background will help.&lt;br/&gt;
&lt;br/&gt;
First, Lucene Connector Framework&amp;#39;s code base was recently granted to ASF by MetaCarta, Inc..  MetaCarta works primarily in the debian world, and the debian world has limited itself to HttpClient 3.1 for the medium-term future.  Internal politics at MetaCarta make it hard for me to adopt packages later than those in the current debian distribution, but having said that, I can certainly lobby for permission to create my own httpclient 4.1 debian package for MetaCarta&amp;#39;s use.&lt;br/&gt;
&lt;br/&gt;
Second, let me put on my LCF hat.  For LCF&amp;#39;s purposes, 4.x&amp;#39;s approach of having Httpclient&amp;#39;s NTLM support be optional and reliant on jCIFS is problematic as well, since jCIFS is LGPL licensed.  This is not insurmountable, but it is certainly a major complication.  Now, the MetaCarta LCF Apache grant included a patch file for HttpClient 3.1-2 which included code for all three tickets I&amp;#39;ve submitted - and also includes a fully granted implementation of NTLM for HttpClient, which I&amp;#39;ve attached to ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-919&quot; title=&quot;NTLM implementation lacks support for NTLMv1, NTLMv2, and NTLM2 Session forms of NTLM&quot;&gt;&lt;strike&gt;HTTPCLIENT-919&lt;/strike&gt;&lt;/a&gt;.  If you folks decide accept it, and use it in the 4.x code base, then our path to using 4.x in LCF is simply a matter of mechanics and time.&lt;br/&gt;
&lt;br/&gt;
Finally, my overriding goal here has been to start the process of reconciling LCF&amp;#39;s version of HttpClient with the version being distributed, so this is hoped to be an ongoing discussion.&lt;br/&gt;
&lt;br/&gt;
Hope this helps....&lt;br/&gt;
&lt;br/&gt;
Karl&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12837727" author="olegk" created="Wed, 24 Feb 2010 09:54:11 +0000"  >&amp;gt; a fully granted implementation of NTLM for HttpClient&lt;br/&gt;
&lt;br/&gt;
What exactly do you mean by granted implementation? Granted by what entity? Is Microsoft aware of this implementation and of the fact that this code can be distributed as a part of an open source project?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12837745" author="kwright@metacarta.com" created="Wed, 24 Feb 2010 11:26:31 +0000"  >The implementation is effectively a clean-room implementation of client-side NTLM, based on published web protocol descriptions, and with some protocol clarifications from Michael Allen.  So we believe it does not violate anyone&amp;#39;s copyright.&lt;br/&gt;
&lt;br/&gt;
No warranty is granted that it does not violate any Microsoft patents.  However, please note that there are at least two other open source projects out there that distribute code that is functionally similar.  These are:&lt;br/&gt;
&lt;br/&gt;
- jCIFS (jcifs.samba.org), which you are familiar&lt;br/&gt;
- curl, which I presume you have heard of also&lt;br/&gt;
&lt;br/&gt;
Can you clarify what patents you believe to be in play here?  We may be able to do some independent research to see if these concerns appear to be warranted.&lt;br/&gt;
&lt;br/&gt;
Thanks,&lt;br/&gt;
Karl&lt;br/&gt;
</comment>
                    <comment id="12837757" author="olegk" created="Wed, 24 Feb 2010 12:27:55 +0000"  >I am not a patent lawyer, so whatever I have to say on the matter has no bearing of what so ever. The only group of people that can make definitive statements on the matter is the ASF legal committee. If they decide it is okay to use algorithms in the ASF code that may _potentially_ be covered by patents held by Microsoft, the matter would be settled. However, given the fact they have been unable to make up their mind about the use of LGPL code in ASF code for years, I would not be holding my breath.&lt;br/&gt;
&lt;br/&gt;
Welcome to the wonderful world of ASF bureaucracy.&lt;br/&gt;
&lt;br/&gt;
Until this matter is decided upon by the ASF legal people I _personally_ will not touch Microsoft specific code with a barge pole. If MetaCarta, Inc have enough lawyers sitting around, good for you. I am just a regular guy writing code at his spare time. A mere potential threat of a lawsuit is enough for me.  &lt;br/&gt;
&lt;br/&gt;
I am aware of multiple open-source implementations of the NTLM protocol. However this is not a copyright matter, but that of intellectual property rights. This is about a liability for the use of Microsoft IP in commercial products, not for writing open-source code. The existence of open-source implementations does not prove or disprove anything.</comment>
                    <comment id="12837969" author="olegk" created="Wed, 24 Feb 2010 19:33:10 +0000"  >Patch checked in.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12436754" name="proxy-auth-invalidate.patch" size="799" author="kwright@metacarta.com" created="Tue, 23 Feb 2010 20:46:19 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 23 Feb 2010 22:33:28 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133924</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47366</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>