<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:21:28 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-834/HTTPCLIENT-834.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-834] Transparent Content Coding support</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-834</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>I would like to see HttpClient features brought up to parity with other libraries, both in Java and other languages. c.f. Python&amp;#39;s httplib2 (not yet in the standard library, but many would like to see it in there). That library transparently handles gzip and compress content codings.&lt;br/&gt;
&lt;br/&gt;
This issue is to capture possible solutions to providing this sort of innate functionality in HttpClient, so that users aren&amp;#39;t required to know RFC2616 intimately. The HttpClient library should do the right thing and use the network in the most efficient manner possible.</description>
                <environment>Any</environment>
            <key id="12416925">HTTPCLIENT-834</key>
            <summary>Transparent Content Coding support</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jabley">James Abley</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Mar 2009 21:15:04 +0000</created>
                <updated>Tue, 25 Jan 2011 10:59:10 +0000</updated>
                    <resolved>Wed, 4 Nov 2009 19:26:24 +0000</resolved>
                            <version>4.0 Beta 2</version>
                                <fixVersion>4.1 Alpha1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12682176" author="jabley" created="Sun, 15 Mar 2009 21:23:46 +0000"  >I&amp;#39;ve implemented gzip and deflate support already - patch to follow once I get my git fu sorted.&lt;br/&gt;
&lt;br/&gt;
compress I&amp;#39;m not so familiar with, and identity is a no-op so requires no changes.&lt;br/&gt;
&lt;br/&gt;
The patch has been implemented so that it won&amp;#39;t interfere with existing clients if they are already setting an Accept-Encoding header in the request.</comment>
                    <comment id="12682180" author="jabley" created="Sun, 15 Mar 2009 21:44:30 +0000"  >Initial patch which introduces gzip and deflate support.&lt;br/&gt;
&lt;br/&gt;
Sorry, mangled git patch. If any of the committers use git, then they should be able to apply it. Otherwise, I&amp;#39;ll need to spend some more time understanding how to generate a patch suitable for application with the patch command.</comment>
                    <comment id="12682318" author="olegk" created="Mon, 16 Mar 2009 13:54:45 +0000"  >Hi James&lt;br/&gt;
&lt;br/&gt;
(1) ThreadLocals are often considered evil and ought to be avoided, especially in general purpose libraries. If you need to persist some data between different interceptors please consider using HttpContext. This is precisely what it is meant for.&lt;br/&gt;
&lt;br/&gt;
(2) Please consider providing some means of defining applicable content coding algorithms and their order of preference. &lt;br/&gt;
&lt;br/&gt;
(3) Patch utility compatible diff would be nice.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12682434" author="jabley" created="Mon, 16 Mar 2009 19:54:43 +0000"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
Thanks for the feedback.&lt;br/&gt;
&lt;br/&gt;
1) Thanks, I wasn&amp;#39;t aware of the idiomatic way to do that, so I&amp;#39;ll change it. Can you share why you feel ThreadLocals are so bad? I wasn&amp;#39;t aware of any issues and would like to know more.&lt;br/&gt;
&lt;br/&gt;
2) I don&amp;#39;t follow. Can you provide more information, or maybe describe it as a test?&lt;br/&gt;
&lt;br/&gt;
3) Will do. I just wanted to get it out there for discussion. UPDATE: Actually, patch -p1 &amp;lt;path/to/patch works for me.&lt;br/&gt;
&lt;br/&gt;
Cheers,&lt;br/&gt;
&lt;br/&gt;
James</comment>
                    <comment id="12682460" author="olegk" created="Mon, 16 Mar 2009 20:57:55 +0000"  >(1) Because ThreadLocals, when misused/abused, can lead to memory leaks or, worse, very subtle bugs, especially in managed environments such as servlet or EJB containers, where threads are frequently pooled / re-used. The most catastrophic bug I have seen involved a ThreadLocal holding a UserPrincipal in a web application, which was not correctly unset with a try-catch-finally. You can pretty much guess the consequence of that bug. &lt;br/&gt;
&lt;br/&gt;
The only two legitimate uses of ThreadLocal I know of is (1) in single-user standalone applications or (2) in web applications when ThreadLocals set and unset using a HttpServletFilter in try-catch-finally. ThreadLocal simply cannot be reliably unset from inside a library. ThreadLocals in general purpose libraries == major trouble.&lt;br/&gt;
&lt;br/&gt;
(2) There should be a way to instruct the interceptor to generate different Accept-Encoding values, for example &amp;#39;gzip,deflate&amp;#39;, &amp;quot;deflate,gzip&amp;quot;, &amp;quot;identity&amp;quot;, etc, based a configuration parameter.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12682495" author="sebb@apache.org" created="Mon, 16 Mar 2009 22:39:25 +0000"  >Two discussions of ThreadLocal that might be useful:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://blog.arendsen.net/index.php/2005/02/16/threadlocals-are-evil/&quot;&gt;http://blog.arendsen.net/index.php/2005/02/16/threadlocals-are-evil/&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://crazybob.org/2006/07/hard-core-java-threadlocal.html&quot;&gt;http://crazybob.org/2006/07/hard-core-java-threadlocal.html&lt;/a&gt;&lt;br/&gt;
</comment>
                    <comment id="12682497" author="jabley" created="Mon, 16 Mar 2009 22:40:40 +0000"  >1) OK, thanks for the clarification. That pretty much ties with my understanding, but I thought it was a reasonable approach at the time and seemed in line with recommendations from Java Concurrency in Practice. I&amp;#39;ve removed the usage as you suggested.&lt;br/&gt;
&lt;br/&gt;
2) I initially thought you wanted to specify quality values. But you&amp;#39;re describing something similar. I&amp;#39;m still not clear why that requires configuration. If the user doesn&amp;#39;t want the interceptor to indicate to the server that various content codings are supported, the user can specify their own Accept-Encoding header for the request and the request won&amp;#39;t be altered and the response won&amp;#39;t be processed by the new interceptors. Indeed, that behaviour is there to ensure that it doesn&amp;#39;t break any existing clients that may be using an interceptor already to support this functionality. Although thinking about that, the new interceptor is getting added before the client has a chance to add an interceptor, so the new ones that I&amp;#39;ve written will fire before a user-provided one gets a chance to handle the request response. Is that the issue? What else am I missing? Can you point me at an example of something similar that already exists, for configuration parameters?&lt;br/&gt;
&lt;br/&gt;
As as aside, is there any reason why the Javadocs aren&amp;#39;t built as part of the site hosted at apache?</comment>
                    <comment id="12682639" author="olegk" created="Tue, 17 Mar 2009 11:32:02 +0000"  >I was thinking about something along this line:&lt;br/&gt;
&lt;br/&gt;
{{{&lt;br/&gt;
enum ContentCoding { identity, gzip, deflate };&lt;br/&gt;
}}}    &lt;br/&gt;
&lt;br/&gt;
{{{&lt;br/&gt;
@SuppressWarnings(&amp;quot;unchecked&amp;quot;)&lt;br/&gt;
Collection&amp;lt;ContentCoding&amp;gt; codings = (Collection&amp;lt;ContentCoding&amp;gt;) request.getParams().getParameter(&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;http.protocol.accept-encoding&amp;quot;);&lt;br/&gt;
if (codings != null) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Add Accept-Encoding header&lt;br/&gt;
}&lt;br/&gt;
}}}&lt;br/&gt;
&lt;br/&gt;
&amp;gt;&amp;gt; Although thinking about that, the new interceptor is getting added before the client has a chance to add an interceptor, so the new ones that I&amp;#39;ve written &lt;br/&gt;
&amp;gt;&amp;gt; will fire before a user-provided one gets a chance to handle the request response.Is that the issue? &lt;br/&gt;
&lt;br/&gt;
I am afraid it is. The content processor in its current form will break existing code that relies on protocol interceptors to transparently handle content encoding. This is the reason I would like to have an explicit configuration parameter the user would have to set in order to enable content processing.&lt;br/&gt;
&lt;br/&gt;
&amp;gt;&amp;gt; Can you point me at an example of something similar that already exists, for configuration parameters? &lt;br/&gt;
&lt;br/&gt;
Take a look at the default header interceptor, which populates HTTP request headers dynamically based on a configuration parameter&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://hc.apache.org/httpcomponents-client/httpclient/xref/org/apache/http/client/protocol/RequestDefaultHeaders.html&quot;&gt;http://hc.apache.org/httpcomponents-client/httpclient/xref/org/apache/http/client/protocol/RequestDefaultHeaders.html&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
</comment>
                    <comment id="12682656" author="jabley" created="Tue, 17 Mar 2009 12:26:28 +0000"  >Cool.&lt;br/&gt;
&lt;br/&gt;
I am still aiming for a transparent implementation that won&amp;#39;t do anything if the user has configured their own behaviour, and will do the right thing (be in effect) if they haven&amp;#39;t. I&amp;#39;m hopeful that we&amp;#39;re not yet at the stage where this will require explicitly enabling to work.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll create a failing test to demonstrate how it will impact existing protocol interceptors, then fix it and see what falls out of that.&lt;br/&gt;
&lt;br/&gt;
Thanks for your help; it&amp;#39;s always good to collaborate with new people and get new insights.</comment>
                    <comment id="12682821" author="jabley" created="Tue, 17 Mar 2009 21:53:32 +0000"  >Git based patch and same again for SVN.&lt;br/&gt;
SVN patch sets svn:eol-style=native.&lt;br/&gt;
&lt;br/&gt;
This patch is re-worked to avoid breaking existing clients that may already be doing something like this.</comment>
                    <comment id="12683066" author="olegk" created="Wed, 18 Mar 2009 16:40:23 +0000"  >I reviewed the patch and checked in the patch to the 4.1 branch:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/httpcomponents/httpclient/branches/branch_4_1/&quot;&gt;http://svn.apache.org/repos/asf/httpcomponents/httpclient/branches/branch_4_1/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=755629&amp;view=rev&quot;&gt;http://svn.apache.org/viewvc?rev=755629&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Many thanks for this contribution, James.&lt;br/&gt;
&lt;br/&gt;
I am also going to add your name to the list of project contributors, if do not mind.&lt;br/&gt;
&lt;br/&gt;
The only problem with the current approach is that there is no way to disable or customize the way content coding is handled per default. One can remove any standard protocol interceptor and replace it with a custom one. This obviously will not work for ContentProcessor, which is not nice. An alternative solution might be to simply use a different implementation class derived from DefaultHttpClient.&lt;br/&gt;
&lt;br/&gt;
I am looking forward to follow-up patches ;-)&lt;br/&gt;
&lt;br/&gt;
Would you also be willing to look into content caching at some point of time?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12683150" author="jabley" created="Wed, 18 Mar 2009 20:24:28 +0000"  >W00t! By all means list me as a contributor. I wasn&amp;#39;t expecting it to be accepted yet; I thought it was still a little rough. I hadn&amp;#39;t found a coding style guide, so I was expecting some feedback there, apache license header, maybe a contributors agreement to submit? Not that I&amp;#39;m complaining. Thank you.&lt;br/&gt;
&lt;br/&gt;
If the demand is there to allow it to be configured / removed, then we can add that.&lt;br/&gt;
&lt;br/&gt;
I would like to look at content caching. I would think that&amp;#39;s a bit more involved and I&amp;#39;m not sure that I can commit the time that I think it would require at the moment, but it&amp;#39;s definitely something that I&amp;#39;d like to see in the library. Or I might see what else is in JIRA that looks fun, that would take the amount of time that I can commit to at the moment.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll also have to give it some thought as to how that might be implemented. I&amp;#39;ve got a little too much baggage in terms of how I&amp;#39;ve implemented something like that using httpclient-3.x and ehcache, so I need to step back and think about it using the 4.x API and (pluggable) cache implementations.&lt;br/&gt;
&lt;br/&gt;
James</comment>
                    <comment id="12683196" author="olegk" created="Wed, 18 Mar 2009 22:03:28 +0000"  >&amp;gt; I wasn&amp;#39;t expecting it to be accepted yet; I thought it was still a little rough&lt;br/&gt;
&lt;br/&gt;
The work is far from being done. I just prefer smaller, incremental patches.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; maybe a contributors agreement to submit&lt;br/&gt;
&lt;br/&gt;
Yes, you should consider submitting an indivudual CLA, maybe even a corporate CLA, if you are working on HttpClient during office hours&lt;br/&gt;
&lt;br/&gt;
&amp;gt; If the demand is there to allow it to be configured / removed, then we can add that&lt;br/&gt;
&lt;br/&gt;
It surely must be possible to disable content encoding. There are enough situations when it is not desired, for instance when trouble-shooting.  I am still not convinced it should be enabled per default.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12737570" author="jabley" created="Fri, 31 Jul 2009 16:35:36 +0100"  >Sorry, didn&amp;#39;t mean to go dark for so long. Moving house and Real Work got in the way. I&amp;#39;d like to bring this to a conclusion.&lt;br/&gt;
&lt;br/&gt;
Where in SVN should I target now, and is there IRC or something?</comment>
                    <comment id="12737575" author="olegk" created="Fri, 31 Jul 2009 16:58:21 +0100"  >Welcome back, James.&lt;br/&gt;
&lt;br/&gt;
Not much has changed since I committed your patch. The code is still in the 4.1 branch (to be merged down to trunk after 4.0 GA release) [1]. I am still of the same opinion that DefaultHttpClient ought not have the transparent content coding enabled per default (there are different options of solving the problem, &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-838&quot; title=&quot;HttpClientConfigurator: configuration code for httpClient instance&quot;&gt;&lt;strike&gt;HTTPCLIENT-838&lt;/strike&gt;&lt;/a&gt; being one). You should still consider submitting an an individual or a corporate CLA.&lt;br/&gt;
&lt;br/&gt;
All discussions about HttpCore / HttpClient development should take place on the dev mailing list.&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;http://svn.apache.org/repos/asf/httpcomponents/httpclient/branches/branch_4_1/&quot;&gt;http://svn.apache.org/repos/asf/httpcomponents/httpclient/branches/branch_4_1/&lt;/a&gt; </comment>
                    <comment id="12739180" author="jabley" created="Tue, 4 Aug 2009 22:28:49 +0100"  >Speculative patch to show how it could be disabled. If this was decided as a reasonable way to go, then the ContentEncodingProcessor would need to be made public and put into a different package, to highlight that it is part of the published API. I still strongly feel that this behaviour should be enabled by default, but it is also necessary to give us the out of turning it off. Is the special case shown here worthwhile, or could it be accomplished in another way?&lt;br/&gt;
&lt;br/&gt;
Also added some additional filtering for the Content-Encoding header in the response - if the ResponseProcessor handles it, then we should probably remove the existence of that header from the client application.</comment>
                    <comment id="12740029" author="olegk" created="Thu, 6 Aug 2009 13:37:26 +0100"  >James,&lt;br/&gt;
&lt;br/&gt;
What is the reason for your opposition to the idea of just using a subclass of DefaultHttpClient for transparent content coding? This would make ContentEncodingProcessor and even possibly the config parameter unnecessary altogether.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12740049" author="jabley" created="Thu, 6 Aug 2009 14:23:38 +0100"  >Oleg,&lt;br/&gt;
&lt;br/&gt;
I hopefully described in the ticket why I think that this should work out of the box without requiring changes for existing clients. That&amp;#39;s why I&amp;#39;m trying to get it working as part of the existing API.&lt;br/&gt;
&lt;br/&gt;
If the functionality that I&amp;#39;m describing was done by adding a new ContentEncodingHttpClient, then what do we think the impact of this is? Would people need to alter their code (or maybe just Spring / Guice / etc configuration)? I think that complicates the API surface area and increases the semantic load on client developers. I don&amp;#39;t think the clients should be required to know these details of the RFC;  application developers typically want to write code at a different level and expect that the library abstraction will do the right thing at its level.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m happy to write a version that subclasses as you suggest and see how it feels from a client perspective. Should that be based on trunk or the existing 4.1 branch?&lt;br/&gt;
&lt;br/&gt;
James</comment>
                    <comment id="12740078" author="olegk" created="Thu, 6 Aug 2009 15:17:34 +0100"  >&amp;gt; I hopefully described in the ticket why I think that this should work out of the box without requiring changes for existing clients. &lt;br/&gt;
&amp;gt; That&amp;#39;s why I&amp;#39;m trying to get it working as part of the existing API. &lt;br/&gt;
&lt;br/&gt;
Yes, you did, but I still think the chance of breaking existing apps in some subtle ways is simply too high to have this feature enabled per default. &lt;br/&gt;
&lt;br/&gt;
&amp;gt; Would people need to alter their code (or maybe just Spring / Guice / etc configuration)?&lt;br/&gt;
&lt;br/&gt;
Those who use a DI framework to wire together their components this would be a one liner config change.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Should that be based on trunk or the existing 4.1 branch? &lt;br/&gt;
&lt;br/&gt;
4.1 branch. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12750689" author="jabley" created="Wed, 2 Sep 2009 22:53:09 +0100"  >Re-worked to use a new subclass of DefaultHttpClient.</comment>
                    <comment id="12751147" author="olegk" created="Thu, 3 Sep 2009 21:46:34 +0100"  >James,&lt;br/&gt;
&lt;br/&gt;
What happened to the patch? It is no longer there. Did you delete it?&lt;br/&gt;
&lt;br/&gt;
I merged most of your changes from 4.1 branch to the trunk. I did not merge changes to the AbstractHttpClient class, though, as I hope they will not be necessary. Please work with the trunk from now on.&lt;br/&gt;
&lt;br/&gt;
Cheers&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12754664" author="jabley" created="Sun, 13 Sep 2009 07:00:40 +0100"  >Not sure about this patch. &lt;br/&gt;
&lt;br/&gt;
generated via  svn diff &amp;gt; some/file, but I&amp;#39;m not sure that it applies cleanly.&lt;br/&gt;
&lt;br/&gt;
$ svn --version&lt;br/&gt;
svn, version 1.5.4 (r33841)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;compiled Aug  7 2009, 01:44:11&lt;br/&gt;
&lt;br/&gt;
The operations are simple -&lt;br/&gt;
# 3 moves,&lt;br/&gt;
# fix up the imports&lt;br/&gt;
# add a new class.&lt;br/&gt;
# Add new test and cleanup in an existing class&lt;br/&gt;
&lt;br/&gt;
If it won&amp;#39;t apply to trunk, I&amp;#39;ll re-submit.</comment>
                    <comment id="12754674" author="olegk" created="Sun, 13 Sep 2009 09:39:57 +0100"  >Hi James&lt;br/&gt;
&lt;br/&gt;
Many thanks for contributing the patch. I committed it to the SVN trunk. Please review / double-check. I think we are almost t here. There is still a few outstanding tasks, though, that must be tackled before we could close the issue as resolved. &lt;br/&gt;
&lt;br/&gt;
(1) All TODOs need to be looked into. I would also consider splitting ContentEncodingProcessor into two separate interceptors. &lt;br/&gt;
(2) A new section on content encoding needs to be added to the tutorial.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12754681" author="jabley" created="Sun, 13 Sep 2009 12:11:57 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
Good to hear; I should be able to take a look later today unless Real Work rears its head again. Could you elaborate as to why you feel ContentEncodingProcessor should be split out?&lt;br/&gt;
&lt;br/&gt;
James</comment>
                    <comment id="12754688" author="olegk" created="Sun, 13 Sep 2009 14:13:30 +0100"  >&amp;gt; Could you elaborate as to why you feel ContentEncodingProcessor should be split out? &lt;br/&gt;
&lt;br/&gt;
I _personally_ prefer fine-grained interceptors, one per unit of work or a header type. For instance, one may want to remove the request interceptor that generates Accept-Encoding headers while still keeping the Content-Encoding response interceptor in the protocol chain.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12754915" author="jabley" created="Mon, 14 Sep 2009 11:40:22 +0100"  >TODOs I&amp;#39;ve found relate to adding support for compress Content-Encoding [1]. I&amp;#39;ve never encountered a server that uses this? &lt;br/&gt;
&lt;br/&gt;
The request / response interceptors currently set a flag in the context to show whether the response should be processed. Should that aspect be retained if I split them out?&lt;br/&gt;
&lt;br/&gt;
Also, should ClientContext be a class rather than an interface? It just contains constants, rather than defining any sort of abstraction.&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.5&quot;&gt;http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.5&lt;/a&gt;</comment>
                    <comment id="12754979" author="olegk" created="Mon, 14 Sep 2009 14:44:20 +0100"  >&amp;gt; TODOs I&amp;#39;ve found relate to adding support for compress Content-Encoding&lt;br/&gt;
&lt;br/&gt;
If you think compress is completely useless, we still have to make sure HttpClient reacts intelligently when encounters compress coded content, for instance by throwing an exception&lt;br/&gt;
&lt;br/&gt;
&amp;gt; The request / response interceptors currently set a flag in the context to show whether the response should be processed. &lt;br/&gt;
&amp;gt; Should that aspect be retained if I split them out?&lt;br/&gt;
&lt;br/&gt;
I _personally_ do not think the flag is necessary anymore, but I do not want to impose a particular way of doing things onto you&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Also, should ClientContext be a class rather than an interface? It just contains constants, rather than defining any sort of abstraction.&lt;br/&gt;
&lt;br/&gt;
Roland (who is no longer involved in the project) had a tendency to prefer interfaces over classes for defining constants, mainly because of support for multiple inheritance. Now it is too late.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12755009" author="sebb@apache.org" created="Mon, 14 Sep 2009 15:53:58 +0100"  >Re: constants - one approach I&amp;#39;ve used is to define the constants in an interface, but also create a class that implements the interface.&lt;br/&gt;
&lt;br/&gt;
Also, in Java 1.5 one can use import static from the constant class.&lt;br/&gt;
&lt;br/&gt;
I think constants in interfaces are bad, unless the constant is inherently associated with the methods in the interface.</comment>
                    <comment id="12755226" author="jabley" created="Mon, 14 Sep 2009 23:24:25 +0100"  >split out request and response interceptor&lt;br/&gt;
&lt;br/&gt;
Remove TODOs - not going to implement compress support unless sufficient demand / server with market share.</comment>
                    <comment id="12755995" author="olegk" created="Wed, 16 Sep 2009 13:24:57 +0100"  >James,&lt;br/&gt;
ResponseContentEncoding seems missing in the changeset. Could you please add that file to the patch?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12756003" author="jabley" created="Wed, 16 Sep 2009 13:45:26 +0100"  >Resubmit with the missing file</comment>
                    <comment id="12756513" author="olegk" created="Thu, 17 Sep 2009 13:43:37 +0100"  >James,&lt;br/&gt;
&lt;br/&gt;
There is a copyright notice in one of the files, which makes the patch incompatible with the ASL. I cannot commit the patch as it. Please resubmit the patch without the copyright notice is you agree to this code being made available under ASLv2 license agreement. I am sorry but we have to picky about licensing stuff. &lt;br/&gt;
&lt;br/&gt;
* ----------------------------------------------------------------------------&lt;br/&gt;
* (c) Mobile IQ Ltd 2009. All Rights Reserved.&lt;br/&gt;
* ----------------------------------------------------------------------------&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
Oleg</comment>
                    <comment id="12756545" author="jabley" created="Thu, 17 Sep 2009 14:46:25 +0100"  >My bad, sorry. That&amp;#39;s my default template for Eclipse falling through the cracks.</comment>
                    <comment id="12756555" author="jabley" created="Thu, 17 Sep 2009 15:04:40 +0100"  >Fixed the wrong license / copyright text</comment>
                    <comment id="12757104" author="olegk" created="Fri, 18 Sep 2009 12:02:51 +0100"  >Patch checked in. Many thanks for contributing it, James. Would you also be willing to contribute a section on content coding to the HttpClient tutorial?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12758020" author="jabley" created="Mon, 21 Sep 2009 21:42:09 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve started writing the tutorial patch. My DocBook is pretty poor though. Do you know how to set up &amp;lt;olink/&amp;gt;? I was trying to link the the section on protocol interceptors, but can&amp;#39;t get it working.&lt;br/&gt;
&lt;br/&gt;
Cheers,&lt;br/&gt;
&lt;br/&gt;
James</comment>
                    <comment id="12758174" author="olegk" created="Tue, 22 Sep 2009 09:42:47 +0100"  >I hardly qualify as DocBook expert either. I usually use Spring documentation as a reference [1]. Do not worry about stuff like that at the moment. Concentrate on writing the content. We can deal with formatting issues later.&lt;br/&gt;
&lt;br/&gt;
Cheers&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;https://src.springframework.org/svn/spring-framework/trunk/spring-framework-reference/src/&quot;&gt;https://src.springframework.org/svn/spring-framework/trunk/spring-framework-reference/src/&lt;/a&gt;</comment>
                    <comment id="12761191" author="jabley" created="Thu, 1 Oct 2009 13:30:55 +0100"  >Initial draft for DocBook tutorial, after recovering last week&amp;#39;s hard drive failure</comment>
                    <comment id="12762598" author="olegk" created="Tue, 6 Oct 2009 13:22:51 +0100"  >Patch checked in with some minor tweaks. &lt;br/&gt;
&lt;br/&gt;
I think the issue can now be closed as resolved.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12770078" author="olegk" created="Mon, 26 Oct 2009 16:19:54 +0000"  >This issue has to be revisited. Presently GzipDecompressingEntity and DeflateDecompressingEntity classes do not override the#writeTo() method which causes the original uncompressed content to be written out to the output stream. &lt;br/&gt;
&lt;br/&gt;
James, would you be willing to look into it? &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12773151" author="jabley" created="Tue, 3 Nov 2009 19:53:16 +0000"  >Will do. Sorry, on holiday last week and just catching up.</comment>
                    <comment id="12773190" author="jabley" created="Tue, 3 Nov 2009 20:54:27 +0000"  >Overrides HttpEntity.writeTo(OutputStream) for the new decompressing code.</comment>
                    <comment id="12773616" author="olegk" created="Wed, 4 Nov 2009 19:26:24 +0000"  >Patch checked in. Many thanks, James&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12402423" name="834-2009-03-17.patch" size="30521" author="jabley" created="Tue, 17 Mar 2009 21:53:32 +0000" />
                    <attachment id="12421009" name="834-docbook.patch" size="2180" author="jabley" created="Thu, 1 Oct 2009 13:30:55 +0100" />
                    <attachment id="12402424" name="834-svn-754998.patch" size="31251" author="jabley" created="Tue, 17 Mar 2009 21:53:32 +0000" />
                    <attachment id="12419415" name="834-svn-r811556.patch" size="26247" author="jabley" created="Sun, 13 Sep 2009 07:00:40 +0100" />
                    <attachment id="12419576" name="834-svn-r814881.patch" size="12021" author="jabley" created="Mon, 14 Sep 2009 23:24:25 +0100" />
                    <attachment id="12419762" name="834-svn-r815739.patch" size="15024" author="jabley" created="Wed, 16 Sep 2009 13:45:26 +0100" />
                    <attachment id="12419892" name="834-svn-r816185.patch" size="16175" author="jabley" created="Thu, 17 Sep 2009 15:04:40 +0100" />
                    <attachment id="12423947" name="834-svn-r832534-write-to.patch" size="7072" author="jabley" created="Tue, 3 Nov 2009 20:54:27 +0000" />
                    <attachment id="12415522" name="disable-content-coding.patch" size="7317" author="jabley" created="Tue, 4 Aug 2009 22:28:49 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>9.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 16 Mar 2009 13:54:45 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133854</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47399</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>