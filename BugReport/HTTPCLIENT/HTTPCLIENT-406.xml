<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:17:08 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-406/HTTPCLIENT-406.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-406] Releasing a connection is unconfirmed</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-406</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>When a connection is attempted to be released using&lt;br/&gt;
HttpConnection.releaseConnection(), it is unclear whether this is actually done.&lt;br/&gt;
The implementation for the method is as follows in 3.0-beta1:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* Release the connection.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public void releaseConnection() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.trace(&amp;quot;enter HttpConnection.releaseConnection()&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (locked) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.debug(&amp;quot;Connection is locked.  Call to releaseConnection() ignore&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} else if (httpConnectionManager != null) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.debug(&amp;quot;Releasing connection back to connection manager.&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;httpConnectionManager.releaseConnection(this);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} else {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.warn(&amp;quot;HttpConnectionManager is null.  Connection cannot be relea&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
Silently ignoring a request (to release the connection, in this case) is hardly&lt;br/&gt;
ever the right thing to do, in my opinion. Instead, I suggest the method&lt;br/&gt;
indicates whether the connection was actually closed or not.&lt;br/&gt;
&lt;br/&gt;
I see at least 2 alternatives:&lt;br/&gt;
&lt;br/&gt;
1) throw an exception to indicate the connection could not be released;&lt;br/&gt;
2) return a flag indicating whether the connection could actually be released.</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: All</environment>
            <key id="12333965">HTTPCLIENT-406</key>
            <summary>Releasing a connection is unconfirmed</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="ernst.dehaan@nl.wanadoo.com">Ernst de Haan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Dec 2004 20:32:55 +0000</created>
                <updated>Wed, 16 Feb 2011 20:44:34 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:54 +0100</resolved>
                            <version>3.0 Beta 1</version>
                                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382033" author="ernst.dehaan@nl.wanadoo.com" created="Mon, 20 Dec 2004 20:41:06 +0000"  >Created an attachment (id=13795)&lt;br/&gt;
Possible implementation of alternative A&lt;br/&gt;
</comment>
                    <comment id="12382034" author="ernst.dehaan@nl.wanadoo.com" created="Mon, 20 Dec 2004 20:41:39 +0000"  >Created an attachment (id=13796)&lt;br/&gt;
Possible implementation of alternative B&lt;br/&gt;
</comment>
                    <comment id="12382035" author="oglueck" created="Mon, 20 Dec 2004 22:26:38 +0000"  >I am in favour for throwing an exception here. But the change needs proper testing.</comment>
                    <comment id="12382036" author="olegk" created="Mon, 20 Dec 2004 22:30:55 +0000"  >(1) IllegalStateException (Patch A) is no good because both cases, the locked&lt;br/&gt;
connection and the null connection manager are legitimate.&lt;br/&gt;
&lt;br/&gt;
(2) Patch B, though in a very subtle way, breaks the API which is formally has&lt;br/&gt;
been frozen. The method is so widely used, so I am really hesitant to make this&lt;br/&gt;
change, no matter how minor. &lt;br/&gt;
&lt;br/&gt;
I do agree the releaseConnection code is not ideal. However this is not an&lt;br/&gt;
isolated problem with releaseConnection, rather an overall problem with the 2.0&lt;br/&gt;
and 3.0 API that have been stretched to their limit. &lt;br/&gt;
&lt;br/&gt;
If there are no load objections I&amp;#39;ll mark this bug as WONTFIX&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382037" author="oglueck" created="Mon, 20 Dec 2004 22:39:10 +0000"  >Fine with me. I agree that the code &amp;quot;works as designed&amp;quot;. To my knowledge&lt;br/&gt;
introducing an exception would break the connection managers and changing the&lt;br/&gt;
API is not feasible currently.</comment>
                    <comment id="12382038" author="ernst.dehaan@nl.wanadoo.com" created="Mon, 20 Dec 2004 22:42:00 +0000"  >Depending on the definition, patch B may not break the API. All existing code&lt;br/&gt;
will still compile with the changes applied. However, indeed all code that was&lt;br/&gt;
binary linked to the 3.0-beta1 code will not work as-is with these changes&lt;br/&gt;
applied, since the signature of the method will change.&lt;br/&gt;
&lt;br/&gt;
But assuming that the definition of the freeze is strict, I have no objections&lt;br/&gt;
to marking this one as WONTFIX.</comment>
                    <comment id="12382039" author="becke@u.washington.edu" created="Mon, 20 Dec 2004 22:49:51 +0000"  >I would agree with the WONTFIX.  The locked behavior is only meant to be used when executing a &lt;br/&gt;
method inside the HttpMethodDirector.  This &amp;quot;feature&amp;quot; should not be visible to users of the HttpClient &lt;br/&gt;
API.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12382040" author="ernst.dehaan@nl.wanadoo.com" created="Mon, 20 Dec 2004 22:52:18 +0000"  >The code may indeed work &amp;quot;as designed&amp;quot;, but it does not work &amp;quot;as documented&amp;quot;.&lt;br/&gt;
There is nothing in the documentation that explains this behavior. For users of&lt;br/&gt;
the library it is not clear that even if you do call releaseConnection(), the&lt;br/&gt;
connection may not actually be released, so you may have to call it multiple&lt;br/&gt;
times, just to be sure.&lt;br/&gt;
&lt;br/&gt;
Also, it is not clear from the documentation that the releaseConnection() method&lt;br/&gt;
can safely be called multiple times.&lt;br/&gt;
&lt;br/&gt;
Finally, there is no way to tell that the connection has indeed been released.&lt;br/&gt;
</comment>
                    <comment id="12382041" author="ernst.dehaan@nl.wanadoo.com" created="Mon, 20 Dec 2004 22:54:57 +0000"  >Created an attachment (id=13803)&lt;br/&gt;
Patch that extends the documentation of the releaseConnection() method&lt;br/&gt;
</comment>
                    <comment id="12382042" author="olegk" created="Tue, 21 Dec 2004 01:09:27 +0000"  >Created an attachment (id=13804)&lt;br/&gt;
HttpConnection Javadoc patch (take 2)&lt;br/&gt;
&lt;br/&gt;
Ernst,&lt;br/&gt;
&lt;br/&gt;
Do you mind if I change the wording a little and make it a little less, say,&lt;br/&gt;
scary? &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382043" author="ernst.dehaan@nl.wanadoo.com" created="Tue, 21 Dec 2004 01:31:47 +0000"  >Looks perfect to me!</comment>
                    <comment id="12382044" author="olegk" created="Tue, 21 Dec 2004 04:54:18 +0000"  >*** &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-408&quot; title=&quot;No documentation for isLocked() and setLocked(boolean)&quot;&gt;&lt;strike&gt;HTTPCLIENT-408&lt;/strike&gt;&lt;/a&gt; has been marked as a duplicate of this bug. ***</comment>
                    <comment id="12382045" author="olegk" created="Tue, 21 Dec 2004 04:55:51 +0000"  >Patch committed.&lt;br/&gt;
&lt;br/&gt;
Many thanks, Ernst.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382046" author="ernst.dehaan@nl.wanadoo.com" created="Tue, 21 Dec 2004 22:20:03 +0000"  >Verified r1.104.</comment>
                </comments>
                    <attachments>
                    <attachment id="12327171" name="ASF.LICENSE.NOT.GRANTED--connlock.patch" size="1958" author="olegk" created="Tue, 21 Dec 2004 01:09:27 +0000" />
                    <attachment id="12327168" name="ASF.LICENSE.NOT.GRANTED--HttpConnection.java.A.diff" size="1677" author="ernst.dehaan@nl.wanadoo.com" created="Mon, 20 Dec 2004 20:41:06 +0000" />
                    <attachment id="12327169" name="ASF.LICENSE.NOT.GRANTED--HttpConnection.java.B.diff" size="1463" author="ernst.dehaan@nl.wanadoo.com" created="Mon, 20 Dec 2004 20:41:39 +0000" />
                    <attachment id="12327170" name="ASF.LICENSE.NOT.GRANTED--HttpConnection.java.diff" size="580" author="ernst.dehaan@nl.wanadoo.com" created="Mon, 20 Dec 2004 22:54:57 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>32773</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 20 Dec 2004 22:26:38 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133454</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47159</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>