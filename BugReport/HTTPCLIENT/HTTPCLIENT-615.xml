<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:19:13 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-615/HTTPCLIENT-615.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-615] Consider making HostConfiguration immutable</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-615</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>HostConfiguration class should be immutable. This should also allow methods of this class to be non-synchronized.&lt;br/&gt;
&lt;br/&gt;
Oleg</description>
                <environment></environment>
            <key id="12358455">HTTPCLIENT-615</key>
            <summary>Consider making HostConfiguration immutable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rolandw">Roland Weber</assignee>
                                <reporter username="olegk">Oleg Kalnichevski</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Dec 2006 17:43:22 +0000</created>
                <updated>Mon, 5 Feb 2007 19:50:46 +0000</updated>
                    <resolved>Wed, 27 Dec 2006 15:51:47 +0000</resolved>
                                            <fixVersion>4.0 Alpha 1</fixVersion>
                                <component>HttpConn</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12457862" author="rolandw" created="Tue, 12 Dec 2006 20:06:54 +0000"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
good idea. I would also suggest to remove everything that identifies the host itself:&lt;br/&gt;
getHost(), getHostName(), getHostURL(), getPort(), getScheme()&lt;br/&gt;
&lt;br/&gt;
By leaving only the actual configuration parameters in the class, the same object&lt;br/&gt;
can be applied to multiple hosts. If you feel that would be too much of a change&lt;br/&gt;
for now, I&amp;#39;d tackle it early next year.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12460267" author="rolandw" created="Thu, 21 Dec 2006 13:54:41 +0000"  >Here is a take on this one. All attributes in HostConfiguration are final, there are no setters, all synchronization is gone too. The copy constructor is gone, since there is little point in duplicating an immutable object. The call in MultiThreadedHttpConnectionManager is commented out. I didn&amp;#39;t want to remove it as I will be grateful for any helpful comments in that class if I have to work on it. HostConfiguration still implements Cloneable, as long as nobody creates a mutable subclass of InetAddress or HttpHost, there shouldn&amp;#39;t be a problem with shallow copies.&lt;br/&gt;
&lt;br/&gt;
I did not remove the target host from HttpConfiguration (yet). I tried and had to realize that it would affect plenty of places, most of them in MultiThreadedHCM. Changing DefaultHttpHostConnection to use separate HttpHost and HostConfiguration objects was not a problem. In MTHCM however, HostConfiguration is used as a cache key. The current implementation basically pushes that local cache key implementation into the public API.&lt;br/&gt;
I would still prefer to define a local cache key class, passing host and config in as separate arguments. That shouldn&amp;#39;t be a major problem when allocating connections, but I&amp;#39;m not sure how to reconstruct the cache key when a connection is released. Actually, I&amp;#39;m not even sure whether that is required at all. It just looked like something I&amp;#39;d have to spend a lot more time on than I wanted to put into this patch. Also, the connection manager parameters will probably be affected by this change.&lt;br/&gt;
&lt;br/&gt;
Let me know what you think about the patch as it is. I consider the second step less urgent.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12460650" author="olegk" created="Sat, 23 Dec 2006 15:21:09 +0000"  >The patch looks good. I am +1 to commit it.&lt;br/&gt;
&lt;br/&gt;
I am also not entirely happy with the way HostConfiguration is being used by MultiThreadedHCM as a cache key. For instance, MTHCM currently does not take into consideration that fact that non-tunneled (non-transparent) proxy connections can be equivalently used to interact with any target host. This said, I am reluctant to make any drastic changes until we get something functional first&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12461028" author="rolandw" created="Wed, 27 Dec 2006 15:51:47 +0000"  >Patch committed. Accidentally, actually. I must take more care :-(&lt;br/&gt;
</comment>
                </comments>
                    <attachments>
                    <attachment id="12347671" name="2k6-12-21-hostconfig-1.txt" size="13766" author="rolandw" created="Thu, 21 Dec 2006 13:54:41 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 12 Dec 2006 20:06:54 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133655</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47948</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>