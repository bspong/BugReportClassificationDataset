<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:13:54 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-139/HTTPCLIENT-139.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-139] isHttp11 should have HttpClient scope</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-139</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>-----Original Message-----&lt;br/&gt;
From: Kalnichevski, Oleg [mailto:&lt;a href=&apos;mailto:oleg.kalnichevski@bearingpoint.com&apos;&gt;oleg.kalnichevski@bearingpoint.com&lt;/a&gt;] &lt;br/&gt;
Sent: Wednesday, January 15, 2003 8:24 AM&lt;br/&gt;
To: Commons HttpClient Project&lt;br/&gt;
Cc: Rob Owen&lt;br/&gt;
Subject: RE: isHttp11 and HTTP/1.0 servers &lt;br/&gt;
&lt;br/&gt;
Rob&lt;br/&gt;
You are basically right hands down. It does make sense for the HTTP version &lt;br/&gt;
flag to have HttpClient scope. We should address this shortcoming as a part of &lt;br/&gt;
the post-2.0-release redesign&lt;br/&gt;
&lt;br/&gt;
Feel free to file a bug report to make sure the issue does not go forgotten&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://nagoya.apache.org/bugzilla/enter_bug.cgi?product=Commons&quot;&gt;http://nagoya.apache.org/bugzilla/enter_bug.cgi?product=Commons&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Many thanks for bring it up&lt;br/&gt;
&lt;br/&gt;
Cheers&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
-----Original Message-----&lt;br/&gt;
From: Rob Owen [mailto:&lt;a href=&apos;mailto:Rob.Owen@sas.com&apos;&gt;Rob.Owen@sas.com&lt;/a&gt;]&lt;br/&gt;
Sent: Monday, January 13, 2003 18:31&lt;br/&gt;
To: Commons HttpClient Project&lt;br/&gt;
Subject: isHttp11 and HTTP/1.0 servers &lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
The boolean variable http11 is set on a method by method basis. For PutMethod, &lt;br/&gt;
decisions (eg. Expect: 100-continue request header) are made prior to &lt;br/&gt;
determining the value for Http11 (chicken and egg problem) and so the default &lt;br/&gt;
(true) is used to produce the request. An HTTP/1.0 server hangs waiting for &lt;br/&gt;
the extra data on the PUT method body. &lt;br/&gt;
&lt;br/&gt;
For applications that are using HttpClient (ie. they do not manipulate the &lt;br/&gt;
HTTP methods directly and cannot be expected to set the value of Http11 for &lt;br/&gt;
each method instance), shouldn&amp;#39;t http11 have HttpClient scope ? This would &lt;br/&gt;
allow an interaction (eg. OPTIONS) to set http11 and all methods thereafter &lt;br/&gt;
would use this setting?&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
------&lt;br/&gt;
Rob Owen&lt;br/&gt;
SAS Institute Inc.&lt;br/&gt;
email: &lt;a href=&apos;mailto:Rob.Owen@sas.com&apos;&gt;Rob.Owen@sas.com&lt;/a&gt;</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: All</environment>
            <key id="12333698">HTTPCLIENT-139</key>
            <summary>isHttp11 should have HttpClient scope</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="olegk">Oleg Kalnichevski</assignee>
                                <reporter username="eurrow@sas.com">Rob Owen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Jan 2003 02:00:30 +0000</created>
                <updated>Sun, 22 Apr 2007 08:10:12 +0100</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:12 +0100</resolved>
                            <version>2.0 Alpha 1</version>
                                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12379849" author="oglueck" created="Thu, 16 Jan 2003 16:24:37 +0000"  >-------- Original Message --------&lt;br/&gt;
Subject: RE: isHttp11 and HTTP/1.0 servers&lt;br/&gt;
Date: Wed, 15 Jan 2003 10:00:20 -0800&lt;br/&gt;
From: Dennis Cook &amp;lt;&lt;a href=&apos;mailto:dennis@bevocal.com&apos;&gt;dennis@bevocal.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
Reply-To: Commons HttpClient Project &amp;lt;&lt;a href=&apos;mailto:commons-httpclient-dev@jakarta.apache.org&apos;&gt;commons-httpclient-dev@jakarta.apache.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
To: &amp;#39;Commons HttpClient Project&amp;#39;	 &amp;lt;&lt;a href=&apos;mailto:commons-httpclient-dev@jakarta.apache.org&apos;&gt;commons-httpclient-dev@jakarta.apache.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
&lt;br/&gt;
I don&amp;#39;t understand why the version should be associated with the HTTPCLient&lt;br/&gt;
class.  I thought that the version was appropriate to a connection to a&lt;br/&gt;
specfic host:port.  So if you have a pool of connections would it not be&lt;br/&gt;
possible that the version on each connection could be different?&lt;br/&gt;
&lt;br/&gt;
Dennis Cook&lt;br/&gt;
BeVocal, Inc.&lt;br/&gt;
tel:  650-641-1424&lt;br/&gt;
fax: 650-210-9275</comment>
                    <comment id="12379850" author="olegk" created="Fri, 30 Apr 2004 00:47:06 +0100"  >Created an attachment (id=11377)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
</comment>
                    <comment id="12379851" author="olegk" created="Fri, 30 Apr 2004 00:53:19 +0100"  >Changelog:&lt;br/&gt;
* HttpConnectionParams changed to include HTTP protocol version&lt;br/&gt;
* HttpConnection keeps track of supported HTTP protocol&lt;br/&gt;
* HttpMethodBase uses lesser of two values: reguested HTTP version (specified&lt;br/&gt;
with the HttpMethodParams) and supported HTTP version (specified with the&lt;br/&gt;
HttpConnectionParams)&lt;br/&gt;
&lt;br/&gt;
Let me know what you think&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379852" author="olegk" created="Fri, 30 Apr 2004 01:12:12 +0100"  >I just realized that this is a pretty serious flaw in my patch. Fix coming in a&lt;br/&gt;
moment.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379853" author="olegk" created="Fri, 30 Apr 2004 01:12:50 +0100"  >Created an attachment (id=11378)&lt;br/&gt;
Patch (take 2)&lt;br/&gt;
</comment>
                    <comment id="12379854" author="becke@u.washington.edu" created="Fri, 30 Apr 2004 11:06:00 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
I haven&amp;#39;t looked at this thoroughly yet, but I have two initial comments:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;- Should we be saving the HTTP version in connection&amp;#39;s params?  More than one connection can share &lt;br/&gt;
the same params.  Also, to this point we have only been storing configuration values in the various &lt;br/&gt;
params objects.  This change would add state to the params.&lt;br/&gt;
&amp;nbsp;- Could we switch HttpVersion to implement Comparable instead of greater() and less()?&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12379855" author="olegk" created="Fri, 30 Apr 2004 16:55:54 +0100"  >I am afraid I have to call back the patch, as there&amp;#39;s a fundamental flaw in it.&lt;br/&gt;
Consider the following scenario: &lt;br/&gt;
* HttpConnection version is undefined (newly allocated connection)&lt;br/&gt;
* The user executes a request using HTTP/1.0 (for whatever reason)&lt;br/&gt;
* The connection will be marked as supporting HTTP/1.0 only&lt;br/&gt;
* All consecutive requests on this connection will be forced to use HTTP/1.0&lt;br/&gt;
even though the connection may be perfectly capable of HTTP/1.1 or above&lt;br/&gt;
&lt;br/&gt;
I currently do not see a satisfactory solution to this problem with this&lt;br/&gt;
approach. I have to think of something completely different. Bright ideas how to&lt;br/&gt;
solve the problem of allowing for HttpConnection parameterization without giving&lt;br/&gt;
the end user the direct access to the connection itself are welcome. I&amp;#39;ll&lt;br/&gt;
happily step aside&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379856" author="olegk" created="Fri, 30 Apr 2004 17:03:43 +0100"  >&amp;gt; Should we be saving the HTTP version in connection&amp;#39;s params?&lt;br/&gt;
Mike,&lt;br/&gt;
We have requests to support HTTP version parameterization on a per connection&lt;br/&gt;
basis, which I also find quite reasonable. Where would you see the version saved?&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Could we switch HttpVersion to implement Comparable?&lt;br/&gt;
We could and we should ;-) My oversight.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379857" author="becke@u.washington.edu" created="Fri, 30 Apr 2004 20:58:38 +0100"  >&amp;gt; We have requests to support HTTP version parameterization on a per connection&lt;br/&gt;
&amp;gt; basis, which I also find quite reasonable. Where would you see the version saved?&lt;br/&gt;
&lt;br/&gt;
I agree that the request seems reasonable.  My concern is how we implement it.  &lt;br/&gt;
&lt;br/&gt;
As you mention in your previous message a viable solution to this problem is not readily apparent.  &lt;br/&gt;
Here are the problems that we need to solve, as I see it:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;- We need somewhere to store the version supported by a connection.  My preference would be to add &lt;br/&gt;
a property to the connection itself.&lt;br/&gt;
&amp;nbsp;- We need a way to determine what versions a connection supports.  As you have mentioned, just &lt;br/&gt;
because a connection is used for HTTP 1.0 does not mean that it can&amp;#39;t also be used for HTTP 1.1.  I see &lt;br/&gt;
two options here.  1) Assume a connection can be used for all HTTP versions, unless a particular &lt;br/&gt;
version is rejected.  Defaults to accept all.  2) The first use of a connection defines the version it can be &lt;br/&gt;
used for.  &lt;br/&gt;
&amp;nbsp;- A connection&amp;#39;s version is determined outside of the HttpConnection class.  We must rely on the &lt;br/&gt;
HttpMethod to set the supported version on the connection.  This is not a major issue as we have &lt;br/&gt;
control over the HttpMethodBase, but it&amp;#39;s a little nasty.&lt;br/&gt;
&lt;br/&gt;
I will do some brainstorming and see if I can come up with any new ideas.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12379858" author="rolweber@de.ibm.com" created="Fri, 30 Apr 2004 21:23:11 +0100"  >Hi Guys,&lt;br/&gt;
&lt;br/&gt;
I haven&amp;#39;t followed this closely, but are you sure you are still on&lt;br/&gt;
the right track? There&amp;#39;s not much point in specifying an HTTP version&lt;br/&gt;
for a connection. When it&amp;#39;s in use, it is too late. When it&amp;#39;s closed,&lt;br/&gt;
there is no telling to which host it will be used next, so why would&lt;br/&gt;
you want to specify the HTTP version.&lt;br/&gt;
The comment of Dennis Cook, added by Ortwin, does mention connections.&lt;br/&gt;
But that&amp;#39;s from a user view: &amp;quot;connection to a particular host and port&amp;quot;&lt;br/&gt;
For us developers, that would translate to specifying the HTTP version&lt;br/&gt;
with the HostConfiguration. Or so it seems to me.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland</comment>
                    <comment id="12379859" author="olegk" created="Fri, 30 Apr 2004 21:33:14 +0100"  >Roland, this is certainly a different angle from which the problem can be&lt;br/&gt;
approached. I have been entertaining the idea of HttpParam-enabling&lt;br/&gt;
HostConfiguration lately while thinking about better proxy configuration&lt;br/&gt;
management. If we had HttpVersion defined at the host level, this might well&lt;br/&gt;
solve the problem.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379860" author="olegk" created="Sun, 2 May 2004 18:50:44 +0100"  >Created an attachment (id=11401)&lt;br/&gt;
Patch (take 3)&lt;br/&gt;
</comment>
                    <comment id="12379861" author="olegk" created="Sun, 2 May 2004 19:04:09 +0100"  >Folks,&lt;br/&gt;
I am far from being happy with this patch, but after much inner struggle with&lt;br/&gt;
myself, this is what I found to be a compromise I was prepared to live with. All&lt;br/&gt;
the alternative solutions I looked at were difficult without a substantial&lt;br/&gt;
refactoring of several core classes which I thought would be excessive at this&lt;br/&gt;
point. &lt;br/&gt;
&lt;br/&gt;
changelog:&lt;br/&gt;
* HTTP protocol version can be defined with HostConfiguration&lt;br/&gt;
* HttpMethodDirector chooses the protocol version of the HostConfiguration (when&lt;br/&gt;
available) if the protocol version has not been explicitly defined at the&lt;br/&gt;
HttpMethod level&lt;br/&gt;
&lt;br/&gt;
Let me know what you think&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379862" author="becke@u.washington.edu" created="Mon, 3 May 2004 04:00:32 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
I agree this is not a sexy solution, but I think it&amp;#39;s a good one.  I have a few suggestions.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;- HttpMethodBase.getActualVersion() should just return null instead of throwing an exception I think.  &lt;br/&gt;
The actualVersion (effectiveVerson perhaps) is in an undefined state (null) until the method is executed, &lt;br/&gt;
but I don&amp;#39;t think accessing it should be considered an error&lt;br/&gt;
&amp;nbsp;- HostConfiguration.*Version() should probably be synchronized.&lt;br/&gt;
&amp;nbsp;- We should add some more Javadocs to HostConfiguration.*Version() to indicate that it&amp;#39;s used as the &lt;br/&gt;
default version for communicating with the host, but that it can be overidden by setting the version on &lt;br/&gt;
the method&amp;#39;s params.&lt;br/&gt;
&lt;br/&gt;
Thanks for persevering on this one.  It has proven to be more difficult that I think we previously would &lt;br/&gt;
have guessed. &lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12379863" author="rolweber@de.ibm.com" created="Mon, 3 May 2004 16:00:56 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
while you&amp;#39;re at it, do you want to include &amp;quot;strict mode&amp;quot; in the&lt;br/&gt;
HostConfiguration as well? It&amp;#39;s used in the same way as HttpVersion:&lt;br/&gt;
to adjust the style of the generated HTTP requests. But I don&amp;#39;t&lt;br/&gt;
know how much effort it is to add and evaluate that flag there.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland</comment>
                    <comment id="12379864" author="olegk" created="Mon, 3 May 2004 22:14:58 +0100"  >Folks,&lt;br/&gt;
I guess I figured something that may address all the concerns that have been&lt;br/&gt;
expressed so far. Check the new patch out. The solution (keeping my fingers&lt;br/&gt;
crossed) turned out to be quite trivial. Once again the new preference&lt;br/&gt;
architecture saved the day.&lt;br/&gt;
&lt;br/&gt;
The only problem I see is that HttpClient is getting more and more heavy-weight&lt;br/&gt;
in terms of creating excessive amount of garbage. GC optimization should be&lt;br/&gt;
definitely a top priority for the 4.0&lt;br/&gt;
&lt;br/&gt;
Let me know what you think&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379865" author="olegk" created="Mon, 3 May 2004 22:15:31 +0100"  >Created an attachment (id=11416)&lt;br/&gt;
Patch (take 4)&lt;br/&gt;
</comment>
                    <comment id="12379866" author="becke@u.washington.edu" created="Sat, 8 May 2004 09:09:33 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
This looks pretty good.  My only suggestion would be to change HostParams to just extend &lt;br/&gt;
DefaultHttpParams, unless you have particular plans for using it in other ways.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12379867" author="olegk" created="Sat, 8 May 2004 18:15:55 +0100"  >I changed HostParams to just extend DefaultHttpParams as suggested by Mike and&lt;br/&gt;
committed the patch (take 4).&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll close the bug report as soon as I have a few test cases added&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379868" author="olegk" created="Sun, 9 May 2004 20:18:50 +0100"  >Test cases provided.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12326728" name="ASF.LICENSE.NOT.GRANTED--httpver.patch" size="19687" author="olegk" created="Mon, 3 May 2004 22:15:31 +0100" />
                    <attachment id="12326727" name="ASF.LICENSE.NOT.GRANTED--httpver.patch" size="16007" author="olegk" created="Sun, 2 May 2004 18:50:44 +0100" />
                    <attachment id="12326726" name="ASF.LICENSE.NOT.GRANTED--httpver.patch" size="13516" author="olegk" created="Fri, 30 Apr 2004 01:12:50 +0100" />
                    <attachment id="12326725" name="ASF.LICENSE.NOT.GRANTED--httpver.patch" size="10443" author="olegk" created="Fri, 30 Apr 2004 00:47:06 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>16124</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 16 Jan 2003 16:24:37 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133193</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>188944</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>