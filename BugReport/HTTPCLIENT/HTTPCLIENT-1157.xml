<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:13:25 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-1157/HTTPCLIENT-1157.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-1157] MemcachedHttpCacheStorage should throw IOExceptions instead of Runtime Exceptions</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-1157</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>The MemcachedHttpCacheStorage class implements HttpCacheStorage which defines that methods will throw IOExceptions, but the underlying net.spy.memcached.MemcachedClientIF throws runtime exceptions. These exceptions are not caught in the code where IOExceptions are expected causing these exception bubble up to the calling code. It seems like the MemcachedHttpCacheStorage class should treat at least some of these runtime exceptions as IOExceptions so that normal code execution paths can be followed.  &lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m proposing that MemcachedHttpCacheStorage treat a OperationTimeoutException from the memcached client as an IOException. This would allow the existing CachingHttpClient code to catch and log the exception as a warning, instead of bubbling the exception up the calling code.&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12537421">HTTPCLIENT-1157</key>
            <summary>MemcachedHttpCacheStorage should throw IOExceptions instead of Runtime Exceptions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jonm">Jon Moore</assignee>
                                <reporter username="millerjam">James Miller</reporter>
                        <labels>
                        <label>cache</label>
                    </labels>
                <created>Thu, 5 Jan 2012 21:51:38 +0000</created>
                <updated>Thu, 12 Jan 2012 15:44:40 +0000</updated>
                    <resolved>Thu, 12 Jan 2012 14:23:38 +0000</resolved>
                            <version>4.2 Alpha1</version>
                                <fixVersion>4.1.3</fixVersion>
                <fixVersion>4.2 Beta1</fixVersion>
                                <component>HttpCache</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13180863" author="millerjam" created="Thu, 5 Jan 2012 21:53:02 +0000"  >Here is a patch wrapping the OperationTimeoutException as an IOException so that the normal code path can be followed.</comment>
                    <comment id="13181534" author="olegk" created="Fri, 6 Jan 2012 19:15:42 +0000"  >If no one else steps in, I&amp;#39;ll commit the patch in a few days&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="13182820" author="jonm" created="Mon, 9 Jan 2012 21:39:27 +0000"  >@James: why not just wrap some try...catch blocks around the current calls to the MemcachedClientIF in MemcachedHttpCacheStorage? You can catch the OperationTimeoutException and re-throw wrapped in an IOException.</comment>
                    <comment id="13182854" author="millerjam" created="Mon, 9 Jan 2012 22:11:20 +0000"  >@Jon: I started out that way, but I felt that all the try..catch blocks distracted from actual cache logic. I can update the patch if you feel that is cleaner.</comment>
                    <comment id="13183481" author="jonm" created="Tue, 10 Jan 2012 19:07:11 +0000"  >@James: yes, I think just putting the try...catch around the Memcached operations would be overall simpler. If you can update the patch I&amp;#39;d be happy to apply it.</comment>
                    <comment id="13184190" author="millerjam" created="Wed, 11 Jan 2012 16:56:40 +0000"  >Here is an updated patch that only wraps the MemcachedClientIF methods that throw a OperationTimeoutException in a try..catch and throws an IOException instead</comment>
                    <comment id="13184250" author="jonm" created="Wed, 11 Jan 2012 18:14:13 +0000"  >@James: patch committed to trunk. I also wrapped try...catch around the cache puts and cache deletes as well for completeness. Please take a look, and if that works for you I&amp;#39;ll also backport to 4.1.x. Many thanks for this!&lt;br/&gt;
</comment>
                    <comment id="13184850" author="olegk" created="Thu, 12 Jan 2012 09:54:45 +0000"  >@Jon&lt;br/&gt;
The latest changes in SVN trunk introduced dependency on a Java 1.6 specific IOexception constructor, which broke the build&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/HttpComponents%20Client/402/console&quot;&gt;https://builds.apache.org/job/HttpComponents%20Client/402/console&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
We need to keep HttpClient Java 1.5 compatible, at least for now.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="13184874" author="sebb@apache.org" created="Thu, 12 Jan 2012 11:21:59 +0000"  >Agreed.&lt;br/&gt;
&lt;br/&gt;
If we do decide to move to 1.6 minimum, it should be on the basis of some functionality that is only available in Java 1.6.</comment>
                    <comment id="13184879" author="jonm" created="Thu, 12 Jan 2012 11:46:49 +0000"  >Also agreed -- my bad. I&amp;#39;ll fix it when I get into the office this morning. Where is our virtual collection jar so I can put my $1 in for breaking the build? :)&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="13184965" author="jonm" created="Thu, 12 Jan 2012 13:49:48 +0000"  >@Oleg: I see you beat me to it. Thanks. :)&lt;br/&gt;
</comment>
                    <comment id="13184972" author="olegk" created="Thu, 12 Jan 2012 14:00:37 +0000"  >@Jon. My pleasure. Truth to be told I was not going to, but I needed the trunk to be compilable to be able to publish the latest snapshot.&lt;br/&gt;
&lt;br/&gt;
Oleg </comment>
                    <comment id="13184984" author="jonm" created="Thu, 12 Jan 2012 14:23:38 +0000"  >Backported to 4.1.x. @James: Please verify and close issue if appropriate. Thanks!</comment>
                    <comment id="13185024" author="millerjam" created="Thu, 12 Jan 2012 15:44:40 +0000"  >Looks good, thanks!</comment>
                </comments>
                    <attachments>
                    <attachment id="12510204" name="httpclient-1157-2.patch" size="6060" author="millerjam" created="Wed, 11 Jan 2012 16:56:40 +0000" />
                    <attachment id="12509608" name="HTTPCLIENT-1157.patch" size="10482" author="millerjam" created="Thu, 5 Jan 2012 21:53:02 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 6 Jan 2012 19:15:42 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>222930</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>46895</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>