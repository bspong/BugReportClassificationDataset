<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:15:42 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-290/HTTPCLIENT-290.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-290] MS Proxy with NTLM authentication set up does not work</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-290</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>When I try to go via a MS Proxy which is set up with NTLM authentication I&lt;br/&gt;
always get a &amp;quot;407&amp;quot; error, no matter which credentials used.</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: PC</environment>
            <key id="12333849">HTTPCLIENT-290</key>
            <summary>MS Proxy with NTLM authentication set up does not work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="barbolani@jazzfree.com">Alfonso</reporter>
                        <labels>
                    </labels>
                <created>Sun, 2 Nov 2003 07:04:29 +0000</created>
                <updated>Wed, 16 Feb 2011 20:43:43 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:36 +0100</resolved>
                            <version>2.0 Beta 2</version>
                                <fixVersion>2.0 Final</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12381106" author="olegk" created="Sun, 2 Nov 2003 08:36:34 +0000"  >Alfonso,&lt;br/&gt;
Please provide wire/debug log of the session that exhibits the problem. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381107" author="barbolani@jazzfree.com" created="Mon, 3 Nov 2003 19:58:40 +0000"  >Created an attachment (id=8884)&lt;br/&gt;
Debug log of the problem with the original rc2 sources&lt;br/&gt;
</comment>
                    <comment id="12381108" author="barbolani@jazzfree.com" created="Mon, 3 Nov 2003 20:10:39 +0000"  >If I make the following change in HttpMethodBase at line 2449&lt;br/&gt;
&lt;br/&gt;
instead of&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|| (status == 304) ) { // NOT MODIFIED&lt;br/&gt;
&lt;br/&gt;
put this&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|| (status == 304) || )(status == 407 ) { // NOT MODIFIED&lt;br/&gt;
&lt;br/&gt;
I get the page correctly. I&amp;#39;ve created another attachment to show that. It shows&lt;br/&gt;
that the credentials I&amp;#39;m using are correct, not that this should be the best&lt;br/&gt;
method to solve the problem.&lt;br/&gt;
</comment>
                    <comment id="12381109" author="barbolani@jazzfree.com" created="Mon, 3 Nov 2003 20:13:43 +0000"  >Created an attachment (id=8886)&lt;br/&gt;
Results after changing HttpMethodBase#2449&lt;br/&gt;
</comment>
                    <comment id="12381110" author="olegk" created="Mon, 3 Nov 2003 20:50:46 +0000"  >Alfonso,&lt;br/&gt;
I pinpointed the bug. Fix will follow soon.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381111" author="olegk" created="Mon, 3 Nov 2003 21:17:36 +0000"  >Alfonso,&lt;br/&gt;
Unfortunately I am unable to generate a proper patch at the moment (I am at the&lt;br/&gt;
client&amp;#39;s site and they have CVS port blocked by the corporate firewall).&lt;br/&gt;
Basically the problem boils down to HttpClient (or me, if you please) forgetting&lt;br/&gt;
to reset the &amp;#39;force-close connection&amp;#39; flag. This additional line in&lt;br/&gt;
HttpMethodBase#responseBodyConsumed should take care of the problem. I&amp;#39;ll submit&lt;br/&gt;
a proper patch later today.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;protected void responseBodyConsumed() {&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// make sure this is the initial invocation of the notification,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// ignore subsequent ones.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;responseStream = null;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (responseConnection != null) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;responseConnection.setLastResponseInputStream(null);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (shouldCloseConnection(responseConnection)) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;responseConnection.close();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;///////////////////////////////////&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;this.connectionCloseForced = false;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;///////////////////////////////////&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;doneWithConnection = true;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (!inExecute) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ensureConnectionRelease();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381112" author="olegk" created="Tue, 4 Nov 2003 01:48:06 +0000"  >Created an attachment (id=8890)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
</comment>
                    <comment id="12381113" author="olegk" created="Tue, 4 Nov 2003 01:49:33 +0000"  >The patch should take of the problem. Test cases included.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381114" author="barbolani@jazzfree.com" created="Tue, 4 Nov 2003 05:17:33 +0000"  >Oleg,&lt;br/&gt;
&lt;br/&gt;
Wow!!!. Thanks. Applied the patch. It now works as expected without needing my&lt;br/&gt;
additional modifications. Should I close the bug or is that something left for you ?</comment>
                    <comment id="12381115" author="olegk" created="Tue, 4 Nov 2003 05:38:59 +0000"  >Alfonso,&lt;br/&gt;
First of all, thanks for tracking down this bug and helping us to fix it. &lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll commit the patch shortly and close the bug report. If you are familiar with&lt;br/&gt;
CVS it would be great if you could check out the latest code from CVS HEAD and&lt;br/&gt;
2.0 branches (once the patch is checked it) and re-test it. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381116" author="olegk" created="Tue, 4 Nov 2003 07:12:04 +0000"  >Patch applied to both HEAD &amp;amp; 2.0 branch. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381117" author="barbolani@jazzfree.com" created="Wed, 31 Dec 2003 07:52:18 +0000"  >Hello, this is Alfonso again. Excuse me for the delay in testing. I&amp;#39;ve&lt;br/&gt;
downloaded the 2.0 rc 2 (dated Oct 13) and tried my app. The library fails to&lt;br/&gt;
authenticate properly.&lt;br/&gt;
&lt;br/&gt;
What is the procedure now. &amp;#xC2;&amp;#xBF; Should this bug be reopen or a new one created ?&lt;br/&gt;
&lt;br/&gt;
I don&amp;#39;t remember some of this, but as I need this feature working, can you tell&lt;br/&gt;
me what was wrong with my initial sugested correction ?&lt;br/&gt;
</comment>
                    <comment id="12381118" author="eric@tibco.com" created="Wed, 31 Dec 2003 22:55:29 +0000"  >Alfonso,&lt;br/&gt;
&lt;br/&gt;
You will need to build HttpClient from the source directly, or use the latest&lt;br/&gt;
nightly build (although this is the 2.1 build, not 2.0, so it may not work for&lt;br/&gt;
you) found here:&lt;br/&gt;
&lt;a href=&quot;http://cvs.apache.org/builds/jakarta-commons/nightly/commons-httpclient/&quot;&gt;http://cvs.apache.org/builds/jakarta-commons/nightly/commons-httpclient/&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
HttpClient 2.0rc3 has not yet been built, so you cannot test that yet....  If&lt;br/&gt;
you need help getting the source from CVS and building it, check out the CVS&lt;br/&gt;
clients at &lt;a href=&quot;http://www.wincvs.org/,&quot;&gt;http://www.wincvs.org/,&lt;/a&gt; and for Jakarta CVS access, look at the&lt;br/&gt;
information at &lt;a href=&quot;http://jakarta.apache.org/site/cvsindex.html&quot;&gt;http://jakarta.apache.org/site/cvsindex.html&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
You should continue to use this bug report to track this issue.</comment>
                </comments>
                    <attachments>
                    <attachment id="12326992" name="ASF.LICENSE.NOT.GRANTED--conn-force-close.patch" size="5226" author="olegk" created="Tue, 4 Nov 2003 01:48:06 +0000" />
                    <attachment id="12326991" name="ASF.LICENSE.NOT.GRANTED--modifiedNTLMProxyAuth_Error.log" size="23143" author="barbolani@jazzfree.com" created="Mon, 3 Nov 2003 20:13:43 +0000" />
                    <attachment id="12326990" name="ASF.LICENSE.NOT.GRANTED--rc2NTLMProxyAuth_Error.log" size="7041" author="barbolani@jazzfree.com" created="Mon, 3 Nov 2003 19:58:40 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24327</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 2 Nov 2003 08:36:34 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133341</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>188710</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>