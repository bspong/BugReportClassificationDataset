<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:18:39 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-557/HTTPCLIENT-557.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-557] Nullpointer when creating URI from scheme specific part with null fragment</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-557</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>in org.apache.commons.httpclient.URI class constructor:&lt;br/&gt;
&lt;br/&gt;
public URI(String scheme, String schemeSpecificPart, String fragment)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throws URIException {&lt;br/&gt;
....&lt;br/&gt;
_fragment = fragment.toCharArray(); &lt;br/&gt;
&lt;br/&gt;
should be &lt;br/&gt;
&lt;br/&gt;
_fragment = fragment==null ? null : fragment.toCharArray();</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: All</environment>
            <key id="12334116">HTTPCLIENT-557</key>
            <summary>Nullpointer when creating URI from scheme specific part with null fragment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="vivodamichele@hotmail.com">Michele Vivoda</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jan 2006 01:58:01 +0000</created>
                <updated>Wed, 16 Feb 2011 20:44:28 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:11:15 +0100</resolved>
                            <version>3.0 Final</version>
                                <fixVersion>3.0.1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12383046" author="oglueck" created="Thu, 26 Jan 2006 08:20:30 +0000"  >Michele, please post a code snippet that exhibits the problem.</comment>
                    <comment id="12383047" author="olegk" created="Thu, 26 Jan 2006 08:50:54 +0000"  >Odi,&lt;br/&gt;
It is quite obvious that null fragment parameter will cause an NPE in the&lt;br/&gt;
constructor. We should just fix it in HttpClient 3.0 and completely remove all&lt;br/&gt;
this horrible code in HttpClient 4.0&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12383048" author="vivodamichele@hotmail.com" created="Thu, 26 Jan 2006 09:38:45 +0000"  >(In reply to comment #2)&lt;br/&gt;
&amp;gt; Odi,&lt;br/&gt;
&amp;gt; It is quite obvious that null fragment parameter will cause an NPE in the&lt;br/&gt;
&amp;gt; constructor. We should just fix it in HttpClient 3.0 and completely remove all&lt;br/&gt;
&amp;gt; this horrible code in HttpClient 4.0&lt;br/&gt;
&amp;gt; Oleg&lt;br/&gt;
&lt;br/&gt;
Do you mean the remove the deprecated constructors etc or the whole URI class &lt;br/&gt;
implementation ? I was using this constructor because I was not able to obtain &lt;br/&gt;
an uri whose isOpaquePart returned true using the URI(String, boolean) &lt;br/&gt;
constructor, for example from &amp;lt;mailto:&lt;a href=&apos;mailto:pop@pop.org&apos;&gt;pop@pop.org&lt;/a&gt;&amp;gt; What I get is an absolute &lt;br/&gt;
uri with relative path [&lt;a href=&apos;mailto:pop@pop.org&apos;&gt;pop@pop.org&lt;/a&gt;] ?? I am asking because I am doing some &lt;br/&gt;
testing following RFC3986 and using httpclient.URI class and JDK1.4 &lt;br/&gt;
java.net.URI.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12383049" author="olegk" created="Thu, 26 Jan 2006 19:29:27 +0000"  >(In reply to comment #3)&lt;br/&gt;
&amp;gt; (In reply to comment #2)&lt;br/&gt;
...&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Do you mean the remove the deprecated constructors etc or the whole URI class &lt;br/&gt;
&amp;gt; implementation ? I was using this constructor because I was not able to obtain &lt;br/&gt;
&amp;gt; an uri whose isOpaquePart returned true using the URI(String, boolean) &lt;br/&gt;
&amp;gt; constructor, for example from &amp;lt;mailto:&lt;a href=&apos;mailto:pop@pop.org&apos;&gt;pop@pop.org&lt;/a&gt;&amp;gt; What I get is an absolute &lt;br/&gt;
&amp;gt; uri with relative path [&lt;a href=&apos;mailto:pop@pop.org&apos;&gt;pop@pop.org&lt;/a&gt;] ?? I am asking because I am doing some &lt;br/&gt;
&amp;gt; testing following RFC3986 and using httpclient.URI class and JDK1.4 &lt;br/&gt;
&amp;gt; java.net.URI.&lt;br/&gt;
&lt;br/&gt;
Michele,&lt;br/&gt;
I meant the whole class (URI). This is my personal opinion that the URI class&lt;br/&gt;
heeds to go, and not that of the HttpClient committers. This issue will be&lt;br/&gt;
subject to open discussion on the dev list and eventually to a formal vote. I&lt;br/&gt;
will be pressing for deprecation (removal) of this class in favor of JDK14 URI&lt;br/&gt;
class, unless someone will step in to maintain and seriously refactor the URI&lt;br/&gt;
and related classes. The person who originally wrote the code left the project&lt;br/&gt;
about two years ago. The code has been effectively unmaintained ever since.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12383050" author="vivodamichele@hotmail.com" created="Thu, 26 Jan 2006 20:00:52 +0000"  >(In reply to comment #4)&lt;br/&gt;
&amp;gt; (In reply to comment #3)&lt;br/&gt;
&amp;gt; &amp;gt; (In reply to comment #2)&lt;br/&gt;
&amp;gt; ...&lt;br/&gt;
&amp;gt; &amp;gt; &lt;br/&gt;
&amp;gt; &amp;gt; Do you mean the remove the deprecated constructors etc or the whole URI &lt;br/&gt;
class &lt;br/&gt;
&amp;gt; &amp;gt; implementation ? I was using this constructor because I was not able to &lt;br/&gt;
obtain &lt;br/&gt;
&amp;gt; &amp;gt; an uri whose isOpaquePart returned true using the URI(String, boolean) &lt;br/&gt;
&amp;gt; &amp;gt; constructor, for example from &amp;lt;mailto:&lt;a href=&apos;mailto:pop@pop.org&apos;&gt;pop@pop.org&lt;/a&gt;&amp;gt; What I get is an &lt;br/&gt;
absolute &lt;br/&gt;
&amp;gt; &amp;gt; uri with relative path [&lt;a href=&apos;mailto:pop@pop.org&apos;&gt;pop@pop.org&lt;/a&gt;] ?? I am asking because I am doing some &lt;br/&gt;
&amp;gt; &amp;gt; testing following RFC3986 and using httpclient.URI class and JDK1.4 &lt;br/&gt;
&amp;gt; &amp;gt; java.net.URI.&lt;br/&gt;
&amp;gt; Michele,&lt;br/&gt;
&amp;gt; I meant the whole class (URI). This is my personal opinion that the URI class&lt;br/&gt;
&amp;gt; heeds to go, and not that of the HttpClient committers. This issue will be&lt;br/&gt;
&amp;gt; subject to open discussion on the dev list and eventually to a formal vote. I&lt;br/&gt;
&amp;gt; will be pressing for deprecation (removal) of this class in favor of JDK14 URI&lt;br/&gt;
&amp;gt; class, unless someone will step in to maintain and seriously refactor the URI&lt;br/&gt;
&amp;gt; and related classes. The person who originally wrote the code left the project&lt;br/&gt;
&amp;gt; about two years ago. The code has been effectively unmaintained ever since.&lt;br/&gt;
&amp;gt; Oleg&lt;br/&gt;
&lt;br/&gt;
Oleg,&lt;br/&gt;
I am doing these tests with junit on one side and rfc 3986 in the other and I &lt;br/&gt;
found that java4.net.URI has also some problems. An other thing is that if you &lt;br/&gt;
have a problem with java.net.URI is not possible to change the code. I would &lt;br/&gt;
leave at least a  wrapper around so that someone can still intervene in case of &lt;br/&gt;
problems. An other difference is that java.net.URI is unmodificable, while &lt;br/&gt;
httpclient.URI is modificable, do you think is really needed for it to be &lt;br/&gt;
modificable ? The code is perhaps in some parts &amp;quot;ugly&amp;quot; but I cannot say too bad &lt;br/&gt;
things on it since I was using it since when I found it in package &lt;br/&gt;
org.apache.util that was included in Slide in 2001/2 and also thanks to it and &lt;br/&gt;
even thanks to its errors I started to become interested in the concept. Its &lt;br/&gt;
uniqueness is in being quite forgiving in parsing&lt;br/&gt;
My aim is to make a java4-independent URI only package (may be some URI &lt;br/&gt;
comparators for different scopes [like network]). I already fit java4 URI into &lt;br/&gt;
this framework and passed almost all but 3 of the (188) tests, now I am trying &lt;br/&gt;
with httpclient.URI and I am around 20 failures. I must say that I found a &lt;br/&gt;
little bit heavy the fact of needing httpclient, codec and  even logging for &lt;br/&gt;
using a URI class. JUnit made me crazy with the class loaded wrong hierarchy &lt;br/&gt;
for logging...&lt;br/&gt;
Last thing...does httpclient need java 1.4 ?&lt;br/&gt;
Ciao&lt;br/&gt;
Michele&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12383051" author="olegk" created="Thu, 26 Jan 2006 20:13:41 +0000"  >(In reply to comment #5)&lt;br/&gt;
&amp;gt; (In reply to comment #4)&lt;br/&gt;
&amp;gt; &amp;gt; (In reply to comment #3)&lt;br/&gt;
&amp;gt; &amp;gt; &amp;gt; (In reply to comment #2)&lt;br/&gt;
&amp;gt; &amp;gt; ...&lt;br/&gt;
...&lt;br/&gt;
&amp;gt; Oleg,&lt;br/&gt;
&amp;gt; I am doing these tests with junit on one side and rfc 3986 in the other and I &lt;br/&gt;
&amp;gt; found that java4.net.URI has also some problems. An other thing is that if you &lt;br/&gt;
&amp;gt; have a problem with java.net.URI is not possible to change the code. I would &lt;br/&gt;
&amp;gt; leave at least a  wrapper around so that someone can still intervene in case of &lt;br/&gt;
&amp;gt; problems. An other difference is that java.net.URI is unmodificable, while &lt;br/&gt;
&amp;gt; httpclient.URI is modificable, do you think is really needed for it to be &lt;br/&gt;
&amp;gt; modificable ? The code is perhaps in some parts &amp;quot;ugly&amp;quot; but I cannot say too bad &lt;br/&gt;
&amp;gt; things on it since I was using it since when I found it in package &lt;br/&gt;
&amp;gt; org.apache.util that was included in Slide in 2001/2 and also thanks to it and &lt;br/&gt;
&amp;gt; even thanks to its errors I started to become interested in the concept. Its &lt;br/&gt;
&amp;gt; uniqueness is in being quite forgiving in parsing&lt;br/&gt;
&amp;gt; My aim is to make a java4-independent URI only package (may be some URI &lt;br/&gt;
&amp;gt; comparators for different scopes [like network]). I already fit java4 URI into &lt;br/&gt;
&amp;gt; this framework and passed almost all but 3 of the (188) tests, now I am trying &lt;br/&gt;
&amp;gt; with httpclient.URI and I am around 20 failures. I must say that I found a &lt;br/&gt;
&amp;gt; little bit heavy the fact of needing httpclient, codec and  even logging for &lt;br/&gt;
&amp;gt; using a URI class. JUnit made me crazy with the class loaded wrong hierarchy &lt;br/&gt;
&amp;gt; for logging...&lt;br/&gt;
&amp;gt; Last thing...does httpclient need java 1.4 ?&lt;br/&gt;
&amp;gt; Ciao&lt;br/&gt;
&amp;gt; Michele&lt;br/&gt;
&lt;br/&gt;
We may consider migrating this code to a module of its own, _provided_ someone&lt;br/&gt;
steps in to maintain it. Otherwise, I would very much rather prefer to use&lt;br/&gt;
something which is a part of standard JDK and is maintained (however badly)&lt;br/&gt;
&lt;br/&gt;
HttpClient 2.0.x and HttpClient 3.x require JDK 1.2.2 only. HttpClient 4.0 is&lt;br/&gt;
very likely to require JDK 1.4&lt;br/&gt;
&lt;br/&gt;
Oleg  &lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12383052" author="vivodamichele@hotmail.com" created="Thu, 26 Jan 2006 22:30:18 +0000"  >&amp;gt; We may consider migrating this code to a module of its own, _provided_ someone&lt;br/&gt;
&amp;gt; steps in to maintain it. Otherwise, I would very much rather prefer to use&lt;br/&gt;
&amp;gt; something which is a part of standard JDK and is maintained (however badly)&lt;br/&gt;
&amp;gt; HttpClient 2.0.x and HttpClient 3.x require JDK 1.2.2 only. HttpClient 4.0 is&lt;br/&gt;
&amp;gt; very likely to require JDK 1.4&lt;br/&gt;
&amp;gt; Oleg  &lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
I will give a look if I can refactor the code and if I do I let you know.&lt;br/&gt;
Can you tell me if you have know if it is required for it to be modificable and &lt;br/&gt;
not readonly ? I am going for a non modificable interface, like io.File or &lt;br/&gt;
net.URI &lt;br/&gt;
Michele</comment>
                    <comment id="12383053" author="olegk" created="Fri, 27 Jan 2006 00:48:08 +0000"  >(In reply to comment #7)&lt;br/&gt;
...&lt;br/&gt;
&amp;gt; Oleg&lt;br/&gt;
&amp;gt; I will give a look if I can refactor the code and if I do I let you know.&lt;br/&gt;
&amp;gt; Can you tell me if you have know if it is required for it to be modificable and &lt;br/&gt;
&amp;gt; not readonly ? I am going for a non modificable interface, like io.File or &lt;br/&gt;
&amp;gt; net.URI &lt;br/&gt;
&lt;br/&gt;
Michele&lt;br/&gt;
Such contribution would be much appreciated. I personally think URI objects&lt;br/&gt;
should be immutable but will not insist on a particular design choice.&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Michele&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12383054" author="olegk" created="Fri, 27 Jan 2006 01:07:47 +0000"  >Patch checked in&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>38385</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 26 Jan 2006 08:20:30 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133600</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47169</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>