<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:17:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-459/HTTPCLIENT-459.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-459] Document the problem with MS impl of digest authentication with older JREs and stale connection check</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-459</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>It seems like digest authentication, when used with a username of the format:&lt;br/&gt;
domain\username fails in httpclient-3.0-rc2.&lt;br/&gt;
&lt;br/&gt;
I did confirm that digest authentication does work by connecting to a local&lt;br/&gt;
Apache HTTP 2.0 server, using just a username and password (no domain\username).&lt;br/&gt;
However, it does not support the MD5-sess algorithm, and the server I am getting&lt;br/&gt;
the failure from is using MD5-sess. &lt;br/&gt;
&lt;br/&gt;
It may turn out the username is not causing the problem, but one thing is&lt;br/&gt;
consistent--I can connect to the site in the logs below using httpclient-2.0.2.&lt;br/&gt;
It fails when I use identical Java code, with the addition of AuthScope, when&lt;br/&gt;
using httpclient-3.0-rc2. I will also attach Java code that reproduces the problem.&lt;br/&gt;
&lt;br/&gt;
The following are wire and debug logs from httpclient-2.0.2 and&lt;br/&gt;
httpclient-3.0-rc2 respectively. The first one connects and gets an &amp;#39;HTTP 200&amp;#39;&lt;br/&gt;
response. The second one, using 3.0-rc2 fails with an &amp;#39;HTTP 401&amp;#39;.&lt;br/&gt;
&lt;br/&gt;
LOGS&lt;br/&gt;
===============================================================&lt;br/&gt;
commons-httpclient-2.0.2 (works):&lt;br/&gt;
2005/05/13 11:05:15:185 EDT [DEBUG] HttpClient - Java version: 1.3.1&lt;br/&gt;
2005/05/13 11:05:15:185 EDT [DEBUG] HttpClient - Java vendor: IBM Corporation&lt;br/&gt;
2005/05/13 11:05:15:185 EDT [DEBUG] HttpClient - Java class path: &lt;br/&gt;
2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - Operating system name: Windows XP&lt;br/&gt;
2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - Operating system architecture: x86&lt;br/&gt;
2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - Operating system version: 5.1&lt;br/&gt;
2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - SUN 1.2: SUN (DSA key/parameter&lt;br/&gt;
generation; DSA signing; SHA-1, MD5 digests; SecureRandom; X.509 certificates;&lt;br/&gt;
JKS keystore)&lt;br/&gt;
2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - SunJCE 1.22: SunJCE Provider&lt;br/&gt;
(implements DES, Triple DES, Blowfish, PBE, Diffie-Hellman, HMAC-MD5, HMAC-SHA1)&lt;br/&gt;
2005/05/13 11:05:15:205 EDT [DEBUG] HttpClient - SunJSSE 1.0303: Sun JSSE&lt;br/&gt;
provider(implements RSA Signatures, PKCS12, SunX509 key/trust factories, SSLv3,&lt;br/&gt;
TLSv1)&lt;br/&gt;
2005/05/13 11:05:20:893 EDT [DEBUG] HttpConnection - HttpConnection.setSoTimeout(0)&lt;br/&gt;
2005/05/13 11:05:20:893 EDT [DEBUG] HttpMethodBase - Execute loop try 1&lt;br/&gt;
2005/05/13 11:05:20:913 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;GET&lt;br/&gt;
/CustomerData-30/CustomerDataService.asmx HTTP/1.1[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:20:913 EDT [DEBUG] HttpMethodBase - Adding Host request header&lt;br/&gt;
2005/05/13 11:05:20:913 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;User-Agent: Jakarta&lt;br/&gt;
Commons-HttpClient/2.0.2[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:20:913 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;Host:&lt;br/&gt;
mappoint-css.partners.extranet.microsoft.com[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:173 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:273 EDT [DEBUG] header - &amp;lt;&amp;lt; &amp;quot;HTTP/1.1 401 Unauthorized[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:273 EDT [DEBUG] header - &amp;lt;&amp;lt; &amp;quot;Content-Length: 1656[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] header - &amp;lt;&amp;lt; &amp;quot;Content-Type: text/html[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] header - &amp;lt;&amp;lt; &amp;quot;Server: Microsoft-IIS/6.0[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] header - &amp;lt;&amp;lt; &amp;quot;WWW-Authenticate: Digest&lt;br/&gt;
qop=&amp;quot;auth&amp;quot;,algorithm=MD5-sess,nonce=&amp;quot;b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6&amp;quot;,opaque=&amp;quot;1704373a505e74c4ec692978e5c1a539&amp;quot;,charset=utf-8,realm=&amp;quot;Digest&amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] header - &amp;lt;&amp;lt; &amp;quot;X-Powered-By: ASP.NET[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] header - &amp;lt;&amp;lt; &amp;quot;Date: Fri, 13 May 2005 15:05:37&lt;br/&gt;
GMT[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] HttpMethodBase - Authorization required&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] HttpAuthenticator - Authenticating with the&lt;br/&gt;
&amp;#39;Digest&amp;#39; authentication realm at mappoint-css.partners.extranet.microsoft.com&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] DigestScheme - Using qop method auth&lt;br/&gt;
2005/05/13 11:05:21:283 EDT [DEBUG] HttpMethodBase - HttpMethodBase.execute():&lt;br/&gt;
Server demanded authentication credentials, will try again.&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] HttpMethodBase - Resorting to protocol&lt;br/&gt;
version default close connection policy&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] HttpMethodBase - Should NOT close&lt;br/&gt;
connection, using HTTP/1.1.&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] HttpMethodBase - Execute loop try 2&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;GET&lt;br/&gt;
/CustomerData-30/CustomerDataService.asmx HTTP/1.1[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] HttpMethodBase - Request to add Host header&lt;br/&gt;
ignored: header already added&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;User-Agent: Jakarta&lt;br/&gt;
Commons-HttpClient/2.0.2[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;Host:&lt;br/&gt;
mappoint-css.partners.extranet.microsoft.com[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;Authorization: Digest&lt;br/&gt;
username=&amp;quot;domain\user&amp;quot;, realm=&amp;quot;Digest&amp;quot;,&lt;br/&gt;
nonce=&amp;quot;b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6&amp;quot;,&lt;br/&gt;
uri=&amp;quot;/CustomerData-30/CustomerDataService.asmx&amp;quot;, qop=&amp;quot;auth&amp;quot;,&lt;br/&gt;
algorithm=&amp;quot;MD5-sess&amp;quot;, nc=00000001, cnonce=&amp;quot;393a8abf65cd20f85ffdf46a9273b28b&amp;quot;,&lt;br/&gt;
response=&amp;quot;854bf54261112caf2e86652276cb2ce6&amp;quot;,&lt;br/&gt;
opaque=&amp;quot;1704373a505e74c4ec692978e5c1a539&amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:293 EDT [DEBUG] header - &amp;gt;&amp;gt; &amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:05:21:994 EDT [DEBUG] header - &amp;lt;&amp;lt; &amp;quot;HTTP/1.1 200 OK[\r][\n]&amp;quot;HTTP&lt;br/&gt;
result: 200&lt;br/&gt;
&lt;br/&gt;
===========================================================&lt;br/&gt;
&lt;br/&gt;
commons-httpclient-3.0-rc2 (does not work):&lt;br/&gt;
2005/05/13 11:16:54:881 EDT [DEBUG] DefaultHttpParams - -Set parameter&lt;br/&gt;
http.useragent = Jakarta Commons-HttpClient/3.0-rc2&lt;br/&gt;
2005/05/13 11:16:54:881 EDT [DEBUG] DefaultHttpParams - -Set parameter&lt;br/&gt;
http.protocol.version = HTTP/1.1&lt;br/&gt;
2005/05/13 11:16:54:881 EDT [DEBUG] DefaultHttpParams - -Set parameter&lt;br/&gt;
http.connection-manager.class = class&lt;br/&gt;
org.apache.commons.httpclient.SimpleHttpConnectionManager&lt;br/&gt;
2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter&lt;br/&gt;
http.protocol.cookie-policy = rfc2109&lt;br/&gt;
2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter&lt;br/&gt;
http.protocol.element-charset = US-ASCII&lt;br/&gt;
2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter&lt;br/&gt;
http.protocol.content-charset = ISO-8859-1&lt;br/&gt;
2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter&lt;br/&gt;
http.method.retry-handler =&lt;br/&gt;
&lt;a href=&apos;mailto:org.apache.commons.httpclient.DefaultHttpMethodRetryHandler@5048d78c&apos;&gt;org.apache.commons.httpclient.DefaultHttpMethodRetryHandler@5048d78c&lt;/a&gt;&lt;br/&gt;
2005/05/13 11:16:54:891 EDT [DEBUG] DefaultHttpParams - -Set parameter&lt;br/&gt;
http.dateparser.patterns = [EEE, dd MMM yyyy HH:mm:ss zzz, EEEE, dd-MMM-yy&lt;br/&gt;
HH:mm:ss zzz, EEE MMM d HH:mm:ss yyyy, EEE, dd-MMM-yyyy HH:mm:ss z, EEE,&lt;br/&gt;
dd-MMM-yyyy HH-mm-ss z, EEE, dd MMM yy HH:mm:ss z, EEE dd-MMM-yyyy HH:mm:ss z,&lt;br/&gt;
EEE dd MMM yyyy HH:mm:ss z, EEE dd-MMM-yyyy HH-mm-ss z, EEE dd-MMM-yy HH:mm:ss&lt;br/&gt;
z, EEE dd MMM yy HH:mm:ss z, EEE,dd-MMM-yy HH:mm:ss z, EEE,dd-MMM-yyyy HH:mm:ss&lt;br/&gt;
z, EEE, dd-MM-yyyy HH:mm:ss z]&lt;br/&gt;
2005/05/13 11:16:54:911 EDT [DEBUG] HttpClient - -Java version: 1.3.1&lt;br/&gt;
2005/05/13 11:16:54:911 EDT [DEBUG] HttpClient - -Java vendor: IBM Corporation&lt;br/&gt;
2005/05/13 11:16:54:911 EDT [DEBUG] HttpClient - -Java class path: &lt;br/&gt;
2005/05/13 11:16:54:941 EDT [DEBUG] HttpClient - -Operating system name: Windows XP&lt;br/&gt;
2005/05/13 11:16:54:941 EDT [DEBUG] HttpClient - -Operating system architecture: x86&lt;br/&gt;
2005/05/13 11:16:54:941 EDT [DEBUG] HttpClient - -Operating system version: 5.1&lt;br/&gt;
2005/05/13 11:16:54:941 EDT [DEBUG] HttpClient - -SUN 1.2: SUN (DSA&lt;br/&gt;
key/parameter generation; DSA signing; SHA-1, MD5 digests; SecureRandom; X.509&lt;br/&gt;
certificates; JKS keystore)&lt;br/&gt;
2005/05/13 11:16:54:951 EDT [DEBUG] HttpClient - -SunJCE 1.22: SunJCE Provider&lt;br/&gt;
(implements DES, Triple DES, Blowfish, PBE, Diffie-Hellman, HMAC-MD5, HMAC-SHA1)&lt;br/&gt;
2005/05/13 11:16:54:951 EDT [DEBUG] HttpClient - -SunJSSE 1.0303: Sun JSSE&lt;br/&gt;
provider(implements RSA Signatures, PKCS12, SunX509 key/trust factories, SSLv3,&lt;br/&gt;
TLSv1)&lt;br/&gt;
2005/05/13 11:16:54:961 EDT [DEBUG] HttpConnection - -Open connection to&lt;br/&gt;
mappoint-css.partners.extranet.microsoft.com:443&lt;br/&gt;
2005/05/13 11:17:00:629 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;GET&lt;br/&gt;
/CustomerData-30/CustomerDataService.asmx HTTP/1.1[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:629 EDT [DEBUG] HttpMethodBase - -Adding Host request header&lt;br/&gt;
2005/05/13 11:17:00:639 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;User-Agent: Jakarta&lt;br/&gt;
Commons-HttpClient/3.0-rc2[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:639 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;Host:&lt;br/&gt;
mappoint-css.partners.extranet.microsoft.com[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:639 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:989 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;HTTP/1.1 401 Unauthorized[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:999 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;Content-Length: 1656[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:999 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;Content-Type: text/html[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:999 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;Server: Microsoft-IIS/6.0[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:999 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;WWW-Authenticate: Digest&lt;br/&gt;
qop=&amp;quot;auth&amp;quot;,algorithm=MD5-sess,nonce=&amp;quot;c66759cace57c5016cf5645c6dee5b649ed29067f652939d6aaf7239310bb333eeb0153783ae445f&amp;quot;,opaque=&amp;quot;e7e259c137b65766c971d6cfc4115789&amp;quot;,charset=utf-8,realm=&amp;quot;Digest&amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:999 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;X-Powered-By: ASP.NET[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:999 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;Date: Fri, 13 May 2005&lt;br/&gt;
15:16:51 GMT[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:00:999 EDT [DEBUG] HttpMethodDirector - -Authorization required&lt;br/&gt;
2005/05/13 11:17:01:009 EDT [DEBUG] AuthChallengeProcessor - -Supported&lt;br/&gt;
authentication schemes in the order of preference: [ntlm, digest, basic]&lt;br/&gt;
2005/05/13 11:17:01:009 EDT [DEBUG] AuthChallengeProcessor - -Challenge for ntlm&lt;br/&gt;
authentication scheme not available&lt;br/&gt;
2005/05/13 11:17:01:009 EDT [INFO] AuthChallengeProcessor - -digest&lt;br/&gt;
authentication scheme selected&lt;br/&gt;
2005/05/13 11:17:01:009 EDT [DEBUG] AuthChallengeProcessor - -Using&lt;br/&gt;
authentication scheme: digest&lt;br/&gt;
2005/05/13 11:17:01:009 EDT [DEBUG] AuthChallengeProcessor - -Authorization&lt;br/&gt;
challenge processed&lt;br/&gt;
2005/05/13 11:17:01:009 EDT [DEBUG] HttpMethodDirector - -Authentication scope:&lt;br/&gt;
DIGEST &amp;#39;Digest&amp;#39;@mappoint-css.partners.extranet.microsoft.com:443&lt;br/&gt;
2005/05/13 11:17:01:009 EDT [DEBUG] HttpMethodDirector - -Retry authentication&lt;br/&gt;
2005/05/13 11:17:01:019 EDT [DEBUG] HttpMethodBase - -Resorting to protocol&lt;br/&gt;
version default close connection policy&lt;br/&gt;
2005/05/13 11:17:01:019 EDT [DEBUG] HttpMethodBase - -Should NOT close&lt;br/&gt;
connection, using HTTP/1.1&lt;br/&gt;
2005/05/13 11:17:01:019 EDT [DEBUG] HttpConnection - -Connection is locked. &lt;br/&gt;
Call to releaseConnection() ignored.&lt;br/&gt;
2005/05/13 11:17:01:019 EDT [DEBUG] HttpMethodDirector - -Authenticating with&lt;br/&gt;
DIGEST &amp;#39;Digest&amp;#39;@mappoint-css.partners.extranet.microsoft.com:443&lt;br/&gt;
2005/05/13 11:17:01:019 EDT [DEBUG] HttpMethodParams - -Credential charset not&lt;br/&gt;
configured, using HTTP element charset&lt;br/&gt;
2005/05/13 11:17:01:019 EDT [DEBUG] DigestScheme - -Using qop method auth&lt;br/&gt;
2005/05/13 11:17:01:019 EDT [DEBUG] HttpConnection - -Connection is stale,&lt;br/&gt;
closing...&lt;br/&gt;
2005/05/13 11:17:01:019 EDT [DEBUG] HttpConnection - -Open connection to&lt;br/&gt;
mappoint-css.partners.extranet.microsoft.com:443&lt;br/&gt;
2005/05/13 11:17:01:110 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;GET&lt;br/&gt;
/CustomerData-30/CustomerDataService.asmx HTTP/1.1[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:110 EDT [DEBUG] HttpMethodBase - -Adding Host request header&lt;br/&gt;
2005/05/13 11:17:01:110 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;User-Agent: Jakarta&lt;br/&gt;
Commons-HttpClient/3.0-rc2[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:110 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;Authorization: Digest&lt;br/&gt;
username=&amp;quot;domain\user&amp;quot;, realm=&amp;quot;Digest&amp;quot;,&lt;br/&gt;
nonce=&amp;quot;c66759cace57c5016cf5645c6dee5b649ed29067f652939d6aaf7239310bb333eeb0153783ae445f&amp;quot;,&lt;br/&gt;
uri=&amp;quot;/CustomerData-30/CustomerDataService.asmx&amp;quot;,&lt;br/&gt;
response=&amp;quot;9cab4fcdb2d09f57523aec80d7b51e95&amp;quot;, qop=&amp;quot;auth&amp;quot;, nc=00000001,&lt;br/&gt;
cnonce=&amp;quot;b27507ee79c880b2bb565d363598ce07&amp;quot;, algorithm=&amp;quot;MD5-sess&amp;quot;,&lt;br/&gt;
opaque=&amp;quot;e7e259c137b65766c971d6cfc4115789&amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:120 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;Host:&lt;br/&gt;
mappoint-css.partners.extranet.microsoft.com[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:120 EDT [DEBUG] header - -&amp;gt;&amp;gt; &amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:540 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;HTTP/1.1 401 Unauthorized[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:540 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;Content-Length: 1539[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:540 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;Content-Type: text/html[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;Server: Microsoft-IIS/6.0[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;WWW-Authenticate: Digest&lt;br/&gt;
qop=&amp;quot;auth&amp;quot;,algorithm=MD5-sess,nonce=&amp;quot;3296b0dace57c5012fe314f8c6f8cafd10abc7a61c09484b2be5c7ef19ecb3c080da1f82c3f5a532&amp;quot;,opaque=&amp;quot;87578a7f0871280654aed868cb9497fb&amp;quot;,charset=utf-8,realm=&amp;quot;Digest&amp;quot;[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;X-Powered-By: ASP.NET[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] header - -&amp;lt;&amp;lt; &amp;quot;Date: Fri, 13 May 2005&lt;br/&gt;
15:17:19 GMT[\r][\n]&amp;quot;&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] HttpMethodDirector - -Authorization required&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] AuthChallengeProcessor - -Using&lt;br/&gt;
authentication scheme: digest&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] AuthChallengeProcessor - -Authorization&lt;br/&gt;
challenge processed&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] HttpMethodDirector - -Authentication scope:&lt;br/&gt;
DIGEST &amp;#39;Digest&amp;#39;@mappoint-css.partners.extranet.microsoft.com:443&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] HttpMethodDirector - -Credentials required&lt;br/&gt;
HTTP result: 401&lt;br/&gt;
2005/05/13 11:17:01:550 EDT [DEBUG] HttpMethodDirector - -Credentials provider&lt;br/&gt;
not available&lt;br/&gt;
2005/05/13 11:17:01:580 EDT [INFO] HttpMethodDirector - -Failure authenticating&lt;br/&gt;
with DIGEST &amp;#39;Digest&amp;#39;@mappoint-css.partners.extranet.microsoft.com:443&lt;br/&gt;
2005/05/13 11:17:01:580 EDT [DEBUG] HttpMethodBase - -Buffering response body&lt;br/&gt;
2005/05/13 11:17:01:580 EDT [DEBUG] HttpMethodBase - -Resorting to protocol&lt;br/&gt;
version default close connection policy&lt;br/&gt;
2005/05/13 11:17:01:580 EDT [DEBUG] HttpMethodBase - -Should NOT close&lt;br/&gt;
connection, using HTTP/1.1&lt;br/&gt;
2005/05/13 11:17:01:580 EDT [DEBUG] HttpConnection - -Releasing connection back&lt;br/&gt;
to connection manager.</description>
                <environment>Operating System: Windows XP&lt;br/&gt;
Platform: PC</environment>
            <key id="12334018">HTTPCLIENT-459</key>
            <summary>Document the problem with MS impl of digest authentication with older JREs and stale connection check</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jeff.hougentogler@gmail.com">Jeff Hougentogler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 14 May 2005 01:49:43 +0100</created>
                <updated>Wed, 16 Feb 2011 20:43:48 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:11:01 +0100</resolved>
                            <version>3.0 RC2</version>
                                <fixVersion>3.0 Final</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382315" author="jeff.hougentogler@gmail.com" created="Sat, 14 May 2005 01:57:52 +0100"  >Created an attachment (id=15022)&lt;br/&gt;
Reproduces the error.&lt;br/&gt;
</comment>
                    <comment id="12382316" author="olegk" created="Sat, 14 May 2005 05:18:38 +0100"  >I think this problem has nothing to do with the user name. I was able to&lt;br/&gt;
establish that HttpClient 3.0 produced a different auth string compared to that&lt;br/&gt;
produced by HttpClient 2.0 in response to the same auth challenge:&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Credentials creds = new UsernamePasswordCredentials(&amp;quot;domain\\username&amp;quot;, &amp;quot;password&amp;quot;);&lt;br/&gt;
DigestScheme authscheme = new DigestScheme(&amp;quot;Digest&lt;br/&gt;
qop=\&amp;quot;auth\&amp;quot;,algorithm=MD5-sess,nonce=\&amp;quot;b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6\&amp;quot;,opaque=\&amp;quot;1704373a505e74c4ec692978e5c1a539\&amp;quot;,charset=utf-8,realm=\&amp;quot;Digest\&amp;quot;&amp;quot;);&lt;br/&gt;
System.out.println(authscheme.authenticate(creds, &amp;quot;GET&amp;quot;, &amp;quot;/&amp;quot;));&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
HttpClient 2.0 output: &lt;br/&gt;
&lt;br/&gt;
Digest username=&amp;quot;domain\username&amp;quot;, realm=&amp;quot;Digest&amp;quot;,&lt;br/&gt;
nonce=&amp;quot;b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6&amp;quot;,&lt;br/&gt;
uri=&amp;quot;/&amp;quot;, qop=&amp;quot;auth&amp;quot;, algorithm=&amp;quot;MD5-sess&amp;quot;, nc=00000001,&lt;br/&gt;
cnonce=&amp;quot;3e7cee60022e0f9c6d23cd9dea46a033&amp;quot;,&lt;br/&gt;
response=&amp;quot;3c997fba9c2e77e1c37fadd352006a46&amp;quot;,&lt;br/&gt;
opaque=&amp;quot;1704373a505e74c4ec692978e5c1a539&amp;quot;&lt;br/&gt;
&lt;br/&gt;
HttpClient 3.0 output: &lt;br/&gt;
&lt;br/&gt;
Digest username=&amp;quot;domain\username&amp;quot;, realm=&amp;quot;Digest&amp;quot;,&lt;br/&gt;
nonce=&amp;quot;b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6&amp;quot;,&lt;br/&gt;
uri=&amp;quot;/&amp;quot;, response=&amp;quot;038567efed48e01d0f08d27526b6ebda&amp;quot;, algorithm=&amp;quot;MD5-sess&amp;quot;,&lt;br/&gt;
opaque=&amp;quot;1704373a505e74c4ec692978e5c1a539&amp;quot;&lt;br/&gt;
&lt;br/&gt;
Obviously the responses are different and this may well be the cause of the&lt;br/&gt;
problem. &lt;br/&gt;
&lt;br/&gt;
I remember the DigestScheme code was revised for better compliance with RFC&lt;br/&gt;
2617. Theoretically HttpClient 3.0 _should_ produce more compliant auth&lt;br/&gt;
responses. So, I am not entirely sure whether this problem is HttpClient&amp;#39;s fault&lt;br/&gt;
or that of MS IIS. &lt;br/&gt;
&lt;br/&gt;
I do encourage you to experiment with HttpClient&amp;#39;s code if you want a quick&lt;br/&gt;
resolution to this issue, since you are the only person who can reliably&lt;br/&gt;
reproduce the problem. In my turn I&amp;#39;ll try to review HttpClient&amp;#39;s handling of&lt;br/&gt;
MD5-sess algorithm for compliance with RFC 2617. I make no promises as to how&lt;br/&gt;
quickly I can do that, though. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382317" author="olegk" created="Sat, 14 May 2005 09:21:27 +0100"  >Jeff,&lt;br/&gt;
I was wrong in my initial assumption, because my test case was flawed. The&lt;br/&gt;
invalid auth response generated by HttpClient 3.0 was due to a deprecated&lt;br/&gt;
constructor I used in my test cases. &lt;br/&gt;
&lt;br/&gt;
So, this does not look good. I may need a set of valid credentials for the site&lt;br/&gt;
in order to proceed.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382318" author="olegk" created="Sat, 14 May 2005 19:48:36 +0100"  >I did some further research. I am certain that given the same auth challenge and&lt;br/&gt;
the same cnonce value both HttpClient versions produce the same credentials hash&lt;br/&gt;
(&amp;#39;response&amp;#39; attribute). The only obvious difference is slightly different&lt;br/&gt;
arrangement of attributes in the auth response. I do not think this should&lt;br/&gt;
matter but currently this is the only plausible theory that can explain the failure&lt;br/&gt;
&lt;br/&gt;
HttpClient 2.0:&lt;br/&gt;
===============&lt;br/&gt;
Digest &lt;br/&gt;
&amp;nbsp;&amp;nbsp;username=&amp;quot;domain\username&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;realm=&amp;quot;Digest&amp;quot;, &lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
nonce=&amp;quot;b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6&amp;quot;,&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;uri=&amp;quot;/&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;qop=&amp;quot;auth&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;algorithm=&amp;quot;MD5-sess&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;nc=00000001, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;cnonce=&amp;quot;a9b7ba70783b617e9998dc4dd82eb3c5&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;response=&amp;quot;22c567093b3689e1edf4184fad8218d3&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;opaque=&amp;quot;1704373a505e74c4ec692978e5c1a539&amp;quot;&lt;br/&gt;
&lt;br/&gt;
HttpClient 3.0:&lt;br/&gt;
===============&lt;br/&gt;
Digest &lt;br/&gt;
&amp;nbsp;&amp;nbsp;username=&amp;quot;domain\username&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;realm=&amp;quot;Digest&amp;quot;, &lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
nonce=&amp;quot;b2a83a38cd57c501af3ad2c91f189512060524424ffc2b818c9920db15cd247a9d47cf5a789d63c6&amp;quot;,&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;uri=&amp;quot;/&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;response=&amp;quot;22c567093b3689e1edf4184fad8218d3&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;qop=&amp;quot;auth&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;nc=00000001, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;cnonce=&amp;quot;a9b7ba70783b617e9998dc4dd82eb3c5&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;algorithm=&amp;quot;MD5-sess&amp;quot;, &lt;br/&gt;
&amp;nbsp;&amp;nbsp;opaque=&amp;quot;1704373a505e74c4ec692978e5c1a539&amp;quot;&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382319" author="olegk" created="Sat, 14 May 2005 20:02:58 +0100"  >Created an attachment (id=15029)&lt;br/&gt;
Test patch&lt;br/&gt;
&lt;br/&gt;
Jeff, could you please test your app with this patch and let me know the&lt;br/&gt;
result?&lt;br/&gt;
&lt;br/&gt;
Meanwhile I&amp;#39;ll try to find an HTTP server that supports MD5-sess I could test&lt;br/&gt;
against.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382320" author="jeff.hougentogler@gmail.com" created="Tue, 17 May 2005 00:31:36 +0100"  >(In reply to comment #3)&lt;br/&gt;
Oleg,&lt;br/&gt;
I think this may be the same problem in the HTTP Client 3.0 code. I overlooked&lt;br/&gt;
this before, but I checked the &amp;#39;response&amp;#39; strings in the logs I posted for both&lt;br/&gt;
the 2.0.2 and 3.0 client and they do NOT match--just like in your initial test&lt;br/&gt;
case where different responses were generated. I tried the patch too, just in&lt;br/&gt;
case--no luck though. I seem to remember when I was stepping through the code&lt;br/&gt;
for the 3.0 client that the cnonce value (which I believe is seeded with the&lt;br/&gt;
system time), is hashed into the final &amp;#39;response&amp;#39; value---I do not know if the&lt;br/&gt;
2.0.2 code does this, but it may be why the 3.0 code is producing a different&lt;br/&gt;
response.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Jeff,&lt;br/&gt;
&amp;gt; I was wrong in my initial assumption, because my test case was flawed. The&lt;br/&gt;
&amp;gt; invalid auth response generated by HttpClient 3.0 was due to a deprecated&lt;br/&gt;
&amp;gt; constructor I used in my test cases. &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; So, this does not look good. I may need a set of valid credentials for the site&lt;br/&gt;
&amp;gt; in order to proceed.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Oleg&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12382321" author="olegk" created="Tue, 17 May 2005 03:22:19 +0100"  >(In reply to comment #6)&lt;br/&gt;
&amp;gt; (In reply to comment #3)&lt;br/&gt;
&amp;gt; Oleg,&lt;br/&gt;
&amp;gt; I think this may be the same problem in the HTTP Client 3.0 code. I overlooked&lt;br/&gt;
&amp;gt; this before, but I checked the &amp;#39;response&amp;#39; strings in the logs I posted for both&lt;br/&gt;
&amp;gt; the 2.0.2 and 3.0 client and they do NOT match--just like in your initial test&lt;br/&gt;
&amp;gt; case where different responses were generated. I tried the patch too, just in&lt;br/&gt;
&amp;gt; case--no luck though. I seem to remember when I was stepping through the code&lt;br/&gt;
&amp;gt; for the 3.0 client that the cnonce value (which I believe is seeded with the&lt;br/&gt;
&amp;gt; system time), is hashed into the final &amp;#39;response&amp;#39; value---I do not know if the&lt;br/&gt;
&amp;gt; 2.0.2 code does this, but it may be why the 3.0 code is producing a different&lt;br/&gt;
&amp;gt; response.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&lt;br/&gt;
I am reasonably sure both versions produce identical &amp;#39;response&amp;#39; values given the&lt;br/&gt;
same challenge and cnonce value. &lt;br/&gt;
&lt;br/&gt;
Sadly, Apache Http server does not provide support for MD5-sess yet. So, I can&amp;#39;t&lt;br/&gt;
test the code myself and have to rely on the wire log that you have sent. I am&lt;br/&gt;
afraid I will not be able to do much without access to an Microsoft IIS server&lt;br/&gt;
with Digest MD5-sess authentication on.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382322" author="jeff.hougentogler@gmail.com" created="Tue, 17 May 2005 05:38:32 +0100"  >&lt;br/&gt;
(In reply to comment #7)&lt;br/&gt;
I found this on msdn.microsoft.com--it will allow you to create a temporary&lt;br/&gt;
evaluation account. It should allow you to access the URL in the test case I&lt;br/&gt;
attached:&lt;br/&gt;
&lt;a href=&quot;https://mappoint-css.partners.extranet.microsoft.com/MwsSignup/Eval.aspx&quot;&gt;https://mappoint-css.partners.extranet.microsoft.com/MwsSignup/Eval.aspx&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; I am reasonably sure both versions produce identical &amp;#39;response&amp;#39; values given the&lt;br/&gt;
&amp;gt; same challenge and cnonce value. &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Sadly, Apache Http server does not provide support for MD5-sess yet. So, I can&amp;#39;t&lt;br/&gt;
&amp;gt; test the code myself and have to rely on the wire log that you have sent. I am&lt;br/&gt;
&amp;gt; afraid I will not be able to do much without access to an Microsoft IIS server&lt;br/&gt;
&amp;gt; with Digest MD5-sess authentication on.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Oleg&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12382323" author="jeff.hougentogler@gmail.com" created="Wed, 18 May 2005 05:40:32 +0100"  >It turned out not to be a digest problem.&lt;br/&gt;
&lt;br/&gt;
I was reading the &amp;quot;Known Limitations and Problems&amp;quot; here:&lt;br/&gt;
&lt;a href=&quot;http://jakarta.apache.org/commons/httpclient/3.0/sslguide.html&quot;&gt;http://jakarta.apache.org/commons/httpclient/3.0/sslguide.html&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Since I am using JDK 1.3, I figured I might be having a problem with stale&lt;br/&gt;
connection checking--which it looks like is enabled by default in httpclient&lt;br/&gt;
2.0.2 and 3.0-rc2. I shut of stale connection checking and it started working in&lt;br/&gt;
3.0-rc2. &lt;br/&gt;
&lt;br/&gt;
At first, this made no sense because stale connection checking is also enabled&lt;br/&gt;
in 2.0.2 by default. What is different is the way each version implements&lt;br/&gt;
isStale(). The version 2.0.2 httpclient uses a PushbackInputStream, while&lt;br/&gt;
version 3.0-rc2 uses a BufferedInputStream.&lt;br/&gt;
&lt;br/&gt;
This may not be a problem in JDK 1.4 at all, but for 1.3 it took a little time&lt;br/&gt;
to figure out. I&amp;#39;m still not entirely sure why this was causing the problem--my&lt;br/&gt;
guess is that because the client thought the connection was stale, it re-opened&lt;br/&gt;
a new one for which the nonce value the client had was no longer valid--hence&lt;br/&gt;
the 401 status code.</comment>
                    <comment id="12382324" author="olegk" created="Wed, 18 May 2005 21:42:30 +0100"  >(In reply to comment #9)&lt;br/&gt;
&amp;gt; It turned out not to be a digest problem.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; I was reading the &amp;quot;Known Limitations and Problems&amp;quot; here:&lt;br/&gt;
&amp;gt; &lt;a href=&quot;http://jakarta.apache.org/commons/httpclient/3.0/sslguide.html&quot;&gt;http://jakarta.apache.org/commons/httpclient/3.0/sslguide.html&lt;/a&gt;&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Since I am using JDK 1.3, I figured I might be having a problem with stale&lt;br/&gt;
&amp;gt; connection checking--which it looks like is enabled by default in httpclient&lt;br/&gt;
&amp;gt; 2.0.2 and 3.0-rc2. I shut of stale connection checking and it started working in&lt;br/&gt;
&amp;gt; 3.0-rc2. &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; At first, this made no sense because stale connection checking is also enabled&lt;br/&gt;
&amp;gt; in 2.0.2 by default. What is different is the way each version implements&lt;br/&gt;
&amp;gt; isStale(). The version 2.0.2 httpclient uses a PushbackInputStream, while&lt;br/&gt;
&amp;gt; version 3.0-rc2 uses a BufferedInputStream.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; This may not be a problem in JDK 1.4 at all, but for 1.3 it took a little time&lt;br/&gt;
&amp;gt; to figure out. I&amp;#39;m still not entirely sure why this was causing the problem--my&lt;br/&gt;
&amp;gt; guess is that because the client thought the connection was stale, it re-opened&lt;br/&gt;
&amp;gt; a new one for which the nonce value the client had was no longer valid--hence&lt;br/&gt;
&amp;gt; the 401 status code.&lt;br/&gt;
&lt;br/&gt;
This kind of explains it. I do not have good explanation as to why the stale&lt;br/&gt;
connection check produces different results with different version of&lt;br/&gt;
HttpClient, but at least this perfectly explains why Microsoft IIS fails the&lt;br/&gt;
authentication, as IIS traditionally implements its security context based on&lt;br/&gt;
the state of a persistent connection.&lt;br/&gt;
&lt;br/&gt;
Anyway, out of this story I brought out three items I would like to follow upon&lt;br/&gt;
&lt;br/&gt;
(1) We need to document this case in the &amp;quot;Known Limitations and Problems&amp;quot;&lt;br/&gt;
section of the SSL guide and provide a link in the authentication guide. I&amp;#39;ll&lt;br/&gt;
accept the bug as an enhancement request shortly&lt;br/&gt;
&lt;br/&gt;
(2) While working on this case I discovered the following document:&lt;br/&gt;
&lt;a href=&quot;http://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/TechRef/717b450c-f4a0-4cc9-86f4-cc0633aae5f9.mspx&quot;&gt;http://www.microsoft.com/technet/prodtechnol/windowsserver2003/library/TechRef/717b450c-f4a0-4cc9-86f4-cc0633aae5f9.mspx&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
As always Microsoft is true to its embrace and extend strategy towards open&lt;br/&gt;
standards. Their implementation of Digest authentication while appears compliant&lt;br/&gt;
with RFC 2616 and RFC 2617 in fact represents a superset of the standard with&lt;br/&gt;
some additional Windows specific aspects. If you are interested in giving me a&lt;br/&gt;
helping hand (or even taking the lead), we could implement a Windows specific&lt;br/&gt;
version of DigestScheme&lt;br/&gt;
&lt;br/&gt;
(3) DigestScheme code review made me realize the currently HttpClient does not&lt;br/&gt;
correctly handle escaped characters in HTTP elements. &lt;br/&gt;
&lt;br/&gt;
See an excerpt from Microsoft&amp;#39;s &amp;quot;How Digest Authentication Works&amp;quot; document below:&lt;br/&gt;
&lt;br/&gt;
&amp;lt;quote&amp;gt;&lt;br/&gt;
* RFC 2617-compliant Digest Authentication challenges and responses must also&lt;br/&gt;
comply with RFC 2616: Hypertext Transfer Protocol -- HTTP/1.1 quoted string&lt;br/&gt;
requirements. This requirement particularly affects the use of backslash (\) and&lt;br/&gt;
embedded double quotes. Both must be preceded (escaped) with a backslash.&lt;br/&gt;
&lt;br/&gt;
* For example, domain\username according to RFC 2616 is read as domainusername.&lt;br/&gt;
This reading is important because if an application sends information in this&lt;br/&gt;
format rather than as domain\\username, authentication fails.&lt;br/&gt;
&lt;br/&gt;
* However, because this is a known issue with domain\username , if&lt;br/&gt;
authenticating with backslash encoding fails, Digest SSP attempts to&lt;br/&gt;
authenticate the response and assumes that the backslash is part of the string.&lt;br/&gt;
This behavior can be turned off by setting the ServerCompat registry key.&lt;br/&gt;
&amp;lt;/quote&amp;gt;&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll file a bug report for this issue shortly&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382325" author="jeff.hougentogler@gmail.com" created="Wed, 18 May 2005 23:08:47 +0100"  >(in reply to comment #10)&lt;br/&gt;
&amp;gt;As always Microsoft is true to its embrace and extend strategy towards open&lt;br/&gt;
&amp;gt;standards. Their implementation of Digest authentication while appears compliant&lt;br/&gt;
&amp;gt;with RFC 2616 and RFC 2617 in fact represents a superset of the standard with&lt;br/&gt;
&amp;gt;some additional Windows specific aspects. If you are interested in giving me a&lt;br/&gt;
&amp;gt;helping hand (or even taking the lead), we could implement a Windows specific&lt;br/&gt;
&amp;gt;version of DigestScheme&lt;br/&gt;
&lt;br/&gt;
Sounds great, I would really like to help/lead that effort.</comment>
                    <comment id="12382326" author="olegk" created="Thu, 19 May 2005 00:44:15 +0100"  >(In reply to comment #11)&lt;br/&gt;
&amp;gt; (in reply to comment #10)&lt;br/&gt;
...&lt;br/&gt;
&amp;nbsp;If you are interested in giving me a&lt;br/&gt;
&amp;gt; &amp;gt;helping hand (or even taking the lead), we could implement a Windows specific&lt;br/&gt;
&amp;gt; &amp;gt;version of DigestScheme&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Sounds great, I would really like to help/lead that effort.&lt;br/&gt;
&lt;br/&gt;
Cool. Please add yourself to the CC list of the &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-460&quot; title=&quot;Windows specific implementation of the Digest auth scheme&quot;&gt;&lt;strike&gt;HTTPCLIENT-460&lt;/strike&gt;&lt;/a&gt; or better yet&lt;br/&gt;
subscribe to the httpclient-dev mailing list to monitor the status of the above&lt;br/&gt;
bug report. I&amp;#39;ll probably take the first stab at implementing the feature (as&lt;br/&gt;
most likely DigestScheme class will require some internal modifications to be&lt;br/&gt;
reusable) and pass it onto you for testing and further improvements.&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
</comment>
                    <comment id="12382327" author="olegk" created="Wed, 15 Jun 2005 05:13:39 +0100"  >Created an attachment (id=15407)&lt;br/&gt;
Xdocs patch&lt;br/&gt;
&lt;br/&gt;
Folks, please review and do correct my Ruslish as you see fit&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382328" author="oglueck" created="Wed, 15 Jun 2005 08:05:31 +0100"  >looks good to me</comment>
                    <comment id="12382329" author="olegk" created="Thu, 16 Jun 2005 04:20:24 +0100"  >Patch committed. HttpClient 3.0 site updated.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327233" name="ASF.LICENSE.NOT.GRANTED--digest.patch" size="1548" author="olegk" created="Sat, 14 May 2005 20:02:58 +0100" />
                    <attachment id="12327232" name="ASF.LICENSE.NOT.GRANTED--HttpAuthenticationTest.java" size="2779" author="jeff.hougentogler@gmail.com" created="Sat, 14 May 2005 01:57:52 +0100" />
                    <attachment id="12327234" name="ASF.LICENSE.NOT.GRANTED--xdoc.patch" size="5260" author="olegk" created="Wed, 15 Jun 2005 05:13:39 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>34909</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sat, 14 May 2005 04:18:38 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133506</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47233</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>