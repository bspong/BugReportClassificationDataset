<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:21:05 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-788/HTTPCLIENT-788.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-788] Public Suffix List</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-788</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Hi,&lt;br/&gt;
&lt;br/&gt;
I just found this useful list: &lt;a href=&quot;http://publicsuffix.org/&quot;&gt;http://publicsuffix.org/&lt;/a&gt;&lt;br/&gt;
and thought it would be nice to validate cookie domains against it, basically serving as a black list of domain for which never to set any cookies. What do you think about the attached patch? The download/parsing of the list is of course not part of the implementation.&lt;br/&gt;
&lt;br/&gt;
Ortwin</description>
                <environment></environment>
            <key id="12400666">HTTPCLIENT-788</key>
            <summary>Public Suffix List</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="oglueck">Ortwin Gl&#252;ck</assignee>
                                <reporter username="oglueck">Ortwin Gl&#252;ck</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Jul 2008 16:44:54 +0100</created>
                <updated>Tue, 25 Jan 2011 10:59:03 +0000</updated>
                    <resolved>Thu, 24 Jul 2008 10:28:30 +0100</resolved>
                            <version>4.0 Alpha 4</version>
                                <fixVersion>4.0 Beta 1</fixVersion>
                                <component>HttpCookie</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12615373" author="olegk" created="Mon, 21 Jul 2008 20:15:16 +0100"  >Looks good to me.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12615586" author="oglueck" created="Tue, 22 Jul 2008 12:41:50 +0100"  >Still needs a little more work to be useful with the list:&lt;br/&gt;
- support for rules like &amp;quot;*.tr&amp;quot; which means: deny cookies for ANY second level domain of tr&lt;br/&gt;
- support for exceptions to the above like &amp;quot;!parliament.uk&amp;quot; which means to accept cookies for this exact domain&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll also try to come up with a parser for the list that directly configures the PublicSuffixFilter.&lt;br/&gt;
</comment>
                    <comment id="12615600" author="sebb@apache.org" created="Tue, 22 Jul 2008 13:16:00 +0100"  >Seems to me that it might be a good idea to consider collaborating with Mozilla on writing a parser - so long as a suitable license is used ;-)</comment>
                    <comment id="12615605" author="oglueck" created="Tue, 22 Jul 2008 13:26:13 +0100"  >Yes, only that their language of choice is C++.&lt;br/&gt;
And we might also need a Punycode / Unicode converter.</comment>
                    <comment id="12615990" author="oglueck" created="Wed, 23 Jul 2008 13:19:55 +0100"  >Added file parser and basic pattern matching. Added Punycode support. &lt;br/&gt;
Actually the Punycode domain name matching should IMHO be done for all cookie handlers, but that should go into a new ticket.</comment>
                    <comment id="12616021" author="olegk" created="Wed, 23 Jul 2008 14:53:48 +0100"  >Odi&lt;br/&gt;
&lt;br/&gt;
The patch looks good to me. There is one issue, though. In its current form the patch introduces dependency on HttpCore SNAPSHOT, which means we would have to release HttpCore 4.0 beta3 before we could release the next version of HttpClient. Can this patch be committed after the HttpClient release? Alternatively would it be acceptable for you to move the IDN conversion code to HttpClient?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12616132" author="oglueck" created="Wed, 23 Jul 2008 16:57:29 +0100"  >Good point, Oleg. It may turn out to be important to have the IDN support for Cookies rather sooner than later. If it&amp;#39;s a road block to release HttpCore before HttpClient, I would rather move the IDN code to HttpClient level. Because cookies are its only user at the moment. It may be useful for connection management as well (think of connection managers that keep a pool per hostname/port): when the initial request uses a Unicode-URL and a subsequent redirect uses a Punycode-URL an existing connection may not be reused because of a mismatch of the hostname. Which package should the IDN code go into?</comment>
                    <comment id="12616134" author="sebb@apache.org" created="Wed, 23 Jul 2008 16:58:42 +0100"  >I&amp;#39;m not entirely sure that it is OK to include the entire Suffix list as test data.&lt;br/&gt;
Might be better to create our own test data from the documentation of the format; this would allow one to add invalid data as well.&lt;br/&gt;
&lt;br/&gt;
Also, one of the method names implies that it only works on Java6 - is that the case, or is there a fall-back for Java5?&lt;br/&gt;
&lt;br/&gt;
The private boolean readLine(Reader r, StringBuilder sb) method seems a bit unsafe.&lt;br/&gt;
As far as I can tell, it does not flush characters to the end of the line, so any characters after the first white-space will be left for the next call to readLine().&lt;br/&gt;
&lt;br/&gt;
So as far as I can tell,&lt;br/&gt;
&lt;br/&gt;
*.jp comment&lt;br/&gt;
&lt;br/&gt;
would be treated as two lines:&lt;br/&gt;
&lt;br/&gt;
*.jp&lt;br/&gt;
comment&lt;br/&gt;
&lt;br/&gt;
The Unicode examples in the testUnicode() method might be better encoded using Unicode escapes, as is done for the Idn test cases.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12616138" author="oglueck" created="Wed, 23 Jul 2008 17:07:45 +0100"  >Sebb, very true: we can&amp;#39;t &amp;quot;distribute&amp;quot; the list in the test cases because of licensing issues. (pulled the patch file)&lt;br/&gt;
The java.net.IDN class was introduced in 1.6, hence the naming. But I can change it to something else like JdkIdn.&lt;br/&gt;
You&amp;#39;re right about the whitespace / EOL bug. Will fix.&lt;br/&gt;
I&amp;#39;ll also use Unicode escapes in the test case. I know, a lot of people have issues saving non-ASCII files (especially Emacs users *g*).&lt;br/&gt;
</comment>
                    <comment id="12616281" author="olegk" created="Wed, 23 Jul 2008 23:11:48 +0100"  >Odi,&lt;br/&gt;
&lt;br/&gt;
There is no harm releasing another HttpCore version early with just a few bug fixes, but releases take bloody sweet time. So, we could put that code into o.a.http.url package of HttpClient if you want this code to be included in the next release.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12616369" author="oglueck" created="Thu, 24 Jul 2008 09:30:35 +0100"  >what about the o.a.http.client.utils package? It already contains URIUtils and URLEncodedUtils. Seems like a good home.</comment>
                    <comment id="12616378" author="olegk" created="Thu, 24 Jul 2008 09:55:38 +0100"  >We avoided having dependencies on o.a.http.client stuff in o.a.http.cookie, o.a.http.auth and o.a.http.conn packages so far. It is no longer relevant as we are not going to split HttpClient into HttpCookie/HttpAuth/HttpConn. If you like o.a.http.client.utils better it is perfectly ok with me.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12616415" author="oglueck" created="Thu, 24 Jul 2008 10:28:30 +0100"  >Patch committed.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 21 Jul 2008 19:15:16 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133821</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47418</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>