<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:22:15 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-92/HTTPCLIENT-92.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-92] Cookies with &apos;,&apos; in the value string is not parsed correctly in some cases</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-92</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>This version extracts the &amp;quot;Set-Cookie&amp;quot; statementes of the following&lt;br/&gt;
HTTP response headers incorrectly.&lt;br/&gt;
&lt;br/&gt;
The HTTP response is sent when executing GET method on ---&amp;gt;&lt;br/&gt;
&amp;quot;&lt;a href=&quot;http://my.taishinbank.com.tw/netbank/nbslogin.asp?&quot;&gt;http://my.taishinbank.com.tw/netbank/nbslogin.asp?&lt;/a&gt;&lt;br/&gt;
subFunID=&lt;a href=&quot;https://my.taishinbank.com.tw/netbank/AccountQuery/QAccbyID.asp&quot;&gt;https://my.taishinbank.com.tw/netbank/AccountQuery/QAccbyID.asp&lt;/a&gt;&amp;quot;&lt;br/&gt;
&lt;br/&gt;
After the HttpClient extracts Set-Cookie from the response, it generates a wrong&lt;br/&gt;
cookie statement----&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;[INFO] wire - -&amp;gt;&amp;gt; &amp;quot;Cookie: $Version=0; _mysite=520163500; 1027657033=null; &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;1027787539=null; 0=null; $Path=/; cata=11; $Path=/;   &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;ASPSESSIONIDGGGQQXEU=ADLCDAGAJLKEBJEKBOMMAMOB; &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;$Path=/&amp;quot;&lt;br/&gt;
&lt;br/&gt;
, where it shall &lt;br/&gt;
be &amp;quot;_mysite=520163500,1027657033,1027787539,1027787539,0;&amp;quot; ,but &lt;br/&gt;
not &amp;quot;_mysite=520163500; 1027657033=null; 1027787539=null; 0=null;&amp;quot;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&lt;br/&gt;
Thank you</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: PC</environment>
            <key id="12333651">HTTPCLIENT-92</key>
            <summary>Cookies with &apos;,&apos; in the value string is not parsed correctly in some cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="olegk">Oleg Kalnichevski</assignee>
                                <reporter username="chienchi@deepspot.com">chienchi</reporter>
                        <labels>
                    </labels>
                <created>Sun, 28 Jul 2002 12:03:00 +0100</created>
                <updated>Sun, 22 Apr 2007 08:10:05 +0100</updated>
                    <resolved>Mon, 15 May 2006 22:44:54 +0100</resolved>
                            <version>2.0 Alpha 1</version>
                                                <component>HttpClient</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12379572" author="jsdever@sympatico.ca" created="Mon, 29 Jul 2002 12:03:57 +0100"  >We get:&lt;br/&gt;
Set-Cookie: _mysite=503386284,1027653678,1027912845,1027912705,0; path=/;&lt;br/&gt;
expires=Tue, 29-Jul-2003 08:37:05 GMT, cata=11; path=/,&lt;br/&gt;
ASPSESSIONIDGGGQQXEU=IOFDDAGAHNAFLJNLBNMHJKCN; path=/&lt;br/&gt;
&lt;br/&gt;
We send:&lt;br/&gt;
Cookie: $Version=0; _mysite=503386284; 1027653678=null; 1027912845=null;&lt;br/&gt;
1027912705=null; 0=null; $Path=/; cata=11; $Path=/; ASP&lt;br/&gt;
&lt;br/&gt;
So it looks like we are spliting the Cookie value based on &amp;#39;,&amp;#39; and finding bogus&lt;br/&gt;
cookie pairs.  I had a look at the spec.  It is pretty clear that &amp;#39;,&amp;#39; is a&lt;br/&gt;
tspecial character that is not permitted: the value is supposed to be a token or&lt;br/&gt;
a quoted string.&lt;br/&gt;
&lt;br/&gt;
Therefore what we are dealing with here is a requirement for a non-standard&lt;br/&gt;
extension to how HttpClient parses cookies.&lt;br/&gt;
</comment>
                    <comment id="12379573" author="oleg.kalnichevski@bearingpoint.com" created="Thu, 23 Jan 2003 01:06:12 +0000"  >The trouble-making cookie violates  RFC  2109  in several ways&lt;br/&gt;
&lt;br/&gt;
According to the RFC 2109 comma is used as a cookie separator. &lt;br/&gt;
&lt;br/&gt;
==== RFC  2109 : Quote =================================&lt;br/&gt;
&lt;br/&gt;
4.2.2  Set-Cookie Syntax4.2.2 &lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;set-cookie      =       &amp;quot;Set-Cookie:&amp;quot; cookies&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;cookies         =       1#cookie&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;cookie          =       NAME &amp;quot;=&amp;quot; VALUE *(&amp;quot;;&amp;quot; cookie-av)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;NAME            =       attr&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;VALUE           =       value&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;cookie-av       =       &amp;quot;Comment&amp;quot; &amp;quot;=&amp;quot; value&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|       &amp;quot;Domain&amp;quot; &amp;quot;=&amp;quot; value&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|       &amp;quot;Max-Age&amp;quot; &amp;quot;=&amp;quot; value&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|       &amp;quot;Path&amp;quot; &amp;quot;=&amp;quot; value&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|       &amp;quot;Secure&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;|       &amp;quot;Version&amp;quot; &amp;quot;=&amp;quot; 1*DIGIT   &lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;Informally, the Set-Cookie response header comprises the token Set-&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;Cookie:, followed by a comma-separated list of one or more cookies.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
==== End of Quote ===================================&lt;br/&gt;
&lt;br/&gt;
Cookies conforming to the RFC 2019 should use double quotes around value&lt;br/&gt;
elements in order to avoid ambiguity during parsing &lt;br/&gt;
&lt;br/&gt;
==== RFC 2109 : Quote =================================&lt;br/&gt;
4.1  Syntax:  General&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;The two state management headers, Set-Cookie and Cookie, have common&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;syntactic properties involving attribute-value pairs.  The following&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;grammar uses the notation, and tokens DIGIT (decimal digits) and&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;token (informally, a sequence of non-special, non-white space&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;characters) from the HTTP/1.1 specification [RFC 2068] to describe&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;their syntax.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;av-pairs        =       av-pair *(&amp;quot;;&amp;quot; av-pair)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;av-pair         =       attr [&amp;quot;=&amp;quot; value]        ; optional value&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;attr            =       token&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;value           =       word&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;word            =       token | quoted-string&lt;br/&gt;
==== End of Quote ===================================&lt;br/&gt;
&lt;br/&gt;
==== RFC 2068: Quote =================================&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;Many HTTP/1.1 header field values consist of words separated by LWS&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;or special characters. These special characters MUST be in a quoted&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;string to be used within a parameter value.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;token          = 1*&amp;lt;any CHAR except CTLs or tspecials&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;tspecials      = &amp;quot;(&amp;quot; | &amp;quot;)&amp;quot; | &amp;quot;&amp;lt;&amp;quot; | &amp;quot;&amp;gt;&amp;quot; | &amp;quot;@&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &amp;quot;,&amp;quot; | &amp;quot;;&amp;quot; | &amp;quot;:&amp;quot; | &amp;quot;\&amp;quot; | &amp;lt;&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &amp;quot;/&amp;quot; | &amp;quot;[&amp;quot; | &amp;quot;]&amp;quot; | &amp;quot;?&amp;quot; | &amp;quot;=&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;| &amp;quot;{&amp;quot; | &amp;quot;}&amp;quot; | SP | HT&lt;br/&gt;
==== End of Quote ===================================&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
The cookie would be a valid one if processed according to the Netscape Cookie&lt;br/&gt;
Draft specification, tough. We can think of improving our Netscape Draft&lt;br/&gt;
compliant cookie parser to correctly deal with such cookies. I do not deem such&lt;br/&gt;
improvement terribly important. &lt;br/&gt;
</comment>
                    <comment id="12379574" author="olegk" created="Mon, 19 May 2003 19:54:42 +0100"  >*** &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-212&quot; title=&quot;Set-Cookie header misinterpreted&quot;&gt;&lt;strike&gt;HTTPCLIENT-212&lt;/strike&gt;&lt;/a&gt; has been marked as a duplicate of this bug. ***</comment>
                    <comment id="12379575" author="olegk" created="Fri, 18 Jul 2003 16:10:11 +0100"  >Created an attachment (id=7363)&lt;br/&gt;
Netscape spec patch (take 1)&lt;br/&gt;
</comment>
                    <comment id="12379576" author="becke@u.washington.edu" created="Fri, 18 Jul 2003 20:48:29 +0100"  >I have not looked into the code too closely, but do we have a test case?&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12379577" author="olegk" created="Fri, 18 Jul 2003 21:11:26 +0100"  >Fair enough. I will provide a test case shortly&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379578" author="laura@lwerner.org" created="Sat, 19 Jul 2003 02:48:52 +0100"  >Looks good, though I haven&amp;#39;t had a chance to run it yet (my up-to-date system is&lt;br/&gt;
at home).  One suggestion: add a comment or two describing the non-default&lt;br/&gt;
behavior of this method such as comma handling, and maybe an @see that points to&lt;br/&gt;
the relevant part of the Netscape cookie spec, assuming they actually documented&lt;br/&gt;
this.</comment>
                    <comment id="12379579" author="olegk" created="Sat, 19 Jul 2003 05:53:01 +0100"  >Created an attachment (id=7381)&lt;br/&gt;
Netscape spec patch (take 2)&lt;br/&gt;
</comment>
                    <comment id="12379580" author="laura@lwerner.org" created="Sat, 19 Jul 2003 06:33:19 +0100"  >Nice comment! :-)</comment>
                    <comment id="12379581" author="becke@u.washington.edu" created="Sat, 19 Jul 2003 06:36:50 +0100"  >Looks good to me.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12379582" author="olegk" created="Sat, 19 Jul 2003 16:50:14 +0100"  >Patch committed.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12326673" name="ASF.LICENSE.NOT.GRANTED--netscapecookie.patch" size="6328" author="olegk" created="Sat, 19 Jul 2003 05:53:01 +0100" />
                    <attachment id="12326672" name="ASF.LICENSE.NOT.GRANTED--netscapecookie.patch" size="4224" author="olegk" created="Fri, 18 Jul 2003 16:10:11 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11240</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 29 Jul 2002 11:03:57 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133147</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189271</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>