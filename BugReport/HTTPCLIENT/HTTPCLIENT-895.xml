<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:22:01 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-895/HTTPCLIENT-895.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-895] Log creation impairs performance</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-895</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Running JProfiler on a program that uses HttpClient with a ThreadSafeClientConnManager, revealed that 5% of the time was spent constructing Log instances in class ClientParamsStack.&lt;br/&gt;
&lt;br/&gt;
Oleg did some further investigation and found that DefaultRequestDirector also has the same problem.&lt;br/&gt;
&lt;br/&gt;
A simple solution would be to make the Log a static member variable, and do this on all classes for consistency.  However this might not be the best solution for interoperating with some frameworks (see &lt;a href=&quot;http://wiki.apache.org/jakarta-commons/Logging/StaticLog)&quot;&gt;http://wiki.apache.org/jakarta-commons/Logging/StaticLog)&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Another solution would be to simply remove the Log from the affected classes, although they are presumably there for a reason...&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12441997">HTTPCLIENT-895</key>
            <summary>Log creation impairs performance</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="moqtada">Tony Poppleton</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Nov 2009 20:43:46 +0000</created>
                <updated>Tue, 25 Jan 2011 10:59:26 +0000</updated>
                    <resolved>Tue, 1 Dec 2009 20:16:31 +0000</resolved>
                            <version>4.0 Final</version>
                                <fixVersion>4.0.1</fixVersion>
                <fixVersion>4.1 Alpha1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12783838" author="moqtada" created="Mon, 30 Nov 2009 20:46:42 +0000"  >The second solution would also mean that there is a risk this bug might resurface in the future, either in the same class or in another part of the library by the introduction of a Log.  So the &amp;quot;static&amp;quot; solution would be better in this respect.</comment>
                    <comment id="12783849" author="olegk" created="Mon, 30 Nov 2009 21:37:25 +0000"  >Tony,&lt;br/&gt;
&lt;br/&gt;
Could you please test the patch? You will need the latest SVN snapshot to apply it.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12783874" author="olegk" created="Mon, 30 Nov 2009 22:09:48 +0000"  >I do not think that reverting back to using static logs would be such a good idea. We just need to make sure that no Log object lookups take place on critical execution paths. That is, there no Log objects should be created on a per request basis. Objects created in the course of request execution should be reusing Log object of the HttpClient instance.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12783964" author="moqtada" created="Tue, 1 Dec 2009 00:32:10 +0000"  >The patch is for DefaultRequestDirector.java (revision 885491) and fails to apply properly (needs manual fixing) as the revision I just got from SVN is 885603.  Please advise.&lt;br/&gt;
&lt;br/&gt;
When I ran my manually patched version there was a performance improvement on a small number of benchmarks I ran (I am seeing upto 10% improvement in my threads dealing with responses).</comment>
                    <comment id="12783973" author="moqtada" created="Tue, 1 Dec 2009 01:05:04 +0000"  >Oops regarding the last comment - I had checked out the 4.0 tag rather than the trunk which is why the patch didn&amp;#39;t apply smoothly...</comment>
                    <comment id="12784393" author="olegk" created="Tue, 1 Dec 2009 20:16:31 +0000"  >Fixed in SVN trunk and 4.0.x branch. Please review / test&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
</comment>
                </comments>
                    <attachments>
                    <attachment id="12426448" name="HTTPCLIENT-895.patch" size="4029" author="olegk" created="Mon, 30 Nov 2009 21:37:25 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 30 Nov 2009 21:37:25 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133904</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47375</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>