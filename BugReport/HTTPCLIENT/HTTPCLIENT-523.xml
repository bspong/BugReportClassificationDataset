<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:18:21 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-523/HTTPCLIENT-523.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-523] SPNEGO authentication scheme</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-523</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Consider integrating the SPNEGO auth scheme from Commons HttpClient contrib package into HttpClient 4.0</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: All</environment>
            <key id="12334082">HTTPCLIENT-523</key>
            <summary>SPNEGO authentication scheme</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="mikael.wikstrom@it.su.se">Mikael Wikstr&#246;m</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Nov 2005 22:25:37 +0000</created>
                <updated>Tue, 25 Jan 2011 10:58:35 +0000</updated>
                    <resolved>Mon, 12 Oct 2009 17:27:46 +0100</resolved>
                            <version>Snapshot</version>
                                <fixVersion>4.1 Alpha1</fixVersion>
                                <component>HttpAuth</component>
                        <due></due>
                    <votes>4</votes>
                        <watches>9</watches>
                                                    <comments>
                    <comment id="12382781" author="olegk" created="Thu, 3 Nov 2005 22:27:28 +0000"  >Use &amp;quot;Create a New Attachment&amp;quot; link</comment>
                    <comment id="12382782" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:29:48 +0000"  >Created an attachment (id=16862)&lt;br/&gt;
AuthScheme for SPNEGO auth&lt;br/&gt;
</comment>
                    <comment id="12382783" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:30:44 +0000"  >Created an attachment (id=16863)&lt;br/&gt;
Client example file for SPNEGO auth&lt;br/&gt;
</comment>
                    <comment id="12382784" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:31:49 +0000"  >Created an attachment (id=16864)&lt;br/&gt;
Example file to be used with Client Example in a unix env.&lt;br/&gt;
</comment>
                    <comment id="12382785" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:32:47 +0000"  >Created an attachment (id=16865)&lt;br/&gt;
Example file to be used with Client Example in a unix env.&lt;br/&gt;
&lt;br/&gt;
May be added into doc.</comment>
                    <comment id="12382786" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:39:00 +0000"  >Created an attachment (id=16866)&lt;br/&gt;
AuthScheme for SPNEGO auth&lt;br/&gt;
</comment>
                    <comment id="12382787" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:40:27 +0000"  >Created an attachment (id=16867)&lt;br/&gt;
Client example file for SPNEGO auth&lt;br/&gt;
</comment>
                    <comment id="12382788" author="olegk" created="Thu, 3 Nov 2005 22:44:08 +0000"  >Mikael,&lt;br/&gt;
Please state whether you agree to have these classes released under ASFv2 license&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382789" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 23:15:12 +0000"  >use jaas credentials to do Negotiate auth. (useful when dealing with&lt;br/&gt;
webservices, xml-rpc and axis)&lt;br/&gt;
&lt;br/&gt;
references:&lt;br/&gt;
&lt;a href=&quot;http://www.ietf.org/internet-drafts/draft-jaganathan-kerberos-http-01.txt&quot;&gt;http://www.ietf.org/internet-drafts/draft-jaganathan-kerberos-http-01.txt&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnsecure/html/http-sso-2.asp&quot;&gt;http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnsecure/html/http-sso-2.asp&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://www11.informatik.tu-muenchen.de/Java/j2sdkse/guide/security/jgss/tutorials/ClientServer.html&quot;&gt;http://www11.informatik.tu-muenchen.de/Java/j2sdkse/guide/security/jgss/tutorials/ClientServer.html&lt;/a&gt;</comment>
                    <comment id="12382790" author="mikael.wikstrom@it.su.se" created="Fri, 4 Nov 2005 18:12:07 +0000"  >I wrote this code and I agree to have it released under Apache Software License v2&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0.txt&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Mikael Wikstr&amp;#xF6;m</comment>
                    <comment id="12382791" author="olegk" created="Mon, 7 Nov 2005 03:30:43 +0000"  >Many thanks, Mikael. Your contribution is really appreciated. I&amp;#39;ll review your&lt;br/&gt;
code and commit it to SVN trunk sometime after the 3.0 final release (unless&lt;br/&gt;
someone is interested to take this over from me). I&amp;#39;ll also make sure your name&lt;br/&gt;
gets added to the list of contributors on our web site&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382792" author="olegk" created="Tue, 31 Jan 2006 18:56:54 +0000"  >Mikael,&lt;br/&gt;
We are ready to start checking in your code into the official SVN repository.&lt;br/&gt;
There&amp;#39;s one important issue that needs to be cleared up before we can move on. I&lt;br/&gt;
just realized org.ietf.jgss classes used in your code are Java 1.4 specific.&lt;br/&gt;
This is quite a bit of a problem for us. Do you know if org.ietf.jgss code also&lt;br/&gt;
exists as a standard java extension for older JREs?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382793" author="mikael.wikstrom@it.su.se" created="Wed, 1 Feb 2006 20:55:28 +0000"  >The only implementation of org.ietf.jgss that I know of is unfortunately sun&amp;#39;s&lt;br/&gt;
jre1.4. Worse yet is that 1.4 only have a limited support for encryption in its&lt;br/&gt;
krb5 implementation. It&amp;#39;s limited to DES-CBC-SHA1 and DES-CBC-CRC. Maybe a few&lt;br/&gt;
more but it&amp;#39;s very limited. For a more useful implementation one has to use 1.5&lt;br/&gt;
with have support for DES3.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;/ Mikael</comment>
                    <comment id="12382794" author="olegk" created="Thu, 2 Feb 2006 04:01:36 +0000"  >This poses quite a bit of a problem for us, as we have a reqirement of Java 1.2&lt;br/&gt;
compatibility for the HttpClient 3.0 codebase. I am going to start a discussion&lt;br/&gt;
on  this issue on the httpclient-dev list. You are very welcome to join&lt;br/&gt;
&lt;br/&gt;
Oleg </comment>
                    <comment id="12382795" author="olegk" created="Fri, 10 Feb 2006 23:14:39 +0000"  >Code checked in to the contrib package of the HttpClient SVN trunk. &lt;br/&gt;
&lt;br/&gt;
Many thanks, Mikael. Your name has been added to the list of HttpClient&lt;br/&gt;
contributors.&lt;br/&gt;
&lt;br/&gt;
Please review the SVN content just in case:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/jakarta/commons/proper/httpclient/trunk/src/contrib/org/apache/commons/httpclient/contrib/auth/&quot;&gt;http://svn.apache.org/repos/asf/jakarta/commons/proper/httpclient/trunk/src/contrib/org/apache/commons/httpclient/contrib/auth/&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382796" author="olegk" created="Fri, 10 Feb 2006 23:17:13 +0000"  >Consider migrating this code to HttpComponents to be released as a part of&lt;br/&gt;
Jakarta HttpClient 4.0 </comment>
                    <comment id="12412600" author="padraigo" created="Sat, 20 May 2006 06:46:55 +0100"  >I believe Globus has a fairly complete implmentation of GSSAPI (see &lt;a href=&quot;http://www.globus.org/cog/distribution/1.1/api/org/globus/gsi/gssapi/Java_GSI_GSSAPI.html)&quot;&gt;http://www.globus.org/cog/distribution/1.1/api/org/globus/gsi/gssapi/Java_GSI_GSSAPI.html)&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
org.ietf.jgss.Oid is not completely implemented.&lt;br/&gt;
&lt;br/&gt;
The RFC describing the Java GSSAPI bindings could be helpful if the Oid implmentation needs improvement (see &lt;a href=&quot;http://www.ietf.org/internet-drafts/draft-ietf-kitten-rfc2853bis-01.txt)&quot;&gt;http://www.ietf.org/internet-drafts/draft-ietf-kitten-rfc2853bis-01.txt)&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
As of Globus v 4.0.1 it is licenced under the V2 of the Apache licence (&lt;a href=&quot;http://www.globus.org/toolkit/legal/4.0/&quot;&gt;http://www.globus.org/toolkit/legal/4.0/&lt;/a&gt;).&lt;br/&gt;
&lt;br/&gt;
It does use some 3rd party components, I&amp;#39;m not sure if all are Apache licenced</comment>
                    <comment id="12519814" author="parora@castironsys.com" created="Wed, 15 Aug 2007 00:01:42 +0100"  >Using this code I am prompted for username/password. Is there a way to set it programatically.&lt;br/&gt;
</comment>
                    <comment id="12521622" author="parora@castironsys.com" created="Tue, 21 Aug 2007 23:41:36 +0100"  >Only way to do this is to use JAAS-API to login and the do a subject.doas to do GSS-API(client-server) communication. I have written sample code to do this based on:&lt;br/&gt;
&lt;br/&gt;
I have also written my CallBackHandler which can be given the username/passowrd and hence there won&amp;#39;t be any prompt for username/password.&lt;br/&gt;
Code attached: submitclient.tar.gz</comment>
                    <comment id="12521625" author="parora@castironsys.com" created="Tue, 21 Aug 2007 23:44:25 +0100"  >Code is based on the foloowing tutorial:&lt;br/&gt;
&lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/guide/security/jgss/tutorials/ClientServer.html&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/guide/security/jgss/tutorials/ClientServer.html&lt;/a&gt;</comment>
                    <comment id="12542506" author="olegk" created="Wed, 14 Nov 2007 17:11:01 +0000"  >Mikael,&lt;br/&gt;
&lt;br/&gt;
Would you be interested in helping us port your code to the 4.0 API, so it could be moved from contrib to HttpClient proper? &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12610873" author="trygvis" created="Mon, 7 Jul 2008 00:57:18 +0100"  >Is there any hope of getting this into a proper release?</comment>
                    <comment id="12610896" author="olegk" created="Mon, 7 Jul 2008 07:46:01 +0100"  >Not really much, unless someone with a good knowledge of the SPNEGO scheme could give us a helping hand.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12611931" author="trygvis" created="Wed, 9 Jul 2008 08:52:23 +0100"  >I have a working glassfish which support SPNEGO from [1] and I&amp;#39;ve tried to get [2] going but that wasn&amp;#39;t much good, not yet at least. [2] also has a (seemlingly) complete implementation of SPNEGO which could be used.&lt;br/&gt;
&lt;br/&gt;
How far off is 4.0? Does 4.0 require jdk 1.4?&lt;br/&gt;
&lt;br/&gt;
[1]: &lt;a href=&quot;http://dev.taglab.com/sites/taglab-public/support/spnego.html&quot;&gt;http://dev.taglab.com/sites/taglab-public/support/spnego.html&lt;/a&gt;&lt;br/&gt;
[2]: &lt;a href=&quot;http://spnego.ocean.net.au/&quot;&gt;http://spnego.ocean.net.au/&lt;/a&gt;&lt;br/&gt;
</comment>
                    <comment id="12611963" author="olegk" created="Wed, 9 Jul 2008 11:04:58 +0100"  >Trygve,&lt;br/&gt;
&lt;br/&gt;
HttpClient 4.0 has had four official ALPHAs to this point and is about to go BETA1 (API freeze). Even at this stage it is _massively_ better than HttpClient 3.1. Version 4.0 requires JRE 1.5 or better.&lt;br/&gt;
&lt;br/&gt;
Take a look at the code written by Mikael Wikstr&amp;#xF6;m for Httpclient 3.1. I believe it should be in a reasonably good shape.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12650985" author="olegk" created="Wed, 26 Nov 2008 12:58:58 +0000"  >Since no one appears interested in working on this one, changing fix version for this issue to FUTURE&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12709860" author="aspa" created="Fri, 15 May 2009 15:52:31 +0100"  >I think SPNEGO support would be a very important thing to have in order to be able to talk to Windows based servers. I&amp;#39;m currently trying to integrate a Java based web application with Microsoft Sharepoint server and authentication has proven to be the trickiest part. HttpClient 3.1 only seems to support NTLM v1 which is not enabled by default on Windows servers and administrators don&amp;#39;t usually allow using it.&lt;br/&gt;
&lt;br/&gt;
NTLM autentication works well with HttpClient 4.0 + JCIFS but in many cases SPNEGO / Kerberos would be much better choice due because many Windows server administrators prefer that nowadays and because of features such as credential delegation that are extremely useful in many web applications.&lt;br/&gt;
</comment>
                    <comment id="12709893" author="olegk" created="Fri, 15 May 2009 17:13:59 +0100"  >Marko&lt;br/&gt;
There is currently nobody both capable AND willing to support SPNEGO in HttpClient. It is pretty much pointless to include additional features we are not able to adequately support. I am, for one, pretty happy we are no longer maintaining our own NTLM engine. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12716031" author="mavricknz" created="Wed, 3 Jun 2009 20:14:10 +0100"  >I just happened to have to get Kerberos and HTTPClient 4 working for a demo.&lt;br/&gt;
&lt;br/&gt;
Attached is the required code (KerberosHttpClient.zip), it requires JRE &amp;gt;= 1.5.08 (SPNEGO added). It is an update of HTTPClient 3 code contributed by Mikael Wikstr&amp;#xF6;m. It has been tested on WinXP/JRE1.6.04 against IIS7.&lt;br/&gt;
&lt;br/&gt;
Regards&lt;br/&gt;
Matt</comment>
                    <comment id="12718124" author="zhiyli" created="Wed, 10 Jun 2009 17:14:43 +0100"  >I tried to run Matt&amp;#39;s example against Jboss (4.2.0 with its SPNEGO support package). However, it does not give me the succeful result. The last couple of lines are as follows:&lt;br/&gt;
&lt;br/&gt;
46670 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;HTTP/1.1 200 OK[EOL]&amp;quot;&lt;br/&gt;
46670 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;Server: Apache-Coyote/1.1[EOL]&amp;quot;&lt;br/&gt;
46670 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;Pragma: No-cache[EOL]&amp;quot;&lt;br/&gt;
46670 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;Cache-Control: no-cache[EOL]&amp;quot;&lt;br/&gt;
46670 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;Expires: Wed, 31 Dec 1969 19:00:00 EST[EOL]&amp;quot;&lt;br/&gt;
46670 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;Set-Cookie: JSESSIONID=EB8B50DFCEE15A45E1D6FC1F20303B&lt;br/&gt;
93; Path=/[EOL]&amp;quot;&lt;br/&gt;
46670 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;Transfer-Encoding: chunked[EOL]&amp;quot;&lt;br/&gt;
46670 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;Date: Wed, 10 Jun 2009 14:49:52 GMT[EOL]&amp;quot;&lt;br/&gt;
46670 [main] DEBUG org.apache.http.headers  - &amp;lt;&amp;lt; HTTP/1.1 200 OK&lt;br/&gt;
46670 [main] DEBUG org.apache.http.headers  - &amp;lt;&amp;lt; Server: Apache-Coyote/1.1&lt;br/&gt;
46670 [main] DEBUG org.apache.http.headers  - &amp;lt;&amp;lt; Pragma: No-cache&lt;br/&gt;
46670 [main] DEBUG org.apache.http.headers  - &amp;lt;&amp;lt; Cache-Control: no-cache&lt;br/&gt;
46670 [main] DEBUG org.apache.http.headers  - &amp;lt;&amp;lt; Expires: Wed, 31 Dec 1969 19:00:00 EST&lt;br/&gt;
46670 [main] DEBUG org.apache.http.headers  - &amp;lt;&amp;lt; Set-Cookie: JSESSIONID=EB8B50DFCEE15A45E1D6FC1F2030&lt;br/&gt;
3B93; Path=/&lt;br/&gt;
46670 [main] DEBUG org.apache.http.headers  - &amp;lt;&amp;lt; Transfer-Encoding: chunked&lt;br/&gt;
46670 [main] DEBUG org.apache.http.headers  - &amp;lt;&amp;lt; Date: Wed, 10 Jun 2009 14:49:52 GMT&lt;br/&gt;
46686 [main] DEBUG org.apache.http.client.protocol.ResponseProcessCookies  - Cookie accepted: &amp;quot;[vers&lt;br/&gt;
ion: 0][name: JSESSIONID][value: EB8B50DFCEE15A45E1D6FC1F20303B93][domain: windowpain][path: /][expi&lt;br/&gt;
ry: null]&amp;quot;.&lt;br/&gt;
46686 [main] DEBUG org.apache.http.impl.client.DefaultRequestDirector  - Connection can be kept aliv&lt;br/&gt;
e for -1 ms&lt;br/&gt;
46686 [main] DEBUG org.apache.http.impl.auth.NegotiateScheme  - enter isComplete()&lt;br/&gt;
----------------------------------------&lt;br/&gt;
Response content length: -1&lt;br/&gt;
46702 [main] DEBUG org.apache.http.wire  - &amp;lt;&amp;lt; &amp;quot;0[EOL]&amp;quot;&lt;br/&gt;
46702 [main] DEBUG org.apache.http.impl.conn.SingleClientConnManager  - Releasing connection org.apa&lt;br/&gt;
che.http.impl.conn.SingleClientConnManager$&lt;a href=&apos;mailto:ConnAdapter@37fb1e&apos;&gt;ConnAdapter@37fb1e&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
On the Jboss side, I noticed that there is a piece of code of decoding NogToken and that failed since the &amp;quot;sequence type&amp;quot; (48) in the auth token is beyong what is expected.  &lt;br/&gt;
&lt;br/&gt;
Any suggestions?&lt;br/&gt;
&lt;br/&gt;
Zhiyong</comment>
                    <comment id="12718224" author="olegk" created="Wed, 10 Jun 2009 22:58:09 +0100"  >@Matthew&lt;br/&gt;
&lt;br/&gt;
If enough users can confirm the code works as advertised, it could be included in the official distribution of HttpClient 4.1&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12721444" author="mavricknz" created="Thu, 18 Jun 2009 21:09:44 +0100"  >@Zhiyong&lt;br/&gt;
&lt;br/&gt;
That looks like an issue with the jboss implementation. I added some debugging and got the same issue will IE and HTTPClient. Jboss does it&amp;#39;s own ASN1 decoding, I&amp;#39;ll have to look into it a little more. </comment>
                    <comment id="12722842" author="mavricknz" created="Mon, 22 Jun 2009 22:32:12 +0100"  >Below should work with Jboss Negotiation package with jdk 1.6. IIS7 works with Kerberos v5 Oid, Jboss does not. Not sure about other implementations. Would be nice if SPNEGO was back ported to 1.5 but not going to happen.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;protected void init(String server) throws GSSException {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.debug(&amp;quot;init &amp;quot; + server);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/* Kerberos v5 GSS-API mechanism defined in RFC 1964.*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Oid krb5Oid = new Oid(&amp;quot;1.2.840.113554.1.2.2&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/* Using the SPNEGO OID seems to be the correct method.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* Above Kerberos v5 works for IIS but not JBoss. Unwrapping&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* the initial token when using SPNEGO OID looks like what is&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* described here...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms995330.aspx&quot;&gt;http://msdn.microsoft.com/en-us/library/ms995330.aspx&lt;/a&gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* Another helpful URL...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* &lt;a href=&quot;http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tsec_SPNEGO_token.html&quot;&gt;http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/tsec_SPNEGO_token.html&lt;/a&gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* Unfortunately SPNEGO is JRE &amp;gt;=1.6.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String javaVersion = System.getProperty(&amp;quot;java.runtime.version&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.debug(&amp;quot;System.getProperty(\&amp;quot;java.runtime.version\&amp;quot;) = &amp;quot; + javaVersion);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Oid negotiationOid = null;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if( javaVersion.matches(&amp;quot;1\\.6.*&amp;quot;) ){&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.debug(&amp;quot;Using SPNEGO OID&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;negotiationOid  = new Oid(&amp;quot;1.3.6.1.5.5.2&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}else{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.debug(&amp;quot;Using Kerberos OID&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;negotiationOid  = new Oid(&amp;quot;1.2.840.113554.1.2.2&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GSSManager manager = GSSManager.getInstance();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GSSName serverName = manager.createName(&amp;quot;HTTP/&amp;quot;+server, null);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context = manager.createContext(  serverName.canonicalize(negotiationOid),&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;negotiationOid, null,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GSSContext.DEFAULT_LIFETIME);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context.requestMutualAuth(true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;context.requestCredDeleg(true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;state = INITIATED;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}</comment>
                    <comment id="12723244" author="aspa" created="Tue, 23 Jun 2009 19:39:12 +0100"  >Matt,&lt;br/&gt;
&lt;br/&gt;
Thanks for sharing the code!&lt;br/&gt;
&lt;br/&gt;
Does the patch support Kerberos credential delegation?&lt;br/&gt;
</comment>
                    <comment id="12724950" author="olegk" created="Sun, 28 Jun 2009 13:01:21 +0100"  >@Matthew &lt;br/&gt;
&lt;br/&gt;
If you can contribute a section on SPNEGO authentication to the HttpClient tutorial, I&amp;#39;ll commit your code to the official 4.1 branch of HttpClient&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://wiki.apache.org/HttpComponents/HttpClientTutorial&quot;&gt;http://wiki.apache.org/HttpComponents/HttpClientTutorial&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12725784" author="mavricknz" created="Tue, 30 Jun 2009 21:13:09 +0100"  >@Marko&lt;br/&gt;
&lt;br/&gt;
It should support credential delegation however I haven&amp;#39;t tested it. Hopefully you can, I&amp;#39;m not sure I&amp;#39;ll have a chance for a while.&lt;br/&gt;
&lt;br/&gt;
@Oleg&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll put somethiing together.&lt;br/&gt;
&lt;br/&gt;
Matt</comment>
                    <comment id="12729975" author="mavricknz" created="Sat, 11 Jul 2009 12:22:33 +0100"  >Updated Kerberos/SPNEGO files.</comment>
                    <comment id="12729978" author="mavricknz" created="Sat, 11 Jul 2009 12:32:17 +0100"  >The updated file contains a frist run at documentation. I&amp;#39;ll fix them up a little but running short of time at the moment.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve also added a SPNEGO wrapping option for java 1.5. This allows the use of Jboss + JbossNegotiate with java 1.5. It does require external classes (&lt;a href=&quot;http://www.bouncycastle.org/java.html&quot;&gt;http://www.bouncycastle.org/java.html&lt;/a&gt;) so it&amp;#39;s done via an interface and optional class. It shouldn&amp;#39;t be hard to do the wrapping by hand to avoid using bouncycastle, but probably easier just to jump to java 1.6.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve done a little testing mainly with Java 1.5/1.6 and Jboss/IIS7.&lt;br/&gt;
&lt;br/&gt;
Regards&lt;br/&gt;
Matt</comment>
                    <comment id="12730791" author="olegk" created="Tue, 14 Jul 2009 12:30:37 +0100"  >Matthew,&lt;br/&gt;
&lt;br/&gt;
Things are shaping up pretty good. However, ideally I would like to have a few fairly minor points addressed before I go ahead and commit the code to the official repository. &lt;br/&gt;
&lt;br/&gt;
(1) What is the reason for using mutable static variables (STRIPPORT, SPNEGOCREATE, SpengoGenerator)? Could you please consider changing those variables into regular instance variables?&lt;br/&gt;
&lt;br/&gt;
(2) Ideally I would prefer to have the SPNEGO documentation converted to the docbkx format and if possible integrated into the HttpClient tutorial [1]&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/src/docbkx/&quot;&gt;http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/src/docbkx/&lt;/a&gt;</comment>
                    <comment id="12750669" author="zhiyli" created="Wed, 2 Sep 2009 22:19:56 +0100"  >I tried to use Matthew&amp;#39;s 22/Jun/09 code of &amp;quot;protected void init(String server) throws GSSException&amp;quot;. It gets me further, but I am still getting the following exception. I also have a sample which uses Java 6  HTTP/SPNEGO implementation, that one works fine. I noticed that for the success code, UDP is used instead of TCP, for example: kdc=bcidcvm01.bci.sas.com UDP:88. Can someone explain this and also can I configure httpclient to use UDP?&lt;br/&gt;
&lt;br/&gt;
Found ticket for &lt;a href=&apos;mailto:wrsadm@BCI.SAS.COM&apos;&gt;wrsadm@BCI.SAS.COM&lt;/a&gt; to go to krbtgt/BCI.SAS.COM@BCI.SAS.COM expiring on Wed Sep 02 2&lt;br/&gt;
1:46:08 EDT 2009&lt;br/&gt;
Entered Krb5Context.initSecContext with state=STATE_NEW&lt;br/&gt;
Service ticket not found in the subject&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; Credentials acquireServiceCreds: same realm&lt;br/&gt;
default etypes for default_tgs_enctypes: 3 23.&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; EType: sun.security.krb5.internal.crypto.DesCbcMd5EType&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; KrbKdcReq send: kdc=bcidcvm01.bci.sas.com TCP:88, timeout=30000, number of retries =3, #bytes=12&lt;br/&gt;
30&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt;DEBUG: TCPClient reading 108 bytes&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; KrbKdcReq send: #bytes read=108&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; KrbKdcReq send: #bytes read=108&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; KDCRep: init() encoding tag is 126 req type is 13&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt;KRBError:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sTime is Wed Sep 02 17:03:11 EDT 2009 1251925391000&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;suSec is 381067&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;error code is 7&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;error Message is Server not found in Kerberos database&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;realm is BCI.SAS.COM&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sname is HTTP/WINDOWPAIN.bci.sas.com:8080&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;msgType is 30&lt;br/&gt;
KrbException: Server not found in Kerberos database (7)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.KrbTgsRep.&amp;lt;init&amp;gt;(KrbTgsRep.java:61)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.KrbTgsReq.getReply(KrbTgsReq.java:185)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.internal.CredentialsUtil.serviceCreds(CredentialsUtil.java:294)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(CredentialsUtil.java:106)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.Credentials.acquireServiceCreds(Credentials.java:562)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.jgss.krb5.Krb5Context.initSecContext(Krb5Context.java:594)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:230)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:162)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.http.impl.auth.NegotiateScheme.authenticate(NegotiateScheme.java:152)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.http.client.protocol.RequestTargetAuthentication.process(RequestTargetAuthenti&lt;br/&gt;
cation.java:101)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.http.protocol.BasicHttpProcessor.process(BasicHttpProcessor.java:251)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.http.protocol.HttpRequestExecutor.preProcess(HttpRequestExecutor.java:168)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:39&lt;br/&gt;
3)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.http.examples.client.KerberosHttpClient.main(KerberosHttpClient.java:124)&lt;br/&gt;
Caused by: KrbException: Identifier doesn&amp;#39;t match expected value (906)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.internal.KDCRep.init(KDCRep.java:133)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.internal.TGSRep.init(TGSRep.java:58)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.internal.TGSRep.&amp;lt;init&amp;gt;(TGSRep.java:53)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at sun.security.krb5.KrbTgsRep.&amp;lt;init&amp;gt;(KrbTgsRep.java:46)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;... 15 more</comment>
                    <comment id="12751125" author="zhiyli" created="Thu, 3 Sep 2009 19:51:31 +0100"  >It is not UDP vs TCP issue. I have to uncomment: NegotiateScheme.setSTRIPPORT(true);&lt;br/&gt;
&lt;br/&gt;
Thanks. </comment>
                    <comment id="12753940" author="zhiyli" created="Fri, 11 Sep 2009 02:32:31 +0100"  >I tried Mikael Wikstr&amp;#xF6;m&amp;#39;s HttpClient 3.x code such as CustomAuthenticationNegotiateExample.java. It works fine for me. However, when I changed the following line: &lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GetMethod httpget = new GetMethod(args[0]);&lt;br/&gt;
&lt;br/&gt;
To&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PostMethod httpget = new PostMethod(args[0]);&lt;br/&gt;
&lt;br/&gt;
I am getting the error: HTTP/1.1 302 Moved Temporarily.&lt;br/&gt;
&lt;br/&gt;
Can anyone let me know why I can not use PostMethod in this case? I am trying to use this with Spring HttpInvoker, which only supports &amp;quot;Post&amp;quot;. Thus, I need to get &amp;quot;Post&amp;quot; to work. &lt;br/&gt;
&lt;br/&gt;
Thanks. </comment>
                    <comment id="12754529" author="mavricknz" created="Sat, 12 Sep 2009 14:40:22 +0100"  >The SPNEGO.patch should apply to the trunk. There is a small amount of changes. The biggest one is moving the setup into the factory class and removing the class variables. I think it resolves Olegs questions.&lt;br/&gt;
&lt;br/&gt;
The documentation is in the correct format and is pushed onto the end of the authentication section.&lt;br/&gt;
&lt;br/&gt;
The png is an export from the svg.&lt;br/&gt;
&lt;br/&gt;
Zhiyong - Please use this code if you can, what happens if you do? I force TCP via krb5.conf, the &lt;br/&gt;
&amp;quot;udp_preference_limit = 1&amp;quot;  line. As I was testing against AD and have a large number of AD groups TCP is was normally required (AD groups are in the kerberos packets).&lt;br/&gt;
&lt;br/&gt;
[libdefaults]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;default_realm = AD.EXAMPLE.NET&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;udp_preference_limit = 1&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
.&lt;br/&gt;
[</comment>
                    <comment id="12754545" author="zhiyli" created="Sat, 12 Sep 2009 16:32:30 +0100"  >Matt, Thank you for your response to my question dated on 09/02/2009. I have the TCP or UDP problem resolved. I am still hoping someone can answer my question related with GetMethod and PostMethod. </comment>
                    <comment id="12754695" author="olegk" created="Sun, 13 Sep 2009 14:35:39 +0100"  >Matthew,&lt;br/&gt;
&lt;br/&gt;
I committed your patch with some minor changes to the SVN head. Please review / double-check&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;revision=814311&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=814311&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
A few notes:&lt;br/&gt;
&lt;br/&gt;
(1) I copied content of krb5.conf and login.conf files to the ClientKerberosAuthentication sample to make it self-contained. Ideally the example should have a little more documentation in the javadocs. Please consider putting some more work into it.&lt;br/&gt;
&lt;br/&gt;
(2) We cannot have dependencies on external libraries such as BouncyCastle JCE implementation in examples. Ideally sample files should be functional with the standard set of dependencies. Worst case I would rather have that example require Java 1.6 to run as long as it complies with Java 1.5 and the runtime dependency on 1.6 is clearly documented in the javadocs&lt;br/&gt;
&lt;br/&gt;
(3) I moved BouncySpnegoTokenGenerator class to the contrib (unsupported) area for the reason given above:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/contrib/org/apache/http/contrib/auth/BouncySpnegoTokenGenerator.java&quot;&gt;http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/contrib/org/apache/http/contrib/auth/BouncySpnegoTokenGenerator.java&lt;/a&gt; &lt;br/&gt;
&lt;br/&gt;
Many thanks for this contribution. I am sure quite a few people are going to be quite happy about it!&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll close this issue as resolved as soon as the BouncyCastle dependency issue is sorted out and the tutorial content is brushed up a little.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12755190" author="mavricknz" created="Mon, 14 Sep 2009 21:53:45 +0100"  >@Oleg&lt;br/&gt;
&lt;br/&gt;
ExUpdateAndMinorFixes.patch adds some comments (a start) to the example. Also fixes the factory class to actually pass on the settings.&lt;br/&gt;
&lt;br/&gt;
For 2&amp;amp;3) Thats fine. contrib is the place for the Bouncy class. It is really a basic example to show it can be done. I&amp;#39;m not sure you need to do anything else here?&lt;br/&gt;
&lt;br/&gt;
@Zhiyong&lt;br/&gt;
&lt;br/&gt;
I tried with a POST against IIS7 using trunk and it seemed to worked fine (405 method not supported after access allowed). Could you use trunk and test with that. I don&amp;#39;t have experience with 3 and I believe it is quite different.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12755991" author="olegk" created="Wed, 16 Sep 2009 13:19:35 +0100"  >Matthew,&lt;br/&gt;
&lt;br/&gt;
I checked the patch in. As soon as you tell me you are through with your work, I&amp;#39;ll put some final touches on the sample code and tutorial and close the issue.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12759225" author="olegk" created="Thu, 24 Sep 2009 20:38:55 +0100"  >Matthew, &lt;br/&gt;
&lt;br/&gt;
Both the Kerberos example and the tutorial refer to something called JbossNegotiate, which I believe does not exist in the official repository. Could you please fix that?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12760353" author="mavricknz" created="Mon, 28 Sep 2009 20:18:46 +0100"  >JbossNegotiation is a SPNEGO auth handler for JBoss/Tomcat &lt;a href=&quot;http://www.jboss.org/index.html?module=bb&amp;op=viewtopic&amp;t=149589&quot;&gt;http://www.jboss.org/index.html?module=bb&amp;amp;op=viewtopic&amp;amp;t=149589&lt;/a&gt; . It&amp;#39;s referenced as I used it to test against as well as IIS7. Its worth while to keep in?</comment>
                    <comment id="12760357" author="mavricknz" created="Mon, 28 Sep 2009 20:31:23 +0100"  >Also I noticed that SPNEGO_cropped.png wasn&amp;#39;t added to the docbkx/resources/images directory and&lt;br/&gt;
&lt;br/&gt;
&amp;lt;mediaobject&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;imageobject&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;imagedata fileref=&amp;quot;.//images/SPNEGO_cropped.png&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/imageobject&amp;gt;&lt;br/&gt;
&amp;lt;/mediaobject&amp;gt;&lt;br/&gt;
&lt;br/&gt;
was removed from the first SPNEGO section. &lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12760929" author="olegk" created="Wed, 30 Sep 2009 16:18:20 +0100"  >&amp;gt; JbossNegotiation is a SPNEGO auth handler for JBoss/Tomcat &lt;br/&gt;
&lt;br/&gt;
I see. We should be referring to it as JBoss Negotiation, not JbossNegotiate, to avoid confusion. &lt;br/&gt;
&lt;br/&gt;
&amp;gt; It&amp;#39;s referenced as I used it to test against as well as IIS7. Its worth while to keep in? &lt;br/&gt;
&lt;br/&gt;
I think it is.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Also I noticed that SPNEGO_cropped.png wasn&amp;#39;t added to the docbkx/resources/images directory&lt;br/&gt;
&lt;br/&gt;
Unless you are the author of that picture, we should not include content whose origin and licensing terms are known or not specified. I think the SPNEGO description is perfectly fine even without the image.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12763217" author="mavricknz" created="Wed, 7 Oct 2009 20:44:17 +0100"  >Not sure if you fixed any but I only found the one instance of JbossNegotiate. Patch to fix below.&lt;br/&gt;
&lt;br/&gt;
I drew the diagram using gliffy.&lt;br/&gt;
&lt;br/&gt;
Index: src/docbkx/authentication.xml&lt;br/&gt;
===================================================================&lt;br/&gt;
--- src/docbkx/authentication.xml	(revision 822859)&lt;br/&gt;
+++ src/docbkx/authentication.xml	(working copy)&lt;br/&gt;
@@ -454,7 +454,7 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;section&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;title&amp;gt;&amp;lt;literal&amp;gt;login.conf&amp;lt;/literal&amp;gt; file&amp;lt;/title&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;para&amp;gt;The following configuration is a basic setup that works in Windows XP against both&lt;br/&gt;
-                    &amp;lt;literal&amp;gt;IIS7&amp;lt;/literal&amp;gt; and &amp;lt;literal&amp;gt;JbossNegotiate&amp;lt;/literal&amp;gt; modules.&amp;lt;/para&amp;gt;&lt;br/&gt;
+                    &amp;lt;literal&amp;gt;IIS7&amp;lt;/literal&amp;gt; and &amp;lt;literal&amp;gt;JBoss Negotiation&amp;lt;/literal&amp;gt; modules.&amp;lt;/para&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;para&amp;gt;The system property &amp;lt;literal&amp;gt;java.security.auth.login.config&amp;lt;/literal&amp;gt; can be use&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;to point at the &amp;lt;literal&amp;gt;login.conf&amp;lt;/literal&amp;gt; file.&amp;lt;/para&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;para&amp;gt;&amp;lt;literal&amp;gt;login.conf&amp;lt;/literal&amp;gt; content may look like the following:&amp;lt;/para&amp;gt;&lt;br/&gt;
</comment>
                    <comment id="12764739" author="olegk" created="Mon, 12 Oct 2009 17:27:46 +0100"  >* Removed superfluous SpnegoCreate flag&lt;br/&gt;
* Finalized SPNEGO example and tutorial&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12834581" author="dwhitla" created="Wed, 17 Feb 2010 00:56:56 +0000"  >Hi all,&lt;br/&gt;
&lt;br/&gt;
I authored httpclient-auth-spnego (in April 2007) and the SPNego module for Glassfish and am kinda surprised that noone emailed me on this. I understand a lot of users make use of httpclient-auth-spnego in testing their SPNego enabled servers and would like the work not to have been duplicated.&lt;br/&gt;
&lt;br/&gt;
Dave</comment>
                    <comment id="12834697" author="olegk" created="Wed, 17 Feb 2010 09:10:52 +0000"  >Dave,&lt;br/&gt;
&lt;br/&gt;
I was simply not aware of your work on SPNEGO support for HttpClient 3.x. You should have let us know about it. &lt;br/&gt;
&lt;br/&gt;
Anyhow, support for SPNEGO in HttpClient 4.0 is still very much work in progress. If you are willing to port your code to 4.0 API and license in under ASLv2 we would be happy to incorporate it into the official HttpClient code base.&lt;br/&gt;
&lt;br/&gt;
Cheers&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12836987" author="dwhitla" created="Mon, 22 Feb 2010 23:27:52 +0000"  >I&amp;#39;ll check out and take a look. I actually only found this JIRA issue because someone at work was looking for a SPNEGO enabled client library and was also unaware of my 3.x add-on. So we will be able to drive some improvement by our own requirements.&lt;br/&gt;
&lt;br/&gt;
ASLv2 is fine.&lt;br/&gt;
&lt;br/&gt;
Dave</comment>
                    <comment id="12913957" author="danielw" created="Thu, 23 Sep 2010 10:11:30 +0100"  >Hello all,&lt;br/&gt;
&lt;br/&gt;
can somebody provide an example for delegation? Or tell what I have to configure to enable delegation.&lt;br/&gt;
&lt;br/&gt;
Thank you&lt;br/&gt;
Daniel</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12473100">AVRO-651</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12473099">THRIFT-889</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12327320" name="ASF.LICENSE.NOT.GRANTED--bcsLogin.conf" size="376" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:31:49 +0000" />
                    <attachment id="12327323" name="ASF.LICENSE.NOT.GRANTED--CustomAuthenticationNegotiateExample.java" size="4478" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:40:27 +0000" />
                    <attachment id="12327319" name="ASF.LICENSE.NOT.GRANTED--CustomAuthenticationNegotiateExample.java" size="3516" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:30:44 +0000" />
                    <attachment id="12327322" name="ASF.LICENSE.NOT.GRANTED--NegotiateScheme.java" size="9982" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:39:00 +0000" />
                    <attachment id="12327318" name="ASF.LICENSE.NOT.GRANTED--NegotiateScheme.java" size="9982" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:29:48 +0000" />
                    <attachment id="12327321" name="ASF.LICENSE.NOT.GRANTED--run.sh" size="332" author="mikael.wikstrom@it.su.se" created="Thu, 3 Nov 2005 22:32:47 +0000" />
                    <attachment id="12419563" name="ExUpdateAndMinorFixes.patch" size="4461" author="mavricknz" created="Mon, 14 Sep 2009 21:53:45 +0100" />
                    <attachment id="12413193" name="httpclient4kerb20090710.zip" size="84462" author="mavricknz" created="Sat, 11 Jul 2009 12:22:33 +0100" />
                    <attachment id="12409808" name="KerberosHttpClient.zip" size="7213" author="mavricknz" created="Wed, 3 Jun 2009 20:14:10 +0100" />
                    <attachment id="12419383" name="SPNEGO_cropped.png" size="49736" author="mavricknz" created="Sat, 12 Sep 2009 14:40:22 +0100" />
                    <attachment id="12419382" name="SPNEGO.patch" size="107261" author="mavricknz" created="Sat, 12 Sep 2009 14:40:22 +0100" />
                    <attachment id="12364269" name="submitclient.tar.gz" size="7115" author="parora@castironsys.com" created="Tue, 21 Aug 2007 23:42:36 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>37346</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 3 Nov 2005 22:27:28 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>89265</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47475</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>