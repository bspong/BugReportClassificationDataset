<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:14:44 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-206/HTTPCLIENT-206.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-206] URI class constructors need revision, optimization</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-206</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>1. Currently there&amp;#39;s not way to pass an escaped string as a parameter to URI&lt;br/&gt;
class. As a result the url parameter in HttpMethodBase#HttpMethodBase(String)&lt;br/&gt;
constructor gets converted into an array of char just to be converted back to&lt;br/&gt;
string in URI contructor called in that method. &lt;br/&gt;
&lt;br/&gt;
2. The overall design of URI class contructors does not appear very coherent (at&lt;br/&gt;
least to me)</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: All</environment>
            <key id="12333765">HTTPCLIENT-206</key>
            <summary>URI class constructors need revision, optimization</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="olegk">Oleg Kalnichevski</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 May 2003 07:39:51 +0100</created>
                <updated>Wed, 16 Feb 2011 20:44:58 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:22 +0100</resolved>
                            <version>2.0 Alpha 3</version>
                                <fixVersion>3.0 Final</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12380392" author="olegk" created="Fri, 18 Jul 2003 16:55:35 +0100"  >Created an attachment (id=7366)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
</comment>
                    <comment id="12380393" author="olegk" created="Fri, 18 Jul 2003 16:57:35 +0100"  >I tried to be as little intrusive into Sing-Su&amp;#39;s stuff as possible. Please let &lt;br/&gt;
me know if there are any objections.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380394" author="becke@u.washington.edu" created="Fri, 18 Jul 2003 20:36:43 +0100"  >I think these are good changes.  We should probably also change the URI(URI, String) constructor &lt;br/&gt;
to boot.  I think we might also want to create some tests for parsing unescaped URIs.  I have no &lt;br/&gt;
idea how well this functionality works.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380395" author="becke@u.washington.edu" created="Fri, 18 Jul 2003 20:38:28 +0100"  >Actually, I guess all of the constructors should be changed to add a boolean flag.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380396" author="olegk" created="Fri, 18 Jul 2003 21:05:03 +0100"  >Good point. I&amp;#39;ll revise the remaining URI constructors. &lt;br/&gt;
&lt;br/&gt;
As to test cases, I am afraid I do not possess the required detailed knowledge &lt;br/&gt;
of the URI spec. Sung-Gu does not do test cases for free. So, I really do not &lt;br/&gt;
know.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380397" author="becke@u.washington.edu" created="Fri, 18 Jul 2003 21:36:35 +0100"  >I will put some more test cases on my todo list.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380398" author="olegk" created="Fri, 18 Jul 2003 23:13:45 +0100"  >Created an attachment (id=7374)&lt;br/&gt;
Patch (take 2)&lt;br/&gt;
</comment>
                    <comment id="12380399" author="olegk" created="Fri, 18 Jul 2003 23:14:18 +0100"  >I guess it was bit more that I bargained for. I really have no idea whether &lt;br/&gt;
those &amp;#39;component&amp;#39; URI constructors expect escaped or unescaped strings as &lt;br/&gt;
input. I tend to lean toward just letting them be for the moment.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380400" author="laura@lwerner.org" created="Sat, 19 Jul 2003 02:51:13 +0100"  >I&amp;#39;m not totally sure about deprecating all constructors without the boolean&lt;br/&gt;
flag.  Should there be a plain old URI(String) constructor that mirrors the&lt;br/&gt;
semantics of java.net.URL&amp;#39;s constructor?  It would add convenience but possibly&lt;br/&gt;
also add confusion.  I don&amp;#39;t have a strong feeling one way or the other but&lt;br/&gt;
thought I&amp;#39;d throw the idea out there.</comment>
                    <comment id="12380401" author="olegk" created="Sat, 19 Jul 2003 06:10:16 +0100"  >I find that URI(String) constructor is too ambiguous. Should the URI character&lt;br/&gt;
sequence be assumed to be escaped or per default or the other way around? I just&lt;br/&gt;
do not know. I do not mind leaving a plain URI(String) constructor undeprecated&lt;br/&gt;
as long as we all agree on a reasonable default.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380402" author="laura@lwerner.org" created="Sat, 19 Jul 2003 06:32:28 +0100"  >I just looked up java.net.URL and java.net.URI (in JDK 1.4).  java.net.URI&amp;#39;s&lt;br/&gt;
single-String constructor expects the argument to be already-escaped.  The&lt;br/&gt;
JavaDoc for java.net.URL isn&amp;#39;t explicit on this, but I know that it doesn&amp;#39;t do&lt;br/&gt;
automatic escaping for you.  So if we keep a single-argument constructor in&lt;br/&gt;
HttpClient, I think it should expect an escaped string.&lt;br/&gt;
&lt;br/&gt;
That&amp;#39;s backwards from what I remembered before I looked it up, which shows how&lt;br/&gt;
confusing this is (or how tired I am today).</comment>
                    <comment id="12380403" author="becke@u.washington.edu" created="Sat, 19 Jul 2003 06:33:34 +0100"  >I agree with Laura on this one.  I see no reason to remove the String only constructors as long as &lt;br/&gt;
they are well documented.  They all currently assume the Strings are not escaped.  I think we &lt;br/&gt;
should keep this default behavior.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380404" author="eric@tibco.com" created="Sat, 19 Jul 2003 06:44:56 +0100"  >Which just goes to show how confusing this is - Laura just said to assume they&lt;br/&gt;
were already escaped, and Mike just said they should act as they currently do -&lt;br/&gt;
not escaped.&lt;br/&gt;
&lt;br/&gt;
For the same reason that String.getBytes() is dangerous, my vote would be to&lt;br/&gt;
force the caller to explicitly indicate which they want.  They would *expect* a&lt;br/&gt;
constructor that takes one String, so they won&amp;#39;t look up which one it is until&lt;br/&gt;
it bites them with an unexpected result.  I&amp;#39;d say lets make it easier for our&lt;br/&gt;
users by forcing them to indicate which it is.</comment>
                    <comment id="12380405" author="laura@lwerner.org" created="Sat, 19 Jul 2003 06:56:18 +0100"  >Just to make things more confusing, here&amp;#39;s what the JavaDoc for java.net.URI says:&lt;br/&gt;
&lt;br/&gt;
&amp;quot;The single-argument constructor requires any illegal characters in its argument&lt;br/&gt;
to be quoted and preserves any escaped octets and other characters that are present.&lt;br/&gt;
&lt;br/&gt;
The multi-argument constructors quote illegal characters as required by the&lt;br/&gt;
components in which they appear. The percent character (&amp;#39;%&amp;#39;) is always quoted by&lt;br/&gt;
these constructors. Any other characters are preserved.&amp;quot;&lt;br/&gt;
&lt;br/&gt;
That clears things up, doesn&amp;#39;t it?  I suspect the single-argument behavior is&lt;br/&gt;
there for compatibility with java.net.URL.&lt;br/&gt;
&lt;br/&gt;
At some point we&amp;#39;re going to have to decide how (or whether) HttpClient&lt;br/&gt;
interoperates with java.net.URI.  (The APIs are fairly similar.)  Until then,&lt;br/&gt;
I&amp;#39;m fine with whatever we do here.&lt;br/&gt;
</comment>
                    <comment id="12380406" author="becke@u.washington.edu" created="Sat, 19 Jul 2003 07:25:13 +0100"  >Well, in the face of ambiguity I guess we should try to be as specific as possible.  Normally I would &lt;br/&gt;
keep the String constructor but this seems to be a special case.  Forcing a choice with the boolean &lt;br/&gt;
is the safest way to go.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380407" author="olegk" created="Sat, 19 Jul 2003 17:42:57 +0100"  >I agree. I&amp;#39;ll commit the patch for now. &lt;br/&gt;
&lt;br/&gt;
Anyways, we all know that URI class will require quite a bit of attention in the&lt;br/&gt;
future. So, plain string constructor can always be reinstated, should we change&lt;br/&gt;
our mind&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380408" author="olegk" created="Sat, 19 Jul 2003 17:45:18 +0100"  >Patch committed.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12326856" name="ASF.LICENSE.NOT.GRANTED--uri.patch" size="7432" author="olegk" created="Fri, 18 Jul 2003 23:13:45 +0100" />
                    <attachment id="12326855" name="ASF.LICENSE.NOT.GRANTED--uri.patch" size="6076" author="olegk" created="Fri, 18 Jul 2003 16:55:35 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>19618</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 18 Jul 2003 19:36:43 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133260</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189320</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>