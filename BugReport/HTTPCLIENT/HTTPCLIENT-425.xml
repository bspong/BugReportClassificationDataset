<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:17:19 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-425/HTTPCLIENT-425.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-425] URI.getHost() generates IllegalArgumentException</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-425</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Hi guys,&lt;br/&gt;
&lt;br/&gt;
I don&amp;#39;t know if I&amp;#39;m doing something wrong or not but the following code:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;URI uri = new URI(&amp;quot;mailto:&lt;a href=&apos;mailto:eay@cryptsoft.com&apos;&gt;eay@cryptsoft.com&lt;/a&gt;&amp;quot;, true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(uri.getHost());&lt;br/&gt;
&lt;br/&gt;
generates the following exception:&lt;br/&gt;
&lt;br/&gt;
java.lang.IllegalArgumentException: Component array of chars may not be null&lt;br/&gt;
	at org.apache.commons.httpclient.URI.decode(URI.java:1722)&lt;br/&gt;
	at org.apache.commons.httpclient.URI.getHost(URI.java:2780)&lt;br/&gt;
&lt;br/&gt;
Could you help?&lt;br/&gt;
&lt;br/&gt;
Also, I&amp;#39;m sorry I put the report under version &amp;quot;3.0 Final&amp;quot; but I couldn&amp;#39;t find &lt;br/&gt;
an entry for &amp;quot;3.0-RC1&amp;quot; (which I&amp;#39;m using at the moment).&lt;br/&gt;
&lt;br/&gt;
Thanks a lot!&lt;br/&gt;
&lt;br/&gt;
Bisser</description>
                <environment>Operating System: Windows 2000&lt;br/&gt;
Platform: PC</environment>
            <key id="12333984">HTTPCLIENT-425</key>
            <summary>URI.getHost() generates IllegalArgumentException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="vesuvius_prime@hotmail.com">Bisser Peshev</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Feb 2005 08:22:41 +0000</created>
                <updated>Wed, 16 Feb 2011 20:45:02 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:57 +0100</resolved>
                            <version>3.0 Beta 1</version>
                                <fixVersion>3.0 Final</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382125" author="rolweber@de.ibm.com" created="Tue, 8 Feb 2005 16:36:23 +0000"  >Hello Bisser,&lt;br/&gt;
&lt;br/&gt;
the getHost() method returns the host of URLs that follow the scheme&lt;br/&gt;
&lt;a href=&quot;protocol://host/path,&quot;&gt;protocol://host/path,&lt;/a&gt; which is not the case for the mailto: URL.&lt;br/&gt;
I wouldn&amp;#39;t say that you&amp;#39;re doing something wrong, but I wouldn&amp;#39;t call&lt;br/&gt;
it a bug either. EMail addresses are usually not decomposed on the&lt;br/&gt;
URI level, they are used opaque. The Javadocs of JDK 1.4&amp;#39;s URI class&lt;br/&gt;
even mention this explicitly:&lt;br/&gt;
&lt;br/&gt;
&amp;gt; An opaque URI is an absolute URI whose scheme-specific part does not&lt;br/&gt;
&amp;gt; begin with a slash character (&amp;#39;/&amp;#39;). Opaque URIs are not subject to&lt;br/&gt;
&amp;gt; further parsing. Some examples of opaque URIs are:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;    mailto:&lt;a href=&apos;mailto:java-net@java.sun.com&apos;&gt;java-net@java.sun.com&lt;/a&gt;	&lt;br/&gt;
&amp;gt;    news:comp.lang.java	&lt;br/&gt;
&amp;gt;    urn:isbn:096139210x&lt;br/&gt;
&lt;br/&gt;
Maybe we should update the JavaDocs of our URI class accordingly to&lt;br/&gt;
prevent other users from falling into the same trap.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland</comment>
                    <comment id="12382126" author="vesuvius_prime@hotmail.com" created="Tue, 8 Feb 2005 18:22:39 +0000"  >Hi Roland,&lt;br/&gt;
&lt;br/&gt;
Thank you for the prompt reply!&lt;br/&gt;
&lt;br/&gt;
What you are saying is right. The email addresses should not be parsed. And I &lt;br/&gt;
didn&amp;#39;t expect to get a host name from parsing it. But I was not expecting such &lt;br/&gt;
an exception either. Perhaps getHost() could return a null or something, or &lt;br/&gt;
throw an URIException, not a runtime exception.&lt;br/&gt;
&lt;br/&gt;
The example that I gave was deliberately constructed to cause the exception. In &lt;br/&gt;
real life, the code which extracts the host is different and is part of a &lt;br/&gt;
bigger application which does some web crawling. The email address came from a &lt;br/&gt;
site that we were crawling. I wasn&amp;#39;t deliberately trying to parse it. It was &lt;br/&gt;
just there inside the page. Normally, I would&amp;#39;ve expected, say, a null. &lt;br/&gt;
However, I will modify the application to handle these cases more gracefully.&lt;br/&gt;
&lt;br/&gt;
I will just wait a little more to hear your thoughts on whether the behaviour &lt;br/&gt;
of getHost() should be modified or should remain the same. More specifically, &lt;br/&gt;
is it okay for it to throw runtime exceptions. After that, I will close the &lt;br/&gt;
bug. By the way, how should I close it? By marking it as WONTFIX?  :)&lt;br/&gt;
&lt;br/&gt;
Thank you again, guys. You&amp;#39;re all doing a great job. I appreciate it greatly!!!&lt;br/&gt;
&lt;br/&gt;
Bisser</comment>
                    <comment id="12382127" author="rolweber@de.ibm.com" created="Tue, 8 Feb 2005 18:31:09 +0000"  >Hello Bisser,&lt;br/&gt;
&lt;br/&gt;
good point. A null return value would be more appropriate than the exception.&lt;br/&gt;
&lt;br/&gt;
Don&amp;#39;t worry about closing the bug right now, one of the committers will&lt;br/&gt;
probably pick up on this soon and deal with the bug status as well.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland</comment>
                    <comment id="12382128" author="oglueck" created="Tue, 8 Feb 2005 18:33:51 +0000"  >Bisser,&lt;br/&gt;
&lt;br/&gt;
I agree with you. The exception is ugly and the case should be handled&lt;br/&gt;
consistently. Returning null will be semantically correct in that case I guess.&lt;br/&gt;
I definitely consider this a bug that needs to be fixed.&lt;br/&gt;
&lt;br/&gt;
Ortwin Gl&amp;#xFC;ck&lt;br/&gt;
&lt;br/&gt;
One more thing, please leave changing the bug status up to the project team.</comment>
                    <comment id="12382129" author="vesuvius_prime@hotmail.com" created="Wed, 9 Feb 2005 03:30:46 +0000"  >Hi,&lt;br/&gt;
&lt;br/&gt;
I just wanted to post one additional observation.&lt;br/&gt;
&lt;br/&gt;
I decided to try to fetch the URI (mailto:&lt;a href=&apos;mailto:eay@cryptsoft.com&apos;&gt;eay@cryptsoft.com&lt;/a&gt;) and see what will &lt;br/&gt;
happen. Here are the results:&lt;br/&gt;
&lt;br/&gt;
java.lang.IllegalArgumentException: Component array of chars may not be null&lt;br/&gt;
	at org.apache.commons.httpclient.URI.decode(URI.java:1722)&lt;br/&gt;
	at org.apache.commons.httpclient.URI.getHost(URI.java:2780)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpHost.&amp;lt;init&amp;gt;(HttpHost.java:105)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpMethodBase.setURI&lt;br/&gt;
(HttpMethodBase.java:285)&lt;br/&gt;
&lt;br/&gt;
I know that I shouldn&amp;#39;t be trying to fetch such URIs. This was an intentional &lt;br/&gt;
test to verify whether the HttpClient will throw the appropriate exception. And &lt;br/&gt;
it didn&amp;#39;t. The reason was the getHost() method again. Apparently, it should be &lt;br/&gt;
fixed.&lt;br/&gt;
&lt;br/&gt;
If you try using a hierarchical URI in the form mailto://......  (I know, I &lt;br/&gt;
know), HttpClient throws the following exception:&lt;br/&gt;
&lt;br/&gt;
java.lang.IllegalStateException: unsupported protocol: &amp;#39;mailto&amp;#39;&lt;br/&gt;
	at org.apache.commons.httpclient.protocol.Protocol.lazyRegisterProtocol&lt;br/&gt;
(Protocol.java:146)&lt;br/&gt;
	at org.apache.commons.httpclient.protocol.Protocol.getProtocol&lt;br/&gt;
(Protocol.java:114)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpHost.&amp;lt;init&amp;gt;(HttpHost.java:105)&lt;br/&gt;
	at org.apache.commons.httpclient.HttpMethodBase.setURI&lt;br/&gt;
(HttpMethodBase.java:285)&lt;br/&gt;
&lt;br/&gt;
This should be the normal behaviour. But it&amp;#39;s not, if the getHost() method gets &lt;br/&gt;
involved. &lt;br/&gt;
&lt;br/&gt;
Cheers,&lt;br/&gt;
Bisser</comment>
                    <comment id="12382130" author="olegk" created="Tue, 22 Feb 2005 20:16:12 +0000"  >Created an attachment (id=14342)&lt;br/&gt;
Patch&lt;br/&gt;
&lt;br/&gt;
If no one complains loudly I&amp;#39;ll commit the patch in a few days&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382131" author="olegk" created="Sat, 26 Feb 2005 18:31:48 +0000"  >Patch committed&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327190" name="ASF.LICENSE.NOT.GRANTED--host.patch" size="1187" author="olegk" created="Tue, 22 Feb 2005 20:16:12 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>33437</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 8 Feb 2005 16:36:23 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133472</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47084</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>