<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:15:12 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-245/HTTPCLIENT-245.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-245] customize handling of 302 redirects</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-245</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>I tried this with both the beta2 2.0 release, and the nightly build.  The&lt;br/&gt;
following code snippet describes what I am trying to do:&lt;br/&gt;
&lt;br/&gt;
httpClient.getHostConfiguration().setHost(sHost, 80, &amp;quot;http&amp;quot;);&lt;br/&gt;
HttpMethod method=null;&lt;br/&gt;
if (sMethod.indexOf(&amp;quot;POST&amp;quot;)!=-1) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;method=new PostMethod(sURLInfo);&lt;br/&gt;
} else {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;method=new GetMethod(sURLInfo);&lt;br/&gt;
}&lt;br/&gt;
method.setFollowRedirects(true);&lt;br/&gt;
httpClient.executeMethod(method);&lt;br/&gt;
&lt;br/&gt;
After this code executes, the &amp;quot;getFollowRedirects&amp;quot; method still returns false,&lt;br/&gt;
and any redirects which are sent by the webserver are not followed.  As a&lt;br/&gt;
temporary workaround, since I want all redirects followed, I commented out the&lt;br/&gt;
following code in the HttpMethodBase class in the &amp;quot;processRedirectResponse&amp;quot; method:&lt;br/&gt;
&lt;br/&gt;
/*if (!getFollowRedirects()) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;LOG.info(&amp;quot;Redirect requested but followRedirects is &amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ &amp;quot;disabled&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return false;&lt;br/&gt;
}*/&lt;br/&gt;
&lt;br/&gt;
If this bug has already been reported, I apologize...I searched for and found&lt;br/&gt;
nothing related to this issue.</description>
                <environment>Operating System: Linux&lt;br/&gt;
Platform: Other</environment>
            <key id="12333804">HTTPCLIENT-245</key>
            <summary>customize handling of 302 redirects</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="delonad@netdoor.com">Aaron DeLong</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Jul 2003 04:30:42 +0100</created>
                <updated>Fri, 20 Jul 2007 19:36:10 +0100</updated>
                    <resolved>Sat, 12 May 2007 11:55:02 +0100</resolved>
                            <version>2.0 Final</version>
                                <fixVersion>4.0 Alpha 1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>3</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12380790" author="olegk" created="Tue, 15 Jul 2003 04:56:57 +0100"  >Aaron,&lt;br/&gt;
&lt;br/&gt;
This is in fact a very well known problem. &lt;br/&gt;
&lt;br/&gt;
There are two aspects to it:&lt;br/&gt;
&lt;br/&gt;
- We are not supposed to automatically redirect POST requests if we strictly&lt;br/&gt;
follow the word of the RFC&lt;br/&gt;
&lt;br/&gt;
- Sadly enough, we simply can&amp;#39;t do it at the moment due to design limitations.&lt;br/&gt;
RFC requires HTTP agents to issue a GET (not a POST) against the new location in&lt;br/&gt;
response to a POST redirect. Currently classes that implement HttpMethod&lt;br/&gt;
interface represent both a request and a response. This is a fundamental mistake&lt;br/&gt;
which prevents us from being able to &amp;#39;convert&amp;#39; a request of type POST to request&lt;br/&gt;
of type GET.&lt;br/&gt;
&lt;br/&gt;
We are planning to fix the problem in the 3.0 release&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380791" author="tlocke@tlocke.org.uk" created="Fri, 6 Jan 2006 00:37:31 +0000"  >Oleg writes, &amp;#39;We are not supposed to automatically redirect POST requests if we&lt;br/&gt;
strictly follow the word of the RFC&amp;#39;.&lt;br/&gt;
&lt;br/&gt;
However, as I understand it this is not true for 303 (See Other) redirects.&lt;br/&gt;
According to the RFC, 303 redirects should be automatically redirected:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4&quot;&gt;http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
-Tony.</comment>
                    <comment id="12380792" author="olegk" created="Fri, 6 Jan 2006 00:55:23 +0000"  >(In reply to comment #2)&lt;br/&gt;
&amp;gt; Oleg writes, &amp;#39;We are not supposed to automatically redirect POST requests if we&lt;br/&gt;
&amp;gt; strictly follow the word of the RFC&amp;#39;.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; However, as I understand it this is not true for 303 (See Other) redirects.&lt;br/&gt;
&amp;gt; According to the RFC, 303 redirects should be automatically redirected:&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4&quot;&gt;http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.4&lt;/a&gt;&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; -Tony.&lt;br/&gt;
&lt;br/&gt;
&amp;lt;quote&amp;gt;&lt;br/&gt;
The response to the request can be found under a different URI and SHOULD be&lt;br/&gt;
retrieved using a &amp;lt;strong&amp;gt;GET method&amp;lt;/strong&amp;gt; on that resource&lt;br/&gt;
&amp;lt;/quote&amp;gt;&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12380793" author="tlocke@tlocke.org.uk" created="Fri, 6 Jan 2006 23:08:59 +0000"  >(In reply to comment #3)&lt;br/&gt;
&lt;br/&gt;
First of all, thanks for responding to my comment Oleg. Much appreciated.&lt;br/&gt;
&lt;br/&gt;
I think there may be a misunderstanding since I think the bug is that&lt;br/&gt;
HttpClient doesn&amp;#39;t follow a 303 response to a POST. As I see it, if the&lt;br/&gt;
response is a 303, there isn&amp;#39;t any need for confirmation from the user and&lt;br/&gt;
the redirect can be followed automatically.  The sequence is:&lt;br/&gt;
&lt;br/&gt;
1. client sends post&lt;br/&gt;
2. server sends back 303 with Location header&lt;br/&gt;
3. client visits location with a GET&lt;br/&gt;
&lt;br/&gt;
It&amp;#39;s step 3 that has to be a GET, not step 1.&lt;br/&gt;
&lt;br/&gt;
So it isn&amp;#39;t the RFC that&amp;#39;s preventing us from following a redirect as a&lt;br/&gt;
response to a post, it&amp;#39;s just the limitation in the HttpClient code.&lt;br/&gt;
&lt;br/&gt;
Anyway, that&amp;#39;s how I read it. Thanks again for your help.&lt;br/&gt;
&lt;br/&gt;
Cheers,&lt;br/&gt;
&lt;br/&gt;
Tony.&lt;br/&gt;
</comment>
                    <comment id="12380794" author="olegk" created="Fri, 6 Jan 2006 23:27:50 +0000"  >(In reply to comment #4)&lt;br/&gt;
&amp;gt; (In reply to comment #3)&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; First of all, thanks for responding to my comment Oleg. Much appreciated.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&lt;br/&gt;
You are welcome&lt;br/&gt;
&lt;br/&gt;
...&lt;br/&gt;
&lt;br/&gt;
&amp;gt; So it isn&amp;#39;t the RFC that&amp;#39;s preventing us from following a redirect as a&lt;br/&gt;
&amp;gt; response to a post, it&amp;#39;s just the limitation in the HttpClient code.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&lt;br/&gt;
This is correct.&lt;br/&gt;
&lt;br/&gt;
Cheers,&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Anyway, that&amp;#39;s how I read it. Thanks again for your help.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Cheers,&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Tony.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12380795" author="jain@gmx.net" created="Tue, 17 Jan 2006 18:47:00 +0000"  >Would be useful if there was an option to treat 302 responses like 303 as&lt;br/&gt;
proposed above. I use HttpClient to interact with several web sites that use the&lt;br/&gt;
redirect-after-post pattern, but most return 302 rather than 303 because some&lt;br/&gt;
older browsers such as Netscape 4.7 don&amp;#39;t support 303...&lt;br/&gt;
</comment>
                    <comment id="12380796" author="rolweber@de.ibm.com" created="Tue, 17 Jan 2006 19:36:27 +0000"  >Hello Eric,&lt;br/&gt;
&lt;br/&gt;
303 responses are currently not handled automatically, as discussed above.&lt;br/&gt;
To treat 302 responses like 303 responses, just disable redirect handling.&lt;br/&gt;
&lt;br/&gt;
For 4.0, we&amp;#39;ll probably come up with something that allows automatic&lt;br/&gt;
redirect handling of both, though the default will still be to treat&lt;br/&gt;
303 different from 302 responses, as required by the specification.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland</comment>
                    <comment id="12380797" author="jain@gmx.net" created="Tue, 17 Jan 2006 19:43:10 +0000"  >&amp;gt; For 4.0, we&amp;#39;ll probably come up with something that allows automatic&lt;br/&gt;
&amp;gt; redirect handling of both, though the default will still be to treat&lt;br/&gt;
&amp;gt; 303 different from 302 responses, as required by the specification.&lt;br/&gt;
&lt;br/&gt;
Great, something to look forward to :-)&lt;br/&gt;
</comment>
                    <comment id="12470334" author="rolandw" created="Mon, 5 Feb 2007 19:59:59 +0000"  >original title was: &amp;quot;POST redirects cannot be executed&amp;quot;&lt;br/&gt;
</comment>
                    <comment id="12495251" author="olegk" created="Sat, 12 May 2007 11:55:02 +0100"  >Fixed in SVN trunk. HttpClient will always execute HTTP GET when automatically redirecting to a new location, regardless of the original method type.&lt;br/&gt;
&lt;br/&gt;
Latest changes in trunk _finally_ fixed one of the long standing design limitations in HttpClient&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>21584</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 15 Jul 2003 03:56:57 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>43475</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>188902</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>