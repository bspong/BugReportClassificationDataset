<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:18:27 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-536/HTTPCLIENT-536.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-536] misleading lack of javadoc in StringRequestEntity</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-536</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>When using httpclient2, we were doing the following:&lt;br/&gt;
&lt;br/&gt;
	// Add the Content-type header.  This sets the charset to UTF-8.&lt;br/&gt;
	method.setRequestHeader( &amp;quot;Content-type&amp;quot;, &amp;quot;text/xml; charset=UTF-8&amp;quot; );&lt;br/&gt;
	// The given string is converted internally by the post method into&lt;br/&gt;
	// a UTF-8 encoded byte array.&lt;br/&gt;
	method.setRequestBody( xmlstring );&lt;br/&gt;
&lt;br/&gt;
The comments show that this was the way we used to obtain a UTF-8 encoded XML&lt;br/&gt;
document (if this was wrong, that may be the origin of the problem?).&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
When upgrading to httpclient3 and killing deprecated code, this was converted to:&lt;br/&gt;
&lt;br/&gt;
	// Add the Content-type header.  This sets the charset to UTF-8.&lt;br/&gt;
	method.setRequestHeader( &amp;quot;Content-type&amp;quot;, &amp;quot;text/xml; charset=UTF-8&amp;quot; );&lt;br/&gt;
	// The given string is converted internally by the post method into&lt;br/&gt;
	// a UTF-8 encoded byte array.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;method.setRequestEntity( new StringRequestEntity( xmlstring ) );&lt;br/&gt;
&lt;br/&gt;
which went without problem during the tests on my machine and on test production&lt;br/&gt;
machine.. because platforms charset were UTF-8, which is not the case for&lt;br/&gt;
production machines :(&lt;br/&gt;
&lt;br/&gt;
I think the javadoc of the used StringRequestEntity constructor should strongly&lt;br/&gt;
state that it uses String#getBytes for the content, which uses the platform&lt;br/&gt;
charset. Also, I didn&amp;#39;t notice any &amp;quot;upgrade to 3.x&amp;quot; documentation which would&lt;br/&gt;
have helped me :/</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12334095">HTTPCLIENT-536</key>
            <summary>misleading lack of javadoc in StringRequestEntity</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="poubelle2005@yahoo.fr">Guillaume Cottenceau</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Dec 2005 20:55:17 +0000</created>
                <updated>Sun, 22 Apr 2007 08:11:12 +0100</updated>
                    <resolved>Tue, 6 Jun 2006 16:53:53 +0100</resolved>
                            <version>3.0 RC4</version>
                                <fixVersion>3.1 Alpha 1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382900" author="oglueck" created="Tue, 6 Dec 2005 21:42:03 +0000"  >Agreed, this needs documentation. And I vote for changing the class (for 3.1)&lt;br/&gt;
such that the default platform encoding is never used and an encoding must&lt;br/&gt;
always be specified explicitely. The default platform encoding does not make the&lt;br/&gt;
least sense in a networked environment. Being unaware of char to byte&lt;br/&gt;
conversions and thus ignoring the encoding always leads to problems. We should&lt;br/&gt;
encourage our users to think about the encoding by removing silly defaults.&lt;br/&gt;
&lt;br/&gt;
for 3.0: document behaviour correctly and deprecate the method&lt;br/&gt;
for 3.1: always require an encoding explicitely</comment>
                    <comment id="12382901" author="olegk" created="Tue, 6 Dec 2005 21:45:21 +0000"  >(In reply to comment #0)&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; 	// Add the Content-type header.  This sets the charset to UTF-8.&lt;br/&gt;
&amp;gt; 	method.setRequestHeader( &amp;quot;Content-type&amp;quot;, &amp;quot;text/xml; charset=UTF-8&amp;quot; );&lt;br/&gt;
&amp;gt; 	// The given string is converted internally by the post method into&lt;br/&gt;
&amp;gt; 	// a UTF-8 encoded byte array.&lt;br/&gt;
&amp;gt;         method.setRequestEntity( new StringRequestEntity( xmlstring ) );&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&lt;br/&gt;
This should do the trick&lt;br/&gt;
&lt;br/&gt;
RequestEntity entity = StringRequestEntity(xmlstring, &amp;quot;text/xml&amp;quot;, &amp;quot;UTF-8&amp;quot;);&lt;br/&gt;
method.setRequestEntity(entity);&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Also, I didn&amp;#39;t notice any &amp;quot;upgrade to 3.x&amp;quot; documentation which would&lt;br/&gt;
&amp;gt; have helped me :/&lt;br/&gt;
&lt;br/&gt;
Well, since no one bothered to contribute one, it is not there. I can&amp;#39;t do&lt;br/&gt;
everything alone.&lt;br/&gt;
&lt;br/&gt;
We happily accept contributions.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382902" author="poubelle2005@yahoo.fr" created="Tue, 6 Dec 2005 22:28:51 +0000"  >Ortwin: I agree more than 100% that default platform encoding should not be used.&lt;br/&gt;
&lt;br/&gt;
Oleg: thanks for the suggestion; please don&amp;#39;t take it as personal critics, I&lt;br/&gt;
think you&amp;#39;re doing an incredible job with HttpClient, and we are already more&lt;br/&gt;
than very happy with the availability as open source of this very fine software.&lt;br/&gt;
I do contribute myself to some free software projects, even in the documentation&lt;br/&gt;
field, however I don&amp;#39;t have the necessary knowledge about HttpClient to&lt;br/&gt;
contribute the missing upgrade guide. Please excuse me if my message sounded&lt;br/&gt;
rude to your much appreciated contributions.</comment>
                    <comment id="12382903" author="oglueck" created="Tue, 6 Dec 2005 22:39:39 +0000"  >Created an attachment (id=17157)&lt;br/&gt;
proposed patch&lt;br/&gt;
&lt;br/&gt;
The patch deprecates the first constructor and removes its use from the test&lt;br/&gt;
cases. It also checks for inconsistent definition of the charset in the second&lt;br/&gt;
constructor. So new StringRequestEntity(&amp;quot;&amp;quot;, &amp;quot;text/xml; charset=ISO-8859-1&amp;quot;,&lt;br/&gt;
&amp;quot;UTF-8&amp;quot;) will throw a runtime exception. The default platform encoding is still&lt;br/&gt;
used when new StringRequestEntity(&amp;quot;&amp;quot;, null, null) is called.</comment>
                    <comment id="12382904" author="olegk" created="Tue, 6 Dec 2005 23:30:51 +0000"  >(In reply to comment #3)&lt;br/&gt;
&amp;gt; Oleg: thanks for the suggestion; please don&amp;#39;t take it as personal critics,&lt;br/&gt;
&lt;br/&gt;
No worries, nothing personal. To the contrary critique is very welcome. I simply&lt;br/&gt;
enjoy working in HttpComponents/HttpClient and ask nothing in return. Writing&lt;br/&gt;
good documentation is unfortunately is not something I do well or enjoy doing&lt;br/&gt;
for that matter and therefore some help from the community at large would be&lt;br/&gt;
quite appreciated&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382905" author="olegk" created="Tue, 6 Dec 2005 23:32:04 +0000"  >Created an attachment (id=17159)&lt;br/&gt;
Patch (a slightly different take)&lt;br/&gt;
&lt;br/&gt;
How about a slightly less drastic solution?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382906" author="oglueck" created="Wed, 7 Dec 2005 01:10:19 +0000"  >Oleg,&lt;br/&gt;
&lt;br/&gt;
I thought about that as well, but it effectively changes the behaviour of the&lt;br/&gt;
method. However the behaviour is now independent of the platform, which is&lt;br/&gt;
certainly a good thing. I&amp;#39;m not sure how useful this specific encoding is in the&lt;br/&gt;
general case. I still opt for letting the user set it explicitely.&lt;br/&gt;
&lt;br/&gt;
Odi</comment>
                    <comment id="12382907" author="olegk" created="Wed, 7 Dec 2005 05:07:40 +0000"  >(In reply to comment #7)&lt;br/&gt;
&amp;gt; Oleg,&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; I thought about that as well, but it effectively changes the behaviour of the&lt;br/&gt;
&amp;gt; method. However the behaviour is now independent of the platform, which is&lt;br/&gt;
&amp;gt; certainly a good thing. I&amp;#39;m not sure how useful this specific encoding is in the&lt;br/&gt;
&amp;gt; general case. I still opt for letting the user set it explicitely.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Odi&lt;br/&gt;
&lt;br/&gt;
I can&amp;#39;t say I disagree. I personally do not have a very strong preference for&lt;br/&gt;
either. &lt;br/&gt;
&lt;br/&gt;
What do others think?&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12382908" author="becke@u.washington.edu" created="Wed, 7 Dec 2005 06:41:00 +0000"  >Another option would be to just leave the method alone for 3.0 (don&amp;#39;t switch to&lt;br/&gt;
ISO-8859-1 or deprecate) and just make it clear via Javadocs what it does.  &lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12382909" author="olegk" created="Wed, 7 Dec 2005 21:40:12 +0000"  >(In reply to comment #9)&lt;br/&gt;
&amp;gt; Another option would be to just leave the method alone for 3.0 (don&amp;#39;t switch to&lt;br/&gt;
&amp;gt; ISO-8859-1 or deprecate) and just make it clear via Javadocs what it does.  &lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Mike&lt;br/&gt;
&lt;br/&gt;
+1&lt;br/&gt;
&lt;br/&gt;
I think this the best option. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382910" author="olegk" created="Wed, 14 Dec 2005 07:36:17 +0000"  >Created an attachment (id=17214)&lt;br/&gt;
Javadoc patch&lt;br/&gt;
&lt;br/&gt;
Folks, please review&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382911" author="oglueck" created="Wed, 14 Dec 2005 19:20:00 +0000"  >looks good</comment>
                    <comment id="12382912" author="becke@u.washington.edu" created="Wed, 14 Dec 2005 23:17:34 +0000"  >Yep.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12382913" author="olegk" created="Thu, 15 Dec 2005 03:10:17 +0000"  >Javadoc patch checked in&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12414831" author="olegk" created="Tue, 6 Jun 2006 03:38:07 +0100"  >Patch (take 1). Please review&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12414840" author="rolandw" created="Tue, 6 Jun 2006 03:54:30 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
I think inline links need to be written as {@link #...}, not just #...&lt;br/&gt;
Otherwise, the patch looks fine.&lt;br/&gt;
&lt;br/&gt;
cheers (and good night :-),&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12414929" author="olegk" created="Tue, 6 Jun 2006 16:53:53 +0100"  >Patch checked in&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327344" name="ASF.LICENSE.NOT.GRANTED--patch-37805.diff" size="19049" author="oglueck" created="Tue, 6 Dec 2005 22:39:39 +0000" />
                    <attachment id="12327346" name="ASF.LICENSE.NOT.GRANTED--stringentity.patch" size="1371" author="olegk" created="Wed, 14 Dec 2005 07:36:17 +0000" />
                    <attachment id="12327345" name="ASF.LICENSE.NOT.GRANTED--stringentity.patch" size="2359" author="olegk" created="Tue, 6 Dec 2005 23:32:04 +0000" />
                    <attachment id="12335051" name="stringentity.patch" size="1218" author="olegk" created="Tue, 6 Jun 2006 03:38:07 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>37805</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 6 Dec 2005 21:42:03 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133581</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47929</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>