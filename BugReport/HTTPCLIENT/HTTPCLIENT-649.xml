<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:19:34 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-649/HTTPCLIENT-649.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-649] Support multiple proxies</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-649</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>HttpClient supports one proxy currently.&lt;br/&gt;
Our requirement is to suppport more than one proxy. We may need to connect more than one proxies before connects to target resource. &lt;br/&gt;
I found that HttpMethodDirector creates tunnelled socket and there is no easy way to plugin our custom HttpMethodDirector class with HttpClient other than extending HttpClient to override &amp;quot;public int executeMethod(HostConfiguration hostconfig, final HttpMethod method, final HttpState state&amp;quot; method.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment>win/linux/unix</environment>
            <key id="12367937">HTTPCLIENT-649</key>
            <summary>Support multiple proxies</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rolandw">Roland Weber</assignee>
                                <reporter username="suak2004">Murty Akundi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Apr 2007 15:01:46 +0100</created>
                <updated>Sun, 11 Nov 2007 19:12:05 +0000</updated>
                    <resolved>Sat, 8 Sep 2007 15:27:29 +0100</resolved>
                            <version>3.0.1</version>
                <version>3.1 RC1</version>
                                <fixVersion>4.0 Alpha 2</fixVersion>
                                <component>HttpConn</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12491339" author="olegk" created="Tue, 24 Apr 2007 16:49:51 +0100"  >Murty,&lt;br/&gt;
&lt;br/&gt;
I am not sure I understand what exactly you want to say by &amp;quot;we may need to connect more than one proxies before connects to target resource&amp;quot;. Please clarify.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12491385" author="suak2004" created="Tue, 24 Apr 2007 19:11:20 +0100"  >Oleg&lt;br/&gt;
Thank you for response. &lt;br/&gt;
I am using HttpClient code to access http(s) resources. For example  http(s)://www.verisign.com.&lt;br/&gt;
My code is deployed under an application server which is located below three firewalls and that needs to connect through 3 proxies to reach the final target.&lt;br/&gt;
For example I have following 3 proxies and target&lt;br/&gt;
proxy1:9999&lt;br/&gt;
proxy2:7777&lt;br/&gt;
proxy3:5555&lt;br/&gt;
http(s)://www.verisign.com&lt;br/&gt;
First I need to open a socket and connect to proxy1:9999 and then connect proxy2:7777 and then connect to proxy3:5555 to reach the target resource.&lt;br/&gt;
Currently HttpClient supports one proxy and i need to goes through more than one proxies. So i had to modify HttpMethodDirector class to tunnel the socket through the proxies.&lt;br/&gt;
regards&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12491440" author="olegk" created="Tue, 24 Apr 2007 21:38:26 +0100"  >Murty, &lt;br/&gt;
&lt;br/&gt;
I think this kind of functionality is usually referred to as proxy chaining. Presently HttpClient does not support it and see no easy and elegant way of adding it to the HttpClient 3.x code line. HttpClient is currently undergoing a complete redesign and we certainly could add support for proxy chaining to HttpClient 4.0. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12492464" author="rolandw" created="Sat, 28 Apr 2007 11:33:42 +0100"  >And here I thought this was a far-out use case we would not have to consider. HttpRoute is designed for a single proxy.&lt;br/&gt;
Re-thinking the approach will take time. I believe that alpha1 is a rather optimistic target for this requirement.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12492481" author="suak2004" created="Sat, 28 Apr 2007 14:57:23 +0100"  >Ronald&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Thanks for reply. I think this use case is real use case. Most of the comanies and people are using java on middle tier that locates behind firewalls.  &lt;br/&gt;
We can plugging through more than one proxies but that is really not secured.  &lt;br/&gt;
Other solution is to write custom protocol handler to support multiple proxiesc but  HttpClient does not support it since it does not use URLStreamHandler internally.&lt;br/&gt;
I think there is no other solution with HttpClient to support multiple proxies at this time.&lt;br/&gt;
I have customized HttpClient and HttpMethodDirector classes to tunnel through configured number of proxies and working fine.&lt;br/&gt;
Please consider it for next major release.&lt;br/&gt;
regards&lt;br/&gt;
Murty&lt;br/&gt;
</comment>
                    <comment id="12492502" author="rolandw" created="Sat, 28 Apr 2007 18:36:00 +0100"  >Hello Murty,&lt;br/&gt;
&lt;br/&gt;
I made a note on the Wiki page for HttpConn design, &lt;a href=&quot;http://wiki.apache.org/jakarta-httpclient/ConnectionManagementDesign&quot;&gt;http://wiki.apache.org/jakarta-httpclient/ConnectionManagementDesign&lt;/a&gt;&lt;br/&gt;
This has tought me a lesson: the one time I try to avoid overdesigning, it comes back to bite me within 4 months. Now I wait for someone with the requirement to layer tunnels, and my happiness will be complete.&lt;br/&gt;
It&amp;#39;s going to be a tough nut to crack, since each proxy in a chain may also need a different proxy authentication. I&amp;#39;ll keep pondering it (with low priority though).&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12492503" author="olegk" created="Sat, 28 Apr 2007 18:49:54 +0100"  >Roland,&lt;br/&gt;
We do not necessarily have to provide this feature in the stock version of HttpClient if this will increase the complexity of connection management code dramatically. As long as the users are able to plug in their own custom connection operator this should be sufficient.&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
</comment>
                    <comment id="12514322" author="rolandw" created="Fri, 20 Jul 2007 21:36:34 +0100"  >The pieces are in place: HttpRoute represents proxy chains, ThreadSafeClientConnManager uses HttpRoute.&lt;br/&gt;
The last step is to add the missing ManagedClientConnection.tunnelProxy(...).&lt;br/&gt;
</comment>
                    <comment id="12522933" author="suak2004" created="Mon, 27 Aug 2007 05:54:25 +0100"  >Thank you very much for all you for adding new feature.</comment>
                    <comment id="12522942" author="oglueck" created="Mon, 27 Aug 2007 08:35:15 +0100"  >The feature has been requested in the past:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/browse/HTTPCLIENT-136&quot;&gt;http://issues.apache.org/jira/browse/HTTPCLIENT-136&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://issues.apache.org/jira/browse/HTTPCLIENT-35&quot;&gt;http://issues.apache.org/jira/browse/HTTPCLIENT-35&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
especially for 4.0 here:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://marc.info/?l=httpclient-commons-dev&amp;m=110552030923369&amp;w=2&quot;&gt;http://marc.info/?l=httpclient-commons-dev&amp;amp;m=110552030923369&amp;amp;w=2&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
but somehow the discussion ended up revolving around cookie storage.</comment>
                    <comment id="12525917" author="rolandw" created="Sat, 8 Sep 2007 15:27:29 +0100"  >I&amp;#39;ve added proxy chain support to HttpConn::ManagedClientConnection and a plugin point to HttpClient, see DefaultClientRequestDirector.createTunnelToProxy(...).&lt;br/&gt;
&lt;br/&gt;
Due to the complexity of proxy authentication, we cannot provide full support for proxy chains in HttpClient at this time. I just don&amp;#39;t have the cycles available to refactor the proxy authentication logic. Everybody is invited to submit patches towards that goal.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310010">
                <name>Incorporates</name>
                                                <inwardlinks description="is part of">
                            <issuelink>
            <issuekey id="12333695">HTTPCLIENT-136</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 24 Apr 2007 15:49:51 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133688</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47842</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>