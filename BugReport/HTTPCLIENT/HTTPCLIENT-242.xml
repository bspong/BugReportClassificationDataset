<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:15:09 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-242/HTTPCLIENT-242.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-242] Add InputStream buffering.</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-242</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Currently HttpClient does not buffer the InputStream received from the socket. &lt;br/&gt;
Perhaps doing so would improve performance.&lt;br/&gt;
&lt;br/&gt;
Reported by Tony Bigbee.</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12333801">HTTPCLIENT-242</key>
            <summary>Add InputStream buffering.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="becke@u.washington.edu">Michael Becke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Jul 2003 06:48:30 +0100</created>
                <updated>Wed, 16 Feb 2011 20:43:53 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:28 +0100</resolved>
                            <version>2.0 Beta 2</version>
                                <fixVersion>2.0 Final</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12380743" author="olegk" created="Thu, 2 Sep 2004 04:44:08 +0100"  >Created an attachment (id=12597)&lt;br/&gt;
Patch against 2.0 (take 1)&lt;br/&gt;
</comment>
                    <comment id="12380744" author="becke@u.washington.edu" created="Thu, 2 Sep 2004 11:29:34 +0100"  >Looks good to me.  I&amp;#39;m trying to remember why we didn&amp;#39;t do this sooner.  Anyone recall?&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380745" author="rolweber@de.ibm.com" created="Thu, 2 Sep 2004 14:46:37 +0100"  >Hi Mike,&lt;br/&gt;
&lt;br/&gt;
the discussion usually centered around buffering for the response body.&lt;br/&gt;
Since folks could just get the input stream and create their own buffered&lt;br/&gt;
stream on top, there didn&amp;#39;t seem to be a need to create a buffered stream&lt;br/&gt;
within Http Client. (That&amp;#39;s what I recall, I didn&amp;#39;t check the archives.)&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland</comment>
                    <comment id="12380746" author="oglueck" created="Thu, 2 Sep 2004 16:10:39 +0100"  >My test results of averaging 5000 GET requests to a local Tomcat 4 reading a 725&lt;br/&gt;
bytes response body (using the RequestBodyServlet from the TestWebapp).&lt;br/&gt;
&lt;br/&gt;
without patch: 2.8002 ms / request&lt;br/&gt;
with patch:    1.8266 ms / request&lt;br/&gt;
This is a 34% improvement.&lt;br/&gt;
&lt;br/&gt;
-----&lt;br/&gt;
&lt;br/&gt;
My test result of averaging 5000 GET requests to a local IIS reading 5079 bytes&lt;br/&gt;
response body (using a static HTML page).&lt;br/&gt;
&lt;br/&gt;
without patch: 3.9436 ms / request&lt;br/&gt;
with patch:    2.9062 ms / request&lt;br/&gt;
This is a 26% improvement&lt;br/&gt;
&lt;br/&gt;
------&lt;br/&gt;
&lt;br/&gt;
My test result of averaging 5000 GET requests to a local Apache HTTPD with PHP&lt;br/&gt;
4.3 module reading 5079 bytes response body (using a static HTML page).&lt;br/&gt;
&lt;br/&gt;
without patch: 8.284  ms / request&lt;br/&gt;
with patch:    7.3686 ms / request&lt;br/&gt;
This is a 11% improvement&lt;br/&gt;
&lt;br/&gt;
Odi</comment>
                    <comment id="12380747" author="olegk" created="Tue, 7 Sep 2004 02:05:13 +0100"  >Patch committed to CVS HEAD and 2.0&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380748" author="olegk" created="Thu, 30 Sep 2004 05:22:44 +0100"  >Created an attachment (id=12898)&lt;br/&gt;
ContentLengthInputStream fix&lt;br/&gt;
</comment>
                    <comment id="12380749" author="olegk" created="Thu, 30 Sep 2004 05:23:22 +0100"  >Well, it looks like we have a release blocker. Bjarne&amp;#39;s patch attached above&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380750" author="eric@tibco.com" created="Thu, 30 Sep 2004 05:49:30 +0100"  >Close, but not quite - what if the readLimit on the mark() call has been exceeded?&lt;br/&gt;
&lt;br/&gt;
A simpler way to fix this would be to simply return &amp;quot;false&amp;quot; for markSupported(),&lt;br/&gt;
and not pass the mark function through, and throw an exception on reset.  Or, in&lt;br/&gt;
the alternative, have ContentLengthInputStream extend BufferedInputStream&lt;br/&gt;
instead of FilterInputStream, and then rely on the protected members of&lt;br/&gt;
BufferedInputStream, rather than duplicating the same logic.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m willing to submit a patch for either choice, but I can&amp;#39;t decide which one is&lt;br/&gt;
better.  Anyone?</comment>
                    <comment id="12380751" author="olegk" created="Thu, 30 Sep 2004 06:05:14 +0100"  >Eric,&lt;br/&gt;
We already have one BufferedInputStream in the input stream chain. I would not&lt;br/&gt;
want to have the input double-buffered. I am personally for option 1, if mark()&lt;br/&gt;
cant be fixed&lt;br/&gt;
&lt;br/&gt;
Oleg </comment>
                    <comment id="12380752" author="becke@u.washington.edu" created="Thu, 30 Sep 2004 07:07:23 +0100"  >I agree that this change may not fix the problem in all cases.   Option 1 seems like the way to go.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380753" author="eric@tibco.com" created="Thu, 30 Sep 2004 08:00:07 +0100"  >Created an attachment (id=12899)&lt;br/&gt;
ContentLengthInputStream - no mark/reset.&lt;br/&gt;
</comment>
                    <comment id="12380754" author="eric@tibco.com" created="Thu, 30 Sep 2004 08:02:33 +0100"  >Alternative patch provided for ContentLengthInputStream.  I thought about adding&lt;br/&gt;
test-cases, but the only thing I could think of was a spurious assertion that&lt;br/&gt;
markSupported() returned false, which seemed like a silly point.</comment>
                    <comment id="12380755" author="eric@tibco.com" created="Thu, 30 Sep 2004 08:06:02 +0100"  >One more note - let me know if you want me to generate the patch for HEAD as well.</comment>
                    <comment id="12380756" author="olegk" created="Thu, 30 Sep 2004 17:07:04 +0100"  >Looks good to me. A patch against CVS HEAD would be nice, bit not a must&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380757" author="olegk" created="Mon, 4 Oct 2004 19:43:53 +0100"  >If I hear no objections by 21:00GMT, I&amp;#39;ll commit the patch as is.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380758" author="olegk" created="Tue, 5 Oct 2004 06:12:35 +0100"  >Eric&amp;#39;s patch committed to CVS HEAD and 2.0&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12326922" name="ASF.LICENSE.NOT.GRANTED--buffering.patch" size="3963" author="olegk" created="Thu, 2 Sep 2004 04:44:08 +0100" />
                    <attachment id="12326923" name="ASF.LICENSE.NOT.GRANTED--contentlen.patch" size="1767" author="olegk" created="Thu, 30 Sep 2004 05:22:44 +0100" />
                    <attachment id="12326924" name="ASF.LICENSE.NOT.GRANTED--markreset.patch" size="3641" author="eric@tibco.com" created="Thu, 30 Sep 2004 08:00:07 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>21329</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 2 Sep 2004 03:44:08 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133296</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>188703</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>