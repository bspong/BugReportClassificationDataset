<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:11:59 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-1005/HTTPCLIENT-1005.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-1005] API surface of caching module can be reduced</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-1005</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>While the caching module can currently be considered functional and useful for folks as-is, there are several near-term enhancements planned that could change the exposed binary API of the caching module (although it is not yet clear whether they would or not). In an effort to allow the 4.1 GA release to go forward while hedging bets against future development, we should consider drastically reducing the exposed binary API of the caching module, and not exposing extension points until someone explicitly asks for them.&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12475522">HTTPCLIENT-1005</key>
            <summary>API surface of caching module can be reduced</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="cimjmoore">Jonathan Moore</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Sep 2010 18:37:41 +0100</created>
                <updated>Tue, 25 Jan 2011 11:00:29 +0000</updated>
                    <resolved>Mon, 18 Oct 2010 20:24:07 +0100</resolved>
                            <version>4.1 Alpha2</version>
                                <fixVersion>4.1 Beta1</fixVersion>
                                <component>HttpCache</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12916569" author="cimjmoore" created="Thu, 30 Sep 2010 18:40:30 +0100"  >The attached patch reduces the surface of the exposed API, so that the only publicly-available classes are:&lt;br/&gt;
&lt;br/&gt;
CacheConfig&lt;br/&gt;
CacheResponseStatus&lt;br/&gt;
DefaultCachingHttpClient&lt;br/&gt;
EhcacheCachingHttpClient&lt;br/&gt;
MemcachedCachingHttpClient&lt;br/&gt;
&lt;br/&gt;
This allows a client currently to instantiate but not extend the current implementation. One side effect is that most classes are now in the org.apache.http.impl.client.cache package except for CacheConfig and CacheResponseStatus. &lt;br/&gt;
&lt;br/&gt;
This patch is contributed to the ASF with the permission of my employer.</comment>
                    <comment id="12920181" author="olegk" created="Tue, 12 Oct 2010 14:10:12 +0100"  >Jon&lt;br/&gt;
&lt;br/&gt;
I am feeling really bad about having to lump all classes into one package. &lt;br/&gt;
&lt;br/&gt;
What is your feeling about stability of the API at this point? How likely is it that you may want to make sweeping changes to the classes and interfaces that currently reside in o.a.h.client.cache? If you anticipate major changes , I&amp;#39;ll apply the patch and start working on the first BETA release. However, If you feel that a few more months should be enough to finalize the API, we could probably delay the BETA phase a little and do one more ALPHA meanwhile.&lt;br/&gt;
&lt;br/&gt;
What do you think?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12920216" author="cimjmoore" created="Tue, 12 Oct 2010 15:17:52 +0100"  >Oleg,&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m also somewhat torn. I believe that the current set of functionality is a &amp;quot;minimum viable product&amp;quot; (probably more than minimum) and would like to get a GA release including it out as soon as possible. On the other hand, at least some of the upcoming anticipated changes (particularly, request collapsing and asynchronous validation) are likely to involve structural changes; or at least they are different enough that there is a nontrivial risk that they would break the current binary API. At the same time, while I do think we&amp;#39;ll get to those new features, it may well take a couple of months for us, and I&amp;#39;m not really crazy about holding up the GA release for those.&lt;br/&gt;
&lt;br/&gt;
As this is the first GA release of the caching module, I&amp;#39;d say we actually don&amp;#39;t really know how people are going to want to extend it (or even if they will want to extend it at all). If we want to strive for binary backwards-compatibility, then I&amp;#39;d say we should conservatively err on the side of closing down the interface. We can always expose more of the interface in a later release if folks want it, and I&amp;#39;d rather be in that position than trying to put toothpaste back into the tube (possibly compromising the design of the code in order to retain backwards compatibility).&lt;br/&gt;
&lt;br/&gt;
Jon</comment>
                    <comment id="12921680" author="olegk" created="Sat, 16 Oct 2010 13:17:51 +0100"  >Jon&lt;br/&gt;
&lt;br/&gt;
How about trying to find the middle ground? &lt;br/&gt;
&lt;br/&gt;
I made HttpCache and BasicHttpCache package private as these classes are more likely to require major changes than any other. I left HttpCacheEntry and HttpCacheStorage related classes public for the time being. HttpCacheEntry is a concrete class and it is final. HttpCacheStorage and friends are relatively simple and straight-forward and we already have a number of diverse implementations so they seem flexible enough. I am quite confident we can maintain full API compatibility with these classes in the future. &lt;br/&gt;
&lt;br/&gt;
Please review and let me know if I should make above mentioned classes package private as well.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12922115" author="cimjmoore" created="Mon, 18 Oct 2010 16:44:23 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
I think exposing those is fine, although if HttpCache (and BasicHttpCache) are package-private, then no one will be able to actually instantiate one of those classes to pass to CachingHttpClient&amp;#39;s constructor.&lt;br/&gt;
&lt;br/&gt;
So I think we can leave HttpCacheStorage and HttpCacheEntry public (although, again, my preference would be NOT to do this until someone requested it) but we then need to provide a way for someone to actually instantiate a CachingHttpClient just from something implementing HttpCacheStorage. This probably consists of additional constructors on CachingHttpClient that take HttpCacheStorage in place of HttpCache (where the implementation just wraps those in a BasicHttpCache).&lt;br/&gt;
&lt;br/&gt;
Jon&lt;br/&gt;
</comment>
                    <comment id="12922124" author="olegk" created="Mon, 18 Oct 2010 17:04:50 +0100"  >&amp;gt; This probably consists of additional constructors on CachingHttpClient that take HttpCacheStorage in place of HttpCache &lt;br/&gt;
&amp;gt; (where the implementation just wraps those in a BasicHttpCache).&lt;br/&gt;
&lt;br/&gt;
Yep. I added two new constructors that take a HttpCacheStorage and optionally a ResourceFactory. This, at the very least, enables the users to customise the way cache entries are persisted, which is pretty essential in my opinion (consider this a request ;-)). As a small bonus we can keep Ehcache and memcached related stuff in separate packages.&lt;br/&gt;
&lt;br/&gt;
Oleg  &lt;br/&gt;
</comment>
                    <comment id="12922222" author="olegk" created="Mon, 18 Oct 2010 20:24:07 +0100"  >Closing as FIXED. Please re-open if you want more classes made package private.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12456034" name="smaller-api.patch" size="206215" author="cimjmoore" created="Thu, 30 Sep 2010 18:40:30 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 12 Oct 2010 13:10:12 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>134006</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47312</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>