<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:12:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-107/HTTPCLIENT-107.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-107] HttpMethodBase: Port mismatch in URL for redirect to absolute location</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-107</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>The CVS version of latka was failing a test ( $ ant test, not maven ), when&lt;br/&gt;
using the CVS version of httpclient. The message was&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;[java] WARN  [main] org.apache.commons.httpclient.HttpMethod&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;- Redirect from port 80 to -1 is not supported: 21 Sep 2002 00:54:32,098&lt;br/&gt;
&lt;br/&gt;
The request preceding this was:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;[java] DEBUG [main] httpclient.wire - &amp;gt;&amp;gt; &amp;quot;GET /commons HTTP/1.1&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] &amp;quot; [\r\n]: 21 Sep 2002 00:54:31,262&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - enter&lt;br/&gt;
[java] DEBUG [main] httpclient.wire - &amp;gt;&amp;gt; &amp;quot;Host: jakarta.apache.org&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] &amp;quot; [\r\n]: 21 Sep 2002 00:54:31,441&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] httpclient.wire - &amp;gt;&amp;gt; &amp;quot;User-Agent: Jakarta&lt;br/&gt;
Commons-HttpClient/2.0M1&lt;br/&gt;
&amp;nbsp;[java] &amp;quot; [\r\n]: 21 Sep 2002 00:54:31,442&lt;br/&gt;
&lt;br/&gt;
And the response was:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - enter&lt;br/&gt;
HttpMethodBase.readStatusLine(HttpState, HttpConnection): 21 Sep 2002 00:54:31,444&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpConnection - enter&lt;br/&gt;
HttpConnection.readLine(): 21 Sep 2002 00:54:31,444&lt;br/&gt;
[java] DEBUG [main] httpclient.wire - &amp;lt;&amp;lt; &amp;quot;HTTP/1.1 301 Moved Permanently&amp;quot;&lt;br/&gt;
[\r\n]: 21 Sep 2002 00:54:32,080&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - enter&lt;br/&gt;
HttpMethodBase.readResponseHeaders(HttpState,HttpConnection): 21 Sep 2002&lt;br/&gt;
00:54:32,086&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpConnection - enter&lt;br/&gt;
HttpConnection.readLine(): 21 Sep 2002 00:54:32,087&lt;br/&gt;
[java] DEBUG [main] httpclient.wire - &amp;lt;&amp;lt; &amp;quot;Date: Fri, 20 Sep 2002 23:54:30 GMT&amp;quot;&lt;br/&gt;
[\r\n]: 21 Sep 2002 00:54:32,088&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpConnection - enter&lt;br/&gt;
HttpConnection.readLine(): 21 Sep 2002 00:54:32,089&lt;br/&gt;
[java] DEBUG [main] httpclient.wire - &amp;lt;&amp;lt; &amp;quot;Server: Apache/2.0.42 (Unix)&amp;quot; [\r\n]:&lt;br/&gt;
21 Sep 2002 00:54:32,090&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpConnection - enter&lt;br/&gt;
HttpConnection.readLine(): 21 Sep 2002 00:54:32,090&lt;br/&gt;
[java] DEBUG [main] httpclient.wire - &amp;lt;&amp;lt; &amp;quot;Location:&lt;br/&gt;
&lt;a href=&quot;http://jakarta.apache.org/commons/&quot;&gt;http://jakarta.apache.org/commons/&lt;/a&gt;&amp;quot; [\r\n]: 21 Sep 2002 00:54:32,091&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpConnection - enter&lt;br/&gt;
HttpConnection.readLine(): 21 Sep 2002 00:54:32,091&lt;br/&gt;
[java] DEBUG [main] httpclient.wire - &amp;lt;&amp;lt; &amp;quot;Content-Length: 319&amp;quot; [\r\n]: 21 Sep&lt;br/&gt;
2002 00:54:32,091&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpConnection - enter&lt;br/&gt;
HttpConnection.readLine(): 21 Sep 2002 00:54:32,092&lt;br/&gt;
[java] DEBUG [main] httpclient.wire - &amp;lt;&amp;lt; &amp;quot;Content-Type: text/html;&lt;br/&gt;
charset=iso-8859-1&amp;quot; [\r\n]: 21 Sep 2002 00:54:32,092&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpConnection - enter&lt;br/&gt;
HttpConnection.readLine(): 21 Sep 2002 00:54:32,092&lt;br/&gt;
[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - enter&lt;br/&gt;
HttpMethodBase.processResponseHeaders(HttpState, HttpConnection): 21 Sep 2002&lt;br/&gt;
00:54:32,093&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.methods.GetMethod - enter&lt;br/&gt;
GetMethod.readResponseBody(HttpState, HttpConnection): 21 Sep 2002 00:54:32,093&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - enter&lt;br/&gt;
HttpMethodBase.readResponseBody(HttpState, HttpConnection): 21 Sep 2002 00:54:32,093&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - enter&lt;br/&gt;
HttpMethodBase.readResponseBody(HttpState, HttpConnection): 21 Sep 2002 00:54:32,094&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpConnection - enter&lt;br/&gt;
HttpConnection.getRequestOutputStream(HttpMethod): 21 Sep 2002 00:54:32,094&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - enter&lt;br/&gt;
writeRemainingRequestBody(HttpState, HttpConnection): 21 Sep 2002 00:54:32,096&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - Redirect&lt;br/&gt;
required: 21 Sep 2002 00:54:32,097&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] DEBUG [main] org.apache.commons.httpclient.HttpMethod - Redirect&lt;br/&gt;
requested to location &amp;#39;&lt;a href=&quot;http://jakarta.apache.org/commons/&amp;#39;:&quot;&gt;http://jakarta.apache.org/commons/&amp;amp;#39;:&lt;/a&gt; 21 Sep 2002 00:54:32,097&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[java] WARN  [main] org.apache.commons.httpclient.HttpMethod - Redirect&lt;br/&gt;
from port 80 to -1 is not supported: 21 Sep 2002 00:54:32,098&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
The problem appears to be in this section of code from HttpMethodBase&lt;br/&gt;
&lt;br/&gt;
if (url == null) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//try to construct the new url based on the current url&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;URL currentUrl = new URL(conn.getProtocol(),&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;conn.getHost(),&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;conn.getPort(), getPath());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;url = new URL(currentUrl, location);   &amp;lt;--- is this inheriting the port?&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} catch (Exception ex) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;log.error(&amp;quot;Redirected location &amp;#39;&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ locationHeader.getValue()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ &amp;quot;&amp;#39; is malformed&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return statusCode;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12333666">HTTPCLIENT-107</key>
            <summary>HttpMethodBase: Port mismatch in URL for redirect to absolute location</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jsdever@sympatico.ca">Jeff Dever</assignee>
                                <reporter username="janekdb@yahoo.co.uk">Janek Bogucki</reporter>
                        <labels>
                    </labels>
                <created>Sat, 21 Sep 2002 08:22:34 +0100</created>
                <updated>Sun, 22 Apr 2007 08:10:07 +0100</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:07 +0100</resolved>
                            <version>Snapshot</version>
                                <fixVersion>2.0 Milestone 1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12379625" author="jsdever@sympatico.ca" created="Tue, 24 Sep 2002 05:30:43 +0100"  >Created an attachment (id=3185)&lt;br/&gt;
Proposed fix&lt;br/&gt;
</comment>
                    <comment id="12379626" author="janekdb@yahoo.co.uk" created="Tue, 24 Sep 2002 08:15:46 +0100"  >This patch worked for me - Thanks Jeff</comment>
                    <comment id="12379627" author="jsdever@sympatico.ca" created="Tue, 24 Sep 2002 10:54:46 +0100"  >Patch commited.</comment>
                </comments>
                    <attachments>
                    <attachment id="12326686" name="ASF.LICENSE.NOT.GRANTED--portredirect.diff" size="5982" author="jsdever@sympatico.ca" created="Tue, 24 Sep 2002 05:30:43 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12890</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 24 Sep 2002 04:30:43 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133162</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>188908</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>