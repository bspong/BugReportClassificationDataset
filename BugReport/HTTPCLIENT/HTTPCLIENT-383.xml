<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:16:53 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-383/HTTPCLIENT-383.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-383] HostConfiguration handling requires cleanup</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-383</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>As discussed on the mailing list, the host configuration handling currently&lt;br/&gt;
appears faulty:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://marc.theaimsgroup.com/?t=109644952000001&amp;r=1&amp;w=2&quot;&gt;http://marc.theaimsgroup.com/?t=109644952000001&amp;amp;r=1&amp;amp;w=2&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Oleg</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12333942">HTTPCLIENT-383</key>
            <summary>HostConfiguration handling requires cleanup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="olegk">Oleg Kalnichevski</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Sep 2004 02:43:45 +0100</created>
                <updated>Wed, 16 Feb 2011 20:45:00 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:52 +0100</resolved>
                            <version>Snapshot</version>
                                <fixVersion>3.0 Beta 1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12381935" author="olegk" created="Thu, 30 Sep 2004 02:44:47 +0100"  >Here&amp;#39;s my attempt at cleaning things up. &lt;br/&gt;
&lt;br/&gt;
Changelog:&lt;br/&gt;
&lt;br/&gt;
* Each method derived from HttpMethodBase now has a non-null HostConfiguration&lt;br/&gt;
instance&lt;br/&gt;
* The HostConfiguration instance associated with an executed method contains all&lt;br/&gt;
the parameters that were in effect at the time of method&amp;#39;s execution&lt;br/&gt;
&lt;br/&gt;
Please let me know what you think&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381936" author="olegk" created="Thu, 30 Sep 2004 02:45:14 +0100"  >Created an attachment (id=12896)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
</comment>
                    <comment id="12381937" author="becke@u.washington.edu" created="Thu, 30 Sep 2004 12:09:16 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
I think the idea is correct, but I&amp;#39;m not terribly happy about copying the params from one host config to &lt;br/&gt;
another in copyDefaults.  It seems like there must be a more elegant way to go about this.  &lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m also starting to think we may want to move away from having a HostConfig at both the client and &lt;br/&gt;
method level.  In particular now that the host config has params, and redirection and proxies has been &lt;br/&gt;
moved outside of the method, perhaps the method should no longer use the host config.  I haven&amp;#39;t fully &lt;br/&gt;
worked this out yet but I thought I&amp;#39;d bring it up for discussion.&lt;br/&gt;
&lt;br/&gt;
Mike </comment>
                    <comment id="12381938" author="olegk" created="Thu, 30 Sep 2004 17:19:25 +0100"  >Mike,&lt;br/&gt;
I have long had BIIIIG gripes with what HostConfigration has become but felt its&lt;br/&gt;
refactoring should be hold back until 4.0. I&amp;#39;ll try to come up with a better,&lt;br/&gt;
yet more radical solution.&lt;br/&gt;
&lt;br/&gt;
Let me know what you have in mind for it&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381939" author="olegk" created="Fri, 1 Oct 2004 23:29:33 +0100"  >Created an attachment (id=12917)&lt;br/&gt;
Patch (take 2)&lt;br/&gt;
</comment>
                    <comment id="12381940" author="olegk" created="Fri, 1 Oct 2004 23:36:04 +0100"  >All right. Mike, that should address your concerns. Please let me know what you&lt;br/&gt;
think&lt;br/&gt;
&lt;br/&gt;
Changelog:&lt;br/&gt;
* HttpMethods no longer contain a HostConfiguration instance. &lt;br/&gt;
* HostConfiguration heavily refactored&lt;br/&gt;
&lt;br/&gt;
If the overall approach gets approved, I&amp;#39;ll provide missing test cases&lt;br/&gt;
&lt;br/&gt;
Another thing I would like to evaluate is possibility of factoring&lt;br/&gt;
&amp;#39;virtualHostName&amp;#39; and &amp;#39;localAddress&amp;#39; out of HostConfiguration and moving them to&lt;br/&gt;
HostParams. How do you feel about it?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381941" author="olegk" created="Tue, 5 Oct 2004 17:08:11 +0100"  >Created an attachment (id=12939)&lt;br/&gt;
Patch (take 3)&lt;br/&gt;
</comment>
                    <comment id="12381942" author="olegk" created="Tue, 5 Oct 2004 17:12:02 +0100"  >In addition to previous changes I refactored virtual host logic out of&lt;br/&gt;
HttpConnection and HostConfiguration classes and moved it to the&lt;br/&gt;
HttpMethodParams &amp;amp; HostParams. Basically, virtual host has absolutely nothing to&lt;br/&gt;
do with the physical connection and should not have been there in the first&lt;br/&gt;
place. Let me know what you think&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381943" author="becke@u.washington.edu" created="Wed, 6 Oct 2004 10:55:10 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
This looks much better.  Thanks for persevering on this problem.  My only question is if we need the &lt;br/&gt;
HttpHost as part of the HttpMethod interface.  Though it&amp;#39;s not quite as elegant, getUri() should be able &lt;br/&gt;
to take care of all our needs.&lt;br/&gt;
&lt;br/&gt;
Mike </comment>
                    <comment id="12381944" author="olegk" created="Thu, 7 Oct 2004 00:52:10 +0100"  >Mike,&lt;br/&gt;
In my opinion HttpMethod interface is hopelessly broken. Having or not having&lt;br/&gt;
HttpMethod#getHost will not significantly change the situation. &lt;br/&gt;
&lt;br/&gt;
I will commit the patch as is shortly, so Vikram could resume testing the&lt;br/&gt;
preferences architecture. Should you strongly favour parsing the URI, I&amp;#39;ll&lt;br/&gt;
submit a corrective patch&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381945" author="olegk" created="Thu, 7 Oct 2004 01:34:59 +0100"  >Patch committed.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381946" author="becke@u.washington.edu" created="Thu, 7 Oct 2004 08:33:46 +0100"  >I agree that the HttpMethod interface is not pretty, but we also don&amp;#39;t want to make to make it any &lt;br/&gt;
worse.  My preference would be to leave out the HttpHost API changes.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12381947" author="olegk" created="Fri, 8 Oct 2004 00:24:23 +0100"  >Mike,&lt;br/&gt;
It turned out that URL approach required no extra badness. I am glad you made me&lt;br/&gt;
rethink it:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-            if (method.getHost() != null) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-                hostConfiguration.setHost(method.getHost());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;+            URI uri = method.getURI(); &lt;br/&gt;
&amp;nbsp;&amp;nbsp;+            if (uri.isAbsoluteURI()) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;+                hostConfiguration.setHost(uri);&lt;br/&gt;
&lt;br/&gt;
Problem fixed, API chanhes to the HttpMethod interface rolled back, additional&lt;br/&gt;
test cases submitted. I am marking the report FIXED&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327155" name="ASF.LICENSE.NOT.GRANTED--hostconfig.patch" size="54354" author="olegk" created="Tue, 5 Oct 2004 17:08:11 +0100" />
                    <attachment id="12327154" name="ASF.LICENSE.NOT.GRANTED--hostconfig.patch" size="42135" author="olegk" created="Fri, 1 Oct 2004 23:29:33 +0100" />
                    <attachment id="12327153" name="ASF.LICENSE.NOT.GRANTED--hostconfig.patch" size="29585" author="olegk" created="Thu, 30 Sep 2004 02:45:14 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>31471</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 30 Sep 2004 11:09:16 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133431</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47091</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>