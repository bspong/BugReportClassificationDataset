<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:16:41 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-360/HTTPCLIENT-360.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-360] questionable default value for BufferedOutputStream size in HttpConnection</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-360</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>From the dev list&lt;br/&gt;
&lt;br/&gt;
--&lt;br/&gt;
&lt;br/&gt;
Hi Eric&lt;br/&gt;
&lt;br/&gt;
Thanks for bringing this up. HttpClient 3.0 allows for parameterization&lt;br/&gt;
of SO_SNDBUF and SO_RCVBUF settings. For HttpClient 2.0 (as well as for&lt;br/&gt;
3.0 when falling back onto the system defaults), however, it would make&lt;br/&gt;
sense to set a cap on the size of the send and receive buffers.&lt;br/&gt;
&lt;br/&gt;
Feel free to open a ticket for this issue with Bugzilla&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
On Fri, 2004-07-02 at 18:39, Eric Bloch wrote:&lt;br/&gt;
&lt;br/&gt;
&amp;gt;&amp;gt; Hi httpclient folks,&lt;br/&gt;
&amp;gt;&amp;gt; &lt;br/&gt;
&amp;gt;&amp;gt; I&amp;#39;ve been looking at 2.0 source code and the default value for the &lt;br/&gt;
&amp;gt;&amp;gt; BufferedOutputStream that is used in an HttpConnectionn is coming from &lt;br/&gt;
&amp;gt;&amp;gt; socket.getSendBufferSize().  My hunch, is that, in general, this is &lt;br/&gt;
&amp;gt;&amp;gt; bigger than you&amp;#39;d want.&lt;br/&gt;
&amp;gt;&amp;gt; &lt;br/&gt;
&amp;gt;&amp;gt; Most HTTP &amp;quot;sends&amp;quot; are less than 1KByte (&amp;#39;cept for big POSTs).&lt;br/&gt;
&amp;gt;&amp;gt; The default value I get for socket.getSendBufferSize for this is 8192.&lt;br/&gt;
&amp;gt;&amp;gt; I would think a better default for this buffer would be 1K, no?&lt;br/&gt;
&amp;gt;&amp;gt; &lt;br/&gt;
&amp;gt;&amp;gt; Also, fyi, if someone happens to dork the system send buffer size hi &lt;br/&gt;
&amp;gt;&amp;gt; (say MB) and you are using the MultiThreadedConnectionManager in 2.0 &lt;br/&gt;
&amp;gt;&amp;gt; (dunno about 3.0), you will use up a lot of memory for each connection &lt;br/&gt;
&amp;gt;&amp;gt; since the pool doesn&amp;#39;t let idle connections (or their buffers) be gced. &lt;br/&gt;
&amp;gt;&amp;gt;   I just got bit bad by that.&lt;br/&gt;
&amp;gt;&amp;gt; &lt;br/&gt;
&amp;gt;&amp;gt; -Eric&lt;br/&gt;
&amp;gt;&amp;gt; &lt;br/&gt;
&amp;gt;</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12333919">HTTPCLIENT-360</key>
            <summary>questionable default value for BufferedOutputStream size in HttpConnection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="bloch@laszlosystems.com">Eric Bloch</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Jul 2004 08:24:57 +0100</created>
                <updated>Wed, 16 Feb 2011 20:43:47 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:49 +0100</resolved>
                            <version>2.0 Final</version>
                                <fixVersion>2.0 Final</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12381813" author="olegk" created="Fri, 16 Jul 2004 23:35:22 +0100"  >Created an attachment (id=12128)&lt;br/&gt;
Patch against 2.0 branch&lt;br/&gt;
</comment>
                    <comment id="12381814" author="olegk" created="Fri, 16 Jul 2004 23:37:05 +0100"  >The fix is pretty straightforward. If do not hear any objections within a couple&lt;br/&gt;
of days, I&amp;#39;ll apply the patch as is&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381815" author="mohammad.rezaei@gs.com" created="Fri, 16 Jul 2004 23:54:49 +0100"  >This seems applicable to 3.0 too.</comment>
                    <comment id="12381816" author="becke@u.washington.edu" created="Sun, 18 Jul 2004 02:50:41 +0100"  >Looks ok.  Is there a reason you chose 2K in particular?  I see no real problem with it, it just seems  &lt;br/&gt;
arbitrary.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12381817" author="olegk" created="Sun, 18 Jul 2004 07:47:08 +0100"  >No particular reason. Completely arbitraty indeed. What would be a more&lt;br/&gt;
approriate value?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12381818" author="becke@u.washington.edu" created="Sun, 18 Jul 2004 21:42:17 +0100"  >2K is fine with me.  Just thought I&amp;#39;d check.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12381819" author="olegk" created="Tue, 20 Jul 2004 04:11:49 +0100"  >Patch committed to CVS HEAD and 2.0 branch&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327129" name="ASF.LICENSE.NOT.GRANTED--buffer.patch" size="1157" author="olegk" created="Fri, 16 Jul 2004 23:35:22 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>29897</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 16 Jul 2004 22:35:22 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133408</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47235</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>