<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:15:05 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-238/HTTPCLIENT-238.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-238] HeaderElement#parse(String) implementation is not optimal</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-238</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>The cookie setted by the LocalDirector 416 Version 4.2.3 has a bug.&lt;br/&gt;
It sets for Tuesday and Thursday &amp;quot;Tues&amp;quot; and &amp;quot;Thur&amp;quot; instead of the &lt;br/&gt;
canonical &amp;quot;Tue&amp;quot; and &amp;quot;Thu&amp;quot;. This break the parsing stage and stop HttpClient to &lt;br/&gt;
work for 2 days a week. Of course I modified the parse method in HeaderElement &lt;br/&gt;
class, but everytime I download a new version, I have to remake the jar....&lt;br/&gt;
It&amp;#39;s possible to include this into the CVS files ?</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12333797">HTTPCLIENT-238</key>
            <summary>HeaderElement#parse(String) implementation is not optimal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="l.masini@infogroup.it">Luca Masini</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Jul 2003 15:31:35 +0100</created>
                <updated>Wed, 16 Feb 2011 20:44:01 +0000</updated>
                    <resolved>Mon, 15 May 2006 22:44:58 +0100</resolved>
                            <version>2.0 Beta 1</version>
                                                <component>HttpClient</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12380699" author="olegk" created="Tue, 1 Jul 2003 16:24:21 +0100"  >Luca,&lt;br/&gt;
Of course, I would prefer to see the problem fixed in LocalDirector in the first&lt;br/&gt;
place. This said, I do not see it as a big deal to augment the set of tokens&lt;br/&gt;
that HeaderElement#parse should accept as valid ones. On the other hand, there&amp;#39;s&lt;br/&gt;
a pretty good chance of HeaderElement#parse method being replaced with something&lt;br/&gt;
saner in post-2.0 development. There are other problems related to this very&lt;br/&gt;
piece of code (&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-92&quot; title=&quot;Cookies with &amp;#39;,&amp;#39; in the value string is not parsed correctly in some cases&quot;&gt;&lt;strike&gt;HTTPCLIENT-92&lt;/strike&gt;&lt;/a&gt;) and REALLY would like to see it go. If you can live&lt;br/&gt;
with a patched version of 2.0 release, we would definitely provide a fix for the&lt;br/&gt;
problem in 2.1 release.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380700" author="l.masini@infogroup.it" created="Tue, 1 Jul 2003 18:01:09 +0100"  >Thank you Oleg, of course I will use my patched release of the library, but I &lt;br/&gt;
hope to see it in the main release from v2.1&lt;br/&gt;
We tried to patch the LocalDirectory, but that is a piece of hardware, and the &lt;br/&gt;
cookie setting are REALLY hard-coded.&lt;br/&gt;
Anyway, patching it is really simple as putting this lines in parse:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (tokenizer.hasMoreTokens()) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String s = nextToken.toLowerCase();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (s.endsWith(&amp;quot;tues&amp;quot;)) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;	nextToken = s.substring(0,s.length()-1) + &lt;br/&gt;
tokenizer.nextToken();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else if (nextToken.endsWith(&amp;quot;thurs&amp;quot;)) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;	nextToken = s.substring(0,s.length()-2) + &lt;br/&gt;
tokenizer.nextToken();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;else if (s.endsWith(&amp;quot;mon&amp;quot;) &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Standard from here&lt;br/&gt;
&lt;br/&gt;
Bye.&lt;br/&gt;
L.</comment>
                    <comment id="12380701" author="olegk" created="Tue, 1 Jul 2003 20:05:20 +0100"  >Luca,&lt;br/&gt;
I believe the way HeaderElement#parse(String) method is currently implemented is&lt;br/&gt;
sub-optimal. The idea is to completely do away with that ugly check for comma in&lt;br/&gt;
the expiry date and let the DateParser decide whether the expiry date is&lt;br/&gt;
malformed or not. But we can&amp;#39;t make such a radical change in 2.0 release. It&lt;br/&gt;
will have to wait until 2.1&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380702" author="olegk" created="Sat, 12 Jul 2003 22:43:04 +0100"  >Created an attachment (id=7268)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
</comment>
                    <comment id="12380703" author="olegk" created="Sat, 12 Jul 2003 22:53:43 +0100"  >Folks,&lt;br/&gt;
&lt;br/&gt;
This patch is intended to improve one of the uglies and most convoluted spots in&lt;br/&gt;
HttpClient: HttpElement#parse. The parser will no longer try to compare header&lt;br/&gt;
elements with week days or anything of the sort. Two weeks of my spare time have&lt;br/&gt;
gone into optimization of the parsing routines. So, I have a fair degree of&lt;br/&gt;
confidence that the parsing routine will have decent performance. Besides, I did&lt;br/&gt;
my very best to reuse common parsing patterns whenever possible.&lt;br/&gt;
&lt;br/&gt;
Feel free to start throwing bad tomatoes at me. Comments, critique, corrections&lt;br/&gt;
are, as always, welcome.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380704" author="becke@u.washington.edu" created="Sun, 13 Jul 2003 01:32:17 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
I have just a few minor comments.&lt;br/&gt;
&lt;br/&gt;
- There are a few places where methods that return arrays or a list return null.  I think they should &lt;br/&gt;
instead return an empty array or list.  e.g. HeaderElement.parseElements(), &lt;br/&gt;
ParameterParser.parse().&lt;br/&gt;
- Header.getValues()  is using the newly deprecated HeaderElement.parse().&lt;br/&gt;
- There are a number of style violations.  Mostly minor stuff like spacing and missing or incorrect &lt;br/&gt;
javadocs.  It&amp;#39;s nitpicking but we want to keep that code pretty:)&lt;br/&gt;
&lt;br/&gt;
Overall I think this looks good.  Nice work as usual.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380705" author="olegk" created="Sun, 13 Jul 2003 03:53:22 +0100"  >&amp;gt; There are a few places where methods that return arrays or a list &lt;br/&gt;
&amp;gt; return null. I think they should instead return an empty array or list.  e.g. &lt;br/&gt;
&amp;gt; HeaderElement.parseElements(), &lt;br/&gt;
&amp;gt; ParameterParser.parse().&lt;br/&gt;
&lt;br/&gt;
I think the above mentioned parsing routines return null only when receive null&lt;br/&gt;
as input. They always return an array or list when input is not a null (empty&lt;br/&gt;
string, for instance). If you think it is still inconsistent, I&amp;#39;ll happily&lt;br/&gt;
change these methods&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Header.getValues()  is using the newly deprecated HeaderElement.parse().&lt;br/&gt;
&lt;br/&gt;
Good catch. Corrected.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; There are a number of style violations.  Mostly minor stuff like spacing&lt;br/&gt;
&amp;gt; and missing or incorrect javadocs.  It&amp;#39;s nitpicking but we want to keep&lt;br/&gt;
&amp;gt; that code pretty:)&lt;br/&gt;
&lt;br/&gt;
It turned out that all javadoc warnings had been caused by removal of deprecated&lt;br/&gt;
methods. Corrected. &lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12380706" author="olegk" created="Sun, 13 Jul 2003 03:54:04 +0100"  >Created an attachment (id=7269)&lt;br/&gt;
Patch (take 2)&lt;br/&gt;
</comment>
                    <comment id="12380707" author="becke@u.washington.edu" created="Sun, 13 Jul 2003 04:07:54 +0100"  >I&amp;#39;m of the belief that methods returning Collections or arrays should never return null.  This is &lt;br/&gt;
mostly to avoid NPEs when iterating over values returned from such methods.  The only &lt;br/&gt;
exception I would make is if the Javadocs explicitly say that null will be returned for some &lt;br/&gt;
particular reason.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12380708" author="olegk" created="Sun, 13 Jul 2003 04:43:22 +0100"  >Agreed. I have changed the code accordingly. I can&amp;#39;t create a patch right now,&lt;br/&gt;
though, as cvs.apache.org appears to be having some problems. I&amp;#39;ll post it later. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12380709" author="olegk" created="Sun, 13 Jul 2003 05:02:08 +0100"  >Created an attachment (id=7272)&lt;br/&gt;
Patch (take 3)&lt;br/&gt;
</comment>
                    <comment id="12380710" author="olegk" created="Sun, 13 Jul 2003 22:02:29 +0100"  >Patch comitted to CVS HEAD&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12326918" name="ASF.LICENSE.NOT.GRANTED--parser.patch" size="53657" author="olegk" created="Sun, 13 Jul 2003 05:02:08 +0100" />
                    <attachment id="12326917" name="ASF.LICENSE.NOT.GRANTED--parser.patch" size="53544" author="olegk" created="Sun, 13 Jul 2003 03:54:04 +0100" />
                    <attachment id="12326916" name="ASF.LICENSE.NOT.GRANTED--parser.patch" size="44967" author="olegk" created="Sat, 12 Jul 2003 22:43:04 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>21210</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 1 Jul 2003 15:24:21 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133292</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>188832</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>