<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:19:14 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-617/HTTPCLIENT-617.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-617] Hostname verification:  turn off wildcards when CN is an IP address</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-617</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Hostname verification:   turn off wildcards when CN is an IP address.  This is a further improvement on &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-613&quot; title=&quot;https should check CN of x509 cert&quot;&gt;&lt;strike&gt;HTTPCLIENT-613&lt;/strike&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-614&quot; title=&quot;allow different strategies when checking CN of x509 cert&quot;&gt;&lt;strike&gt;HTTPCLIENT-614&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
Example - don&amp;#39;t allow:&lt;br/&gt;
CN=*.114.102.2&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m thinking of grabbing the substring following the final dot, and running it through &amp;quot;Integer.parseInt()&amp;quot;.  If the NumberFormatException isn&amp;#39;t thrown (so Integer.parseInt() actually worked!), then I&amp;#39;ll turn off wildcard matching.  Notice that this won&amp;#39;t be a problem with IP6 addresses, since they don&amp;#39;t use dots.  It&amp;#39;s only a problem with IP4, where the meaning of the dots clashes with dots in domain names.&lt;br/&gt;
&lt;br/&gt;
Note:  when I turn off wildcard matching, I still attempt an exact match with the hostname.  If through some weird mechanism the client is actually able to use a hostname such as &amp;quot;&lt;a href=&quot;https://*.114.102.2/&quot;&gt;https://*.114.102.2/&lt;/a&gt;&amp;quot;, then they will be okay if that&amp;#39;s what the certificate on the server contains.</description>
                <environment></environment>
            <key id="12359061">HTTPCLIENT-617</key>
            <summary>Hostname verification:  turn off wildcards when CN is an IP address</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="juliusdavies">Julius Davies</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Dec 2006 18:46:27 +0000</created>
                <updated>Sun, 11 Nov 2007 19:12:05 +0000</updated>
                    <resolved>Thu, 11 Oct 2007 10:20:49 +0100</resolved>
                            <version>Snapshot</version>
                                <fixVersion>4.0 Alpha 2</fixVersion>
                                <component>HttpConn</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12459728" author="rolandw" created="Tue, 19 Dec 2006 19:07:15 +0000"  >Hi Julius,&lt;br/&gt;
&lt;br/&gt;
throwing an exception is generally a very expensive operation. Code that throws and catches exceptions in the normal course of operations is _highly_ questionable. This is HttpClient 4.x, so the prerequisite is Java 1.4 which already supports regular expressions. If you have to check a string for a format as simple as this, please use a precompiled regular expression. If you&amp;#39;re not familiar with the regexp format, I&amp;#39;ll help you out.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12459729" author="juliusdavies" created="Tue, 19 Dec 2006 19:14:41 +0000"  >good point&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll run Character.isDigit( ) against each character of that last sub-string, instead of Integer.parseInt().  That way even unicode digits in Arabic will be caught.  :-)&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12459735" author="rolandw" created="Tue, 19 Dec 2006 19:33:03 +0000"  >Hi Julius,&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m not sure that an IP address is allowed to have anything but US-ASCII digits 0-9. And instead of hand-parsing, you could just use a precompiled regular expression... ;-) The &amp;quot;precompiled&amp;quot; is important here. If it&amp;#39;s not precompiled, hand-parsing will definitely be more efficient.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12459865" author="oglueck" created="Wed, 20 Dec 2006 09:13:14 +0000"  >It would be good to have a couple of tool functions to check for these cases:&lt;br/&gt;
&lt;br/&gt;
isIPv4Address&lt;br/&gt;
isIPv6Address&lt;br/&gt;
&lt;br/&gt;
Pitty the InetAddress class doesn&amp;#39;t provide this functionality in an inexpensive way.</comment>
                    <comment id="12533430" author="olegk" created="Tue, 9 Oct 2007 18:47:08 +0100"  >Julius,&lt;br/&gt;
&lt;br/&gt;
I added a utility class InetAddressUtils which can be used to test if a string represents a valid IPv4 or IPv6 address.  &lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/repos/asf/jakarta/httpcomponents/httpclient/trunk/module-client/src/main/java/org/apache/http/conn/util/InetAddressUtils.java&quot;&gt;http://svn.apache.org/repos/asf/jakarta/httpcomponents/httpclient/trunk/module-client/src/main/java/org/apache/http/conn/util/InetAddressUtils.java&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
What else needs to be done to close this issue?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12533817" author="juliusdavies@hotmail.com" created="Wed, 10 Oct 2007 18:51:37 +0100"  >Thanks, Oleg!  Here&amp;#39;s what I had in mind (see attached patch).  I&amp;#39;ll try and put together a junit test for this - hopefully soon (famous last  words).  Unfortunately I have to remember how to use openssl to generate an X509 cert with CN=*.1.2.3, but should hopefully find time this weekend.&lt;br/&gt;
&lt;br/&gt;
yours,&lt;br/&gt;
&lt;br/&gt;
Julius</comment>
                    <comment id="12533996" author="olegk" created="Thu, 11 Oct 2007 10:20:49 +0100"  >Patch checked in. Many thanks, Julius. &lt;br/&gt;
&lt;br/&gt;
Test cases would be very welcome, as always.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12367502" name="guard_against_ip4_wildcard.patch" size="1022" author="juliusdavies@hotmail.com" created="Wed, 10 Oct 2007 18:51:37 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 19 Dec 2006 19:07:15 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133657</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47844</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>