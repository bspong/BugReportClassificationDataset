<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:17:13 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-413/HTTPCLIENT-413.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-413] Cookie with domain .mydomain.com not sent to host mydomain.com</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-413</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>A cookie with for example &lt;br/&gt;
&amp;nbsp;&amp;nbsp;.mydomain.com &lt;br/&gt;
as domain property is not sent to the host&lt;br/&gt;
&amp;nbsp;&amp;nbsp;mydomain.com&lt;br/&gt;
(without www. or anything else before &amp;quot;mydomain.com&amp;quot;)&lt;br/&gt;
&lt;br/&gt;
This concern all CookieSpec as the relevant code is located in CookieSpecBase:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public boolean domainMatch(final String host, final String domain) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return host.endsWith(domain);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
It should be changed for instance to something like:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public boolean domainMatch(final String host, final String domain) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// take care of host &amp;quot;myDomain.com&amp;quot; and domain &amp;quot;.myDomain.com&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return host.endsWith(domain)&lt;br/&gt;
	|| _host.equals(_domain.substring(1));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}</description>
                <environment>Operating System: Linux&lt;br/&gt;
Platform: PC</environment>
            <key id="12333972">HTTPCLIENT-413</key>
            <summary>Cookie with domain .mydomain.com not sent to host mydomain.com</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="mguillemot@yahoo.fr">Marc Guillemot</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Dec 2004 01:44:45 +0000</created>
                <updated>Wed, 16 Feb 2011 20:43:51 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:55 +0100</resolved>
                            <version>3.0 Beta 1</version>
                                <fixVersion>3.0 RC1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382072" author="olegk" created="Fri, 24 Dec 2004 03:53:14 +0000"  >RFC2109, section 2&lt;br/&gt;
&amp;lt;quote&amp;gt;&lt;br/&gt;
Hosts names can be specified either as an IP address or a FQHN&lt;br/&gt;
string.  Sometimes we compare one host name with another.  Host A&amp;#39;s&lt;br/&gt;
name domain-matches host B&amp;#39;s if&lt;br/&gt;
&lt;br/&gt;
* both host names are IP addresses and their host name strings match&lt;br/&gt;
&amp;nbsp;&amp;nbsp;exactly; or&lt;br/&gt;
&lt;br/&gt;
* both host names are FQDN strings and their host name strings match&lt;br/&gt;
&amp;nbsp;&amp;nbsp;exactly; or&lt;br/&gt;
&lt;br/&gt;
* A is a FQDN string and has the form NB, where N is a non-empty name&lt;br/&gt;
&amp;nbsp;&amp;nbsp;string, B has the form .B&amp;#39;, and B&amp;#39; is a FQDN string.  (So, x.y.com&lt;br/&gt;
&amp;nbsp;&amp;nbsp;domain-matches .y.com but not y.com.)&lt;br/&gt;
&lt;br/&gt;
Note that domain-match is not a commutative operation: a.b.c.com&lt;br/&gt;
domain-matches .c.com, but not the reverse.&lt;br/&gt;
&amp;lt;/quote&amp;gt;&lt;br/&gt;
&lt;br/&gt;
Marc,&lt;br/&gt;
&lt;br/&gt;
Please correct me if I am wrong, but based on the above quote I believe&lt;br/&gt;
HttpClient correctly implements the domain matching algorithm as defined by the&lt;br/&gt;
RFC2109. If you are absolutely positive that (so called) mainstream browsers&lt;br/&gt;
implement a different domain matching differently, we may consider relaxing the&lt;br/&gt;
browser compatibility spec.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382073" author="mguillemot@yahoo.fr" created="Fri, 24 Dec 2004 04:01:51 +0000"  >I faced the problem with htmlunit that uses itself commons-httpclient. Just&lt;br/&gt;
after having reported this bug, I&amp;#39;ve found that on the website I was testing on,&lt;br/&gt;
the problem was caused by an htmlunit &amp;quot;feature&amp;quot; that changed domain of cookies&lt;br/&gt;
like &amp;quot;mydomain.com&amp;quot; to &amp;quot;.mydomain.com&amp;quot;. This &amp;quot;feature&amp;quot; has been added for not so&lt;br/&gt;
long time and I currently don&amp;#39;t understand why. I close this bug as invalid. If&lt;br/&gt;
I get some feedback on the reason of the patch in htmlunit I will reopen it.&lt;br/&gt;
Sorry for the lost time.</comment>
                    <comment id="12382074" author="ddkilzer@kilzer.net" created="Mon, 10 Jan 2005 15:15:39 +0000"  >Mmm...irony.  I was the one responsible for the bad patch in htmlunit that Marc&lt;br/&gt;
found.&lt;br/&gt;
&lt;br/&gt;
However, mainstream browsers like Mozilla 1.7.5, Firefox 1.0 and Safari 1.2.4&lt;br/&gt;
all support this behavior.  I have also tested MSIE 5.2 for Mac, which behaves&lt;br/&gt;
this way as well.&lt;br/&gt;
&lt;br/&gt;
I have created a patch to CookieSpecBase.domainMatch() that fixes this issue,&lt;br/&gt;
although it will change the behavior of the NetscapeDraftSpec subclass (since it&lt;br/&gt;
doesn&amp;#39;t override the domainMatch() method).  This makes the&lt;br/&gt;
CookiePolicy.BROWSER_COMPATIBILITY mode more...compatible...with browsers.&lt;br/&gt;
</comment>
                    <comment id="12382075" author="ddkilzer@kilzer.net" created="Mon, 10 Jan 2005 15:18:42 +0000"  >Created an attachment (id=13964)&lt;br/&gt;
Patch v1&lt;br/&gt;
&lt;br/&gt;
Note that this change to CookieSpecBase.domainMatch() is the flip side of the&lt;br/&gt;
logic in the CookieSpecBase.validate() method, which allows this type of cookie&lt;br/&gt;
to be set in the first place (in CookiePolicy.BROWSER_COMPATIBILITY mode).&lt;br/&gt;
</comment>
                    <comment id="12382076" author="olegk" created="Sat, 29 Jan 2005 20:39:36 +0000"  >Created an attachment (id=14133)&lt;br/&gt;
David&amp;#39;s patch + test cases&lt;br/&gt;
&lt;br/&gt;
Folks,&lt;br/&gt;
If I hear no complaints, I&amp;#39;ll commit the patch in a few days&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382077" author="becke@u.washington.edu" created="Sun, 30 Jan 2005 01:27:43 +0000"  >Looks good to me.  I&amp;#39;ll call for a 3.0 RC1 release later today now that this is taken care of.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12382078" author="olegk" created="Mon, 31 Jan 2005 04:02:19 +0000"  >Patch committed.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382079" author="ddkilzer@kilzer.net" created="Wed, 14 Dec 2005 07:19:58 +0000"  >NOTE: The patch committed for this bug created &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-467&quot; title=&quot;CookieSpecBase.domainMatch() leaks cookies to 3rd party domains&quot;&gt;&lt;strike&gt;HTTPCLIENT-467&lt;/strike&gt;&lt;/a&gt;.</comment>
                </comments>
                    <attachments>
                    <attachment id="12327178" name="ASF.LICENSE.NOT.GRANTED--commons-httpclient-3.0-beta1-fix-cookie-compat.diff" size="862" author="ddkilzer@kilzer.net" created="Mon, 10 Jan 2005 15:18:42 +0000" />
                    <attachment id="12327179" name="ASF.LICENSE.NOT.GRANTED--compatspec.patch" size="5148" author="olegk" created="Sat, 29 Jan 2005 20:39:36 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>32833</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 24 Dec 2004 03:53:14 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133461</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47227</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>