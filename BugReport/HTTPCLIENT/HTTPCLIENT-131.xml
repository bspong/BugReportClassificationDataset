<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:13:50 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-131/HTTPCLIENT-131.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-131] [HttpClient] Authenticator() - ability to perform alternate authentication</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-131</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>My post to the user group.  The developer replied suggesting I enter an &lt;br/&gt;
enhancement request.&lt;br/&gt;
&lt;br/&gt;
-----Original Message-----&lt;br/&gt;
From: Gustafson, Vicki [mailto:&lt;a href=&apos;mailto:vicki.gustafson@us.didata.com&apos;&gt;vicki.gustafson@us.didata.com&lt;/a&gt;]&lt;br/&gt;
Sent: Thursday, 12 December 2002 5:03 AM&lt;br/&gt;
To: Jakarta Commons Users List&lt;br/&gt;
Subject: [HttpClient] Authentication using Basic&lt;br/&gt;
&lt;br/&gt;
Is there a way to specify which authentication scheme you would like the client &lt;br/&gt;
to use if several schemes are returned in the www-auth header?&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m performing a simple post using the httpClient.  The server returns a 401 at &lt;br/&gt;
which point the httpClient tries to authenticate with the server.  The &lt;br/&gt;
following header is received:&lt;br/&gt;
&lt;br/&gt;
Attempting to parse authenticate header: &amp;#39;WWW-Authenticate: Negotiate, NTLM, &lt;br/&gt;
Basic realm=&amp;quot;XXXwhateverXXX&amp;quot;&lt;br/&gt;
&lt;br/&gt;
I need to authenticate using Basic, but the Authenticator class will only try &lt;br/&gt;
the most secure scheme:  NTLM.  Is there a setting or parameter I can set to &lt;br/&gt;
force the httpClient to use Basic?&lt;br/&gt;
&lt;br/&gt;
thanks,&lt;br/&gt;
Vicki&lt;br/&gt;
&lt;br/&gt;
// determine the most secure request header to add&lt;br/&gt;
Header requestHeader = null;&lt;br/&gt;
if (challengeMap.containsKey(&amp;quot;ntlm&amp;quot;)) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String challenge = (String) challengeMap.get(&amp;quot;ntlm&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requestHeader = Authenticator.ntlm(challenge, method, state,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;responseHeader);&lt;br/&gt;
} else if (challengeMap.containsKey(&amp;quot;digest&amp;quot;)) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String challenge = (String) challengeMap.get(&amp;quot;digest&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String realm = parseRealmFromChallenge(challenge);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requestHeader = Authenticator.digest(realm, method, state,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;responseHeader);&lt;br/&gt;
} else if (challengeMap.containsKey(&amp;quot;basic&amp;quot;)) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String challenge = (String) challengeMap.get(&amp;quot;basic&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String realm = parseRealmFromChallenge(challenge);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requestHeader = Authenticator.basic(realm, state, responseHeader);&lt;br/&gt;
} else if (challengeMap.size() == 0) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throw new HttpException(&amp;quot;No authentication scheme found in &amp;#39;&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ authenticateHeader + &amp;quot;&amp;#39;&amp;quot;);&lt;br/&gt;
} else {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throw new UnsupportedOperationException(&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;quot;Requested authentication scheme &amp;quot; + challengeMap.keySet()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;+ &amp;quot; is unsupported&amp;quot;);&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
--&lt;br/&gt;
To unsubscribe, e-mail:   &amp;lt;mailto:&lt;a href=&apos;mailto:commons-user-unsubscribe@jakarta.apache.org&apos;&gt;commons-user-unsubscribe@jakarta.apache.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
For additional commands, e-mail: &amp;lt;mailto:&lt;a href=&apos;mailto:commons-user-help@jakarta.apache.org&apos;&gt;commons-user-help@jakarta.apache.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
--&lt;br/&gt;
To unsubscribe, e-mail:   &amp;lt;mailto:&lt;a href=&apos;mailto:commons-user-unsubscribe@jakarta.apache.org&apos;&gt;commons-user-unsubscribe@jakarta.apache.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
For additional commands, e-mail: &amp;lt;mailto:&lt;a href=&apos;mailto:commons-user-help@jakarta.apache.org&apos;&gt;commons-user-help@jakarta.apache.org&lt;/a&gt;&amp;gt;&lt;br/&gt;
&lt;br/&gt;
**********developer response**********************************&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Currently there isn&amp;#39;t, however we probably should be more intelligent about &lt;br/&gt;
falling back to other authentication schemes based on the type of credentials &lt;br/&gt;
provided.  Having said this I&amp;#39;m not sure it conforms to the HTTP spec strictly &lt;br/&gt;
(which states that the client must use the strongest authentication scheme it &lt;br/&gt;
supports, there&amp;#39;s a grey area here because if your application doesn&amp;#39;t provide &lt;br/&gt;
a dialog or similar for the user to enter NTLM credentials it can only support &lt;br/&gt;
basic or digest authentication, despite HTTPClient supporting NTLM).&lt;br/&gt;
&lt;br/&gt;
What I&amp;#39;d like to see happen is:&lt;br/&gt;
&lt;br/&gt;
When NTLM authentication is requested as top priority but only &lt;br/&gt;
UsernamePasswordCredentials are available instead of NTLMCredentials we fall &lt;br/&gt;
back to one of the other schemes.  In general this would mean that:&lt;br/&gt;
&lt;br/&gt;
if an authentication scheme is requested and a credentials object of the wrong &lt;br/&gt;
type is provided, HTTPClient should assume (probably optionally or only in non-&lt;br/&gt;
strict mode) that the requested authentication scheme is not supported and fall &lt;br/&gt;
through to other options.&lt;br/&gt;
&lt;br/&gt;
Achieving this would require a reasonably amount of refactoring of the &lt;br/&gt;
Authenticator class but shouldn&amp;#39;t be impossible.  Unfortunately I don&amp;#39;t have &lt;br/&gt;
time to do it myself at the moment but I&amp;#39;d be happy to help out if you felt &lt;br/&gt;
like doing it, otherwise logging an enhancement bug in Bugzilla would be a good &lt;br/&gt;
way to record this request until someone has time to actually implement it.&lt;br/&gt;
&lt;br/&gt;
Adrian Sutton, Software Engineer&lt;br/&gt;
Ephox Corporation&lt;br/&gt;
&lt;a href=&quot;http://www.ephox.com&quot;&gt;www.ephox.com&lt;/a&gt;</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12333690">HTTPCLIENT-131</key>
            <summary>[HttpClient] Authenticator() - ability to perform alternate authentication</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="vgustafson@proxicom.com">Vicki Gustafson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Dec 2002 08:13:37 +0000</created>
                <updated>Thu, 2 May 2013 03:28:33 +0100</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:11 +0100</resolved>
                            <version>Snapshot</version>
                                <fixVersion>3.0 Final</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12379738" author="olegk" created="Thu, 15 Jan 2004 01:52:06 +0000"  >Created an attachment (id=9950)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
</comment>
                    <comment id="12379739" author="olegk" created="Thu, 15 Jan 2004 01:52:33 +0000"  >Please review.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379740" author="becke@u.washington.edu" created="Thu, 15 Jan 2004 03:10:48 +0000"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
A few comments:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;- Should HttpMethodDirector have it&amp;#39;s own version of the auth defaults?  It seems like this should &lt;br/&gt;
be left to the params.&lt;br/&gt;
&amp;nbsp;- When new schemes are added, they will have to be added to the &lt;br/&gt;
AuthPolicy.AUTH_SCHEME_PRIORITY param in order to work.  This should probably be documented &lt;br/&gt;
in AuthPolicy.registerAuthScheme().&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12379741" author="olegk" created="Thu, 15 Jan 2004 05:05:19 +0000"  >&amp;gt;  - Should HttpMethodDirector have it&amp;#39;s own version of the auth defaults?  &lt;br/&gt;
&amp;gt; It seems like this should be left to the params.&lt;br/&gt;
&lt;br/&gt;
I did not feel like giving users the possibility to mess around with the default&lt;br/&gt;
authentication preferences to avoid their misuse. Therefore I wanted to keep the&lt;br/&gt;
DEFAULT_AUTH_PREFS private. On the other hand I do agree that HttpClientParams&lt;br/&gt;
or AuthPolicy would be a better home for auth defaults.&lt;br/&gt;
&lt;br/&gt;
&amp;gt;  - When new schemes are added, they will have to be added to the &lt;br/&gt;
&amp;gt; AuthPolicy.AUTH_SCHEME_PRIORITY param in order to work.  &lt;br/&gt;
&amp;gt; This should probably be documented in AuthPolicy.registerAuthScheme().&lt;br/&gt;
&lt;br/&gt;
Good point. I just realised that this is quite lousy. I think auth defaults&lt;br/&gt;
should be derived from the AuthPolicy. I&amp;#39;ll try to come up with a better solution. &lt;br/&gt;
&lt;br/&gt;
A new patch to follow.&lt;br/&gt;
&lt;br/&gt;
Thanks, Mike</comment>
                    <comment id="12379742" author="olegk" created="Fri, 16 Jan 2004 22:35:36 +0000"  >Created an attachment (id=9977)&lt;br/&gt;
Patch (take 2)&lt;br/&gt;
</comment>
                    <comment id="12379743" author="olegk" created="Fri, 16 Jan 2004 22:37:59 +0000"  >What about this? Let me know.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379744" author="oglueck" created="Wed, 28 Jan 2004 18:02:40 +0000"  >Please also update the Authentication Guide on the website and optionally&lt;br/&gt;
inculde and example. I am saying this because this functionality is now somewhat&lt;br/&gt;
hard to find for the users.</comment>
                    <comment id="12379745" author="olegk" created="Thu, 29 Jan 2004 01:47:08 +0000"  >Created an attachment (id=10112)&lt;br/&gt;
Patch (take 3)&lt;br/&gt;
</comment>
                    <comment id="12379746" author="olegk" created="Thu, 29 Jan 2004 01:50:46 +0000"  >An example added. Documentation to be updated after the 3.0 API freeze. &lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll submit the patch tonight around 23:00 CET if no one complains by then.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12379747" author="becke@u.washington.edu" created="Thu, 29 Jan 2004 05:26:17 +0000"  >No complaints here.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12379748" author="olegk" created="Thu, 29 Jan 2004 05:40:06 +0000"  >Patch committed. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12333851">HTTPCLIENT-292</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12326710" name="ASF.LICENSE.NOT.GRANTED--authpref.patch" size="13020" author="olegk" created="Thu, 29 Jan 2004 01:47:08 +0000" />
                    <attachment id="12326709" name="ASF.LICENSE.NOT.GRANTED--authpref.patch" size="7494" author="olegk" created="Fri, 16 Jan 2004 22:35:36 +0000" />
                    <attachment id="12326708" name="ASF.LICENSE.NOT.GRANTED--authpref.patch" size="5442" author="olegk" created="Thu, 15 Jan 2004 01:52:06 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>15297</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 15 Jan 2004 01:52:06 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133185</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189314</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>