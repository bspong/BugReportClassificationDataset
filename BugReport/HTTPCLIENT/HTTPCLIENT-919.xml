<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:22:14 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-919/HTTPCLIENT-919.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-919] NTLM implementation lacks support for NTLMv1, NTLMv2, and NTLM2 Session forms of NTLM</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-919</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>The current HttpClient implementation lacks support for all enhancements to NTLM after Windows 95.  That includes NTLMv1, NTLMv2, and NTLM2 Session Response varieties of the protocol.&lt;br/&gt;
&lt;br/&gt;
This seriously impacts the usability of HttpClient in enterprise situations, which has required the Lucene Connector Framework team to extend HttpClient to address the issue.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve attached a patch which contains the implementation used by LCF.&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12457233">HTTPCLIENT-919</key>
            <summary>NTLM implementation lacks support for NTLMv1, NTLMv2, and NTLM2 Session forms of NTLM</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="kwright@metacarta.com">Karl Wright</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2010 22:36:34 +0000</created>
                <updated>Tue, 25 Jan 2011 10:59:31 +0000</updated>
                    <resolved>Mon, 18 Oct 2010 20:29:54 +0100</resolved>
                                            <fixVersion>4.1 Beta1</fixVersion>
                                <component>HttpAuth</component>
                        <due></due>
                    <votes>2</votes>
                        <watches>4</watches>
                                                    <comments>
                    <comment id="12837709" author="kwright@metacarta.com" created="Wed, 24 Feb 2010 09:17:49 +0000"  >Hi all,&lt;br/&gt;
&lt;br/&gt;
Lack of native NTLM support in 4.x also may block Lucene Connector Framework from using 4.x.  This is because many of its connectors require NTLM.  HttpClient 4.x&amp;#39;s solution requires jcifs, and jcifs is a LGPL-licensed component, which means we cannot distribute it according to Apache rules.&lt;br/&gt;
&lt;br/&gt;
The submitted patch has been granted to ASF officially to Apache as part of the software grant for LCF, and thus it can form the basis of a full featured NTLM implementation in HttpClient, which we feel would be highly desirable for the above reason.&lt;br/&gt;
</comment>
                    <comment id="12837717" author="olegk" created="Wed, 24 Feb 2010 09:42:30 +0000"  >Karl,&lt;br/&gt;
&lt;br/&gt;
NTLMvis a very touchy subject. I understand a lot of hard work has gone into this patch but I am afraid at this point of time it cannot be accepted. The trouble is we, as well as ASF in general, cannot distribute NTLM implementations for legal reasons. NTLM encryption algorithms may be covered by patents held by Microsoft, which would make commercial users of open-source NTLM implementations liable for the use of Microsoft intellectual property. Various high ranking ASF people are aware of the situation and promised to have this issue up with Microsoft, but to my knowledge there has been no practical outcome so far.&lt;br/&gt;
&lt;br/&gt;
I would even go as far as _strongly_ suggesting that the custom extensions to HttpClient that implement NTLM encryption algorithms be removed from Lucene Connector Framework, for the same reason they have been removed from HttpClient&lt;br/&gt;
&lt;br/&gt;
For details on NTLM support in HttpClient 4.0 see:&lt;br/&gt;
&lt;a href=&quot;http://hc.apache.org/httpcomponents-client/ntlm.html&quot;&gt;http://hc.apache.org/httpcomponents-client/ntlm.html&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12837753" author="kwright@metacarta.com" created="Wed, 24 Feb 2010 11:55:41 +0000"  >Please see comments regarding this issue I&amp;#39;ve attached to httpclient-917.&lt;br/&gt;
&lt;br/&gt;
If we conclude that patents will be violated, I will indeed remove all NTLM implementations from LCF, which would include even the upstream patch to httpclient-3.1 that was granted.  However, the consequences are severe to the functionality of that component that we&amp;#39;d want to verify this.&lt;br/&gt;
&lt;br/&gt;
An NTLM implementation is also available for the Google connector framework, by the way, for what it is worth.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12837942" author="kwright@metacarta.com" created="Wed, 24 Feb 2010 18:40:36 +0000"  >Reviewers here want to know if there&amp;#39;s any controlling legal ASF document that describes the described policy available for their perusal.   A URL will do, or even a document title (if you recall seeing such a thing anywhere).&lt;br/&gt;
&lt;br/&gt;
Also, FWIW, our expert here believes that ASF&amp;#39;s legal structure may protect individual Apache contributors from liability concerns of this kind.  &amp;quot;That&amp;#39;s kind of why Apache exists,&amp;quot; was the comment.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12837976" author="olegk" created="Wed, 24 Feb 2010 19:39:57 +0000"  >None I am aware of. You should ask at &lt;a href=&apos;mailto:legal@apache.org&apos;&gt;legal@apache.org&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12838304" author="kwright@metacarta.com" created="Thu, 25 Feb 2010 11:12:46 +0000"  >I raised this specific issue on &lt;a href=&apos;mailto:legal-discuss@apache.org&apos;&gt;legal-discuss@apache.org&lt;/a&gt; yesterday, and received the following response from William A. Rowe, Jr.:&lt;br/&gt;
&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&lt;br/&gt;
AIUI - this is probably covered under the interop/Microsoft patent pledge.&lt;br/&gt;
If it is not, asking them to make it explicitly so might not be a big issue.&lt;br/&gt;
&lt;br/&gt;
See&lt;br/&gt;
&lt;a href=&quot;http://www.microsoft.com/openspecifications/programs/wspp/wspp-patents/wspp-patent-pledges/&quot;&gt;http://www.microsoft.com/openspecifications/programs/wspp/wspp-patents/wspp-patent-pledges/&lt;/a&gt; and&lt;br/&gt;
related documents.&lt;br/&gt;
&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;&lt;br/&gt;
&lt;br/&gt;
The document in question apparently pledges to protect open-source developers and their community against direct patent-infringement lawsuits for certain areas of their IP, including protocol specifications as described in this document:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://www.microsoft.com/openspecifications/programs/wspp/wspp-patents/&quot;&gt;http://www.microsoft.com/openspecifications/programs/wspp/wspp-patents/&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The patents that Microsoft licenses are described by protocol in the following document:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://download.microsoft.com/download/1/0/4/1041AEF2-0ABC-4D48-A909-EC3CD52A7F13/WSPP_Patent_Mapping.pdf&quot;&gt;http://download.microsoft.com/download/1/0/4/1041AEF2-0ABC-4D48-A909-EC3CD52A7F13/WSPP_Patent_Mapping.pdf&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
That document explicitly mentions NTLM as being a Microsoft protocol, but asserts no patent claims against it.&lt;br/&gt;
&lt;br/&gt;
So if I read this correctly:&lt;br/&gt;
&lt;br/&gt;
(1) Open source developers are not subject to patent claims by Microsoft in any case, and&lt;br/&gt;
(2) Microsoft asserts no patent claims whatsoever against NTLM, and does not suggest patent licensing for native implementations of such even against for-profit corporations.&lt;br/&gt;
&lt;br/&gt;
I will, of course, post any further responses that appear from legal-discuss.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12922075" author="olegk" created="Mon, 18 Oct 2010 14:48:39 +0100"  >Karl&lt;br/&gt;
&lt;br/&gt;
Given that we now have an explicit OK to include NTLM implementations in the ASF code (&lt;a href=&quot;https://issues.apache.org/jira/browse/LEGAL-80&quot; title=&quot;NTLM Inclusion in Apache Projects&quot;&gt;&lt;strike&gt;LEGAL-80&lt;/strike&gt;&lt;/a&gt;), I can commit your patch to the project repository. However, there is one minor technicality that we need to discuss first. HttpClient 3.1 is effectively EOL and is not planned to have any official releases any more. So, the patch needs to be ported to the 4.x API. Would you have time and inclination to work on the port or is that something I would have to do myself?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12922078" author="kwright@metacarta.com" created="Mon, 18 Oct 2010 14:58:05 +0100"  >That&amp;#39;s great news!&lt;br/&gt;
&lt;br/&gt;
If the authentication architecture is at all similar, it should not take me too long to do this.  The logic trickiness is in all the encryption, and perhaps in getting some DC&amp;#39;s set up with the proper switches for testing.  But I won&amp;#39;t be able to start on it for a couple of weeks at best.  But by then I am hoping to have procured access to my old testing environment formerly at MetaCarta and now at qBase, so that I can verify the code.&lt;br/&gt;
&lt;br/&gt;
If your time frame is too urgent for that, then by all means I urge you to go ahead.&lt;br/&gt;
</comment>
                    <comment id="12922081" author="olegk" created="Mon, 18 Oct 2010 15:16:27 +0100"  >I would like to have the NTLM code incorporated before 4.1 goes BETA in order to have more time for testing. I&amp;#39;ll take a stab at porting the patch but I would really appreciate if you could invest some effort into testing NTLM authentication in HttpClient 4.1 once ready. Some test coverage would also be nice ;-)&lt;br/&gt;
&lt;br/&gt;
Oleg </comment>
                    <comment id="12922224" author="olegk" created="Mon, 18 Oct 2010 20:29:54 +0100"  >Patch ported and committed to SVN trunk.&lt;br/&gt;
&lt;br/&gt;
Karl, could you please review / test NTLM support in HttpClient 4.1 when you happen to have time?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12922495" author="kwright@metacarta.com" created="Tue, 19 Oct 2010 10:28:01 +0100"  >I will test as soon as I have the means.  Hopefully that willl be sometime next week.&lt;br/&gt;
</comment>
                    <comment id="12928126" author="andrewbruno" created="Thu, 4 Nov 2010 04:38:09 +0000"  >Does this mean that the patch checked into SVN changes this:  &lt;a href=&quot;http://hc.apache.org/httpcomponents-client-ga/ntlm.html&quot;&gt;http://hc.apache.org/httpcomponents-client-ga/ntlm.html&lt;/a&gt;  (i.e. No need for JCIFS, etc.)&lt;br/&gt;
&lt;br/&gt;
Also, do you know when 4.1 Alpha3 will be released?  &lt;br/&gt;
&lt;br/&gt;
Andrew</comment>
                    <comment id="12928165" author="olegk" created="Thu, 4 Nov 2010 09:18:49 +0000"  >Andrew,&lt;br/&gt;
&lt;br/&gt;
JCIFS is no longer required. NTLM should work right out of the box with the next release.&lt;br/&gt;
&lt;br/&gt;
HttpClient 4.1-beta1 can be expected within a week.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12436776" name="ntlmv2-etc.patch" size="67646" author="kwright@metacarta.com" created="Tue, 23 Feb 2010 22:37:04 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 24 Feb 2010 09:42:30 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133926</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47361</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>