<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:22:35 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-958/HTTPCLIENT-958.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-958] client cache currently allows incomplete responses to be passed on to the client</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-958</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Per the HTTP/1.1 spec:&lt;br/&gt;
&lt;br/&gt;
&amp;quot;A cache that receives an incomplete response (for example, with fewer bytes of data than specified in a Content-Length header) MAY store the response. However, the cache MUST treat this as a partial response. Partial responses MAY be combined as described in section 13.5.4; the result might be a full response or might still be partial. A cache MUST NOT return a partial response to a client without explicitly marking it as such, using the 206 (Partial Content) status code. A cache MUST NOT return a partial response using a status code of 200 (OK).&amp;quot;&lt;br/&gt;
&lt;br/&gt;
(&lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13.8&quot;&gt;http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13.8&lt;/a&gt;)&lt;br/&gt;
&lt;br/&gt;
For example, if a 200 response shows up with 128 bytes in the body but a Content-Length header of 256, the cache MUST NOT pass this through unchanged.&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12467918">HTTPCLIENT-958</key>
            <summary>client cache currently allows incomplete responses to be passed on to the client</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="cimjmoore">Jonathan Moore</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Jun 2010 17:10:08 +0100</created>
                <updated>Tue, 25 Jan 2011 11:00:11 +0000</updated>
                    <resolved>Fri, 2 Jul 2010 11:36:49 +0100</resolved>
                            <version>4.1 Alpha2</version>
                                <fixVersion>4.1 Beta1</fixVersion>
                                <component>HttpCache</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12882622" author="cimjmoore" created="Fri, 25 Jun 2010 17:10:40 +0100"  >I will upload a patch for this issue in a moment, then we should discuss. :)</comment>
                    <comment id="12882623" author="cimjmoore" created="Fri, 25 Jun 2010 17:11:50 +0100"  >The following patch is contributed to the ASF with the permission of my employer. This is a stopgap fix for the issue.</comment>
                    <comment id="12882624" author="cimjmoore" created="Fri, 25 Jun 2010 17:16:36 +0100"  >Ok, the stopgap fix is to detect this situation for 200 or 206 responses, and return a 502 (Bad Gateway) error instead. This is conditionally compliant cache behavior, although potentially not optimal. The RFC suggests that it would be permissible to convert these responses into properly-formatted 206 responses instead, although since the caching code does not currently have any support for partial responses or byte ranges, this seemed too complicated to undertake without further discussion.&lt;br/&gt;
&lt;br/&gt;
The tricky thing would be if a 206 response arrived with:&lt;br/&gt;
&lt;br/&gt;
Content-Length: 100&lt;br/&gt;
Content-Range: bytes 0-9,50-139/255&lt;br/&gt;
&lt;br/&gt;
but only 50 bytes in the body; we&amp;#39;d have to parse the existing Content-Range to figure out which bytes we *did* get, and then produce the appropriate:&lt;br/&gt;
&lt;br/&gt;
Content-Range: bytes 0-9,50-89/255&lt;br/&gt;
&lt;br/&gt;
I can work on doing this, however, if the current stopgap solution isn&amp;#39;t acceptible (I don&amp;#39;t think this is a very likely case to arise in practice).&lt;br/&gt;
</comment>
                    <comment id="12883133" author="olegk" created="Mon, 28 Jun 2010 13:59:19 +0100"  >Hi Jon,&lt;br/&gt;
&lt;br/&gt;
In my opinion it is perfectly fine if the cache does not handle partial responses and always returns 502 in case of a partial response. The support for partial responses can be added at a later point if there is popular demand for it. Presently there are more important things to be done such as file system bound backend.&lt;br/&gt;
&lt;br/&gt;
Oleg   </comment>
                    <comment id="12883203" author="cimjmoore" created="Mon, 28 Jun 2010 17:13:36 +0100"  >Oleg, sounds good. The patch I uploaded should provide that 502 funtionality -- let me know if you need any changes. -Jon&lt;br/&gt;
</comment>
                    <comment id="12884631" author="olegk" created="Fri, 2 Jul 2010 11:36:49 +0100"  >Patch checked in.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12448067" name="incomplete-response.patch" size="40961" author="cimjmoore" created="Fri, 25 Jun 2010 17:11:50 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 28 Jun 2010 12:59:19 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133960</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47346</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>