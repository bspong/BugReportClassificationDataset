<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:19:31 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-643/HTTPCLIENT-643.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-643] Provide fail-over for multi-home remote servers (if one server in a farm goes down)</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-643</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>The HTTP Client does not provide automatic fail-over for multi-home remote servers (web-farm) if one server in a farm goes down</description>
                <environment>All environments</environment>
            <key id="12366397">HTTPCLIENT-643</key>
            <summary>Provide fail-over for multi-home remote servers (if one server in a farm goes down)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="vadim62">Vadim Permakoff</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Apr 2007 15:42:52 +0100</created>
                <updated>Tue, 25 Jan 2011 10:58:36 +0000</updated>
                    <resolved>Wed, 6 Feb 2008 21:43:46 +0000</resolved>
                            <version>3.1 RC1</version>
                                <fixVersion>4.0 Alpha 3</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12486027" author="vadim62" created="Mon, 2 Apr 2007 15:47:31 +0100"  >Attached is example of code: MultiHomeProtocolSocketFactory.java and MultiHomeSSLProtocolSocketFactory.java to resolve this issue</comment>
                    <comment id="12486028" author="vadim62" created="Mon, 2 Apr 2007 15:48:08 +0100"  >Attached is example of code: MultiHomeProtocolSocketFactory.java and MultiHomeSSLProtocolSocketFactory.java to resolve this issue</comment>
                    <comment id="12486039" author="olegk" created="Mon, 2 Apr 2007 16:14:55 +0100"  >Folks,&lt;br/&gt;
&lt;br/&gt;
This looks useful to me. The questions is whether we want to put this code to the &amp;#39;contrib&amp;#39; package or to HttpClient proper. &lt;br/&gt;
&lt;br/&gt;
What do you think?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12486061" author="oglueck" created="Mon, 2 Apr 2007 17:24:24 +0100"  >Should definitely go into proper. It&amp;#39;s a common use case.</comment>
                    <comment id="12486076" author="rolandw" created="Mon, 2 Apr 2007 18:14:36 +0100"  >Looks like a case for proper. The error handling and Java version support needs a bit of polishing though.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12486078" author="olegk" created="Mon, 2 Apr 2007 18:21:01 +0100"  >Another question to follow immediately: what target release? 3.1, 3.2 or 4.0? Since 3.1-rc1 has already been officially released 3.1 is supposed to be in the state of code freeze by now barring serious bugs only. &lt;br/&gt;
&lt;br/&gt;
Thoughts?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12486081" author="oglueck" created="Mon, 2 Apr 2007 18:26:18 +0100"  >We can certainly bundle it as an addition in 3.1, if it is not set as the default.</comment>
                    <comment id="12486084" author="rolandw" created="Mon, 2 Apr 2007 18:41:10 +0100"  >I can live with putting this into 3.1. It does not affect either binary or source compatibility. And it makes sense.&lt;br/&gt;
We should not let users wait for this code for several releases just to stick to the RC definition.&lt;br/&gt;
&lt;br/&gt;
But if you don&amp;#39;t like the idea, I have no problem with putting it into 3.1 contrib and 4.0 proper either.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12486090" author="olegk" created="Mon, 2 Apr 2007 19:35:21 +0100"  >Very well, 3.1 it is.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12490836" author="olegk" created="Mon, 23 Apr 2007 08:52:19 +0100"  >Vadim,&lt;br/&gt;
&lt;br/&gt;
I took a closer look at the code and found out that both factories would not work as advertised (no fail-over for multi-home remote servers) if the connect timeout was set to a non-zero value. This needs to be fixed if you want the code to be accepted into the main distribution of HttpClient.&lt;br/&gt;
&lt;br/&gt;
Oleg </comment>
                    <comment id="12494679" author="olegk" created="Thu, 10 May 2007 10:04:52 +0100"  >Folks,&lt;br/&gt;
&lt;br/&gt;
This patch is not ready for inclusion into the stable distribution without additional work. I have no cycles left to work on anything but major bugs in the HttpClient 3.x code line. I suggest we postpone this issue until 4.0&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12534641" author="vadim62" created="Sun, 14 Oct 2007 17:34:55 +0100"  >Hi Oleg,&lt;br/&gt;
Sorry, I did not look in this thread for a long time and now my reply is probably too late, but anyway, I hope it may be useful. &lt;br/&gt;
I put here the code just as an example, how the problem was resolved in our case. I don&amp;#39;t pretend it to go to any version unchanged and I did not test this code with all possible scenarios, but actually it works fine for me if the connect timeout is set to a non-zero value. I&amp;#39;m not sure why it does not work in your case, can you please provide a bit more info?&lt;br/&gt;
</comment>
                    <comment id="12534665" author="olegk" created="Sun, 14 Oct 2007 20:58:08 +0100"  >Vadim,&lt;br/&gt;
Because both socket factories do not seem to provide the same fail-over logic when the connection timeout is set to a non zero value. They merely call the ControllerThreadSocketFactory#createSocket method; &lt;br/&gt;
====&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int timeout = params.getConnectionTimeout();&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (timeout == 0)&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;{&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return createSocket(host, port, localAddress, localPort);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return ControllerThreadSocketFactory.createSocket(&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;this, host, port, localAddress, localPort, timeout);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
====&lt;br/&gt;
&lt;br/&gt;
I still intend to incorporate the patch into the 4.0 branch in the due course. You are very welcome to give me a helping hand, though, if you want this to happen sooner ;-)&lt;br/&gt;
&lt;br/&gt;
Oleg </comment>
                    <comment id="12536212" author="vadim62" created="Fri, 19 Oct 2007 14:17:51 +0100"  >I see. This is what I did not mention: I registered http protocol with MultiHomeProtocolSocketFactory and https with MultiHomeSSLProtocolSocketFactory.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;// register custom http and https protocols&lt;br/&gt;
&amp;nbsp;&amp;nbsp;static&lt;br/&gt;
&amp;nbsp;&amp;nbsp;{&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Protocol protocolHttp = new Protocol(&amp;quot;http&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(ProtocolSocketFactory)new MultiHomeProtocolSocketFactory(),&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DEFAULT_HTTP_PORT);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Protocol.registerProtocol(&amp;quot;http&amp;quot;, protocolHttp);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Protocol protocolHttps = new Protocol(&amp;quot;https&amp;quot;,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(ProtocolSocketFactory)new MultiHomeSSLProtocolSocketFactory(),&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DEFAULT_HTTPS_PORT);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Protocol.registerProtocol(&amp;quot;https&amp;quot;, protocolHttps);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
I did not need to change any code in HTTP Client (which I like a lot, nice architecture!), just created these 2 Factories and registered in my other class. In this case the MultiHomeProtocolSocketFactory#createSocket will be called from ControllerThreadSocketFactory#createSocket.&lt;br/&gt;
</comment>
                    <comment id="12538880" author="vadim62" created="Tue, 30 Oct 2007 18:26:18 +0000"  >Oleg,&lt;br/&gt;
Any problems using it as I described above? &lt;br/&gt;
Regards, &lt;br/&gt;
Vadim</comment>
                    <comment id="12538883" author="olegk" created="Tue, 30 Oct 2007 18:39:50 +0000"  >No, no problem, but as far as I understand this only works when the factory is registered as the default one.   &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12566360" author="olegk" created="Wed, 6 Feb 2008 21:43:46 +0000"  >Automatic connect fail-over for multi-home remote servers implemented in SVN trunk&lt;br/&gt;
&lt;br/&gt;
Oleg </comment>
                </comments>
                    <attachments>
                    <attachment id="12354753" name="MultiHomeProtocolSocketFactory.java" size="4749" author="vadim62" created="Mon, 2 Apr 2007 15:47:31 +0100" />
                    <attachment id="12354754" name="MultiHomeSSLProtocolSocketFactory.java" size="4758" author="vadim62" created="Mon, 2 Apr 2007 15:48:08 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 2 Apr 2007 15:14:55 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133682</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47473</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>