<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:22:07 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-906/HTTPCLIENT-906.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-906] Minor performance improvement to IdleConnectionHandler</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-906</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>The attached patch does the following changes to IdleConnectionHandler&lt;br/&gt;
&amp;nbsp;- as it iterator over a map of connections, using a LinkedHashMap is a faster&lt;br/&gt;
&amp;nbsp;- rather than using an iterator over the keyset and subsequently getting the values, an iterator over the entry set is used instead for efficiency (at least according to FindBugs)&lt;br/&gt;
&lt;br/&gt;
Note that the patch contains other changes to make variables final where possible. This was done automatically by Eclipse, and can be removed if desired. However I see no harm in them, other than they affect more of the code than intended by the patch.</description>
                <environment></environment>
            <key id="12445577">HTTPCLIENT-906</key>
            <summary>Minor performance improvement to IdleConnectionHandler</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="moqtada">Tony Poppleton</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jan 2010 01:22:34 +0000</created>
                <updated>Tue, 25 Jan 2011 10:59:28 +0000</updated>
                    <resolved>Sat, 16 Jan 2010 14:12:54 +0000</resolved>
                                            <fixVersion>4.1 Alpha2</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12800493" author="moqtada" created="Fri, 15 Jan 2010 01:37:55 +0000"  >This patch&amp;#39;s usage of LinkedHashMap means it requires Java 1.4+.  Is this the case for HttpClient?</comment>
                    <comment id="12800496" author="moqtada" created="Fri, 15 Jan 2010 01:40:49 +0000"  >Attached a second version of the patch (with suffix .patch2) without the whitespace and final changes.</comment>
                    <comment id="12800498" author="sebb@apache.org" created="Fri, 15 Jan 2010 01:48:00 +0000"  >Agree that using entry set is better if one wants both key and values.&lt;br/&gt;
Whether LHM is faster overall is less immediately obvious, and will depend on how the map is used, not just how it is iterated.&lt;br/&gt;
&lt;br/&gt;
The patch has spurious white-space changes as well as the final changes which make it very much harder to review.&lt;br/&gt;
Also, when patches are committed it is generally prefereable to fix one problem per commit.&lt;br/&gt;
Please provide patches that fix only the problem at hand.&lt;br/&gt;
&lt;br/&gt;
The original code for which you have provided a patch includes generics, which require Java 1.5+, so LinkedHashMap must be OK</comment>
                    <comment id="12801013" author="moqtada" created="Fri, 15 Jan 2010 23:55:36 +0000"  >Attached .patch3 which uses spaces rather than tabs (as per conventions) and removed use of &amp;quot;final&amp;quot; keyword to be consistent with rest of file.</comment>
                    <comment id="12801177" author="sebb@apache.org" created="Sat, 16 Jan 2010 14:12:54 +0000"  >According to Java Generics and Collections (O&amp;#39;Reilly) Chapter 16, LinkedHashMap has slightly worse performance overall than HashMap, and should only be used if insertion or access order is important. That makes sense, because the LHM has to maintain its links.&lt;br/&gt;
&lt;br/&gt;
BTW, when providing updated patches, it may be clearer to replace the original file with a new one.&lt;br/&gt;
IIf the old file is to be kept, please use a fixed type (e.g. .patch) and change the file stem (e.g. try3.patch), otherwise the attachment may be treated as binary.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve applied the patch without the change to use LHM.&lt;br/&gt;
&lt;br/&gt;
URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=899957&amp;view=rev&quot;&gt;http://svn.apache.org/viewvc?rev=899957&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-906&quot; title=&quot;Minor performance improvement to IdleConnectionHandler&quot;&gt;&lt;strike&gt;HTTPCLIENT-906&lt;/strike&gt;&lt;/a&gt; Minor performance improvement to IdleConnectionHandler&lt;br/&gt;
Replace keySet() + get() with entrySet()&lt;br/&gt;
&lt;br/&gt;
Modified:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;httpcomponents/httpclient/trunk/httpclient/src/main/java/org/apache/http/impl/conn/IdleConnectionHandler.java</comment>
                    <comment id="12801178" author="moqtada" created="Sat, 16 Jan 2010 14:27:25 +0000"  >Thanks.&lt;br/&gt;
&lt;br/&gt;
Agreed, LHM is slower for some operation, however it does have faster iteration performance (&lt;a href=&quot;http://www.artima.com/weblogs/viewpost.jsp?thread=122295&quot;&gt;http://www.artima.com/weblogs/viewpost.jsp?thread=122295&lt;/a&gt;).  I guess I was optimizing for my particular use-case where I don&amp;#39;t add new connections frequently, but do try and close idle ones every 5 seconds.&lt;br/&gt;
&lt;br/&gt;
Anyway, am happy either way.</comment>
                </comments>
                    <attachments>
                    <attachment id="12430333" name="IdleConnectionHandler.java.patch" size="7047" author="moqtada" created="Fri, 15 Jan 2010 01:23:02 +0000" />
                    <attachment id="12430338" name="IdleConnectionHandler.java.patch2" size="3964" author="moqtada" created="Fri, 15 Jan 2010 01:40:49 +0000" />
                    <attachment id="12430467" name="IdleConnectionHandler.java.patch3" size="2656" author="moqtada" created="Fri, 15 Jan 2010 23:55:36 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 15 Jan 2010 01:48:00 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133914</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47370</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>