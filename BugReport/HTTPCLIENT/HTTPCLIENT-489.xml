<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:17:59 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-489/HTTPCLIENT-489.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-489] Request is retried if preemptive authentication fails</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-489</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Hello,&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m using premptive authentification from an Axis client using BASIC Http&lt;br/&gt;
authentification. When the user isn&amp;#39;t authenticated/authorized by server (in my&lt;br/&gt;
case, credentials are expired), httpclient runs a &amp;quot;Chalenge&amp;quot; that produces a&lt;br/&gt;
second request to server with same credentials.&lt;br/&gt;
&lt;br/&gt;
when using preemptive mode, chalenge should be skipped if authentication scheme&lt;br/&gt;
hasn&amp;#39;t changed !</description>
                <environment>Operating System: Windows 2000&lt;br/&gt;
Platform: PC</environment>
            <key id="12334048">HTTPCLIENT-489</key>
            <summary>Request is retried if preemptive authentication fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="ndeloof">nicolas de loof</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Aug 2005 00:22:32 +0100</created>
                <updated>Wed, 16 Feb 2011 20:44:50 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:11:06 +0100</resolved>
                            <version>3.0 RC3</version>
                                <fixVersion>3.0 RC4</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382571" author="olegk" created="Thu, 25 Aug 2005 00:32:39 +0100"  >Nicolas,&lt;br/&gt;
Could you please attach a wire/context log of the HTTP session?&lt;br/&gt;
&lt;a href=&quot;http://jakarta.apache.org/commons/httpclient/logging.html&quot;&gt;http://jakarta.apache.org/commons/httpclient/logging.html&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382572" author="ndeloof" created="Thu, 25 Aug 2005 01:19:33 +0100"  >Created an attachment (id=16177)&lt;br/&gt;
logs for duplicate request&lt;br/&gt;
&lt;br/&gt;
preemptive authentication is activated (line 11 :&lt;br/&gt;
http.authentication.preemptive = true)&lt;br/&gt;
&lt;br/&gt;
first request is send (line 52)&lt;br/&gt;
server responds HTTP/1.1 401  (line 120) and requires basic authentication&lt;br/&gt;
(line 138) WWW-Authenticate: Basic realm=&amp;quot;Contact&amp;quot;&lt;br/&gt;
AuthChallengeProcessor runs challenge (line 159) and retries authentication&lt;br/&gt;
(line 162)&lt;br/&gt;
second request (line 193) uses same credentials&lt;br/&gt;
and gets same 401 (line 257)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve made some changed to processWWWAuthChallenge() to include (after line 690)&lt;br/&gt;
:&lt;br/&gt;
&lt;br/&gt;
boolean usePreemptive =&lt;br/&gt;
method.getParams().isParameterTrue(HttpClientParams.PREEMPTIVE_AUTHENTICATION);&lt;br/&gt;
&lt;br/&gt;
boolean useBasic =&lt;br/&gt;
AuthPolicy.BASIC.equalsIgnoreCase(authscheme.getSchemeName());&lt;br/&gt;
if (usePreemptive &amp;amp;&amp;amp; useBasic) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return false;&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
Using this, no challenge is processed.</comment>
                    <comment id="12382573" author="oglueck" created="Thu, 25 Aug 2005 01:39:19 +0100"  >Now, I understand what the problem is: The request is retried instead of failing&lt;br/&gt;
after the first time.</comment>
                    <comment id="12382574" author="olegk" created="Wed, 31 Aug 2005 07:45:24 +0100"  >Created an attachment (id=16259)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
&lt;br/&gt;
Folks,&lt;br/&gt;
Please review and let me know what you think&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382575" author="olegk" created="Wed, 14 Sep 2005 04:49:13 +0100"  >Did anyone have time to review this one? This is a fairly big change for a&lt;br/&gt;
release candidate. Please test and review&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382576" author="becke@u.washington.edu" created="Wed, 14 Sep 2005 12:21:22 +0100"  >I haven&amp;#39;t had a chance to test this, but it looks good to me.  The only other thing I can think of testing &lt;br/&gt;
would be the combination of failed preemptive authentication and a custom CredentialsProvider.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12382577" author="olegk" created="Tue, 20 Sep 2005 06:42:13 +0100"  >Patch committed&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327276" name="ASF.LICENSE.NOT.GRANTED--36339.debug" size="43998" author="ndeloof" created="Thu, 25 Aug 2005 01:19:33 +0100" />
                    <attachment id="12327277" name="ASF.LICENSE.NOT.GRANTED--auth.patch" size="6116" author="olegk" created="Wed, 31 Aug 2005 07:45:24 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>36339</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 24 Aug 2005 23:32:39 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133536</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47119</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>