<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:20:54 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-77/HTTPCLIENT-77.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-77] Implement Connection Timeouts</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-77</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>I was writing test code to use the setSoTimeout(int millis) method to set a&lt;br/&gt;
timeout value when connecting to a URL.  It appears to me that no matter what I&lt;br/&gt;
set the timeout to be a HttpConnection will try to connect but uses some other&lt;br/&gt;
timeout value(I&amp;#39;m guessing the OS&amp;#39;s default value).  I looked at the code for&lt;br/&gt;
HttpConnection and it uses the Socket(host,port) constructor which tries to&lt;br/&gt;
connect write away.  I&amp;#39;d like to suggest the following code below so the timeout&lt;br/&gt;
is set before first the connection is even made.&lt;br/&gt;
&lt;br/&gt;
/* Compile the code as is and it should timeout within a sec.  If you&lt;br/&gt;
&amp;nbsp;* uncomment the first two lines after the try statement and comment&lt;br/&gt;
&amp;nbsp;* out the other socket connect statements and run the code again you will&lt;br/&gt;
&amp;nbsp;* notice write away that the timeout is something else because it connects&lt;br/&gt;
&amp;nbsp;* right away in the constructor.  Its like the timeout is worthless at this&lt;br/&gt;
&amp;nbsp;* point.  As a matter a fact the code should never get there.&lt;br/&gt;
&amp;nbsp;* This all assumes that 192.168.168.50 is not on your network.&lt;br/&gt;
&amp;nbsp;*/&lt;br/&gt;
&lt;br/&gt;
import java.io.*;&lt;br/&gt;
import java.net.*;&lt;br/&gt;
&lt;br/&gt;
public class SocketTest {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;long start = System.currentTimeMillis();&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Socket socket = new Socket(&amp;quot;192.168.168.50&amp;quot;,80);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//socket.setSoTimeout(1000);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;//Setting timeout before the connection is made.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Socket socket = new Socket();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InetSocketAddress sAddress =&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;new InetSocketAddress(&amp;quot;192.168.168.50&amp;quot;,80);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;socket.connect(sAddress,1000);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} catch (UnknownHostException e) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(e);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} catch (SocketException e) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(e);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} catch (IOException e) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(e);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;System.out.println(System.currentTimeMillis() - start);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
}</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: All</environment>
            <key id="12333636">HTTPCLIENT-77</key>
            <summary>Implement Connection Timeouts</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="warren@dubelyoo.com">Warren Gavin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jul 2002 10:56:27 +0100</created>
                <updated>Wed, 16 Feb 2011 14:23:30 +0000</updated>
                    <resolved>Mon, 15 May 2006 22:44:53 +0100</resolved>
                            <version>2.0 Alpha 1</version>
                                <fixVersion>2.0 Milestone 2</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>2</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12379520" author="oglueck" created="Tue, 22 Oct 2002 16:28:06 +0100"  >Socket.connect(SocketAddress, int) is a JDK 1.4 feature and as such not feasible&lt;br/&gt;
from within HttpClient as we need to be 1.3 compatible.&lt;br/&gt;
&lt;br/&gt;
I suggest we realize a timeout at the HttpConnection level which is configurable&lt;br/&gt;
at construction time.&lt;br/&gt;
&lt;br/&gt;
Setting prio to high as this is a frequently requested feature. Changing summary.</comment>
                    <comment id="12379521" author="oglueck" created="Tue, 12 Nov 2002 18:07:31 +0000"  >Created an attachment (id=3815)&lt;br/&gt;
adds connection timeout. applied 2002-11-12 11h CET&lt;br/&gt;
</comment>
                    <comment id="12379522" author="oglueck" created="Tue, 12 Nov 2002 18:08:30 +0000"  >Created an attachment (id=3816)&lt;br/&gt;
New File (part of patch)&lt;br/&gt;
</comment>
                </comments>
                    <attachments>
                    <attachment id="12326661" name="ASF.LICENSE.NOT.GRANTED--patch.diff" size="38384" author="oglueck" created="Tue, 12 Nov 2002 18:07:31 +0000" />
                    <attachment id="12326662" name="ASF.LICENSE.NOT.GRANTED--TimeoutController.java" size="5061" author="oglueck" created="Tue, 12 Nov 2002 18:08:30 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10973</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 22 Oct 2002 15:28:06 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133132</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>188768</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>