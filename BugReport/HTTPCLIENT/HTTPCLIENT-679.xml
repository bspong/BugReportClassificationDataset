<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:19:56 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-679/HTTPCLIENT-679.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-679] URI Absolutization does not follow browser behavior</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-679</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>This was encountered using Heritrix to crawl a prominent website.&lt;br/&gt;
&lt;br/&gt;
The URI resulting from the HttpClient URI constructor (base, relative) does not follow browser behavior:&lt;br/&gt;
URI newUrl = new URI(new URI(&amp;quot;&lt;a href=&quot;http://www.theirwebsite.com/browse/results?type=browse&amp;att=1&quot;&gt;http://www.theirwebsite.com/browse/results?type=browse&amp;amp;att=1&lt;/a&gt;&amp;quot;), &amp;quot;?sort=0&amp;amp;offset=11&amp;amp;pageSize=10&amp;quot;)&lt;br/&gt;
&lt;br/&gt;
Results in newUrl:&lt;br/&gt;
&lt;a href=&quot;http://www.theirwebsite.com/browse/?sort=0&amp;offset=11&amp;pageSize=10&quot;&gt;http://www.theirwebsite.com/browse/?sort=0&amp;amp;offset=11&amp;amp;pageSize=10&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The desired behavior based on Firefox and IE should be:&lt;br/&gt;
&lt;a href=&quot;http://www.theirwebsite.com/browse/results?sort=0&amp;offset=11&amp;pageSize=10&quot;&gt;http://www.theirwebsite.com/browse/results?sort=0&amp;amp;offset=11&amp;amp;pageSize=10&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
These browsers treat the question mark similar to a directory separator and do not require a file to be specified before the query.&lt;br/&gt;
&lt;br/&gt;
HttpClient&amp;#39;s current behavior does not correspond to current browser behavior and leads to an inability to crawl certain websites if HttpClient&amp;#39;s URI class is used.&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment>HttpClient 3.1 RC1, &lt;br/&gt;
JDK 1.6.0&lt;br/&gt;
Ubuntu 7.04</environment>
            <key id="12375310">HTTPCLIENT-679</key>
            <summary>URI Absolutization does not follow browser behavior</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="destroyr2">Jeff Dalton</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2007 16:57:55 +0100</created>
                <updated>Sun, 11 Nov 2007 19:14:59 +0000</updated>
                    <resolved>Sat, 11 Aug 2007 21:52:53 +0100</resolved>
                            <version>3.1 RC1</version>
                                <fixVersion>3.1 (end of life)</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12517586" author="gojomo" created="Fri, 3 Aug 2007 18:11:32 +0100"  >Notably, the browsers are following RFC3986. Taking an example from RFC3986 section 5.4.1 (&amp;quot;Normal Examples&amp;quot;):&lt;br/&gt;
&lt;br/&gt;
URI uri = new URI(new URI(&amp;quot;&lt;a href=&quot;http://a/b/c/d;p?q&quot;&gt;http://a/b/c/d;p?q&lt;/a&gt;&amp;quot;), &amp;quot;?y&amp;quot;);&lt;br/&gt;
uri.toString(); // is &amp;quot;&lt;a href=&quot;http://a/b/c/?y&quot;&gt;http://a/b/c/?y&lt;/a&gt;&amp;quot;; by RFC3986 should be &amp;quot;&lt;a href=&quot;http://a/b/c/d;p?y&quot;&gt;http://a/b/c/d;p?y&lt;/a&gt;&amp;quot;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12517762" author="olegk" created="Sun, 5 Aug 2007 13:20:17 +0100"  >Jeff, Gordon,&lt;br/&gt;
&lt;br/&gt;
URI class in HttpClient 3.x is a complete mess none of the existing committers would touch even with a barge pole. This class has been replaced with the standard java.net.URI class in HttpClient 4.0. If you are prepared to contribute a fix for the problem I&amp;#39;ll happily review it and check it to the repository, but I seriously doubt any of us would be willing to invest any time into fixing old URI code in HttpClient 3.x. &lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12517960" author="rolandw" created="Mon, 6 Aug 2007 16:03:41 +0100"  >Actually, the suggested change has potential to break existing applications that rely on the current behavior. We can&amp;#39;t introduce such changes between RC1 and final, unless there would be an easy way to switch back to the current behavior.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12518323" author="destroyr2" created="Wed, 8 Aug 2007 04:28:18 +0100"  >Wow, that class is a steaming pile.  It&amp;#39;s a miracle it works as well as it does.&lt;br/&gt;
&lt;br/&gt;
Regardless, for now it is easier to fix HTTPClient than to change Heritrix over to use the java.net class (which has its own bugs to be worked around).  &lt;br/&gt;
&lt;br/&gt;
Here is a patch for the URI class that changes it to follow the RFC behavior in this case.  I have updated the URI class and the corresponding test to follow the RFC.  &lt;br/&gt;
&lt;br/&gt;
Oleg, it would be great if you could review this.&lt;br/&gt;
&lt;br/&gt;
Roland, I firmly believe that it is better to fix a major bug that violates a basic case in the RFC than to not fix it and release a final version with a major flaw.  Feel free to add a switch to make it backwards compatible, if this is a hard requirement.</comment>
                    <comment id="12518364" author="oglueck" created="Wed, 8 Aug 2007 08:37:11 +0100"  >Roland,&lt;br/&gt;
&lt;br/&gt;
In my opinion this is such a corner case that has hardly any relevance in the real world. I doubt that anybody else than Jeff is affected by the change. Fine for me to check this in.&lt;br/&gt;
&lt;br/&gt;
Ortwin</comment>
                    <comment id="12518384" author="olegk" created="Wed, 8 Aug 2007 09:25:04 +0100"  >The fix looks reasonable to me. If I hear no complaints I&amp;#39;ll check it in later this week&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12519270" author="olegk" created="Sat, 11 Aug 2007 21:52:53 +0100"  >Patch checked in&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12363379" name="uri_fix.patch" size="2265" author="destroyr2" created="Wed, 8 Aug 2007 04:28:18 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 3 Aug 2007 17:11:32 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133717</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47820</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>