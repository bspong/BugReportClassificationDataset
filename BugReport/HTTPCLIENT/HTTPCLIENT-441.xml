<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:17:29 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-441/HTTPCLIENT-441.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-441] Cookie.java hashCode method violates contract</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-441</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>org.apache.commons.httpclient.Cookie hashCode() does not meet object.hashCode&lt;br/&gt;
() contract.  Cookie.hashCode() returns different values even though data used &lt;br/&gt;
in equals() comparison is the same.&lt;br/&gt;
&lt;br/&gt;
Contract:**Whenever it is invoked on the same object more than once during an &lt;br/&gt;
execution of a Java application, the hashCode method must consistently return &lt;br/&gt;
the same integer, provided no information used in equals comparisons on the &lt;br/&gt;
object is modified.**&lt;br/&gt;
&lt;br/&gt;
Breaks use of cookie within collections such as when using contains().&lt;br/&gt;
&lt;br/&gt;
Traced problem back to parent class NameValuePair.  Cookie.hashCode() calls &lt;br/&gt;
NameValuePair.hashCode() which relies on name/value hashes.  Cookie does not &lt;br/&gt;
rely on value to determine equality.</description>
                <environment>Operating System: Windows XP&lt;br/&gt;
Platform: PC</environment>
            <key id="12334000">HTTPCLIENT-441</key>
            <summary>Cookie.java hashCode method violates contract</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="chiao@chiaocheng.com">Chiao Cheng</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Mar 2005 21:47:24 +0000</created>
                <updated>Wed, 16 Feb 2011 20:44:36 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:10:59 +0100</resolved>
                            <version>2.0.2</version>
                                <fixVersion>2.0.3</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382201" author="chiao@chiaocheng.com" created="Sun, 13 Mar 2005 21:51:04 +0000"  >Created an attachment (id=14478)&lt;br/&gt;
simple demonstration of equals and hashcode&lt;br/&gt;
</comment>
                    <comment id="12382202" author="olegk" created="Mon, 14 Mar 2005 02:04:02 +0000"  >Created an attachment (id=14480)&lt;br/&gt;
Patch against Commons HttpClient trunk (HttpClient 3.0)&lt;br/&gt;
&lt;br/&gt;
I reviewed all the classes in HttpClient 3.0 with regards to their compliance&lt;br/&gt;
with the Object#hashCode/Object#equals best practices and made changes that&lt;br/&gt;
were necessary to ensure compliance. I&amp;#39;ll back port the patch to HttpClient 2.x&lt;br/&gt;
branch once it gets reviewed and committed to the SVN trunk. &lt;br/&gt;
&lt;br/&gt;
Let me know what you think&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382203" author="chiao@chiaocheng.com" created="Mon, 14 Mar 2005 08:20:54 +0000"  >Curious...&lt;br/&gt;
&lt;br/&gt;
+            return LangUtils.equals(this.getName(), that.getName())&lt;br/&gt;
+                  &amp;amp;&amp;amp; LangUtils.equals(this.cookieDomain, that.cookieDomain)&lt;br/&gt;
+                  &amp;amp;&amp;amp; LangUtils.equals(this.cookiePath, that.cookiePath);&lt;br/&gt;
&lt;br/&gt;
Why access member variable directly with that.cookieDomain instead of using &lt;br/&gt;
accessor methods getDomain()?  Does current object have access to &lt;br/&gt;
that.cookieDomain?  I don&amp;#39;t understand completely but it looks like &lt;br/&gt;
cookieDomain is private.&lt;br/&gt;
&lt;br/&gt;
Same with that.cookiePath versus that.getPath().</comment>
                    <comment id="12382204" author="becke@u.washington.edu" created="Mon, 14 Mar 2005 12:03:28 +0000"  >Looks good to me.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12382205" author="olegk" created="Mon, 14 Mar 2005 17:27:21 +0000"  >&amp;gt; Why access member variable directly with that.cookieDomain instead of using&lt;br/&gt;
&amp;gt; accessor methods getDomain()?  &lt;br/&gt;
&lt;br/&gt;
What would be benefits of doing otherwise?&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Does current object have access to that.cookieDomain?  &lt;br/&gt;
&lt;br/&gt;
Yes, it does, because &amp;quot;that&amp;quot; is an instance of the same class&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382206" author="chiao@chiaocheng.com" created="Tue, 15 Mar 2005 04:37:15 +0000"  >(In reply to comment #5)&lt;br/&gt;
&amp;gt; &amp;gt; Why access member variable directly with that.cookieDomain instead of using&lt;br/&gt;
&amp;gt; &amp;gt; accessor methods getDomain()?  &lt;br/&gt;
&amp;gt; What would be benefits of doing otherwise?&lt;br/&gt;
&amp;gt; &amp;gt; Does current object have access to that.cookieDomain?  &lt;br/&gt;
&amp;gt; Yes, it does, because &amp;quot;that&amp;quot; is an instance of the same class&lt;br/&gt;
&lt;br/&gt;
Cool.  No benefit I guess.  I was just curious and wanted to know for my self-&lt;br/&gt;
education.  Thanks for the answers!&lt;br/&gt;
</comment>
                    <comment id="12382207" author="olegk" created="Tue, 15 Mar 2005 06:02:00 +0000"  >Patch committed to SVN trunk &amp;amp; 2.0 branch.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382208" author="oglueck" created="Tue, 15 Mar 2005 17:30:19 +0000"  >Chiao,&lt;br/&gt;
&lt;br/&gt;
Bloch&amp;#39;s &amp;quot;Effective Java&amp;quot; (Addison Wesley) on how to implement hashCode and&lt;br/&gt;
equals may be of interest to you.&lt;br/&gt;
&lt;br/&gt;
Ortwin Gl&amp;#xFC;ck</comment>
                    <comment id="12382209" author="chiao@chiaocheng.com" created="Fri, 10 Feb 2006 18:34:32 +0000"  >I was reading your recommended book &amp;quot;effective java&amp;quot;, specifically chapter &lt;br/&gt;
3 &amp;quot;obey the general contract when overriding equals&amp;quot;.  The following statement &lt;br/&gt;
caught my attention...&lt;br/&gt;
&lt;br/&gt;
&amp;quot;There is simply no way to extend an instantiable class and add an aspect &lt;br/&gt;
while preserving the equals contract.&amp;quot;&lt;br/&gt;
&lt;br/&gt;
After looking over his Point/ColorPoint example carefully, it appears that &lt;br/&gt;
this Cookie class is very similar.  And thus has a similar violation of the &lt;br/&gt;
equals contract?&lt;br/&gt;
&lt;br/&gt;
NameValuePair pair = new NameValuePair(&amp;quot;test&amp;quot;,&amp;quot;blank&amp;quot;);&lt;br/&gt;
Cookie c = new Cookie(&amp;quot;blah.com&amp;quot;, &amp;quot;test&amp;quot;,&amp;quot;blank&amp;quot;);&lt;br/&gt;
&lt;br/&gt;
pair.equals(c) --&amp;gt; true;&lt;br/&gt;
c.equals(pair) --&amp;gt; false;&lt;br/&gt;
&lt;br/&gt;
This seems to break the symmetry portion of the equals contract.</comment>
                </comments>
                    <attachments>
                    <attachment id="12327207" name="ASF.LICENSE.NOT.GRANTED--CookieTest.java" size="559" author="chiao@chiaocheng.com" created="Sun, 13 Mar 2005 21:51:04 +0000" />
                    <attachment id="12327208" name="ASF.LICENSE.NOT.GRANTED--hashcode.patch" size="13352" author="olegk" created="Mon, 14 Mar 2005 02:04:02 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>33988</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 14 Mar 2005 02:04:02 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133488</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47151</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>