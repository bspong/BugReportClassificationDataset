<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:18:36 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-547/HTTPCLIENT-547.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-547] Provide access to port of Host header</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-547</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>We use a load balancer that connects to the HTTP server and the HTTP server&lt;br/&gt;
connects to the application server. We use port translation in our load&lt;br/&gt;
balancer. So when e.g. a client connects to 90 of the load balancer, the load&lt;br/&gt;
balancer connects to port 100 of the HTTP server. The load balancer doesn&amp;#39;t&lt;br/&gt;
change the Host request header, so in the host request header is still the&lt;br/&gt;
original virtual host name and port, in this case port 90. For this reason, the&lt;br/&gt;
virtual hosts of the HTTP server and application server are configured based on&lt;br/&gt;
the external port numbers, so in this case port 90.&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
For test purposes, we sometimes want to connect directly to the HTTP server or&lt;br/&gt;
the application server, bypassing the load balancer. To do this, we need to&lt;br/&gt;
connect to the same port as the load balancer would, in this example port 100,&lt;br/&gt;
but the host header of this request should be the same as if the request would&lt;br/&gt;
go through the load balancer, so in this example port 90, because the HTTP&lt;br/&gt;
server and application server&amp;#39;s virtual hosts are configured for this port.&lt;br/&gt;
&lt;br/&gt;
The attached patch adds the possibility to specify the port number for virtual&lt;br/&gt;
hosts.&lt;br/&gt;
&lt;br/&gt;
Here&amp;#39;s a code snippet that uses the patched code:&lt;br/&gt;
&lt;br/&gt;
HttpClient httpClient = new HttpClient();&lt;br/&gt;
HttpMethod method = new GetMethod();&lt;br/&gt;
HostConfiguration hostConfiguration = new HostConfiguration();&lt;br/&gt;
hostConfiguration.setHost(&amp;quot;localhost&amp;quot;, 80, &amp;quot;http&amp;quot;);&lt;br/&gt;
HostParams params = new HostParams();&lt;br/&gt;
params.setVirtualHost(&amp;quot;localhost&amp;quot;);&lt;br/&gt;
params.setVirtualHostPort(100);&lt;br/&gt;
hostConfiguration.setParams(params);&lt;br/&gt;
httpClient.executeMethod(hostConfiguration, method);&lt;br/&gt;
System.out.println(method.getResponseBodyAsString());&lt;br/&gt;
method.releaseConnection();</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12334106">HTTPCLIENT-547</key>
            <summary>Provide access to port of Host header</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="oglueck">Ortwin Gl&#252;ck</assignee>
                                <reporter username="oglueck">Ortwin Gl&#252;ck</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Jan 2006 23:23:02 +0000</created>
                <updated>Fri, 20 Jul 2007 19:36:10 +0100</updated>
                    <resolved>Mon, 21 May 2007 14:33:47 +0100</resolved>
                            <version>3.0 Final</version>
                                <fixVersion>4.0 Alpha 1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12383008" author="oglueck" created="Mon, 9 Jan 2006 23:23:43 +0000"  >Created an attachment (id=17372)&lt;br/&gt;
Patch by Jasper van Zandbeek&lt;br/&gt;
</comment>
                    <comment id="12383009" author="olegk" created="Sat, 6 May 2006 21:03:17 +0100"  >I respectfully remain -0.9 on this one. (just a bit short of vetoing it). Odi,&lt;br/&gt;
are you still planning to check this one in?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12383010" author="oglueck" created="Sat, 6 May 2006 21:13:53 +0100"  >Yes, I am 100% +1 for this. Even if this is a corner use case it is compliant&lt;br/&gt;
with the specs and something we should support.</comment>
                    <comment id="12383011" author="olegk" created="Sat, 6 May 2006 21:29:35 +0100"  >I do not want to start over that whole discussion whether this is spec compliant&lt;br/&gt;
or not. Please do, however, review the entire code base to make sure &amp;quot;virtual&amp;quot;&lt;br/&gt;
port value is used consistently with that of the virtual host. There is more&lt;br/&gt;
than a few occurrences where the virtual host value is being used, for instance&lt;br/&gt;
to look up credentials and cookies.&lt;br/&gt;
&lt;br/&gt;
Oleg </comment>
                    <comment id="12433416" author="olegk" created="Fri, 8 Sep 2006 16:02:11 +0100"  >Pushed to 4.0&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12497451" author="olegk" created="Mon, 21 May 2007 14:33:47 +0100"  >Implemented in SVN trunk&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327366" name="ASF.LICENSE.NOT.GRANTED--patchfile.txt" size="2872" author="oglueck" created="Mon, 9 Jan 2006 23:23:43 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>38196</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sat, 6 May 2006 20:03:17 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133591</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47880</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>