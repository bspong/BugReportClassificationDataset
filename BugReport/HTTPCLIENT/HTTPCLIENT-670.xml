<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:19:50 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-670/HTTPCLIENT-670.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-670] add an interface for plugable dns clients</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-670</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>Currently Httpclient implicitly uses InetAddress.getByName() for DNS resolution.&lt;br/&gt;
This has some drawbacks. One is that the DNS cache of Java per default caches entries forever.&lt;br/&gt;
&lt;br/&gt;
So I&amp;#39;d like to be able to replace InetAddress.getByName() with another DNS client implementation.&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12373964">HTTPCLIENT-670</key>
            <summary>add an interface for plugable dns clients</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="arminha">Armin H&#228;berling</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Jul 2007 09:02:05 +0100</created>
                <updated>Tue, 25 Jan 2011 10:58:38 +0000</updated>
                    <resolved>Thu, 22 May 2008 19:43:21 +0100</resolved>
                                            <fixVersion>4.0 Beta 1</fixVersion>
                                <component>HttpConn</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12513195" author="ralfhauser" created="Tue, 17 Jul 2007 10:49:27 +0100"  >Suggestion: add least add an abstract wrapper interface whose implementations either use the current getByName or do something smarter such as using dnsjava.org&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
if you were to use the implementation as is, I guess it is important to do something like &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;Security.setProperty(&amp;quot;networkaddress.cache.ttl&amp;quot;, &amp;quot;300&amp;quot;);&lt;br/&gt;
&lt;br/&gt;
otherwise, long running applications may reach the wrong physical servers if the dns servers changed the ip addresses while the application was running&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;see also &lt;a href=&quot;https://issues.apache.org/jira/browse/JAMES-679&quot; title=&quot;Make sure our container use an expiration for cached dns data&quot;&gt;&lt;strike&gt;JAMES-679&lt;/strike&gt;&lt;/a&gt;</comment>
                    <comment id="12513196" author="oglueck" created="Tue, 17 Jul 2007 11:03:01 +0100"  >-Dnetworkaddress.cache.ttl=60 definitely belongs into every server startup script, along with sensible values for heap / non-heap, DGC intervals etc. &lt;br/&gt;
&lt;br/&gt;
I don&amp;#39;t think we are going to introduce new interfaces or abstract classes in 3.x. However you can implement your own ProtocolSocketFactory that uses the DNS implementation of your choice.</comment>
                    <comment id="12513215" author="arminha" created="Tue, 17 Jul 2007 12:51:09 +0100"  >So are there any plans for such an interface in version 4.x? For me it would make sense take the DNS resolving out of the ProtocolSocketFactory, cause it&amp;#39;s an othogonal problem.&lt;br/&gt;
&lt;br/&gt;
For 3.x I think I will write a wrapper for the ProtocolSocketFactory and the SecureProtocolSocketFactory with my own DNS implemetation.&lt;br/&gt;
</comment>
                    <comment id="12513221" author="olegk" created="Tue, 17 Jul 2007 13:07:10 +0100"  >&amp;gt; So are there any plans for such an interface in version 4.x?&lt;br/&gt;
&lt;br/&gt;
HttpClient 4.0 has a much more modular architecture compared to HttpClient 3.x. There are several points where one could (fairly easily) inject such functionality: connection operator, connection manager, protocol socket factory. Probably connection operator interface is already perfectly sufficient. If not, we could add another interface specifically for DNS name to IP resolution.&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
&lt;br/&gt;
PS: Folks, generally, if you want something happen (or happen faster), the best way to go about it is rolling up your sleeves and getting it done yourself (by contributing a patch)</comment>
                    <comment id="12513327" author="heron" created="Tue, 17 Jul 2007 19:55:21 +0100"  >If you have access to the JVM and if it&amp;#39;s a Sun JVM, you can change the DNS provider directly. Check [1] on how to do that. I think the request still makes sense, but when changing the DNS provider directly, you don&amp;#39;t have to touch the code (never done it though, and I think they changed the SPI interface for 1.6 (very unfriendly, see bug at [2])).&lt;br/&gt;
&lt;br/&gt;
By the way, there&amp;#39;s a way on Sun VMs to set the TTL as a commandline option [3].&lt;br/&gt;
&lt;br/&gt;
Hope that helps...&lt;br/&gt;
&lt;br/&gt;
Cheers,&lt;br/&gt;
Daniel&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;http://www.dnsjava.org/dnsjava-current/doc/org/xbill/DNS/spi/DNSJavaNameService.html&quot;&gt;http://www.dnsjava.org/dnsjava-current/doc/org/xbill/DNS/spi/DNSJavaNameService.html&lt;/a&gt;&lt;br/&gt;
[2] &lt;a href=&quot;http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1702231&amp;group_id=18000&amp;atid=118000&quot;&gt;http://sourceforge.net/tracker/index.php?func=detail&amp;amp;aid=1702231&amp;amp;group_id=18000&amp;amp;atid=118000&lt;/a&gt;&lt;br/&gt;
[3] &lt;a href=&quot;http://www.rgagnon.com/javadetails/java-0445.html&quot;&gt;http://www.rgagnon.com/javadetails/java-0445.html&lt;/a&gt;</comment>
                    <comment id="12513467" author="ralfhauser" created="Wed, 18 Jul 2007 08:54:48 +0100"  >Daniel, thx for the interesting hints. Unfortunately, we do plan to use it also with 1.6.&lt;br/&gt;
&lt;br/&gt;
also, as per your ref[1], that sun.net.spi.nameservice.NameService interface only has a &lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;byte[][] 	lookupAllHostAddr(String host) &lt;br/&gt;
&lt;br/&gt;
method, while InetAddress.getByName() doesn&amp;#39;t expect multiple responses - haven&amp;#39;t looked at the implementation details - will it just return the first if there are multiple ? Interestingly, &lt;a href=&quot;http://java.sun.com/j2se/1.5.0/docs/api/java/net/InetAddress.html#getByName(java.lang.String)&quot;&gt;http://java.sun.com/j2se/1.5.0/docs/api/java/net/InetAddress.html#getByName(java.lang.String)&lt;/a&gt; doesn&amp;#39;t mention the possiblity that there are multiple numeric address for one mnemonic one.</comment>
                    <comment id="12513546" author="ralfhauser" created="Wed, 18 Jul 2007 13:33:09 +0100"  >ok, the below probably answers my previous issue - getAllByName0 probably uses lookupAllHostAddr()&lt;br/&gt;
&lt;br/&gt;
java.net.UnknownHostException: ns3.interway.ch:&lt;br/&gt;
ns3.interway.ch&lt;br/&gt;
	at java.net.InetAddress.getAllByName0(Unknown Source)&lt;br/&gt;
	at java.net.InetAddress.getAllByName0(Unknown Source)&lt;br/&gt;
	at java.net.InetAddress.getAllByName(Unknown Source)&lt;br/&gt;
	at java.net.InetAddress.getByName(Unknown Source)&lt;br/&gt;
	at org.xbill.DNS.SimpleResolver.&amp;lt;init&amp;gt;(SimpleResolver.java:56)&lt;br/&gt;
	at org.xbill.DNS.ExtendedResolver.&amp;lt;init&amp;gt;(ExtendedResolver.java:281)</comment>
                    <comment id="12599115" author="olegk" created="Thu, 22 May 2008 19:43:21 +0100"  >Implemented in SVN trunk&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 17 Jul 2007 09:49:27 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133708</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47468</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>