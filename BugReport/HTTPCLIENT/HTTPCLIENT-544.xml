<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:18:34 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-544/HTTPCLIENT-544.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-544] Digest auth uses incorrect URI</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-544</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>This bug seems to be strongly related to #36918. But in this case, I don&amp;#39;t have &lt;br/&gt;
proxy and it is GET method.&lt;br/&gt;
&lt;br/&gt;
The problem is that when a GET request with query parameters is sent to the &lt;br/&gt;
server, uri does not count in the parameters.  The server (Apache 1.3) then &lt;br/&gt;
responds with HTTP/1.1 400 Bad Request. In the error log, the server writes:  &lt;br/&gt;
Digest: uri mismatch - &amp;lt;/query.cgi&amp;gt; does not match request-uri &lt;br/&gt;
&amp;lt;/query.cgi?format=advanced&amp;amp;js=1&amp;amp;rememberjs=1&amp;gt;&lt;br/&gt;
&lt;br/&gt;
As far as I can tell, the problem is with the following line of code:&lt;br/&gt;
------------ cut DigestScheme.java&lt;br/&gt;
public String authenticate(Credentials credentials, HttpMethod method)&lt;br/&gt;
....&lt;br/&gt;
getParameters().put(&amp;quot;uri&amp;quot;, method.getPath());&lt;br/&gt;
....&lt;br/&gt;
------------ cut&lt;br/&gt;
&lt;br/&gt;
I am inclined to quick-hack this and add method.getQueryString() to the uri; &lt;br/&gt;
but to make it right it probably needs some refactoring, esp. considering issue &lt;br/&gt;
#36918.</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: All</environment>
            <key id="12334103">HTTPCLIENT-544</key>
            <summary>Digest auth uses incorrect URI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="src@almworks.com">Igor Sereda</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Dec 2005 03:18:06 +0000</created>
                <updated>Wed, 16 Feb 2011 20:43:42 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:11:13 +0100</resolved>
                            <version>3.0 Final</version>
                                <fixVersion>3.0.1</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382992" author="olegk" created="Tue, 27 Dec 2005 05:44:42 +0000"  >Igor,&lt;br/&gt;
Please attach a wire/context log of the HTTP session that exhibits the problem.&lt;br/&gt;
The relevant extracts from the Apache HTTPD log would help as well.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382993" author="src@almworks.com" created="Tue, 27 Dec 2005 07:40:18 +0000"  >Created an attachment (id=17276)&lt;br/&gt;
http client log (look for &amp;quot;400 Bad Request&amp;quot;)&lt;br/&gt;
</comment>
                    <comment id="12382994" author="src@almworks.com" created="Tue, 27 Dec 2005 07:40:43 +0000"  >Created an attachment (id=17277)&lt;br/&gt;
extract from server access log&lt;br/&gt;
</comment>
                    <comment id="12382995" author="src@almworks.com" created="Tue, 27 Dec 2005 07:41:10 +0000"  >Created an attachment (id=17278)&lt;br/&gt;
extract from server error log&lt;br/&gt;
</comment>
                    <comment id="12382996" author="olegk" created="Tue, 27 Dec 2005 22:39:05 +0000"  >Created an attachment (id=17284)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
&lt;br/&gt;
I doubt we can do much about it. The proposed fix, admittedly hackish, seems&lt;br/&gt;
the way to go for 3.x series. HttpClient 4.0 based on HttpComponents is not&lt;br/&gt;
affected by this problem as it will have a radically different architecture&lt;br/&gt;
&lt;br/&gt;
Please review and comment&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382997" author="src@almworks.com" created="Wed, 28 Dec 2005 18:34:49 +0000"  >The patch works, thanks! &lt;br/&gt;
Good luck with 4.0!&lt;br/&gt;
&lt;br/&gt;
Igor</comment>
                    <comment id="12382998" author="oglueck" created="Sun, 8 Jan 2006 00:43:24 +0000"  >replace &lt;br/&gt;
&amp;nbsp;&amp;nbsp;if (query.indexOf(&amp;quot;?&amp;quot;) != 0) {&lt;br/&gt;
with&lt;br/&gt;
&amp;nbsp;&amp;nbsp;if (query.charAt(0) != &amp;#39;?&amp;#39;)&lt;br/&gt;
&lt;br/&gt;
otherwise fine with me</comment>
                    <comment id="12382999" author="olegk" created="Sun, 8 Jan 2006 01:01:20 +0000"  >(In reply to comment #7)&lt;br/&gt;
&amp;gt; replace &lt;br/&gt;
&amp;gt;   if (query.indexOf(&amp;quot;?&amp;quot;) != 0) {&lt;br/&gt;
&amp;gt; with&lt;br/&gt;
&amp;gt;   if (query.charAt(0) != &amp;#39;?&amp;#39;)&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; otherwise fine with me&lt;br/&gt;
&lt;br/&gt;
Odi,&lt;br/&gt;
Unfortunately this is needed to be in sync with&lt;br/&gt;
HttpMethodBase#generateRequestLine(). See&lt;br/&gt;
&lt;a href=&quot;http://jakarta.apache.org/commons/httpclient/xref/org/apache/commons/httpclient/HttpMethodBase.html#1408&quot;&gt;http://jakarta.apache.org/commons/httpclient/xref/org/apache/commons/httpclient/HttpMethodBase.html#1408&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12383000" author="becke@u.washington.edu" created="Sun, 8 Jan 2006 02:29:07 +0000"  >We could just change them both to:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;if (query.charAt(0) != &amp;#39;?&amp;#39;)&lt;br/&gt;
&lt;br/&gt;
Doesn&amp;#39;t really matter too much to me though.  Patch away.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12383001" author="oglueck" created="Sun, 8 Jan 2006 02:43:15 +0000"  >But be careful, if query.length()==0 it will throw an exception!</comment>
                    <comment id="12383002" author="olegk" created="Sun, 8 Jan 2006 02:57:03 +0000"  >My preference would be &lt;br/&gt;
&lt;br/&gt;
if (!query.startsWith(&amp;quot;?&amp;quot;))&lt;br/&gt;
...&lt;br/&gt;
&lt;br/&gt;
However, for the compatibility sake we probably should leave things as they are&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12383003" author="olegk" created="Fri, 13 Jan 2006 21:25:32 +0000"  >Patch checked in&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327363" name="ASF.LICENSE.NOT.GRANTED--access_log" size="309" author="src@almworks.com" created="Tue, 27 Dec 2005 07:40:43 +0000" />
                    <attachment id="12327365" name="ASF.LICENSE.NOT.GRANTED--digest.patch" size="2656" author="olegk" created="Tue, 27 Dec 2005 22:39:05 +0000" />
                    <attachment id="12327364" name="ASF.LICENSE.NOT.GRANTED--error_log" size="168" author="src@almworks.com" created="Tue, 27 Dec 2005 07:41:10 +0000" />
                    <attachment id="12327362" name="ASF.LICENSE.NOT.GRANTED--httpclient.log" size="31570" author="src@almworks.com" created="Tue, 27 Dec 2005 07:40:18 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>38043</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 27 Dec 2005 05:44:42 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133588</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47249</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>