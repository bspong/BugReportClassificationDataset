<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:17:51 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-472/HTTPCLIENT-472.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-472] No equals operation for Credentials implementations</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-472</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>I tripped across a scenario where I wanted to compare credentials, so I could&lt;br/&gt;
know to discard connection state (and thus any associated cookies).&lt;br/&gt;
&lt;br/&gt;
Patch to follow shortly.</description>
                <environment>Operating System: other&lt;br/&gt;
Platform: Other</environment>
            <key id="12334031">HTTPCLIENT-472</key>
            <summary>No equals operation for Credentials implementations</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="eric@tibco.com">Eric Johnson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jun 2005 10:52:49 +0100</created>
                <updated>Wed, 16 Feb 2011 20:45:09 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:11:03 +0100</resolved>
                            <version>3.0 RC2</version>
                                <fixVersion>3.0 RC4</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382420" author="eric@tibco.com" created="Wed, 15 Jun 2005 10:56:04 +0100"  >Created an attachment (id=15409)&lt;br/&gt;
Add equals and hashCode to Credentials implementations.&lt;br/&gt;
</comment>
                    <comment id="12382421" author="rolweber@de.ibm.com" created="Wed, 15 Jun 2005 17:13:36 +0100"  >Hello Eric,&lt;br/&gt;
&lt;br/&gt;
my first thought was that credentials should not be comparable, since that&lt;br/&gt;
might be a way for an attacker to obtain secret information. But since our&lt;br/&gt;
credentials return the password anyway, having an implementation for equals&lt;br/&gt;
really doesn&amp;#39;t harm.&lt;br/&gt;
&lt;br/&gt;
Code looks good to me. Maybe add a hint in the JavaDocs for equals() that&lt;br/&gt;
host name comparison is case sensitive? (I assume it is.)&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland&lt;br/&gt;
</comment>
                    <comment id="12382422" author="olegk" created="Wed, 15 Jun 2005 18:39:01 +0100"  >In case of NTCredentials I think the host, domain and possibly user name&lt;br/&gt;
comparison should be case insensitive&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382423" author="olegk" created="Wed, 15 Jun 2005 19:02:56 +0100"  >Created an attachment (id=15415)&lt;br/&gt;
Patch (NT user name, host and domain comparison is case insensitive)&lt;br/&gt;
&lt;br/&gt;
How about this?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382424" author="rolweber@de.ibm.com" created="Wed, 15 Jun 2005 20:58:14 +0100"  >Hi Oleg,&lt;br/&gt;
&lt;br/&gt;
functionally ok, but I just can&amp;#39;t stand creating temporary objects.&lt;br/&gt;
The toLowerCase() conversions in each call to hashCode or equals()&lt;br/&gt;
feel so wrong to me.&lt;br/&gt;
Converting the attributes automatically when the object is created&lt;br/&gt;
might catch some users unaware. Keeping a second set of attributes&lt;br/&gt;
in lower case just for comparison and hashcoding looks like the way&lt;br/&gt;
to go, but that probably isn&amp;#39;t done anywhere else in HttpClient.&lt;br/&gt;
&lt;br/&gt;
Erics version works as long as an application supplies credentials&lt;br/&gt;
in a consistent way. I kind of feel that should be good enough.&lt;br/&gt;
&lt;br/&gt;
cheers,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Roland</comment>
                    <comment id="12382425" author="olegk" created="Wed, 15 Jun 2005 21:25:04 +0100"  >Fair enough. The patch is fine with me &amp;quot;as is&amp;quot; as long as the fact of user name,&lt;br/&gt;
host and domain attributes being case sensitive is reflected in the javadoc for&lt;br/&gt;
#equals method&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382426" author="eric@tibco.com" created="Thu, 16 Jun 2005 03:25:34 +0100"  >Created an attachment (id=15421)&lt;br/&gt;
Updated version with Javadoc changes&lt;br/&gt;
&lt;br/&gt;
Javadoc updated as per comments.</comment>
                    <comment id="12382427" author="eric@tibco.com" created="Thu, 16 Jun 2005 03:40:25 +0100"  >You&amp;#39;re tough.  I went over my patch with a fine-toothed comb before I submitted&lt;br/&gt;
it, and you still found good points to discuss.  Another argument for the&lt;br/&gt;
case-sensitive version of the equals check - it seems odd to me to have&lt;br/&gt;
NTCredentials change the treatment of UsernamePasswordCredentials from&lt;br/&gt;
case-sensitive to case-insensitive.&lt;br/&gt;
&lt;br/&gt;
Different point:&lt;br/&gt;
UsernamePasswordCredentials upc = new UsernamePasswordCredentials(&amp;quot;n&amp;quot;, &amp;quot;p&amp;quot;);&lt;br/&gt;
NTCredentials ntc = new NTCredentials(&amp;quot;n&amp;quot;, &amp;quot;p&amp;quot;, &amp;quot;h&amp;quot;, &amp;quot;d&amp;quot;);&lt;br/&gt;
&lt;br/&gt;
using the above, you get the following with my patch:&lt;br/&gt;
upc.equals(ntc) --&amp;gt; true&lt;br/&gt;
ntc.equals(upc) --&amp;gt; false.&lt;br/&gt;
&lt;br/&gt;
What&amp;#39;s the best way to work around this?  Changing the test in &lt;br/&gt;
UsernamePasswordCredentials.equals(), so that it does&lt;br/&gt;
&amp;nbsp;o.getClass() == this.getClass()&lt;br/&gt;
&lt;br/&gt;
would work, but is that the best way?&lt;br/&gt;
</comment>
                    <comment id="12382428" author="olegk" created="Sun, 19 Jun 2005 20:34:04 +0100"  >(In reply to comment #8)&lt;br/&gt;
case-sensitive to case-insensitive.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; Different point:&lt;br/&gt;
&amp;gt; UsernamePasswordCredentials upc = new UsernamePasswordCredentials(&amp;quot;n&amp;quot;, &amp;quot;p&amp;quot;);&lt;br/&gt;
&amp;gt; NTCredentials ntc = new NTCredentials(&amp;quot;n&amp;quot;, &amp;quot;p&amp;quot;, &amp;quot;h&amp;quot;, &amp;quot;d&amp;quot;);&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; using the above, you get the following with my patch:&lt;br/&gt;
&amp;gt; upc.equals(ntc) --&amp;gt; true&lt;br/&gt;
&amp;gt; ntc.equals(upc) --&amp;gt; false.&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; What&amp;#39;s the best way to work around this?  Changing the test in &lt;br/&gt;
&amp;gt; UsernamePasswordCredentials.equals(), so that it does&lt;br/&gt;
&amp;gt;  o.getClass() == this.getClass()&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&amp;gt; would work, but is that the best way?&lt;br/&gt;
&amp;gt; &lt;br/&gt;
&lt;br/&gt;
Eric,&lt;br/&gt;
I think this problem cannot be fully solved by devising a very elaborate equals&lt;br/&gt;
method that works in all cases, because the concept of credentials equality can&lt;br/&gt;
be (often is) context dependent. Having a specific Comparator for a specific&lt;br/&gt;
context should be the way to go. &lt;br/&gt;
&lt;br/&gt;
I believe the patch is good to be checked in&lt;br/&gt;
&lt;br/&gt;
Oleg&lt;br/&gt;
</comment>
                    <comment id="12382429" author="olegk" created="Tue, 21 Jun 2005 03:43:02 +0100"  >Folks, any objections to committing this patch?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382430" author="olegk" created="Tue, 21 Jun 2005 18:19:48 +0100"  >Since Mike raised some objections on the dev mailing list, I think this issue&lt;br/&gt;
may need more time to be resolved. Targeted for RC4 pending more input&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382431" author="eric@tibco.com" created="Wed, 22 Jun 2005 02:30:00 +0100"  >Created an attachment (id=15501)&lt;br/&gt;
Made equals() commutative, added test cases&lt;br/&gt;
&lt;br/&gt;
One last try - Followed my own suggestion based on Mike&amp;#39;s feedback. Added test&lt;br/&gt;
cases.</comment>
                    <comment id="12382432" author="olegk" created="Wed, 22 Jun 2005 03:06:39 +0100"  >Eric,&lt;br/&gt;
Sorry about being such a pain. Should not we be doing if (o.getClass() ==&lt;br/&gt;
this.getClass()) in the NTCredentials#equals as well, at the very least for the&lt;br/&gt;
consistency sake, if nothing else?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382433" author="eric@tibco.com" created="Wed, 22 Jun 2005 05:06:52 +0100"  >I think that would just be extra code.  NTCredentials uses super.equals() to&lt;br/&gt;
invoke UsernamePasswordCredentials, which does the getClass() comparison.</comment>
                    <comment id="12382434" author="olegk" created="Wed, 22 Jun 2005 05:20:13 +0100"  >You are right. I missed that point. I am +1&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382435" author="becke@u.washington.edu" created="Wed, 22 Jun 2005 12:05:44 +0100"  >Works for me.&lt;br/&gt;
&lt;br/&gt;
Mike</comment>
                    <comment id="12382436" author="olegk" created="Thu, 23 Jun 2005 05:42:23 +0100"  >Patch committed.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                </comments>
                    <attachments>
                    <attachment id="12327251" name="ASF.LICENSE.NOT.GRANTED--credential.equals2.patch" size="4997" author="eric@tibco.com" created="Thu, 16 Jun 2005 03:25:34 +0100" />
                    <attachment id="12327252" name="ASF.LICENSE.NOT.GRANTED--credential.equals3.patch" size="5197" author="eric@tibco.com" created="Wed, 22 Jun 2005 02:30:00 +0100" />
                    <attachment id="12327249" name="ASF.LICENSE.NOT.GRANTED--credential.equals.patch" size="4949" author="eric@tibco.com" created="Wed, 15 Jun 2005 10:56:04 +0100" />
                    <attachment id="12327250" name="ASF.LICENSE.NOT.GRANTED--creds.patch" size="5191" author="olegk" created="Wed, 15 Jun 2005 19:02:56 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>35365</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 15 Jun 2005 16:13:36 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133519</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47064</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>