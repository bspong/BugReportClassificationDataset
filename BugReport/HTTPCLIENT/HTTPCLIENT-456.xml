<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Mon Jul 08 06:17:39 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/HTTPCLIENT-456/HTTPCLIENT-456.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[HTTPCLIENT-456] HttpClient should always override the host of HostConfiguration if an absolute request URI is given</title>
                <link>https://issues.apache.org/jira/browse/HTTPCLIENT-456</link>
                <project id="12310360" key="HTTPCLIENT">HttpComponents HttpClient</project>
                        <description>This bug most likely occurs on all patforms and OS&amp;#39;s, but I have only tested it&lt;br/&gt;
on WinXP.&lt;br/&gt;
&lt;br/&gt;
The HttpClient.executeMethod(HostConfiguration,HttpMethod,HttpState) will&lt;br/&gt;
receive and throw an IllegalArgumentException stating that &amp;quot;host parameter is&lt;br/&gt;
null&amp;quot; when a  HostConfiguration object is passed in that ONLY has a proxy set&lt;br/&gt;
(via HostConfiguration.setProxy(String, int)). Details to reproduce follow--the&lt;br/&gt;
bug can be easily reproduced by using the Apache Axis 1.2 CommonsHTTPSender&lt;br/&gt;
class (with JVM system props http.proxyHost, http.proxyPort set):&lt;br/&gt;
&lt;br/&gt;
There is a bug in the Apache Commons HTTP Client 3.0rc2 that does not set the&lt;br/&gt;
hostname property&lt;br/&gt;
in the &amp;lt;code&amp;gt;HostConfiguration&amp;lt;/code&amp;gt; object if the following two steps&lt;br/&gt;
are performed:&amp;lt;br&amp;gt;&lt;br/&gt;
1. You call&lt;br/&gt;
&amp;lt;code&amp;gt;HttpClient.executeMethod(HostConfiguration,HttpMethod,HttpState)&amp;lt;/code&amp;gt;&lt;br/&gt;
with a &amp;lt;code&amp;gt;HostConfiguration&amp;lt;/code&amp;gt; object and an &amp;lt;code&amp;gt;HttpMethod&amp;lt;/code&amp;gt; object&lt;br/&gt;
(created using the HttpMethod(String uri) constructor).This method &lt;br/&gt;
is called in this exact way in the Apache Axis 1.2 client&lt;br/&gt;
(CommonsHTTPSender.java lines 132 and 186).&amp;lt;br&amp;gt;&lt;br/&gt;
2. That &amp;lt;code&amp;gt;HostConfiguration&amp;lt;/code&amp;gt; object only has a proxy set (using&lt;br/&gt;
setProxy(String, int)). This method &lt;br/&gt;
is called in this exact way in the Apache Axis 1.2 client&lt;br/&gt;
(CommonsHTTPSender.java line 389).&amp;lt;br&amp;gt;&lt;br/&gt;
&lt;br/&gt;
Apache Axis 1.2rc3 CommonsHTTPSender.java did not expose this bug in Commons&lt;br/&gt;
HTTP Client 3.0rc2 because&lt;br/&gt;
it set the &amp;lt;code&amp;gt;HostConfiguration&amp;lt;/code&amp;gt; in a different manner, as follows:&amp;lt;br&amp;gt;&lt;br/&gt;
1. Call &amp;lt;code&amp;gt;HttpClient.setHostConfiguration(HostConfiguration)&amp;lt;/code&amp;gt; first.&lt;br/&gt;
Again,&lt;br/&gt;
The &amp;lt;code&amp;gt;HostConfiguration&amp;lt;/code&amp;gt; object must only have a proxy set and no host&lt;br/&gt;
name.&amp;lt;br&amp;gt;&lt;br/&gt;
2. Then call &amp;lt;code&amp;gt;HttpClient.executeMethod(HttpMethod)&amp;lt;/code&amp;gt;.&amp;lt;br&amp;gt;&lt;br/&gt;
&lt;br/&gt;
Using the above steps (as in Axis 1.2rc3 CommonsHTTPSender.java, invoke()&lt;br/&gt;
method), line 379 in HttpClient.java evaluates to true&lt;br/&gt;
because the argument &amp;lt;code&amp;gt;hostConfiguration&amp;lt;/code&amp;gt; is null (see line 324 in&lt;br/&gt;
HttpClient.java) and the local &lt;br/&gt;
variable &amp;lt;code&amp;gt;defaultHostConfiguration&amp;lt;/code&amp;gt; ==&lt;br/&gt;
&amp;lt;code&amp;gt;HttpClient.setHostConfiguration(HostConfiguration)&amp;lt;/code&amp;gt;&lt;br/&gt;
which was set in item #1 above. The hostname then gets set in the&lt;br/&gt;
&amp;lt;code&amp;gt;HostConfiguration&amp;lt;/code&amp;gt;&lt;br/&gt;
object in line 384 of HttpClient.java.</description>
                <environment>Operating System: All&lt;br/&gt;
Platform: PC</environment>
            <key id="12334015">HTTPCLIENT-456</key>
            <summary>HttpClient should always override the host of HostConfiguration if an absolute request URI is given</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jeff.hougentogler@gmail.com">Jeff Hougentogler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 May 2005 22:48:11 +0100</created>
                <updated>Wed, 16 Feb 2011 20:44:17 +0000</updated>
                    <resolved>Sun, 22 Apr 2007 08:11:01 +0100</resolved>
                            <version>3.0 RC2</version>
                                <fixVersion>3.0 RC3</fixVersion>
                                <component>HttpClient</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12382300" author="olegk" created="Mon, 9 May 2005 07:18:31 +0100"  >Jeff,&lt;br/&gt;
Can you provide a JUnit test case to reproduce the bug?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382301" author="jeff.hougentogler@gmail.com" created="Wed, 11 May 2005 04:23:07 +0100"  >Created an attachment (id=14984)&lt;br/&gt;
JUnit test case to reproduce &lt;a href=&quot;https://issues.apache.org/jira/browse/HTTPCLIENT-456&quot; title=&quot;HttpClient should always override the host of HostConfiguration if an absolute request URI is given&quot;&gt;&lt;strike&gt;HTTPCLIENT-456&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
Change line 40 to reflect the IP address and port number of your http proxy.&lt;br/&gt;
You will see no errors in the test if the bug is reproduced. Additional&lt;br/&gt;
information is printed to System.out during the test to confirm the presence of&lt;br/&gt;
the bug.</comment>
                    <comment id="12382302" author="olegk" created="Wed, 11 May 2005 05:57:15 +0100"  >Created an attachment (id=14988)&lt;br/&gt;
Patch (take 1)&lt;br/&gt;
&lt;br/&gt;
Jeff, could you please test the patch against SVN trunk in your environment and&lt;br/&gt;
let me know if it fixes the problem?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382303" author="jeff.hougentogler@gmail.com" created="Wed, 11 May 2005 22:55:49 +0100"  >Line 381 in HttpClient.java is still causing a problem (after applying the patch&lt;br/&gt;
against the SVN trunk):&lt;br/&gt;
hostconfig = new HostConfiguration(defhostconfig);&lt;br/&gt;
&lt;br/&gt;
If you re-run the JUnit test case in the attachments, it will come back with a&lt;br/&gt;
connection timeout on the executeMethod() call that is using a HostConfiguration&lt;br/&gt;
with a proxy set. This is because of line 381 making a copy of a default&lt;br/&gt;
HostConfiguration object with no proxy information set.&lt;br/&gt;
</comment>
                    <comment id="12382304" author="olegk" created="Thu, 12 May 2005 00:31:12 +0100"  >Created an attachment (id=14997)&lt;br/&gt;
Patch (take2)&lt;br/&gt;
&lt;br/&gt;
Same procedure. Could you please test the patch against the SVN trunk in your&lt;br/&gt;
environment and let me know if the problem still persists?&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382305" author="jeff.hougentogler@gmail.com" created="Thu, 12 May 2005 04:47:22 +0100"  >Now it works...excellent!&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12382306" author="olegk" created="Thu, 12 May 2005 05:22:59 +0100"  >Folks, please review. I&amp;#39;ll commit the patch in a few days unless someone complains&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382307" author="oglueck" created="Thu, 12 May 2005 17:56:23 +0100"  >Ran the test suite. Reviewd the code. Looks good to me.</comment>
                    <comment id="12382308" author="olegk" created="Fri, 13 May 2005 03:07:35 +0100"  >Patch committed.&lt;br/&gt;
&lt;br/&gt;
Oleg</comment>
                    <comment id="12382309" author="asf-bugzilla@tommym.net" created="Tue, 21 Mar 2006 21:37:58 +0000"  >The patches do not solve the problem. I tried with the most recent nightly build&lt;br/&gt;
of HttpClient. No luck. The process of getting from an URI to a HttpHost loses&lt;br/&gt;
the credentials.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve tried patching it myself, but this patch has a lot of impact.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12382310" author="asf-bugzilla@tommym.net" created="Tue, 21 Mar 2006 21:38:54 +0000"  >wrong bug... sorry</comment>
                </comments>
                    <attachments>
                    <attachment id="12327230" name="ASF.LICENSE.NOT.GRANTED--absolute-request-uri.patch" size="3692" author="olegk" created="Wed, 11 May 2005 05:57:15 +0100" />
                    <attachment id="12327231" name="ASF.LICENSE.NOT.GRANTED--hostconfig.patch" size="16385" author="olegk" created="Thu, 12 May 2005 00:31:12 +0100" />
                    <attachment id="12327229" name="ASF.LICENSE.NOT.GRANTED--HostnameBug.java" size="2991" author="jeff.hougentogler@gmail.com" created="Wed, 11 May 2005 04:23:07 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>34780</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 9 May 2005 06:18:31 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>133503</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>47179</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>