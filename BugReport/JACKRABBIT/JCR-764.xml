<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:59:45 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-764/JCR-764.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-764] PdfTextFilter may leave parsed document open in case of errors</title>
                <link>https://issues.apache.org/jira/browse/JCR-764</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>In case of errors in a parsed PDF document jackrabbit may fail to properly close the parsed document. PDFBox will write a stack trace to system out at finalize to warn agains this.&lt;br/&gt;
&lt;br/&gt;
this is the resulting log:&lt;br/&gt;
&lt;br/&gt;
WARN org.apache.jackrabbit.core.query.LazyReader LazyReader.java(read:82) 20.02.2007 15:42:50 exception initializing reader org.apache.jackrabbit.core.query.PdfTextFilter$1: java.io.IOException: Error: Expected hex number, actual=&amp;#39; 2&amp;#39;&lt;br/&gt;
java.lang.Throwable: Warning: You did not close the PDF Document&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.pdfbox.cos.COSDocument.finalize(COSDocument.java:384)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.lang.ref.Finalizer.invokeFinalizeMethod(Native Method)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.lang.ref.Finalizer.runFinalizer(Finalizer.java:83)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.lang.ref.Finalizer.access$100(Finalizer.java:14)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:160)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
this may happens because the parse() method at&lt;br/&gt;
&lt;br/&gt;
parser = new PDFParser(new BufferedInputStream(in));&lt;br/&gt;
parser.parse();&lt;br/&gt;
&lt;br/&gt;
immediately creates a document, but it can throw an exception while processing the file.&lt;br/&gt;
PdfTextFilter should check if parser still holds a document and close it appropriately.&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12363526">JCR-764</key>
            <summary>PdfTextFilter may leave parsed document open in case of errors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="fgiust">fabrizio giustina</reporter>
                        <labels>
                    </labels>
                <created>Fri, 23 Feb 2007 20:46:42 +0000</created>
                <updated>Fri, 9 Mar 2007 08:42:24 +0000</updated>
                    <resolved>Sun, 25 Feb 2007 13:44:55 +0000</resolved>
                            <version>1.0</version>
                <version>1.0.1</version>
                <version>1.1</version>
                <version>1.1.1</version>
                <version>1.2.1</version>
                <version>1.2.2</version>
                                <fixVersion>1.2.3</fixVersion>
                                <component>indexing</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12475493" author="fgiust" created="Fri, 23 Feb 2007 20:47:59 +0000"  >simple patch which adds an additional cleanup on exceptions.</comment>
                    <comment id="12475719" author="jukkaz" created="Sun, 25 Feb 2007 13:44:55 +0000"  >Patch applied to svn trunk in revision 511509 with some additional comments.&lt;br/&gt;
&lt;br/&gt;
The new PdfTextExtractor class already covered this case, but would have failed in case an IOException had been thrown by the cleanup process. In revision 511510 I added a catch for such cleanup exceptions.&lt;br/&gt;
&lt;br/&gt;
Thanks for the background work on this! To me it seems like this is really a PDFBox bug in that it fails to do proper cleanup in case an exception gets thrown. I&amp;#39;ll see if I can formulate a good bug report and a patch for PDFBox to avoid such workarounds in Jackrabbit.</comment>
                </comments>
                    <attachments>
                    <attachment id="12351917" name="textfilter_close.diff" size="2075" author="fgiust" created="Fri, 23 Feb 2007 20:47:58 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 25 Feb 2007 13:44:55 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>80413</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>252815</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>