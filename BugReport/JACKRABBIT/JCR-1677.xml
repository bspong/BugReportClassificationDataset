<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:49:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1677/JCR-1677.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1677] Allow workspace creation over cluster</title>
                <link>https://issues.apache.org/jira/browse/JCR-1677</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>When workspace is created on cluster node A and then node added to that workspace, the proper event is sent to the journal, but other cluster nodes are not able to process it because they don&amp;#39;t have the workspace.&lt;br/&gt;
&lt;br/&gt;
It would be nice to have a configuration option for the cluster to create such workspace automatically (instead of just logging an error)</description>
                <environment></environment>
            <key id="12400258">JCR-1677</key>
            <summary>Allow workspace creation over cluster</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="knopp">Matej Knopp</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Jul 2008 00:07:13 +0100</created>
                <updated>Mon, 8 Dec 2008 11:09:40 +0000</updated>
                    <resolved>Tue, 4 Nov 2008 13:02:50 +0000</resolved>
                                            <fixVersion>1.5</fixVersion>
                                <component>clustering</component>
                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>4</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12613490" author="knopp" created="Tue, 15 Jul 2008 00:43:27 +0100"  >Simple patch implementing the feature</comment>
                    <comment id="12613597" author="alexander.klimetschek" created="Tue, 15 Jul 2008 13:26:46 +0100"  >The patch looks good to me. Shall we include this for 1.5?</comment>
                    <comment id="12613606" author="knopp" created="Tue, 15 Jul 2008 14:21:49 +0100"  >The patch includes changes to checkstyle.xml, sorry about it, will commit new patch shortly.</comment>
                    <comment id="12613607" author="knopp" created="Tue, 15 Jul 2008 14:24:14 +0100"  >Removed checkstyle.xml from patch</comment>
                    <comment id="12637864" author="jukkaz" created="Wed, 8 Oct 2008 11:44:20 +0100"  >The patch assumes that the &amp;lt;Workspace/&amp;gt; configuration templates in the repository.xml configuration files on the different cluster nodes are essentially identical. It might be better to explicitly use the workspace.xml file that was used to create the workspace in the originating node.&lt;br/&gt;
&lt;br/&gt;
More generally, I think it would be better to handle this as an explicit createWorkspace() event in the cluster journal instead of implicitly creating new workspaces whenever cluster events referring to those workspaces are seen.</comment>
                    <comment id="12637991" author="ivaynberg" created="Wed, 8 Oct 2008 18:16:35 +0100"  >why not apply the patch as it is for 1.5 and fix it better in a later version?&lt;br/&gt;
&lt;br/&gt;
i think it is reasonable to assume that all nodes are using the same workspace.xml. usually all nodes in a cluster are configured the same way...&lt;br/&gt;
&lt;br/&gt;
this is also a blocker for us as far as taking our application into production.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12638091" author="jukkaz" created="Wed, 8 Oct 2008 22:16:32 +0100"  >&amp;gt; why not apply the patch as it is for 1.5 and fix it better in a later version?&lt;br/&gt;
&lt;br/&gt;
I don&amp;#39;t think that the current patch is a technically sound solution to this issue. Sure, it works in specific circumstances but it also fails miserably in others. There is also no reasonably backwards-compatible way of upgrading this feature to something better in future releases, so it would essentially be a one-off hack.&lt;br/&gt;
&lt;br/&gt;
Implementing this feature properly shouldn&amp;#39;t be too hard. See &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-699&quot; title=&quot;Clustering: re-registration of nodetypes is not  synchronized&quot;&gt;&lt;strike&gt;JCR-699&lt;/strike&gt;&lt;/a&gt; for an example on how this was done for node type registration.</comment>
                    <comment id="12638096" author="ivaynberg" created="Wed, 8 Oct 2008 22:30:25 +0100"  >not sure what is not technically sound about this. it makes an assumption that all workspace.xml files are the same which is a subset of the case when you make no such assumption....curious under which circumstances you would run a cluster of jackrabbit servers that have different workspace.xml definitions...&lt;br/&gt;
&lt;br/&gt;
anyways, i am curious why you removed 1.5 fix version, does it mean you no longer plan to support this functionality in 1.5 release?</comment>
                    <comment id="12638115" author="jukkaz" created="Wed, 8 Oct 2008 23:10:38 +0100"  >&amp;gt; not sure what is not technically sound about this.&lt;br/&gt;
&lt;br/&gt;
For example it conflicts with the JackrabbitWorkspace.createWorkspace(String, InputSource) method (see [1]).&lt;br/&gt;
&lt;br/&gt;
The reason why the &amp;lt;Workspace/&amp;gt; element in repository.xml is just the default template is to allow different workspace to be configured differently. Such non-uniform setups are actually fairly common (at least in deployments that I see).&lt;br/&gt;
&lt;br/&gt;
Of course the patch makes such clustered workspace creation optional, so one could argue that people with such non-uniform setups should just not enable this feature. But since implementing this feature properly for all sorts of setups is not really that much harder (the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-699&quot; title=&quot;Clustering: re-registration of nodetypes is not  synchronized&quot;&gt;&lt;strike&gt;JCR-699&lt;/strike&gt;&lt;/a&gt; was only twice as big as the current patch here), I would rather not opt for a partial fix that we&amp;#39;d then need to keep supporting for backwards compatibility reasons.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; i am curious why you removed 1.5 fix version&lt;br/&gt;
&lt;br/&gt;
See the 1.5 release plan updates on dev@. I plan to move forward with 1.5 already within the next few weeks and would rather postpone unfinished issues to 1.6.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;d like have this feature included already in 1.5, but only if we do it along the lines of &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-699&quot; title=&quot;Clustering: re-registration of nodetypes is not  synchronized&quot;&gt;&lt;strike&gt;JCR-699&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;http://jackrabbit.apache.org/api/1.4/org/apache/jackrabbit/api/JackrabbitWorkspace.html#createWorkspace(java.lang.String,&quot;&gt;http://jackrabbit.apache.org/api/1.4/org/apache/jackrabbit/api/JackrabbitWorkspace.html#createWorkspace(java.lang.String,&lt;/a&gt; org.xml.sax.InputSource)&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12638260" author="alexander.klimetschek" created="Thu, 9 Oct 2008 12:16:21 +0100"  >&amp;gt; For example it conflicts with the JackrabbitWorkspace.createWorkspace(String, InputSource) method (see [1]).&lt;br/&gt;
&lt;br/&gt;
&amp;gt; The reason why the &amp;lt;Workspace/&amp;gt; element in repository.xml is just the default template is to allow different workspace&lt;br/&gt;
&amp;gt; to be configured differently. Such non-uniform setups are actually fairly common (at least in deployments that I see). &lt;br/&gt;
&lt;br/&gt;
I agree with Jukka. My first patch analysis was faulty, supporting different workspace configurations is important.</comment>
                    <comment id="12639674" author="knopp" created="Wed, 15 Oct 2008 01:57:22 +0100"  >&amp;quot;Proper&amp;quot; patch that uses  workspace configuration from original node when creating workspaces across cluster</comment>
                    <comment id="12640189" author="knopp" created="Thu, 16 Oct 2008 16:30:54 +0100"  >Patch with corrected formatting and license headers</comment>
                    <comment id="12640253" author="jukkaz" created="Thu, 16 Oct 2008 19:27:15 +0100"  >Looks great, thanks! I&amp;#39;ll review the patch in more detail and try it out in practice later tonight.</comment>
                    <comment id="12644953" author="jukkaz" created="Tue, 4 Nov 2008 13:02:50 +0000"  >Patch applied in  revision 711238.&lt;br/&gt;
&lt;br/&gt;
I also created a test case for this functionality in sandbox/jackrabbit-test-harness/cluster.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310000">
                <name>Duplicate</name>
                                                <inwardlinks description="is duplicated by">
                            <issuelink>
            <issuekey id="12376028">JCR-1060</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12386021" name="patch-1677-1.txt" size="9337" author="knopp" created="Tue, 15 Jul 2008 00:43:27 +0100" />
                    <attachment id="12386054" name="patch-1677-2.txt" size="8165" author="knopp" created="Tue, 15 Jul 2008 14:24:14 +0100" />
                    <attachment id="12392152" name="patch-704324.txt" size="29710" author="knopp" created="Wed, 15 Oct 2008 01:57:22 +0100" />
                    <attachment id="12392253" name="patch-705243.txt" size="34751" author="knopp" created="Thu, 16 Oct 2008 16:30:53 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 15 Jul 2008 12:26:46 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142796</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190231</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>