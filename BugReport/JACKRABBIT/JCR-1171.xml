<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:42:51 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1171/JCR-1171.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1171] Contribute Pluggable Permission and User Management to Jackrabbit</title>
                <link>https://issues.apache.org/jira/browse/JCR-1171</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Working with a Jackrabbit based appliction I had to extend its security handling.&lt;br/&gt;
The aim of this extension has been to allow for a eitable resource based authorization.&lt;br/&gt;
The solution ended up in beeing plugable and extendable.&lt;br/&gt;
As there have been some questions in the Jackrabbit Developper-list about custom implementation of security or the management of privileges in Jackrabbit, I like to suggest my implementation as contribution with attached patches. &lt;br/&gt;
&lt;br/&gt;
Below you can find some high-level explanation of the contained files and concepts&lt;br/&gt;
&lt;br/&gt;
I hope the prove to be usable and enhance this great repository.&lt;br/&gt;
I welcome your feed-back and like to thank for your kind inspection&lt;br/&gt;
&lt;br/&gt;
Regards&lt;br/&gt;
Christian Keller&lt;br/&gt;
&lt;br/&gt;
The patch contains the following:&lt;br/&gt;
=========================&lt;br/&gt;
&lt;br/&gt;
1) API [jackrabbit-core-changes.20071010.patch]&lt;br/&gt;
-------------------------------------------------------------------&lt;br/&gt;
API which allows to implement and configure a mechanisms for Authentication and Authorization. &lt;br/&gt;
The API is ACL- and Principal-based.&lt;br/&gt;
ACL and Principals Management is independent of the JCR api, to allow implementations to use different back-end systems like a Directory Server.&lt;br/&gt;
&lt;br/&gt;
2) Changes to current core [jackrabbit-core-changes.20071010.patch]&lt;br/&gt;
-----------------------------------------------------------------------------------------------&lt;br/&gt;
Some small changes have been necessary to core to enable configuration and access of Management, like session access to UserManager.&lt;br/&gt;
&lt;br/&gt;
3) Implementation [jackrabbit-core-implementation.20071010.patch]&lt;br/&gt;
-----------------------------------------------------------------------------------------------&lt;br/&gt;
Additionally an implemenation is contained. It is not dependent on any back-end system, and may therefore be used as a default.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Description:&lt;br/&gt;
==========&lt;br/&gt;
The extensions hook into Jackrabbit bei implementations of the Intefaces: AccessManager and LoginModule. &lt;br/&gt;
Additionally there are changes for configuration, set-up and access of the used Object.&lt;br/&gt;
&lt;br/&gt;
The patch extends the API, in order to allow client inspections of Users and Permission. These are contained in the api.patch&lt;br/&gt;
&lt;br/&gt;
See a short Introduction below:&lt;br/&gt;
=========================&lt;br/&gt;
&lt;br/&gt;
The Security extensions of this Patch contain both, Authentication and Authorization extensions for which the follwoing two modells are introduced:&lt;br/&gt;
&lt;br/&gt;
I) The Authorizable&lt;br/&gt;
----------------------------&lt;br/&gt;
These are User&amp;#39;s and Groups of Users. Users can authenticate. &lt;br/&gt;
Authentication in Jackrabbit is done by LoginModules which issue Principals as result of an Authentication.&lt;br/&gt;
The Users are the objects which can be represented by such an Principal&lt;br/&gt;
They are therfore are the base for the Authorization.&lt;br/&gt;
&lt;br/&gt;
II) The ACL&lt;br/&gt;
----------------&lt;br/&gt;
The ACL is the Policy for Authorziation. &lt;br/&gt;
The ACL grants or denies a Principal Privileges which are called Actions.&lt;br/&gt;
&lt;br/&gt;
Additional ther is a Management for Principals:&lt;br/&gt;
&lt;br/&gt;
The Principal is the link between User and permission.&lt;br/&gt;
A User may related to multiple Principals. As this dependes on the LoginModules verfiying the Idendity of the login-attemp.&lt;br/&gt;
The LoginModules may expose their Principals to the Repository via a Provider interface, to allow for usage in ACEs.&lt;br/&gt;
&lt;br/&gt;
All Modells and their Managing Classes API&amp;#39;s are abstracted from the fact, that they are used in a JC-Repository. Aka there is no reference to javax.jcr.Items, Sessions etc.&lt;br/&gt;
This should allow to implement both for external sources for both without imposing any JCR specific methods. Taken an LDAP as UserBase for example.&lt;br/&gt;
&lt;br/&gt;
The managing classes are UserManger, PrincpalManager and ACLManager. &lt;br/&gt;
They are set-up and maintained by a repsoitory singular SecurityManger. &lt;br/&gt;
Session specific versions of this Managers are exposed via Session.&lt;br/&gt;
&lt;br/&gt;
PrincipalManger and ACLManger are feed by one to multiple Providers. &lt;br/&gt;
PrincipalProviders may exist per LoginModule, ACLProvider per Workspace.&lt;br/&gt;
&lt;br/&gt;
Authentication:&lt;br/&gt;
--------------------&lt;br/&gt;
The User will be used by the LoginModule. It will be resolved based on the given Credentials. If the Credentials can be validated, the User will be used to resolve Principals according its Group-Membership. As a result the Session&amp;#39;s Subject will be extended by this principals.&lt;br/&gt;
&lt;br/&gt;
Authorization:&lt;br/&gt;
-------------------&lt;br/&gt;
The ACL will be use be an Implementation of the AccessManager-Interface&lt;br/&gt;
An ACLManger relates Items to ACLs and the ACL evaluates the Permission for the current Subject&amp;#39;s Principals.&lt;br/&gt;
&lt;br/&gt;
Default Implementation&lt;br/&gt;
===================&lt;br/&gt;
The Default Implementation uses the Repository itself to store its security data.&lt;br/&gt;
The Users are stored within a dedicated workspace. &lt;br/&gt;
The ACL are attached to the Nodes they relate to.&lt;br/&gt;
The ACLs are inherited along the Item-Hierarchy.&lt;br/&gt;
The Principals are taken from the Authorables.&lt;br/&gt;
&lt;br/&gt;
Configuration&lt;br/&gt;
===========&lt;br/&gt;
The LoginModules may declare their PrincipalProvider class via a property key with the name &amp;quot;principal_provider.class&amp;quot;&lt;br/&gt;
&lt;br/&gt;
The Workspace specific ACL Providers may be added via a configuration element in Worskspace.xml, called WorkspaceSecurity.&lt;br/&gt;
A Factory class can be configured there.</description>
                <environment></environment>
            <key id="12380098">JCR-1171</key>
            <summary>Contribute Pluggable Permission and User Management to Jackrabbit</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="anchela">angela</assignee>
                                <reporter username="chrisk">christian</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Oct 2007 18:30:53 +0100</created>
                <updated>Mon, 8 Dec 2008 11:09:32 +0000</updated>
                    <resolved>Wed, 19 Mar 2008 15:46:09 +0000</resolved>
                            <version>1.4</version>
                                <fixVersion>1.5</fixVersion>
                                <component>security</component>
                        <due></due>
                    <votes>2</votes>
                        <watches>3</watches>
                                                    <comments>
                    <comment id="12533811" author="chrisk" created="Wed, 10 Oct 2007 18:32:09 +0100"  >security related extensions to api</comment>
                    <comment id="12533812" author="chrisk" created="Wed, 10 Oct 2007 18:33:10 +0100"  >changes to core necessary for adding security management</comment>
                    <comment id="12533813" author="chrisk" created="Wed, 10 Oct 2007 18:34:07 +0100"  >suggested implementation of User- and Permission-Management</comment>
                    <comment id="12533983" author="anchela" created="Thu, 11 Oct 2007 09:45:55 +0100"  >hi christian&lt;br/&gt;
&lt;br/&gt;
thanks a lot for that patches. from what i have seen so far (just taking a first glance at it), your work will fit quite nicely into the access control management as it is planned for jcr283, which i recently started to implemented for jackrabbit. &lt;br/&gt;
&lt;br/&gt;
the only that i just happen to see and that is not totally compatible with the jsr 283 access control are the&lt;br/&gt;
&amp;#39;actions&amp;#39;. In fact jsr283 uses the term actions for the general permission check on the Session interface&lt;br/&gt;
but for the access control discovery and management is defines &amp;#39;Privilege&amp;#39; (s). &lt;br/&gt;
And the actions are somewhat different from the predefined privileges. From what i&amp;#39;ve seen your are - in jsr 283 terms -dealing with privileges and i hope your are fine, if that&amp;#39;s going to change a bit once jackrabbit&lt;br/&gt;
is the jsr 283 reference implementation.&lt;br/&gt;
&lt;br/&gt;
more feedback to come as soon as i take a closer look at it.&lt;br/&gt;
thanks &amp;amp; gruss</comment>
                    <comment id="12534108" author="fmeschbe" created="Thu, 11 Oct 2007 19:04:05 +0100"  >In this case, I would strongly suggest to modifiy the patch to comply with JSR-283. I don&amp;#39;t think it would be a good idea to integrate it as is and later have to change a lot.&lt;br/&gt;
&lt;br/&gt;
Not sure, but would we have to vote on this contribution given its size ?</comment>
                    <comment id="12534116" author="anchela" created="Thu, 11 Oct 2007 19:36:08 +0100"  >hi felix,&lt;br/&gt;
&lt;br/&gt;
&amp;gt; In this case, I would strongly suggest to modifiy the patch to comply with JSR-283. &lt;br/&gt;
&amp;gt; I don&amp;#39;t think it would be a good idea to integrate it as is and later have to change a lot.&lt;br/&gt;
&lt;br/&gt;
from what i have seen at a first glance, i don&amp;#39;t think that there is need for lots of changes.&lt;br/&gt;
in any case i will update this issue as soon as i&amp;#39;m through and list all things, that would from my&lt;br/&gt;
point of view conflict with the jsr 283 access control section.&lt;br/&gt;
&lt;br/&gt;
be asserted that i don&amp;#39;t want to do the integration work twice :)&lt;br/&gt;
&lt;br/&gt;
angela</comment>
                    <comment id="12576286" author="anchela" created="Fri, 7 Mar 2008 17:31:50 +0000"  >unordered and incomplete list of notes and comments based on my recent work on JSR 283 security features.</comment>
                    <comment id="12580414" author="anchela" created="Wed, 19 Mar 2008 15:46:08 +0000"  >committed initial (incomplete) version</comment>
                    <comment id="12580415" author="anchela" created="Wed, 19 Mar 2008 15:46:37 +0000"  >scheduled for 1.5</comment>
                </comments>
                    <attachments>
                    <attachment id="12367499" name="jackrabbit-core-changes.20071010.patch" size="112302" author="chrisk" created="Wed, 10 Oct 2007 18:33:10 +0100" />
                    <attachment id="12367500" name="jackrabbit-core-implementation.20071010.patch" size="366678" author="chrisk" created="Wed, 10 Oct 2007 18:34:07 +0100" />
                    <attachment id="12367498" name="jackrabbit-security-api.20071010.patch" size="66957" author="chrisk" created="Wed, 10 Oct 2007 18:32:09 +0100" />
                    <attachment id="12377371" name="JCR-1171_comments_angela.txt" size="13813" author="anchela" created="Fri, 7 Mar 2008 17:31:50 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 11 Oct 2007 08:45:55 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142554</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279691</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>