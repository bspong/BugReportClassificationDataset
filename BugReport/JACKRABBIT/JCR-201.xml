<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:31:12 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-201/JCR-201.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-201] [contrib-bdb] initialization fails if directory doesn&apos;t exist</title>
                <link>https://issues.apache.org/jira/browse/JCR-201</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>BerkeleyDBPersistenceManager initialization fails if the directory configured doesn&amp;#39;t exist (this doesn&amp;#39;t happen with other PMs).&lt;br/&gt;
This can easily be fixed in the persistence manager, by making it create all the directories in the path (actually it only creates the last -db- directory).&lt;br/&gt;
&lt;br/&gt;
The trivial patch is to replace envDir.mkdir() to envDir.mkdirs() (note the final &amp;quot;s&amp;quot;) at BerkeleyDBPersistenceManager  line 73:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (!envDir.exists())&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;envDir.mkdir();&lt;br/&gt;
should be:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (!envDir.exists())&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;envDir.mkdirs();&lt;br/&gt;
&lt;br/&gt;
(I am not submitting any svn diff since the manual fix sounds so trivial, it&amp;#39;s easier to change it manually)&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12313908">JCR-201</key>
            <summary>[contrib-bdb] initialization fails if directory doesn&apos;t exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="edgarpoce">Edgar Poce</assignee>
                                <reporter username="fgiust">fabrizio giustina</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Aug 2005 23:48:02 +0100</created>
                <updated>Fri, 11 Nov 2005 01:48:45 +0000</updated>
                    <resolved>Mon, 29 Aug 2005 03:12:25 +0100</resolved>
                            <version>1.0</version>
                                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12320338" author="edgarpoce" created="Sun, 28 Aug 2005 16:35:57 +0100"  >&amp;gt; BerkeleyDBPersistenceManager initialization fails if the directory configured &lt;br/&gt;
&amp;gt; doesn&amp;#39;t exist (this doesn&amp;#39;t happen with other PMs). &lt;br/&gt;
&lt;br/&gt;
which configured directory? The path to /[repo home]/workspaces is created on repository startup, see RepositoryConfig.init(), and the workspace folder creation is resolved in RepositoryConfig.createWorkspaceConfig().&lt;br/&gt;
&lt;br/&gt;
So, the PM should be able to create a /[repo home]/workspaces/[workspace name]/db folder safely. Am I missing something? Could you provide details about how to reproduce the error?</comment>
                    <comment id="12320357" author="fgiust" created="Mon, 29 Aug 2005 02:05:03 +0100"  >This is the configuration for versioning I was using with ObjectPersistenceManager:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Versioning rootPath=&amp;quot;${rep.home}/version&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;FileSystem class=&amp;quot;org.apache.jackrabbit.core.fs.local.LocalFileSystem&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;path&amp;quot; value=&amp;quot;${rep.home}/workspaces/version&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/FileSystem&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;PersistenceManager class=&amp;quot;org.apache.jackrabbit.core.state.obj.ObjectPersistenceManager&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/Versioning&amp;gt;&lt;br/&gt;
&lt;br/&gt;
the &amp;quot;version&amp;quot; directory doesn&amp;#39;t exists, but it&amp;#39;s created by the PM at startup.&lt;br/&gt;
The same configuration, changing only the PM to BerkeleyDBPersistenceManager:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Versioning rootPath=&amp;quot;${rep.home}/version&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;FileSystem class=&amp;quot;org.apache.jackrabbit.core.fs.local.LocalFileSystem&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;path&amp;quot; value=&amp;quot;${rep.home}/workspaces/version&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/FileSystem&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;PersistenceManager class=&amp;quot;org.apache.jackrabbit.core.state.bdb.BerkeleyDBPersistenceManager&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/Versioning&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
This time the &amp;quot;version&amp;quot; directory is not created (the PM tries to create a &amp;quot;db&amp;quot; dir inside it and ignores the failure) and bdb throw an exception during initialization&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12320360" author="edgarpoce" created="Mon, 29 Aug 2005 03:12:25 +0100"  >Fixed as suggested, thanks fabrizio.</comment>
                    <comment id="12357258" author="stefan@jira" created="Fri, 11 Nov 2005 01:48:44 +0000"  >closing resolved issue</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 28 Aug 2005 15:35:57 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>80458</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>253455</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>