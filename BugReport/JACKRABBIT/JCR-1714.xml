<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:38:47 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1714/JCR-1714.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1714] QueryImpl result offSet must be considered after security class grant the item.</title>
                <link>https://issues.apache.org/jira/browse/JCR-1714</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>ackrabbit version is 1.4 (jackrabbit-core - 1.4.5).&lt;br/&gt;
I use searches with result limit and offset but it is working some wrong for my case.&lt;br/&gt;
Lets suppose the total of nodes that will return with the search:&lt;br/&gt;
&lt;br/&gt;
NAME      - GRANTACCESS -   OFFSET&lt;br/&gt;
node1     -     true                    - 0&lt;br/&gt;
node2     -     false                  -  1&lt;br/&gt;
node3     -     true                    - 2&lt;br/&gt;
node4     -     true                    - 3&lt;br/&gt;
node5     -     false                  -  4&lt;br/&gt;
&lt;br/&gt;
My page must have 2 records, so first I do a count for the search and get size of 3 records (after filtered by my security class invoked automatically by jackrabbit), so I have 2 pages to show to the user. The first page must return 2 records, of course, and the second must return 1 record.&lt;br/&gt;
&lt;br/&gt;
In the first search I do set:&lt;br/&gt;
QueryImp.setOffset(0);&lt;br/&gt;
QueryImpl.setLimit(2);&lt;br/&gt;
&lt;br/&gt;
So, I get the nodes 1 and 3, thats correct.&lt;br/&gt;
&lt;br/&gt;
In the second same search (for second page), I do set:&lt;br/&gt;
QueryImp.setOffset(2);&lt;br/&gt;
QueryImpl.setLimit(2);&lt;br/&gt;
&lt;br/&gt;
This way I pretend to get two records, starting from the record nro 3, which would be only the node4.&lt;br/&gt;
But, the result I got is node3 (again) and node4, because the offset worked not according to the grantacess (provided by the security class), but according to the sequence of the raw result.&lt;br/&gt;
&lt;br/&gt;
This offset have to start in the correct position, counting only the granted nodes returned by the security class.&lt;br/&gt;
Hope this make sense for you.&lt;br/&gt;
&lt;br/&gt;
Thanks.&lt;br/&gt;
Helio.</description>
                <environment>java6, jboss4, linux debian lenny.</environment>
            <key id="12401987">JCR-1714</key>
            <summary>QueryImpl result offSet must be considered after security class grant the item.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="hsp_">Helio</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Aug 2008 13:27:02 +0100</created>
                <updated>Thu, 22 Jan 2009 15:57:54 +0000</updated>
                    <resolved>Tue, 12 Aug 2008 14:05:08 +0100</resolved>
                            <version>core 1.4.5</version>
                                <fixVersion>1.5</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>2</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12621806" author="mreutegg" created="Tue, 12 Aug 2008 14:05:08 +0100"  >Fixed in revision: 685139</comment>
                    <comment id="12666185" author="jukkaz" created="Thu, 22 Jan 2009 15:57:54 +0000"  >Merging this to 1.4 seems non-trivial, so I&amp;#39;m leaving this to 1.5.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 12 Aug 2008 13:05:08 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78448</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190239</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>