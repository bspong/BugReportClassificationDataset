<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:29:37 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-491/JCR-491.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-491] TCK: PredefinedNodeTypeTest does not allow additions to the predefined node types hierarchy</title>
                <link>https://issues.apache.org/jira/browse/JCR-491</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>As explained in section 6.7.22.2 (page 147) of the JSR 170 specification, an implementation is allowed to customize a predefined noe type definition with additional supertypes. The tests in PredefinedNodeTypeTest do not account for that and expect an exact match with the predefined node types.</description>
                <environment>TCK from SVN revision 421925</environment>
            <key id="12346445">JCR-491</key>
            <summary>TCK: PredefinedNodeTypeTest does not allow additions to the predefined node types hierarchy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mreutegg">Marcel Reutegger</assignee>
                                <reporter username="npombourcq">Nicolas Pombourcq</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Jul 2006 17:39:50 +0100</created>
                <updated>Fri, 13 Oct 2006 17:03:22 +0100</updated>
                    <resolved>Thu, 27 Jul 2006 08:46:58 +0100</resolved>
                                            <fixVersion>1.1</fixVersion>
                                <component>test</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12423458" author="npombourcq" created="Tue, 25 Jul 2006 22:06:29 +0100"  >Proposal: change getNodeTypeSpec to omit additional supertypes.&lt;br/&gt;
&lt;br/&gt;
--- nodetype/PredefinedNodeTypeTest.java        (revision 422074)&lt;br/&gt;
+++ nodetype/PredefinedNodeTypeTest.java        (working copy)&lt;br/&gt;
@@ -254,17 +254,28 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private static String getNodeTypeSpec(NodeType type)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;throws RepositoryException {&lt;br/&gt;
+        String typeName = type.getName();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;StringWriter buffer = new StringWriter();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PrintWriter writer = new PrintWriter(buffer);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;writer.println(&amp;quot;NodeTypeName&amp;quot;);&lt;br/&gt;
-        writer.println(&amp;quot;  &amp;quot; + type.getName());&lt;br/&gt;
+        writer.println(&amp;quot;  &amp;quot; + typeName);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;writer.println(&amp;quot;Supertypes&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;NodeType[] supertypes = type.getDeclaredSupertypes();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;if (supertypes.length &amp;gt; 0) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Arrays.sort(supertypes, NODE_TYPE_COMPARATOR);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (int i = 0; i &amp;lt; supertypes.length; i++) {&lt;br/&gt;
-                writer.println(&amp;quot;  &amp;quot; + supertypes[i].getName());&lt;br/&gt;
+                String name = supertypes[i].getName();&lt;br/&gt;
+                if (name.startsWith(&amp;quot;nt:&amp;quot;) ||&lt;br/&gt;
+                    name.startsWith(&amp;quot;jcr:&amp;quot;) ||&lt;br/&gt;
+                    (name.equals(&amp;quot;mix:referenceable&amp;quot;) &amp;amp;&amp;amp;&lt;br/&gt;
+                     (typeName.equals(&amp;quot;mix:versionable&amp;quot;) ||&lt;br/&gt;
+                      typeName.equals(&amp;quot;nt:resource&amp;quot;) ||&lt;br/&gt;
+                      typeName.equals(&amp;quot;nt:versionHistory&amp;quot;) ||&lt;br/&gt;
+                      typeName.equals(&amp;quot;nt:version&amp;quot;) ||&lt;br/&gt;
+                      typeName.equals(&amp;quot;nt:frozenNode&amp;quot;)))) {&lt;br/&gt;
+                    writer.println(&amp;quot;  &amp;quot; + supertypes[i].getName());&lt;br/&gt;
+                }&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} else {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;writer.println(&amp;quot;  []&amp;quot;);&lt;br/&gt;
</comment>
                    <comment id="12423568" author="mreutegg" created="Wed, 26 Jul 2006 09:02:54 +0100"  >Hi Nicolas,&lt;br/&gt;
&lt;br/&gt;
Thank you for the proposal.&lt;br/&gt;
&lt;br/&gt;
The patch introduces a check for supertype names that have the prefix &amp;#39;jcr&amp;#39;. I don&amp;#39;t see why this is necessary. Afaik there are only predefined node types with prefixes &amp;#39;nt&amp;#39; and &amp;#39;mix&amp;#39;.&lt;br/&gt;
&lt;br/&gt;
Is this some kind of left over or why is it necessary?&lt;br/&gt;
&lt;br/&gt;
Other than that the patch looks fine.</comment>
                    <comment id="12423673" author="npombourcq" created="Wed, 26 Jul 2006 16:49:16 +0100"  >I have checked with David Pitfield who authored this patch and he agrees that the line you mention is not necessary.</comment>
                    <comment id="12423790" author="mreutegg" created="Thu, 27 Jul 2006 08:46:58 +0100"  >Fixed in revision: 425992</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 26 Jul 2006 08:02:54 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142200</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191110</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>