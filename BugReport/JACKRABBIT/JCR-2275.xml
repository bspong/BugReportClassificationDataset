<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:40:13 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2275/JCR-2275.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2275] some legal jcr names cause unneccessary server-roundtrips </title>
                <link>https://issues.apache.org/jira/browse/JCR-2275</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>assume the following legal qualified jcr names:&lt;br/&gt;
&lt;br/&gt;
&amp;quot;{foo}&amp;quot;&lt;br/&gt;
&amp;quot;{foo} bar&amp;quot;&lt;br/&gt;
&lt;br/&gt;
when items with such names are read from the spi layer, they are first interpreted as expanded form names.&lt;br/&gt;
a prefix lookup for namespace &amp;#39;foo&amp;#39; fails and the name is treated as qualified jcr name.&lt;br/&gt;
&lt;br/&gt;
=&amp;gt; depending on the spi implementation, a server-roundtrip is required in order to determine that &amp;#39;foo&amp;#39; is not a&lt;br/&gt;
registered namespace. </description>
                <environment></environment>
            <key id="12433847">JCR-2275</key>
            <summary>some legal jcr names cause unneccessary server-roundtrips </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="stefan@jira">Stefan Guggisberg</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Aug 2009 14:47:20 +0100</created>
                <updated>Mon, 11 Jan 2010 14:18:28 +0000</updated>
                    <resolved>Wed, 16 Sep 2009 13:58:15 +0100</resolved>
                                            <fixVersion>2.0-alpha11</fixVersion>
                                <component>jackrabbit-jcr2spi</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12747866" author="stefan@jira" created="Wed, 26 Aug 2009 10:47:16 +0100"  >a patch for o.a.jackrabbit.spi.commons.conversion,NameParser &lt;br/&gt;
that includes a simple static check of the name in order to &lt;br/&gt;
avoid unneccessary server-roundtrips &lt;br/&gt;
&lt;br/&gt;
the following names are always considered being qualified jcr names since the would be illegal expanded form: &lt;br/&gt;
- &amp;quot;{foo}&amp;quot; =&amp;gt; empty local name is not allowed &lt;br/&gt;
- &amp;quot;{foo} bar&amp;quot; =&amp;gt; leading space in local name is not allowed &lt;br/&gt;
&lt;br/&gt;
however, the patch causes 2 failures in o.a.jackrabbit.spi.commons.conversion,NameParser; &lt;br/&gt;
IMO the failing test cases are questionable and could be fixed.</comment>
                    <comment id="12747876" author="jukkaz" created="Wed, 26 Aug 2009 11:08:31 +0100"  >Instead of custom rules like this, I&amp;#39;d rather use the expanded form rule that the URI part always contains a colon. Thus the following test will always detect whether a name is in expanded form:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;name.startsWtih(&amp;quot;{&amp;quot;) &amp;amp;&amp;amp;  name.indexOf(&amp;#39;:&amp;quot;) != -1&lt;br/&gt;
&lt;br/&gt;
The only problem is the &amp;quot;internal&amp;quot; namespace used with the &amp;quot;rep:&amp;quot; prefix. For now we can treat that as a special case:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;name.startsWtih(&amp;quot;{&amp;quot;) &amp;amp;&amp;amp;  (name.indexOf(&amp;#39;:&amp;quot;) != -1 || name.startsWith(&amp;quot;{internal}&amp;quot;))&lt;br/&gt;
&lt;br/&gt;
I would also recommend that we migrate from &amp;quot;internal&amp;quot; to using a proper namespace URI like &amp;quot;&lt;a href=&quot;http://jackrabbit.apache.org/ns/2009/internal&quot;&gt;http://jackrabbit.apache.org/ns/2009/internal&lt;/a&gt;&amp;quot;.</comment>
                    <comment id="12747897" author="tripod" created="Wed, 26 Aug 2009 12:35:25 +0100"  >I agree with jukka, that we should only allow proper uris in expanded form. and yes, we should probably change the internal namespace.</comment>
                    <comment id="12747911" author="stefan@jira" created="Wed, 26 Aug 2009 13:23:37 +0100"  >&amp;gt; Instead of custom rules like this, I&amp;#39;d rather use the expanded form rule that the URI part always contains a colon. Thus the following test will always detect whether a name is in expanded form:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;   name.startsWtih(&amp;quot;{&amp;quot;) &amp;amp;&amp;amp;  name.indexOf(&amp;#39;:&amp;quot;) != -1&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; The only problem is the &amp;quot;internal&amp;quot; namespace used with the &amp;quot;rep:&amp;quot; prefix. For now we can treat that as a special case:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;   name.startsWtih(&amp;quot;{&amp;quot;) &amp;amp;&amp;amp;  (name.indexOf(&amp;#39;:&amp;quot;) != -1 || name.startsWith(&amp;quot;{internal}&amp;quot;))&lt;br/&gt;
&lt;br/&gt;
i was considering this as well, but then it felt somehow strange to cover a special jackrabbit-core case in the generic spi-commons module...&lt;br/&gt;
&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; I would also recommend that we migrate from &amp;quot;internal&amp;quot; to using a proper namespace URI like &amp;quot;&lt;a href=&quot;http://jackrabbit.apache.org/ns/2009/internal&quot;&gt;http://jackrabbit.apache.org/ns/2009/internal&lt;/a&gt;&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
agreed, +1 &lt;br/&gt;
&lt;br/&gt;
according to the spec, the namespace has to be a proper uri as defined in setion 3 of rfc 3986, i.e. it always must contain a scheme part delimited by a colon.&lt;br/&gt;
&lt;br/&gt;
test cases will need to be adapted as well.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12756015" author="jukkaz" created="Wed, 16 Sep 2009 13:58:15 +0100"  >Resolved as a part of &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2288&quot; title=&quot;o.a.jackrabbit.spi.commons.conversion.NameParser should not assume that namespace URI&amp;#39;s are registered&quot;&gt;&lt;strike&gt;JCR-2288&lt;/strike&gt;&lt;/a&gt; in revision 815745.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                                <inwardlinks description="is blocked by">
                            <issuelink>
            <issuekey id="12434606">JCR-2288</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12401870">JCR-1712</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12417722" name="JCR-2275.patch" size="1434" author="stefan@jira" created="Wed, 26 Aug 2009 10:47:16 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 26 Aug 2009 10:08:31 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>143088</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191739</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>