<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:38:31 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2939/JCR-2939.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2939] QueryObjectModel does not generate the corresponding SQL2 Query when dealing with spaces in the path</title>
                <link>https://issues.apache.org/jira/browse/JCR-2939</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>This is the original issue:&lt;br/&gt;
----------&lt;br/&gt;
I tried to get the childnodes of a node names &amp;quot;/a b&amp;quot; using the following code&lt;br/&gt;
&amp;nbsp;&amp;nbsp;QueryManager queryManager=session.getWorkspace().getQueryManager();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;QueryObjectModelFactory qomf=queryManager.getQOMFactory();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Source source1=qomf.selector(NodeType.NT_BASE, &amp;quot;selector_0&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Column[] columns = new Column[]{qomf.column(&amp;quot;selector_0&amp;quot;, null, null)};&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Constraint constraint2 = qomf.childNode(&amp;quot;selector_0&amp;quot;, &amp;quot;/a b&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;QueryObjectModel qom = qomf.createQuery(source1, constraint2 , null, columns);&lt;br/&gt;
&lt;br/&gt;
This is not giving any result when the session is acquired through webdav. But when connected using JNDI it is giving the child nodes. &lt;br/&gt;
&lt;br/&gt;
The sql statement getting created is &lt;br/&gt;
SELECT selector_0.* FROM [nt:base] AS selector_0 WHERE ISCHILDNODE(selector_0, &lt;br/&gt;
[/a b]).&lt;br/&gt;
&lt;br/&gt;
When using webdav If i give this SQL2 query directly along with quotes around &lt;br/&gt;
the path i.e. [&amp;#39;/a b&amp;#39;] then it is working as expected.&lt;br/&gt;
----------&lt;br/&gt;
&lt;br/&gt;
this doesn&amp;#39;t have anything to do with webdav. the problem is the QueryObjectModel generates an SQL2 query that is not 100% equivalent, it fails to escape paths that have spaces in them.&lt;br/&gt;
this way, in the case of davex remoting, the jr client will use the statement generated instead, which is not escaped, and will fail to return the expected nodes. &lt;br/&gt;
&lt;br/&gt;
This can be seen easily if we do a System.out.println(qom.getStatement())&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12503950">JCR-2939</key>
            <summary>QueryObjectModel does not generate the corresponding SQL2 Query when dealing with spaces in the path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="alex.parvulescu">Alex Parvulescu</assignee>
                                <reporter username="alex.parvulescu">Alex Parvulescu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Apr 2011 17:38:46 +0100</created>
                <updated>Fri, 23 Sep 2011 15:26:31 +0100</updated>
                    <resolved>Mon, 23 May 2011 16:59:52 +0100</resolved>
                                            <fixVersion>2.2.7</fixVersion>
                <fixVersion>2.3</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13018429" author="alex.parvulescu" created="Mon, 11 Apr 2011 17:52:22 +0100"  >attached patch to fix and some tests</comment>
                    <comment id="13038006" author="alex.parvulescu" created="Mon, 23 May 2011 16:56:00 +0100"  >Fixed in trunk in rev 1126550 and 1126551 </comment>
                    <comment id="13038009" author="alex.parvulescu" created="Mon, 23 May 2011 16:59:52 +0100"  >Merged to 2.2 in rev 1126557.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10020">
                <name>Cloners</name>
                                <outwardlinks description="is cloned as">
                            <issuelink>
            <issuekey id="12458737">JCR-2559</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12476016" name="JCR-2939.patch" size="8780" author="alex.parvulescu" created="Mon, 11 Apr 2011 17:52:22 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>59518</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>250278</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>