<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:39:36 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1304/JCR-1304.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1304] Support system properties in ${...} vars in XML config files</title>
                <link>https://issues.apache.org/jira/browse/JCR-1304</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>The variable replacement (${...}) in config files like repository.xml currently only allows for the special variables introduced by Jackrabbit, eg. ${wsp.name} or ${rep.home}. But it would be useful to support all java system properties here as it is some kind of a standard in Java XML config files (see Spring for an example).&lt;br/&gt;
&lt;br/&gt;
This makes it easier to inject variables from outside the config file, eg. by setting them on the command line or injecting them programmatically in test cases. Typical parameters for that include database connection credentials, which one wants to avoid to put into repository.xml files that are often checked into SVN.&lt;br/&gt;
&lt;br/&gt;
This is especially true for test cases, eg. I currently work on a persistence manager component and I want to include the repository.xml in the source tree (under applications/test) but without my specific credentials. These are applied by loading a user-specific properties file through the test case before the repository is started and the config is read.&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12385963">JCR-1304</key>
            <summary>Support system properties in ${...} vars in XML config files</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="alexander.klimetschek">Alexander Klimetschek</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jan 2008 13:15:12 +0000</created>
                <updated>Sun, 27 Jul 2008 13:11:40 +0100</updated>
                    <resolved>Fri, 11 Jan 2008 11:21:42 +0000</resolved>
                                            <fixVersion>1.4</fixVersion>
                                <component>config</component>
                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12557637" author="alexander.klimetschek" created="Thu, 10 Jan 2008 13:19:54 +0000"  >Patches the o.a.j.util.Text.replaceVariables() method in jackrabbit-jcr-commons to look for system properties as well.&lt;br/&gt;
&lt;br/&gt;
The jackrabbit specific properties are still inspected first, but if none is found, a lookup via System.getProperty() is made. If that fails, the behaviour is as before, ie. it either returns &amp;quot;&amp;quot; or throws an exception, depending on the is ignoreMissing variable.&lt;br/&gt;
&lt;br/&gt;
As the Text class hasn&amp;#39;t change over that last releases, this patch can be applied to 1.3, 1.4 and 1.5 (trunk) branches. (That&amp;#39;s why I set the affects version field to those)</comment>
                    <comment id="12557649" author="jukkaz" created="Thu, 10 Jan 2008 14:10:27 +0000"  >Instead of changing the contract of Text.replaceVariables (there might be cases where you *don&amp;#39;t* want system properties) I&amp;#39;d just change RepositoryConfig.create. See the attached &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1304&quot; title=&quot;Support system properties in ${...} vars in XML config files&quot;&gt;&lt;strike&gt;JCR-1304&lt;/strike&gt;&lt;/a&gt;.patch.</comment>
                    <comment id="12557654" author="alexander.klimetschek" created="Thu, 10 Jan 2008 14:24:28 +0000"  >I just found nothing using Text.replaceVariables apart from the config files ;-)&lt;br/&gt;
&lt;br/&gt;
Is RepositoryConfig.create ok? AFAIU it parses repository.xml. What about a workspace.xml of an exisiting workspace? Will it still contain the variables or are they replaced by their values when the workspace.xml is created?</comment>
                    <comment id="12557659" author="jukkaz" created="Thu, 10 Jan 2008 14:39:33 +0000"  >Good point about the workspace config, the attached updated version of my patch addresses this.&lt;br/&gt;
&lt;br/&gt;
Text.replaceVariables is probably not used elsewhere within Jackrabbit, but I&amp;#39;d still be wary of changing the API. The current API is clean and simple and a client can trivially include (or exclude) system properties in the set of properties being replaced.</comment>
                    <comment id="12557963" author="jukkaz" created="Fri, 11 Jan 2008 11:21:42 +0000"  >Committed my patch in revision 611143 and merged it to the 1.4 branch in revision 611145.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310010">
                <name>Incorporates</name>
                                <outwardlinks description="incorporates">
                            <issuelink>
            <issuekey id="12401099">JCR-1694</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12372901" name="enable-system-props-in-config-vars.patch" size="1259" author="alexander.klimetschek" created="Thu, 10 Jan 2008 13:19:53 +0000" />
                    <attachment id="12372908" name="JCR-1304.patch" size="1198" author="jukkaz" created="Thu, 10 Jan 2008 14:39:32 +0000" />
                    <attachment id="12372906" name="JCR-1304.patch" size="808" author="jukkaz" created="Thu, 10 Jan 2008 14:10:27 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 10 Jan 2008 14:10:27 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>42994</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279769</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>