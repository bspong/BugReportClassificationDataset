<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:55:52 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1571/JCR-1571.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1571] DavMethodBase#getResponseException fails if the body is not (valid) XML</title>
                <link>https://issues.apache.org/jira/browse/JCR-1571</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>I have a set up that uses the JCR Webdav Server from a custom remote client.&lt;br/&gt;
I&amp;#39;ve noticed one thing, anytime I request a node that doesn&amp;#39;t exist the error that comes back from the server is as follows:&lt;br/&gt;
&lt;br/&gt;
[Fatal Error] :1:941: The element type &amp;quot;HR&amp;quot; must be terminated by the matching end-tag &amp;quot;&amp;lt;/HR&amp;gt;&amp;quot;.&lt;br/&gt;
javax.jcr.RepositoryException: The element type &amp;quot;HR&amp;quot; must be terminated by the matching end-tag &amp;quot;&amp;lt;/HR&amp;gt;&amp;quot;.: The element type &amp;quot;HR&amp;quot; must be terminated by the matching end-tag &amp;quot;&amp;lt;/HR&amp;gt;&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
Doesn&amp;#39;t really make sense, but that is OK, I can handle that.&lt;br/&gt;
&lt;br/&gt;
My problem:&lt;br/&gt;
I have a partially populated repository that at the root has a few nodes like&lt;br/&gt;
/edu/....&lt;br/&gt;
/com/ibm/..&lt;br/&gt;
&lt;br/&gt;
So, I want to create a few nodes of type nt:folder under&lt;br/&gt;
&lt;br/&gt;
com/myCompany/folder1&lt;br/&gt;
&lt;br/&gt;
I have no problem creating them, but since &amp;quot;com&amp;quot; already exists I end up with&lt;br/&gt;
com[2]/myCompany/folder1.&lt;br/&gt;
&lt;br/&gt;
So, I went ahead and used the parentNode.hasNode(&amp;quot;folderName&amp;quot;) method.&lt;br/&gt;
&lt;br/&gt;
This method returns true for the &amp;quot;com&amp;quot; portion, but when I test for the &amp;quot;myCompany&amp;quot; folder which should return false I get the error response shown above from the server.&lt;br/&gt;
&lt;br/&gt;
The webdav request looks as follows:&lt;br/&gt;
PROPFIND /jackrabbit/server/default/jcr%3aroot/com/myCompany&lt;br/&gt;
&lt;br/&gt;
The snippet of code looks as follows:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;private Node createFolders (Session session, Node parentNode, List &amp;lt;String&amp;gt; folders)&lt;br/&gt;
	  throws RepositoryException {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Node folderNode = null;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;for (String folder : folders) {&lt;br/&gt;
	if (parentNode.hasNode(folder))&lt;br/&gt;
	    folderNode = parentNode.getNode(folder);&lt;br/&gt;
	else&lt;br/&gt;
	    folderNode = parentNode.addNode(folder, &amp;quot;nt:folder&amp;quot;);&lt;br/&gt;
	parentNode = folderNode;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;session.save();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return (folderNode);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;}</description>
                <environment>JDK 1.6; Tomcat 6; Windows 2003</environment>
            <key id="12395228">JCR-1571</key>
            <summary>DavMethodBase#getResponseException fails if the body is not (valid) XML</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="anchela">angela</assignee>
                                <reporter username="jcastillo">Julio Castillo</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 May 2008 23:43:15 +0100</created>
                <updated>Mon, 8 Dec 2008 11:08:01 +0000</updated>
                    <resolved>Thu, 15 May 2008 15:46:30 +0100</resolved>
                                            <fixVersion>1.5</fixVersion>
                                <component>jackrabbit-webdav</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12594218" author="anchela" created="Mon, 5 May 2008 12:53:26 +0100"  >julio, could you attach the http-conversion? that would make it easier for me to&lt;br/&gt;
track the problem.&lt;br/&gt;
&lt;br/&gt;
thanks in advance!&lt;br/&gt;
angela</comment>
                    <comment id="12594642" author="jcastillo" created="Tue, 6 May 2008 18:26:55 +0100"  >Angela,&lt;br/&gt;
attached are the excerpts of 2 PROPFIND http requests:&lt;br/&gt;
first one searching for the node /com which it finds and the second one searching for the node /com/myCompany which will not find because it doesn&amp;#39;t exist.&lt;br/&gt;
&lt;br/&gt;
Let me know if you need more information.&lt;br/&gt;
&lt;br/&gt;
** julio</comment>
                    <comment id="12595148" author="anchela" created="Thu, 8 May 2008 09:35:25 +0100"  >hi julio&lt;br/&gt;
&lt;br/&gt;
first of all: i don&amp;#39;t think that the &amp;lt;HR&amp;gt; is sent by the JCR-server.&lt;br/&gt;
&lt;br/&gt;
i quickly tried it out having the attached test cases:&lt;br/&gt;
&lt;br/&gt;
test 1) creating a &amp;#39;myTest&amp;#39; node -&amp;gt; save -&amp;gt; new session -&amp;gt; parent.hasNode should return true&lt;br/&gt;
test 2) same as 1) by trying parent.hasNode without the node being created before.&lt;br/&gt;
&lt;br/&gt;
both work for me as expected... did i misunderstand your test? please let me know.&lt;br/&gt;
&lt;br/&gt;
test 1) log&lt;br/&gt;
&lt;br/&gt;
C-2-#022602 -&amp;gt; [PROPFIND /mytest/server/default/jcr%3aroot/testroot/myTest HTTP/1.1 ]&lt;br/&gt;
C-2-#022671 -&amp;gt; [Depth: 1 ]&lt;br/&gt;
C-2-#022681 -&amp;gt; [Authorization: Basic YWRtaW46YWRtaW4= ]&lt;br/&gt;
C-2-#022720 -&amp;gt; [User-Agent: Jakarta Commons-HttpClient/3.0 ]&lt;br/&gt;
C-2-#022764 -&amp;gt; [Host: localhost:5502 ]&lt;br/&gt;
C-2-#022786 -&amp;gt; [Content-Length: 599 ]&lt;br/&gt;
C-2-#022807 -&amp;gt; [Content-Type: text/xml; charset=UTF-8 ]&lt;br/&gt;
C-2-#022846 -&amp;gt; [ ]&lt;br/&gt;
C-2-#022848 -&amp;gt; [&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;]&lt;br/&gt;
C-2-#022887 -&amp;gt; [&amp;lt;D:propfind xmlns:D=&amp;quot;DAV:&amp;quot;&amp;gt;&amp;lt;D:prop&amp;gt;&amp;lt;dcr:name xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webdav/1.0&quot;&gt;http://www.day.com/jcr/webdav/1.0&lt;/a&gt;&amp;quot;/&amp;gt;&amp;lt;dcr:referen&lt;br/&gt;
ces xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/&quot;&gt;http://www.day.com/jcr/&lt;/a&gt;]&lt;br/&gt;
C-2-#023028 -&amp;gt; [webdav/1.0&amp;quot;/&amp;gt;&amp;lt;dcr:index xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webdav/1.0&quot;&gt;http://www.day.com/jcr/webdav/1.0&lt;/a&gt;&amp;quot;/&amp;gt;&amp;lt;dcr:path xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.d&quot;&gt;http://www.d&lt;/a&gt;&lt;br/&gt;
ay.com/jcr/webdav/1.0&amp;quot;/&amp;gt;&amp;lt;dcr:mixinnod]&lt;br/&gt;
C-2-#023169 -&amp;gt; [etypes xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webdav/1.0&quot;&gt;http://www.day.com/jcr/webdav/1.0&lt;/a&gt;&amp;quot;/&amp;gt;&amp;lt;dcr:parent xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webd&quot;&gt;http://www.day.com/jcr/webd&lt;/a&gt;&lt;br/&gt;
av/1.0&amp;quot;/&amp;gt;&amp;lt;dcr:primarynodetype xmlns:d]&lt;br/&gt;
C-2-#023310 -&amp;gt; [cr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webdav/1.0&quot;&gt;http://www.day.com/jcr/webdav/1.0&lt;/a&gt;&amp;quot;/&amp;gt;&amp;lt;D:resourcetype/&amp;gt;&amp;lt;dcr:uuid xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/web&quot;&gt;http://www.day.com/jcr/web&lt;/a&gt;&lt;br/&gt;
dav/1.0&amp;quot;/&amp;gt;&amp;lt;/D:prop&amp;gt;&amp;lt;/D:propfind&amp;gt;]&lt;br/&gt;
S-2-#117910 -&amp;gt; [HTTP/1.1 207 Code 207 ]&lt;br/&gt;
[...]&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
test 2) log&lt;br/&gt;
&lt;br/&gt;
C-0-#013648 -&amp;gt; [PROPFIND /mytest/server/default/jcr%3aroot/testroot/myTest HTTP/1.1 ]&lt;br/&gt;
C-0-#013717 -&amp;gt; [Depth: 1 ]&lt;br/&gt;
C-0-#013727 -&amp;gt; [Authorization: Basic YW5vbnltb3VzOg== ]&lt;br/&gt;
C-0-#013766 -&amp;gt; [User-Agent: Jakarta Commons-HttpClient/3.0 ]&lt;br/&gt;
C-0-#013810 -&amp;gt; [Host: localhost:5502 ]&lt;br/&gt;
C-0-#013832 -&amp;gt; [Content-Length: 599 ]&lt;br/&gt;
C-0-#013853 -&amp;gt; [Content-Type: text/xml; charset=UTF-8 ]&lt;br/&gt;
C-0-#013892 -&amp;gt; [ ]&lt;br/&gt;
C-0-#013894 -&amp;gt; [&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;]&lt;br/&gt;
C-0-#013933 -&amp;gt; [&amp;lt;D:propfind xmlns:D=&amp;quot;DAV:&amp;quot;&amp;gt;&amp;lt;D:prop&amp;gt;&amp;lt;dcr:name xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webdav/1.0&quot;&gt;http://www.day.com/jcr/webdav/1.0&lt;/a&gt;&amp;quot;/&amp;gt;&amp;lt;dcr:referen&lt;br/&gt;
ces xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/&quot;&gt;http://www.day.com/jcr/&lt;/a&gt;]&lt;br/&gt;
C-0-#014074 -&amp;gt; [webdav/1.0&amp;quot;/&amp;gt;&amp;lt;dcr:index xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webdav/1.0&quot;&gt;http://www.day.com/jcr/webdav/1.0&lt;/a&gt;&amp;quot;/&amp;gt;&amp;lt;dcr:path xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.d&quot;&gt;http://www.d&lt;/a&gt;&lt;br/&gt;
ay.com/jcr/webdav/1.0&amp;quot;/&amp;gt;&amp;lt;dcr:mixinnod]&lt;br/&gt;
C-0-#014215 -&amp;gt; [etypes xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webdav/1.0&quot;&gt;http://www.day.com/jcr/webdav/1.0&lt;/a&gt;&amp;quot;/&amp;gt;&amp;lt;dcr:parent xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webd&quot;&gt;http://www.day.com/jcr/webd&lt;/a&gt;&lt;br/&gt;
av/1.0&amp;quot;/&amp;gt;&amp;lt;dcr:primarynodetype xmlns:d]&lt;br/&gt;
C-0-#014356 -&amp;gt; [cr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/webdav/1.0&quot;&gt;http://www.day.com/jcr/webdav/1.0&lt;/a&gt;&amp;quot;/&amp;gt;&amp;lt;D:resourcetype/&amp;gt;&amp;lt;dcr:uuid xmlns:dcr=&amp;quot;&lt;a href=&quot;http://www.day.com/jcr/web&quot;&gt;http://www.day.com/jcr/web&lt;/a&gt;&lt;br/&gt;
dav/1.0&amp;quot;/&amp;gt;&amp;lt;/D:prop&amp;gt;&amp;lt;/D:propfind&amp;gt;]&lt;br/&gt;
S-0-#077856 -&amp;gt; [HTTP/1.1 404 Not Found ]&lt;br/&gt;
S-0-#077880 -&amp;gt; [Host: localhost:4302 ]&lt;br/&gt;
S-0-#077902 -&amp;gt; [Connection: Close ]&lt;br/&gt;
S-0-#077921 -&amp;gt; [Server: Communique Servlet Engine/4.0.2 ]&lt;br/&gt;
S-0-#077962 -&amp;gt; [Content-Type: text/html ]&lt;br/&gt;
S-0-#077987 -&amp;gt; [Date: Thu, 08 May 2008 08:26:54 GMT ]&lt;br/&gt;
S-0-#078024 -&amp;gt; [Transfer-Encoding: chunked ]&lt;br/&gt;
S-0-#078052 -&amp;gt; [ ]&lt;br/&gt;
S-0-#078054 -&amp;gt; [65 ]&lt;br/&gt;
S-0-#078058 -&amp;gt; [&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt; ]&lt;br/&gt;
S-0-#078079 -&amp;gt; [404 ]&lt;br/&gt;
S-0-#078084 -&amp;gt; [  ]&lt;br/&gt;
S-0-#078087 -&amp;gt; [Not Found ]&lt;br/&gt;
S-0-#078098 -&amp;gt; [&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;h1&amp;gt; ]&lt;br/&gt;
S-0-#078125 -&amp;gt; [Not Found ]&lt;br/&gt;
S-0-#078136 -&amp;gt; [&amp;lt;/h1&amp;gt; ]&lt;br/&gt;
S-0-#078143 -&amp;gt; [&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt; ]&lt;br/&gt;
S-0-#078159 -&amp;gt; [ ]&lt;br/&gt;
S-0-#078161 -&amp;gt; [0 ]&lt;br/&gt;
S-0-#078164 -&amp;gt; [ ]&lt;br/&gt;
S-0-Finished: 78166 bytes (3.0 kb/s)&lt;br/&gt;
C-0-Finished: 14493 bytes (0.0 kb/s)&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12595151" author="anchela" created="Thu, 8 May 2008 09:37:03 +0100"  >testcases (my understanding of the problem description).</comment>
                    <comment id="12595203" author="reschke" created="Thu, 8 May 2008 13:19:55 +0100"  >What happens here is that the servlet container generates an error page for the 404 status, and sends it out as text/html.&lt;br/&gt;
&lt;br/&gt;
The client component seems to try to parse it as XML, which of course fails.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12595376" author="jcastillo" created="Thu, 8 May 2008 21:04:56 +0100"  >Angela,&lt;br/&gt;
Yes that is the process to reproduce the problem (test on a node that&lt;br/&gt;
doesn&amp;#39;t yet exist -BTW, I created my repository by using the &amp;quot;Populate&amp;quot; link&lt;br/&gt;
in the default Jackrabbit deployment of the war file.&lt;br/&gt;
&lt;br/&gt;
I don&amp;#39;t know if the comment from Julian Reschle is sufficient to isolate it.&lt;br/&gt;
These are some notes on your log and mine&lt;br/&gt;
- I do see HR tags in the response from the server&lt;br/&gt;
- The version of the http client you are using is different from mine (I&amp;#39;m&lt;br/&gt;
running 3.1 -although I don&amp;#39;t think this is the problem)&lt;br/&gt;
- You are using a different version of the servlet container (I am using&lt;br/&gt;
Tomcat)&lt;br/&gt;
&lt;br/&gt;
Let me know if you need more information from me.&lt;br/&gt;
&lt;br/&gt;
Thanks&lt;br/&gt;
&lt;br/&gt;
** julio&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12595553" author="anchela" created="Fri, 9 May 2008 12:04:25 +0100"  >&amp;gt; I created my repository by using the &amp;quot;Populate&amp;quot; link in the default Jackrabbit deployment of &lt;br/&gt;
&amp;gt; the war file.&lt;br/&gt;
&lt;br/&gt;
that&amp;#39;s fine (an probably does something similar as my manual test)&lt;br/&gt;
&lt;br/&gt;
&amp;gt; I don&amp;#39;t know if the comment from Julian Reschle is sufficient to isolate it.&lt;br/&gt;
&lt;br/&gt;
i guess it is.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; These are some notes on your log and mine&lt;br/&gt;
&amp;gt; - I do see HR tags in the response from the server&lt;br/&gt;
&lt;br/&gt;
yes. but i&amp;#39;m quite sure, that they are not generated by the webdav servlet.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; - The version of the http client you are using is different from mine (I&amp;#39;m&lt;br/&gt;
&amp;gt; running 3.1 -although I don&amp;#39;t think this is the problem)&lt;br/&gt;
&lt;br/&gt;
nor do i. httpclient 3.0 is the version used with the spi2dav project.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; - You are using a different version of the servlet container (I am &lt;br/&gt;
&amp;gt;   usingTomcat)&lt;br/&gt;
&lt;br/&gt;
yes. and i assume, that it is tomcat that generates the html error&lt;br/&gt;
page... and i assume that there is a way to turn that off as it should&lt;br/&gt;
be possible to configure a custom error page. can you try that?&lt;br/&gt;
&lt;br/&gt;
angela&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12595568" author="reschke" created="Fri, 9 May 2008 12:33:01 +0100"  >&amp;gt; yes. and i assume, that it is tomcat that generates the html error&lt;br/&gt;
&amp;gt; page... and i assume that there is a way to turn that off as it should&lt;br/&gt;
&amp;gt; be possible to configure a custom error page. can you try that? &lt;br/&gt;
&lt;br/&gt;
Wait.&lt;br/&gt;
&lt;br/&gt;
It&amp;#39;s perfectly ok for a server to send a text/html response body with a 404 status. The client really needs to be able to deal with that!&lt;br/&gt;
</comment>
                    <comment id="12595572" author="anchela" created="Fri, 9 May 2008 12:39:11 +0100"  >if there is a simple way to disable the HTML (which the servlet did not generate), i don&amp;#39;t want &lt;br/&gt;
to spent a lot of time extracting the original response body created by the servlet. it&amp;#39;s a &lt;br/&gt;
sandbox project... </comment>
                    <comment id="12595576" author="reschke" created="Fri, 9 May 2008 13:04:31 +0100"  >(talked to Angela on the phone, summarizing)&lt;br/&gt;
&lt;br/&gt;
- for a non-success code, it&amp;#39;s ok for the server to return text/html&lt;br/&gt;
&lt;br/&gt;
- in Angela&amp;#39;s case (see trace), this did not cause problems as the response body appears to be wellformed XML anyway (although HTML)&lt;br/&gt;
&lt;br/&gt;
- the code that handles responses and tries to extract error details should handle this case as non-fatal; there&amp;#39;s simply no information in addition to the HTTP status code available&lt;br/&gt;
</comment>
                    <comment id="12595637" author="anchela" created="Fri, 9 May 2008 16:31:26 +0100"  >without having built julios case on my checkout, i think the problem is caused&lt;br/&gt;
by DavMethodBase#getResponseException() which did not handle exceptions upon&lt;br/&gt;
parsing (xml) the response body.&lt;br/&gt;
&lt;br/&gt;
i created a patch for that and a dumb test. &lt;br/&gt;
&lt;br/&gt;
julio, if you had time to try if that solves the problem, it would be very helpful.&lt;br/&gt;
thanks in advance&lt;br/&gt;
&lt;br/&gt;
angela</comment>
                    <comment id="12595748" author="jcastillo" created="Sat, 10 May 2008 00:16:56 +0100"  >Angela,&lt;br/&gt;
I updated my entire sandbox tree, and tried to rebuild&lt;br/&gt;
jackrabbit-spi-spi2dav-1.5-SNAPSHOT.jar file but the build failed this time&lt;br/&gt;
around (had worked for me all the time before):&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;c:\svn\jackrabbit\sandbox\spi&amp;gt; mvn install&lt;br/&gt;
[ERROR] BUILD FAILURE&lt;br/&gt;
[INFO]&lt;br/&gt;
------------------------------------------------------------------------&lt;br/&gt;
[INFO] Compilation failure&lt;br/&gt;
C:\svn\jackrabbit\sandbox\spi\spi2dav\src\main\java\org\apache\jackrabbit\sp&lt;br/&gt;
i2dav\RepositoryServiceImpl.java:[190,7]&lt;br/&gt;
org.apache.jackrabbit.spi2dav.RepositoryServiceImpl is not abstract and does&lt;br/&gt;
not override abstract method&lt;br/&gt;
exists(org.apache.jackrabbit.spi.SessionInfo,org.apache.jackrabbit.spi.ItemI&lt;br/&gt;
d) in org.apache.jackrabbit.spi.RepositoryService&lt;br/&gt;
&lt;br/&gt;
Angela, I suppose this is the tree you wanted me to test (I did see a few&lt;br/&gt;
changes coming in on the main trunk, but I haven&amp;#39;t been building anything on&lt;br/&gt;
the main trunk, I just pick up the latest jar files released).&lt;br/&gt;
&lt;br/&gt;
Let me know.&lt;br/&gt;
&lt;br/&gt;
Thanks&lt;br/&gt;
&lt;br/&gt;
** julio&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12596299" author="anchela" created="Tue, 13 May 2008 07:39:38 +0100"  >&amp;gt; I updated my entire sandbox tree&lt;br/&gt;
&lt;br/&gt;
you have to update jackrabbit trunk as well.&lt;br/&gt;
first we got rid of some unused repository-service methods, second the fix for this issue affects the jackrabbit-webdav project and not the spi2dav sandbox project.&lt;br/&gt;
&lt;br/&gt;
angela</comment>
                    <comment id="12596499" author="jcastillo" created="Tue, 13 May 2008 20:00:56 +0100"  >Angela,&lt;br/&gt;
I rebuilt jackrabbit-webdav from the main trunk refreshed today (&lt;br/&gt;
-1.5-SNAPSHOT.jar) and deployed in my tomcat webapp lib directory for&lt;br/&gt;
jackrabbit, but unfortunately the behavior is still the same. This time I&lt;br/&gt;
debugged the client further as I understood the comment about the XML&lt;br/&gt;
response.&lt;br/&gt;
&lt;br/&gt;
The client as it stands right now&lt;br/&gt;
(org.apache.jackrabbit.webdav.client.methods.DaveMethodBase:getResponseBodyA&lt;br/&gt;
sDocument:118) still expects a response in XML format (fails while trying to&lt;br/&gt;
parse an HTML document -the HR tag is not terminated). This method is called&lt;br/&gt;
on failure too by (getResponseException()).&lt;br/&gt;
&lt;br/&gt;
The server side with the new webdav jar file sends an HTML document with the&lt;br/&gt;
&amp;quot;404 Not Found&amp;quot; response. I captured the response again, see is below.&lt;br/&gt;
Please also note the Content-Type is html rather than xml.&lt;br/&gt;
&lt;br/&gt;
HTTP/1.1 404 Not Found&lt;br/&gt;
Server: Apache-Coyote/1.1&lt;br/&gt;
Content-Type: text/html;charset=utf-8&lt;br/&gt;
Content-Length: 952&lt;br/&gt;
Date: Tue, 13 May 2008 18:08:40 GMT&lt;br/&gt;
&lt;br/&gt;
&amp;lt;html&amp;gt;&lt;br/&gt;
&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;Apache Tomcat/6.0.16 - Error report&amp;lt;/title&amp;gt;&lt;br/&gt;
&amp;lt;style&amp;gt;&amp;lt;!--H1&lt;br/&gt;
{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;fo&lt;br/&gt;
nt-size:22px;} H2&lt;br/&gt;
{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;fo&lt;br/&gt;
nt-size:16px;} H3&lt;br/&gt;
{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;fo&lt;br/&gt;
nt-size:14px;} BODY&lt;br/&gt;
{font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B&lt;br/&gt;
{font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;}&lt;br/&gt;
P&lt;br/&gt;
{font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:&lt;br/&gt;
12px;}A {color : black;}A.name {color : black;}HR {color :&lt;br/&gt;
#525D76;}--&amp;gt;&amp;lt;/style&amp;gt; &amp;lt;/head&amp;gt;&lt;br/&gt;
&amp;lt;body&amp;gt;&amp;lt;h1&amp;gt;HTTP Status 404 - &amp;lt;/h1&amp;gt;&amp;lt;HR size=&amp;quot;1&amp;quot;&lt;br/&gt;
noshade=&amp;quot;noshade&amp;quot;&amp;gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;type&amp;lt;/b&amp;gt; Status report&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;message&amp;lt;/b&amp;gt;&lt;br/&gt;
&amp;lt;u&amp;gt;&amp;lt;/u&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;description&amp;lt;/b&amp;gt; &amp;lt;u&amp;gt;The requested resource () is not&lt;br/&gt;
available.&amp;lt;/u&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;HR size=&amp;quot;1&amp;quot; noshade=&amp;quot;noshade&amp;quot;&amp;gt;&amp;lt;h3&amp;gt;Apache&lt;br/&gt;
Tomcat/6.0.16&amp;lt;/h3&amp;gt;&lt;br/&gt;
&amp;lt;/body&amp;gt;&lt;br/&gt;
&amp;lt;/html&amp;gt;&lt;br/&gt;
&lt;br/&gt;
I just checked the svn log file for the jackrabbit-webdav directory and&lt;br/&gt;
noticed that the last check-in was on March 5th. So I&amp;#39;m guessing I&amp;#39;m picking&lt;br/&gt;
the wrong tree?&lt;br/&gt;
&lt;br/&gt;
Thanks&lt;br/&gt;
&lt;br/&gt;
** julio&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12597101" author="anchela" created="Thu, 15 May 2008 12:52:32 +0100"  >i didn&amp;#39;t commit it yet but attached a patch.&lt;br/&gt;
&lt;br/&gt;
angela</comment>
                    <comment id="12597149" author="anchela" created="Thu, 15 May 2008 15:46:30 +0100"  >fix at revision: 656685  &lt;br/&gt;
&lt;br/&gt;
installed tomcat and executed some basic tests where the response body is invalid xml (it was a 500 response instead of 404 but parsing failed with the same message).&lt;br/&gt;
i concluded that the fix works as expected&lt;br/&gt;
</comment>
                    <comment id="12597597" author="jcastillo" created="Fri, 16 May 2008 21:04:56 +0100"  >Thank you Angela.&lt;br/&gt;
The fix works.&lt;br/&gt;
&lt;br/&gt;
Thanks again for your great work.&lt;br/&gt;
&lt;br/&gt;
** julio &lt;br/&gt;
&lt;br/&gt;
</comment>
                </comments>
                    <attachments>
                    <attachment id="12381655" name="HasNodeTest.java" size="2384" author="anchela" created="Thu, 8 May 2008 09:37:03 +0100" />
                    <attachment id="12381773" name="JCR-1571.diff" size="7529" author="anchela" created="Fri, 9 May 2008 16:26:44 +0100" />
                    <attachment id="12381518" name="trace_JCR-1571.txt" size="4607" author="jcastillo" created="Tue, 6 May 2008 18:26:55 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 5 May 2008 11:53:26 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78503</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190721</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>