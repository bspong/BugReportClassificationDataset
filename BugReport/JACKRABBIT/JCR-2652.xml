<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:52:04 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2652/JCR-2652.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2652] Can no longer set a Date property using a Long value</title>
                <link>https://issues.apache.org/jira/browse/JCR-2652</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Attempting to set a Date property with a Long value throws a javax.jcr.nodetype.ConstraintViolationException. This worked in Jackrabbit 1.6.2.&lt;br/&gt;
&lt;br/&gt;
To reproduce:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Node node = session.getItem(&amp;quot;/&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;node = node.addNode(&amp;quot;dummy&amp;quot;, &amp;quot;nt:resource&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;ValueFactory vf = session.getValueFactory();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Value = vf.createValue(&amp;quot;1234&amp;quot;, 3); // Create a LongValue&lt;br/&gt;
&amp;nbsp;&amp;nbsp;node.setProperty(&amp;quot;jcr:lastModified&amp;quot;, value);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;System.out.println(node.getProperty(&amp;quot;jcr:lastModified&amp;quot;));&lt;br/&gt;
&lt;br/&gt;
Expected result:&lt;br/&gt;
- A date around 1970 is printed to System.out&lt;br/&gt;
&lt;br/&gt;
Actual result:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;javax.jcr.nodetype.ConstraintViolationException: no matching property definition found for {&lt;a href=&quot;http://www.jcp.org/jcr/1.0&quot;&gt;http://www.jcp.org/jcr/1.0&lt;/a&gt;}lastModified&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.nodetype.EffectiveNodeType.getApplicablePropertyDef(EffectiveNodeType.java:770)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.NodeImpl.getApplicablePropertyDefinition(NodeImpl.java:911)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.ItemManager.getDefinition(ItemManager.java:224)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.ItemData.getDefinition(ItemData.java:97)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.PropertyData.getPropertyDefinition(PropertyData.java:53)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.PropertyImpl.getDefinition(PropertyImpl.java:729)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.NodeImpl.setProperty(NodeImpl.java:2512)&lt;br/&gt;
&lt;br/&gt;
According to Jukka Zitting [1], this might be a side-effect of &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2170&quot; title=&quot;Remove PropDefId and NodeDefId&quot;&gt;&lt;strike&gt;JCR-2170&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
[1] Mail thread from &lt;a href=&apos;mailto:dev@jackrabbit.apache.org&apos;&gt;dev@jackrabbit.apache.org&lt;/a&gt;: &lt;a href=&quot;http://markmail.org/message/hn3snufsogjvldad&quot;&gt;http://markmail.org/message/hn3snufsogjvldad&lt;/a&gt;</description>
                <environment></environment>
            <key id="12466560">JCR-2652</key>
            <summary>Can no longer set a Date property using a Long value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="vramdal">Vidar S. Ramdal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Jun 2010 14:05:29 +0100</created>
                <updated>Mon, 14 Jun 2010 13:58:33 +0100</updated>
                    <resolved>Fri, 11 Jun 2010 10:38:19 +0100</resolved>
                            <version>1.6.2</version>
                                <fixVersion>1.6.4</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12877371" author="quellenberg" created="Thu, 10 Jun 2010 09:17:48 +0100"  >The same problem occurs when using setProperty with an array of strings (uuids) for a multi reference property.</comment>
                    <comment id="12877605" author="vramdal" created="Thu, 10 Jun 2010 23:32:33 +0100"  >Patches ItemManager to call NodeImpl.getApplicablePropertyDefinition with exactTypeMatch = false instead of true.&lt;br/&gt;
&lt;br/&gt;
Tom, could you check if this fixes your case?</comment>
                    <comment id="12877756" author="c_koell" created="Fri, 11 Jun 2010 09:30:37 +0100"  >Thank you, patch looks good to me. I will apply the patch soon.&lt;br/&gt;
</comment>
                    <comment id="12877760" author="c_koell" created="Fri, 11 Jun 2010 10:38:19 +0100"  >Committed revision 953623. Added the Testcase to the NodeTypeTest.</comment>
                    <comment id="12878549" author="quellenberg" created="Mon, 14 Jun 2010 13:20:19 +0100"  >Thank you, this solved my problem.</comment>
                    <comment id="12878561" author="vramdal" created="Mon, 14 Jun 2010 13:58:33 +0100"  >Thanks for applying the patch.&lt;br/&gt;
Confirming that the fix solves my problem, too =&amp;gt; closing this issue.</comment>
                </comments>
                    <attachments>
                    <attachment id="12446807" name="JCR-2652.patch" size="2786" author="vramdal" created="Thu, 10 Jun 2010 23:31:10 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 10 Jun 2010 08:17:48 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78159</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190490</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>