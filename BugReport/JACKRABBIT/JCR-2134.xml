<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:55:19 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2134/JCR-2134.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2134] Data Store: enable and fix tests</title>
                <link>https://issues.apache.org/jira/browse/JCR-2134</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Currently the unit test TestTwoGetStreams fails in the trunk (it worked in older versions). This should be fixed. &lt;br/&gt;
&lt;br/&gt;
Also, the data store is disabled by default, so this test doesn&amp;#39;t run by default. The data store should be enabled for testing.</description>
                <environment></environment>
            <key id="12427525">JCR-2134</key>
            <summary>Data Store: enable and fix tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="tmueller">Thomas Mueller</assignee>
                                <reporter username="tmueller">Thomas Mueller</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Jun 2009 08:38:47 +0100</created>
                <updated>Mon, 11 Jan 2010 14:18:27 +0000</updated>
                    <resolved>Wed, 26 Aug 2009 08:56:25 +0100</resolved>
                                            <fixVersion>2.0-alpha11</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12717975" author="tmueller" created="Wed, 10 Jun 2009 08:58:08 +0100"  >Revision 783243 (trunk): bugfix&lt;br/&gt;
Revision 783245 (trunk): enabled data store tests. Unfortunately, they are slow (74 seconds), I will try to speed them up.</comment>
                    <comment id="12718064" author="tmueller" created="Wed, 10 Jun 2009 14:10:07 +0100"  >Revision 783347 (trunk): fixed broken tests</comment>
                    <comment id="12718775" author="mreutegg" created="Fri, 12 Jun 2009 11:13:43 +0100"  >I still see test failure from time to time. Actually quite regularly :-/&lt;br/&gt;
&lt;br/&gt;
testEventListener(org.apache.jackrabbit.core.data.GCEventListenerTest)  Time elapsed: 11.984 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!&lt;br/&gt;
javax.jcr.ItemNotFoundException: cafebabe-cafe-babe-cafe-babecafebabe&lt;br/&gt;
	at org.apache.jackrabbit.core.ItemManager.getItemData(ItemManager.java:284)&lt;br/&gt;
	at org.apache.jackrabbit.core.ItemManager.getItem(ItemManager.java:228)&lt;br/&gt;
	at org.apache.jackrabbit.core.ItemManager.getItem(ItemManager.java:493)&lt;br/&gt;
	at org.apache.jackrabbit.core.ItemManager.getRootNode(ItemManager.java:416)&lt;br/&gt;
	at org.apache.jackrabbit.core.SessionImpl.getRootNode(SessionImpl.java:840)&lt;br/&gt;
	at org.apache.jackrabbit.core.data.GarbageCollector.scanNodes(GarbageCollector.java:194)&lt;br/&gt;
	at org.apache.jackrabbit.core.data.GarbageCollector.scan(GarbageCollector.java:178)&lt;br/&gt;
	at org.apache.jackrabbit.core.data.GCEventListenerTest.doTestEventListener(GCEventListenerTest.java:85)&lt;br/&gt;
	at org.apache.jackrabbit.core.data.GCEventListenerTest.testEventListener(GCEventListenerTest.java:50)&lt;br/&gt;
&lt;br/&gt;
Environment: Windows XP, Java 1.6.0_12-b04</comment>
                    <comment id="12718782" author="tmueller" created="Fri, 12 Jun 2009 11:24:13 +0100"  >The stack trace looks like the root node is missing. Are you sure this is related to this bug?</comment>
                    <comment id="12718800" author="mreutegg" created="Fri, 12 Jun 2009 12:23:10 +0100"  >No, I just assumed it is related because it&amp;#39;s a DataStore test and you earlier wrote that data store tests are now enabled.</comment>
                    <comment id="12729573" author="jukkaz" created="Fri, 10 Jul 2009 09:40:02 +0100"  >Another potentially related test failure I see every now and then:&lt;br/&gt;
&lt;br/&gt;
testContentIdentity(org.apache.jackrabbit.core.data.TestTwoGetStreams)  Time elapsed: 0.379 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
junit.framework.AssertionFailedError: time: 111&lt;br/&gt;
	at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
	at junit.framework.Assert.assertTrue(Assert.java:20)&lt;br/&gt;
	at org.apache.jackrabbit.core.data.TestTwoGetStreams.testContentIdentity(TestTwoGetStreams.java:83)&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12729585" author="tmueller" created="Fri, 10 Jul 2009 10:19:32 +0100"  >I think Marcel problem is fixed now (Marcel, could you verify this?).&lt;br/&gt;
&lt;br/&gt;
testContentIdentity tries to test if only the identifier was copied, but not the data itself. To do that, it measures the time that is used to copy a binary object. It&amp;#39;s not a good idea to do that, and specially a bad idea to use a fixed amount of milliseconds.&lt;br/&gt;
&lt;br/&gt;
I changed the test to compare the time it takes to save one object with the time it takes to copy it 100 times. Now it should fail only if copying the object 100 times takes more than 50 times as long as saving it once.</comment>
                    <comment id="12729587" author="mreutegg" created="Fri, 10 Jul 2009 10:24:25 +0100"  >&amp;gt; Marcel, could you verify this?&lt;br/&gt;
&lt;br/&gt;
well, that&amp;#39;s a bit difficult because I saw this test failure only occasionally. But I&amp;#39;ll file an issue if I encounter a failure again.</comment>
                    <comment id="12729588" author="jukkaz" created="Fri, 10 Jul 2009 10:25:48 +0100"  >OK, thanks. Using relative timing probably works better for the test.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 12 Jun 2009 10:13:43 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78326</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191511</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>