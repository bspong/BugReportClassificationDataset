<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:50:21 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2355/JCR-2355.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2355] Support easy pre-authenticated login</title>
                <link>https://issues.apache.org/jira/browse/JCR-2355</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Some applications authenticate users themselves and just need to access the repository on behalf of these pre-authenticated users.&lt;br/&gt;
&lt;br/&gt;
Examples of such pre-authentications include SSO solutions or web applications using a web-based authentication protocol not easily implementable in a JAAS LoginModule, for example OpenID or similar.&lt;br/&gt;
&lt;br/&gt;
In such situations a password may not be provided in SimpleCredentials and thus regular login with user name and password is not possible.&lt;br/&gt;
&lt;br/&gt;
Therefore I propose the enhancement of the AbstractLoginModule to allow for setting a specific attribute in the SimpleCredentials attribute map. If this attribute is set, authentication and login succeeds and a session for the user named in the SimpleCredentials is created.&lt;br/&gt;
&lt;br/&gt;
As a starter we might just check for the presence of the attribute.</description>
                <environment></environment>
            <key id="12438047">JCR-2355</key>
            <summary>Support easy pre-authenticated login</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Oct 2009 07:40:40 +0100</created>
                <updated>Mon, 11 Jan 2010 14:16:27 +0000</updated>
                    <resolved>Wed, 14 Oct 2009 14:29:35 +0100</resolved>
                            <version>2.0-alpha11</version>
                                <fixVersion>2.0-beta1</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12765443" author="fmeschbe" created="Wed, 14 Oct 2009 08:20:16 +0100"  >Patch extending the AbstractLoginModule with support for pre-authentication.&lt;br/&gt;
&lt;br/&gt;
This patch adds the following:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;* Support for a configuration parameter declaring a SimpleCredentials attribute for pre-authentication&lt;br/&gt;
&amp;nbsp;&amp;nbsp;* Add an isPreAuthenticated(Credentials) method used by the login() method&lt;br/&gt;
&lt;br/&gt;
The isPreAuthenticated method is protected and can be overwritten by AbstractLoginModule implementations to either switch pre authentication off completely or to apply different and more elaborate checks on the credentials.</comment>
                    <comment id="12765560" author="fmeschbe" created="Wed, 14 Oct 2009 14:29:35 +0100"  >After having received the ok from Angela, I commit this patch in Rev. 825125.</comment>
                    <comment id="12765563" author="jukkaz" created="Wed, 14 Oct 2009 14:38:54 +0100"  >+0 This approach seems a bit hacky to me (a separate SingleSignOnCredentials class would feel cleaner, or perhaps an out-of-band approach often used by JAAS implementations), but it&amp;#39;s probably the most straightforward and easy to implement solution to the described use case.</comment>
                    <comment id="12766015" author="alexander.klimetschek" created="Thu, 15 Oct 2009 12:12:24 +0100"  >Ahem, this can be a security breach! This attribute &amp;quot;trust_credentials_attribute&amp;quot; on SimpleCredentials basically works as a (very simple) master password. Hence this patch implicitly trusts the calling code, but if the repository is available eg. via RMI, anyone could connect to it and log in as any user, because that attribute can be set over RMI (afaik).&lt;br/&gt;
&lt;br/&gt;
A big -1. It should rather be easy to write a special login module that can be set by configuration and handles SSO things and co.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12766020" author="fmeschbe" created="Thu, 15 Oct 2009 12:23:51 +0100"  >I agree that the security might be hampered with when this is used unknowningly.&lt;br/&gt;
&lt;br/&gt;
Still, it must explicitly be enabled on a repository configuration level and the default is, that it is not enabled.&lt;br/&gt;
&lt;br/&gt;
I am perfectly ok to raise the requirements for the attribute above the basic presence. For example, we could say, the attribute must be set to a session which has certain access rights. This would limit the use of this functionality to code, which already has access to the repository at a certain level.&lt;br/&gt;
&lt;br/&gt;
On another you raised your veto. Do you stand by this veto ? In this case, since you are a member of the PMC, I would have to remove the code again.</comment>
                    <comment id="12766042" author="alexander.klimetschek" created="Thu, 15 Oct 2009 13:25:41 +0100"  >Ok, I thought it would be enabled by default. Hence I revert my -1 vote.&lt;br/&gt;
&lt;br/&gt;
I would note that one should see this attribute like a password, that then must be set on both the client code and the repository configuration.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; It should rather be easy to write a special login module that can be set by configuration and handles SSO things and co.&lt;br/&gt;
&lt;br/&gt;
As Felix pointed out to me, certain login mechanisms like openID, which involve multiple http requests, cannot be easily done by a jackrabbit loginmodule.</comment>
                    <comment id="12766047" author="fmeschbe" created="Thu, 15 Oct 2009 13:29:58 +0100"  >Thanks for reverting your veto. So We keep this change committed.</comment>
                </comments>
                    <attachments>
                    <attachment id="12422067" name="JCR-2355.patch" size="5769" author="fmeschbe" created="Wed, 14 Oct 2009 08:20:16 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 14 Oct 2009 13:38:54 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>143119</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>280145</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>