<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:47:44 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2031/JCR-2031.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2031] Improved log message: include path</title>
                <link>https://issues.apache.org/jira/browse/JCR-2031</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>The cluster logs a message for each appended operation. The log message is currently the revision number. A more interesting log message would be the user name, and the path of the change (the most specific path if the change contains multiple nodes).</description>
                <environment></environment>
            <key id="12417060">JCR-2031</key>
            <summary>Improved log message: include path</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="tmueller">Thomas Mueller</assignee>
                                <reporter username="tmueller">Thomas Mueller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Mar 2009 13:48:41 +0000</created>
                <updated>Mon, 26 Mar 2012 08:18:33 +0100</updated>
                    <resolved>Wed, 1 Apr 2009 16:41:41 +0100</resolved>
                                            <fixVersion>1.6</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12682678" author="tmueller" created="Tue, 17 Mar 2009 13:53:09 +0000"  >patch against Jackrabbit 1.4. Example output:&lt;br/&gt;
&lt;br/&gt;
17.03.2009 14:43:37 *INFO * ClusterNode: 18216140 admin@/apps/acme/templates/contentpage/thumbnail.png (ClusterNode.java, line 631)</comment>
                    <comment id="12694585" author="tmueller" created="Wed, 1 Apr 2009 16:41:30 +0100"  >Committed in revision 760900 (trunk)&lt;br/&gt;
Please note the log level for this path is &amp;#39;debug&amp;#39; so you will not see the message by default.</comment>
                    <comment id="13236550" author="meteatamel" created="Fri, 23 Mar 2012 12:53:26 +0000"  >While looking at this for some other bug, I found some issues with this fix. For example, if i create three nested nodes (eg. hello/world/jackrabbit) like this:&lt;br/&gt;
&lt;br/&gt;
Node root = session.getRootNode(); &lt;br/&gt;
&lt;br/&gt;
Node hello = root.addNode(&amp;quot;hello&amp;quot;);&lt;br/&gt;
session.save();&lt;br/&gt;
&lt;br/&gt;
Node world = hello.addNode(&amp;quot;world&amp;quot;); &lt;br/&gt;
session.save(); &lt;br/&gt;
&lt;br/&gt;
Node jackrabbit = world.addNode(&amp;quot;jackrabbit&amp;quot;); &lt;br/&gt;
session.save();&lt;br/&gt;
&lt;br/&gt;
I see the following in the logs for the three saves:&lt;br/&gt;
&lt;br/&gt;
revision 1 admin@&lt;br/&gt;
revision 2 admin@&lt;br/&gt;
revision 3 admin@/hello[24]&lt;br/&gt;
&lt;br/&gt;
The problem with this is:&lt;br/&gt;
1- Not sure what &amp;quot;admin@&amp;quot; means. I think this should be &amp;quot;admin@ / &amp;quot; to signify that something is written to the root.&lt;br/&gt;
2- Even though &amp;quot;world&amp;quot; node was added under &amp;quot;hello&amp;quot; node, it shows up as being added to root in revision 2. &lt;br/&gt;
3- Even though &amp;quot;jackrabbit&amp;quot; node was added under &amp;quot;world&amp;quot; node, it shows up as being added to &amp;quot;hello&amp;quot; node in revision 3.&lt;br/&gt;
&lt;br/&gt;
I think the logs should look like this:&lt;br/&gt;
&lt;br/&gt;
revision 1 admin@/&lt;br/&gt;
revision 2 admin@/hello[25]&lt;br/&gt;
revision 3 admin@/hello[25]/world</comment>
                    <comment id="13236553" author="meteatamel" created="Fri, 23 Mar 2012 12:55:10 +0000"  >The patch that fixes the issues I outlined.</comment>
                    <comment id="13236555" author="meteatamel" created="Fri, 23 Mar 2012 12:57:51 +0000"  >Could someone with commit rights apply the patch for me please?</comment>
                    <comment id="13238116" author="c_koell" created="Mon, 26 Mar 2012 06:47:50 +0100"  >Hi,&lt;br/&gt;
It would be better to create a new issue because this is already closed.&lt;br/&gt;
</comment>
                    <comment id="13238159" author="meteatamel" created="Mon, 26 Mar 2012 08:18:33 +0100"  >Right. Opened &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-3275&quot; title=&quot;Audit log&quot;&gt;&lt;strike&gt;JCR-3275&lt;/strike&gt;&lt;/a&gt;.</comment>
                </comments>
                    <attachments>
                    <attachment id="12402391" name="improvedLogMessage.patch" size="3061" author="tmueller" created="Tue, 17 Mar 2009 13:53:09 +0000" />
                    <attachment id="12519615" name="JCR-2031.patch" size="1235" author="meteatamel" created="Fri, 23 Mar 2012 12:55:10 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 23 Mar 2012 12:53:26 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142968</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>280057</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>