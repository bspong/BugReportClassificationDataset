<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:55:27 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2916/JCR-2916.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2916] Avoid String.intern() when indexing</title>
                <link>https://issues.apache.org/jira/browse/JCR-2916</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Lucene 3.0 now allows to create Fields with a String name that is already interned. We should use the new constructor in NodeIndexer to avoid unnecessary String.intern() calls. The field names Jackrabbit uses are available in FieldNames and already interned.</description>
                <environment></environment>
            <key id="12501473">JCR-2916</key>
            <summary>Avoid String.intern() when indexing</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2011 15:52:55 +0000</created>
                <updated>Tue, 8 Nov 2011 15:55:52 +0000</updated>
                    <resolved>Tue, 5 Apr 2011 14:22:41 +0100</resolved>
                                            <fixVersion>2.3</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13009150" author="alex.parvulescu" created="Mon, 21 Mar 2011 14:51:13 +0000"  >Attaching patch for lucene Field creation. I replaced all the Field constructors with the proper ones to skip the intern() call.&lt;br/&gt;
&lt;br/&gt;
The same issue seems to apply to org.apache.lucene.index.Term, it is also heavily used, and now provides a constructor that allows skipping the intern() call.&lt;br/&gt;
&lt;br/&gt;
Do you think that should be addressed in this issue too?</comment>
                    <comment id="13009611" author="mreutegg" created="Tue, 22 Mar 2011 11:01:30 +0000"  >Generally the patch look OK.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve identified two issues:&lt;br/&gt;
- IndexMigrationTest (line 71) and NodeIndexer (line 745): the field names still need to be interned. The names are not one of the already interned constants.&lt;br/&gt;
&lt;br/&gt;
Regarding Term usage: I think we should create a separate issue for that.</comment>
                    <comment id="13009644" author="alex.parvulescu" created="Tue, 22 Mar 2011 13:47:02 +0000"  >oops, good catch :)&lt;br/&gt;
&lt;br/&gt;
That also goes for ChainedTermEnumTest. &lt;br/&gt;
I redid the patch.&lt;br/&gt;
&lt;br/&gt;
I also changed the IDFieldTest to show the difference between the 2 constructors.&lt;br/&gt;
Interesting enough, just taking out id.toString() shaved off more than 90% of the test time so it may not have been the most conclusive test.&lt;br/&gt;
(for me the old test went from 800ms to 30ms)&lt;br/&gt;
&lt;br/&gt;
Anyway, now it compares the 2 ways, so it should be a tiny bit more relevant.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="13009649" author="alex.parvulescu" created="Tue, 22 Mar 2011 13:55:16 +0000"  >created issue for the Lucene Term thing</comment>
                    <comment id="13009688" author="alex.parvulescu" created="Tue, 22 Mar 2011 16:09:12 +0000"  >Attached a small JavaDoc change to InternalValue, maybe we can sneak this one in too, when applying the patch.&lt;br/&gt;
&lt;br/&gt;
It is too small to have its own issue.</comment>
                    <comment id="13015913" author="jukkaz" created="Tue, 5 Apr 2011 14:22:41 +0100"  >Patches committed in revision 1089030. Thanks!</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12502048">JCR-2924</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12474183" name="JCR-2916-fields.patch" size="17482" author="alex.parvulescu" created="Mon, 21 Mar 2011 14:51:13 +0000" />
                    <attachment id="12474294" name="JCR-2916-fields-v2.patch" size="18143" author="alex.parvulescu" created="Tue, 22 Mar 2011 13:47:02 +0000" />
                    <attachment id="12474305" name="JCR-2916-InternalValue-javadoc.patch" size="1882" author="alex.parvulescu" created="Tue, 22 Mar 2011 16:09:12 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 21 Mar 2011 14:51:13 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>97788</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>250292</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>