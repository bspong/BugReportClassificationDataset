<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:53:18 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2343/JCR-2343.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2343] Utility class to tranform JCR-SQL2 to/from JCR-JQOM</title>
                <link>https://issues.apache.org/jira/browse/JCR-2343</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>The JCR2 doc specify that both contain the same thing and can be translated from one to another&lt;br/&gt;
in a straightforward manner. The jackrabbit-jcr-commons module should offer a utility class to transform&lt;br/&gt;
from one language to another in a generic way, &lt;br/&gt;
&lt;br/&gt;
for exemple :&lt;br/&gt;
- String toSQL2(QueryObjectModel qom)&lt;br/&gt;
- QueryObjectModel toJQOM(QueryObjectModelFactory factory, String query)</description>
                <environment></environment>
            <key id="12437108">JCR-2343</key>
            <summary>Utility class to tranform JCR-SQL2 to/from JCR-JQOM</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="eclesia">johann sorel</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Oct 2009 11:38:22 +0100</created>
                <updated>Mon, 11 Jan 2010 14:16:26 +0000</updated>
                    <resolved>Thu, 15 Oct 2009 21:22:01 +0100</resolved>
                            <version>2.0-beta1</version>
                                <fixVersion>2.0-beta1</fixVersion>
                                <component>jackrabbit-jcr-commons</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12763881" author="mreutegg" created="Fri, 9 Oct 2009 08:06:11 +0100"  >Please note that jackrabbit already provides such a functionality.&lt;br/&gt;
&lt;br/&gt;
- To convert from JQOM to SQL2 simply call:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;qom.getStatement()&lt;br/&gt;
&lt;br/&gt;
- To convert from SQL2 to JQOM call:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;QueryManager qm = ...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;QueryObjectModel qom = (QueryObjectModel) qm.createQuery(sql2, Query.JCR_SQL2);&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m not sure if anything else beyond that is really needed.</comment>
                    <comment id="12763885" author="eclesia" created="Fri, 9 Oct 2009 08:23:23 +0100"  >the two methods :&lt;br/&gt;
qom.getStatement();&lt;br/&gt;
qm.createQuery(sql2, Query.JCR_SQL2); &lt;br/&gt;
&lt;br/&gt;
Are part of JCR interfaces, They don&amp;#39;t do any work unless you implement them.&lt;br/&gt;
What I was trying to say is that a basic implementation should be provided in the jackrabbit-jcr-commons module.&lt;br/&gt;
That&amp;#39;s why I suggest a QueryUtilities class could be made for this purpose since it&amp;#39;s straightforward code.</comment>
                    <comment id="12763894" author="mreutegg" created="Fri, 9 Oct 2009 08:50:47 +0100"  >I see. In that case you can use QueryObjectModelBuilder in jackrabbit-spi-commons.&lt;br/&gt;
&lt;br/&gt;
- from JQOM to SQL2:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;QueryObjectModelBuilderRegistry.getQueryObjectModelBuilder(Query.JCR_SQL2).toString(qom);&lt;br/&gt;
&lt;br/&gt;
- from SQL2 to JQOM:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;QueryObjectModelFactory qf = ...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ValueFactory vf = ...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;QueryObjectModelBuilder qomBuilder = QueryObjectModelBuilderRegistry.getQueryObjectModelBuilder(Query.JCR_SQL2);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;qomBuilder.createQueryObjectModel(sql2, qf, vf);</comment>
                    <comment id="12763905" author="eclesia" created="Fri, 9 Oct 2009 09:15:31 +0100"  >That&amp;#39;s a solution, I agree, but not an available one for us.&lt;br/&gt;
&lt;br/&gt;
I guess this case is special for our applications. &lt;br/&gt;
Our analyze of jackrabbit has show us the fact that jackrabbit-SPI is to far from JCR.&lt;br/&gt;
Since we are making a JCR implementation for our data model (Geographic Information Systems) we choose to limit our use of jackrabbit to the JCR-commun module.&lt;br/&gt;
There are four main reasons why we don&amp;#39;t wont to depend on jackrabbit spi.&lt;br/&gt;
- First it&amp;#39;s to far from the JCR specification, it&amp;#39;s like a second jcr definition.&lt;br/&gt;
- We have to learn jackrabbit spi, which is a useless extra step because we want jcr, not spi.&lt;br/&gt;
- We lose the control over the code, we have no control over cache, real JCR object, nodes, node types and so on. Spi makes an automatic mapping to jcr interfaces that we don&amp;#39;t control.&lt;br/&gt;
- And it adds more dependency where we already have more than 40Mb of jars&lt;br/&gt;
&lt;br/&gt;
My question now : &lt;br/&gt;
Is the code handling JQOM/SQL2 really binded to SPI or is it generic/abstract enough to be moved in jackrabbit-jcr-common ?</comment>
                    <comment id="12763931" author="mreutegg" created="Fri, 9 Oct 2009 10:25:03 +0100"  >AFAICS it does not depend on SPI packages and could be moved to jcr-commons, but this would also affect public classes that we already released and it would potentially break existing code when users upgrade to 2.0.&lt;br/&gt;
&lt;br/&gt;
This mainly affects the SQL2 Parser class, other classes were introduced after the 1.6 release and are not a problem. What do others think? Should we move it to jcr-commons?</comment>
                    <comment id="12766218" author="mreutegg" created="Thu, 15 Oct 2009 21:22:01 +0100"  >Moved classes JoinType, Operator and Order in package qom (spi-commons) to jcr-commons. Same for QueryObjectModelBuilder and QueryObjectModelBuilderFactory.&lt;br/&gt;
&lt;br/&gt;
Parser (sql2) in spi-commons is now deprecated and extends from the class with the same name in jcr-commons that should now be used.&lt;br/&gt;
&lt;br/&gt;
I had to leave the test cases for the SQL2 parser in spi-commons because of the dependencies it has.&lt;br/&gt;
&lt;br/&gt;
svn revision: 825633</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 9 Oct 2009 07:06:11 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>143114</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>280149</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>