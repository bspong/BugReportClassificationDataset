<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:59:49 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-3280/JCR-3280.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-3280] SQL2 joins on empty sets are not efficient</title>
                <link>https://issues.apache.org/jira/browse/JCR-3280</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>It seems that in the cases where the LEFT side of the join doesn&amp;#39;t contain any hits, the QueryEngine in unable to generate an efficient query for the RIGHT side, so it basically select all the possible nodes.&lt;br/&gt;
See this discussion as context [0].&lt;br/&gt;
&lt;br/&gt;
Example:&lt;br/&gt;
LEFT side has hits, RIGHT side select is fast given some conditions: &lt;br/&gt;
&amp;gt; SQL2 JOIN LEFT SIDE took 18 ms. fetched 145 rows.&lt;br/&gt;
&amp;gt; SQL2 JOIN RIGHT SIDE took 67 ms. fetched 0 rows.&lt;br/&gt;
&lt;br/&gt;
LEFT side has no hits, RIGHT select everything&lt;br/&gt;
&amp;gt; SQL2 JOIN LEFT SIDE took 8 ms. fetched 0 rows.&lt;br/&gt;
&amp;gt; SQL2 JOIN RIGHT SIDE took 845 ms. fetched 13055 rows.&lt;br/&gt;
...so it fetches 130k nodes and doesn&amp;#39;t keep any of them.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
[0] &lt;a href=&quot;http://jackrabbit.510166.n4.nabble.com/Strange-Search-Performance-problem-with-OR-td4507121.html&quot;&gt;http://jackrabbit.510166.n4.nabble.com/Strange-Search-Performance-problem-with-OR-td4507121.html&lt;/a&gt;&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12548341">JCR-3280</key>
            <summary>SQL2 joins on empty sets are not efficient</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="alex.parvulescu">Alex Parvulescu</assignee>
                                <reporter username="alex.parvulescu">Alex Parvulescu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Mar 2012 17:10:07 +0100</created>
                <updated>Sun, 27 May 2012 10:48:44 +0100</updated>
                    <resolved>Wed, 28 Mar 2012 15:02:31 +0100</resolved>
                                            <fixVersion>2.4.1</fixVersion>
                <fixVersion>2.5</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13239592" author="alex.parvulescu" created="Tue, 27 Mar 2012 17:14:07 +0100"  >proposed patch.&lt;br/&gt;
&lt;br/&gt;
it seems that if the left side is empty, there is no real need to query the right side anyway.&lt;br/&gt;
&lt;br/&gt;
just for context, right join queries are rewritten to left join before running.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="13239717" author="chregu" created="Tue, 27 Mar 2012 18:46:15 +0100"  >you&amp;#39;re my hero. the queries are now fast. &lt;br/&gt;
Will report, if some issues pop up, but testsuite ran without problems</comment>
                    <comment id="13240428" author="alex.parvulescu" created="Wed, 28 Mar 2012 15:02:31 +0100"  >you are welcome :)&lt;br/&gt;
&lt;br/&gt;
fixed in revision 1306337.</comment>
                    <comment id="13240439" author="jukkaz" created="Wed, 28 Mar 2012 15:24:51 +0100"  >Nice! This seems important (and low-risk) enough to be included already in 2.4.1, so I merged it to the 2.4 branch in revision 1306367.</comment>
                    <comment id="13240443" author="alex.parvulescu" created="Wed, 28 Mar 2012 15:28:25 +0100"  >cool, thanks Jukka!</comment>
                </comments>
                    <attachments>
                    <attachment id="12520141" name="JCR-3280.patch" size="841" author="alex.parvulescu" created="Tue, 27 Mar 2012 17:14:07 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 27 Mar 2012 17:46:15 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>233439</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>280365</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>