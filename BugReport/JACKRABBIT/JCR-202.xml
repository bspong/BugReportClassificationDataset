<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:58:41 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-202/JCR-202.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-202] Add configuration options for search manager</title>
                <link>https://issues.apache.org/jira/browse/JCR-202</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Right now, if the search manager is active, everything is indexed, even the system branch of a workspace with the versions.&lt;br/&gt;
&lt;br/&gt;
take parameters / conditions into account whether a node should be indexed:&lt;br/&gt;
- path&lt;br/&gt;
- node type&lt;br/&gt;
- property type&lt;br/&gt;
- property name&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
see also &lt;a href=&quot;http://thread.gmane.org/gmane.comp.apache.jackrabbit.devel/3343&quot;&gt;http://thread.gmane.org/gmane.comp.apache.jackrabbit.devel/3343&lt;/a&gt;</description>
                <environment>all</environment>
            <key id="12314011">JCR-202</key>
            <summary>Add configuration options for search manager</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="aemi">Michael Aemisegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Aug 2005 23:03:17 +0100</created>
                <updated>Tue, 15 Jan 2008 23:26:33 +0000</updated>
                    <resolved>Fri, 20 Apr 2007 09:46:22 +0100</resolved>
                                            <fixVersion>1.4</fixVersion>
                                <component>config</component>
                <component>indexing</component>
                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12360908" author="mreutegg" created="Tue, 20 Dec 2005 20:24:58 +0000"  >With resolution of &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-257&quot; title=&quot;Use separate index for jcr:system tree&quot;&gt;&lt;strike&gt;JCR-257&lt;/strike&gt;&lt;/a&gt; it is now possible to exclude /jcr:system from indexing.</comment>
                    <comment id="12447800" author="jan_kuzniak" created="Tue, 7 Nov 2006 14:22:26 +0000"  >Hello,&lt;br/&gt;
&lt;br/&gt;
I started working on this issue and I have some ideas that I would like to discuss here. To cut a long story short, I think of implementing this configuration as a set of rules for including/excluding elements. Before adding node to index the rules should be checked and indexing engine should apply to first rule this node matches.&lt;br/&gt;
&lt;br/&gt;
I think of storing this configuration in XML file, and my first thought is workspace.xml and repository.xml (as a template for workspace.xml). XML configuration should look like as follows:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!-- ==================== &amp;lt;SearchConfiguration&amp;gt; ======================== --&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!--&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;The SearchConfiguration element allows to include/exclude parts of &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repository from indexing. It is achieved using rules. First rule is&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the most significant one and the last one (default rule) is the least&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;significant one.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;If no SearchConfiguration is specified, the default configuration is &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;assumed:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;SearchConfiguration&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;SearchRule action=&amp;quot;include&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/SearchConfiguration&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!ELEMENT SearchConfiguration (SearchRule+)&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!--&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;The SearchRule element includes/excludes part of repository from &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;indexing. It has one required attributes - action to be taken when node&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;matches this rule - include or exclude this node from indexing. If no&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;other attributes are spefified, all nodes will match this rule.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;If nodePath is specified - nodes in given path (and below) will match. &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Any valid java.util.regex regular expression is allowed.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;If nodeType is specified - nodes of given type will match. Both &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;attributes can be specified at once.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!ELEMENT SearchRule (NodeAttribute*)&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!ATTLIST SearchRule&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;nodePath (CDATA) #IMPLIED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;nodeType (CDATA) #IMPLIED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;action (include|exclude) #REQUIRED&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!--&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;The NodeAttribute element allows to include/exclude attributes of node&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;from indexing. It has one required attributes - action to be taken when &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;attribute matches this rule - include or exclude this attribute from &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;indexing. If no other attributes are spefified, all attributes will &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;match this rule.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;If attributeName is specified - attributes with given names will match. &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Any valid java.util.regex regular expression is allowed.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;If attributeType is specified - attributes of given type will match. &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Both attributes can be specified at once. If no NodeAttribute is &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;specified for search rule, default configuration is assumed:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;NodeAttribute action=&amp;quot;include&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;--&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!ELEMENT NodeAttribute EMPTY&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!ATTLIST NodeAttribute&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;attributeName (CDATA) #IMPLIED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;attributeType (CDATA) #IMPLIED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;action (include|exclude) #REQUIRED&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!-- ==================== &amp;lt;/SearchConfiguration&amp;gt; ======================= --&amp;gt;&lt;br/&gt;
&lt;br/&gt;
I am waiting for your comments and suggestions.&lt;br/&gt;
&lt;br/&gt;
Regards,&lt;br/&gt;
Jan</comment>
                    <comment id="12447809" author="cedric" created="Tue, 7 Nov 2006 14:42:48 +0000"  >May the above rule-based suggestion be only a default implementation of the SearchConfiguration ?&lt;br/&gt;
IMHO with these simple XML rules, you can&amp;#39;t cover all possibilities.&lt;br/&gt;
&lt;br/&gt;
What about &amp;lt;SearchConfiguration class=&amp;quot;whatever&amp;quot;/&amp;gt; ? &lt;br/&gt;
Where the class is an implementation simply answering to &lt;br/&gt;
boolean include (Node node);&lt;br/&gt;
boolean exclude (Node node);&lt;br/&gt;
&lt;br/&gt;
Your proposed rule-based implementation may become the standard, default one, while enabling more advanced needs to be also implemented.&lt;br/&gt;
&lt;br/&gt;
Thoughts ?</comment>
                    <comment id="12448393" author="jan_kuzniak" created="Thu, 9 Nov 2006 08:28:22 +0000"  >Yes C&amp;#xE9;dric, I find it a good idea to make this configuration as wide as possible, especially that I can easily think of more sophisticated cases (e.g. using decision tree).&lt;br/&gt;
&lt;br/&gt;
In that case, I&amp;#39;ll add two more parameters to SearchConfiguration:&lt;br/&gt;
&amp;lt;!ATTLIST SearchConfiguration&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;class CDATA #IMPLIED &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;configurationFile CDATA #IMPLIED &amp;gt;&lt;br/&gt;
first one will allow to force use of different configuration mechanism, and second one to pass configuration file for this specific mechanism.&lt;br/&gt;
&lt;br/&gt;
Although I will leave possibility to put configuration into repository.xml.&lt;br/&gt;
&lt;br/&gt;
Regards,&lt;br/&gt;
&amp;nbsp;Jan</comment>
                    <comment id="12448395" author="jan_kuzniak" created="Thu, 9 Nov 2006 08:36:33 +0000"  >One more thing - I am going to implement only boolean include (Node node) just to avoid confusions: exclude(node) is equivalent to !include(node).</comment>
                    <comment id="12453541" author="jan_kuzniak" created="Mon, 27 Nov 2006 10:01:53 +0000"  >Ok, after quite a while of work here it comes. I was not as easy as I thought and I had to change few parts of the code. If you have any questions about this changes, please ask without hesistation.&lt;br/&gt;
&lt;br/&gt;
Patch consists of 16 new files (in folder structure of course) and 11 changed files (in standard svn .patch file).&lt;br/&gt;
&lt;br/&gt;
Regards,&lt;br/&gt;
&amp;nbsp;Jan</comment>
                    <comment id="12490263" author="mreutegg" created="Fri, 20 Apr 2007 09:25:45 +0100"  >There are a couple of issues with the proposed patch:&lt;br/&gt;
&lt;br/&gt;
- The configuration is query handler dependent and should therefore not be prescribed in the repository.xml. The configuration should rather be added as a separate XML file.&lt;br/&gt;
- Completely excluding certain nodes from indexing can have severe side effects because the index depends on each node being indexed to resolve the node hierarchy.&lt;br/&gt;
- Matches of property names do not respect the namespace URI&lt;br/&gt;
- The class NodeStateLocationAware extends from NodeState and adds the path as a fixed value, the path should rather be retrieved from a hierarchy manager.</comment>
                    <comment id="12490268" author="mreutegg" created="Fri, 20 Apr 2007 09:38:25 +0100"  >This is an alternative implementation to solve this issue. It also supports indexing aggregates and boost configuration.</comment>
                    <comment id="12490272" author="mreutegg" created="Fri, 20 Apr 2007 09:46:22 +0100"  >Committed my proposed patch in revision: 530696</comment>
                    <comment id="12493678" author="mreutegg" created="Fri, 4 May 2007 14:42:38 +0100"  >Fixed malformed DTD in revision: 535238</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12317235">JCR-220</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12345812" name="indexConfigurationPatch.zip" size="37180" author="jan_kuzniak" created="Mon, 27 Nov 2006 10:01:53 +0000" />
                    <attachment id="12355896" name="indexing-configuration.patch.gz" size="14638" author="mreutegg" created="Fri, 20 Apr 2007 09:41:44 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 20 Dec 2005 20:24:58 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142012</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191073</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>