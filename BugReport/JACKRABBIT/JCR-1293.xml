<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:44:44 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1293/JCR-1293.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1293] ReorderReferenceableSNSTest failure</title>
                <link>https://issues.apache.org/jira/browse/JCR-1293</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>I have checked out the Jackrabbit 1.4 branch to a new directory, and called:&lt;br/&gt;
&lt;br/&gt;
mvn clean install&lt;br/&gt;
&lt;br/&gt;
The error is:&lt;br/&gt;
&lt;br/&gt;
Building Jackrabbit JCR to SPI&lt;br/&gt;
&amp;nbsp;&amp;nbsp;task-segment: [clean, install]&lt;br/&gt;
---------------------------------&lt;br/&gt;
...&lt;br/&gt;
testRevertReorder(org.apache.jackrabbit.jcr2spi.ReorderReferenceableSNSTest)&lt;br/&gt;
junit.framework.AssertionFailedError: Reorder added a child node.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.jcr2spi.ReorderTest.testOrder(ReorderTest.java:90)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.jcr2spi.ReorderTest.testRevertReorder(ReorderTest.java:122)&lt;br/&gt;
</description>
                <environment>Windows XP, Sun JDK 1.4.2_13</environment>
            <key id="12385709">JCR-1293</key>
            <summary>ReorderReferenceableSNSTest failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="tmueller">Thomas Mueller</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Jan 2008 14:53:59 +0000</created>
                <updated>Mon, 8 Dec 2008 11:09:33 +0000</updated>
                    <resolved>Thu, 30 Oct 2008 17:09:21 +0000</resolved>
                            <version>1.4</version>
                                <fixVersion>1.5</fixVersion>
                                <component>jackrabbit-jcr2spi</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12556592" author="anchela" created="Mon, 7 Jan 2008 15:39:07 +0000"  >checked out 1.4 branch and tried to build it&lt;br/&gt;
&lt;br/&gt;
1st try:&lt;br/&gt;
-----------------------------------------------------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
didn&amp;#39;t manage to get to the jcr2spi tests. the build already failed at the core&lt;br/&gt;
&lt;br/&gt;
Running org.apache.jackrabbit.core.integration.JCRAPITest&lt;br/&gt;
&lt;br/&gt;
Failed tests:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;testRestoreName(org.apache.jackrabbit.test.api.version.RestoreTest)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
2nd try:&lt;br/&gt;
-----------------------------------------------------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
core passed. &lt;br/&gt;
but jcr2spi build fails due to:&lt;br/&gt;
&lt;br/&gt;
Failed tests:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;testRestoreName(org.apache.jackrabbit.test.api.version.RestoreTest)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12556597" author="anchela" created="Mon, 7 Jan 2008 15:41:32 +0000"  >&lt;br/&gt;
3rd try:&lt;br/&gt;
----------------------------------------------------------------------------------------------------- &lt;br/&gt;
&lt;br/&gt;
building jackrabbit-core fails again:&lt;br/&gt;
&lt;br/&gt;
Failed tests:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;testRestoreName(org.apache.jackrabbit.test.api.version.RestoreTest)</comment>
                    <comment id="12556624" author="tripod" created="Mon, 7 Jan 2008 17:05:13 +0000"  >i get the same as thomas. building and testing core works like a charm, reorder test fails.&lt;br/&gt;
&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
Test set: org.apache.jackrabbit.jcr2spi.TestAll&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
Tests run: 218, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 2.394 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
testRevertReorderToEnd(org.apache.jackrabbit.jcr2spi.ReorderReferenceableSNSTest)  Time elapsed: 0.02 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!&lt;br/&gt;
junit.framework.AssertionFailedError: Reorder added a child node.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.jcr2spi.ReorderTest.testOrder(ReorderTest.java:90)</comment>
                    <comment id="12556629" author="tripod" created="Mon, 7 Jan 2008 17:17:47 +0000"  >the test passes/fails at random. not sure if this is really related to issue &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1197&quot; title=&quot;Node.restore() may throw InvalidItemStateException&quot;&gt;&lt;strike&gt;JCR-1197&lt;/strike&gt;&lt;/a&gt; anymore.</comment>
                    <comment id="12556643" author="anchela" created="Mon, 7 Jan 2008 17:55:36 +0000"  >i don&amp;#39;t manage to get the reorder-test failing.&lt;br/&gt;
after running the build a couple of times, the restore-tests pass as well (and yes i had that before but i never paid attention to it)...</comment>
                    <comment id="12556850" author="tripod" created="Tue, 8 Jan 2008 09:13:27 +0000"  >i was able to reproduce the failure a couple of times. although only when running the test&lt;br/&gt;
on a already tested repository. i.e. the first time (when the repository is created) all tests pass.&lt;br/&gt;
i also reverted the changes from issue 1197 but the error still occurs. so i think it is not related to that issue. &lt;br/&gt;
&lt;br/&gt;
when debugging the test - it passed (of course :-). so i think there is a async. problem somewhere. either in a weak hashmap or some async listener.</comment>
                    <comment id="12557038" author="jukkaz" created="Tue, 8 Jan 2008 21:06:57 +0000"  >While testing for this, I also saw occasional failures of  o.a.j.test.api.version.RemoveVersionTest and o.a.j.jcr2spi.version.LabelTest.&lt;br/&gt;
&lt;br/&gt;
In revision 610155 I tagged all three test cases as known issues for the 1.4 release. Once we figure this out,  we can include a fix in a 1.4.x patch release.</comment>
                    <comment id="12557347" author="anchela" created="Wed, 9 Jan 2008 17:30:38 +0000"  >i managed to get the ReorderReferenceableSNSTest.testRevertReorder failing.&lt;br/&gt;
&lt;br/&gt;
up to now i saw 2 variants of the reorder-tests failing (both due to additional child-nodes) &lt;br/&gt;
and i don&amp;#39;t know yet, whether they are related:&lt;br/&gt;
&lt;br/&gt;
a):&lt;br/&gt;
&lt;br/&gt;
the additional nodes had not uniqueID, means that they are not mix:referenceable&lt;br/&gt;
in the underlying jackrabbit repository (which i verified looking at the jackrabbit-nodes directly).&lt;br/&gt;
this is somehow unexpected sinde the tests only creates referenceable child nodes (at least it &lt;br/&gt;
are intended to do so).&lt;br/&gt;
the result in this situation is always: inconsistent state and the teardown fails with InvalidItemStateException.&lt;br/&gt;
&lt;br/&gt;
b)&lt;br/&gt;
&lt;br/&gt;
cleanUpTestRoot of the AbstractJCRTest is called twice both in the setup and in the teardown and&lt;br/&gt;
it retrieves all child-nodes from the testRoot and removes them.&lt;br/&gt;
i saw, that from time to time not all child-nodes get removed (i imagine due to the weak nature&lt;br/&gt;
of the hierarchy)... in this case one test simple failed without causing inconsistencies for the &lt;br/&gt;
subsequent tests.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 7 Jan 2008 15:39:07 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78610</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>252711</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>