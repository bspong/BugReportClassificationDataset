<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:33:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-832/JCR-832.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-832] BundleDBPersistenceManager does not free blobStore resources</title>
                <link>https://issues.apache.org/jira/browse/JCR-832</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>When removing binary property from node or removing node containing binary property, resources occupied by binary property are not freed (orphaned records remains in associated ${schemaObjectPrefix}BINVAL table).</description>
                <environment></environment>
            <key id="12366382">JCR-832</key>
            <summary>BundleDBPersistenceManager does not free blobStore resources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="tripod">Tobias Bocanegra</assignee>
                                <reporter username="ppakulski">Przemo Pakulski</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Apr 2007 10:50:49 +0100</created>
                <updated>Tue, 15 Jan 2008 23:26:37 +0000</updated>
                    <resolved>Fri, 14 Dec 2007 15:25:33 +0000</resolved>
                            <version>1.3</version>
                <version>1.3.1</version>
                <version>1.3.3</version>
                                <fixVersion>1.4</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12500256" author="ppakulski" created="Thu, 31 May 2007 00:03:59 +0100"  >Attached patch proposal. Abstract method destroy(PropertyState) added to AbstractBundlePM and called during store. Method implemented in BundleDB PM to ensure that blob resources are removed from underlying blobstore.&lt;br/&gt;
&lt;br/&gt;
Not sure if something needs to be done in BundleFS PM, so method remains empty there.&lt;br/&gt;
</comment>
                    <comment id="12503038" author="jukkaz" created="Sat, 9 Jun 2007 09:53:13 +0100"  >Looks good to me.&lt;br/&gt;
&lt;br/&gt;
Przemo, feel free to commit this. (Though it would be nice if you used spaces instead of tabs.)&lt;br/&gt;
</comment>
                    <comment id="12529247" author="jukkaz" created="Thu, 20 Sep 2007 21:07:26 +0100"  >Toby or Przemo, are you planning to act on this in near future? If not, I&amp;#39;ll take over and commit the patch in a few days.</comment>
                    <comment id="12529845" author="jukkaz" created="Mon, 24 Sep 2007 13:46:42 +0100"  >This seems more complex than expected. There is already an existing &amp;quot;remove property&amp;quot; code path based on BLOBFileValue.remove(), but that doesn&amp;#39;t work correctly for database persistence with externalBLOBs set to false because the BLOBFileValue.remove() call ends up removing the temporary copy of the value instead of the actual database row.&lt;br/&gt;
&lt;br/&gt;
Instead of adding a new code path for handling database persistence, I&amp;#39;d rather have a way that hooks the required functionality to the existing code path.&lt;br/&gt;
&lt;br/&gt;
Also, this issue might get obsoleted with the new data store feature.&lt;br/&gt;
&lt;br/&gt;
Thus, I&amp;#39;m removing this issue from the 1.3.2 roadmap.</comment>
                    <comment id="12551721" author="tripod" created="Fri, 14 Dec 2007 07:51:25 +0000"  >right. since the handling of blobs is dependent of the bundlebinding i suggest to include this in the nodeprop bundles and let the &amp;#39;destroy&amp;#39; method of the property entry free the resource. &lt;br/&gt;
&lt;br/&gt;
i will attach a patch.</comment>
                    <comment id="12551742" author="jukkaz" created="Fri, 14 Dec 2007 09:41:15 +0000"  >+1 That looks nice and clean!</comment>
                    <comment id="12551750" author="stefan@jira" created="Fri, 14 Dec 2007 10:41:03 +0000"  >yup, +1 for toby&amp;#39;s patch</comment>
                    <comment id="12551831" author="tripod" created="Fri, 14 Dec 2007 15:25:33 +0000"  >committed proposed patch @ revision 604211.</comment>
                </comments>
                    <attachments>
                    <attachment id="12371656" name="jcr-832.patch" size="10570" author="tripod" created="Fri, 14 Dec 2007 09:11:33 +0000" />
                    <attachment id="12358583" name="JCR-832-patch.txt" size="10561" author="ppakulski" created="Thu, 31 May 2007 00:03:59 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sat, 9 Jun 2007 08:53:13 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78756</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191944</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>