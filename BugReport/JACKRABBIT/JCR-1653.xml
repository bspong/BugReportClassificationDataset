<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:51:59 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1653/JCR-1653.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1653] NodeIdImpl is not really serializable </title>
                <link>https://issues.apache.org/jira/browse/JCR-1653</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>I&amp;#39;ve been trying to get jcr2spi - rmi - spi2jcr to work. &lt;br/&gt;
&lt;br/&gt;
The error I&amp;#39;m seeing is reported as:&lt;br/&gt;
java.io.NotSerializableException: org.apache.jackrabbit.spi.commons.identifier.IdFactoryImpl&lt;br/&gt;
&lt;br/&gt;
I believe I tracked this down.  It is because NodeIdImpl is implicitly referencing its containing instance IdFactoryImpl which is not serializable.&lt;br/&gt;
&lt;br/&gt;
NodeIdImpl is attempted to be serialized, in my case, with the following stack:&lt;br/&gt;
&lt;br/&gt;
at org.apache.jackrabbit.spi.rmi.client.ClientRepositoryService.getItemInfos(ClientRepositoryService.java:258)&lt;br/&gt;
at org.apache.jackrabbit.jcr2spi.state.WorkspaceItemStateFactory.createNodeState(WorkspaceItemStateFactory.java:94)&lt;br/&gt;
at org.apache.jackrabbit.jcr2spi.state.TransientISFactory.createNodeState(TransientISFactory.java:99)&lt;br/&gt;
at org.apache.jackrabbit.jcr2spi.hierarchy.NodeEntryImpl.doResolve(NodeEntryImpl.java:972)&lt;br/&gt;
at org.apache.jackrabbit.jcr2spi.hierarchy.HierarchyEntryImpl.resolve(HierarchyEntryImpl.java:95)&lt;br/&gt;
at org.apache.jackrabbit.jcr2spi.hierarchy.HierarchyEntryImpl.getItemState(HierarchyEntryImpl.java:212)&lt;br/&gt;
at org.apache.jackrabbit.jcr2spi.ItemManagerImpl.getItem(ItemManagerImpl.java:170)&lt;br/&gt;
at org.apache.jackrabbit.jcr2spi.SessionImpl.getRootNode(SessionImpl.java:216)&lt;br/&gt;
&lt;br/&gt;
I think I must be doing something wrong, because it seems like this is a fundamental problem with doing jcr2spi - rmi - spi2jcr, and looking at the SVN history I don&amp;#39;t see how this ever could have worked.  &lt;br/&gt;
So either session.getRootNode() has never been tested using jcr2spi - rmi - spi2jcr, or I&amp;#39;ve got something setup wrong.</description>
                <environment></environment>
            <key id="12398349">JCR-1653</key>
            <summary>NodeIdImpl is not really serializable </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="scytacki">Scott Cytacki</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Jun 2008 18:19:31 +0100</created>
                <updated>Mon, 8 Dec 2008 11:08:01 +0000</updated>
                    <resolved>Fri, 4 Jul 2008 13:09:20 +0100</resolved>
                            <version>1.4</version>
                                <fixVersion>1.5</fixVersion>
                                <component>jackrabbit-spi-commons</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12605361" author="scytacki" created="Mon, 16 Jun 2008 18:51:41 +0100"  >The following patch fixes the error I was getting, and now things appear to work.  This patch is a little hacky.&lt;br/&gt;
&lt;br/&gt;
It makes all the inner classes static, and uses a hack to deal with the getPathFactory instance method that they were using.&lt;br/&gt;
</comment>
                    <comment id="12610562" author="mreutegg" created="Fri, 4 Jul 2008 13:02:00 +0100"  >It used to work initially, but when the ItemId implementation stuff was moved to jackrabbit-spi-commons the serialization got broken.</comment>
                    <comment id="12610566" author="mreutegg" created="Fri, 4 Jul 2008 13:09:20 +0100"  >- Turned the ItemId implementations into static classes&lt;br/&gt;
- Added PathFactory parameter to constructors where needed. ItemIds don&amp;#39;t need the factory anywhere else.&lt;br/&gt;
- Added serialVersionUID to NodeIdImpl and PropertyIdImpl&lt;br/&gt;
- Added test cases that check serializability&lt;br/&gt;
- Optimized ItemIdImpl.hashCode()&lt;br/&gt;
&lt;br/&gt;
All tests in jackrabbit trunk ran successfully. I also successfully executed the tests in sandbox/spi/client against an SPI-RMI server.&lt;br/&gt;
&lt;br/&gt;
svn revision: 674024&lt;br/&gt;
&lt;br/&gt;
Thank you for reporting this issue.</comment>
                </comments>
                    <attachments>
                    <attachment id="12384079" name="jackrabbit-spi-commons-NodeId-Serializable-1.patch" size="2777" author="scytacki" created="Mon, 16 Jun 2008 18:51:41 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 4 Jul 2008 12:02:00 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78469</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190733</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>