<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:42:35 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-388/JCR-388.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-388] add support for RFC 3253 to the simple server</title>
                <link>https://issues.apache.org/jira/browse/JCR-388</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>&lt;a href=&quot;http://www.ietf.org/rfc/rfc3253.txt&quot;&gt;http://www.ietf.org/rfc/rfc3253.txt&lt;/a&gt;</description>
                <environment></environment>
            <key id="12331708">JCR-388</key>
            <summary>add support for RFC 3253 to the simple server</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="anchela">angela</assignee>
                                <reporter username="jeremi">jeremi Joslin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Apr 2006 12:30:56 +0100</created>
                <updated>Tue, 15 Jan 2008 23:26:34 +0000</updated>
                    <resolved>Wed, 25 Jul 2007 07:46:59 +0100</resolved>
                                            <fixVersion>1.4</fixVersion>
                                <component>jackrabbit-webdav</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12373466" author="jeremi" created="Thu, 6 Apr 2006 12:52:21 +0100"  >i have a problem with the versionning. I attach the code and the diff of class I modify. The code is not really clean right now.&lt;br/&gt;
&lt;br/&gt;
The versionning is well done (i think), but I have a problem to access to the content of a version, it&amp;#39;s not working. I try with Dav Explorer to download a version, but the file contain html :&lt;br/&gt;
&lt;br/&gt;
&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;Jackrabbit 1.0-dev /jcr:system/jcr:versionStorage/95/eb/1c/95&lt;br/&gt;
eb1c99-2545-4ce4-bdd6-219e5e488929/1.2&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;h2&amp;gt;/jcr:system/jcr:v&lt;br/&gt;
ersionStorage/95/eb/1c/95eb1c99-2545-4ce4-bdd6-219e5e488929/1.2&amp;lt;/h2&amp;gt;&amp;lt;ul&amp;gt;&amp;lt;li&amp;gt;&amp;lt;a h&lt;br/&gt;
ref=&amp;quot;..&amp;quot;&amp;gt;..&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&amp;lt;/ul&amp;gt;&amp;lt;hr size=&amp;quot;1&amp;quot;&amp;gt;&amp;lt;em&amp;gt;Powered by &amp;lt;a href=&amp;quot;&lt;a href=&quot;http://www.apache&quot;&gt;http://www.apache&lt;/a&gt;.&lt;br/&gt;
org/&amp;quot;&amp;gt;Jackrabbit&amp;lt;/a&amp;gt; version 1.0-dev&amp;lt;/em&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
And with cadaver, i try to look the version report, and all the size are at 0. So maybe I do something wrong.&lt;br/&gt;
&lt;br/&gt;
I try to use the child node jcr:frozen instead of the version node, but it&amp;#39;s the same problem.&lt;br/&gt;
&lt;br/&gt;
Can someone take a look at the code?&lt;br/&gt;
&lt;br/&gt;
Thanks,&lt;br/&gt;
J&amp;#xE9;r&amp;#xE9;mi</comment>
                    <comment id="12374079" author="anchela" created="Wed, 12 Apr 2006 02:40:49 +0100"  >copied from dev-list (conversation while jira was not accessible):&lt;br/&gt;
&lt;br/&gt;
&amp;gt;a)   access to the content of a version&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt;     i assume, that you are getting the &amp;#39;dirlisting&amp;#39; export&lt;br/&gt;
&amp;gt;&amp;gt;     for the version. probably it would be wise to create&lt;br/&gt;
&amp;gt;&amp;gt;     a separate IOHandler for the versions.&lt;br/&gt;
&lt;br/&gt;
true, I just take a look, I get a DirListingExportHandler I will&lt;br/&gt;
create one for the version.&lt;br/&gt;
&lt;br/&gt;
&amp;gt;&amp;gt; b)  i try to look the version report&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
&amp;gt;&amp;gt;     maybe a bug in the report... i would start looking there.&lt;br/&gt;
</comment>
                    <comment id="12374168" author="anchela" created="Wed, 12 Apr 2006 19:02:04 +0100"  >while reviewing the patch i looked for reason the missing size in the version-report as well.&lt;br/&gt;
i&amp;#39;d say this caused by again the missing handler for versions: the DirListingExportHandler  is lazy and does not calculate the resulting size.&lt;br/&gt;
&lt;br/&gt;
regarding the review: i&amp;#39; ll try to write down the findings (mostly minor improvements and things i think are not solved gracefully in the original code of the &amp;#39;jcr-server&amp;#39;) and will upload my suggestions in a separate patch as soon as i&amp;#39;m done and performed some minimal tests.&lt;br/&gt;
&lt;br/&gt;
since i would like to take advantage of your patch to think about a better structure and how we can package things (&amp;#39;simple&amp;#39; is probably not an appropiate package name), i would suggest that to have this solved before we commit the extensions.&lt;br/&gt;
hope that&amp;#39;s fine.&lt;br/&gt;
</comment>
                    <comment id="12374308" author="jeremi" created="Thu, 13 Apr 2006 16:06:03 +0100"  >&amp;gt; while reviewing the patch i looked for reason the missing size in the version-report as well.&lt;br/&gt;
&amp;gt; i&amp;#39;d say this caused by again the missing handler for versions: the DirListingExportHandler is lazy and does not calculate the resulting size.&lt;br/&gt;
:-) Ok&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&amp;gt; regarding the review: i&amp;#39; ll try to write down the findings (mostly minor improvements and things i think are not solved gracefully in the original&lt;br/&gt;
&amp;gt; code of the &amp;#39;jcr-server&amp;#39;) and will upload my suggestions in a separate patch as soon as i&amp;#39;m done and performed some minimal tests.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; since i would like to take advantage of your patch to think about a better structure and how we can package things (&amp;#39;simple&amp;#39; is probably not an&lt;br/&gt;
&amp;gt; appropiate package name), i would suggest that to have this solved before we commit the extensions.&lt;br/&gt;
&amp;gt; hope that&amp;#39;s fine. &lt;br/&gt;
Sure. what kind of changes you want to do? &lt;br/&gt;
Simple, yes, it will not be a good name, with the acl, dav...&lt;br/&gt;
&lt;br/&gt;
How can I help you?&lt;br/&gt;
I was not here at the beginning of the week, but i will finish the IOhandler for the version maybe tomorrow.</comment>
                    <comment id="12375093" author="jeremi" created="Wed, 19 Apr 2006 18:57:03 +0100"  >hi Angela,&lt;br/&gt;
this is my patch for this task. it replace the previous one.&lt;br/&gt;
&lt;br/&gt;
Can you take a look?</comment>
                    <comment id="12376055" author="anchela" created="Mon, 24 Apr 2006 23:56:15 +0100"  >hi jeremi&lt;br/&gt;
&lt;br/&gt;
thanks for the second patch.&lt;br/&gt;
please find attached some remarks related to the patch. since i only applied the first one so far, there might be some issues that are already fixed. i realized that you improved the resource-factory and remove the commented code). generally, most of  the things i would change are actually copied from the &amp;#39;jcr&amp;#39; package... :))&lt;br/&gt;
&lt;br/&gt;
kind regards&lt;br/&gt;
angela</comment>
                    <comment id="12376165" author="jeremi" created="Tue, 25 Apr 2006 11:35:41 +0100"  >Hi,&lt;br/&gt;
thanks for all your comments. I will fix everything. I&amp;#39;m going on holidays on friday for 2 or 3 weeks, and have things to do before, so i&amp;#39;m not sure to have time to fix it before leaving. If not i will do it when i will be back.&lt;br/&gt;
&lt;br/&gt;
Yes some are fixed in the new patch, but it steel needs a lot of works.&lt;br/&gt;
&lt;br/&gt;
Thanks,&lt;br/&gt;
J&amp;#xE9;r&amp;#xE9;mi</comment>
                    <comment id="12416608" author="jeremi" created="Sat, 17 Jun 2006 11:31:07 +0100"  >Hi,&lt;br/&gt;
i&amp;#39;ve started again to work on the deltav.&lt;br/&gt;
Some things I don&amp;#39;t understand in your comments :&lt;br/&gt;
ResourceFactoryImpl:&lt;br/&gt;
-------------------------------------------------------------------------------&lt;br/&gt;
&amp;gt;- createResource(DavResourceLocator, DavServletRequest request, DavServletResponse)&lt;br/&gt;
&amp;gt; always builds a DavResourceImpl. However it should be&lt;br/&gt;
&amp;gt;  possible to access a Version, VersionHistory as resource&lt;br/&gt;
&amp;gt;  from a request -&amp;gt; missing impl.&lt;br/&gt;
&amp;gt;  Note that DavResourceFactory#createResource(DavResourceLocator, DavSession)&lt;br/&gt;
&amp;gt;  is mainly used from within the resources to build the collection&lt;br/&gt;
&amp;gt;  and members.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;I don&amp;#39;t think so because i call createResource(DavResourceLocator locator, DavSession session) after.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
DeltaVResourceImpl&lt;br/&gt;
-------------------------------------------------------------------------------                        &lt;br/&gt;
&lt;br/&gt;
&amp;gt;- addHrefProperty(DavPropertyName, Node[], boolean)&lt;br/&gt;
&amp;gt; &amp;gt; i think, it would be better to replace this by &lt;br/&gt;
&amp;gt;    &amp;#39;getHrefProperty(DavPropertyName, Node[], boolean)&amp;#39; which returns&lt;br/&gt;
&amp;gt;    the property instead of adding it directely to the prop-set.&lt;br/&gt;
&amp;gt;    &lt;br/&gt;
&amp;gt;  &amp;gt; there seems to be an error while building the href.&lt;br/&gt;
&amp;gt;    it&amp;#39;s a speciality of the original code, that Nodes are&lt;br/&gt;
&amp;gt;    represented as collections and javax.jcr.Property objects aren&amp;#39;t.&lt;br/&gt;
&amp;gt;    in the &amp;#39;simple&amp;#39; server this is different -&amp;gt; needs to check if the&lt;br/&gt;
&amp;gt;    given node represents a collection or not.&lt;br/&gt;
&lt;br/&gt;
I don&amp;#39;t understand what you want i do.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
VersionControlledResourceImpl&lt;br/&gt;
-------------------------------------------------------------------------------                       &lt;br/&gt;
&lt;br/&gt;
&amp;gt; - getVersionHistory:&lt;br/&gt;
&amp;gt;   added check if factory really created a vh-resource&lt;br/&gt;
Why we don&amp;#39;t trust the factory?&lt;br/&gt;
&lt;br/&gt;
Thanks,&lt;br/&gt;
J&amp;#xE9;r&amp;#xE9;mi</comment>
                    <comment id="12416742" author="anchela" created="Mon, 19 Jun 2006 19:27:59 +0100"  >regarding your questions:&lt;br/&gt;
&lt;br/&gt;
a) the factory should take care of building the proper resource instances.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;thus: version, versionhistory specific object if the request points to such&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;a resource.&lt;br/&gt;
&lt;br/&gt;
b) instead of &amp;#39;addHrefProperty&amp;#39; i would create a method that simply builds&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;such an HrefProperty. adding it to the property-set would be left to&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the caller.&lt;br/&gt;
&lt;br/&gt;
c) you have an error in the code while building the href.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;you only copied the code from the jcr-server without understanding that the&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;simple server works differently.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;in jcr-server a jcr-node represents a webdav collection, which does not apply&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;to the simple server.&lt;br/&gt;
&lt;br/&gt;
d) the factory is an interface that returns &amp;#39;DavResource&amp;#39; upon a call to the create&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;methods. since its an interface one could replace it by a different   &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;implementation.&lt;br/&gt;
&lt;br/&gt;
hope that helps.</comment>
                    <comment id="12499948" author="eburnette" created="Tue, 29 May 2007 23:27:24 +0100"  >What&amp;#39;s the status of this patch?</comment>
                    <comment id="12500040" author="anchela" created="Wed, 30 May 2007 07:45:07 +0100"  >i reviewed the second patch jeremi uploaded and had a couple of comments. as far as i know there is no additional patch available that would address those issues.&lt;br/&gt;
&lt;br/&gt;
regards&lt;br/&gt;
angela</comment>
                    <comment id="12500164" author="jeremi" created="Wed, 30 May 2007 16:27:37 +0100"  >no sorry i haven&amp;#39;t updated the patch.</comment>
                    <comment id="12512953" author="robowen" created="Mon, 16 Jul 2007 15:23:29 +0100"  >Updated patch attached which hopefully addresses all Angela&amp;#39;s comments.</comment>
                    <comment id="12513179" author="anchela" created="Tue, 17 Jul 2007 09:06:07 +0100"  >thanks for the contrib. i will take a look at it as soon as possible.&lt;br/&gt;
kind regards&lt;br/&gt;
angela</comment>
                    <comment id="12513183" author="anchela" created="Tue, 17 Jul 2007 09:45:22 +0100"  >rob, how did you create the patch? i don&amp;#39;t manage to apply it using tortoiseSVN...</comment>
                    <comment id="12513222" author="eburnette" created="Tue, 17 Jul 2007 13:08:02 +0100"  >(Rob and I work together) I believe he created it with Eclipse Team &amp;gt; Create Patch, in unified diff format. I was able to apply it with Eclipse by telling it to ignore one or two of the initial path components.&lt;br/&gt;
&lt;br/&gt;
If you need it in some other format let us know.&lt;br/&gt;
</comment>
                    <comment id="12513233" author="anchela" created="Tue, 17 Jul 2007 13:55:46 +0100"  >hm... i don&amp;#39;t use eclipse... can you simply create it from svn?&lt;br/&gt;
thanks angela</comment>
                    <comment id="12513234" author="bdelacretaz" created="Tue, 17 Jul 2007 14:01:40 +0100"  >The patch has some extra path components that must be ignored, this works for me:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;cd jackrabbit-jcr-server&lt;br/&gt;
&amp;nbsp;&amp;nbsp;curl -s &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12361904/patch_16JUL07.txt&quot;&gt;https://issues.apache.org/jira/secure/attachment/12361904/patch_16JUL07.txt&lt;/a&gt; | patch -p4&lt;br/&gt;
&lt;br/&gt;
There&amp;#39;s probably an option in tortoiseSVN to ignore a given number of path components&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12513241" author="anchela" created="Tue, 17 Jul 2007 14:10:56 +0100"  >? bertrand? what do you want to state here????&lt;br/&gt;
&lt;br/&gt;
i already stated in the issue in which format i expect the patch. that should be sufficient.</comment>
                    <comment id="12513244" author="robowen" created="Tue, 17 Jul 2007 14:20:23 +0100"  >Patch created using svn diff (+new files) in zip file</comment>
                    <comment id="12513245" author="bdelacretaz" created="Tue, 17 Jul 2007 14:29:44 +0100"  >I&amp;#39;m just saying that the patch is indeed in SVN format, the only slight problem is that the pathnames are not relative to the jackrabbit root, for example:&lt;br/&gt;
&lt;br/&gt;
--- C:/jprojects/eclipse/version_patch/src/main/java/org/apache/jackrabbit/server/io/DefaultIOManager.java	(revision 556115)&lt;br/&gt;
+++ C:/jprojects/eclipse/version_patch/src/main/java/org/apache/jackrabbit/server/io/DefaultIOManager.java	(working copy)&lt;br/&gt;
&lt;br/&gt;
which should ideally be &lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;jackrabbit-jcr-server/src/main/java/org/apache/jackrabbit/server/io/DefaultIOManager.java&lt;br/&gt;
&lt;br/&gt;
This happens frequently depending on people&amp;#39;s environments, and SVN clients (I assume tortoise does this as well) have an option to ignore a certain number of path elements when appliying patches.&lt;br/&gt;
&lt;br/&gt;
So in my example, &amp;quot;patch -p4&amp;quot; means &amp;quot;ignore C:/jprojects/eclipse/version_patch from the pathnames in the patch&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
But apart from that the patch is IMHO fine.&lt;br/&gt;
</comment>
                    <comment id="12513248" author="anchela" created="Tue, 17 Jul 2007 14:41:41 +0100"  >rob, thanks for the new patch. i commit the changes or provide feedback in case of a problem latest by end of this week.&lt;br/&gt;
kind regards&lt;br/&gt;
angela</comment>
                    <comment id="12513525" author="anchela" created="Wed, 18 Jul 2007 11:24:47 +0100"  >so... had a look at the changes and i found the following things. i already started modifying the patch a bit, so there is no need for a new one. just for the record:&lt;br/&gt;
&lt;br/&gt;
- DeltaVResourceImpl: compliance class should from my point of view also mention the Label feature&lt;br/&gt;
- VersionableResourceImpl: the supported method set lists MERGE, UPDATE although the implementation is&lt;br/&gt;
&amp;nbsp;&amp;nbsp;missing&lt;br/&gt;
- VersionableResourceImpl: the DAV:predecessor-set property is missing &lt;br/&gt;
- if upon retrieving version-history and version the returned resource does not implement the proper interface&lt;br/&gt;
&amp;nbsp;&amp;nbsp;i would rather throw than returning null.&lt;br/&gt;
- DavResourceFactoryImpl: since the simple server should work on top of any JCR repository i added a check&lt;br/&gt;
&amp;nbsp;&amp;nbsp;if versioning is supported by the repository and act accordingly.&lt;br/&gt;
&lt;br/&gt;
all new resources extending from DavResourceImpl:&lt;br/&gt;
- the DavResourceImpl checks if the properties have been initialized before. this check is missing.&lt;br/&gt;
&lt;br/&gt;
Since the time jeremi originally copied code from the jcr-server the simple server has been modified (see &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-416&quot; title=&quot;Webdav Simple: Delegate PROPPATCH to (extended) IOHandlers&quot;&gt;&lt;strike&gt;JCR-416&lt;/strike&gt;&lt;/a&gt;): no exporting custom properties is delegated to the PropertyHandler. However, from my point of view&lt;br/&gt;
it doesn&amp;#39;t make sense to additionally export all the specific properties defined by nt:version and nt:versionhistory&lt;br/&gt;
and mix:versionable. most of them are already covered by predefined DAV properties. Therefore:&lt;br/&gt;
&lt;br/&gt;
- VersionHandler should implements its own exportProperties method.&lt;br/&gt;
- perhaps it makes sense to define a VersionHistoryHandler. otherwise they would be exported/imported by&lt;br/&gt;
&amp;nbsp;&amp;nbsp;the DefaultHandler which probably doesn&amp;#39;t make to much sense.&lt;br/&gt;
- the DefaultHandler should skip the version specific properties.&lt;br/&gt;
&lt;br/&gt;
in addition:&lt;br/&gt;
- the VersionHandler assumes that the nt:frozenNode contains a jcr:content node. That might be the case&lt;br/&gt;
&amp;nbsp;&amp;nbsp;if nt:file nodes are put under version control. But since there might be other versionable nodes in the repository&lt;br/&gt;
&amp;nbsp;&amp;nbsp;the handler should at least check if the jcr:content node exists.&lt;br/&gt;
&lt;br/&gt;
so far my changes. i would like to test them (and maybe find others), then provide another patch, so you can &lt;br/&gt;
also verify that the changes still fit your needs before they get commited.&lt;br/&gt;
&lt;br/&gt;
one thing i didn&amp;#39;t have time to look at (maybe rob or ed?):&lt;br/&gt;
the DavResourceImpl uses the configuration to determine which items should be filtered out and should&lt;br/&gt;
not appear in the webdav-view to the repository. by default the &amp;#39;jcr&amp;#39; prefix is filtered. i wondered whether this could cause inconsistencies with the planned changes.&lt;br/&gt;
&lt;br/&gt;
finally, there is yet another thing that has not been taken into consideration by none of the patches so&lt;br/&gt;
far (and for which i don&amp;#39;t have a quick solution at hand):&lt;br/&gt;
&lt;br/&gt;
RFC 3253 defines a separate behaviour for version-controlled collections. However the current approach &lt;br/&gt;
does not take into account whether a resource represents a collection or not. As soon as the corresponding&lt;br/&gt;
repository node is of type mix:versionable the resource is exposed to be versionable as well. If we want&lt;br/&gt;
to make the simple server to be compliant to RFC 3253 this should be addressed. &lt;br/&gt;
&lt;br/&gt;
i wouldn&amp;#39;t mind if this would be done in a second step, but we should take a look at it.&lt;br/&gt;
&lt;br/&gt;
regards&lt;br/&gt;
angela</comment>
                    <comment id="12513897" author="anchela" created="Thu, 19 Jul 2007 14:59:27 +0100"  >i will attach my patch, where i (hopefully) integrated all comments (see jira). during&lt;br/&gt;
some quick testing in found a couple of additional things:&lt;br/&gt;
&lt;br/&gt;
- compliance class: version-history was missing as well&lt;br/&gt;
- DAV:predecessor-set missing with checked-out vc-resource&lt;br/&gt;
- in response to the discussion with julian i disabled &lt;br/&gt;
&amp;nbsp;&amp;nbsp;the version-control feature for collections.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-&amp;gt; versions are always non-collection resources&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-&amp;gt; versions never expose any member resources&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-&amp;gt; isCollection() always returns false&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-&amp;gt; the locator for versions has to be build accordingly&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-&amp;gt; collections may never put under DAV version control.&lt;br/&gt;
- VersionResources are read-only -&amp;gt; override addMember, removeMember and all methods related &lt;br/&gt;
&amp;nbsp;&amp;nbsp;to PROPPATCH.&lt;br/&gt;
- VersionHistoryResource are read-only except for remove of versions (i&amp;#39;m not sure, whether this is &lt;br/&gt;
&amp;nbsp;&amp;nbsp;allowed with deltaV. it is optional in JCR).&lt;br/&gt;
- VersionHistoryResource did only specify version-history resource type. it should&lt;br/&gt;
&amp;nbsp;&amp;nbsp;also include &amp;#39;collection&amp;#39;.&lt;br/&gt;
- there were some more comments that were copied from jcr-server without making sense in the new context.&lt;br/&gt;
- VersionHandler: i change the behaviour in order not to export all jcr properties present with the content-node &lt;br/&gt;
&amp;nbsp;&amp;nbsp;such as the DefaultHandler does.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12513900" author="anchela" created="Thu, 19 Jul 2007 15:03:35 +0100"  >patch addressing my additional comments.&lt;br/&gt;
rob/ed, can you check if everything still works as you expect it?&lt;br/&gt;
&lt;br/&gt;
unless someone finds a problem i will commit the patch by Tuesday next week.&lt;br/&gt;
kind regards&lt;br/&gt;
angela</comment>
                    <comment id="12513950" author="eburnette" created="Thu, 19 Jul 2007 18:11:51 +0100"  >I did a smoke test on it and it seems to work for me.</comment>
                    <comment id="12515222" author="anchela" created="Wed, 25 Jul 2007 07:46:59 +0100"  >committed changes with rev. 559335  &lt;br/&gt;
</comment>
                    <comment id="12515276" author="eburnette" created="Wed, 25 Jul 2007 13:06:18 +0100"  >Thanks!</comment>
                </comments>
                    <attachments>
                    <attachment id="12362131" name="JCR-388_2007_07_19.patch" size="81973" author="anchela" created="Thu, 19 Jul 2007 15:03:34 +0100" />
                    <attachment id="12361904" name="patch_16JUL07.txt" size="57940" author="robowen" created="Mon, 16 Jul 2007 18:25:48 +0100" />
                    <attachment id="12361975" name="patch_16JUL07.zip" size="14327" author="robowen" created="Tue, 17 Jul 2007 14:20:23 +0100" />
                    <attachment id="12325540" name="patch_rfc3253.zip" size="13399" author="jeremi" created="Wed, 19 Apr 2006 18:57:03 +0100" />
                    <attachment id="12325774" name="Review.txt" size="9242" author="anchela" created="Mon, 24 Apr 2006 23:56:15 +0100" />
                    <attachment id="12325004" name="rfc.zip" size="12073" author="jeremi" created="Thu, 6 Apr 2006 12:52:20 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>6.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 12 Apr 2006 01:40:49 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142153</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>250729</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>