<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 06:00:27 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-351/JCR-351.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-351] Default to anonymous access when no Credentials are given</title>
                <link>https://issues.apache.org/jira/browse/JCR-351</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Even though &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-348&quot; title=&quot;Add automatic default configuration&quot;&gt;&lt;strike&gt;JCR-348&lt;/strike&gt;&lt;/a&gt; made easier to start a Jackrabbit repository with default configuration, the user still needs to take care of the JAAS configuration. It would be more user-friendly to log a warning and default to superuser access rather than throwing a LoginException when JAAS has not been configured. This behaviour should be limited to only default credential logins (Session.login() with null Credentials) and it should be possible to disable it with a configuration option. We could even have this behaviour disabled by default, but enabled in the configuration file used with the &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-348&quot; title=&quot;Add automatic default configuration&quot;&gt;&lt;strike&gt;JCR-348&lt;/strike&gt;&lt;/a&gt; automatic configuration.&lt;br/&gt;
&lt;br/&gt;
This is a case against the &amp;quot;secure by default&amp;quot; design principle, but I think that in this case the benefits in easier setup outweight the security drawbacks, especially if coupled with the above restrictions and a clear documentation note about the insecure default.&lt;br/&gt;
&lt;br/&gt;
[Update: As mentioned by Stefan, this is  not a JAAS configuration issue but a problem in handling null Credentials. A more proper alternative for superuser access would be to default to anonymous access when credentials are not given.]</description>
                <environment></environment>
            <key id="12330214">JCR-351</key>
            <summary>Default to anonymous access when no Credentials are given</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="jukkaz">Jukka Zitting</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Mar 2006 21:45:22 +0000</created>
                <updated>Fri, 13 Oct 2006 17:07:37 +0100</updated>
                    <resolved>Fri, 17 Mar 2006 02:57:09 +0000</resolved>
                            <version>0.9</version>
                                <fixVersion>1.0</fixVersion>
                                <component>security</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12370183" author="stefan@jira" created="Mon, 13 Mar 2006 22:03:42 +0000"  >the JAAS configuration is not required. the automatic configuration should default to:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;LoginModule class=&amp;quot;org.apache.jackrabbit.core.security.SimpleLoginModule&amp;quot;/&amp;gt;&lt;br/&gt;
&lt;br/&gt;
SimpleLoginModule used with SimpleAccessManager provides full read/write access&lt;br/&gt;
for arbitrary credentials, out of the box. &lt;br/&gt;
</comment>
                    <comment id="12370186" author="jukkaz" created="Mon, 13 Mar 2006 22:20:24 +0000"  >The problem with SimpleLoginModule (and in fact any AccessManager that would want to provide some default access level) is that it only works if the user has provided a Credentials instance to the Session.login() method. If you use empty Session.login() signature, that would be the reasonable default for cases where you have not specified any explicit user accounts, RepositoryImpl.login() will throw an LoginException saying &amp;quot;No Subject associated with AccessControlContext&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
This example class:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;import javax.jcr.*;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;import org.apache.jackrabbit.core.TransientRepository;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public class Example {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public static void main(String[] args) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Repository repository = new TransientRepository();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Session session = repository.login();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;session.logout();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} catch (Exception e) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;e.printStackTrace();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
will output:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;javax.jcr.LoginException: No Subject associated with AccessControlContext&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.RepositoryImpl.login(RepositoryImpl.java:1064)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.TransientRepository.login(TransientRepository.java:319)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.TransientRepository.login(TransientRepository.java:371)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at Example.main(Example.java:7)&lt;br/&gt;
&lt;br/&gt;
When run without JAAS configuration.&lt;br/&gt;
</comment>
                    <comment id="12370188" author="stefan@jira" created="Mon, 13 Mar 2006 22:51:05 +0000"  >ok, i agree.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; We could even have this behaviour disabled by default, but enabled in the configuration file &lt;br/&gt;
&amp;gt; used with the &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-348&quot; title=&quot;Add automatic default configuration&quot;&gt;&lt;strike&gt;JCR-348&lt;/strike&gt;&lt;/a&gt; automatic configuration. &lt;br/&gt;
&lt;br/&gt;
+1&lt;br/&gt;
&lt;br/&gt;
stefan</comment>
                    <comment id="12370476" author="jukkaz" created="Wed, 15 Mar 2006 15:21:45 +0000"  >Attached a patch that fixes this issue by defaulting to anonymous access when no credentials are given in Session.login() and JAAS is not configured. I also added a defaultUserId configuration option to SimpleLoginModule that allows null credentials to be mapped to some other user than anonymous.&lt;br/&gt;
&lt;br/&gt;
The patch contains the following changes:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* RepositoryImpl: Pass null Credentials to a LoginModule for interpretation rather than directly throwing an exception when a JAAS Subject is not available.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* SimpleLoginModule: Default to anonymous access when null Credentials are given. Added (disabled by default) a defaultUserId property  for using some other user than anonymous by default.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* repository.xml: Added a note about the new defaultUserId property and a commented out example on how to use it.&lt;br/&gt;
&lt;br/&gt;
The only impact on existing environments is that null Credentials will now be passed to configured LoginModules with CredentialsCallback.setCallback(null) instead of explicitly throwing a LoginException when a JAAS Subject is not available.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;d like to have this issue as well included in 1.0, as it considerably helps to simplify initial setup. Please comment if you see any problems with this approach or think that the change is too risky for inclusion in 1.0.</comment>
                    <comment id="12370736" author="jukkaz" created="Fri, 17 Mar 2006 02:57:08 +0000"  >Patch committed in revision 386415. Merged in the 1.0 branch in revision 386416.</comment>
                </comments>
                    <attachments>
                    <attachment id="12324207" name="null-credentials.patch" size="7278" author="jukkaz" created="Wed, 15 Mar 2006 15:21:45 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 13 Mar 2006 22:03:42 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142131</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279418</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>