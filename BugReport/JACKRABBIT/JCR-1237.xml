<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:31:26 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1237/JCR-1237.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1237] Change default value for respectDocumentOrder</title>
                <link>https://issues.apache.org/jira/browse/JCR-1237</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>The current default value for the search index configuration parameter respectDocumentOrder is true. Almost all applications are not interested in document order, while this default adds significant overhead to query execution because document order information is present in the index but has to be calculated over the complete result set.&lt;br/&gt;
&lt;br/&gt;
I propose to change the default value to false and document this change in the 1.4 release notes. If an application relies on document order one can still explicitly set the parameter in the configuration to true.</description>
                <environment></environment>
            <key id="12383310">JCR-1237</key>
            <summary>Change default value for respectDocumentOrder</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Nov 2007 12:52:06 +0000</created>
                <updated>Mon, 8 Dec 2008 11:09:32 +0000</updated>
                    <resolved>Wed, 16 Jan 2008 11:12:06 +0000</resolved>
                                            <fixVersion>1.5</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12545814" author="aschrijvers" created="Tue, 27 Nov 2007 12:59:05 +0000"  >I agree. Defaults obviously can better have not a large performance hit, certainly not when most apps don&amp;#39;t use it but people are not aware of its impact.&lt;br/&gt;
&lt;br/&gt;
+1</comment>
                    <comment id="12545826" author="jukkaz" created="Tue, 27 Nov 2007 13:20:06 +0000"  >I was about to vote -1 on this, but then I realized that the JCR spec doesn&amp;#39;t actually require document order as the default ordering, it&amp;#39;s just an optional default.&lt;br/&gt;
&lt;br/&gt;
So +0, as this seems useful even though it does mean that a client would need to use some yet to be implemented custom extension to request document ordering on a workspace with this default configuration.&lt;br/&gt;
&lt;br/&gt;
Also, we would need to change the QUERY_XPATH_DOC_ORDER repository descriptor to false. As a somewhat questionable side effect, this change would allow us to resolve &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-591&quot; title=&quot;XPath position function does not work&quot;&gt;JCR-591&lt;/a&gt; and perhaps even &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-392&quot; title=&quot;Querying element by number does not work&quot;&gt;JCR-392&lt;/a&gt; as Won&amp;#39;t Fix.</comment>
                    <comment id="12545838" author="mreutegg" created="Tue, 27 Nov 2007 13:49:14 +0000"  >Hmm, I completely forgot about the repository descriptor. This is currently hard coded in a properties file. With Jackrabbit it is actually possible to have document order on results in one workspace but not in another one. Which raises an interesting question. What does QUERY_XPATH_DOC_ORDER return in that case?&lt;br/&gt;
&lt;br/&gt;
Jackrabbit should probably enable or disable document order on all workspaces and not selectively.&lt;br/&gt;
&lt;br/&gt;
Jukka wrote:&lt;br/&gt;
&amp;gt; it does mean that a client would need to use some yet to be implemented custom extension&lt;br/&gt;
&lt;br/&gt;
my intention was to provide a default configuration where you won&amp;#39;t have document order, but if you wish the repository to do so you could enable it in the configuration.</comment>
                    <comment id="12545859" author="jukkaz" created="Tue, 27 Nov 2007 14:40:16 +0000"  >Marcel:&lt;br/&gt;
&amp;gt; What does QUERY_XPATH_DOC_ORDER return in that case?&lt;br/&gt;
&lt;br/&gt;
I think the only really correct result would be for the descriptor to be false (or actually not to exist in the first place). But given that few (if any) clients actually use that descriptor for in any real functional sense, one could argue that the descriptor is more useful as an informational tool to human operators, in which case making the descriptor reflect the default setting would also make sense.&lt;br/&gt;
&lt;br/&gt;
We could use the default setting from the Workspace template in repository.xml to decide the state of the QUERY_XPATH_DOC_ORDER descriptor.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; my intention was to provide a default configuration where you won&amp;#39;t have document order,&lt;br/&gt;
&amp;gt; but if you wish the repository to do so you could enable it in the configuration.&lt;br/&gt;
&lt;br/&gt;
The information is still in the query index, isn&amp;#39;t it? What should I do if I have a client that mostly doesn&amp;#39;t about document order for most queries, but occasionally would like to use the ordering within the same workspace?</comment>
                    <comment id="12545869" author="mreutegg" created="Tue, 27 Nov 2007 15:14:59 +0000"  >&amp;gt; The information is still in the query index, isn&amp;#39;t it?&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m not sure I understand your question. But the document order is never available in the index. It is always calculated.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; What should I do if I have a client that mostly doesn&amp;#39;t about document order for most queries, but occasionally would like&lt;br/&gt;
&amp;gt; to use the ordering within the same workspace?&lt;br/&gt;
&lt;br/&gt;
You would set respectDocumentOrder to true and omit an order by in your query to get document order, otherwise you should add an order by @jcr:score. This effectively disables document order.</comment>
                    <comment id="12545901" author="jukkaz" created="Tue, 27 Nov 2007 16:30:06 +0000"  >Marcel:&lt;br/&gt;
&amp;gt; I&amp;#39;m not sure I understand your question. But the document order is never available in the index.&lt;br/&gt;
&amp;gt; It is always calculated. &lt;br/&gt;
&lt;br/&gt;
Sorry, my (obscured) point was that the query engine is still able to return results in document order even if the default would be to not do that. Unfortunately there is no way for a client to explicitly request that the results should be document-ordered if that&amp;#39;s not the default.&lt;br/&gt;
&lt;br/&gt;
But I guess that&amp;#39;s a secondary concern and probably should be addressed with a separate feature request.</comment>
                    <comment id="12545971" author="ckiehl" created="Tue, 27 Nov 2007 19:14:11 +0000"  >+1 to change the default for &amp;quot;respectDocumentOrder&amp;quot; to &amp;quot;false&amp;quot;. Most people don&amp;#39;t care about document order but about performance and they should get the best performance as possible by default. It&amp;#39;s better to let the minority find out how to enable document order than to let the majority find out how to make jackrabbit perform better.&lt;br/&gt;
I think the descriptor should just tell that document order is not supported. Anyone can still enable it for whichever workspaces they like.</comment>
                    <comment id="12559447" author="mreutegg" created="Wed, 16 Jan 2008 11:12:06 +0000"  >I&amp;#39;ve changed the default for respectDocumentOrder to false. The repository descriptor QUERY_XPATH_DOC_ORDER still returns true. If code relies on results in document order the workspace.xml needs to be adapted when upgrading to 1.5.&lt;br/&gt;
&lt;br/&gt;
Committed in revision: 612420</comment>
                    <comment id="12560379" author="jukkaz" created="Fri, 18 Jan 2008 13:51:09 +0000"  >I think we should drop the QUERY_XPATH_DOC_ORDER descriptor. It&amp;#39;s absence doesn&amp;#39;t mean that the repository couldn&amp;#39;t return query results in document order if so configured.</comment>
                    <comment id="12560504" author="jukkaz" created="Fri, 18 Jan 2008 19:01:56 +0000"  >I disabled the QUERY_XPATH_DOC_ORDER descriptor in revision 613226.</comment>
                    <comment id="12560950" author="mreutegg" created="Mon, 21 Jan 2008 08:27:51 +0000"  >This also mean that the four test cases in XPathDocOrderTest are now not executable anymore.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 27 Nov 2007 12:59:05 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142594</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279799</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>