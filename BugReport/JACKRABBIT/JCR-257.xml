<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:58:22 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-257/JCR-257.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-257] Use separate index for jcr:system tree</title>
                <link>https://issues.apache.org/jira/browse/JCR-257</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Currently each workspace index also includes index data of repository wide data (e.g. version nodes under jcr:system). There are several drawbacks with this approach:&lt;br/&gt;
&lt;br/&gt;
- indexing is duplicated and does not scale when using a lot of workspaces&lt;br/&gt;
- workspaces cannot be &amp;#39;put to sleep&amp;#39; when they are not actively used.&lt;br/&gt;
&lt;br/&gt;
The repository should have an additional index for system data, which includes: versioning and nodetype representation in content. Basically data under /jcr:system.&lt;br/&gt;
&lt;br/&gt;
Queries issued on a workspace will then use two index to execute the query: the workspace index and the system index.</description>
                <environment></environment>
            <key id="12318075">JCR-257</key>
            <summary>Use separate index for jcr:system tree</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Oct 2005 01:42:50 +0100</created>
                <updated>Fri, 13 Oct 2006 17:07:26 +0100</updated>
                    <resolved>Fri, 24 Mar 2006 23:22:10 +0000</resolved>
                            <version>0.9</version>
                                <fixVersion>1.0</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12360905" author="mreutegg" created="Tue, 20 Dec 2005 20:13:38 +0000"  >Separated index as proposed. There is one repository wide system index that contains /jcr:system tree. In addition to this &amp;#39;global&amp;#39; index there are still the workspace indexes as before. Queries are executed on both indexes and will return results from both indexes.&lt;br/&gt;
&lt;br/&gt;
Separating the indexes now also allows to disable indexing of versions. One simply does not configure a system index on the repository level.&lt;br/&gt;
&lt;br/&gt;
Important note: this causes a minor backward compatibility issue. Existing configurations do not have a system search index configured on the repository level and will not index versions anymore. That means, queries will return versions of nodes that have been checked in before this code change but no checkins after this change. Apart from that Jackrabbit will work just fine. If you need to search versions of nodes see below how.&lt;br/&gt;
&lt;br/&gt;
Migration instructions:&lt;br/&gt;
- add a SearchIndex element at the end of the repository configuration. See jackrabbit/src/main/config/repository.xml for an example&lt;br/&gt;
- delete index folders in all your workspace directories&lt;br/&gt;
- restart jackrabbit (will re-index workspaces and jcr:system tree)&lt;br/&gt;
&lt;br/&gt;
svn revision: 357961</comment>
                    <comment id="12360907" author="mreutegg" created="Tue, 20 Dec 2005 20:21:59 +0000"  >Also updated repository.xml files in contrib projects.</comment>
                    <comment id="12370821" author="ppakulski" created="Fri, 17 Mar 2006 21:03:26 +0000"  >I checked r386604 and it looks that doesn&amp;#39;t work as expected.&lt;br/&gt;
&lt;br/&gt;
Even if &amp;#39;repository wide system index that contains /jcr:system tree&amp;#39; is not configured, following nodes are still indexed : versionLabels, versionStorage, versionHistory, version, frozenNode.&lt;br/&gt;
&lt;br/&gt;
Additionally index is duplicated over all workspaces, what lead to huge index size and performance/memory problems especially if we use many workspaces.&lt;br/&gt;
&lt;br/&gt;
What&amp;#39;s interesting is that if I remove all index folders, and restart repository then all indexes are rebuilded without mentioned nodes, and indexes are much smaller then. </comment>
                    <comment id="12371109" author="mreutegg" created="Tue, 21 Mar 2006 00:46:32 +0000"  >Paths of events that origin from the version storage are wrong and thus are not filtered correctly anymore. This problem was probably introduced when fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-141&quot; title=&quot;Versioning does not make use of tx&quot;&gt;&lt;strike&gt;JCR-141&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
Test cases should be extended to check paths of version events.</comment>
                    <comment id="12371536" author="mreutegg" created="Thu, 23 Mar 2006 17:48:06 +0000"  >Committed a preliminary fix. &lt;br/&gt;
&lt;br/&gt;
Most of the changes are actually located in the event system and not the search index itself. It would have probably made more sense to reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-141&quot; title=&quot;Versioning does not make use of tx&quot;&gt;&lt;strike&gt;JCR-141&lt;/strike&gt;&lt;/a&gt;, but anyway...&lt;br/&gt;
&lt;br/&gt;
I strongly encourage everyone to re-index an existing repository that was used with a jackrabbit svn revision between 368026 and 388123 and that is now upgraded to a higher version! Indexing of versions was completely broken between those svn revision!&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m currently writing some additional test cases and will resolve this issue once I have commited the test cases.</comment>
                    <comment id="12371748" author="mreutegg" created="Fri, 24 Mar 2006 23:22:10 +0000"  >Fixed in revision: 388559&lt;br/&gt;
&lt;br/&gt;
Also added some test cases that check observation and querying on version storage.</comment>
                    <comment id="12372120" author="jukkaz" created="Wed, 29 Mar 2006 03:09:16 +0100"  >Merged to 1.0 in revision 389544.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10020">
                <name>Cloners</name>
                                <outwardlinks description="is cloned as">
                            <issuelink>
            <issuekey id="12330464">JCR-364</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 17 Mar 2006 21:03:26 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142061</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279346</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>