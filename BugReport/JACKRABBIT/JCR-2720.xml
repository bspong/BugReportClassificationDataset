<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:43:46 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2720/JCR-2720.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2720] Changes from Session.move() to a top-level node aren&apos;t seen in a second session</title>
                <link>https://issues.apache.org/jira/browse/JCR-2720</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>I&amp;#39;ll attach a test case, but basically...&lt;br/&gt;
&lt;br/&gt;
* Create two sessions&lt;br/&gt;
* Create a top-level node in the first session and save it.&lt;br/&gt;
* Move the top-level node using the first session&lt;br/&gt;
* In the second session, try itemExists() for the path of the node. It returns true when it should be false.</description>
                <environment></environment>
            <key id="12471939">JCR-2720</key>
            <summary>Changes from Session.move() to a top-level node aren&apos;t seen in a second session</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="stefan@jira">Stefan Guggisberg</assignee>
                                <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Aug 2010 20:58:09 +0100</created>
                <updated>Fri, 23 Sep 2011 15:23:05 +0100</updated>
                    <resolved>Thu, 23 Sep 2010 12:15:02 +0100</resolved>
                            <version>2.1.1</version>
                                <fixVersion>2.2</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12900003" author="justinedelson" created="Wed, 18 Aug 2010 21:00:10 +0100"  >this was observed while debugging a Sling test, thus the package name.&lt;br/&gt;
&lt;br/&gt;
if you want me to provide a patch against the JR source tree, please let me know what test to put this in or where I should create a new test</comment>
                    <comment id="12900005" author="justinedelson" created="Wed, 18 Aug 2010 21:01:01 +0100"  >tried a few things... none of which work&lt;br/&gt;
&lt;br/&gt;
refresh(true) instead of refresh(false)&lt;br/&gt;
nodeExists() instead of itemExists()&lt;br/&gt;
&lt;br/&gt;
session.getWorkspace().move() instead of session.move()&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12901467" author="stefan@jira" created="Mon, 23 Aug 2010 17:27:50 +0100"  >i tried to reproduce the said behavior on jackrabbit trunk with the provided test case, however i failed (i.e. the test case succeeded as expected).&lt;br/&gt;
all i had to change was the package statement.&lt;br/&gt;
&lt;br/&gt;
btw: you don&amp;#39;t need to call session2.refresh() when using jackrabbit-core, since changes saved by one session should be visible to other sessions instantly.&lt;br/&gt;
&lt;br/&gt;
could you please try to reproduce the issue on jackrabbit trunk?&lt;br/&gt;
</comment>
                    <comment id="12901469" author="stefan@jira" created="Mon, 23 Aug 2010 17:28:42 +0100"  >non-reproducable so far, adjusting priority.</comment>
                    <comment id="12909327" author="justinedelson" created="Tue, 14 Sep 2010 17:57:57 +0100"  >Stefan-&lt;br/&gt;
Sorry I missed your response to this issue. I can reproduce this against trunk (with or without the refresh call)&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll attach a patch with the test case.&lt;br/&gt;
&lt;br/&gt;
Justin</comment>
                    <comment id="12909328" author="justinedelson" created="Tue, 14 Sep 2010 17:58:33 +0100"  >here&amp;#39;s a patch with the test case added to o.a.j.core.MoveTest</comment>
                    <comment id="12910523" author="jukkaz" created="Fri, 17 Sep 2010 11:10:35 +0100"  >I believe this is due to the special way we handle the root path in the CachingHierarchyManager. The attached patch makes the nodeModified() event handler take that special case into account so that also changes to the paths of top-level nodes are correctly reflected in the path cache.</comment>
                    <comment id="12913975" author="jukkaz" created="Thu, 23 Sep 2010 12:15:02 +0100"  >Fixed in revision 1000408.</comment>
                </comments>
                    <attachments>
                    <attachment id="12454837" name="JCR-2720.patch" size="1775" author="jukkaz" created="Fri, 17 Sep 2010 11:10:35 +0100" />
                    <attachment id="12454554" name="JCR-2720-test.patch" size="1554" author="justinedelson" created="Tue, 14 Sep 2010 17:58:33 +0100" />
                    <attachment id="12452446" name="MoveTest.java" size="2264" author="justinedelson" created="Wed, 18 Aug 2010 21:00:10 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 23 Aug 2010 16:27:50 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>59545</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190958</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>