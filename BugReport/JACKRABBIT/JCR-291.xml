<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:54:06 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-291/JCR-291.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-291] jcr-server-webapp: RMI Registration unstable</title>
                <link>https://issues.apache.org/jira/browse/JCR-291</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Registration of the repository to a RMI registry in RepositoryStartupServlet.registerRMI uses web application parameters inconsistently and may not always succeed registering the repository.&lt;br/&gt;
&lt;br/&gt;
Today, the registerRMI uses these parameters for registration to RMI:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rmi-host : The name of the host on which the registry is running&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rmi-port : The port on which the registry is running&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;rmi-uri : An RMI URI to use for registration&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repository-name : The name to bind the repository to&lt;br/&gt;
&lt;br/&gt;
The problem is, that rmi-port is used to try to create the registry to make sure a registry is running on the local host. The rmi-uri is used to register the repository using the static Naming.bind method. If the rmi-uri is not configured, the URI is created from rmi-host, rmi-port and repository-name.&lt;br/&gt;
&lt;br/&gt;
This may now create a bunch of problems: If the rmi-port and rmi-uri configurations do not match, registration fails, if rmi-host does not resolve to an IP address to which the registry is bound, registration fails.&lt;br/&gt;
&lt;br/&gt;
I encounter this issue, when trying to register the repository to an RMI registry using default rmi-port configuration (rmi-host and rmi-uri not configured) when running the web app in Jetty.</description>
                <environment>SVN Rev. 355696</environment>
            <key id="12326590">JCR-291</key>
            <summary>jcr-server-webapp: RMI Registration unstable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="fmeschbe">Felix Meschberger</assignee>
                                <reporter username="fmeschbe">Felix Meschberger</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Dec 2005 21:33:35 +0000</created>
                <updated>Thu, 15 Dec 2005 18:16:51 +0000</updated>
                    <resolved>Thu, 15 Dec 2005 18:16:51 +0000</resolved>
                                            <fixVersion>1.0</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12360136" author="fmeschbe" created="Sun, 11 Dec 2005 21:54:58 +0000"  >Attaching a patch to RepositoryStartupServlet relative to the contrib/jcr-server/webapp directory.&lt;br/&gt;
&lt;br/&gt;
This patch fixes the issue as follows (also see the added class comment regarding RMI registration):&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;- If neither rmi-uri, nor rmi-port, nor rmi-host is configured, RMI registration does not take place (as today)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;- If rmi-uri is configured, rmi-host and rmi-port are ignored. Repository-name is ignored if rmi-uri contains a name&lt;br/&gt;
&lt;br/&gt;
If the host name - either from rmi-uri or rmi-host parameter - is empty or null, the local host is used.&lt;br/&gt;
If the port number is negative, zero or higher than 65535, the default port number 1099 is used.&lt;br/&gt;
&lt;br/&gt;
After gathering the information, a Registry instance has to be retrieved. First LocalRegistry.createRegistry is called. If the host name is not empty or null a custom RMIServerSocketFactory is created which is enabled to create server sockets to a specific interface, otherwise the standard RMIServerSocketFactory is used, which simply creates a server socket binding to all interfaces on the local host.&lt;br/&gt;
&lt;br/&gt;
If creating the registry fails - e.g. because host is a remote host or a registry is already active - LocalRegistry.getRegistry is called with the host and port.&lt;br/&gt;
&lt;br/&gt;
Finally the registry retrieved above is used to bind the repository.&lt;br/&gt;
&lt;br/&gt;
If there is no opposition or further enhancement, I will commit the fix sometime next week.</comment>
                    <comment id="12360196" author="tripod" created="Mon, 12 Dec 2005 18:57:53 +0000"  >looks good. thanks.</comment>
                    <comment id="12360205" author="fmeschbe" created="Mon, 12 Dec 2005 21:18:23 +0000"  >Commited proposed patch.&lt;br/&gt;
&lt;br/&gt;
Fixed in Rev. 356251</comment>
                    <comment id="12360206" author="fmeschbe" created="Mon, 12 Dec 2005 21:22:11 +0000"  >Done.</comment>
                    <comment id="12360493" author="jukkaz" created="Thu, 15 Dec 2005 18:16:27 +0000"  >Reopened to change fix version to 1.0.</comment>
                    <comment id="12360494" author="jukkaz" created="Thu, 15 Dec 2005 18:16:50 +0000"  >Closed with the correct fix version.</comment>
                </comments>
                    <attachments>
                    <attachment id="12321271" name="RMIRegistry_fm_051211.diff" size="18399" author="fmeschbe" created="Sun, 11 Dec 2005 21:54:58 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 12 Dec 2005 18:57:53 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142086</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279385</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>