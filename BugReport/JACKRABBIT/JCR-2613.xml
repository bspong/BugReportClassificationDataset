<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:37:48 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2613/JCR-2613.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2613] NoSuchItemStateException on checkin after removeVersion in XA Environment</title>
                <link>https://issues.apache.org/jira/browse/JCR-2613</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>After removing a version, a checkin on the same node in a different transaction (with a different session) fails.&lt;br/&gt;
The NoSuchItemStateException refer to the uuid of the previously removed version. &lt;br/&gt;
I&amp;#39;ll attach a test demonstrating the problem. </description>
                <environment></environment>
            <key id="12462516">JCR-2613</key>
            <summary>NoSuchItemStateException on checkin after removeVersion in XA Environment</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="tripod">Tobias Bocanegra</assignee>
                                <reporter username="quellenberg">Tom Quellenberg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Apr 2010 08:58:12 +0100</created>
                <updated>Thu, 12 Aug 2010 09:40:09 +0100</updated>
                    <resolved>Thu, 22 Apr 2010 10:03:34 +0100</resolved>
                            <version>1.6.1</version>
                                <fixVersion>1.6.4</fixVersion>
                <fixVersion>2.0.3</fixVersion>
                <fixVersion>2.1.1</fixVersion>
                <fixVersion>2.2</fixVersion>
                                <component>transactions</component>
                <component>versioning</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12858817" author="quellenberg" created="Tue, 20 Apr 2010 12:12:19 +0100"  >I think a node.store() is missing in InternalVersionHistoryImpl.removeVersion when no references to the version history were found. Without the store operation the cache in the LocalItemStateManager is not updated.&lt;br/&gt;
See proposed patch (based on the 1.6-branch)&lt;br/&gt;
I suppose the bug was introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-134&quot; title=&quot;Unreferenced VersionHistory should be deleted automatically.&quot;&gt;&lt;strike&gt;JCR-134&lt;/strike&gt;&lt;/a&gt; and affects all version since 1.6.0</comment>
                    <comment id="12859753" author="tripod" created="Thu, 22 Apr 2010 10:03:34 +0100"  >fixed in 1.6 branch by revision 936666&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12859754" author="tripod" created="Thu, 22 Apr 2010 10:13:04 +0100"  >also fixed in trunk by revision 936668.</comment>
                    <comment id="12895276" author="jukkaz" created="Wed, 4 Aug 2010 15:48:13 +0100"  >Merged to the 2.1 branch in revision 982266 and to the 2.0 branch in revision 982270.</comment>
                </comments>
                    <attachments>
                    <attachment id="12442276" name="JCR-2613.patch" size="698" author="quellenberg" created="Tue, 20 Apr 2010 12:12:56 +0100" />
                    <attachment id="12442268" name="RemoveAndCheckinXATest.java" size="1378" author="quellenberg" created="Tue, 20 Apr 2010 08:59:56 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 22 Apr 2010 09:03:34 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78161</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190518</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>