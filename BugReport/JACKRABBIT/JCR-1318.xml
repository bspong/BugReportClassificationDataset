<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:40:52 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1318/JCR-1318.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1318] Repository Home locked not released despite RepositoryException being thrown.</title>
                <link>https://issues.apache.org/jira/browse/JCR-1318</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>When an exception is thrown when calling RepositoryImpl.create(...) a .lock file is created in the repository home directory and not removed despite there no longer being an active connection.  If the user attempts to create the repository again (e.g recover from the exception because the url of the repository was temporarily unavailable) a RepositoryException is thrown again indicating that the repository home is locked by another process because there is a .lock file.  If a Repository is not successfully created then the repository home should not be locked.&lt;br/&gt;
&lt;br/&gt;
The lock is only released when the repository is shutdown but in this case the Repository object is never created successfully for that method to be called.&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment>windows vista  jdk 5</environment>
            <key id="12386410">JCR-1318</key>
            <summary>Repository Home locked not released despite RepositoryException being thrown.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="stefan@jira">Stefan Guggisberg</assignee>
                                <reporter username="mkwhitacre">Micah Whitacre</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Jan 2008 19:01:24 +0000</created>
                <updated>Fri, 22 Feb 2008 13:11:38 +0000</updated>
                    <resolved>Fri, 18 Jan 2008 13:54:38 +0000</resolved>
                            <version>1.3.3</version>
                <version>1.4</version>
                                <fixVersion>core 1.4.1</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12559693" author="mkwhitacre" created="Wed, 16 Jan 2008 22:31:13 +0000"  >Created a testcase which will demonstrate the behavior I&amp;#39;m talking about.  Dropping the testcase and the repository.xml in the root of a java project that is setup with jackrabbit 1.3.3 as a dependency and JUnit 4.4 is all that should be needed.&lt;br/&gt;
&lt;br/&gt;
As mentioned the behavior you should be seeing is that the first attempt to create a RepositoryImpl will fail because there are no suitable drivers to connect to a database whose URL is &amp;quot;jdbc:foo:bar&amp;quot;.  The second attempt to connect however doesn&amp;#39;t fail for the same reason and instead fails because of the .lock file being present.</comment>
                    <comment id="12559741" author="mkwhitacre" created="Wed, 16 Jan 2008 23:46:33 +0000"  >I created a patch based on the 1.3 branch of jackrabbit-core that isn&amp;#39;t necessarily pretty but does at least make the testcase i provided repeatedly generate the same stack trace for attempts to create an instance of RepositoryImpl.  This could probably be simplified a bit if the shutdown() method was a little bit more tolerant of everything not necessarily being initialized by that point.  </comment>
                    <comment id="12560382" author="stefan@jira" created="Fri, 18 Jan 2008 13:54:38 +0000"  >fixed in svn r613160.&lt;br/&gt;
&lt;br/&gt;
micah, thanks for reporting this issue and providing a test case incl. patch!&lt;br/&gt;
WRT your patch: i&amp;#39;ve chosen a slightly different approach (that you also &lt;br/&gt;
mentioned in your comment).&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12569576" author="jukkaz" created="Sat, 16 Feb 2008 15:24:34 +0000"  >Merged to the 1.4 branch in revision 628324.</comment>
                </comments>
                    <attachments>
                    <attachment id="12373338" name="JCR_1318-patch.txt" size="2395" author="mkwhitacre" created="Wed, 16 Jan 2008 23:46:33 +0000" />
                    <attachment id="12373326" name="JCR_1318_tests.zip" size="1333" author="mkwhitacre" created="Wed, 16 Jan 2008 22:31:13 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 18 Jan 2008 13:54:38 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78604</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>252707</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>