<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:55:54 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1526/JCR-1526.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1526] Various improvment to Path and PathImpl</title>
                <link>https://issues.apache.org/jira/browse/JCR-1526</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>There are various issues with Path and PathImpl which the following patch addresses:&lt;br/&gt;
- Fixed problem with normalization of some paths in PathImpl. &lt;br/&gt;
- Fixed handling of relative paths in PathImpl. &lt;br/&gt;
- Fixed wrong return value for depth and ancestor count in PathImpl. &lt;br/&gt;
- Added method for determining equivalence of paths in PathImpl.&lt;br/&gt;
- Fixed subPath method in PathImpl. &lt;br/&gt;
- Clarified blurry contract for Path.&lt;br/&gt;
- Added many new test cases&lt;br/&gt;
&lt;br/&gt;
For many of the fixes credits are due to Angela.</description>
                <environment></environment>
            <key id="12393417">JCR-1526</key>
            <summary>Various improvment to Path and PathImpl</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="anchela">angela</assignee>
                                <reporter username="mduerig">Michael D&#252;rig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Apr 2008 16:08:57 +0100</created>
                <updated>Wed, 16 Jul 2008 14:59:04 +0100</updated>
                    <resolved>Thu, 10 Apr 2008 14:39:45 +0100</resolved>
                                                            <component>jackrabbit-spi</component>
                <component>jackrabbit-spi-commons</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12586831" author="mduerig" created="Tue, 8 Apr 2008 16:10:16 +0100"  >Patch</comment>
                    <comment id="12587115" author="stefan@jira" created="Wed, 9 Apr 2008 10:41:43 +0100"  >thanks, michi!&lt;br/&gt;
&lt;br/&gt;
i quickly browsed through the patch, looks good.&lt;br/&gt;
&lt;br/&gt;
however, i&amp;#39;ve got one minor issue: &lt;br/&gt;
&lt;br/&gt;
if i interpret the code changes in PathFactoryImpl$Path#getNormalizedPath() &lt;br/&gt;
correctly the following call would succeed where it currently throws an exception:&lt;br/&gt;
&lt;br/&gt;
NameResolver nameResolver = ...&lt;br/&gt;
PathResolver pathResolver = new ParsingPathResolver(PathFactoryImpl.getInstance(),&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;nameResolver);&lt;br/&gt;
...&lt;br/&gt;
pathResolver.getQPath(&amp;quot;/..&amp;quot;).getNormalizedPath();&lt;br/&gt;
&lt;br/&gt;
according to the javadoc of Path#getNormalizedPath it should throw an exception.&lt;br/&gt;
&lt;br/&gt;
furthermore, i might be wrong but i think that it is still possible to create &lt;br/&gt;
syntactically incorrect paths using PathFactoryImpl (&lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1409&quot; title=&quot;PathFactoryImpl creates illegal Path objects&quot;&gt;&lt;strike&gt;JCR-1409&lt;/strike&gt;&lt;/a&gt;), e.g.&lt;br/&gt;
&lt;br/&gt;
PathFactory pf = PathFactoryImpl.getInstance(); &lt;br/&gt;
Path.Element re = pf.getRootElement(); &lt;br/&gt;
Path illegalPath = pf.create(new Path.Element[]{re, re}); &lt;br/&gt;
&lt;br/&gt;
i would expect that Path objects always represent syntactically correct paths.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;</comment>
                    <comment id="12587624" author="mduerig" created="Thu, 10 Apr 2008 13:53:22 +0100"  >The path factory does not allow to construct such a paths at all:&lt;br/&gt;
&lt;br/&gt;
/.. throws java.lang.IllegalArgumentException: Invalid path: Too many parent elements.&lt;br/&gt;
&lt;br/&gt;
{}/{} throws java.lang.IllegalArgumentException: Invalid path: The root element may only occur at the beginning.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12587631" author="stefan@jira" created="Thu, 10 Apr 2008 14:07:39 +0100"  >you&amp;#39;re right. i only browsed through the patch and missed some of the changes, sorry.&lt;br/&gt;
&lt;br/&gt;
+1 for the patch</comment>
                    <comment id="12587637" author="anchela" created="Thu, 10 Apr 2008 14:39:45 +0100"  >patch committed as is with rev. 646802  &lt;br/&gt;
thanks michael&lt;br/&gt;
</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310010">
                <name>Incorporates</name>
                                <outwardlinks description="incorporates">
                            <issuelink>
            <issuekey id="12389306">JCR-1409</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12389121">JCR-1402</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12379661" name="JCR-1526.patch" size="74906" author="mduerig" created="Tue, 8 Apr 2008 16:10:16 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 9 Apr 2008 09:41:43 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142729</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>192532</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>