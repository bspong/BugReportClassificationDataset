<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:53:41 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1641/JCR-1641.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1641] DefaultLoginModule/SimpleLoginModule don&apos;t support custom PrincipalProvider</title>
                <link>https://issues.apache.org/jira/browse/JCR-1641</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>When configuring a custom PrincipalProvider for the SimpleLoginModule or DefaultLoginModule, inside of a repository.xml file with configuration such as the following:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Security appName=&amp;quot;Jackrabbit&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;AccessManager&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;class=&amp;quot;org.apache.jackrabbit.core.security.DefaultAccessManager&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/AccessManager&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;LoginModule&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;class=&amp;quot;org.apache.jackrabbit.core.security.authentication.DefaultLoginModule&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;principalprovider&amp;quot; value=&amp;quot;com.foo.jcr.BasicPrincipalProvider&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/LoginModule&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;SecurityManager class=&amp;quot;org.apache.jackrabbit.core.DefaultSecurityManager&amp;quot;&amp;gt;         &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/SecurityManager&amp;gt;    &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/Security&amp;gt;&lt;br/&gt;
&lt;br/&gt;
And that yields the following stacktrace:&lt;br/&gt;
&lt;br/&gt;
javax.jcr.LoginException: org.apache.jackrabbit.core.security.authentication.DefaultLoginModule does not support &amp;#39;principalprovider: org.apache.jackrabbit.core.security.authentication.DefaultLoginModule does not support &amp;#39;principalprovider: org.apache.jackrabbit.core.security.authentication.DefaultLoginModule does not support &amp;#39;principalprovider&lt;br/&gt;
	at org.apache.jackrabbit.core.RepositoryImpl.login(RepositoryImpl.java:1353)&lt;br/&gt;
	at org.apache.jackrabbit.commons.AbstractRepository.login(AbstractRepository.java:53)&lt;br/&gt;
	at com.foo.jcr.PrincipalProviderTest.testPrincipalProvider(PrincipalProviderTest.java:24)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
	at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:98)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:79)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:87)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)&lt;br/&gt;
	at org.junit.internal.runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)&lt;br/&gt;
	at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)&lt;br/&gt;
	at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)&lt;br/&gt;
	at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)&lt;br/&gt;
	at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)&lt;br/&gt;
	at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:45)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)&lt;br/&gt;
Caused by: javax.security.auth.login.LoginException: org.apache.jackrabbit.core.security.authentication.DefaultLoginModule does not support &amp;#39;principalprovider&lt;br/&gt;
	at org.apache.jackrabbit.core.security.authentication.LocalAuthContext.login(LocalAuthContext.java:68)&lt;br/&gt;
	at org.apache.jackrabbit.core.RepositoryImpl.login(RepositoryImpl.java:1346)&lt;br/&gt;
	... 24 more&lt;br/&gt;
javax.security.auth.login.LoginException: org.apache.jackrabbit.core.security.authentication.DefaultLoginModule does not support &amp;#39;principalprovider&lt;br/&gt;
	at org.apache.jackrabbit.core.security.authentication.LocalAuthContext.login(LocalAuthContext.java:68)&lt;br/&gt;
	at org.apache.jackrabbit.core.RepositoryImpl.login(RepositoryImpl.java:1346)&lt;br/&gt;
	at org.apache.jackrabbit.commons.AbstractRepository.login(AbstractRepository.java:53)&lt;br/&gt;
	at com.foo.jcr.PrincipalProviderTest.testPrincipalProvider(PrincipalProviderTest.java:24)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:585)&lt;br/&gt;
	at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:59)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:98)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:79)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:87)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:77)&lt;br/&gt;
	at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:42)&lt;br/&gt;
	at org.junit.internal.runners.JUnit4ClassRunner.invokeTestMethod(JUnit4ClassRunner.java:88)&lt;br/&gt;
	at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)&lt;br/&gt;
	at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)&lt;br/&gt;
	at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)&lt;br/&gt;
	at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)&lt;br/&gt;
	at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:45)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)</description>
                <environment>vista jdk 1.5.0_11</environment>
            <key id="12397614">JCR-1641</key>
            <summary>DefaultLoginModule/SimpleLoginModule don&apos;t support custom PrincipalProvider</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="anchela">angela</assignee>
                                <reporter username="mkwhitacre">Micah Whitacre</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Jun 2008 21:04:29 +0100</created>
                <updated>Mon, 8 Dec 2008 11:09:39 +0000</updated>
                    <resolved>Wed, 27 Aug 2008 16:31:59 +0100</resolved>
                            <version>1.5</version>
                                <fixVersion>1.5</fixVersion>
                                <component>jackrabbit-core</component>
                <component>JCR 2.0</component>
                <component>security</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12602765" author="mkwhitacre" created="Thu, 5 Jun 2008 21:09:02 +0100"  >Zip file contains a basic implementation of a PrincipalProvider, a repository.xml file configured to use the PrincipalProvider, and a simple test case that when run generates the previously mentioned stack trace.</comment>
                    <comment id="12603669" author="mkwhitacre" created="Mon, 9 Jun 2008 20:59:04 +0100"  >I don&amp;#39;t have a patch but implementing my own LoginModule I did find that I needed to do two things to get this exception to go away:&lt;br/&gt;
&lt;br/&gt;
1. My custom login module needed to implement public String getPrincipalProvider() and public void setPrincipalProvider(String).&lt;br/&gt;
2. The configuration in the repository.xml file needs to be for &amp;lt;param name=&amp;quot;principalProvider&amp;quot; value=&amp;quot;...&amp;quot;/&amp;gt;.  &lt;br/&gt;
&lt;br/&gt;
Therefore I think the LoginModuleConfig.PARAM_PRINCIPAL_PROVIDER_CLASS contant needs to be changed to equal &amp;quot;principalProvider&amp;quot; instead of being &amp;quot;principalprovider&amp;quot;.</comment>
                    <comment id="12603705" author="mkwhitacre" created="Mon, 9 Jun 2008 22:46:06 +0100"  >Here is a quick and dirty patch that adds the needed methods to AbstractLoginModule as well as modifying the LoginModuleConfig constant to be correct.</comment>
                    <comment id="12603789" author="anchela" created="Tue, 10 Jun 2008 07:48:39 +0100"  >the 283 security section has undergone major changes.&lt;br/&gt;
i will take care of this issue once the jackrabbit impl is aligned with the latest version.</comment>
                </comments>
                    <attachments>
                    <attachment id="12383714" name="jcr-1641.patch" size="4787" author="mkwhitacre" created="Mon, 9 Jun 2008 22:46:06 +0100" />
                    <attachment id="12383494" name="JCR-1641.zip" size="1853" author="mkwhitacre" created="Thu, 5 Jun 2008 21:09:02 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 10 Jun 2008 06:48:39 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78475</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>192397</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>