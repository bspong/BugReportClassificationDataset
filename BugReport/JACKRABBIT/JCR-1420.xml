<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:50:30 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1420/JCR-1420.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1420] Add test for Node.restore() may throw InvalidStateException</title>
                <link>https://issues.apache.org/jira/browse/JCR-1420</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Add a unit test for &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1399&quot; title=&quot;Backport JCR-1197: Node.restore() may throw InvalidItemStateException&quot;&gt;&lt;strike&gt;JCR-1399&lt;/strike&gt;&lt;/a&gt; in the 1.3 branch.&lt;br/&gt;
&lt;br/&gt;
A test for the original feature in the trunk/1.4 (&lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1197&quot; title=&quot;Node.restore() may throw InvalidItemStateException&quot;&gt;&lt;strike&gt;JCR-1197&lt;/strike&gt;&lt;/a&gt;) needs a separate issue. </description>
                <environment></environment>
            <key id="12389584">JCR-1420</key>
            <summary>Add test for Node.restore() may throw InvalidStateException</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="alexander.klimetschek">Alexander Klimetschek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Feb 2008 11:18:41 +0000</created>
                <updated>Mon, 8 Dec 2008 11:09:34 +0000</updated>
                    <resolved>Sun, 12 Oct 2008 22:56:47 +0100</resolved>
                                            <fixVersion>1.5</fixVersion>
                                <component>jackrabbit-core</component>
                <component>test</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12572430" author="alexander.klimetschek" created="Tue, 26 Feb 2008 11:19:58 +0000"  >Unit test for this problem, based on &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12368670/CheckoutFailure.java&quot;&gt;https://issues.apache.org/jira/secure/attachment/12368670/CheckoutFailure.java&lt;/a&gt;</comment>
                    <comment id="12572524" author="jukkaz" created="Tue, 26 Feb 2008 15:58:15 +0000"  >Resolving as Duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1399&quot; title=&quot;Backport JCR-1197: Node.restore() may throw InvalidItemStateException&quot;&gt;&lt;strike&gt;JCR-1399&lt;/strike&gt;&lt;/a&gt;.&lt;br/&gt;
&lt;br/&gt;
A test case should be treated as an integral part of the feature or bug fix being implemented, so I see little value (or even harm) in having separate issues for test cases. Only if you&amp;#39;re just adding the test case to improve test coverage without changing any of the related product code, should IMHO a separate issue be created for a test case.&lt;br/&gt;
&lt;br/&gt;
Anyway, thanks for the effort, good test cases are very valuable! I committed the this test case in revision 631261 with a summary pointing to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1399&quot; title=&quot;Backport JCR-1197: Node.restore() may throw InvalidItemStateException&quot;&gt;&lt;strike&gt;JCR-1399&lt;/strike&gt;&lt;/a&gt;.</comment>
                    <comment id="12572557" author="jukkaz" created="Tue, 26 Feb 2008 16:49:56 +0000"  >Reopening with to add the test case in Jackrabbit trunk instead of the 1.3 branch.</comment>
                    <comment id="12572872" author="jukkaz" created="Wed, 27 Feb 2008 11:11:16 +0000"  >It&amp;#39;s a good practice to use assertions for the expected failure points of the test case.&lt;br/&gt;
&lt;br/&gt;
In this case, instead of allowing the InvalidItemStateException to be thrown as an error, we should catch it like this:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// critical location regarding item state manager caching (see &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1197&quot; title=&quot;Node.restore() may throw InvalidItemStateException&quot;&gt;&lt;strike&gt;JCR-1197&lt;/strike&gt;&lt;/a&gt;)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;try {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;grandChildNode.checkout();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} catch (InvalidItemStateException e) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;fail(&amp;quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1197&quot; title=&quot;Node.restore() may throw InvalidItemStateException&quot;&gt;&lt;strike&gt;JCR-1197&lt;/strike&gt;&lt;/a&gt;: Node.restore() may throw InvalidItemStateException&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
Also, do we really need the loops? A test case should be as simple and straightforward as possible.</comment>
                    <comment id="12572881" author="alexander.klimetschek" created="Wed, 27 Feb 2008 11:34:21 +0000"  >I was looking for a expectThisException(String s, Exception e) method in the Junit API, didn&amp;#39;t find one, where catch + fail would be the right solution - although the exception stack trace is lost. I found myself using assertTrue(&amp;quot;message&amp;quot;, false) instead. Thanks for the pointer!</comment>
                    <comment id="12572892" author="alexander.klimetschek" created="Wed, 27 Feb 2008 12:23:20 +0000"  >No, I don&amp;#39;t think the loop is needed. I just copied over &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12368670/CheckoutFailure.java&quot;&gt;https://issues.apache.org/jira/secure/attachment/12368670/CheckoutFailure.java&lt;/a&gt; without touching the inner code.</comment>
                    <comment id="12638914" author="jukkaz" created="Sun, 12 Oct 2008 22:56:47 +0100"  >Merged the test case to trunk in revision 703888.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12389110">JCR-1399</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12376479" name="jackrabbit-core.unit-test-for-jcr-1197.patch" size="3407" author="alexander.klimetschek" created="Tue, 26 Feb 2008 11:19:58 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 26 Feb 2008 15:58:15 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142687</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190143</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>