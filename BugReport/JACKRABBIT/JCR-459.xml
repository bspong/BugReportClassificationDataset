<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:39:37 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-459/JCR-459.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-459] Add JMX support to register a JCR RMI Server into Jboss</title>
                <link>https://issues.apache.org/jira/browse/JCR-459</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>&amp;nbsp;I added two classes and one descriptor file to the jcr-rmi project. These files provide support to make the generated jar deployable into a Jboss server. &lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;The deployment descriptor contains two parameters, the address of the local repository instance, and the target address where the rmi server should be registered. &lt;br/&gt;
&lt;br/&gt;
e.g.&lt;br/&gt;
&lt;br/&gt;
&amp;lt;server&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;lt;mbean code=&amp;quot;org.apache.jackrabbit.rmi.server.jmx.JCRServer&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;name=&amp;quot;Jackrabbit.services:RMIServer = JCR RMI Server&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;attribute name=&amp;quot;Local&amp;quot;&amp;gt;java:jcr/local&amp;lt;/attribute&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;attribute name=&amp;quot;Target&amp;quot;&amp;gt;&lt;a href=&quot;jnp://localhost:1099/jcrServer&amp;lt;/attribute&quot;&gt;jnp://localhost:1099/jcrServer&amp;amp;lt;/attribute&lt;/a&gt;&amp;gt;	&lt;br/&gt;
&amp;lt;depends&amp;gt;jboss.jca:service=ManagedConnectionFactory,name=jcr/local&amp;lt;/depends&amp;gt;					&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;lt;/mbean&amp;gt;&lt;br/&gt;
&amp;lt;/server&amp;gt;	&lt;br/&gt;
&lt;br/&gt;
this configuration registers an RMI server at /jcrServer that wraps the local repository at java:jcr/local.&lt;br/&gt;
&lt;br/&gt;
br,&lt;br/&gt;
Edgar</description>
                <environment></environment>
            <key id="12344393">JCR-459</key>
            <summary>Add JMX support to register a JCR RMI Server into Jboss</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="edgarpoce">Edgar Poce</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jun 2006 02:56:23 +0100</created>
                <updated>Fri, 13 Oct 2006 17:03:15 +0100</updated>
                    <resolved>Tue, 20 Jun 2006 05:03:20 +0100</resolved>
                            <version>1.0</version>
                <version>1.0.1</version>
                                <fixVersion>1.1</fixVersion>
                                <component>jackrabbit-jcr-rmi</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12416457" author="jukkaz" created="Fri, 16 Jun 2006 14:23:51 +0100"  >+1 Nice.&lt;br/&gt;
&lt;br/&gt;
Should the stop() method explicitly unbind the server from the RMI registry in addition to clearing the reference?&lt;br/&gt;
&lt;br/&gt;
It might also be good to add a method for setting the JNDI environment HashTable. Some repositories might be available in alternate JNDI trees and would thus need a custom initial context factory and perhaps some other configuration parameters.&lt;br/&gt;
&lt;br/&gt;
PS. I&amp;#39;ve been thinking about a generic RepositoryMBean interface and perhaps a specific JackrabbitRepositoryMBean extension for monitoring and managing a local Jackrabbit repository. It could be used quite easily for example for things like externally managing node types and the future backup utility.</comment>
                    <comment id="12416474" author="edgarpoce" created="Fri, 16 Jun 2006 18:33:16 +0100"  >&amp;gt;Should the stop() method explicitly unbind the server from the RMI registry in addition to &lt;br/&gt;
&amp;gt; clearing the reference? &lt;br/&gt;
You are right.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; It might also be good to add a method for setting the JNDI environment HashTable. Some repositories&lt;br/&gt;
&amp;gt; might be available in alternate JNDI trees and would thus need a custom initial context factory and &lt;br/&gt;
&amp;gt; perhaps some other configuration parameters. &lt;br/&gt;
I agree, maybe something like a String parameter which contains a comma separated list of assignments. e.g. &lt;br/&gt;
&amp;quot;java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory,java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces&amp;quot;&lt;br/&gt;
would that be ok?&lt;br/&gt;
&lt;br/&gt;
Let me know if you prefer me to make the changes and prepare a patch, commit it directly, or make the changes yourself.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; PS. I&amp;#39;ve been thinking about a generic RepositoryMBean interface and perhaps &lt;br/&gt;
&amp;gt; a specific JackrabbitRepositoryMBean &lt;br/&gt;
&amp;gt; extension for monitoring and managing a local Jackrabbit repository. &lt;br/&gt;
&amp;gt; It could be used quite easily for example for things like externally &lt;br/&gt;
&amp;gt; managing node types and the future backup utility.&lt;br/&gt;
&lt;br/&gt;
See my comments in the ML</comment>
                    <comment id="12416703" author="edgarpoce" created="Mon, 19 Jun 2006 10:24:30 +0100"  >jukka, I made the changes we discussed, thanks for your comments.</comment>
                    <comment id="12416795" author="jukkaz" created="Tue, 20 Jun 2006 03:19:50 +0100"  >Thanks, feel free to commit the changes in svn.&lt;br/&gt;
&lt;br/&gt;
I was actually thinking of setting the properties of the local JNDI context, i.e. so that you could access some other naming tree than the default one in your container. Something like this:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String localAddress = ...;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Hashtable localEnvironment = ...;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String targetAddress = ...;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Hashtable targetEnvironment = ...;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InitialContext localContext = new InitialContext(localEnvironment);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Repository repository = (Repository) local.lookup(localAddress);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RemoteAdapterFactory factory = new ServerAdapterFactory();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RemoteRepository remote = factory.getRemoteRepository(repository);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InitialContext targetContext = new InitialContext(targetEnvironment);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;targetContext.bind(targetAddress, remote);&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12416808" author="edgarpoce" created="Tue, 20 Jun 2006 05:03:20 +0100"  >both local and remote environment variables are configurable optionally. thanks jukka.</comment>
                </comments>
                    <attachments>
                    <attachment id="12335599" name="20060616-jcr-rmi-jmx.diff" size="11171" author="edgarpoce" created="Mon, 19 Jun 2006 10:24:30 +0100" />
                    <attachment id="12335460" name="jcr-rmi-jmx.diff" size="5784" author="edgarpoce" created="Thu, 15 Jun 2006 02:57:21 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 16 Jun 2006 13:23:51 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142180</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279455</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>