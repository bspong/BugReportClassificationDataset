<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:49:29 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-564/JCR-564.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-564] Remove geronimo JTA as a runtime dependency</title>
                <link>https://issues.apache.org/jira/browse/JCR-564</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Geronimo JTA is marked as a dependency for runtime when it should be (at most) a compile time dependency. &lt;br/&gt;
Is it possible to remedy this so when using the war or building your own, you don&amp;#39;t get the geronimo jar stowing away?</description>
                <environment></environment>
            <key id="12349388">JCR-564</key>
            <summary>Remove geronimo JTA as a runtime dependency</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="michaelneale">Michael Neale</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Sep 2006 12:20:30 +0100</created>
                <updated>Tue, 15 Jan 2008 23:26:34 +0000</updated>
                    <resolved>Fri, 5 Oct 2007 14:38:50 +0100</resolved>
                                            <fixVersion>1.4</fixVersion>
                                <component>jackrabbit-core</component>
                <component>maven</component>
                <component>transactions</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12433095" author="dpfister" created="Thu, 7 Sep 2006 13:26:35 +0100"  >You probably allude to the following lines in jackrabbit/trunk/jcr-server/webapp/project.xml:&lt;br/&gt;
&lt;br/&gt;
&amp;lt;dependency&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;lt;groupId&amp;gt;geronimo-spec&amp;lt;/groupId&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;lt;artifactId&amp;gt;geronimo-spec-jta&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;lt;version&amp;gt;1.0-M1&amp;lt;/version&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;lt;properties&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;war.bundle&amp;gt;true&amp;lt;/war.bundle&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;lt;/properties&amp;gt;&lt;br/&gt;
&amp;lt;/dependency&amp;gt;&lt;br/&gt;
&lt;br/&gt;
Actually, Jackrabbit&amp;#39;s session implementation o.a.j.core.XASessionImpl references XAResource from the javax.transaction.xa package. Being of course a mandatory part of an application server, this jar has been included in the web application when used in servlet container environments, where it is optional. If you still need the &amp;quot;geronimo-free&amp;quot; web application, changing the value of the property &amp;quot;war.bundle&amp;quot; to &amp;quot;false&amp;quot; in your local copy should do the trick.</comment>
                    <comment id="12433100" author="michaelneale" created="Thu, 7 Sep 2006 13:38:32 +0100"  >yeah that would be it, OK no problems. &lt;br/&gt;
&lt;br/&gt;
I was able to run it stand alone with no JTA on the classpath just fine, there must only be some operations which would touch it at runtime ?&lt;br/&gt;
&lt;br/&gt;
I assume the standard JTA would do just fine (and like you said, can be removed when in an appropriate container anyway).&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12433106" author="dpfister" created="Thu, 7 Sep 2006 14:18:28 +0100"  >You&amp;#39;re right: some classes are actually contained in a JDK&amp;#39;s/JRE&amp;#39;s rt.jar (1.4 or higher).  The operations leaving that scope are the tests related to XA functionality: particularly o.a.j.core.UserTransactionImpl working as dummy javax.xa.UserTransaction, an interface that is not contained in the JRE&amp;#39;s rt.jar. Therefore, I don&amp;#39;t think, removing the dependency to geronimo-spec-jta is an option.</comment>
                    <comment id="12433118" author="michaelneale" created="Thu, 7 Sep 2006 14:49:54 +0100"  >OK, in maven 2 you can mark it as &amp;quot;provided&amp;quot; which means it is a compile/test time dep, but at runtime it is expected to be provided by the container - not sure if maven 1 has the equivalent. </comment>
                    <comment id="12433686" author="tripod" created="Sun, 10 Sep 2006 11:45:23 +0100"  >&amp;gt; OK, in maven 2 you can mark it as &amp;quot;provided&amp;quot; which means it is a compile/test time dep, but at&lt;br/&gt;
&amp;gt; runtime it is expected to be provided by the container&lt;br/&gt;
exactly.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; - not sure if maven 1 has the equivalent.&lt;br/&gt;
unfortunately not, but the similar functionality is built using the &amp;#39;war.bundle&amp;#39; property.&lt;br/&gt;
</comment>
                    <comment id="12529144" author="jukkaz" created="Thu, 20 Sep 2007 17:27:27 +0100"  >Interesting, we actually had an existing issue for the change that was recently discussed on the mailing list [1].&lt;br/&gt;
&lt;br/&gt;
The attached patch changes the scope of the geronimo-jta dependency from compile to test within jackrabbit-core. The only required code changes are about copying a few private transaction status constants. In fact, looking at the code flow, the status codes are mostly unused, and could easily be replaced with two boolean flags (prepared &amp;amp; rolledBack). However, in order to keep this patch strictly non-functional, I didn&amp;#39;t include such changes.&lt;br/&gt;
&lt;br/&gt;
I haven&amp;#39;t yet looked at how this change affects downstream components like jackrabbit-jca.&lt;br/&gt;
&lt;br/&gt;
[1] &lt;a href=&quot;http://www.nabble.com/Using-the-geronimo-jta-dependency-only-in-test-scope-tf4466162.html&quot;&gt;http://www.nabble.com/Using-the-geronimo-jta-dependency-only-in-test-scope-tf4466162.html&lt;/a&gt;</comment>
                    <comment id="12532657" author="jukkaz" created="Fri, 5 Oct 2007 14:38:50 +0100"  >Patch committed in revision 582264.</comment>
                </comments>
                    <attachments>
                    <attachment id="12366299" name="jta.patch" size="6870" author="jukkaz" created="Thu, 20 Sep 2007 17:27:27 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 7 Sep 2006 12:26:35 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142251</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279485</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>