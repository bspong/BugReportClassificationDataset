<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:48:38 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-248/JCR-248.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-248] create configuration on InputStream</title>
                <link>https://issues.apache.org/jira/browse/JCR-248</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>RepositoryConfig should be possible to create based on InputStreams (in case of URLs) ; right now it&amp;#39;s possible only using String and InputSource. Please update also the JCA connector. </description>
                <environment></environment>
            <key id="12317754">JCR-248</key>
            <summary>create configuration on InputStream</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="costin">Costin Leau</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Oct 2005 22:37:00 +0100</created>
                <updated>Fri, 13 Oct 2006 17:03:06 +0100</updated>
                    <resolved>Wed, 6 Sep 2006 00:09:48 +0100</resolved>
                                            <fixVersion>1.1</fixVersion>
                                <component>config</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12331673" author="jukkaz" created="Mon, 10 Oct 2005 06:58:16 +0100"  >You can use InputStreams just by wrapping them into InputSources:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String repositoryHome = ...;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;InputStream repositoryXml = ...;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RepositoryConfig config = RepositoryConfig.create(new InputSource(repositoryXml), repositoryHome);&lt;br/&gt;
&lt;br/&gt;
(The API uses InputSources as they make for better XML error messages)&lt;br/&gt;
&lt;br/&gt;
The JCA case is a bit more difficult. It might make sense to allow URLs instead of just file paths as configuration file paths in RepositoryConfig.create(String,String)? Would this cover your use case?</comment>
                    <comment id="12331687" author="costin" created="Mon, 10 Oct 2005 15:58:40 +0100"  >Yes it would. The JCA relies on the RepositoryConfigu so it just needs some methods which accept InputSources instead of just Strings.&lt;br/&gt;
As for the InputSource why doesn&amp;#39;t JackRabbit creates it internally ? - the client is force to have the InputSource library in the classpath just as a dependency.</comment>
                    <comment id="12331693" author="jukkaz" created="Mon, 10 Oct 2005 18:19:35 +0100"  >org.xml.sax.InputSource is a part of Java 1.4 so no extra dependencies are required. An InputSource is created internally when RepositoryConfig is given a configuration file path, and it would certainly be possible to add a utility method that does the same for an InputStream. I&amp;#39;m just hesitant on extending this semi-public API without a good use case for it.&lt;br/&gt;
&lt;br/&gt;
Extending the RepositoryConfig.create(String,String) method to allow URLs in addition to file paths is a &amp;quot;cleaner&amp;quot; extension, so I&amp;#39;d like to do that instead if it is good enough for you. This extension would also require no changes in JCA.&lt;br/&gt;
</comment>
                    <comment id="12331696" author="costin" created="Mon, 10 Oct 2005 18:51:00 +0100"  >You are right about the extra dependecy however considering that an InputSource is created internally by JackRabbit if a String is used I think using an InputStream is the best alternative. The configuration implementation doesn&amp;#39;t have to treat the case of file, url or InputSource or anything like that - maybe the client is using a PipedStream. Indeed I have a hook (create the InputSource) but I think it would be easier if the would be a generic method which accepts the inputStream and the rest of the method internally delegate to it InputStream is the lowest common dominator and there is always a situation where the client doesn&amp;#39;t use URLs or File.&lt;br/&gt;
My main motivation behind the issue is the update of the JCA contribution so if I can hook an input stream to it (no matter if I have to create an InputSource or not).&lt;br/&gt;
</comment>
                    <comment id="12331701" author="tripod" created="Mon, 10 Oct 2005 22:43:50 +0100"  >when dealing with xml configuration, an InputSource signature should be provided. the InputSource also hold information about the SystemId or PublishId. this information is used to resolve external entities, or DTDs.</comment>
                    <comment id="12331707" author="costin" created="Mon, 10 Oct 2005 23:18:19 +0100"  >But you can create an InputSource based on an InputStream (i.e. InputSource xmlSource = new InputSource(myInputStream); ). Am I missing something here?</comment>
                    <comment id="12331709" author="tripod" created="Mon, 10 Oct 2005 23:32:02 +0100"  >sure you can. but then you loose the ability to resolve relative entities. currently, the config does not make use of those, so this is no problem.&lt;br/&gt;
&lt;br/&gt;
my point is the following:&lt;br/&gt;
- adding a new signature that takes an inputstream would just be convenience. the overhead in typing &amp;#39;new InputSource(in)&amp;#39; is very low&lt;br/&gt;
- only having the InputStream signature is not acceptable, since the XML parsing could need the information stored in the InputSource.&lt;br/&gt;
</comment>
                    <comment id="12331773" author="jukkaz" created="Tue, 11 Oct 2005 16:19:42 +0100"  >Tobias is right, InputSource is the correct format to use.&lt;br/&gt;
&lt;br/&gt;
I added (r312816)  the convenience methods create(URI, String) and create(InputStream, String). This should cover all use cases.</comment>
                    <comment id="12331777" author="costin" created="Tue, 11 Oct 2005 17:33:49 +0100"  >Can you please, also update the JCA connector configuration methods?</comment>
                    <comment id="12331779" author="jukkaz" created="Tue, 11 Oct 2005 17:56:15 +0100"  >Costin Leau wrote:&lt;br/&gt;
&amp;gt; Can you please, also update the JCA connector configuration methods?&lt;br/&gt;
&lt;br/&gt;
Ah, sorry. Reopened the issue and assigned to Dominique.&lt;br/&gt;
&lt;br/&gt;
Dominique, could you take a look at this? The current JCA configuration is based on the repository configuration file name and I&amp;#39;m not sure about all the implications of changing that.</comment>
                    <comment id="12331781" author="costin" created="Tue, 11 Oct 2005 18:12:21 +0100"  >It&amp;#39;s quite easy - the JCA connector creates the repository and it&amp;#39;s configuration from Strings - the update should add the rest of the methods from repository config ( create(URI, String) and create(InputStream, String)). That&amp;#39;s it.</comment>
                    <comment id="12332170" author="jukkaz" created="Sun, 16 Oct 2005 23:23:11 +0100"  >I&amp;#39;m just curious about how to handle the property declarations in ra.xml, and more generally whether it even makes sense to allow InputStreams as declarative connector properties.</comment>
                    <comment id="12356421" author="dpfister" created="Tue, 1 Nov 2005 01:24:33 +0000"  >According to the J2EE Connector Architecture Specification 1.0, custom properties for the managed connection factory class must be of one of the following types:&lt;br/&gt;
&lt;br/&gt;
- java.lang.Boolean&lt;br/&gt;
- java.lang.String&lt;br/&gt;
- java.lang.Integer,&lt;br/&gt;
- java.lang.Double&lt;br/&gt;
- java.lang.Byte&lt;br/&gt;
- java.lang.Short,&lt;br/&gt;
- java.lang.Long&lt;br/&gt;
- java.lang.Float&lt;br/&gt;
- java.lang.Character&lt;br/&gt;
&lt;br/&gt;
Adding URI and/or InputStream would then obviously be in violation to this. It would, of course, make sense to add a property of type String named URI, that would internally be converted to a URI before creating the RepositoryConfig object, but what about InputStream?</comment>
                    <comment id="12432690" author="jukkaz" created="Wed, 6 Sep 2006 00:09:48 +0100"  >Resolving this issue as Fixed, even though the JCA connector isn&amp;#39;t changed. As commented by Dominique, the JCA spec doesn&amp;#39;t allow for InputStream configuration so it doesn&amp;#39;t make sense to implement that in the connector.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 10 Oct 2005 05:58:16 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142053</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279351</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>