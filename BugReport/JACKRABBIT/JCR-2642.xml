<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:42:08 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2642/JCR-2642.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2642] JackrabbitParser and tika 0.7 parser</title>
                <link>https://issues.apache.org/jira/browse/JCR-2642</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Hi,&lt;br/&gt;
&lt;br/&gt;
I was trying to implement a custom parser and found the following problem.&lt;br/&gt;
Since tika 0.7 it is possible to implement your custom parser and specify it into a service provider configuration file (META-INF/services/org.apache.tika.parser.Parser). In this way there would be no need to maintain a custom tika-config.xml file if you&amp;#39;d like to implement a custom parser.&lt;br/&gt;
&lt;br/&gt;
The problem that I had was in the JackrabbitParser because I wasn&amp;#39;t able to instantiate the AutoDetectParser with the default constructor is will be instantiated using the default TikaConfig constructor.&lt;br/&gt;
Basically from tika 0.7, the TikaConfig.getTikaConfig() is instantiating the TikaConfig using the default constructor instead of accessing the tika-config.xml file from withing the package, and reads the service provider configuration files and populate the parsers map.&lt;br/&gt;
&lt;br/&gt;
What I&amp;#39;m proposing is to change the JackrabbitParser to instantiate the AutoDetectParser using the default constructor, in this way the using tika version &amp;gt;= 0.7 we could easily implement our own parsers and there won&amp;#39;t be a reason to maintain the tika-config.xml, also a sort of &amp;quot;backward&amp;quot; compatibility would be maintained because using the AutoDetectParser default constructor the TikaConfig is instantiated using TikaConfig.getTikaConfig() wich for tika versions &amp;lt; 0.7 calls the TikaConfig(InputStream) constructor whcih reads the configuration directly from the package.&lt;br/&gt;
&lt;br/&gt;
Basically the JackrabbitParser should look like this:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public JackrabbitParser() {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;	parser = new AutoDetectParser();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
Thanks,&lt;br/&gt;
Dan</description>
                <environment></environment>
            <key id="12465542">JCR-2642</key>
            <summary>JackrabbitParser and tika 0.7 parser</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="danutdi">Dan Ducar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 May 2010 09:56:24 +0100</created>
                <updated>Tue, 8 Nov 2011 15:52:12 +0000</updated>
                    <resolved>Tue, 23 Nov 2010 14:30:24 +0000</resolved>
                            <version>2.1</version>
                                <fixVersion>2.2</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                          <timeoriginalestimate seconds="1800">0.5h</timeoriginalestimate>
                    <timeestimate seconds="1800">0.5h</timeestimate>
                                  <comments>
                    <comment id="12934844" author="jukkaz" created="Tue, 23 Nov 2010 14:30:24 +0000"  >We need the custom tika-config.xml file since we want to by default disable text extraction of package and image file formats to avoid excess resources being spent.&lt;br/&gt;
&lt;br/&gt;
However, in revision 1038125 I modified our custom tika-config.xml file to use the new DefaultParser class in Tika 0.8 to automatically pick up all available parser classes through the service provider mechanism used by Tika. The selected package and image formats are still disabled by explicitly mapping them to the dummy EmptyParser class.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 23 Nov 2010 14:30:24 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>97823</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>280267</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>