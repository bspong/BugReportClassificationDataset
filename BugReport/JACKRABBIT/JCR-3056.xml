<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:46:17 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-3056/JCR-3056.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-3056] jcr-commons: Add utility to translate a string to a AuthorizableQuery and execute it on the user manager </title>
                <link>https://issues.apache.org/jira/browse/JCR-3056</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>it would be convenient if jackrabbit-jcr-commons would provide a utility to generate authorizable&lt;br/&gt;
queries from a string.</description>
                <environment></environment>
            <key id="12519262">JCR-3056</key>
            <summary>jcr-commons: Add utility to translate a string to a AuthorizableQuery and execute it on the user manager </summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mduerig">Michael D&#252;rig</assignee>
                                <reporter username="anchela">angela</reporter>
                        <labels>
                    </labels>
                <created>Thu, 18 Aug 2011 09:59:58 +0100</created>
                <updated>Tue, 8 Nov 2011 15:55:57 +0000</updated>
                    <resolved>Thu, 18 Aug 2011 15:43:56 +0100</resolved>
                            <version>2.3</version>
                                <fixVersion>2.3</fixVersion>
                                <component>jackrabbit-jcr-commons</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13086902" author="anchela" created="Thu, 18 Aug 2011 10:04:40 +0100"  >proposed patch that adds an optional dependency to jackrabbit-api.&lt;br/&gt;
&lt;br/&gt;
i had a quick discussion with jukka about this, since we&lt;br/&gt;
currently have not possibility to expose utilities related to jackrabbit extensions to the jcr-api (except for adding them to jackrabbit-core directly, which is cumbersome). &lt;br/&gt;
the proposed way to deal with is, was to make the dependency optional for all those that want to make use of jcr-commons but only want to have a jcr-dependency.</comment>
                    <comment id="13086903" author="anchela" created="Thu, 18 Aug 2011 10:05:06 +0100"  >michi, what do you think?</comment>
                    <comment id="13086911" author="jukkaz" created="Thu, 18 Aug 2011 10:30:46 +0100"  >Wouldn&amp;#39;t it actually be easier, instead of having such a query mapper utility, to simply support this JSON query format directly in the API?</comment>
                    <comment id="13086922" author="mduerig" created="Thu, 18 Aug 2011 10:56:21 +0100"  >It might be easier but I think the current way is cleaner. The API exposes an object model of the query (introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2800&quot; title=&quot;Implement search facility for users and groups&quot;&gt;&lt;strike&gt;JCR-2800&lt;/strike&gt;&lt;/a&gt;). This patch adds a specific language bindings. </comment>
                    <comment id="13086926" author="jukkaz" created="Thu, 18 Aug 2011 11:09:05 +0100"  >Do we expect the JSON query format to be widely used (i.e. by more clients than the object model) with the UserManager API? In that case I&amp;#39;d simply support it directly in the API by exposing a findAuthorizables(String query) method.&lt;br/&gt;
&lt;br/&gt;
Otherwise, if we don&amp;#39;t expect the JSON format to be widely used, is the jcr-commons component then the right place for this code?&lt;br/&gt;
</comment>
                    <comment id="13086932" author="mduerig" created="Thu, 18 Aug 2011 11:17:56 +0100"  >So the question is whether to add findAuthorizables(String query) to the API and put the code into jackrabbit-core or to put the code somewhere else (i.e jcr-commons). I&amp;#39;d go for the second since it seems more modular to me. If it turns out (which I doubt) that there is really a need for a findAuthorizables(String query) method in the API we can still add that later on. </comment>
                    <comment id="13086941" author="jukkaz" created="Thu, 18 Aug 2011 11:40:00 +0100"  >Fair point. I&amp;#39;m just trying to establish how important and/or widely used this feature (JSON query format) is and how many clients really are using it. This sounds rather like a specific integration scenario (i.e. a single backend servlet for Ajax clients) than a generic use case, especially since we already do have the query builder API for Java clients. I&amp;#39;m therefore a bit reluctant to have this in jcr-commons.</comment>
                    <comment id="13086943" author="mduerig" created="Thu, 18 Aug 2011 11:47:44 +0100"  >What other options are there? It seems a bit alien for jackrabbit-core. Putting it directly into jackrabbit-api doesn&amp;#39;t seem right to me.</comment>
                    <comment id="13086946" author="jukkaz" created="Thu, 18 Aug 2011 11:52:03 +0100"  >Why do we need it in Jackrabbit? Assuming the purpose of this code is to support Ajax clients, the code should simply reside with the servlet that processes requests sent by those clients.</comment>
                    <comment id="13086947" author="mduerig" created="Thu, 18 Aug 2011 11:55:38 +0100"  >Well that was the case up to now. Maybe Angela can jump in here. </comment>
                    <comment id="13086951" author="anchela" created="Thu, 18 Aug 2011 12:16:05 +0100"  >i think it nicely fits into jcr-commons which already provides quite some utilities for json-formatting jcr-specific content.&lt;br/&gt;
notably the spi2davex and it&amp;#39;s server-side implementation make heavy use of json-serialization of jcr items and it IMO&lt;br/&gt;
looks perfectly logic to add similar functionality for users, access control and other jackrabbit specific extensions&lt;br/&gt;
of the JCR API... &lt;br/&gt;
&lt;br/&gt;
... in addition having that optional dependency to jackrabbit-api would finally allow us to provide utilities for &lt;br/&gt;
jackrabbit-api which up to now was put into jackrabbit-core or into project specific utilities.</comment>
                    <comment id="13087015" author="jukkaz" created="Thu, 18 Aug 2011 14:47:57 +0100"  >OK, +1 from me then.&lt;br/&gt;
&lt;br/&gt;
It would be great however if all the code in jcr-commons that depends on API extensions in jackrabbit-api was put under a separate package like org.apache.jackrabbit.commons.jackrabbit (for example, use o.a.j.commons.jackrabbit.user instead of o.a.j.commons.security.user), so that a simple grep over a client codebase is enough to tell whether the optional jackrabbit-api dependency is really required.</comment>
                    <comment id="13087017" author="anchela" created="Thu, 18 Aug 2011 14:50:57 +0100"  >&amp;gt; It would be great however if all the code in jcr-commons that depends on API extensions in jackrabbit-api was put under a separate package&lt;br/&gt;
&lt;br/&gt;
fine with me. i will change the package name accordingly.</comment>
                    <comment id="13088739" author="jukkaz" created="Mon, 22 Aug 2011 15:45:53 +0100"  >Updated OSGi metadata accordingly in revision 1160280.</comment>
                </comments>
                    <attachments>
                    <attachment id="12490777" name="JCR-3056.patch" size="29759" author="anchela" created="Thu, 18 Aug 2011 10:04:40 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 18 Aug 2011 09:30:46 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>64191</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191042</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>