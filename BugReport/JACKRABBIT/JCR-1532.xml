<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:43:04 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1532/JCR-1532.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1532] ERROR 40XD0: Container has been closed exception with Derby DB</title>
                <link>https://issues.apache.org/jira/browse/JCR-1532</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>This seems very similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1039&quot; title=&quot;Bundle Persistence Manager error - failing to read bundle the first time&quot;&gt;&lt;strike&gt;JCR-1039&lt;/strike&gt;&lt;/a&gt;, only I am getting it on 1.4 using the regular DatabasePersistenceManager.&lt;br/&gt;
Was the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1039&quot; title=&quot;Bundle Persistence Manager error - failing to read bundle the first time&quot;&gt;&lt;strike&gt;JCR-1039&lt;/strike&gt;&lt;/a&gt; in 1.3.3 merged to 1.4.x?&lt;br/&gt;
&lt;br/&gt;
Here is the relevant part of the exception:&lt;br/&gt;
&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | Caused by: javax.jcr.RepositoryException: failed to retrieve item state of item fb648866-a236-42aa-8039-df68f26dd2ad/{&lt;a href=&quot;http://www.jcp.org/jcr/1.0&quot;&gt;http://www.jcp.org/jcr/1.0&lt;/a&gt;}data: failed to read property state: fb648866-a236-42aa-8039-df68f26dd2ad/{&lt;a href=&quot;http://www.jcp.org/jcr/1.0&quot;&gt;http://www.jcp.org/jcr/1.0&lt;/a&gt;}data: failed to read property state: fb648866-a236-42aa-8039-df68f26dd2ad/{&lt;a href=&quot;http://www.jcp.org/jcr/1.0&quot;&gt;http://www.jcp.org/jcr/1.0&lt;/a&gt;}data&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.ItemManager.createItemInstance(ItemManager.java:570)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.ItemManager.getItem(ItemManager.java:395)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.NodeImpl.getProperty(NodeImpl.java:2553)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.artifactory.jcr.JcrFile.getStream(JcrFile.java:133)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | ... 55 more&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | Caused by: org.apache.jackrabbit.core.state.ItemStateException: failed to read property state: fb648866-a236-42aa-8039-df68f26dd2ad/{&lt;a href=&quot;http://www.jcp.org/jcr/1.0&quot;&gt;http://www.jcp.org/jcr/1.0&lt;/a&gt;}data&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.persistence.db.DatabasePersistenceManager.load(DatabasePersistenceManager.java:406)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.state.SharedItemStateManager.loadItemState(SharedItemStateManager.java:1161)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.state.SharedItemStateManager.getNonVirtualItemState(SharedItemStateManager.java:1086)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.state.SharedItemStateManager.getItemState(SharedItemStateManager.java:248)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.state.LocalItemStateManager.getPropertyState(LocalItemStateManager.java:118)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.state.LocalItemStateManager.getItemState(LocalItemStateManager.java:150)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.state.XAItemStateManager.getItemState(XAItemStateManager.java:226)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.state.SessionItemStateManager.getItemState(SessionItemStateManager.java:175)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.ItemManager.createItemInstance(ItemManager.java:564)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | ... 58 more&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | Caused by: javax.jcr.RepositoryException: Error creating temporary file: ERROR 40XD0: Container has been closed.: ERROR 40XD0: Container has been closed.&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.value.BLOBInTempFile.&amp;lt;init&amp;gt;(BLOBInTempFile.java:69)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.value.BLOBInTempFile.getInstance(BLOBInTempFile.java:103)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.value.InternalValue.getBLOBFileValue(InternalValue.java:630)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.value.InternalValue.create(InternalValue.java:265)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.persistence.util.Serializer.deserialize(Serializer.java:296)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.persistence.db.DatabasePersistenceManager.load(DatabasePersistenceManager.java:397)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | ... 66 more&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | Caused by: java.io.IOException: ERROR 40XD0: Container has been closed.&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.derby.impl.store.raw.data.OverflowInputStream.fillByteHolder(Unknown Source)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.derby.impl.store.raw.data.BufferedByteHolderInputStream.read(Unknown Source)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at java.io.DataInputStream.read(DataInputStream.java:132)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at java.io.FilterInputStream.read(FilterInputStream.java:116)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at java.io.FilterInputStream.read(FilterInputStream.java:116)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at java.io.SequenceInputStream.read(SequenceInputStream.java:191)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at java.io.InputStream.read(InputStream.java:85)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | at org.apache.jackrabbit.core.value.BLOBInTempFile.&amp;lt;init&amp;gt;(BLOBInTempFile.java:61)&lt;br/&gt;
INFO | jvm 1 | 2008/04/10 14:00:37 | ... 71 more</description>
                <environment></environment>
            <key id="12393724">JCR-1532</key>
            <summary>ERROR 40XD0: Container has been closed exception with Derby DB</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="yoav">Yoav Landman</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Apr 2008 08:06:33 +0100</created>
                <updated>Mon, 8 Dec 2008 11:08:01 +0000</updated>
                    <resolved>Fri, 17 Oct 2008 11:42:23 +0100</resolved>
                            <version>1.4</version>
                                <fixVersion>1.5</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12587891" author="stefan@jira" created="Fri, 11 Apr 2008 09:58:24 +0100"  >&lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1039&quot; title=&quot;Bundle Persistence Manager error - failing to read bundle the first time&quot;&gt;&lt;strike&gt;JCR-1039&lt;/strike&gt;&lt;/a&gt; fixed the issue for the BundleDbPersistenceManager only.&lt;br/&gt;
&lt;br/&gt;
AFAIK the derby issue (ERROR 40XD0) occurs when, while consuming an InputStream from a ResultSet, another stmt is executed on the same connection. futthrermore, the data read must exceed a certain size. &lt;br/&gt;
&lt;br/&gt;
i guess this could happen when using DatabasePersistenceManager with externalBlobs=false. &lt;br/&gt;
&lt;br/&gt;
could you please post your PersistenceManager configuration?   </comment>
                    <comment id="12587931" author="yoav" created="Fri, 11 Apr 2008 12:40:31 +0100"  >Your assumption about externalBlobs is right:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;PersistenceManager class=&amp;quot;org.apache.jackrabbit.core.persistence.db.DerbyPersistenceManager&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!--&amp;lt;param name=&amp;quot;url&amp;quot; value=&amp;quot;jdbc:derby:${wsp.home}/db;create=true&amp;quot;/&amp;gt;--&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;url&amp;quot; value=&amp;quot;jdbc:derby:${rep.home}/db;create=true&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;schemaObjectPrefix&amp;quot; value=&amp;quot;${wsp.name}_&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;externalBLOBs&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;schema&amp;quot; value=&amp;quot;/jcr/derby&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/PersistenceManager&amp;gt;</comment>
                    <comment id="12587944" author="stefan@jira" created="Fri, 11 Apr 2008 13:43:45 +0100"  >fixed in r 647147.&lt;br/&gt;
&lt;br/&gt;
thanks for reporting this issue!</comment>
                    <comment id="12588345" author="yoav" created="Sun, 13 Apr 2008 00:34:21 +0100"  >Thank you for resolving it so quickly :)</comment>
                    <comment id="12588926" author="yoav" created="Tue, 15 Apr 2008 07:24:49 +0100"  >Perhaps we were glad too soon :(&lt;br/&gt;
I patched 1.4.2-core as the only real change is internal logic in DatabasePersistenceManager and this class is similar in 1.5 and 1.4.2 (also had to change the POM to include the commons-io dependency, but that&amp;#39;s basic).&lt;br/&gt;
&lt;br/&gt;
After doing that, I am getting the following read exceptions, such as:&lt;br/&gt;
&lt;br/&gt;
2008-04-13 00:03:27,857 [ERROR] persistence.db.DatabasePersistenceManager  - failed to read property state: b69dcff2-6b33-4cde-8b4e-37916aee698b/{&lt;a href=&quot;http://www.jcp.org/jcr/1.0&quot;&gt;http://www.jcp.org/jcr/1.0&lt;/a&gt;}data&lt;br/&gt;
javax.jcr.RepositoryException: Error creating file: ERROR 40XD0: Container has been closed.: ERROR 40XD0: Container has been closed.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.value.InternalValue.create(InternalValue.java:270)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.persistence.util.Serializer.deserialize(Serializer.java:296)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.persistence.db.DatabasePersistenceManager.load(DatabasePersistenceManager.java:407)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.SharedItemStateManager.loadItemState(SharedItemStateManager.java:1177)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.SharedItemStateManager.getNonVirtualItemState(SharedItemStateManager.java:1102)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.SharedItemStateManager.getItemState(SharedItemStateManager.java:249)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.LocalItemStateManager.getPropertyState(LocalItemStateManager.java:118)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.LocalItemStateManager.getItemState(LocalItemStateManager.java:150)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.XAItemStateManager.getItemState(XAItemStateManager.java:226)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.SessionItemStateManager.getItemState(SessionItemStateManager.java:186)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.ItemManager.createItemInstance(ItemManager.java:564)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.ItemManager.getItem(ItemManager.java:395)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.NodeImpl.getProperty(NodeImpl.java:2548)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[clipped]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:529)&lt;br/&gt;
Caused by: java.io.IOException: ERROR 40XD0: Container has been closed.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.derby.impl.store.raw.data.OverflowInputStream.fillByteHolder(Unknown Source)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.derby.impl.store.raw.data.BufferedByteHolderInputStream.read(Unknown Source)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.io.DataInputStream.read(DataInputStream.java:134)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.io.FilterInputStream.read(FilterInputStream.java:111)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.io.FilterInputStream.read(FilterInputStream.java:111)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.io.FilterInputStream.read(FilterInputStream.java:90)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.value.BLOBValue.&amp;lt;init&amp;gt;(BLOBValue.java:108)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.value.InternalValue.create(InternalValue.java:268)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;... 32 more&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Moreover, I now started to receive write exceptions as well, such as:&lt;br/&gt;
&lt;br/&gt;
2008-04-13 00:02:00,066 [ERROR] persistence.db.DatabasePersistenceManager  - failed to write property state: 57c5083e-7ff2-4b5f-86c0-bad6bd56475c/{&lt;a href=&quot;http://www.jcp.org/jcr/1.0&quot;&gt;http://www.jcp.org/jcr/1.0&lt;/a&gt;}data&lt;br/&gt;
java.io.IOException: ERROR 40XD0: Container has been closed.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.derby.impl.store.raw.data.OverflowInputStream.fillByteHolder(Unknown Source)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.derby.impl.store.raw.data.BufferedByteHolderInputStream.read(Unknown Source)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.io.DataInputStream.read(DataInputStream.java:134)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.io.FilterInputStream.read(FilterInputStream.java:111)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.io.FilterInputStream.read(FilterInputStream.java:111)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.io.FilterInputStream.read(FilterInputStream.java:90)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.value.BLOBValue.&amp;lt;init&amp;gt;(BLOBValue.java:108)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.value.InternalValue.create(InternalValue.java:268)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.persistence.util.Serializer.serialize(Serializer.java:223)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.persistence.db.DatabasePersistenceManager.store(DatabasePersistenceManager.java:486)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.persistence.AbstractPersistenceManager.store(AbstractPersistenceManager.java:75)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.persistence.db.DatabasePersistenceManager.store(DatabasePersistenceManager.java:283)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.SharedItemStateManager$Update.end(SharedItemStateManager.java:704)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.SharedItemStateManager.update(SharedItemStateManager.java:873)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.LocalItemStateManager.update(LocalItemStateManager.java:324)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.XAItemStateManager.update(XAItemStateManager.java:313)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.LocalItemStateManager.update(LocalItemStateManager.java:300)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.state.SessionItemStateManager.update(SessionItemStateManager.java:317)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.ItemImpl.save(ItemImpl.java:1250)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.SessionImpl.save(SessionImpl.java:897)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[clipped]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;...&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.lang.Thread.run(Thread.java:595)&lt;br/&gt;
</comment>
                    <comment id="12588929" author="yoav" created="Tue, 15 Apr 2008 07:28:47 +0100"  >Unfortunately one of my biggest users is currently crashing on this bug.</comment>
                    <comment id="12588932" author="yoav" created="Tue, 15 Apr 2008 07:33:59 +0100"  >Attaching my patched DatabasePersistenceManager&lt;br/&gt;
(based on &lt;a href=&quot;http://svn.apache.org/repos/asf/jackrabbit/tags/jackrabbit-core-1.4.2/src/main/java/org/apache/jackrabbit/core/persistence/db/DatabasePersistenceManager.java#647406)&quot;&gt;http://svn.apache.org/repos/asf/jackrabbit/tags/jackrabbit-core-1.4.2/src/main/java/org/apache/jackrabbit/core/persistence/db/DatabasePersistenceManager.java#647406)&lt;/a&gt;</comment>
                    <comment id="12590956" author="stefan@jira" created="Mon, 21 Apr 2008 17:25:13 +0100"  >i tried to reproduce the issue on trunk but was unable to do so.&lt;br/&gt;
&lt;br/&gt;
could you please create/attach a simple test case which can be used to reproduce the issue?&lt;br/&gt;
&lt;br/&gt;
what derby version are you using?&lt;br/&gt;
&lt;br/&gt;
are you using any jackrabbit extensions/customizations?&lt;br/&gt;
&lt;br/&gt;
thanks&lt;br/&gt;
stefan </comment>
                    <comment id="12590960" author="yoav" created="Mon, 21 Apr 2008 17:41:03 +0100"  >The Derby version is 10.3.1.4. Not using any extensions/customizations except for the patched DB PM.&lt;br/&gt;
Currently I do not have a reproducible test case, but the same exceptions have been reported by 2 independent users running with the patch.&lt;br/&gt;
I will attempt to create a test case for this, however.&lt;br/&gt;
I might just switch to using the new DS with a Bundle PM in order to overcome this, since it is a show stopper for me.</comment>
                    <comment id="12592336" author="stefan@jira" created="Fri, 25 Apr 2008 11:25:28 +0100"  >i noticed that you&amp;#39;re using a newer derby version (10.3.1.4), jackrabbit currently uses 10.2.1.6.&lt;br/&gt;
&lt;br/&gt;
i tried to reproduce the issue using the same, newer, derby version... &lt;br/&gt;
unfortunately i am still unable to reproduce it.&lt;br/&gt;
&lt;br/&gt;
could you please provide more information on when the issue occurs? e.g. what&amp;#39;s the size of the &lt;br/&gt;
binary causing the issue?</comment>
                    <comment id="12637854" author="jukkaz" created="Wed, 8 Oct 2008 11:27:23 +0100"  >Any updates on this? Looks like we&amp;#39;re missing a reproducible test case of the followup issues.&lt;br/&gt;
&lt;br/&gt;
I suggest we re-resolve this as Fixed for 1.5 based on the fix in revision 647147 and open separate issues for the other problems once we have a test case for them.</comment>
                    <comment id="12640488" author="jukkaz" created="Fri, 17 Oct 2008 11:42:23 +0100"  >Resolved as Fixed.</comment>
                </comments>
                    <attachments>
                    <attachment id="12380146" name="DatabasePersistenceManager.java" size="48238" author="yoav" created="Tue, 15 Apr 2008 07:33:59 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 11 Apr 2008 08:58:24 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78521</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189648</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>