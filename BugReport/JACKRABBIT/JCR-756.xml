<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:44:10 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-756/JCR-756.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-756] Concurrent add/remove child node operations in a cluster may corrupt repository.</title>
                <link>https://issues.apache.org/jira/browse/JCR-756</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Concurrent add/remove child node operations in a cluster may store an inconsistent list of child node entries, i.e. an entry in the list may appear that has no associated node. This eventually results in an ItemNotFoundException, the next time one of these bogus entries is accessed.</description>
                <environment></environment>
            <key id="12363231">JCR-756</key>
            <summary>Concurrent add/remove child node operations in a cluster may corrupt repository.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="dpfister">Dominique Pfister</assignee>
                                <reporter username="dpfister">Dominique Pfister</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Feb 2007 15:01:42 +0000</created>
                <updated>Wed, 25 Apr 2007 09:45:30 +0100</updated>
                    <resolved>Tue, 20 Feb 2007 16:27:53 +0000</resolved>
                            <version>1.2.1</version>
                <version>1.2.2</version>
                                <fixVersion>1.3</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12474483" author="dpfister" created="Tue, 20 Feb 2007 16:13:49 +0000"  >Create.java: Sample application that creates nodes and properties below the root node.</comment>
                    <comment id="12474485" author="dpfister" created="Tue, 20 Feb 2007 16:14:54 +0000"  >Remove.java: Sample application that deletes nodes below the root node</comment>
                    <comment id="12474486" author="dpfister" created="Tue, 20 Feb 2007 16:16:26 +0000"  >Sample repository.xml configuration that might be used for both create and remove sample application.</comment>
                    <comment id="12474488" author="dpfister" created="Tue, 20 Feb 2007 16:27:53 +0000"  >Problem identified to be the following during an update:&lt;br/&gt;
&lt;br/&gt;
1) When a journal update is started, the clustered instance syncs with journal contents. This &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;might  change the SharedItemStateManager&amp;#39;s states&lt;br/&gt;
2) Later on, eventual, non-conflicting changes are merged to the local states. &lt;br/&gt;
3) Finally, the journal update is prepared. This might again trigger an external update from&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the journal and change the shared states . However, these changes are not merged to the &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;local states.&lt;br/&gt;
4) The local states are pushed &amp;quot;blindly&amp;quot; to the shared states, potentially overwriting a previous&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;change.&lt;br/&gt;
&lt;br/&gt;
Fixed by locking the journal in 1) instead of 3). This still allows non-conflicting merge, but only once. An even&lt;br/&gt;
better, less blocking approach would iteratively merge the changes seen in external updates to the local states.&lt;br/&gt;
&lt;br/&gt;
Thanks a lot to Rafa&#322; Kwiecie&#324; for reporting this bug and providing the test classes.&lt;br/&gt;
&lt;br/&gt;
Fixed in revision 509624.</comment>
                    <comment id="12475896" author="jukkaz" created="Mon, 26 Feb 2007 16:41:59 +0000"  >Dominique, can you isolate the fix for just this issue from the 509624 commit? Otherwise I can&amp;#39;t include&lt;br/&gt;
this in the Jackrabbit 1.2.3 release, as the 509624 change is IMHO too large for a patch release.&lt;br/&gt;
</comment>
                    <comment id="12477661" author="dpfister" created="Sat, 3 Mar 2007 18:10:55 +0000"  >Jukka, sorry for not having answered to your question, was quite busy the last few days! I quickly took a look at the changes I had to make in order to have the Create/Remove test scenario pass in my already refactored classes, and those changes looked to complicated to be merged back to the 1.2 branch.</comment>
                    <comment id="12477701" author="jukkaz" created="Sat, 3 Mar 2007 22:59:08 +0000"  >No problem, we&amp;#39;ll just release the fix with 1.3. :-)</comment>
                </comments>
                    <attachments>
                    <attachment id="12351604" name="Create.java" size="1400" author="dpfister" created="Tue, 20 Feb 2007 16:13:49 +0000" />
                    <attachment id="12351606" name="Remove.java" size="1357" author="dpfister" created="Tue, 20 Feb 2007 16:14:53 +0000" />
                    <attachment id="12351607" name="repository.xml" size="2412" author="dpfister" created="Tue, 20 Feb 2007 16:16:26 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 26 Feb 2007 16:41:59 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>80496</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>192688</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>