<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:55:37 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1509/JCR-1509.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1509] [SUBMISSION] Amazon S3 Persistence Manager Project</title>
                <link>https://issues.apache.org/jira/browse/JCR-1509</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>As I noted previously on the dev-list (&lt;a href=&quot;http://markmail.org/search/?q=amazon+list%3Aorg.apache.jackrabbit.dev#query:amazon%20list%3Aorg.apache.jackrabbit.dev+page:1+mid:qw27gopsn4lnbde5+state:results&quot;&gt;http://markmail.org/search/?q=amazon+list%3Aorg.apache.jackrabbit.dev#query:amazon%20list%3Aorg.apache.jackrabbit.dev+page:1+mid:qw27gopsn4lnbde5+state:results&lt;/a&gt;) I have written an Amazon S3 bundle persistence manager for Jackrabbit. I want to submit the code for the sandbox, the full source is included in the zip file. Licensed under the ASF.&lt;br/&gt;
&lt;br/&gt;
The project also aims to implement a normal persistence manager (which I abandoned in favor of the more efficient bundle pm, which is implemented, but does not work 100%), a file system impl for S3 (only rough structure present) and an SPI impl that connects to S3 (dreaming ;-)). For more infos, I will include the README.txt of the project here:&lt;br/&gt;
&lt;br/&gt;
=================================================================&lt;br/&gt;
Welcome to Jackrabbit persistence for Amazon Webservices (ie. S3)&lt;br/&gt;
=================================================================&lt;br/&gt;
&lt;br/&gt;
This module contains various persistence options for using&lt;br/&gt;
Amazon Webservices as backend for Jackrabbit / JCR. Amazon has&lt;br/&gt;
two persistence services: S3 (public) and SimpleDB (still beta).&lt;br/&gt;
The following options are available/ideas:&lt;br/&gt;
&lt;br/&gt;
- (1) persistence managers that connects to S3&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(normal + bundle, in work, probably not very efficient)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
- (2) persistence manager that connects to SimpleDB&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(NOT feasible)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
- (3) SPI implementation that connects to S3&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(not implemented, very complicated, probably more efficient)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
See details below and also TODO.txt&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Installing / Testing&lt;br/&gt;
====================&lt;br/&gt;
&lt;br/&gt;
This needs a patched Jackrabbit 1.3.x version. The patches can&lt;br/&gt;
be found in the directory &amp;quot;patches-for-1.3&amp;quot;. One patch will modify&lt;br/&gt;
the pom of jackrabbit-core to generated the jackrabbit test jar&lt;br/&gt;
for reuse in this project. To build that customized version, you need&lt;br/&gt;
to do the following steps:&lt;br/&gt;
&lt;br/&gt;
1) svn co &lt;a href=&quot;http://svn.apache.org/repos/asf/jackrabbit/branches/1.3&quot;&gt;http://svn.apache.org/repos/asf/jackrabbit/branches/1.3&lt;/a&gt; jackrabbit-1.3&lt;br/&gt;
2) cd jackrabbit-1.3&lt;br/&gt;
3) apply all patches from the &amp;quot;patches-for-1.3&amp;quot; directory:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;patch -p0 &amp;lt; %JR-AMAZON-PATH%/patches-for-1.3/%PATCH%.patch&lt;br/&gt;
4) mvn install&lt;br/&gt;
5) cd %JR-AMAZON-PATH%&lt;br/&gt;
6) change jackrabbit version number in pom.xml to the one you just built&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;(eg. project/parent/version = 1.3.4)&lt;br/&gt;
7) cp aws.properties.template aws.properties&lt;br/&gt;
8) enter your credentials in aws.properties&lt;br/&gt;
9) mvn test&lt;br/&gt;
&lt;br/&gt;
For debugging, you can change the logging in applications/test/log4j.properties&lt;br/&gt;
and set up proxying (for monitoring the traffic with eg. tcp mon) in&lt;br/&gt;
applications/test/jets3t.properties.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Details about Implementations&lt;br/&gt;
=============================&lt;br/&gt;
&lt;br/&gt;
(1) org.apache.jackrabbit.persistence.amazon.AmazonS3PersistenceManager&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://www.amazon.com/s3&quot;&gt;http://www.amazon.com/s3&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Stores JCR Nodes and Properties inside S3 Objects. Uses UUID for Nodes and&lt;br/&gt;
UUID/Name for Properties as Object names. Node references are stored&lt;br/&gt;
via references/UUID.&lt;br/&gt;
&lt;br/&gt;
Configuration parameters:&lt;br/&gt;
&lt;br/&gt;
accessKey&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Amazon AWS access key (aka account user id) [required]&lt;br/&gt;
&lt;br/&gt;
secretKey&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Amazon AWS secret key (aka account password) [required]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
bucket&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Name of the S3 bucket to use [optional, default uses accessKey]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Note that bucket names are global, so using your accessKey is&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;recommended to prevent conflicts with other AWS users. &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br/&gt;
objectPrefix&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Prefix used for all object names [optional, default is &amp;quot;&amp;quot;]&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Should include the workspace name (&amp;quot;${wsp.name}&amp;quot; or &amp;quot;version&amp;quot; for&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;the versioning PM) to put multiple workspaces into one bucket.&lt;br/&gt;
&lt;br/&gt;
Example XML Config:&lt;br/&gt;
&lt;br/&gt;
&amp;lt;PersistenceManager class=&amp;quot;org.apache.jackrabbit.persistence.amazon.AmazonS3PersistenceManager&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;accessKey&amp;quot;    value=&amp;quot;abcde01234&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;secretKey&amp;quot;    value=&amp;quot;topsecret&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;bucket&amp;quot;       value=&amp;quot;abcde01234.jcrstore&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;objectPrefix&amp;quot; value=&amp;quot;${wsp.name}/&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/PersistenceManager&amp;gt;&lt;br/&gt;
&lt;br/&gt;
-----&lt;br/&gt;
&lt;br/&gt;
(2) AmazonSimpleDBPersistenceManager&lt;br/&gt;
&lt;br/&gt;
This is *not* feasible because of the restrictions that are applied&lt;br/&gt;
to SimpleDB. An item can only have up to 256 attributes, each attribute&lt;br/&gt;
can only contain a string value and that one can only have 1024 chars.&lt;br/&gt;
See this link for more information:&lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://docs.amazonwebservices.com/AmazonSimpleDB/2007-11-07/DeveloperGuide/SDB_API_PutAttributes.html&quot;&gt;http://docs.amazonwebservices.com/AmazonSimpleDB/2007-11-07/DeveloperGuide/SDB_API_PutAttributes.html&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
-----&lt;br/&gt;
&lt;br/&gt;
(3) org.apache.jackrabbit.spi2s3&lt;br/&gt;
&lt;br/&gt;
TODO&lt;br/&gt;
&lt;br/&gt;
lots of work...&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
About&lt;br/&gt;
=====&lt;br/&gt;
&lt;br/&gt;
It was originally written by Alexander Klimetschek&lt;br/&gt;
(alexander.klimetschek at googlemail dot com) in 2008.&lt;br/&gt;
&lt;br/&gt;
See the Apache Jackrabbit web site (&lt;a href=&quot;http://jackrabbit.apache.org/&quot;&gt;http://jackrabbit.apache.org/&lt;/a&gt;)&lt;br/&gt;
for documentation and other information. You are welcome to join the&lt;br/&gt;
Jackrabbit mailing lists (&lt;a href=&quot;http://jackrabbit.apache.org/mail-lists.html&quot;&gt;http://jackrabbit.apache.org/mail-lists.html&lt;/a&gt;)&lt;br/&gt;
to discuss this component and to use the Jackrabbit issue tracker&lt;br/&gt;
(&lt;a href=&quot;http://issues.apache.org/jira/browse/JCR&quot;&gt;http://issues.apache.org/jira/browse/JCR&lt;/a&gt;) to report issues or request&lt;br/&gt;
new features.&lt;br/&gt;
&lt;br/&gt;
Apache Jackrabbit is a project of the Apache Software Foundation&lt;br/&gt;
(&lt;a href=&quot;http://www.apache.org&quot;&gt;http://www.apache.org&lt;/a&gt;).&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12392713">JCR-1509</key>
            <summary>[SUBMISSION] Amazon S3 Persistence Manager Project</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="alexander.klimetschek">Alexander Klimetschek</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Mar 2008 10:06:24 +0100</created>
                <updated>Wed, 8 Aug 2012 09:42:11 +0100</updated>
                    <resolved>Wed, 3 Sep 2008 16:32:01 +0100</resolved>
                                                            <component>sandbox</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>3</watches>
                                                    <comments>
                    <comment id="12583597" author="alexander.klimetschek" created="Mon, 31 Mar 2008 10:08:23 +0100"  >The current state. The major todo:&lt;br/&gt;
&lt;br/&gt;
- fix S3 PM/Bundle PM (pass all JCR API tests):&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Problem: HTTP calls to S3 hang every now and then forever; need a timeout and a retry,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;but I couldn&amp;#39;t quickly figure out how (needs tweaking of jets3t lib + apache commons&lt;br/&gt;
&amp;nbsp;&amp;nbsp;http client below)&lt;br/&gt;
&lt;br/&gt;
See also TODO.txt included in the zip.</comment>
                    <comment id="12628027" author="jukkaz" created="Wed, 3 Sep 2008 16:32:01 +0100"  >Committed the submission to sandbox/jackrabbit-amazon in revision 691635.&lt;br/&gt;
&lt;br/&gt;
Resolving as Fixed. Let&amp;#39;s use a separate issue for promoting this from sandbox once the code is stable.</comment>
                    <comment id="13430886" author="jdevers" created="Wed, 8 Aug 2012 06:51:25 +0100"  >What was the outcome of this solution in the end?  Is this a viable way of using S3 to store static content for Jackrabbit implementations or was an alternative method developed?</comment>
                    <comment id="13430946" author="alexander.klimetschek" created="Wed, 8 Aug 2012 09:42:10 +0100"  >Outcome code-wise was nothing more than shown here. It turned out that S3 is too slow and not fine-granular enough for a persistence manager. But it makes for a good DataStore, especially for reading (someone built one proprietary).</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12402994">JCR-1724</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12378934" name="jackrabbit-amazon.zip" size="49758" author="alexander.klimetschek" created="Mon, 31 Mar 2008 10:08:23 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 3 Sep 2008 15:32:01 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142720</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279845</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>