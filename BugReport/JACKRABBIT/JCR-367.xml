<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:56:00 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-367/JCR-367.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-367] Remove dependency on Xerces</title>
                <link>https://issues.apache.org/jira/browse/JCR-367</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Classloaders in certain J2EE servers do not play well with the Xerces requirement</description>
                <environment></environment>
            <key id="12330531">JCR-367</key>
            <summary>Remove dependency on Xerces</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="myoung">Michael Young</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Mar 2006 09:38:41 +0000</created>
                <updated>Wed, 22 Aug 2007 08:58:51 +0100</updated>
                    <resolved>Mon, 3 Jul 2006 19:58:46 +0100</resolved>
                            <version>0.9</version>
                <version>1.0</version>
                <version>1.0.1</version>
                                <fixVersion>1.1</fixVersion>
                                <component>xml</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12371386" author="jukkaz" created="Wed, 22 Mar 2006 15:48:50 +0000"  >This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-217&quot; title=&quot;class org.apache.jackrabbit.name.QName has a hardcoded dependency on Xerces&quot;&gt;&lt;strike&gt;JCR-217&lt;/strike&gt;&lt;/a&gt; that was resolved as Won&amp;#39;t Fix. Not marking this as a duplicate since the reasoning is different.</comment>
                    <comment id="12418035" author="fmeschbe" created="Tue, 27 Jun 2006 22:38:51 +0100"  >I ran into the same issue when working on trying to integrate with the Apache Felix (OSGi R4) as a bundle.&lt;br/&gt;
&lt;br/&gt;
I tried to create a workaround, which I can solve like this:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* Use JAXP Transformer (yes it is part of the Java Runtime siince 1.4) for export&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* Copy XMLChar to o.a.j.util. Yes, this is not the best of all solutions, but it removes the dependency and XMLChar is Apache, too.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* Remains the o.a.j.c.nodetype.converter package which contains a XML Schema to node type converter. This is probably not a tool, which is run on a casual server implementation. Therefore, leaving the dependency there and documenting is probably ok. Better would probably be to take this out fo the core repository package, not sure, though.</comment>
                    <comment id="12418041" author="jukkaz" created="Tue, 27 Jun 2006 23:15:47 +0100"  >&amp;gt; Use JAXP Transformer (yes it is part of the Java Runtime siince 1.4) for export&lt;br/&gt;
&lt;br/&gt;
We should be careful with especially namespaces being correctly transmitted through the Transformer interface. There are a few bug reports about the same issue earlier on.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Copy XMLChar to o.a.j.util. Yes, this is not the best of all solutions, but it removes the dependency and XMLChar is Apache, too.&lt;br/&gt;
&lt;br/&gt;
Agreed. Not nice, but not too bad either.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; Remains the o.a.j.c.nodetype.converter package which contains a XML Schema to node type converter.&lt;br/&gt;
&amp;gt; This is probably not a tool, which is run on a casual server implementation. Therefore, leaving the dependency&lt;br/&gt;
&amp;gt; there and documenting is probably ok. Better would probably be to take this out fo the core repository package,&lt;br/&gt;
&amp;gt; not sure, though.&lt;br/&gt;
&lt;br/&gt;
The XML Schema converter was included in core when I merged the CND support from contrib. It really should be outside the core unless we want to support direct XML Schema imports through registerNodeTypes().&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ve also been thinking about replacing the converter with an XSL transformation. Any takers?&lt;br/&gt;
</comment>
                    <comment id="12418254" author="fmeschbe" created="Wed, 28 Jun 2006 22:38:33 +0100"  >&amp;gt;  We should be careful with especially namespaces being correctly transmitted&lt;br/&gt;
&amp;gt; through the Transformer interface. There are a few bug reports about the same&lt;br/&gt;
&amp;gt; issue earlier on. &lt;br/&gt;
&lt;br/&gt;
It turned out that the issues mentioned were around parsing XML, which used the Transfomer interface. Here we are talking about serializing.&lt;br/&gt;
&lt;br/&gt;
I quickly tested a patch which I attach whether it works - and it seems it works.&lt;br/&gt;
&lt;br/&gt;
Any objections to me checking it in ?</comment>
                    <comment id="12418255" author="fmeschbe" created="Wed, 28 Jun 2006 22:40:16 +0100"  >A patch which adds the XMLChar class to the util package and replaces the serializer with using JAXP Transform.</comment>
                    <comment id="12418260" author="stefan@jira" created="Wed, 28 Jun 2006 23:12:55 +0100"  >&amp;nbsp;Comment by Felix Meschberger [28/Jun/06 02:38 PM]&lt;br/&gt;
&amp;gt; I quickly tested a patch which I attach whether it works - and it seems it works.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Any objections to me checking it in ?&lt;br/&gt;
&lt;br/&gt;
did you test with jre 1.4. and jre 1.5?&lt;br/&gt;
&lt;br/&gt;
the proposed change directly impacts 2 major api methods (javax.jcr.Session#export*View).&lt;br/&gt;
i&amp;#39;d be careful with such a change as the existing code does work is extensively tested over time.&lt;br/&gt;
&lt;br/&gt;
i am not against the change but IMO more than just superficial testing is required&lt;br/&gt;
(e.g. performance, memory consumption, different jre&amp;#39;s)&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12418261" author="fmeschbe" created="Wed, 28 Jun 2006 23:23:44 +0100"  >&amp;gt; did you test with jre 1.4. and jre 1.5?&lt;br/&gt;
&lt;br/&gt;
Hmm, no, but as the new code relies on JAXP, which is part of the J2SE API since 1.4. I assume, this code is correct in both 1.4 and 1.5 I have to assume, right ? Correct me if I am wrong.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; (e.g. performance, memory consumption, different jre&amp;#39;s) &lt;br/&gt;
&lt;br/&gt;
Performance ? Don&amp;#39;t know whether Xerces Serializer is faster or slower than JAXP. Do I have to care in this special case of import and export, whether it takes 1 or 2 ms longer or not ?&lt;br/&gt;
&lt;br/&gt;
Memory Consumption ? I assume removing and not using a library which has a file size of almost 1MB is a big plus in this regard, right ? But you are right, I did not crosscheck whether the serialization takes more or less memory. Is this kind of test a requirement for fixes ?&lt;br/&gt;
&lt;br/&gt;
Different JREs ? As I said JAXP is part of the J2SE API and runtime hence I assume this to be working. I have to, as I have confidence in Sun - else I could not even use the java.lang.String class :-)</comment>
                    <comment id="12418264" author="stefan@jira" created="Wed, 28 Jun 2006 23:42:00 +0100"  >Comment by Felix Meschberger [28/Jun/06 03:23 PM]  &lt;br/&gt;
&amp;gt; Hmm, no, but as the new code relies on JAXP, which is part of the J2SE API since 1.4. I assume, this code is correct in both 1.4 and 1.5 I have to assume, right ? Correct me if I am wrong.&lt;br/&gt;
&lt;br/&gt;
well, just a example: the public class org.apache.xml.utils.XMLChar is part of the 1.4 jre but it doesn&amp;#39;t exist in jre 1.5.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; ... Is this kind of test a requirement for fixes ? &lt;br/&gt;
&lt;br/&gt;
it&amp;#39;s IMO common sense to thoroughly test changes with significant potential impact on public api mehtods&lt;br/&gt;
and unknown side effects, especially if they replace time-tested code.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; ... as I have confidence in Sun - else I could not even use the java.lang.String class :-)&lt;br/&gt;
&lt;br/&gt;
well then consider the XMLChar case above...</comment>
                    <comment id="12418266" author="fmeschbe" created="Wed, 28 Jun 2006 23:49:27 +0100"  >&amp;gt; well then consider the XMLChar case above...&lt;br/&gt;
&lt;br/&gt;
Hmm, XMLChar is not part of the J2SE API AFAIK .. But: JAXP is in the javax.xml package, which is publicly defined, is part of the API and and and .... So we should not compare apples to pears here...&lt;br/&gt;
&lt;br/&gt;
I agree that Sun has done a terrible job of first adding the org.apache stuff as is just to find out, that this poses more problems than are solved. In 1.5 those org.apache classes are &amp;quot;hidden&amp;quot; below the com.sun package to make clear they are used internally by the runtime.</comment>
                    <comment id="12418439" author="jukkaz" created="Thu, 29 Jun 2006 19:03:31 +0100"  >Looks good to me.&lt;br/&gt;
&lt;br/&gt;
The best way to get it tested in a wide number of different environments is to include the change in trunk. We can always revert it if it causes problems to someone.&lt;br/&gt;
</comment>
                    <comment id="12418469" author="fmeschbe" created="Thu, 29 Jun 2006 21:46:01 +0100"  >Ok, I assign this issue to me. But I will commit the patch only after my vacations towards the end of July to not compromise in Jackrabbit case of having to fallback.</comment>
                    <comment id="12418613" author="jukkaz" created="Fri, 30 Jun 2006 18:40:20 +0100"  >I&amp;#39;d actually prefer to have this patch applied already now. The reason for waiting is the threat of possible JAXP incompatibilities, which can only reasonably be detected by wide enough testing. I&amp;#39;d like to have this change included in Jackrabbit 1.1; the longer it&amp;#39;s in trunk before that, the more testing it receives.&lt;br/&gt;
&lt;br/&gt;
In short I share Stefan&amp;#39;s concerns, but end up with the opposite conclusion on how to best handle them. :-)</comment>
                    <comment id="12418621" author="mreutegg" created="Fri, 30 Jun 2006 19:12:53 +0100"  >I agree with Jukka, the sooner we have this patch applied the better. Even though we might find out there are issues we cannot resolve and have to revert the patch, but this can be done by any commiter and is not tied to anyones vacation.</comment>
                    <comment id="12418630" author="stefan@jira" created="Fri, 30 Jun 2006 19:59:45 +0100"  >Comment by Jukka Zitting [30/Jun/06 10:40 AM]  &lt;br/&gt;
&amp;gt; In short I share Stefan&amp;#39;s concerns, but end up with the opposite conclusion on how to best handle them. :-)&lt;br/&gt;
&lt;br/&gt;
thanks, jukka. that&amp;#39;s fine with me. &lt;br/&gt;
</comment>
                    <comment id="12418687" author="fmeschbe" created="Sat, 1 Jul 2006 02:30:37 +0100"  >Added XMLChar class from JDK 1.4 to o.a.j.util and adapted references.&lt;br/&gt;
&lt;br/&gt;
Fixed in Rev. 418356</comment>
                    <comment id="12418693" author="fmeschbe" created="Sat, 1 Jul 2006 03:12:15 +0100"  >Replaced use of Xerces Serializer with JAXP Transform.&lt;br/&gt;
&lt;br/&gt;
Fixed in Rev. 418357&lt;br/&gt;
&lt;br/&gt;
Note: After applying this test, two JUnits fail:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* org.apache.jackrabbit.core.XATest.testRemoveVersion() - this is unrelated to this issue, I assume&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* org.apache.jackrabbit.core.xml.DocumentViewTest.testMultiValue() - fails as is expected by looking at the&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DocViewSAXEventGenerator.leavingProperties method: multivalue properties are not exported at all.&lt;br/&gt;
&lt;br/&gt;
Therefore, I assume these fixes seem to work. Time should tell.</comment>
                    <comment id="12418694" author="fmeschbe" created="Sat, 1 Jul 2006 03:13:22 +0100"  >Considering this issue fixed for the moment.</comment>
                    <comment id="12418711" author="jukkaz" created="Sat, 1 Jul 2006 05:05:05 +0100"  >Felix:&lt;br/&gt;
&amp;gt; Added XMLChar class from JDK 1.4 to o.a.j.util and adapted references.&lt;br/&gt;
&lt;br/&gt;
How about using the version from Xerces trunk (see &lt;a href=&quot;http://svn.apache.org/viewvc/xerces/java/trunk/src/org/apache/xerces/util/XMLChar.java?view=markup)&quot;&gt;http://svn.apache.org/viewvc/xerces/java/trunk/src/org/apache/xerces/util/XMLChar.java?view=markup)&lt;/a&gt; instead? It&amp;#39;s a bit more polished and is licensed using ASLv2. It should be functionally identical.&lt;br/&gt;
&lt;br/&gt;
Unless anyone objects, I&amp;#39;ll update the class.&lt;br/&gt;
</comment>
                    <comment id="12418726" author="fielding" created="Sat, 1 Jul 2006 06:37:14 +0100"  >It is not safe to use code from a JDK, even when that code comes from Apache originally.  Please replace it with the code from Xerces trunk.&lt;br/&gt;
</comment>
                    <comment id="12418769" author="jukkaz" created="Sat, 1 Jul 2006 15:13:15 +0100"  >&amp;gt; It is not safe to use code from a JDK, even when that code comes from Apache originally. Please replace it with the code from Xerces trunk. &lt;br/&gt;
&lt;br/&gt;
Replaced in revision 418445.</comment>
                    <comment id="12418933" author="stefan@jira" created="Mon, 3 Jul 2006 18:07:16 +0100"  >reopening issue because of failing junit testcases:&lt;br/&gt;
&lt;br/&gt;
Testsuite: org.apache.jackrabbit.test.api.TestAll&lt;br/&gt;
Tests run: 584, Failures: 8, Errors: 24, Time elapsed: 31.155 sec&lt;br/&gt;
&lt;br/&gt;
environment: w2k, sun jdk 1.4.2_03&lt;br/&gt;
&lt;br/&gt;
assigning to jukka since felix is on vacation.</comment>
                    <comment id="12418934" author="stefan@jira" created="Mon, 3 Jul 2006 18:10:02 +0100"  >attaching test-report of failing test case</comment>
                    <comment id="12418935" author="stefan@jira" created="Mon, 3 Jul 2006 18:11:39 +0100"  >tested with svn rev 418710</comment>
                    <comment id="12418940" author="jukkaz" created="Mon, 3 Jul 2006 19:06:56 +0100"  >Stefan:&lt;br/&gt;
&amp;gt; reopening issue because of failing junit testcases: &lt;br/&gt;
&lt;br/&gt;
OK, looks pretty much like the missing namespace problem I encountered earlier. I&amp;#39;ll investigate.</comment>
                    <comment id="12418952" author="jukkaz" created="Mon, 3 Jul 2006 19:58:46 +0100"  >Unit test failures fixed in revision 418750.&lt;br/&gt;
&lt;br/&gt;
SAX events for the xmlns:prefix=&amp;quot;namespace&amp;quot; attributes are now sent explicitly, as if the &amp;quot;&lt;a href=&quot;http://xml.org/sax/features/namespace-prefixes&quot;&gt;http://xml.org/sax/features/namespace-prefixes&lt;/a&gt;&amp;quot; property had been set on a SAX parser.</comment>
                    <comment id="12443775" author="ppakulski" created="Fri, 20 Oct 2006 11:13:29 +0100"  >Jackrabbit-core is still dependent on Xerces directly during runtime, SessionImpl.importWorkspace, Workspacempl.importWorkspace methods contains folliwng lines :&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;XMLReader parser =&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;XMLReaderFactory.createXMLReader(&amp;quot;org.apache.xerces.parsers.SAXParser&amp;quot;);&lt;br/&gt;
&lt;br/&gt;
It works in maven1 probably because maven1 itself needs xerces to run test goal.&lt;br/&gt;
&lt;br/&gt;
I suggest reopening the issue.</comment>
                    <comment id="12444521" author="jukkaz" created="Tue, 24 Oct 2006 22:31:12 +0100"  >&amp;gt; I suggest reopening the issue.&lt;br/&gt;
&lt;br/&gt;
You&amp;#39;re correct. Since this issue is already closed, I opened a new issue, &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-602&quot; title=&quot;importXML still depends on Xerces&quot;&gt;&lt;strike&gt;JCR-602&lt;/strike&gt;&lt;/a&gt;, to track this.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12353896">JCR-602</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="28382">JCR-19</issuekey>
        </issuelink>
                    </outwardlinks>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12317019">JCR-217</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12336075" name="No_Xerces_Patch.fm.20060627.patch" size="43314" author="fmeschbe" created="Wed, 28 Jun 2006 22:40:16 +0100" />
                    <attachment id="12336273" name="TEST-org.apache.jackrabbit.test.api.TestAll.txt" size="94010" author="stefan@jira" created="Mon, 3 Jul 2006 18:10:02 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 22 Mar 2006 15:48:50 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142141</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191332</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>