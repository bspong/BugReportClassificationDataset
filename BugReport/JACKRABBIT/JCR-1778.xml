<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 06:00:32 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1778/JCR-1778.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1778] BindableRepositoryFactory doesn&apos;t handle repository shutdown</title>
                <link>https://issues.apache.org/jira/browse/JCR-1778</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>The BindableRepositoryFactory class keeps a cached reference to a repository even after the repository has been shut down.&lt;br/&gt;
&lt;br/&gt;
This causes the following code snippet to fail with an IllegalStateException:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Hashtable environment = new Hashtable();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;environment.put(&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Context.INITIAL_CONTEXT_FACTORY,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;DummyInitialContextFactory.class.getName());&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;environment.put(Context.PROVIDER_URL, &amp;quot;&lt;a href=&quot;http://jackrabbit.apache.org/&quot;&gt;http://jackrabbit.apache.org/&lt;/a&gt;&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Context context = new InitialContext(environment);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;JackrabbitRepository repository;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String xml = &amp;quot;src/test/repository/repository.xml&amp;quot;;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String dir = &amp;quot;target/repository&amp;quot;;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;String key = &amp;quot;repository&amp;quot;;&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Create first repository&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RegistryHelper.registerRepository(context, key, xml, dir, true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repository = (JackrabbitRepository) context.lookup(key);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repository.login().logout();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repository.shutdown();&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// Create second repository with the same configuration&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;RegistryHelper.registerRepository(context, key, xml, dir, true);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repository = (JackrabbitRepository) context.lookup(key);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repository.login().logout(); // throws an IllegalStateException!&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repository.shutdown();&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12405461">JCR-1778</key>
            <summary>BindableRepositoryFactory doesn&apos;t handle repository shutdown</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="jukkaz">Jukka Zitting</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Sep 2008 14:20:13 +0100</created>
                <updated>Tue, 27 Apr 2010 09:23:03 +0100</updated>
                    <resolved>Tue, 13 Apr 2010 17:09:19 +0100</resolved>
                            <version>core 1.4.6</version>
                <version>core 1.4.8</version>
                <version>core 1.4.7</version>
                <version>core 1.4.9</version>
                <version>core 1.4.10</version>
                <version>core 1.4.11</version>
                <version>1.5</version>
                <version>1.5.2</version>
                <version>1.5.3</version>
                <version>1.5.4</version>
                <version>1.5.5</version>
                <version>1.5.6</version>
                <version>1.5.7</version>
                <version>1.6</version>
                <version>1.6.1</version>
                <version>2.0-alpha1</version>
                <version>2.0-alpha3</version>
                <version>2.0-alpha4</version>
                <version>2.0-alpha7</version>
                <version>2.0-alpha8</version>
                <version>2.0-alpha9</version>
                <version>2.0-alpha11</version>
                <version>2.0-beta1</version>
                <version>2.0-beta3</version>
                <version>2.0-beta4</version>
                <version>2.0-beta5</version>
                <version>2.0-beta6</version>
                <version>2.0</version>
                <version>2.1</version>
                                <fixVersion>2.1</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12660836" author="gjoseph" created="Mon, 5 Jan 2009 18:05:50 +0000"  >Same goes if you replace {{repository.shutdown()}} by a call to {{RegistryHelper.unregisterRepository}} which is even more worrying. The issue seems to be due to the static cache of BindableRepositoryFactory.&lt;br/&gt;
I can reproduce this with 1.4.6 and 1.5.0, not with 1.4.5</comment>
                    <comment id="12663117" author="gjoseph" created="Mon, 12 Jan 2009 22:07:53 +0000"  >Seems to me as this is (if only by accident) related to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1823&quot; title=&quot;Repository.login throws IllegalStateException&quot;&gt;&lt;strike&gt;JCR-1823&lt;/strike&gt;&lt;/a&gt;</comment>
                    <comment id="12663276" author="jukkaz" created="Tue, 13 Jan 2009 09:31:21 +0000"  >&amp;gt; Seems to me as this is (if only by accident) related to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1823&quot; title=&quot;Repository.login throws IllegalStateException&quot;&gt;&lt;strike&gt;JCR-1823&lt;/strike&gt;&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
Yes, now the test case throws a RepositoryException instead of an IllegalStateException. This is still incorrect.</comment>
                    <comment id="12802766" author="rlink77de" created="Wed, 20 Jan 2010 09:36:02 +0000"  >Patch  do prevent invalid repository object to remain in the BindableRepositoryFactory&amp;#39;s cache</comment>
                    <comment id="12856462" author="jukkaz" created="Tue, 13 Apr 2010 17:09:19 +0100"  >Thanks for the patch! I committed a slightly modified version to Jackrabbit trunk in revision 933694 and merged the change to the 2.1 branch in revision 933697.</comment>
                </comments>
                    <attachments>
                    <attachment id="12430865" name="BindableRepositoryFactory.java.patch" size="4693" author="rlink77de" created="Wed, 20 Jan 2010 09:36:55 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 5 Jan 2009 18:05:50 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78428</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>252623</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>