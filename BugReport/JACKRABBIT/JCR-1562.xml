<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:51:08 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1562/JCR-1562.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1562] JNDI data sources with various PersistenceManager: wrong default values</title>
                <link>https://issues.apache.org/jira/browse/JCR-1562</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>With &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-1305&quot; title=&quot;JNDI data sources with BundleDbPersistenceManager: UnsupportedOperationException&quot;&gt;&lt;strike&gt;JCR-1305&lt;/strike&gt;&lt;/a&gt; Jackrabbit supports creating a connection throug a JNDI Datasource and without configuring user and password. This works for some but not all provided PersistenceManagers. Some of them - like the Oracle-specific BundleDBPersistenceManager - sets default values for user and password if none are provided in the jackrabbit config. This way its impossible to use such PersistenceManagers with the plain JNDI DS.&lt;br/&gt;
&lt;br/&gt;
This concerns the following BundleDbPersistenceManagers: OraclePersistenceManager, DerbyPersistenceManager, H2PersistenceManager.&lt;br/&gt;
&lt;br/&gt;
There also might be other PMs (perhaps some special SimpleDbPersistenceManagers) with similar behaviour.</description>
                <environment></environment>
            <key id="12395038">JCR-1562</key>
            <summary>JNDI data sources with various PersistenceManager: wrong default values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="srieckhoff">Sven Rieckhoff</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Apr 2008 07:19:03 +0100</created>
                <updated>Thu, 12 Jun 2008 20:36:58 +0100</updated>
                    <resolved>Thu, 8 May 2008 14:14:09 +0100</resolved>
                            <version>core 1.4.2</version>
                <version>core 1.4.3</version>
                <version>core 1.4.4</version>
                                <fixVersion>core 1.4.5</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12593266" author="tmueller" created="Wed, 30 Apr 2008 09:48:29 +0100"  >I agree, the default value for user name and password should be null (or an empty string if the database doesn&amp;#39;t support that).</comment>
                    <comment id="12593268" author="tmueller" created="Wed, 30 Apr 2008 09:52:05 +0100"  >By the way, Derby seems to simply ignored user name and password. Funny ;-)</comment>
                    <comment id="12593270" author="tmueller" created="Wed, 30 Apr 2008 09:55:34 +0100"  >We need to think about backward compatibility. Do we just document this change (simpler)? Or do we use empty passwords only when using JNDI (good for compatibility)?</comment>
                    <comment id="12594228" author="tmueller" created="Mon, 5 May 2008 13:50:14 +0100"  >This patch removes the default user name and password for Oracle, H2, and Derby.&lt;br/&gt;
&lt;br/&gt;
This will always work in Derby as Derby doesn&amp;#39;t check user names and passwords by default.&lt;br/&gt;
&lt;br/&gt;
For Oracle and H2 the problem is backward compatibility: if user name and password was not configured in previous installations, the old default values (sa for H2, crx for Oracle) were used. For Oracle, a user name and password is required in any case. I think this is a problem, but the best way to solve it is (in my view) to document this change in the release notes.&lt;br/&gt;
&lt;br/&gt;
If nobody objects, I will commit this change in a few days.</comment>
                    <comment id="12594487" author="jukkaz" created="Tue, 6 May 2008 07:32:41 +0100"  >+1 to dropping the defaults and documenting the change</comment>
                    <comment id="12594507" author="fgiust" created="Tue, 6 May 2008 08:52:14 +0100"  >I noticed that also the schema gets default values, for example in oracle:&lt;br/&gt;
&lt;br/&gt;
if (getSchema() == null) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;setSchema(&amp;quot;oracle&amp;quot;);&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
shouldn&amp;#39;t that be removed too?&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12594509" author="tmueller" created="Tue, 6 May 2008 09:05:04 +0100"  >&amp;gt; if (getSchema() == null) {&lt;br/&gt;
&amp;gt; setSchema(&amp;quot;oracle&amp;quot;);&lt;br/&gt;
&amp;gt; }&lt;br/&gt;
&amp;gt; shouldn&amp;#39;t that be removed too?&lt;br/&gt;
&lt;br/&gt;
No. The term &amp;#39;schema&amp;#39; is a bit misleading: here the schema property controls what .ddl file to use to create the tables. For Oracle, the file src/main/resources/org/apache/jackrabbit/core/persistence/bundle/oracle.ddl file is used. It doesn&amp;#39;t have to do with the database schema.&lt;br/&gt;
&lt;br/&gt;
See also &lt;a href=&quot;http://issues.apache.org/jira/browse/JCR-1180&quot;&gt;http://issues.apache.org/jira/browse/JCR-1180&lt;/a&gt;</comment>
                    <comment id="12594703" author="naresh" created="Tue, 6 May 2008 21:54:49 +0100"  >Hi, I am new to using &amp;#39;jackrabbit&amp;#39; but hit the same issue while trying to configure OraclePersistenceManager.&lt;br/&gt;
Can you please advise  an alternative on this or shall we wait for the next release, if any planned as we don&amp;#39;t have db user id and password in production and datasource is the only way to configure PMs .&lt;br/&gt;
&lt;br/&gt;
Thanks</comment>
                    <comment id="12594862" author="gjoseph" created="Wed, 7 May 2008 12:44:17 +0100"  >&amp;gt; For Oracle, a user name and password is required in any case.&lt;br/&gt;
But it&amp;#39;s provided by the datasource, so it shouldn&amp;#39;t be mandatory (or have a default value) at the PM&amp;#39;s configuration level, right ?</comment>
                    <comment id="12595221" author="tmueller" created="Thu, 8 May 2008 14:00:05 +0100"  >&amp;gt; Can you please advise an alternative&lt;br/&gt;
You could patch the classes yourself as long as there is no new version available. Otherwise I don&amp;#39;t have an alternative I am afraid.&lt;br/&gt;
&lt;br/&gt;
&amp;gt; &amp;gt; For Oracle, a user name and password is required in any case.&lt;br/&gt;
&amp;gt; But it&amp;#39;s provided by the datasource, &lt;br/&gt;
&amp;gt; so it shouldn&amp;#39;t be mandatory (or have a default value) at the PM&amp;#39;s configuration level, right ?&lt;br/&gt;
&lt;br/&gt;
Yes. The Oracle JDBC driver requires user name and password. If that&amp;#39;s configured in the data source then that&amp;#39;s OK.&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12595224" author="tmueller" created="Thu, 8 May 2008 14:10:24 +0100"  >Fixed in revision 654514</comment>
                    <comment id="12595524" author="gjoseph" created="Fri, 9 May 2008 10:55:41 +0100"  >Thomas: could you let us know if this will be included in 1.4.3, 1.4.4, ... or even possibly the 1.3 branch ? Thanks.</comment>
                    <comment id="12595528" author="jukkaz" created="Fri, 9 May 2008 11:01:04 +0100"  >If there&amp;#39;s enough demand for a 1.3.x or 1.4.x patch release with this and/or other fixes, then we can certainly do that. Please follow up on dev@ about what you&amp;#39;d like to see released.</comment>
                    <comment id="12601069" author="jukkaz" created="Fri, 30 May 2008 11:20:26 +0100"  >Merged to the 1.4 branch in revision 654514.</comment>
                </comments>
                    <attachments>
                    <attachment id="12381421" name="bundleDbNoDefaultUserPassword.txt" size="5415" author="tmueller" created="Mon, 5 May 2008 13:50:14 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 30 Apr 2008 08:48:29 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78506</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190169</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>