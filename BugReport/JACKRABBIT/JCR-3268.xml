<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:41:41 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-3268/JCR-3268.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-3268] Re-index fails on corrupt bundle</title>
                <link>https://issues.apache.org/jira/browse/JCR-3268</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>The re-indexing process should be more resilient, log an error and simply continue with the next node. It doesn&amp;#39;t seem useful to refuse repository startup in this case.</description>
                <environment></environment>
            <key id="12547576">JCR-3268</key>
            <summary>Re-index fails on corrupt bundle</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="alex.parvulescu">Alex Parvulescu</assignee>
                                <reporter username="alex.parvulescu">Alex Parvulescu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Mar 2012 11:08:53 +0000</created>
                <updated>Sun, 27 May 2012 10:48:55 +0100</updated>
                    <resolved>Fri, 23 Mar 2012 13:00:04 +0000</resolved>
                                            <fixVersion>2.4.1</fixVersion>
                <fixVersion>2.5</fixVersion>
                                <component>indexing</component>
                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13235504" author="alex.parvulescu" created="Thu, 22 Mar 2012 11:15:57 +0000"  >In the case of a corrupt bundle the ItemStateManager#getItemState can throw an ItemStateException that stops the repository from starting.&lt;br/&gt;
&lt;br/&gt;
My proposal is to have MultiIndex.createInitialIndex catch the ItemStateException and have it logged via the OnWorkspaceInconsistency handler.&lt;br/&gt;
The error wouldn&amp;#39;t be a blocker anymore and if anybody is looking at the workspace consystency logs will see its message as well.&lt;br/&gt;
&lt;br/&gt;
The simplest way to do this is to wrap log.error into a public method OnWorkspaceInconsistency#logError and use it from the MultiIndex.</comment>
                    <comment id="13235507" author="c_koell" created="Thu, 22 Mar 2012 11:24:53 +0000"  >Is this not be handled with &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2651&quot; title=&quot;Add a OnWorkspaceInconsistency with logging only&quot;&gt;&lt;strike&gt;JCR-2651&lt;/strike&gt;&lt;/a&gt;&lt;br/&gt;
greets</comment>
                    <comment id="13235511" author="alex.parvulescu" created="Thu, 22 Mar 2012 11:33:41 +0000"  >Hi Claus, I don&amp;#39;t understand what you are saying :)&lt;br/&gt;
Is that a question or a suggestion?&lt;br/&gt;
&lt;br/&gt;
It is not currently handled by &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2651&quot; title=&quot;Add a OnWorkspaceInconsistency with logging only&quot;&gt;&lt;strike&gt;JCR-2651&lt;/strike&gt;&lt;/a&gt; because it addresses only NoSuchItemStateException. &lt;br/&gt;
In this issue I&amp;#39;m dealing with is an ItemStateException generated by a corrupt bundle.</comment>
                    <comment id="13235528" author="c_koell" created="Thu, 22 Mar 2012 12:11:06 +0000"  >ahh sorry for my typo .. &lt;br/&gt;
ok i see you are handling with ItemStateException... so i think it will be good as you have proposed to catch it and handle it with OnWorkspaceInconsistency#logError</comment>
                    <comment id="13235572" author="mreutegg" created="Thu, 22 Mar 2012 13:30:32 +0000"  >&amp;gt; wrap log.error into a public method OnWorkspaceInconsistency#logError&lt;br/&gt;
&lt;br/&gt;
sounds good to me.</comment>
                    <comment id="13236558" author="alex.parvulescu" created="Fri, 23 Mar 2012 13:00:04 +0000"  >fixed in revision 1304323.</comment>
                    <comment id="13236751" author="alex.parvulescu" created="Fri, 23 Mar 2012 16:32:36 +0000"  >backported to 2.4 in revision 1304466.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 22 Mar 2012 11:24:53 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>232675</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>252499</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>