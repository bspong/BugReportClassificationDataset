<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:30:37 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1967/JCR-1967.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1967] Impossible comparison in NodeTypeImpl</title>
                <link>https://issues.apache.org/jira/browse/JCR-1967</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>org.apache.jackrabbit.jcr2spi.nodetype.NodeTypeImpl does&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public boolean isNodeType(Name nodeTypeName) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return getName().equals(nodeTypeName) ||  ent.includesNodeType(nodeTypeName);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
as getName() is a string and nodeTypeName is a Name this will always be false. Perhaps you meant&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public boolean isNodeType(Name nodeTypeName) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;return getName().equals(nodeTypeName.getLocalName()) ||  ent.includesNodeType(nodeTypeName);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12414073">JCR-1967</key>
            <summary>Impossible comparison in NodeTypeImpl</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mduerig">Michael D&#252;rig</assignee>
                                <reporter username="dbrosius@apache.org">Dave Brosius</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Feb 2009 04:59:19 +0000</created>
                <updated>Wed, 29 Apr 2009 08:50:31 +0100</updated>
                    <resolved>Mon, 20 Apr 2009 17:42:27 +0100</resolved>
                            <version>1.5</version>
                                <fixVersion>1.5.5</fixVersion>
                                <component>jackrabbit-jcr2spi</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12670786" author="mreutegg" created="Thu, 5 Feb 2009 15:16:40 +0000"  >I think it should rather be:&lt;br/&gt;
&lt;br/&gt;
Index: src/main/java/org/apache/jackrabbit/jcr2spi/nodetype/NodeTypeImpl.java&lt;br/&gt;
===================================================================&lt;br/&gt;
--- src/main/java/org/apache/jackrabbit/jcr2spi/nodetype/NodeTypeImpl.java	(revision 741110)&lt;br/&gt;
+++ src/main/java/org/apache/jackrabbit/jcr2spi/nodetype/NodeTypeImpl.java	(working copy)&lt;br/&gt;
@@ -132,7 +132,7 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;* from the specified node type, otherwise false.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public boolean isNodeType(Name nodeTypeName) {&lt;br/&gt;
-        return getName().equals(nodeTypeName) ||  ent.includesNodeType(nodeTypeName);&lt;br/&gt;
+        return nodeTypeName.equals(ntd.getName()) ||  ent.includesNodeType(nodeTypeName);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/**&lt;br/&gt;
&lt;br/&gt;
note, that I reversed the equals because ntd.getName() may return null.</comment>
                    <comment id="12671063" author="anchela" created="Fri, 6 Feb 2009 09:08:35 +0000"  >the problem was never appearing because of the ||... therefore i would say that we should get rid of the initial equality comparison altogether:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;public boolean isNodeType(Name nodeTypeName) {&lt;br/&gt;
- return getName().equals(nodeTypeName) || ent.includesNodeType(nodeTypeName);&lt;br/&gt;
+ return ent.includesNodeType(nodeTypeName);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;} </comment>
                    <comment id="12671071" author="mreutegg" created="Fri, 6 Feb 2009 09:26:09 +0000"  >I think you are right. The first check doesn&amp;#39;t buy us too much, I guess. And it simplifies the code.</comment>
                    <comment id="12671874" author="stefan@jira" created="Mon, 9 Feb 2009 14:37:03 +0000"  >FWIW: &lt;br/&gt;
&lt;br/&gt;
i guess the code in question is based on the node type implementation in core.&lt;br/&gt;
&lt;br/&gt;
i remember that i added the redundant call to name.equalsI() as an optimization.&lt;br/&gt;
some extensive profiling sessions (a long time ago) showed that &lt;br/&gt;
EffectiveNodeType#includesNodeType() is somewhat expensive as it creates a &lt;br/&gt;
number of objetcs, thus keeping the gc busy.  </comment>
                    <comment id="12672205" author="anchela" created="Tue, 10 Feb 2009 08:47:57 +0000"  >both in core and in jcr2spi EffectiveNodeType#includesNodeType() just does a lookup in a set. i don&amp;#39;t see any object creation there.</comment>
                    <comment id="12672251" author="stefan@jira" created="Tue, 10 Feb 2009 12:38:37 +0000"  >&amp;gt; both in core and in jcr2spi EffectiveNodeType#includesNodeType() just does a lookup in a set. i don&amp;#39;t see any object creation there.&lt;br/&gt;
&lt;br/&gt;
you&amp;#39;re right. so the optimization is obsolete anyway.&lt;br/&gt;
&lt;br/&gt;
i believe it used to check EffectiveNodeTypeCache at some point,  creating WeightedKey objects. </comment>
                    <comment id="12672636" author="jukkaz" created="Wed, 11 Feb 2009 13:58:33 +0000"  >Classifying this as an improvement, since even though the code wasn&amp;#39;t correct, AFAUI it didn&amp;#39;t cause anything to break.</comment>
                    <comment id="12672973" author="anchela" created="Thu, 12 Feb 2009 13:49:01 +0000"  >&amp;gt; Classifying this as an improvement&lt;br/&gt;
&lt;br/&gt;
agreed... i was already tempted to make that change :)</comment>
                    <comment id="12700840" author="mduerig" created="Mon, 20 Apr 2009 17:38:02 +0100"  >Reopening for 1.5.0</comment>
                    <comment id="12700843" author="mduerig" created="Mon, 20 Apr 2009 17:42:27 +0100"  >Fixed at revision 766747  </comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 5 Feb 2009 15:16:40 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142944</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279985</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>