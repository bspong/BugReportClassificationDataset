<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:33:45 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-3027/JCR-3027.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-3027] JCR Server has concurrency issues on JcrWebdavServer.SessionCache internal HashMap caches</title>
                <link>https://issues.apache.org/jira/browse/JCR-3027</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>After doing the davex remoting performance work outlined in &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-3026&quot; title=&quot;davex remoting has  a performance bottleneck due limit of 2 http connections&quot;&gt;&lt;strike&gt;JCR-3026&lt;/strike&gt;&lt;/a&gt;, the increased concurrency on my jcr server exposed a lot of errors related to getting and putting from the JcrWebdavServer.SessionCache&amp;#39;s internal HashMap&amp;#39;s.  This problem with HashMap&amp;#39;s is a well known concurrency error and was easily fixed by upgrading these maps to ConcurrentHashMaps.  Performance seems dramatically better.  &lt;br/&gt;
&lt;br/&gt;
The fix includes exposure of a tuning parameter that allows the user to set the expected concurrency level.  This is the number of concurrent requests you expect the server to be handling.  In the typical davex remoting scenario, this means you should tune this server side value to match the total max connections of all clients pointed at the server.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-3026&quot; title=&quot;davex remoting has  a performance bottleneck due limit of 2 http connections&quot;&gt;&lt;strike&gt;JCR-3026&lt;/strike&gt;&lt;/a&gt;. &lt;br/&gt;
&lt;br/&gt;
USAGE:  Set the &amp;#39;concurrency-level&amp;#39; init param for the JcrRemotingServlet, via the web.xml of the jackabbit-webapp component.  Default value is 50.  Or you can intervene in a lower level api if appropriate.</description>
                <environment></environment>
            <key id="12514720">JCR-3027</key>
            <summary>JCR Server has concurrency issues on JcrWebdavServer.SessionCache internal HashMap caches</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="anchela">angela</assignee>
                                <reporter username="chadmichael">chad davis</reporter>
                        <labels>
                        <label>dav</label>
                        <label>davex</label>
                        <label>performance</label>
                        <label>remote</label>
                    </labels>
                <created>Tue, 19 Jul 2011 23:34:54 +0100</created>
                <updated>Tue, 8 Nov 2011 15:56:01 +0000</updated>
                    <resolved>Wed, 27 Jul 2011 10:32:10 +0100</resolved>
                            <version>2.2.5</version>
                                <fixVersion>2.3</fixVersion>
                                <component>jackrabbit-jcr-server</component>
                <component>jackrabbit-webapp</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13068029" author="chadmichael" created="Tue, 19 Jul 2011 23:36:16 +0100"  >My fixes were done on 2.2.5.  In the next couple of days I&amp;#39;ll port my work to the trunk and attach the patches to this ticket. </comment>
                    <comment id="13069219" author="chadmichael" created="Thu, 21 Jul 2011 22:24:02 +0100"  >These patches are against the trunk, but they apply equally well against 2.2.5.  </comment>
                    <comment id="13069421" author="anchela" created="Fri, 22 Jul 2011 08:15:35 +0100"  >hi chad&lt;br/&gt;
thanks a lot for the patches. i will take a look and apply them as soon as possible.</comment>
                    <comment id="13071622" author="anchela" created="Wed, 27 Jul 2011 10:32:10 +0100"  >applied slightly modified patch.&lt;br/&gt;
&lt;br/&gt;
running the tests i noticed however the following warning:&lt;br/&gt;
&lt;br/&gt;
10:30:57.694 WARN  [&lt;a href=&apos;mailto:14745440@qtp-1360221-0&apos;&gt;14745440@qtp-1360221-0&lt;/a&gt;] SessionState.java:236 Attempt to close session-admin-45364 while another thread is concurrently accessing this session. Blocking until the other thread is finished using this session. Please review your code to avoid concurrent use of a session.&lt;br/&gt;
&lt;br/&gt;
i will open a new issue for that.</comment>
                </comments>
                    <attachments>
                    <attachment id="12487359" name="JCR-3027_JCRWebdavServer.java.patch" size="3908" author="chadmichael" created="Thu, 21 Jul 2011 22:22:49 +0100" />
                    <attachment id="12487361" name="JCR-3027_JCRWebdavServerServlet.java.patch" size="1528" author="chadmichael" created="Thu, 21 Jul 2011 22:23:01 +0100" />
                    <attachment id="12487362" name="JCR-3027_web.xml.patch" size="816" author="chadmichael" created="Thu, 21 Jul 2011 22:23:11 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 22 Jul 2011 07:15:35 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>66804</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>231745</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>