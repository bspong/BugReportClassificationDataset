<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:50:26 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-605/JCR-605.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-605] Error when registering node types on virgin repository</title>
                <link>https://issues.apache.org/jira/browse/JCR-605</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>When a node type is registered on a repository that has never been started before an error is written to the log:&lt;br/&gt;
&lt;br/&gt;
26.10.2006 10:36:02 *ERROR* [main] VirtualNodeTypeStateManager: Unable to index new nodetype: javax.jcr.ItemNotFoundException (VirtualNodeTypeStateManager.java, line 159)&lt;br/&gt;
&lt;br/&gt;
Steps to reproduce:&lt;br/&gt;
&lt;br/&gt;
&amp;gt; maven test:clean&lt;br/&gt;
&amp;gt; cp applications/test/repository/namespaces/ns_re.properties.install applications/test/repository/namespaces/ns_re.properties&lt;br/&gt;
&amp;gt; cp applications/test/repository/nodetypes/custom_nodetypes.xml.install applications/test/repository/nodetypes/custom_nodetypes.xml&lt;br/&gt;
&lt;br/&gt;
Run test case o.a.j.init.NodeTypeData&lt;br/&gt;
&lt;br/&gt;
It seems that the workspace initialization creates node states for jcr:system and a child node jcr:nodeTypes. The latter however is overlayed by a virtual node state provided by the VirtualNodeTypeStateProvider.&lt;br/&gt;
&lt;br/&gt;
In case of an initial startup, the jcr:nodeTypes node is cached on creation and is not overlayed by the virtual twin from the VirtualNodeTypeStateProvider.&lt;br/&gt;
&lt;br/&gt;
IMO the jcr:nodeTypes node state shouldn&amp;#39;t have been created in the first place because it is overlayed anyway. The workspace initialization routine should only create a child node entry in the jcr:system node state but no actual child node state for that entry.&lt;br/&gt;
&lt;br/&gt;
Opinions?</description>
                <environment>svn 467288</environment>
            <key id="12354023">JCR-605</key>
            <summary>Error when registering node types on virgin repository</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mreutegg">Marcel Reutegger</assignee>
                                <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Oct 2006 10:33:12 +0100</created>
                <updated>Tue, 12 Dec 2006 13:03:48 +0000</updated>
                    <resolved>Tue, 31 Oct 2006 13:51:50 +0000</resolved>
                            <version>1.1</version>
                                <fixVersion>1.1.1</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12445555" author="mreutegg" created="Mon, 30 Oct 2006 11:28:25 +0000"  >Fixed as proposed in svn revision: 469123</comment>
                    <comment id="12445892" author="mreutegg" created="Tue, 31 Oct 2006 13:36:56 +0000"  >The fix still tries to store the jcr:system node state in the regular workspace persistence manager.</comment>
                    <comment id="12445894" author="mreutegg" created="Tue, 31 Oct 2006 13:51:50 +0000"  >The jcr:system node is now created within the same method as the root node of the workspace: SharedItemStateManager.createRootNodeState().&lt;br/&gt;
&lt;br/&gt;
In contrast to the previous initialization in RepositoryImpl.initWorkspace() the jcr:system node is created with just the two child node entries (one for jcr:versionStorage and one for jcr:nodeTypes), but the two child node state are not acutally created there because both are virtual states and already exist.&lt;br/&gt;
&lt;br/&gt;
Fixed in revision: 469480&lt;br/&gt;
</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310000">
                <name>Duplicate</name>
                                                <inwardlinks description="is duplicated by">
                            <issuelink>
            <issuekey id="12354148">JCR-608</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>80479</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>252850</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>