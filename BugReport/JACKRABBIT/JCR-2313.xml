<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:48:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2313/JCR-2313.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2313] Improvements to user management (2)</title>
                <link>https://issues.apache.org/jira/browse/JCR-2313</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>follow up issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2199&quot; title=&quot;Improvements to user management&quot;&gt;&lt;strike&gt;JCR-2199&lt;/strike&gt;&lt;/a&gt; is already closed.</description>
                <environment></environment>
            <key id="12436060">JCR-2313</key>
            <summary>Improvements to user management (2)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="anchela">angela</assignee>
                                <reporter username="anchela">angela</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Sep 2009 14:12:27 +0100</created>
                <updated>Mon, 11 Jan 2010 14:16:23 +0000</updated>
                    <resolved>Tue, 17 Nov 2009 09:48:14 +0000</resolved>
                            <version>2.0-alpha7</version>
                <version>2.0-alpha8</version>
                <version>2.0-alpha9</version>
                                <fixVersion>2.0-beta3</fixVersion>
                                <component>jackrabbit-api</component>
                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12757155" author="jukkaz" created="Fri, 18 Sep 2009 14:19:09 +0100"  >As discussed, marking this as a blocker for Jackrabbit 2.0.</comment>
                    <comment id="12759113" author="anchela" created="Thu, 24 Sep 2009 14:14:00 +0100"  >Changes to the API&lt;br/&gt;
---------------------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
- Referees -&amp;gt; removed. this includes&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Authorizable#getPrincipals()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Authorizable#addReferee(Principal)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Authorizable#removeReferee(Principal)&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;comment:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;Nobody i asked had strong arguments for the referees&lt;br/&gt;
&amp;nbsp;&amp;nbsp;and i found myself struggling with the concept that has been part&lt;br/&gt;
&amp;nbsp;&amp;nbsp;of the very initial patch.&lt;br/&gt;
&lt;br/&gt;
- Ability to have User API changes transient. Therefore added&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;UserManager#isAutoSave()&lt;br/&gt;
&amp;nbsp;&amp;nbsp;UserManager#autoSave(boolean enable)&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;comment:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;JCR generally defines all changes made on a Session level to&lt;br/&gt;
&amp;nbsp;&amp;nbsp;be transient that require an extra save. User management however&lt;br/&gt;
&amp;nbsp;&amp;nbsp;take some intermediate position as it isn&amp;#39;t operating on &amp;#39;path&amp;#39;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;or &amp;#39;items&amp;#39; and there is no requirement that changes made are&lt;br/&gt;
&amp;nbsp;&amp;nbsp;effective on the original Session.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;in order to have the ability make user API changes transient&lt;br/&gt;
&amp;nbsp;&amp;nbsp;i decided to add the 2 methods above.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Changes to the Implementation&lt;br/&gt;
---------------------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
- AuthorizableImpl#setProperty&lt;br/&gt;
&amp;nbsp;&amp;nbsp;does not fail if single valued property gets replaced&lt;br/&gt;
&amp;nbsp;&amp;nbsp;by multivalued property and vice versa.&lt;br/&gt;
- AuthorizableImpl overriding Object#hashCode, #equals and #toString&lt;br/&gt;
&lt;br/&gt;
- UserManagerImpl: make userPath and groupPath configurable.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;see also UserManagerImpl#PARAM_USERS_PATH and #PARAM_GROUPS_PATH.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;comment:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;If the config option is missing the originally hardcoded values&lt;br/&gt;
&amp;nbsp;&amp;nbsp;are used as default (-&amp;gt; UserConstants)&lt;br/&gt;
&lt;br/&gt;
- UserManagerImpl: only returns authorizables from nodes that have&lt;br/&gt;
&amp;nbsp;&amp;nbsp;the expected node type AND reside under the corresponding root&lt;br/&gt;
&amp;nbsp;&amp;nbsp;node (see configurable root paths above).&lt;br/&gt;
&lt;br/&gt;
- UserManagementImpl#isAutoSave and #autoSave(boolean)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;is disabled in the default implementation as this one may&lt;br/&gt;
&amp;nbsp;&amp;nbsp;be used with users stored i a dedicated system workspace.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;in this case the editing session is not the one the user manager&lt;br/&gt;
&amp;nbsp;&amp;nbsp;was obtained from (-&amp;gt; session.save not working).&lt;br/&gt;
&lt;br/&gt;
- UserManagerImpl: No creation of nested user/groups.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;In contrast to 1.5 nested groups/users are not supported any more.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;See also changes to the node type definitions.&lt;br/&gt;
&lt;br/&gt;
- UserID/GroupID used for jcr:uuid&lt;br/&gt;
&amp;nbsp;&amp;nbsp;The jcr:uuid of user/group nodes is calculated from the lowercased ID instead&lt;br/&gt;
&amp;nbsp;&amp;nbsp;of having it generated randomly&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; simplify getAuthorizable(String id) to a Session.getNodeByNodeId&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; structure of user/group nodes must no longer be predefined&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; no need to ignore intermediatePath parameter&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; this also remove some limitations of the built-in, config driven&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;node structure&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; rep:userId is not needed any more as the humand readable form&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;can as well be retrieved from the node name.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; login is case insensitive&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; creating multiple users/groups whose id only differ in terms of case &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;will not be possible any more&lt;br/&gt;
&lt;br/&gt;
- Group membership moved back to GroupImpl &lt;br/&gt;
&amp;nbsp;&amp;nbsp;based on discussion along with the new user-per-workspace&lt;br/&gt;
&amp;nbsp;&amp;nbsp;model (see below) we were once again debating the ac&lt;br/&gt;
&amp;nbsp;&amp;nbsp;constraints vs. performance (frequency of access) and&lt;br/&gt;
&amp;nbsp;&amp;nbsp;decided to move the group membership infomation back to&lt;br/&gt;
&amp;nbsp;&amp;nbsp;the GroupImpl as it was in JR 1.5.&lt;br/&gt;
&lt;br/&gt;
- Allow subclasses of GroupImpl for custom implementations&lt;br/&gt;
&amp;nbsp;&amp;nbsp;for consistency with the extensions made by dominique for&lt;br/&gt;
&amp;nbsp;&amp;nbsp;UserImpl (rev.792467)&lt;br/&gt;
&lt;br/&gt;
- Configuration of UserManager as part of the SecurityManager config. &lt;br/&gt;
&amp;nbsp;&amp;nbsp;improved, added UserManagerConfig&lt;br/&gt;
&lt;br/&gt;
- Added isSystemUserManager to the UserManager implementation.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;UserManager instances having this flag turned on assert the existance of&lt;br/&gt;
&amp;nbsp;&amp;nbsp;the admin user. Conflicting nodes having the same jcr:uuid as calculated for &lt;br/&gt;
&amp;nbsp;&amp;nbsp;the admin user node, will be removed.&lt;br/&gt;
&lt;br/&gt;
- JackrabbitSecurityManager#getAuthContext was changed to&lt;br/&gt;
&amp;nbsp;&amp;nbsp;take an additional param workspaceName&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-&amp;gt; see user-per-workspace below&lt;br/&gt;
&lt;br/&gt;
- JackrabbitSecurityManager#getUserID was changed to take&lt;br/&gt;
&amp;nbsp;&amp;nbsp;an additional workspaceName parameter.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;-&amp;gt; see user-per-workspace below&lt;br/&gt;
&lt;br/&gt;
- Additional tests in various areas. among other:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; intermediate path containing parent elements&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; recreation of users (reuse of id)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; property type of membership&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; collision of user/group node with some intermediate folder&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; test transient vs. autosaving user changes&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Changes to the NodeType Definitions&lt;br/&gt;
---------------------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
- rep:AuthorizableFolder&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; no longer has protected child node definitions.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; extends from nt:hierarchyNode&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; no longer extends from mix:referenceable&lt;br/&gt;
- rep:Authorizable&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; no longer defines protected child node definitions.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; may have residual child nodes meant to be used for&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;application specific content.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; no longer defines rep:referees property&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; no longer defines rep:groups property&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; extends from nt:hierarchyNode&lt;br/&gt;
- rep:Group&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; defines rep:members property (again)&lt;br/&gt;
- rep:User&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; no longer defines mandatory rep:userID&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
New Functionality&lt;br/&gt;
---------------------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
We decided to try an alternative approach for storing user and&lt;br/&gt;
group information. Instead of having a separate, dedicated&lt;br/&gt;
workspace that stores user/groups for the whole repository,&lt;br/&gt;
there should be the ability to keep users/groups in each workspace.&lt;br/&gt;
&lt;br/&gt;
Both approaches can be used based on the SecurityManager configuration:&lt;br/&gt;
The DefaultSecurityManager stores users/groups in a separate workspace as it used to be. The new approach is obtained when using the new security manager implementation.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
Backwards Compatibility Issues&lt;br/&gt;
---------------------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
I didn&amp;#39;t yet try to run the new user management on an older version.&lt;br/&gt;
The user manager configuration provides a compatibility config&lt;br/&gt;
option that currently addresses &amp;lt; 2.0 lookup of user/groups by ID&lt;br/&gt;
but none of the recent changes that potentially cause troubles&lt;br/&gt;
(group membership and the nt:hierarchyNode are candidates from my&lt;br/&gt;
point of view).&lt;br/&gt;
</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 18 Sep 2009 13:19:09 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78264</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189738</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>