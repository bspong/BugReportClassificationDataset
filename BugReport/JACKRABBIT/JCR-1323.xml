<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:32:22 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1323/JCR-1323.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1323] When using QueryImpl.setLimit() and QueryImpl.setOffset(), then NodeIterator.getSize() reports wrong size</title>
                <link>https://issues.apache.org/jira/browse/JCR-1323</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>When using QueryImpl.setLimit() and QueryImpl.setOffset(), then NodeIterator.getSize() reports wrong size. Returned size seems to be allways the same as the limit.</description>
                <environment>Linux, Java 6</environment>
            <key id="12386522">JCR-1323</key>
            <summary>When using QueryImpl.setLimit() and QueryImpl.setOffset(), then NodeIterator.getSize() reports wrong size</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="ckiehl">Christoph Kiehl</assignee>
                                <reporter username="zdila">Martin Zdila</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Jan 2008 17:26:47 +0000</created>
                <updated>Fri, 22 Feb 2008 13:11:38 +0000</updated>
                    <resolved>Fri, 18 Jan 2008 18:42:23 +0000</resolved>
                            <version>1.4</version>
                                <fixVersion>core 1.4.1</fixVersion>
                                <component>jackrabbit-core</component>
                <component>query</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12560257" author="ckiehl" created="Fri, 18 Jan 2008 07:16:42 +0000"  >This is expected behaviour as the iterator has exactly that size. To get the total number of result entries use org.apache.jackrabbit.core.query.lucene.QueryResultImpl.getTotalSize(). Please ask on the mailing list before creating issues.</comment>
                    <comment id="12560283" author="zdila" created="Fri, 18 Jan 2008 08:13:49 +0000"  >I think you didn&amp;#39;t understand me completely. If I have 45 nodes, offset is 40 and limit is 20 (ie I am on the last page), then NodeIterator.getSize() should report 5 and not 20. &lt;br/&gt;
&lt;br/&gt;
final Query query = session.getWorkspace().getQueryManager().createQuery(queryString, Query.XPATH);&lt;br/&gt;
((QueryImpl) query).setLimit(limit);&lt;br/&gt;
((QueryImpl) query).setOffset(offset);&lt;br/&gt;
NodeIterator ni = queryResult.getNodes();&lt;br/&gt;
&lt;br/&gt;
System.out.println(ni.getSize()); // will print 20 and not 5 as expected&lt;br/&gt;
&lt;br/&gt;
int i;&lt;br/&gt;
for (i = 0; ni.hasNext(); i++) {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;ni.nextNode();&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
System.out.println(i); // will print 5&lt;br/&gt;
&lt;br/&gt;
Now I must use workaround:&lt;br/&gt;
final long totalSize = ((QueryResultImpl) queryResult).getTotalSize();&lt;br/&gt;
final long size = Math.min(ni.getSize(), totalSize - offset);&lt;br/&gt;
&lt;br/&gt;
If I am wrong again, then I apologize in advance :-)</comment>
                    <comment id="12560497" author="ckiehl" created="Fri, 18 Jan 2008 18:42:23 +0000"  >Thanks a lot for clarifying! Fixed in rev. 613221</comment>
                    <comment id="12565678" author="jukkaz" created="Tue, 5 Feb 2008 09:48:08 +0000"  >Merged to the 1.4 branch in revision 618589.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 18 Jan 2008 07:16:42 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78600</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>252706</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>