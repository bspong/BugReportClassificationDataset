<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:57:07 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-697/JCR-697.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-697] .war distribution should be configurable, prompting you to setup JNDI with the Repository Home and Config locations.</title>
                <link>https://issues.apache.org/jira/browse/JCR-697</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>The Embedded Deployment Model documentation (&lt;a href=&quot;http://jackrabbit.apache.org/doc/deploy/howto-model1.html&quot;&gt;http://jackrabbit.apache.org/doc/deploy/howto-model1.html&lt;/a&gt;) on the jackrabbit page describes how to package up a .war file so that you can use JNDI Resource settings to change the location of the repository home and the repository configuration xml file.&lt;br/&gt;
&lt;br/&gt;
Unfortunately, the .war file that is provided as part of the Jackrabbit distribution doesn&amp;#39;t behave like this. Instead, it has an inbuilt repository.xml file and settings in web.xml that act as defaults. These defaults are not useful and force a user to act like a developer and modify the files within the .war file.&lt;br/&gt;
&lt;br/&gt;
The current situation is that we have a .war that&amp;#39;s not going to be useful to anyone without modification. The repository.xml file that is contained within the .war makes the repository home to be the Tomcat/bin/repository directory. This is not a useful default. It&amp;#39;s better to have no default setup and a clear error message that JNDI needs to be setup. It would be even better if the web application could recognise when the JNDI wasn&amp;#39;t configured and could prompt the user with an instructional webpage, describing how to setup the required JNDI settings on Tomcat, JBoss etc.&lt;br/&gt;
&lt;br/&gt;
----&lt;br/&gt;
&lt;br/&gt;
The .war distribution for Jackrabbit ignores the JNDI settings that are described in the documentation. I am using this Tomcat config.xml snippet to configure Tomcat 5.5:&lt;br/&gt;
&lt;br/&gt;
{{{&lt;br/&gt;
&amp;lt;?xml version=&amp;#39;1.0&amp;#39; encoding=&amp;#39;utf-8&amp;#39;?&amp;gt;&lt;br/&gt;
&amp;lt;Context displayName=&amp;quot;Ark&amp;quot; docBase=&amp;quot;c:\dev\ark\jackrabbit-server-1.1.1.war&amp;quot; path=&amp;quot;/ark&amp;quot; &lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;useNaming=&amp;quot;false&amp;quot; workDir=&amp;quot;work\Catalina\localhost\ark&amp;quot; unpackWAR=&amp;quot;false&amp;quot;&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;lt;Resource name=&amp;quot;jcr/repository&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;auth=&amp;quot;Container&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;type=&amp;quot;javax.jcr.Repository&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;factory=&amp;quot;org.apache.jackrabbit.core.jndi.BindableRepositoryFactory&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;configFilePath=&amp;quot;c:/dev/ark/src/main/resources/repository.xml&amp;quot;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;repHomeDir=&amp;quot;c:/jackrabbitrepo&amp;quot;/&amp;gt;&lt;br/&gt;
&lt;br/&gt;
&amp;lt;/Context&amp;gt;&lt;br/&gt;
}}}&lt;br/&gt;
&lt;br/&gt;
Jackrabbit loads fine. However, the logs show:&lt;br/&gt;
&lt;br/&gt;
{{{&lt;br/&gt;
02.01.2007 10:33:00 *INFO * RepositoryStartupServlet: RepositoryStartupServlet initializing... (RepositoryStartupServlet.java, line 190)&lt;br/&gt;
02.01.2007 10:33:00 *INFO * RepositoryStartupServlet:   repository-home = C:\Program Files\Apache Software Foundation\Tomcat 5.5\bin\jackrabbit\repository (RepositoryStartupServlet.java, line 242)&lt;br/&gt;
&lt;br/&gt;
...&lt;br/&gt;
...&lt;br/&gt;
&lt;br/&gt;
02.01.2007 10:33:00 *INFO * LocalFileSystem: LocalFileSystem initialized at path C:\Program Files\Apache Software Foundation\Tomcat 5.5\bin\jackrabbit\repository\repository (LocalFileSystem.java, line 166)&lt;br/&gt;
}}}&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
----&lt;br/&gt;
&lt;br/&gt;
My use case is that I want to use Jackrabbit to host a Maven 2 repository within my company. So, ideally I want to:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* Download the Jackrabbit .war file and mount it on my Tomcat server as context &amp;quot;/maven2&amp;quot;.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* Configure Tomcat to use LDAP authentication and point it at my company&amp;#39;s LDAP server. This is a standard J2EE feature, of course.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* Create my own repository.xml file which points to my AccessManager implementation (which goes to my company&amp;#39;s SingleSignOn service for authorization). My AccessManager implementation will be placed on the Tomcat shared classpath.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;* Set the repository home directory, where all the working files will be placed and the location of the repository.xml file. Ideally, this would be done in JNDI.&lt;br/&gt;
&lt;br/&gt;
If I have to put together my own Jackrabbit .war file, I consider that I have my &amp;quot;developer&amp;quot; hat on when I only really want to have my &amp;quot;Jackrabbit user&amp;quot; hat on.&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12359780">JCR-697</key>
            <summary>.war distribution should be configurable, prompting you to setup JNDI with the Repository Home and Config locations.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="tripod">Tobias Bocanegra</assignee>
                                <reporter username="daveboden">David Boden</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jan 2007 11:39:54 +0000</created>
                <updated>Wed, 25 Apr 2007 09:45:24 +0100</updated>
                    <resolved>Fri, 12 Jan 2007 09:42:04 +0000</resolved>
                                            <fixVersion>1.3</fixVersion>
                                <component>jackrabbit-webapp</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12462201" author="tripod" created="Thu, 4 Jan 2007 12:31:23 +0000"  >i agree with david nuescheler who said:&lt;br/&gt;
&lt;br/&gt;
I could envision that a &amp;quot;blank/unconfigured/misconfigured&amp;quot; .war file&lt;br/&gt;
prompts the user initially with some configuration form to enter&lt;br/&gt;
mainly the repository-home and possibly other configuration options,&lt;br/&gt;
that are then stored for future restarts of the .war file.</comment>
                    <comment id="12462217" author="daveboden" created="Thu, 4 Jan 2007 14:08:28 +0000"  >Please note that this issue has been marked against the &amp;quot;core&amp;quot; component. There isn&amp;#39;t a &amp;quot;webapp&amp;quot; component available to assign this to. If possible, could this component be added and this issue moved over to it?</comment>
                    <comment id="12464137" author="tripod" created="Fri, 12 Jan 2007 09:42:04 +0000"  >Committed revision 495531.&lt;br/&gt;
&lt;br/&gt;
Added a very simple configuration mechanism that asks you for a repository home and lets you either create a new repository or reuse an existing one. in any case, a &amp;#39;bootstrap.properties&amp;#39; file is written to the repository home which holds all the parameters that were as &amp;#39;init-params&amp;#39; in the web.xml. thus allowing modification of those parameters without needing to modify the contents of the .war file.</comment>
                    <comment id="12464202" author="daveboden" created="Fri, 12 Jan 2007 13:59:40 +0000"  >Sounds good. However, rather than having the bootstrap.properties file, isn&amp;#39;t it just simpler to insist that the settings are in JNDI and get rid of any file-based configuration? That way, it&amp;#39;s clearly the reponsibility of the J2EE application deployer to choose the repository location and the additional repository settings. The repository owner might be someone different, and perhaps doesn&amp;#39;t want to be in charge of the Jackrabbit configuration.</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 4 Jan 2007 12:31:23 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142318</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191169</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>