<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:36:59 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1985/JCR-1985.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1985] NullPointerException in GarbageCollector.scan() if no DataStore configured</title>
                <link>https://issues.apache.org/jira/browse/JCR-1985</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>&lt;br/&gt;
I am running the garbage collector in a separate thread every 5 minutes.&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;GarbageCollector gc = ((SessionImpl)mSession).createDataStoreGarbageCollector();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;gc.scan();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;gc.stopScan();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;int du = gc.deleteUnused();&lt;br/&gt;
&lt;br/&gt;
When using Jackrabbit v1.5.2 I get sometimes a null pointer exception;&lt;br/&gt;
&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.data.GarbageCollector.scan(GarbageCollector.java:153)&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment>Windows XP</environment>
            <key id="12415049">JCR-1985</key>
            <summary>NullPointerException in GarbageCollector.scan() if no DataStore configured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="weertj">Jacco van Weert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Feb 2009 13:40:09 +0000</created>
                <updated>Thu, 13 Aug 2009 16:03:45 +0100</updated>
                    <resolved>Wed, 18 Feb 2009 15:10:41 +0000</resolved>
                            <version>1.5.2</version>
                                <fixVersion>1.6</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12674619" author="tmueller" created="Wed, 18 Feb 2009 13:50:37 +0000"  >Hi,&lt;br/&gt;
&lt;br/&gt;
Did you configure a data store? How does the repository.xml look like? Do you have any elements in the data store?&lt;br/&gt;
&lt;br/&gt;
Regards,&lt;br/&gt;
Thomas</comment>
                    <comment id="12674627" author="weertj" created="Wed, 18 Feb 2009 14:16:56 +0000"  >&lt;br/&gt;
Hello Thomas,&lt;br/&gt;
&lt;br/&gt;
I looked to the repository.xml. You are right, the repository.xml wasn&amp;#39;t configured to use the datastore.&lt;br/&gt;
&lt;br/&gt;
Is there a &amp;quot;programmatic&amp;quot; way to detect if the GarbageCollector could run?&lt;br/&gt;
&lt;br/&gt;
Greetings,&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;Jacco&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12674635" author="tmueller" created="Wed, 18 Feb 2009 14:43:31 +0000"  >&amp;gt; &amp;quot;programmatic&amp;quot; way to detect&lt;br/&gt;
&lt;br/&gt;
Yes. If this is null then there is no data store:&lt;br/&gt;
((RepositoryImpl) s.getRepository()).getDataStore()&lt;br/&gt;
&lt;br/&gt;
Anyway the exception you get is not very clear.&lt;br/&gt;
What about this throws a RepositoryException:&lt;br/&gt;
((SessionImpl)mSession).createDataStoreGarbageCollector(); &lt;br/&gt;
&amp;quot;No data store configured.&amp;quot;</comment>
                    <comment id="12674644" author="weertj" created="Wed, 18 Feb 2009 15:04:05 +0000"  >&lt;br/&gt;
&amp;gt; Anyway the exception you get is not very clear. &lt;br/&gt;
&amp;gt; What about this throws a RepositoryException: &lt;br/&gt;
&amp;gt; ((SessionImpl)mSession).createDataStoreGarbageCollector(); &lt;br/&gt;
&amp;gt; &amp;quot;No data store configured.&amp;quot;&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&lt;br/&gt;
Personally I would like that createDataStoreGarbageCollector() returns a &amp;lt;null&amp;gt; when no collector could be created, but then this is more a matter of style I guess.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12674646" author="tmueller" created="Wed, 18 Feb 2009 15:10:41 +0000"  >Committed in 745534 (trunk)&lt;br/&gt;
&lt;br/&gt;
GarbageCollector.scan() now throws a RepositoryException with the message &amp;quot;No DataStore configured.&amp;quot; instead of a NullPointerException.</comment>
                    <comment id="12674657" author="tmueller" created="Wed, 18 Feb 2009 15:34:40 +0000"  >I saw that one of the tests first calls session.createDataStoreGarbageCollector(), and then gc.getDataStore() to check if the data store is configured. Existing applications could do that as well, so it&amp;#39;s probably better not to throw an exception or return null in createDataStoreGarbageCollector().</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 18 Feb 2009 13:50:37 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78366</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>252598</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>