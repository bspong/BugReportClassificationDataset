<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 06:00:25 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1946/JCR-1946.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1946] JCAResourceAdapter must implement Serializable</title>
                <link>https://issues.apache.org/jira/browse/JCR-1946</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>We are running Weblogic 10.0 servers in cluster environment.   When deploying the rar, we always get this warning from weblogic stdout.log: &lt;br/&gt;
&lt;br/&gt;
&amp;lt;Jan 15, 2009 2:42:10 AM PST&amp;gt; &amp;lt;Warning&amp;gt; &amp;lt;Connector&amp;gt; &amp;lt;BEA-190155&amp;gt; &amp;lt;Compliance checking/validation of the resource adapter /home/user/jackrabbit_rar/jackrabbit-jca-1.5.0.rar resulted in the following warnings:  The ra.xml &amp;lt;resourceadapter-class&amp;gt; class &amp;#39;org.apache.jackrabbit.jca.JCAResourceAdapter&amp;#39; should implement java.io.Serializable but does not.&amp;gt; &lt;br/&gt;
&lt;br/&gt;
When trying to do the JNDI lookup the repository, we got the error &amp;quot;No Object found: jackrabbit|null&amp;quot;.   The jackrabbit entry in the jndi tree is visible only as a javax.naming.reference and not as the JCARepositoryHandle due to the above warning.  Due to that, we can&amp;#39;t deploy jackrabbit-jca in Test/Production environment.  &lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m no expert in JCA, but feel it is fairly easy to implement Serializable for  JCAResourceAdapter.  Please help us out.&lt;br/&gt;
</description>
                <environment>Oracle Weblogic 10.0 on Sun Solaris OS 10</environment>
            <key id="12412858">JCR-1946</key>
            <summary>JCAResourceAdapter must implement Serializable</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="michael.xue">Michael Xue</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Jan 2009 20:12:05 +0000</created>
                <updated>Mon, 11 Jan 2010 14:18:27 +0000</updated>
                    <resolved>Wed, 30 Sep 2009 13:43:46 +0100</resolved>
                            <version>1.5</version>
                                <fixVersion>2.0-beta1</fixVersion>
                                <component>jackrabbit-jca</component>
                        <due></due>
                    <votes>2</votes>
                        <watches>4</watches>
                                                    <comments>
                    <comment id="12665552" author="alexander.klimetschek" created="Tue, 20 Jan 2009 20:43:51 +0000"  >Are you sure, the null object is because of that warning? I would suppose the serializable problem should be logged as an error if it was truly critical...</comment>
                    <comment id="12665592" author="michael.xue" created="Tue, 20 Jan 2009 22:18:39 +0000"  >Yes, I&amp;#39;m.   The jackrabbit entry in weblogic JNDI tree is not populated with &amp;#39;org.apache.jackrabbit.jca.JCAResourceAdapter&amp;#39; at all, showing a red ! instead.  Originally I deployed the same jackrabbit-jca.rar in the dev server, which is single (non-cluster) server environment.  Everything worked great.   However, as soon as I moved to the cluster environment, JCAResourceAdapter just couldn&amp;#39;t fit.   Yes, I agree, JCAResourceAdapter must implement Serializable.  Otherwise, it won&amp;#39;t be deployable in any cluster environment.     </comment>
                    <comment id="12665604" author="michael.xue" created="Tue, 20 Jan 2009 22:30:03 +0000"  >A picture worths a thousand of words.  I&amp;#39;m attaching the the snapshots of JNDI lookup entry (called JCRRepo) in a single WLS 10 server and in WLS cluster servers.  Just from the color of that entry, you can tell the difference.  </comment>
                    <comment id="12760631" author="jukkaz" created="Tue, 29 Sep 2009 16:58:54 +0100"  >Not a blocker as this only affects specific environments.&lt;br/&gt;
&lt;br/&gt;
Would anyone be interested in writing a patch for this? The required changes don&amp;#39;t seem too complex.</comment>
                    <comment id="12760851" author="c_koell" created="Wed, 30 Sep 2009 07:59:49 +0100"  >ok if it is only to implement Serializeable i will fix it :-)</comment>
                    <comment id="12760899" author="c_koell" created="Wed, 30 Sep 2009 13:43:46 +0100"  >Committed in rev. 820257</comment>
                    <comment id="12760908" author="michael.xue" created="Wed, 30 Sep 2009 14:49:45 +0100"  >Thanks a lot, Claus.  Where can I download this rev.  Sorry for my innocence.</comment>
                    <comment id="12760930" author="c_koell" created="Wed, 30 Sep 2009 16:18:58 +0100"  >It will be available in the upcoming 2.0 release or if you want we can backport it to the 1.6.1 realease &lt;br/&gt;
or you can download  the current build from &lt;a href=&quot;http://hudson.zones.apache.org/hudson/view/Jackrabbit/job/Jackrabbit-trunk/&quot;&gt;http://hudson.zones.apache.org/hudson/view/Jackrabbit/job/Jackrabbit-trunk/&lt;/a&gt;&lt;br/&gt;
greets&lt;br/&gt;
claus</comment>
                    <comment id="12760961" author="michael.xue" created="Wed, 30 Sep 2009 18:31:09 +0100"  >great, Claus.  I just downloaded the build #864 and will test it as soon as the cluster environment is available (need make a request to get it scheduled).  BTW, do you have any timeline for the upcoming 2.0 release?  It will be very exciting.  Thanks, Michael </comment>
                    <comment id="12761352" author="michael.xue" created="Thu, 1 Oct 2009 22:34:54 +0100"  >Claus, I&amp;#39;m getting java.lang.NoClassDefFoundError: javax/jcr/Binary exception after deploying build #864.  I&amp;#39;m using jcr-1.0.jar and couldn&amp;#39;t find javax/jcr/Binary there.   </comment>
                    <comment id="12761511" author="c_koell" created="Fri, 2 Oct 2009 09:49:38 +0100"  >the current trunk is compiled against the new jcr 2.0 api. if you need it in a older version we can backport it or you must&lt;br/&gt;
apply it it by yourself&lt;br/&gt;
greets&lt;br/&gt;
claus</comment>
                    <comment id="12761615" author="michael.xue" created="Fri, 2 Oct 2009 16:16:02 +0100"  >sure, Claus.  I applied jcr-2.0-b114.jar and moved over the &amp;quot;javax/jcr/Binary&amp;quot;.  However, another exception comes up.   &amp;quot;javax.resource.ResourceException: Failed to create session: Cannot instantiate persistence manager org.apache.jackrabbit.core.persistence.bundle.BundleFsPersistenceManager &amp;quot;.  I guess it is another jackrabbit/jcr upgrade issue.  Our current configuration is based on jackrabbit release 1.5.   The following is the repository.xml.   Do you see anything wrong with the configuration of BundleFsPersistenceManager?   Thanks, Michael&lt;br/&gt;
&lt;br/&gt;
&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;ISO-8859-1&amp;quot;?&amp;gt;&lt;br/&gt;
&amp;lt;!DOCTYPE Repository PUBLIC &amp;quot;-//The Apache Software Foundation//DTD Jackrabbit 1.2//EN&amp;quot;&lt;br/&gt;
&amp;quot;&lt;a href=&quot;http://jackrabbit.apache.org/dtd/repository-1.4.dtd&quot;&gt;http://jackrabbit.apache.org/dtd/repository-1.4.dtd&lt;/a&gt;&amp;quot;&amp;gt;&lt;br/&gt;
&amp;lt;Repository&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;FileSystem class=&amp;quot;org.apache.jackrabbit.core.fs.local.LocalFileSystem&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;path&amp;quot; value=&amp;quot;/data/repo-home/repository&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/FileSystem&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Security appName=&amp;quot;Jackrabbit&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;AccessManager class=&amp;quot;org.apache.jackrabbit.core.security.SimpleAccessManager&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;LoginModule class=&amp;quot;org.apache.jackrabbit.core.security.SimpleLoginModule&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;anonymous&amp;quot; value=&amp;quot;anonymous&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/LoginModule&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/Security&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Workspaces rootPath=&amp;quot;/doc-archives/JCRRepo/workspaces&amp;quot; defaultWorkspace=&amp;quot;default&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Workspace name=&amp;quot;${wsp.name}&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;FileSystem class=&amp;quot;org.apache.jackrabbit.core.fs.local.LocalFileSystem&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;path&amp;quot; value=&amp;quot;${wsp.home}&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/FileSystem&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;PersistenceManager class=&amp;quot;org.apache.jackrabbit.core.persistence.bundle.BundleFsPersistenceManager&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;bundlecacheSize&amp;quot; value=&amp;quot;8&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;consistencyCheck&amp;quot; value=&amp;quot;false&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;errorHandling&amp;quot; value=&amp;quot;&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/PersistenceManager&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;!-- Dont want a SearchIndex, setup for Indexing --&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/Workspace&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Versioning rootPath=&amp;quot;${rep.home}/versions&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;FileSystem class=&amp;quot;org.apache.jackrabbit.core.fs.local.LocalFileSystem&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;path&amp;quot; value=&amp;quot;${rep.home}/versions&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/FileSystem&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;PersistenceManager class=&amp;quot;org.apache.jackrabbit.core.state.xml.XMLPersistenceManager&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/Versioning&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Cluster id=&amp;quot;${weblogic.Name}&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;Journal class=&amp;quot;org.apache.jackrabbit.core.journal.FileJournal&amp;quot;&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;revision&amp;quot; value=&amp;quot;/doc-archives/JCRRepo/cluster-revision/revision.log&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;directory&amp;quot; value=&amp;quot;/doc-archives/JCRRepo/cluster-journal/&amp;quot; /&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/Journal&amp;gt;&lt;br/&gt;
&amp;lt;/Cluster&amp;gt;&lt;br/&gt;
&amp;lt;/Repository&amp;gt;   &lt;br/&gt;
</comment>
                    <comment id="12761625" author="tmueller" created="Fri, 2 Oct 2009 16:36:58 +0100"  >Hi,&lt;br/&gt;
&lt;br/&gt;
Unrelated to the problem, I&amp;#39;m not sure if you know about the disadvantages of the BundleFsPersistenceManager. See &lt;a href=&quot;http://wiki.apache.org/jackrabbit/PersistenceManagerFAQ&quot;&gt;http://wiki.apache.org/jackrabbit/PersistenceManagerFAQ&lt;/a&gt; &amp;quot;If the JVM process is killed the repository might turn inconsistent&amp;quot;.</comment>
                    <comment id="12761640" author="michael.xue" created="Fri, 2 Oct 2009 17:50:43 +0100"  >Good point.  We&amp;#39;ll probably use database (MS SQL Server) in production environment.  We&amp;#39;re still working on the cluster issue.</comment>
                </comments>
                    <attachments>
                    <attachment id="12398346" name="jackrabbit-jca JNDI entry in a single server.jpg" size="38856" author="michael.xue" created="Tue, 20 Jan 2009 22:30:03 +0000" />
                    <attachment id="12398347" name="jackrabbit-jca JNDI entry in cluster server.jpg" size="11765" author="michael.xue" created="Tue, 20 Jan 2009 22:30:03 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 20 Jan 2009 20:43:51 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142931</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190264</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>