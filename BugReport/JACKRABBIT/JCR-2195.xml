<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:45:59 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2195/JCR-2195.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2195] Provide possibility to import protected items using Session import functionality</title>
                <link>https://issues.apache.org/jira/browse/JCR-2195</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>SessionImporter and WorkspaceImporter currently skip all protected items encountered during import except for some special cases&lt;br/&gt;
(see &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2172&quot; title=&quot;SystemView: Session.importXML silently imports protected nodes if their parent isn&amp;#39;t protected&quot;&gt;&lt;strike&gt;JCR-2172&lt;/strike&gt;&lt;/a&gt; and WorkspaceImporter#postProcessNode).&lt;br/&gt;
The specification only mandates that protected content is treated in a consistent manner, but allows the implementation to either import or ignore it.&lt;br/&gt;
&lt;br/&gt;
Find attached a patch containing some initials steps to allow to extend the default import behavior:&lt;br/&gt;
Instead of skipping protected items (and in case of nodes the complete tree below it), they should be passed to a separate handler,&lt;br/&gt;
that may or may not be able to deal with them and needs to assert, that they are in a valid format.&lt;br/&gt;
&lt;br/&gt;
The patch includes:&lt;br/&gt;
&lt;br/&gt;
- Abstract classes for that protected item import&lt;br/&gt;
- Default implementations that never import protected nodes (same behavior as we have today)&lt;br/&gt;
- An example implementation for the AC-content (just to see if it works for simple cases) + some trivial tests.&lt;br/&gt;
- Changes to SessionImporter to demonstrate how import of protected items would be enabled.&lt;br/&gt;
&lt;br/&gt;
The patch doesn&amp;#39;t include yet:&lt;br/&gt;
&lt;br/&gt;
- Changes to WorkspaceImporter (would +- be according to SessionImporter)&lt;br/&gt;
- Changes to WorkspaceImpl/SessionImpl as well as configuration that would allow to modify the default behavior.&lt;br/&gt;
- Examples for import of protected properties.&lt;br/&gt;
- Examples for workspace import.&lt;br/&gt;
&lt;br/&gt;
The patch has the following limitations or TODOs:&lt;br/&gt;
&lt;br/&gt;
- Proper handling of protected references properties or non-protected ref properties with the tree defined by a protected node.&lt;br/&gt;
- Test / Careful review if the various ImportUUIDBehaviors are/can properly be covered, specially in case of &amp;quot;replace-existing&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
The patch in addition addresses:&lt;br/&gt;
&lt;br/&gt;
- An inconsistency in the SessionImporter:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; Attempt to import protected content below an existing protected node =&amp;gt; skipped&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; Attempt to import protected content that doesn&amp;#39;t yet exist =&amp;gt; first node is imported, ConstraintViolationException for child-nodes.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;gt; This behavior is also reflected in the Node-stack... where in the first case &amp;#39;null&amp;#39; is pushed, in the second case the first protected node.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;(see also &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2172&quot; title=&quot;SystemView: Session.importXML silently imports protected nodes if their parent isn&amp;#39;t protected&quot;&gt;&lt;strike&gt;JCR-2172&lt;/strike&gt;&lt;/a&gt; for details).&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12429816">JCR-2195</key>
            <summary>Provide possibility to import protected items using Session import functionality</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="anchela">angela</assignee>
                                <reporter username="anchela">angela</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jul 2009 16:00:23 +0100</created>
                <updated>Thu, 12 Aug 2010 09:43:19 +0100</updated>
                    <resolved>Tue, 19 Jan 2010 11:48:57 +0000</resolved>
                                            <fixVersion>2.0</fixVersion>
                                <component>jackrabbit-core</component>
                <component>xml</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12748861" author="tripod" created="Fri, 28 Aug 2009 16:40:32 +0100"  >committed slightly modified version of the patch with the restrictions/implications above.</comment>
                    <comment id="12750415" author="tripod" created="Wed, 2 Sep 2009 13:12:43 +0100"  >revision 810471:&lt;br/&gt;
- reverted to original proposal without the ProtectedItemHandlers.&lt;br/&gt;
- fixed issue when 2 ACL entries are imported</comment>
                    <comment id="12768770" author="anchela" created="Thu, 22 Oct 2009 18:35:12 +0100"  >revision 828791:&lt;br/&gt;
&lt;br/&gt;
- add configuration (to the workspace configuration)&lt;br/&gt;
- pass config to both SessionImporter and WorkspaceImporter&lt;br/&gt;
&amp;nbsp;&amp;nbsp;(the latter hasn&amp;#39;t been touched yet to support this kind of extension and throws unsupported...exc. in case&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;it finds configured importers that are meant to be used with a workspace import).&lt;br/&gt;
- handling of reference properties&lt;br/&gt;
- uuidbehavior passed to the importers&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
TODOs:&lt;br/&gt;
- workspace import</comment>
                    <comment id="12790781" author="anchela" created="Tue, 15 Dec 2009 15:56:54 +0000"  >proposed patch for workspace-import according to changes made to session import.&lt;br/&gt;
corresponding tests still missing. </comment>
                    <comment id="12790784" author="anchela" created="Tue, 15 Dec 2009 16:02:43 +0000"  >in order to get this issue resolved for 2.0 we have the following possibilities:&lt;br/&gt;
&lt;br/&gt;
- implement workspace import of protected items according to the session import (-&amp;gt; see untested patch, jr built not affected)&lt;br/&gt;
- leave it as is and resolve issue with the known limitations (workspace importer not accepted for the time being).&lt;br/&gt;
&lt;br/&gt;
i don&amp;#39;t have strong feelings about either variant but I&amp;#39;d like to see this issue resolved for 2.0 instead of having&lt;br/&gt;
a code released without having the corresponding issue being closed.</comment>
                    <comment id="12801764" author="mreutegg" created="Mon, 18 Jan 2010 12:52:27 +0000"  >I think we should close this issue and target the workspace import of protected items for another release. </comment>
                    <comment id="12802209" author="anchela" created="Tue, 19 Jan 2010 11:46:45 +0000"  >adjusting subject accordingly.&lt;br/&gt;
was: Provide possibility to import protected items using Session/Workspace import functionality</comment>
                    <comment id="12802210" author="anchela" created="Tue, 19 Jan 2010 11:48:57 +0000"  >resolving issue. &lt;br/&gt;
&lt;br/&gt;
workspace-importing protected items is not supported.&lt;br/&gt;
we can address this if we really have need and/or time to carefully test the corresponding patch.</comment>
                </comments>
                    <attachments>
                    <attachment id="12412874" name="JCR-2195.patch" size="79563" author="anchela" created="Wed, 8 Jul 2009 16:06:22 +0100" />
                    <attachment id="12428048" name="JCR-2195_workspaceimport.patch" size="11826" author="anchela" created="Tue, 15 Dec 2009 15:56:53 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 28 Aug 2009 15:40:32 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>143047</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189697</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>