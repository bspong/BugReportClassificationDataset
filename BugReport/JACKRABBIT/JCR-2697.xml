<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:55:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2697/JCR-2697.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2697] Add support for encrpted db password in repository.xml</title>
                <link>https://issues.apache.org/jira/browse/JCR-2697</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Basically this is same to the issue &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2673&quot;&gt;https://issues.apache.org/jira/browse/JCR-2673&lt;/a&gt;. I can not reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2673&quot; title=&quot;Add support for hashed passwords in repository.xml&quot;&gt;&lt;strike&gt;JCR-2673&lt;/strike&gt;&lt;/a&gt;, so I filed a new one instead. &lt;br/&gt;
&lt;br/&gt;
The reason for this jira is because for a lot of companies it is not allowed to store password in a clear text. &lt;br/&gt;
&lt;br/&gt;
Sorry, I dont know how this can be implemented yet. But I hope at least the requirement is clear. &lt;br/&gt;
&lt;br/&gt;
Thanks.</description>
                <environment></environment>
            <key id="12470787">JCR-2697</key>
            <summary>Add support for encrpted db password in repository.xml</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="jliu">Jervis Liu</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Aug 2010 08:07:25 +0100</created>
                <updated>Tue, 8 Nov 2011 15:55:56 +0000</updated>
                    <resolved>Mon, 8 Aug 2011 14:21:47 +0100</resolved>
                            <version>2.1</version>
                                <fixVersion>2.3</fixVersion>
                                <component>config</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12895175" author="jliu" created="Wed, 4 Aug 2010 08:53:47 +0100"  >I am not an expert in security, so I did a bit research and found following:&lt;br/&gt;
&lt;br/&gt;
1. Encrypt password using MD5 or SHA-1 etc, then configure the underlying database to let it know the password passed in is encrypted. Similiar to this post tried to achieve:&lt;br/&gt;
&lt;a href=&quot;http://www.coderanch.com/t/307198/JDBC/java/Encrypted-Password-Oracle-JDBC&quot;&gt;http://www.coderanch.com/t/307198/JDBC/java/Encrypted-Password-Oracle-JDBC&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
The problem for this approach is that the database configuration part can be very db specific or even version specific. If this is true, it will be very hard for us to maintain.&lt;br/&gt;
&lt;br/&gt;
2. Most application servers have a way to store database password as encrypted other than in plain text. For example, this is how it is done in JBOSS AS: &lt;br/&gt;
&lt;a href=&quot;http://community.jboss.org/wiki/encryptingdatasourcepasswords&quot;&gt;http://community.jboss.org/wiki/encryptingdatasourcepasswords&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
I wonder if it is possible to do similar things in JackRabbit, eg, we delegate the db authentication part in repository.xml to another JAAS module (in the example above, the SecureIdentityLoginModule). But please do not ask me how SecureIdentityLoginModule is implemented, I have not figured this out yet. &lt;br/&gt;
&lt;br/&gt;
Please comment. &lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="13067727" author="kris.hofmans" created="Tue, 19 Jul 2011 14:47:11 +0100"  >I currently work for a big international pharmaceutical company right now with strict security policies.&lt;br/&gt;
We would also like to store things in jackrabbit, but this is a stopper, we are never allowed to store passwords cleartext in a file.&lt;br/&gt;
&lt;br/&gt;
We cannot use the JNDI solution because we use weblogic as an application server and when using a JNDI datasource jackrabbit tries to set auto commit to true which is, understandably, not allowed.</comment>
                    <comment id="13080936" author="jukkaz" created="Mon, 8 Aug 2011 14:21:47 +0100"  >Done in revision 1154947 by allowing passwords to be specified in base64-encoding. To do this, prefix the base64-encoded password with &amp;quot;{base64}&amp;quot;. For example, the following two password configurations are equivalent:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;password&amp;quot; value=&amp;quot;test&amp;quot;/&amp;gt;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;param name=&amp;quot;password&amp;quot; value=&amp;quot;{base64}dGVzdA==&amp;quot;/&amp;gt;&lt;br/&gt;
</comment>
                    <comment id="13080991" author="schans" created="Mon, 8 Aug 2011 16:08:43 +0100"  >Hi Jukka,&lt;br/&gt;
&lt;br/&gt;
It could be that I&amp;#39;m missing something completely, but how is encoding the same as encryption? It doesn&amp;#39;t make sense to me to use base64 encoding for storing passwords as you can just decode them. I don&amp;#39;t think there&amp;#39;s any (easy) way to decrypt an encrypted password and use it for the db connection in a really secure way. Maybe you can try to obfuscate a pre-shared key in the java code and use that to decrypt the encrypted password. That would at least make it much harder to decipher the password but certainly not impossible.&lt;br/&gt;
&lt;br/&gt;
Another option might be to just ask for the password on startup which is often the case with ssl certificates in httpd, but it makes restarting much more a hassle. You can automate most of that though, for example with scripts that remotely login over ssh, except when a server comes up after a reboot.&lt;br/&gt;
&lt;br/&gt;
Regards,&lt;br/&gt;
Bart</comment>
                    <comment id="13081020" author="jukkaz" created="Mon, 8 Aug 2011 17:03:20 +0100"  >As you say, proper encryption in this case is impossible without some out-of-band source of the encryption key. And providing something like that is IMHO outside the scope of Jackrabbit. Should a more secure setup like that be needed, my recommendation would be to configure the database connection in JNDI with a container that supports such a setup and then just point Jackrabbit to that data source.&lt;br/&gt;
&lt;br/&gt;
The Base64 approach I added is pretty much equivalent to the approach used by JBoss, I just use base64 instead of a more complicated encoding based on some hardcoded key. I actually prefer this approach to the one used by JBoss, as it makes it obvious that the only benefit over plain text passwords is security by obscurity.&lt;br/&gt;
&lt;br/&gt;
Ideally I wouldn&amp;#39;t even have implemented anything like this, but I keep hearing this complaint too often from people who also agree that not allowing plain text passwords for something like this is silly but enforced by some fixed policy they can&amp;#39;t change.&lt;br/&gt;
</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                <outwardlinks description="blocks">
                            <issuelink>
            <issuekey id="12469253">JCR-2673</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 19 Jul 2011 13:47:11 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>65741</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189840</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>