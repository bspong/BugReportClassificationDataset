<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:53:11 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2727/JCR-2727.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2727] Add user manager performance tests </title>
                <link>https://issues.apache.org/jira/browse/JCR-2727</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>We should add some performance tests for validating &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2710&quot; title=&quot;Add support for large number of users in a group&quot;&gt;&lt;strike&gt;JCR-2710&lt;/strike&gt;&lt;/a&gt; and related. That is we should measure performance for creating users and groups and adding/removing users to/from groups. This should be done for both repository configurations: one with the old content model (group membership in property) and one with the new content model introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2710&quot; title=&quot;Add support for large number of users in a group&quot;&gt;&lt;strike&gt;JCR-2710&lt;/strike&gt;&lt;/a&gt; (group membership in b-tree like node structure). </description>
                <environment></environment>
            <key id="12472371">JCR-2727</key>
            <summary>Add user manager performance tests </summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mduerig">Michael D&#252;rig</assignee>
                                <reporter username="mduerig">Michael D&#252;rig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Aug 2010 14:41:24 +0100</created>
                <updated>Tue, 8 Nov 2011 15:52:07 +0000</updated>
                    <resolved>Thu, 26 Aug 2010 11:12:21 +0100</resolved>
                            <version>2.2</version>
                                <fixVersion>2.2</fixVersion>
                                <component>test</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12902806" author="mduerig" created="Thu, 26 Aug 2010 11:12:21 +0100"  >Fixed at revision 989584&lt;br/&gt;
Added performance tests for creating users, adding users to groups, checking group membership and getting the members of a group.</comment>
                    <comment id="12902807" author="mduerig" created="Thu, 26 Aug 2010 11:17:05 +0100"  >Following some results from the new performance tests. Using the new group members content model introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2710&quot; title=&quot;Add support for large number of users in a group&quot;&gt;&lt;strike&gt;JCR-2710&lt;/strike&gt;&lt;/a&gt;, adding members to groups is significantly faster. &lt;br/&gt;
&lt;br/&gt;
# AddGroupMembersTest                    avg     std     min     max   count&lt;br/&gt;
2.2-btree-usermanager-repository           5       8       2     149    2086&lt;br/&gt;
2.2-default-usermanager-repository        23      28       7     276     998&lt;br/&gt;
&lt;br/&gt;
# CreateUserTest                         avg     std     min     max   count&lt;br/&gt;
2.2-btree-usermanager-repository          21      26       6     340    2423&lt;br/&gt;
2.2-default-usermanager-repository        21      28       7     249    2340&lt;br/&gt;
&lt;br/&gt;
# GroupGetMembersTest                    avg     std     min     max   count&lt;br/&gt;
2.2-btree-usermanager-repository          19       2      16      49    2692&lt;br/&gt;
2.2-default-usermanager-repository        13       3      11      86    3801&lt;br/&gt;
&lt;br/&gt;
# GroupMemberLookupTest                  avg     std     min     max   count&lt;br/&gt;
2.2-btree-usermanager-repository           2       2       0     168   30000&lt;br/&gt;
2.2-default-usermanager-repository         2       2       0     148   27733&lt;br/&gt;
</comment>
                    <comment id="12916080" author="jukkaz" created="Wed, 29 Sep 2010 09:46:29 +0100"  >Some of the current tests only run a single iteration in the runTest() method, which makes it a bit hard for the test suite to reliably measure the performance, especially since the performance improvements you made. See the attached patch for some improvements designed to avoid this problem and to leverage some recent test suite extras like getScale() and loginWriter().</comment>
                    <comment id="12923425" author="mduerig" created="Thu, 21 Oct 2010 13:50:05 +0100"  >Thanks for the patch. However, the semantics of AddGroupMembersTest changed: the intent of the original test was to measure the performance of adding many users (thousands) to a group. The changed test measures performance of adding a few users to a group (100). The same applies to CreateUserTest respectively.&lt;br/&gt;
&lt;br/&gt;
I edited the patch to regain the original semantics while preserving your fixes and ran the performance tests:&lt;br/&gt;
&lt;br/&gt;
# AddGroupMembersTest                    min     10%     50%     90%     max&lt;br/&gt;
2.2-btree-usermanager-repository         146     152     189     259     341&lt;br/&gt;
2.2-default-usermanager-repository       789     930    1945    2875    3205&lt;br/&gt;
&lt;br/&gt;
# GroupMemberLookupTest                  min     10%     50%     90%     max&lt;br/&gt;
2.2-btree-usermanager-repository         749     755     766     779    1289&lt;br/&gt;
2.2-default-usermanager-repository      1176    1179    1203    1257    1310&lt;br/&gt;
&lt;br/&gt;
# CreateUserTest                         min     10%     50%     90%     max&lt;br/&gt;
2.2-btree-usermanager-repository        1189    1303    1648    2127    2161&lt;br/&gt;
2.2-default-usermanager-repository      1181    1386    1981    2895    3278&lt;br/&gt;
&lt;br/&gt;
# GroupGetMembersTest                    min     10%     50%     90%     max&lt;br/&gt;
2.2-btree-usermanager-repository           6       6       7      11      87&lt;br/&gt;
2.2-default-usermanager-repository         4       4       5       8      17&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll commit the edited patch to trunk in a minute.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12923427" author="mduerig" created="Thu, 21 Oct 2010 13:52:36 +0100"  >Committed Jukka&amp;#39;s patch with modifications as explained in revision 1025979</comment>
                </comments>
                    <attachments>
                    <attachment id="12455908" name="0001-JCR-2727-Add-user-manager-performance-tests.patch" size="9637" author="jukkaz" created="Wed, 29 Sep 2010 09:46:29 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 29 Sep 2010 08:46:29 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>97837</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>118696</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>