<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:56:05 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2425/JCR-2425.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2425] Session.save() and Session.refresh(boolean) rely on accessibility of the root node</title>
                <link>https://issues.apache.org/jira/browse/JCR-2425</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>follow-up issue to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2418&quot; title=&quot;Read permission on parent node required to access an item&amp;#39;s definition&quot;&gt;&lt;strike&gt;JCR-2418&lt;/strike&gt;&lt;/a&gt;:&lt;br/&gt;
&lt;br/&gt;
an editing session that is only allowed to write in a subtree but isn&amp;#39;t allowed to access the root node will not be&lt;br/&gt;
able to save or revert changes made in the transient space within that subtree.&lt;br/&gt;
&lt;br/&gt;
the reason for this is, that both SessionImpl.save() and SessionImpl.refresh(boolean) access the root node&lt;br/&gt;
in order to execute the call. since it&amp;#39;s the regular call READ permissions are checked, although the user&lt;br/&gt;
made no attempt to *look* at the root.&lt;br/&gt;
&lt;br/&gt;
A workaround would be to call Item.save() on the modified tree itself that obviously was visible for the &lt;br/&gt;
user... unfortunately that method is deprecated as of JCR 2.0. Therefore, I have the impression that we&lt;br/&gt;
should fix the methods mentioned above.&lt;br/&gt;
&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12442452">JCR-2425</key>
            <summary>Session.save() and Session.refresh(boolean) rely on accessibility of the root node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="stefan@jira">Stefan Guggisberg</assignee>
                                <reporter username="anchela">angela</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Dec 2009 14:35:54 +0000</created>
                <updated>Mon, 18 Jan 2010 11:08:38 +0000</updated>
                    <resolved>Fri, 4 Dec 2009 17:28:40 +0000</resolved>
                                            <fixVersion>2.0-beta6</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12785949" author="anchela" created="Fri, 4 Dec 2009 14:44:41 +0000"  >the following test should demonstrate the problem. It&amp;#39;s an adapted copy of &lt;br/&gt;
org.apache.jackrabbit.core.security.authorization.acl.WriteTest#testWriteIfReadingParentIsDenied&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
public void testWriteWithoutRootAccess() throws Exception {&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Privilege[] privileges = privilegesFromNames(new String[] {Privilege.JCR_READ, Privilege.JCR_WRITE});&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/* deny READ/WRITE privilege for testUser at &amp;#39;/&amp;#39; */&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;withdrawPrivileges(&amp;quot;/&amp;quot;, testUser.getPrincipal(), privileges, getRestrictions(superuser, &amp;quot;/&amp;quot;));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/*&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;allow READ/WRITE privilege for testUser at &amp;#39;path&amp;#39;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;*/&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;givePrivileges(childNPath, testUser.getPrincipal(), privileges, getRestrictions(superuser, childNPath));&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Session testSession = getTestSession();&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// reading the node and it&amp;#39;s definition must succeed.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;assertTrue(testSession.nodeExists(childNPath));&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Node n = testSession.getNode(childNPath);&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;n.addNode(&amp;quot;someChild&amp;quot;);&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;testSession.save();  // or testSession.refresh(false)&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;// TODO: proper cleanup of modified permissions outside of the testroot-scope that is cleanup in tear-down.&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;}</comment>
                    <comment id="12786012" author="stefan@jira" created="Fri, 4 Dec 2009 17:28:40 +0000"  >fixed in svn r887279</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 4 Dec 2009 17:28:40 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>78218</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>191753</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>