<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:40:20 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-617/JCR-617.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-617] CachingHieraarchyManager may serve moved items</title>
                <link>https://issues.apache.org/jira/browse/JCR-617</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>There is a problem with weak referenced item states and event notification in the&lt;br/&gt;
LocalItemStateManager.&lt;br/&gt;
&lt;br/&gt;
consider the following:&lt;br/&gt;
- Session A traverses some nodes and fills-up the cache of the ChachingHierarchyManager&lt;br/&gt;
- This also fills the weak-ref cache in Session A LocalItemStateManager.&lt;br/&gt;
- Session B does some operations&lt;br/&gt;
- At some point, GC decides to remove the weakly refferenced ItemStates in Session As&lt;br/&gt;
&amp;nbsp;&amp;nbsp;LocalItemStateManager&lt;br/&gt;
- Session B moves a node and saves the changes.&lt;br/&gt;
- The SharedItemStateManager notifies all listeners that a node was modified&lt;br/&gt;
- The LocalItemStateManager of Session A receives the event, but does not bubble it,&lt;br/&gt;
&amp;nbsp;&amp;nbsp;because it does not have the item anymore in its cache&lt;br/&gt;
- The CachingHierarchyManager of Session A never receives the modification event and still&lt;br/&gt;
&amp;nbsp;&amp;nbsp;servers the items at the old location.&lt;br/&gt;
&lt;br/&gt;
Solution A:&lt;br/&gt;
reconnect missing states in the LocalItemStateManager when an event is received. this has&lt;br/&gt;
the drawback that a lot of state would be generated that are not needed.&lt;br/&gt;
&lt;br/&gt;
Solution B:&lt;br/&gt;
add a new event &amp;#39;nodeModified&amp;#39; that is only sent by the LocalItemStateManager if a&lt;br/&gt;
&amp;#39;stateModified&amp;#39; was received for which it does not have the item aymore. this has the&lt;br/&gt;
drawback that alot more events are generated.&lt;br/&gt;
&lt;br/&gt;
Will implement solution B&lt;br/&gt;
</description>
                <environment></environment>
            <key id="12354662">JCR-617</key>
            <summary>CachingHieraarchyManager may serve moved items</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="tripod">Tobias Bocanegra</assignee>
                                <reporter username="tripod">Tobias Bocanegra</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Nov 2006 09:28:42 +0000</created>
                <updated>Tue, 30 Jan 2007 21:13:21 +0000</updated>
                    <resolved>Wed, 29 Nov 2006 09:28:21 +0000</resolved>
                            <version>1.1</version>
                <version>1.1.1</version>
                                <fixVersion>1.2.1</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12446894" author="tripod" created="Fri, 3 Nov 2006 10:09:19 +0000"  >Committed revision 470745.&lt;br/&gt;
</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>80478</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>190648</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>