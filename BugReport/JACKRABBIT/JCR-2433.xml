<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:47:18 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-2433/JCR-2433.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-2433] NPE when copying nodes with Workspace.copy()</title>
                <link>https://issues.apache.org/jira/browse/JCR-2433</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>I get a NullpointerException when using Workspace.copy():&lt;br/&gt;
&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
at org.apache.jackrabbit.core.BatchedItemOperations.copyNodeState(BatchedItemOperations.java:1834)&lt;br/&gt;
at org.apache.jackrabbit.core.BatchedItemOperations.copyNodeState(BatchedItemOperations.java:1806)&lt;br/&gt;
at org.apache.jackrabbit.core.BatchedItemOperations.copyNodeState(BatchedItemOperations.java:1806)&lt;br/&gt;
at org.apache.jackrabbit.core.BatchedItemOperations.copy(BatchedItemOperations.java:423)&lt;br/&gt;
at org.apache.jackrabbit.core.WorkspaceImpl.internalCopy(WorkspaceImpl.java:444)&lt;br/&gt;
at org.apache.jackrabbit.core.WorkspaceImpl.copy(WorkspaceImpl.java:666)&lt;br/&gt;
at xxx.MyClass.myMeth(MyClass.java)&lt;br/&gt;
&lt;br/&gt;
It seems that it happens not all the time. The error occurs since we use Jackrabbit 1.6.0. We do not get the error with previous versions. It seems that we only get the error when trying to copy nodes that were created with Jackrabbit 1.4 and copied with Jackrabbit 1.6.</description>
                <environment></environment>
            <key id="12443071">JCR-2433</key>
            <summary>NPE when copying nodes with Workspace.copy()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.png">Blocker</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="sascha0137">Sascha Theves</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Dec 2009 08:36:15 +0000</created>
                <updated>Fri, 23 Sep 2011 15:40:25 +0100</updated>
                    <resolved>Thu, 13 May 2010 16:47:53 +0100</resolved>
                            <version>1.6</version>
                                <fixVersion>1.6.2</fixVersion>
                                <component>jackrabbit-core</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>3</watches>
                                                    <comments>
                    <comment id="12789183" author="sascha0137" created="Fri, 11 Dec 2009 09:08:25 +0000"  >I also get the error when trying to copy nodes that were created with jackrabbit 1.5.0.</comment>
                    <comment id="12789185" author="stefan@jira" created="Fri, 11 Dec 2009 09:17:23 +0000"  >the NPE is thrown here:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PropDefId defId = srcChildState.getDefinitionId();&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;PropDef def = ntReg.getPropDef(defId);&lt;br/&gt;
=&amp;gt;                if (def.getDeclaringNodeType().equals(NameConstants.MIX_LOCKABLE)) {&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
did you change any node type declarations?</comment>
                    <comment id="12789195" author="sascha0137" created="Fri, 11 Dec 2009 09:42:30 +0000"  >No I didn`t change any node type declarations. I only upgraded my jackrabbit libs to 1.6.0 and thats it.</comment>
                    <comment id="12789197" author="sascha0137" created="Fri, 11 Dec 2009 09:50:11 +0000"  >When I switch back to jackrabbit 1.5.0 the error is gone.</comment>
                    <comment id="12789200" author="stefan@jira" created="Fri, 11 Dec 2009 09:59:23 +0000"  >ok, this is probably caused by a declaration change of the built-in node types in version 1.6.&lt;br/&gt;
&lt;br/&gt;
is there any chance you can find out the PropertyId of the property causing the exception?&lt;br/&gt;
i guess you&amp;#39;d have to debug jackrabbit and place a NPE breakpoint.</comment>
                    <comment id="12789210" author="sascha0137" created="Fri, 11 Dec 2009 10:13:45 +0000"  >The PropertyId is &amp;quot;75a473e2-3ddf-459d-8460-f05b7ce864f3/{&lt;a href=&quot;http://www.jcp.org/jcr/1.0&quot;&gt;http://www.jcp.org/jcr/1.0&lt;/a&gt;}isCheckedOut&amp;quot; and the the PropDefId is &amp;quot;1284956073&amp;quot; (do not know if this matters).</comment>
                    <comment id="12789212" author="sascha0137" created="Fri, 11 Dec 2009 10:16:34 +0000"  >I also get the following warning sometimes:&lt;br/&gt;
&lt;br/&gt;
ItemManager - property at /path/to/node/jcr:isCheckedOut has invalid definitionId (1284956073)</comment>
                    <comment id="12789297" author="stefan@jira" created="Fri, 11 Dec 2009 13:19:29 +0000"  >thanks, now i can see what&amp;#39;s causing the problem. &lt;br/&gt;
&lt;br/&gt;
in version 1.6 the declarations of some built-in node types have changed&lt;br/&gt;
(actually the declarations have changed from JCR 1.0 to JCR 2.0).&lt;br/&gt;
&lt;br/&gt;
i.e.&lt;br/&gt;
&lt;br/&gt;
jcr:isCheckedOut used to be declared by mix:versionable. &lt;br/&gt;
in jackrabbit 1.6 it is declared by mix:simpleVersionable&lt;br/&gt;
and mix:versionable now extends mix:simpleVersionable.&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
a quick fix for this issue would be to gracefully handle this &lt;br/&gt;
&amp;#39;incompatibility&amp;#39; by guarding against NPE and trying to &lt;br/&gt;
determine/assign the &amp;#39;correct&amp;#39; definition during the copy&lt;br/&gt;
operation.   &lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12790169" author="sascha0137" created="Mon, 14 Dec 2009 14:14:02 +0000"  >Are there any other incompatibilities in the 1.6.0 version? Or should a migration from 1.5.0 to 1.6.0 be possible by exchanging the jackrabbit Jars only?</comment>
                    <comment id="12790170" author="sascha0137" created="Mon, 14 Dec 2009 14:14:48 +0000"  >Set the fix version to 1.6.1.</comment>
                    <comment id="12800788" author="jukkaz" created="Fri, 15 Jan 2010 17:47:13 +0000"  >Postponing to a later 1.6.x release since we don&amp;#39;t yet have a patch to fix this issue.</comment>
                    <comment id="12805062" author="sascha0137" created="Tue, 26 Jan 2010 15:25:12 +0000"  >That means Jackrabbit 1.6.x is incompatible with any previous versions. That should be mentioned in the ReadMe or somewhere else where the users can find it. Your data is corrupt after an upgrade to Jackrabbit 1.6.0 and that corruption can not be fixed. That is very critical for production environments. For us it means we can not use Jackrabbit 1.6.0 at all.</comment>
                    <comment id="12838284" author="sascha0137" created="Thu, 25 Feb 2010 10:11:58 +0000"  >Is there a way to manually fix the problem? We have downgraded our repository to Jackrabbit 1.5 and are still unable to use the Workspace.copy() function. Any ideas?</comment>
                    <comment id="12849696" author="jukkaz" created="Thu, 25 Mar 2010 13:37:28 +0000"  >I committed a workaround to the NPE in revision 927393 and merged it to the 1.6 branch in revision 927395. This should solve at least the exact problem as reported, though I&amp;#39;m not sure if the confused node type information would cause other problems down the line.</comment>
                    <comment id="12861389" author="jukkaz" created="Tue, 27 Apr 2010 14:14:26 +0100"  >Resolving as fixed based on the above fix.</comment>
                    <comment id="12861599" author="pjara" created="Tue, 27 Apr 2010 23:43:56 +0100"  >I applied the fix by Jukka Zitting to version 1.6.1, recompiled, and deployed to servers that are having this issue. I&amp;#39;m still seeing the NPE even with the swapped equality test.</comment>
                    <comment id="12861691" author="sascha0137" created="Wed, 28 Apr 2010 07:34:09 +0100"  >The patch is not a fix of the bug. It just fixes the NPE but the problem relies on the changed notetype definitions which are incompatible with the previous ones. That means that jackrabbit 2.x and 1.6.x are incompatible with previous releases and that should be mentioned somewhere.&lt;br/&gt;
&lt;br/&gt;
However, it seems that the patch does not fix all NPEs caused by the changed notetype definitions as Paul mentioned.&lt;br/&gt;
&lt;br/&gt;
Is there a way to manually fix the problem?</comment>
                    <comment id="12861727" author="jukkaz" created="Wed, 28 Apr 2010 09:45:16 +0100"  >Paul, can you post the exact stack trace you&amp;#39;re getting?</comment>
                    <comment id="12861746" author="gjoseph" created="Wed, 28 Apr 2010 10:38:59 +0100"  >Just for the record, exporting and reimporting impacted nodes fixed the problem for us.</comment>
                    <comment id="12861749" author="sascha0137" created="Wed, 28 Apr 2010 11:01:52 +0100"  >If exporting and importing fixes the problem, then that could be done by jackrabbit itself or not? So maybe you could provide a fix for this issue that does this automatically? </comment>
                    <comment id="12861819" author="pjara" created="Wed, 28 Apr 2010 15:52:28 +0100"  >Here is the stack trace I&amp;#39;m getting (note that it says line 1835 because I commented out the old line of code at line 1834 instead of replacing it).&lt;br/&gt;
&lt;br/&gt;
2010-04-27 17:39:51,998 ERROR info.magnolia.module.exchangesimple.ReceiveFilter : &lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.BatchedItemOperations.copyNodeState(BatchedItemOperations.java:1835)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.BatchedItemOperations.copy(BatchedItemOperations.java:423)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.WorkspaceImpl.internalCopy(WorkspaceImpl.java:444)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.WorkspaceImpl.clone(WorkspaceImpl.java:646)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangetransactional.CopyUtil.clone(CopyUtil.java:79)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangetransactional.XAReceiveFilter.remove(XAReceiveFilter.java:292)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangetransactional.XAReceiveFilter.receive(XAReceiveFilter.java:87)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangesimple.ReceiveFilter.doFilter(ReceiveFilter.java:123)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangetransactional.XAReceiveFilter.doFilter(XAReceiveFilter.java:60)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.security.BaseSecurityFilter.doFilter(BaseSecurityFilter.java:61)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.security.LogoutFilter.doFilter(LogoutFilter.java:89)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.OncePerRequestAbstractMgnlFilter.doFilter(OncePerRequestAbstractMgnlFilter.java:62)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.security.auth.login.LoginFilter.doFilter(LoginFilter.java:80)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.enterprise.registration.RegistrationFilter.doFilter(RegistrationFilter.java:50)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:84)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.CosMultipartRequestFilter.doFilter(CosMultipartRequestFilter.java:87)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:90)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.ContextFilter.doFilter(ContextFilter.java:87)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.CompositeFilter.doFilter(CompositeFilter.java:64)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlMainFilter.doFilter(MgnlMainFilter.java:96)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlMainFilter.doFilter(MgnlMainFilter.java:199)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:835)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:640)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.lang.Thread.run(Thread.java:636)&lt;br/&gt;
&lt;br/&gt;
I decided to modify the code to catch the exception and this is the exception that is thrown later on down the code:&lt;br/&gt;
&lt;br/&gt;
2010-04-27 18:07:17,419 ERROR info.magnolia.module.exchangesimple.ReceiveFilter : &lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.BatchedItemOperations.copyPropertyState(BatchedItemOperations.java:1933)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.BatchedItemOperations.copyNodeState(BatchedItemOperations.java:1845)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.BatchedItemOperations.copy(BatchedItemOperations.java:423)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.WorkspaceImpl.internalCopy(WorkspaceImpl.java:444)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.jackrabbit.core.WorkspaceImpl.clone(WorkspaceImpl.java:646)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangetransactional.CopyUtil.clone(CopyUtil.java:79)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangetransactional.XAReceiveFilter.remove(XAReceiveFilter.java:292)        at info.magnolia.module.exchangetransactional.XAReceiveFilter.receive(XAReceiveFilter.java:87)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangesimple.ReceiveFilter.doFilter(ReceiveFilter.java:123)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.module.exchangetransactional.XAReceiveFilter.doFilter(XAReceiveFilter.java:60)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.security.BaseSecurityFilter.doFilter(BaseSecurityFilter.java:61)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.security.LogoutFilter.doFilter(LogoutFilter.java:89)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.OncePerRequestAbstractMgnlFilter.doFilter(OncePerRequestAbstractMgnlFilter.java:62)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.security.auth.login.LoginFilter.doFilter(LoginFilter.java:80)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.enterprise.registration.RegistrationFilter.doFilter(RegistrationFilter.java:50)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)        at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:84)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.CosMultipartRequestFilter.doFilter(CosMultipartRequestFilter.java:87)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.ContentTypeFilter.doFilter(ContentTypeFilter.java:90)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.ContextFilter.doFilter(ContextFilter.java:87)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlFilterChain.doFilter(MgnlFilterChain.java:82)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.CompositeFilter.doFilter(CompositeFilter.java:64)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.AbstractMgnlFilter.doFilter(AbstractMgnlFilter.java:70)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlMainFilter.doFilter(MgnlMainFilter.java:96)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at info.magnolia.cms.filters.MgnlMainFilter.doFilter(MgnlMainFilter.java:199)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:835)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:640)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1286)&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;at java.lang.Thread.run(Thread.java:636)&lt;br/&gt;
</comment>
                    <comment id="12861820" author="pjara" created="Wed, 28 Apr 2010 15:53:43 +0100"  >Gr&amp;#xE9;gory and Sascha, I too would be interested in doing an export and import of data using just JackRabbit if that is possible. Can somebody kindly point me to some instructions to do so?</comment>
                    <comment id="12862147" author="jukkaz" created="Thu, 29 Apr 2010 11:02:11 +0100"  >Reopening. I&amp;#39;m working on a backwards compatibility test for this and a solution that would automatically fix the node types broken by the upgrade.</comment>
                    <comment id="12862171" author="jukkaz" created="Thu, 29 Apr 2010 13:00:48 +0100"  >I now (see revision 939290) have a test case that creates a repository with a versionable node in Jackrabbit &amp;lt; 1.6 and then opens the repository in Jackrabbit &amp;gt;= 1.6 and copies the node. Unfortunately I&amp;#39;m still unable to reproduce the original problem. After the repository upgrade the jcr:isCheckedOut property is correctly reported as being declared by the mix:simpleVersionable type.&lt;br/&gt;
&lt;br/&gt;
Any ideas on what I should do to reproduce this?</comment>
                    <comment id="12862364" author="pjara" created="Thu, 29 Apr 2010 20:26:08 +0100"  >Let me know if I can be of any help. How we stumbled on this bug is we had started out with a clean repository created with Magnolia CMS 4.0.1. Some of the nodes may have been created using this version of the software. The CMS has since been upgraded to the following versions (95% certain of the accuracy here): 4.0.2, 4.1.1, 4.1.2, 4.3.1. There would have been nodes created with each version.</comment>
                    <comment id="12862389" author="jukkaz" created="Thu, 29 Apr 2010 21:19:39 +0100"  >Could you for example attach a system view export of the troublesome nodes and a copy of the custom_nodetypes.xml file from within the repository directory? You can blank out any sensitive data if needed. I&amp;#39;m especially interested in the exact node type information of the troublesome nodes.</comment>
                    <comment id="12862618" author="jukkaz" created="Fri, 30 Apr 2010 11:14:04 +0100"  >See also &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2170&quot; title=&quot;Remove PropDefId and NodeDefId&quot;&gt;&lt;strike&gt;JCR-2170&lt;/strike&gt;&lt;/a&gt; for related work. Perhaps we need to backport those changes to the 1.6 branch.</comment>
                    <comment id="12866355" author="jukkaz" created="Tue, 11 May 2010 22:43:15 +0100"  >I have now (as of revision 943301) backported/reimplemented most of the &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2170&quot; title=&quot;Remove PropDefId and NodeDefId&quot;&gt;&lt;strike&gt;JCR-2170&lt;/strike&gt;&lt;/a&gt; changes in the 1.6 branch. These changes should also solve this  issue. At least I was no longer able to reproduce the problem with the repository Paul sent me.&lt;br/&gt;
&lt;br/&gt;
Note that this revision includes a backward-compatible change in how item states are serialized, which makes the repository unreadable by earlier Jackrabbit 1.6.x versions. I&amp;#39;ll see if I can prevent this incompatibility as patch releases should be both backward- and forward-compatible with all releases from the same maintenance branch (e.g. in addition to normal upgrades, it should be OK to also switch back from 1.6.2 to 1.6.1).</comment>
                    <comment id="12866922" author="pjara" created="Thu, 13 May 2010 01:00:44 +0100"  >I just wanted to say THANK YOU! I will have a chance to look at this in more depth over the course of the next few days. But I didn&amp;#39;t want to wait too long before saying thanks. I really, personally appreciate how quickly you addressed this matter. I&amp;#39;ll be in touch over the next couple of days.&lt;br/&gt;
&lt;br/&gt;
Regards,&lt;br/&gt;
&lt;br/&gt;
-Paul&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
</comment>
                    <comment id="12867160" author="jukkaz" created="Thu, 13 May 2010 16:47:53 +0100"  >Preventing the forwards-compatibility problem (caused by the item definition identifiers no longer being serialized as a part of item states, see &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-2170&quot; title=&quot;Remove PropDefId and NodeDefId&quot;&gt;&lt;strike&gt;JCR-2170&lt;/strike&gt;&lt;/a&gt;) is somewhat complicated and would come with some performance overhead, so I&amp;#39;m resolving this as fixed as-is and adding a warning about this to the release notes.&lt;br/&gt;
&lt;br/&gt;
It would be great if someone other than me could also test the latest build from the 1.6 branch before we make the release. Nightly 1.6.2-SNAPSHOT builds are available from the snapshot repository at &lt;a href=&quot;https://repository.apache.org/content/groups/snapshots-group/&quot;&gt;https://repository.apache.org/content/groups/snapshots-group/&lt;/a&gt;.</comment>
                    <comment id="12867532" author="pjara" created="Fri, 14 May 2010 16:31:46 +0100"  >I have started testing on my end with the 1.6.2 snapshot from May 14. I am not done yet, but so far so good. I replaced the 1.6.1 JARs that came with a CMS I was using with the snapshot versions and have yet to see the problems we had with the previous version. I will keep you posted about my progress but will probably keep testing in a development environment into the middle of next week before giving it the thumbs up.</comment>
                    <comment id="12867537" author="jukkaz" created="Fri, 14 May 2010 16:48:25 +0100"  >Excellent, thanks!</comment>
                    <comment id="12871560" author="jukkaz" created="Wed, 26 May 2010 09:13:01 +0100"  >Have you encountered any problems with this fix? If not, I&amp;#39;m planning to finally cut the 1.6.2 release later this week.</comment>
                    <comment id="12872812" author="pjara" created="Fri, 28 May 2010 04:20:54 +0100"  >The original problem seems to be addressed which is good news. Another problem, which might not be related to this one, appears to have cropped up in its place however. Our CMS grinds to a halt and stops serving up requests. The problem seems to have started since I deployed the new JackRabbit JARs to the production servers. In the past couple of weeks, our servers have only been able to run for a few days at most before one of them just stops serving requests (Tomcat takes the request but never actually sends a response). Is there anything in those nightly 1.6.2-SNAPSHOTs that may have contributed to this problem? There doesn&amp;#39;t appear to be anything in the server logs that is helping me diagnose the problem. But when I go to shutdown Tomcat, I get a bunch of messages like this in the catalina.out:&lt;br/&gt;
&lt;br/&gt;
&amp;quot;INFO: Waiting for N instance(s) to be deallocated&amp;quot; where N is some large number like &amp;gt;100.&lt;br/&gt;
&lt;br/&gt;
I was notified tonight that our website was &amp;quot;down&amp;quot;. We have a couple of servers and each Tomcat instance had stopped serving requests. So on each server, I stopped Tomcat, deleted all the JackRabbit indexes for each workspace associated with our CMS, and restarted. Upon the restart on both servers, I got a slew of these messages:&lt;br/&gt;
&lt;br/&gt;
&amp;quot;A property claimed to start before zero, at -512! Resetting it to zero, and hoping for the best&amp;quot;&lt;br/&gt;
&lt;br/&gt;
However, I restarted again and everything seems back to normal. Do you think this fix and the problem I&amp;#39;m now seeing are related? Or is it just some bad luck that the problem seems to have begun around the time that we found a fix here?</comment>
                    <comment id="12872914" author="stefan@jira" created="Fri, 28 May 2010 11:06:16 +0100"  >@paul:&lt;br/&gt;
&lt;br/&gt;
google is your friend... ;)&lt;br/&gt;
&lt;br/&gt;
FWIW,&lt;br/&gt;
&lt;br/&gt;
&amp;gt; &amp;quot;INFO: Waiting for N instance(s) to be deallocated&amp;quot; where N is some large number like &amp;gt;100. &lt;br/&gt;
&lt;br/&gt;
this is a tomcat specific message. i don&amp;#39;t know whether it&amp;#39;s actually caused by a jackrabbit problem&lt;br/&gt;
in your case, but google returns lots of hits, e.g. &lt;br/&gt;
&lt;a href=&quot;http://markmail.org/message/6edcdicnknwdqjxc&quot;&gt;http://markmail.org/message/6edcdicnknwdqjxc&lt;/a&gt;&lt;br/&gt;
&lt;br/&gt;
&amp;gt; &amp;quot;A property claimed to start before zero, at -512! Resetting it to zero, and hoping for the best&amp;quot; &lt;br/&gt;
&lt;br/&gt;
&lt;a href=&quot;http://tinyurl.com/2w3n85f&quot;&gt;http://tinyurl.com/2w3n85f&lt;/a&gt; ;)</comment>
                    <comment id="12873146" author="pjara" created="Fri, 28 May 2010 21:48:52 +0100"  >Thanks Stefan. Yes I&amp;#39;ve Googled both of those error message before but I figured that it was worth mentioning both of them as they only appeared after the fixed JARs were in place. Unfortunately, the tomcat deallocation problem is not one that seems to have one solution. In general, the message appears to refer to servlets that are still running which would normally not be a JackRabbit induced problem. My question is, would there be any code in the specific fix for this problem that might actually induce this sort of problem with TomCat? I&amp;#39;m trying to isolate all of the variables that changed over the past two weeks on the production servers to see which change may have brought about this problem. There weren&amp;#39;t very many changes, so this particular JAR deployment stands out as something I should look at.</comment>
                    <comment id="13113485" author="gjoseph" created="Fri, 23 Sep 2011 15:40:25 +0100"  >Hi,&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m currently on a holiday and will return to the office on the 6th of October. Your message was not forwarded, and will be taken care of upon my return at the latest. In urgent cases, please contact &amp;lt;&lt;a href=&apos;mailto:info@magnolia-cms.com&apos;&gt;info@magnolia-cms.com&lt;/a&gt;&amp;gt;.&lt;br/&gt;
&lt;br/&gt;
-- &lt;br/&gt;
Kind Regards,&lt;br/&gt;
&lt;br/&gt;
Gr&amp;#xE9;gory Joseph&lt;br/&gt;
Magnolia International Ltd.&lt;br/&gt;
&lt;br/&gt;
----------------------------------------------------------------------&lt;br/&gt;
&lt;a href=&apos;mailto:gregory.joseph@magnolia-cms.com&apos;&gt;gregory.joseph@magnolia-cms.com&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.magnolia-cms.com&quot;&gt;http://www.magnolia-cms.com&lt;/a&gt;&lt;br/&gt;
Magnolia&amp;#xAE;  - Simple Enterprise Content Management&lt;br/&gt;
----------------------------------------------------------------------&lt;br/&gt;
&lt;br/&gt;
</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 11 Dec 2009 09:17:23 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>59502</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>189666</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>