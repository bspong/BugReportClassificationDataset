<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:34:18 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-788/JCR-788.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-788] Upgrade to Lucene 2.2</title>
                <link>https://issues.apache.org/jira/browse/JCR-788</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>Lucene 2.1 contains a number of useful enhancements, which could be benefical to jackrabbit:&lt;br/&gt;
&lt;br/&gt;
- less locking on index updates -&amp;gt; less IO calls&lt;br/&gt;
- introduces FieldSelector -&amp;gt; allows jackrabbit to only load required fields</description>
                <environment></environment>
            <key id="12364785">JCR-788</key>
            <summary>Upgrade to Lucene 2.2</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="jukkaz">Jukka Zitting</assignee>
                                <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Mar 2007 09:16:12 +0000</created>
                <updated>Tue, 15 Jan 2008 23:26:36 +0000</updated>
                    <resolved>Sat, 21 Jul 2007 00:09:23 +0100</resolved>
                                            <fixVersion>1.4</fixVersion>
                                <component>jackrabbit-core</component>
                <component>query</component>
                        <due></due>
                    <votes>3</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12484230" author="dbjohnson.e" created="Mon, 26 Mar 2007 22:07:24 +0100"  >I have upgraded my local version to Lucene 2.1&lt;br/&gt;
&lt;br/&gt;
I needed to change 2 files - the pom.xml of jackrabbit-core and org.apache.jackrabbit.core.query.lucene.PersistentIndex.java&lt;br/&gt;
&lt;br/&gt;
While all tests pass, I am not sure if my change to PersistentIndex is right - specifically I commented out the code pertaining to COMMIT_LOCK as this seems to have been removed or moved to another class in Lucene 2.1&lt;br/&gt;
&lt;br/&gt;
Is this worth a patch?  As Marcel stated, this appears to be a good upgrade, so I would like to get this in sooner rather than later.</comment>
                    <comment id="12484243" author="jukkaz" created="Mon, 26 Mar 2007 22:59:40 +0100"  >Please do share a patch with your changes. It&amp;#39;s always easier to judge a change if the actual code is available. BTW, would the modified class still work with Lucene 2.0? I also assume that Lucene 2.1 is compatible with indexes created with 2.0.&lt;br/&gt;
&lt;br/&gt;
I agree that we should try to keep up with Lucene upgrades, but on the other hand I would not want to force too frequent dependency changes on users. If the change works with Lucene 2.0, then existing users wouldn&amp;#39;t need to upgrade their dependencies. If not, then the upgrade procedure needs to be documented in the release notes.&lt;br/&gt;
&lt;br/&gt;
If there is no immediate demand for the upgrade, I would rather wait until Jackrabbit 1.3 is branched before doing this.</comment>
                    <comment id="12484250" author="dbjohnson.e" created="Mon, 26 Mar 2007 23:36:36 +0100"  >Patch file for upgrade to Lucene 2.1.0</comment>
                    <comment id="12484372" author="mreutegg" created="Tue, 27 Mar 2007 10:25:56 +0100"  >Lucene 2.1 can read index files created with previous releases, but will write new files in the 2.1 version. Once you upgrade to  2.1 you cannot go back anymore, unless you re-index the repository.&lt;br/&gt;
&lt;br/&gt;
Because lucene 2.1 is not yet available in a maven 2 repository and the change is only minor I would rather keep the 2.0 compile dependency in the pom. I suggest the following change:&lt;br/&gt;
&lt;br/&gt;
Index: PersistentIndex.java&lt;br/&gt;
===================================================================&lt;br/&gt;
--- PersistentIndex.java	(revision 520911)&lt;br/&gt;
+++ PersistentIndex.java	(working copy)&lt;br/&gt;
@@ -42,7 +42,7 @@&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private static final String WRITE_LOCK = IndexWriter.WRITE_LOCK_NAME;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/** Name of the commit lock file */&lt;br/&gt;
-    private static final String COMMIT_LOCK = IndexWriter.COMMIT_LOCK_NAME;&lt;br/&gt;
+    private static final String COMMIT_LOCK = &amp;quot;commit.lock&amp;quot;;&lt;br/&gt;
&amp;nbsp;&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;/** The name of this persistent index */&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;private final String name;&lt;br/&gt;
&lt;br/&gt;
This allows the sources to compile with either 2.0 or 2.1.&lt;br/&gt;
&lt;br/&gt;
I think it is actually possible to upgrade lucene without this change because the compiler puts the commit.lock literal into the PersistentIndex class file and therefore removes the dependency to the IndexWriter.COMMIT_LOCK_NAME field.</comment>
                    <comment id="12484800" author="mreutegg" created="Wed, 28 Mar 2007 11:35:47 +0100"  >Committed above mentioned patch in revision: 523265</comment>
                    <comment id="12486948" author="jukkaz" created="Thu, 5 Apr 2007 14:30:50 +0100"  >Tagging the actual POM dependency upgrade for Jackrabbit 1.4.</comment>
                    <comment id="12506470" author="jukkaz" created="Wed, 20 Jun 2007 10:40:12 +0100"  >Lucene 2.2 was just released with even more good stuff. The artifacts and proper POMs are also now up on the central Maven repository.&lt;br/&gt;
&lt;br/&gt;
Updated issue summary to upgrade to Lucene 2.2 instead of 2.1.</comment>
                    <comment id="12513388" author="fgiust" created="Tue, 17 Jul 2007 23:54:48 +0100"  >The attached patch upgrades the lucene dependency to 2.2.0 (pom update + just a few additional methods added in FilteredTermPositions).&lt;br/&gt;
Tests run fine after the patch, you should be able to apply this without problems.</comment>
                    <comment id="12514367" author="jukkaz" created="Sat, 21 Jul 2007 00:09:23 +0100"  >Excellent! Patch applied in revision 558194.</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12383393">JCR-1240</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12362019" name="lucene_2.2.0_patch.diff" size="1544" author="fgiust" created="Tue, 17 Jul 2007 23:54:48 +0100" />
                    <attachment id="12354265" name="patch.txt" size="2185" author="dbjohnson.e" created="Mon, 26 Mar 2007 23:36:36 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 26 Mar 2007 21:07:24 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142364</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279589</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>