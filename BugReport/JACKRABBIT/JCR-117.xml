<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:58:51 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-117/JCR-117.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-117] Test cases not fully initialized at first run</title>
                <link>https://issues.apache.org/jira/browse/JCR-117</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>It seems that some test cases in o.a.j.test.api.query and o.a.j.test.api do not properly initialized the test repository before running tests against it. The repository gets initialized by other test cases, and later runs of the troublesome tests report no errors.&lt;br/&gt;
&lt;br/&gt;
Thus the problem appears right after a fresh checkout and a tree cleanup. The command sequence below illustrates this problem. The error messages reported by the initial test runs are &amp;quot;Workspace does not contain test data at: /testdata/query&amp;quot; and &amp;quot;Workspace does not contain test data at: /testdata&amp;quot;.&lt;br/&gt;
&lt;br/&gt;
I tried tracing the cause of this problem, but couldn&amp;#39;t find it easily as I&amp;#39;m not yet too familiar with the test setup.&lt;br/&gt;
&lt;br/&gt;
$ svn co&lt;br/&gt;
$ maven test&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.query.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 77, Failures: 30, Errors: 0, Time elapsed: 5,333 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] [ERROR] TEST org.apache.jackrabbit.test.api.query.TestAll FAILED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 534, Failures: 181, Errors: 0, Time elapsed: 16,105 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] [ERROR] TEST org.apache.jackrabbit.test.api.TestAll FAILED&lt;br/&gt;
&lt;br/&gt;
$ maven test&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.query.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 77, Failures: 0, Errors: 0, Time elapsed: 5,887 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 534, Failures: 0, Errors: 0, Time elapsed: 18,427 sec&lt;br/&gt;
&lt;br/&gt;
$ maven clean&lt;br/&gt;
$ maven test&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.query.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 77, Failures: 30, Errors: 0, Time elapsed: 13,185 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] [ERROR] TEST org.apache.jackrabbit.test.api.query.TestAll FAILED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 534, Failures: 181, Errors: 0, Time elapsed: 40,42 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] [ERROR] TEST org.apache.jackrabbit.test.api.TestAll FAILED&lt;br/&gt;
&lt;br/&gt;
$ maven test&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.query.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 77, Failures: 0, Errors: 0, Time elapsed: 5,942 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 534, Failures: 0, Errors: 0, Time elapsed: 17,797 sec&lt;br/&gt;
</description>
                <environment></environment>
            <key id="32039">JCR-117</key>
            <summary>Test cases not fully initialized at first run</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jukkaz">Jukka Zitting</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Apr 2005 18:28:30 +0100</created>
                <updated>Tue, 12 Jul 2005 03:41:51 +0100</updated>
                    <resolved>Tue, 12 Jul 2005 01:23:50 +0100</resolved>
                                                            <component>test</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="63887" author="jukkaz" created="Wed, 27 Apr 2005 18:35:38 +0100"  >Updated the correct test output for the first two test runs. (fixing a copy-paste mistake)</comment>
                    <comment id="64745" author="mreutegg" created="Tue, 10 May 2005 00:45:47 +0100"  >That is strange. Works fine on my machine.&lt;br/&gt;
&lt;br/&gt;
When I run the tests, the sequence of test suites is:&lt;br/&gt;
&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.config.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0.591 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.nodetype.xml.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 32, Failures: 0, Errors: 0, Time elapsed: 0.851 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.observation.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 2.614 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.query.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 63, Failures: 0, Errors: 0, Time elapsed: 3.576 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.state.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 0.852 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 13, Failures: 0, Errors: 0, Time elapsed: 1.072 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.init.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 1.442 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.lock.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 19, Failures: 0, Errors: 0, Time elapsed: 1.983 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.nodetype.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 99, Failures: 0, Errors: 0, Time elapsed: 1.743 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.observation.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 40, Failures: 0, Errors: 0, Time elapsed: 6.711 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.query.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 77, Failures: 0, Errors: 0, Time elapsed: 3.195 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.TestAll&lt;br/&gt;
&lt;br/&gt;
.... more tests ....&lt;br/&gt;
&lt;br/&gt;
In order to successfully run the read-only test cases, the o.a.j.init.TestAll test suite must run before any o.a.j.test.api tests are run.&lt;br/&gt;
&lt;br/&gt;
Maybe this is an platform specific issue, as we do not explicitly specify the sequence. Can you please check the sequence of test suites on your checkout?</comment>
                    <comment id="64752" author="jukkaz" created="Tue, 10 May 2005 02:01:41 +0100"  >My full test output from a fresh svn checkout is:&lt;br/&gt;
&lt;br/&gt;
test:test:&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.query.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 77, Failures: 30, Errors: 0, Time elapsed: 5,776 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] [ERROR] TEST org.apache.jackrabbit.test.api.query.TestAll FAILED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.nodetype.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 99, Failures: 0, Errors: 0, Time elapsed: 2,702 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.version.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 214, Failures: 0, Errors: 0, Time elapsed: 58,748 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.util.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 0, Failures: 0, Errors: 0, Time elapsed: 0,457 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.lock.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 19, Failures: 0, Errors: 0, Time elapsed: 4,136 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.observation.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 40, Failures: 0, Errors: 0, Time elapsed: 9 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.test.api.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 583, Failures: 184, Errors: 0, Time elapsed: 30,213 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] [ERROR] TEST org.apache.jackrabbit.test.api.TestAll FAILED&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.init.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 3,529 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.query.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 63, Failures: 0, Errors: 0, Time elapsed: 7,55 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.nodetype.xml.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 32, Failures: 0, Errors: 0, Time elapsed: 1,551 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.state.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 2,681 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.config.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 0,801 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.observation.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 3,123 sec&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Running org.apache.jackrabbit.core.TestAll&lt;br/&gt;
&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;[junit] Tests run: 13, Failures: 0, Errors: 0, Time elapsed: 3,236 sec&lt;br/&gt;
&lt;br/&gt;
Produced using Maven 1.0.2 on JDK 1.4.2 on Linux (Fedora Core 3).&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll see if I can trace where the order of the test cases is determined.</comment>
                    <comment id="64753" author="jukkaz" created="Tue, 10 May 2005 02:18:08 +0100"  >It seems that the Maven test:test goal is implemented using the Ant JUnit task with a FileSet containing all files that match the unitTest includes defined in project.xml.&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;m not an expert on how Ant FileSets work under the hood, but I believe that the order of the unit tests is determined either by a HashSet somewhere along the line or the order in which the underlying filesystem returns the file names.&lt;br/&gt;
&lt;br/&gt;
Based on the fact that your test cases seem to be executed in alphabetical order, I&amp;#39;d suspect that the problem is in the underlying filesystem (on Linux you need to specifically sort file names if you want them ordered).&lt;br/&gt;
&lt;br/&gt;
I&amp;#39;ll check if I could instruct Maven to process the tests in some specific order.</comment>
                    <comment id="64756" author="jukkaz" created="Tue, 10 May 2005 02:34:56 +0100"  >No hope. Even specifying the test cases one by one in unitTest/includes does not help.&lt;br/&gt;
&lt;br/&gt;
Would it be possible to refactor the initialization code so that either all API tests check for initialization in setUp() or a separate Maven test:test preGoal performs the initialization before any of the test cases are run?</comment>
                    <comment id="12315489" author="mreutegg" created="Tue, 12 Jul 2005 01:23:50 +0100"  >Moved init test cases to a preGoal.&lt;br/&gt;
&lt;br/&gt;
Fixed in svn revision: 210145</comment>
                    <comment id="12315500" author="jukkaz" created="Tue, 12 Jul 2005 03:41:51 +0100"  >Brilliant, thanks a lot for the simple and effective fix!</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 9 May 2005 23:45:47 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>141934</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279274</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>