<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Sat Jul 27 05:33:49 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/JCR-1251/JCR-1251.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[JCR-1251] DescendantSelfAxisQuery creates too many object instances</title>
                <link>https://issues.apache.org/jira/browse/JCR-1251</link>
                <project id="10591" key="JCR">Jackrabbit Content Repository</project>
                        <description>In DescendantSelfAxisQuery.DescendantSelfAxisScorer.isValid() there is an ArrayList and an Integer instance created on every call. Since this method gets called really often during queries the object creation/gc affects performance.</description>
                <environment></environment>
            <key id="12383712">JCR-1251</key>
            <summary>DescendantSelfAxisQuery creates too many object instances</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="ckiehl">Christoph Kiehl</assignee>
                                <reporter username="ckiehl">Christoph Kiehl</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Dec 2007 14:11:40 +0000</created>
                <updated>Tue, 15 Jan 2008 23:27:07 +0000</updated>
                    <resolved>Wed, 5 Dec 2007 22:51:45 +0000</resolved>
                                            <fixVersion>1.4</fixVersion>
                                <component>jackrabbit-core</component>
                <component>query</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12547472" author="ckiehl" created="Sat, 1 Dec 2007 14:19:14 +0000"  >I&amp;#39;m getting a performance boost of about 40% on big indexes (about 1000000 nodes) using plain arrays instead of ArrayLists because this avoids a lot of object creation. If no one objects I&amp;#39;m going to commit this.</comment>
                    <comment id="12547613" author="aschrijvers" created="Sun, 2 Dec 2007 11:25:22 +0000"  >40% !! That is quite some performance gain, very nice. I did see quite some CPU time in array list calls during DescendantSelfAxis tests (11% or something I saw was spend in the init() only). &lt;br/&gt;
&lt;br/&gt;
+1 obviously!</comment>
                    <comment id="12547618" author="aschrijvers" created="Sun, 2 Dec 2007 12:54:38 +0000"  >By the way: do not think you should commit the patch like it is now : Arrays.copyOf is not supported for java &amp;lt; 1.6. Use System.arraycopy.&lt;br/&gt;
&lt;br/&gt;
Furthermore, I have tested as well, and performance gain is indeed very large! Nice improvement!</comment>
                    <comment id="12547620" author="ckiehl" created="Sun, 2 Dec 2007 13:07:21 +0000"  >Ah, you are certainly right. I&amp;#39;ll use System.arraycopy instead. Thanks for the pointer!</comment>
                    <comment id="12548650" author="mreutegg" created="Wed, 5 Dec 2007 12:19:04 +0000"  >+1</comment>
                    <comment id="12548856" author="ckiehl" created="Wed, 5 Dec 2007 22:51:45 +0000"  >Committed in rev. 601562</comment>
                    <comment id="12549403" author="mreutegg" created="Fri, 7 Dec 2007 13:30:30 +0000"  >Hmm, I think we can even get rid of initializing the array on each validation. See patch.&lt;br/&gt;
&lt;br/&gt;
btw. I also removed unused import statements.</comment>
                    <comment id="12549493" author="ckiehl" created="Fri, 7 Dec 2007 17:58:38 +0000"  >Well spotted! I observed another gain of about 7% on my machine with about 100.000 documents using your patch. So definitely +1</comment>
                    <comment id="12550010" author="mreutegg" created="Mon, 10 Dec 2007 10:48:25 +0000"  >Committed the patch in revision: 602856</comment>
                </comments>
                    <attachments>
                    <attachment id="12370751" name="DescendantSelfAxisQuery-patch.txt" size="2156" author="ckiehl" created="Sat, 1 Dec 2007 14:19:14 +0000" />
                    <attachment id="12371226" name="JCR-1251.patch" size="1259" author="mreutegg" created="Fri, 7 Dec 2007 13:30:30 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 2 Dec 2007 11:25:22 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>142601</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>279792</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>