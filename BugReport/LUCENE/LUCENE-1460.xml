<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:34:13 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1460/LUCENE-1460.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1460] Change all contrib TokenStreams/Filters to use the new TokenStream API</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1460</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Now that we have the new TokenStream API (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1422&quot; title=&quot;New TokenStream API&quot;&gt;&lt;del&gt;LUCENE-1422&lt;/del&gt;&lt;/a&gt;) we should change all contrib modules to use it.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12408785">LUCENE-1460</key>
            <summary>Change all contrib TokenStreams/Filters to use the new TokenStream API</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="michaelbusch">Michael Busch</assignee>
                                <reporter username="michaelbusch">Michael Busch</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Nov 2008 23:50:39 +0000</created>
                <updated>Thu, 2 May 2013 03:29:26 +0100</updated>
                    <resolved>Sat, 1 Aug 2009 23:58:07 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12712295" author="rcmuir" created="Fri, 22 May 2009 23:28:19 +0100"  >&lt;p&gt;is anyone working on this? I have some functionality that needs some of these to be new-api so i have at least half of them done.&lt;/p&gt;</comment>
                    <comment id="12718280" author="markrmiller@gmail.com" created="Thu, 11 Jun 2009 03:23:25 +0100"  >&lt;p&gt;wanna post what you have Robert? perhaps then someone will finish off the other half.&lt;/p&gt;</comment>
                    <comment id="12718293" author="rcmuir" created="Thu, 11 Jun 2009 05:12:44 +0100"  >&lt;p&gt;only partial solution...&lt;br/&gt;
some of the analyzers don&apos;t have any tests, so I think thats a bit more work!&lt;br/&gt;
the AsciiFoldingFilter fix is in here too, i know its not in contrib but it doesnt support new API either.&lt;/p&gt;
</comment>
                    <comment id="12718342" author="simonw" created="Thu, 11 Jun 2009 09:01:45 +0100"  >&lt;p&gt;Robert, would you divide your patch into contrib/core. That would make it easier to help out and eventually commit it.&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                    <comment id="12718350" author="rcmuir" created="Thu, 11 Jun 2009 09:28:37 +0100"  >&lt;p&gt;split patch: core/contrib&lt;/p&gt;</comment>
                    <comment id="12730865" author="thetaphi" created="Tue, 14 Jul 2009 15:20:04 +0100"  >&lt;p&gt;I added the ASCIIFoldingFilter patch into &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1693&quot; title=&quot;AttributeSource/TokenStream API improvements&quot;&gt;&lt;del&gt;LUCENE-1693&lt;/del&gt;&lt;/a&gt; (patch comes shortly). So this part is finished.&lt;/p&gt;</comment>
                    <comment id="12733937" author="michaelbusch" created="Wed, 22 Jul 2009 02:21:23 +0100"  >&lt;p&gt;Now that &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1693&quot; title=&quot;AttributeSource/TokenStream API improvements&quot;&gt;&lt;del&gt;LUCENE-1693&lt;/del&gt;&lt;/a&gt; is almost committed, we can tackle this one.&lt;/p&gt;

&lt;p&gt;We need to keep these points in mind that Uwe posted on 1693:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;rewrite and replace next(Token)/next() implementations by new API&lt;/li&gt;
	&lt;li&gt;if the class is final, no next(Token)/next() methods needed (must be removed!!!)&lt;/li&gt;
	&lt;li&gt;if the class is non-final add the following methods to the class:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      /** @deprecated Will be removed in Lucene 3.0. This method is &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt;, as it should
       * not be overridden. Delegates to the backwards compatibility layer. */
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Token next(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Token reusableToken) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; java.io.IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.next(reusableToken);
      }

      /** @deprecated Will be removed in Lucene 3.0. This method is &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt;, as it should
       * not be overridden. Delegates to the backwards compatibility layer. */
      &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Token next() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; java.io.IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.next();
      }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;      Also the incrementToken() method must be final in this case.&lt;/p&gt;</comment>
                    <comment id="12733949" author="rcmuir" created="Wed, 22 Jul 2009 02:49:19 +0100"  >&lt;p&gt;Michael, I think we should try to coordinate timing on this with &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1728&quot; title=&quot;Move SmartChineseAnalyzer &amp;amp; resources to own contrib project&quot;&gt;&lt;del&gt;LUCENE-1728&lt;/del&gt;&lt;/a&gt;, where we are trying to reorganize contrib/analyzers...&lt;/p&gt;</comment>
                    <comment id="12733987" author="michaelbusch" created="Wed, 22 Jul 2009 06:02:20 +0100"  >&lt;blockquote&gt;
&lt;p&gt;Michael, I think we should try to coordinate timing on this with &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1728&quot; title=&quot;Move SmartChineseAnalyzer &amp;amp; resources to own contrib project&quot;&gt;&lt;del&gt;LUCENE-1728&lt;/del&gt;&lt;/a&gt;, where we are trying to reorganize contrib/analyzers... &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It seems like 1728 is ready to commit? Simon said on java-dev he will try to finish it by end of this week?&lt;/p&gt;

&lt;p&gt;In that case we should commit 1728 first. But we can finish the patch here I think... after 1728 is committed we just do a find&amp;amp;replace on the patch and replace &quot;contrib/analyzers/&quot; with &quot;contrib/analyzers/common/&quot; ?&lt;/p&gt;</comment>
                    <comment id="12734016" author="simonw" created="Wed, 22 Jul 2009 07:46:59 +0100"  >&lt;blockquote&gt;&lt;p&gt;It seems like 1728 is ready to commit? Simon said on java-dev he will try to finish it by end of this week?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That is correct.  I can commit it today I think. Will make this issue dependent on 1728 and finish it by the end of today.&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="12734024" author="michaelbusch" created="Wed, 22 Jul 2009 08:22:43 +0100"  >&lt;p&gt;Cool! Thanks, Simon.&lt;/p&gt;</comment>
                    <comment id="12734097" author="rcmuir" created="Wed, 22 Jul 2009 13:44:08 +0100"  >&lt;p&gt;Michael, after 1728 I can take another look at this. the reason is, that I added some tests to these analyzers and found a bug in the Thai offsets.&lt;/p&gt;

&lt;p&gt;When i submitted this, i only duplicated the existing behavior, but I don&apos;t want to reintroduce the bug into incrementToken()&lt;/p&gt;</comment>
                    <comment id="12734697" author="simonw" created="Thu, 23 Jul 2009 19:46:15 +0100"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1728&quot; title=&quot;Move SmartChineseAnalyzer &amp;amp; resources to own contrib project&quot;&gt;&lt;del&gt;LUCENE-1728&lt;/del&gt;&lt;/a&gt; is committed. You can go ahead on this.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                    <comment id="12734737" author="rcmuir" created="Thu, 23 Jul 2009 20:19:58 +0100"  >&lt;p&gt;I&apos;ll work on updating the patch.&lt;/p&gt;

&lt;p&gt;Question: instead of converting the tests to new api, would it be more beneficial to test both? testNewAPI() / testOldAPI() &lt;/p&gt;</comment>
                    <comment id="12734775" author="thetaphi" created="Thu, 23 Jul 2009 21:44:34 +0100"  >&lt;blockquote&gt;&lt;p&gt;Question: instead of converting the tests to new api, would it be more beneficial to test both? testNewAPI() / testOldAPI() &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No need to do this. The correct backwards-compatibility of the new API is checked separately by the extra test in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1693&quot; title=&quot;AttributeSource/TokenStream API improvements&quot;&gt;&lt;del&gt;LUCENE-1693&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It is enough if you remove all next() methods, add incrementToken() and make the above mentioned changes to make the token streams final where possible (see the comment of Michael Busch above &amp;#8211; which is the &quot;howto&quot; for the conversion).&lt;/p&gt;

&lt;p&gt;The testy should only test the new API, but until they are also converted, the old tests should also still work (because of the backwards-compatibility layer). Be sure to apply &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1693&quot; title=&quot;AttributeSource/TokenStream API improvements&quot;&gt;&lt;del&gt;LUCENE-1693&lt;/del&gt;&lt;/a&gt; which does not change anything in contrib before starting to create a patch to have the newest API. Hopefully Michael has committed 1693 tomorrow.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1460&quot; title=&quot;Change all contrib TokenStreams/Filters to use the new TokenStream API&quot;&gt;&lt;del&gt;LUCENE-1460&lt;/del&gt;&lt;/a&gt;_core.txt is already in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1693&quot; title=&quot;AttributeSource/TokenStream API improvements&quot;&gt;&lt;del&gt;LUCENE-1693&lt;/del&gt;&lt;/a&gt; as it is part of core token streams.&lt;/p&gt;</comment>
                    <comment id="12734782" author="rcmuir" created="Thu, 23 Jul 2009 21:57:48 +0100"  >&lt;p&gt;Uwe, thanks!&lt;/p&gt;

&lt;p&gt;Yes, I will follow your guidelines that Michael re-posted here.&lt;/p&gt;

&lt;p&gt;additionally, some tokenstreams are not final in contrib, but have not been put into a release (example: arabic, my fault)&lt;br/&gt;
Any objection to making these final, so I can just remove the old api instead of declaring final, deprecated next() methods?&lt;/p&gt;</comment>
                    <comment id="12734784" author="thetaphi" created="Thu, 23 Jul 2009 22:09:41 +0100"  >&lt;p&gt;no, make them final. the same happened with asciifoldingfilter, was never released, so can be changed.&lt;/p&gt;

&lt;p&gt;In general, all tokenstreams should be final or have final impls (see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1753&quot; title=&quot;Make not yet final core/contrib TokenStream/Filter implementations final&quot;&gt;&lt;del&gt;LUCENE-1753&lt;/del&gt;&lt;/a&gt; for explanation). The only real example of a non-final one is CharTokenizer, which is abstract but the tokenization impls are final &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12734787" author="thetaphi" created="Thu, 23 Jul 2009 22:16:04 +0100"  >&lt;p&gt;Make next() final is only the last chance to prevent users from overriding never-called next-methods, if the class was not final before. This makes the backwards-break as small as possible (by only making these methods final). See the discussion in 1693.&lt;/p&gt;</comment>
                    <comment id="12734853" author="rcmuir" created="Fri, 24 Jul 2009 01:58:31 +0100"  >&lt;p&gt;i updated the previous patch to the current reality, still incomplete.&lt;/p&gt;
</comment>
                    <comment id="12734921" author="rcmuir" created="Fri, 24 Jul 2009 07:34:01 +0100"  >&lt;p&gt;some more done (the rest of the various language analyzers at least).&lt;/p&gt;</comment>
                    <comment id="12734923" author="rcmuir" created="Fri, 24 Jul 2009 07:42:10 +0100"  >&lt;p&gt;i have visitors coming in town, so if you feel like punishing yourself, just let me know so we don&apos;t duplicate efforts. &lt;br/&gt;
I promise I left all the fun ones still to be converted.&lt;/p&gt;</comment>
                    <comment id="12734991" author="michaelbusch" created="Fri, 24 Jul 2009 10:03:01 +0100"  >&lt;blockquote&gt;
&lt;p&gt;i have visitors coming in town, so if you feel like punishing yourself, just let me know so we don&apos;t duplicate efforts.&lt;br/&gt;
I promise I left all the fun ones still to be converted. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yay I&apos;m excited!&lt;/p&gt;

&lt;p&gt;I think when these patches are committed I don&apos;t want to hear the word &quot;TokenStream&quot; for a while... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I can work on this Friday and during the weekend. Let me know which ones you&apos;re gonna work on and which ones I should take.&lt;/p&gt;

&lt;p&gt;Btw: Thanks for all your work here, Robert!!&lt;/p&gt;</comment>
                    <comment id="12735040" author="rcmuir" created="Fri, 24 Jul 2009 13:16:02 +0100"  >&lt;p&gt;Michael, I&apos;m not gonna be able to work on this at all until monday at least, that&apos;s what I am saying.&lt;br/&gt;
So I will check with you Monday and see how things are.&lt;/p&gt;</comment>
                    <comment id="12735042" author="rcmuir" created="Fri, 24 Jul 2009 13:46:25 +0100"  >&lt;p&gt;Michael, oh also, as Uwe mentioned, I applied &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1693&quot; title=&quot;AttributeSource/TokenStream API improvements&quot;&gt;&lt;del&gt;LUCENE-1693&lt;/del&gt;&lt;/a&gt; before creating this patch.&lt;/p&gt;

&lt;p&gt;If you do this all the tests will pass, otherwise I am not so sure!&lt;/p&gt;</comment>
                    <comment id="12735203" author="rcmuir" created="Sat, 25 Jul 2009 00:26:29 +0100"  >&lt;p&gt;Michael/anyone else, if you apply the patch (it should go cleanly now that 1693 is committed), then the easiest way to see what remains to be done is to declare TokenStream.incrementToken abstract. &lt;/p&gt;

&lt;p&gt;This still causes my eclipse to light up like a christmas tree so there is a lot to do &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12735208" author="michaelbusch" created="Sat, 25 Jul 2009 00:44:13 +0100"  >&lt;p&gt;Thanks, Robert!&lt;/p&gt;

&lt;p&gt;I&apos;m currently working on &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1448&quot; title=&quot;add getFinalOffset() to TokenStream&quot;&gt;&lt;del&gt;LUCENE-1448&lt;/del&gt;&lt;/a&gt;, will finish that tonight.&lt;br/&gt;
Tomorrow and/or Sunday I&apos;ll work on this one.&lt;/p&gt;</comment>
                    <comment id="12735244" author="michaelbusch" created="Sat, 25 Jul 2009 08:34:32 +0100"  >&lt;p&gt;I converted some more contribs...&lt;/p&gt;</comment>
                    <comment id="12735258" author="michaelbusch" created="Sat, 25 Jul 2009 11:07:21 +0100"  >&lt;p&gt;More progress... &lt;br/&gt;
ngram was a bit tricky. But I think it is much more efficiently implemented now. It used to clone every token it returns. Now it only clones the term that it receives from the input stream.&lt;/p&gt;

&lt;p&gt;Would be good if someone could take a look at the ngram changes... well, the testcases pass.&lt;/p&gt;</comment>
                    <comment id="12735313" author="michaelbusch" created="Sat, 25 Jul 2009 20:16:01 +0100"  >&lt;p&gt;Btw: I&apos;m taking a tokenstream break today... so if anyone feels the sudden urge to convert some of the remaining streams: don&apos;t hesitate - it won&apos;t conflict with my work, the patch I posted late last night is still current.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to continue tomorrow.&lt;/p&gt;</comment>
                    <comment id="12735327" author="rcmuir" created="Sat, 25 Jul 2009 23:45:53 +0100"  >&lt;p&gt;Michael, looks like you got a ton done. I&apos;ll take a look and see late sunday/monday at what you did with ngram for curiousity at least.&lt;/p&gt;

&lt;p&gt;if you get a moment maybe someone could review what I did with Thai, I didn&apos;t look to hard to see if save/restore state was worse than the previous cloning... &lt;/p&gt;

&lt;p&gt;thanks for tackling the tougher ones here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12735363" author="michaelbusch" created="Sun, 26 Jul 2009 09:42:10 +0100"  >&lt;p&gt;Some more progress - mostly in contrib/memory.&lt;/p&gt;</comment>
                    <comment id="12735444" author="rcmuir" created="Mon, 27 Jul 2009 02:25:40 +0100"  >&lt;p&gt;Michael, I looked at your patch. &lt;/p&gt;

&lt;p&gt;What do you think about the remaining ones? should they be left as is for now?&lt;br/&gt;
or do you think some of these should still expose Token (i.e. in their public/protected methods) but just as back compat/convenience and work w/ the new api behind the scenes?&lt;/p&gt;</comment>
                    <comment id="12735451" author="rcmuir" created="Mon, 27 Jul 2009 03:55:23 +0100"  >&lt;p&gt;with analyzers/compound&lt;/p&gt;</comment>
                    <comment id="12736445" author="michaelbusch" created="Wed, 29 Jul 2009 05:58:37 +0100"  >&lt;blockquote&gt;
&lt;p&gt;with analyzers/compound &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Cool. Thanks for all your work here! &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;if you get a moment maybe someone could review what I did with Thai&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll review it before we commit this.&lt;/p&gt;</comment>
                    <comment id="12736634" author="rcmuir" created="Wed, 29 Jul 2009 14:53:17 +0100"  >&lt;p&gt;Michael, sorry to leave it incomplete, I think I am not the best for the remaining ones.&lt;/p&gt;

&lt;p&gt;For example I am a little intimidated by things such as this note in ShingleMatrix: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  * This method exists in order to avoid reursive calls to the method
  * as the complexity of a fairlt small matrix then easily would require
  * a gigabyte sized stack per thread.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12737414" author="michaelbusch" created="Fri, 31 Jul 2009 04:57:58 +0100"  >&lt;p&gt;I wonder if we should just deprecate PrefixAwareTokenFilter and PrefixAndSuffixAwareTokenFilter. I don&apos;t really understand what they&apos;re supposed to be used for, and I find the implementation a bit strange.&lt;/p&gt;

&lt;p&gt;I don&apos;t think it&apos;s possible to convert them in a backwards-compatible way anyways, and writing a replacement seems not really worthwhile - or does someone use these?&lt;/p&gt;</comment>
                    <comment id="12737757" author="michaelbusch" created="Fri, 31 Jul 2009 23:47:01 +0100"  >&lt;blockquote&gt;
&lt;p&gt;For example I am a little intimidated by things such as this note in ShingleMatrix:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Same here. The shingle ones are the only remaining ones... I&apos;ll try, but I don&apos;t know the code at all. They do a lot of caching and stuff - so probably the hardest to convert.&lt;/p&gt;
</comment>
                    <comment id="12737814" author="rcmuir" created="Sat, 1 Aug 2009 03:21:20 +0100"  >&lt;blockquote&gt;
&lt;p&gt;so probably the hardest to convert.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I was thinking, there are varying degrees of conversion. &lt;br/&gt;
I think w/ the new api you could reduce cloning and really optimize these, or the other extreme you are almost merely pushing the back compat logic up to that level... kinda like my compound hack.&lt;br/&gt;
(i tried the latter and was unsuccessful even doing that for the shingles).&lt;/p&gt;</comment>
                    <comment id="12737952" author="michaelbusch" created="Sat, 1 Aug 2009 21:44:19 +0100"  >&lt;p&gt;I&apos;ll commit this current patch soon and then make a separate patch for the shingle filters.&lt;/p&gt;</comment>
                    <comment id="12737962" author="michaelbusch" created="Sat, 1 Aug 2009 23:37:02 +0100"  >&lt;p&gt;Latest patch that converts all streams, except the single ones.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this soon.&lt;/p&gt;</comment>
                    <comment id="12737964" author="michaelbusch" created="Sat, 1 Aug 2009 23:58:07 +0100"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                    <comment id="12737965" author="michaelbusch" created="Sun, 2 Aug 2009 00:00:01 +0100"  >&lt;p&gt;Robert, thank you for all your help here!!!&lt;/p&gt;</comment>
                    <comment id="12738019" author="thetaphi" created="Sun, 2 Aug 2009 09:37:47 +0100"  >&lt;p&gt;You two guys are the best, great work! I had no time to completely review it, but I am happy that the new TokenStream API seems so successful &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                <outwardlinks description="blocks">
                            <issuelink>
            <issuekey id="12431415">LUCENE-1759</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                        <issuelinktype id="12310010">
                <name>Incorporates</name>
                                <outwardlinks description="incorporates">
                            <issuelink>
            <issuekey id="12427999">LUCENE-1695</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12428012">LUCENE-1697</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12406373">LUCENE-1422</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                <outwardlinks description="depends upon">
                            <issuelink>
            <issuekey id="12427984">LUCENE-1693</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12414406" name="LUCENE-1460_contrib_partial.txt" size="120330" author="rcmuir" created="Fri, 24 Jul 2009 07:34:01 +0100" />
                    <attachment id="12414393" name="LUCENE-1460_contrib_partial.txt" size="73621" author="rcmuir" created="Fri, 24 Jul 2009 01:58:31 +0100" />
                    <attachment id="12410367" name="LUCENE-1460_contrib_partial.txt" size="48289" author="rcmuir" created="Thu, 11 Jun 2009 09:28:37 +0100" />
                    <attachment id="12410366" name="LUCENE-1460_core.txt" size="11897" author="rcmuir" created="Thu, 11 Jun 2009 09:28:37 +0100" />
                    <attachment id="12410358" name="LUCENE-1460_partial.txt" size="59411" author="rcmuir" created="Thu, 11 Jun 2009 05:12:44 +0100" />
                    <attachment id="12415252" name="lucene-1460.patch" size="274751" author="michaelbusch" created="Sat, 1 Aug 2009 23:37:02 +0100" />
                    <attachment id="12414544" name="lucene-1460.patch" size="265105" author="michaelbusch" created="Sun, 26 Jul 2009 09:42:10 +0100" />
                    <attachment id="12414509" name="lucene-1460.patch" size="249563" author="michaelbusch" created="Sat, 25 Jul 2009 11:07:21 +0100" />
                    <attachment id="12414503" name="lucene-1460.patch" size="195185" author="michaelbusch" created="Sat, 25 Jul 2009 08:34:32 +0100" />
                    <attachment id="12414576" name="LUCENE-1460.patch" size="273445" author="rcmuir" created="Mon, 27 Jul 2009 03:55:23 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 22 May 2009 22:28:19 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12291</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26267</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>