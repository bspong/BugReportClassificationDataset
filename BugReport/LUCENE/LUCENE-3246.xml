<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:26:29 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3246/LUCENE-3246.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3246] Invert IR.getDelDocs -&gt; IR.getLiveDocs</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3246</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Spinoff from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1536&quot; title=&quot;if a filter can support random access API, we should use it&quot;&gt;&lt;del&gt;LUCENE-1536&lt;/del&gt;&lt;/a&gt;, where we need to fix the low level filtering&lt;br/&gt;
we do for deleted docs to &quot;match&quot; Filters (ie, a set bit means the doc&lt;br/&gt;
is accepted) so that filters can be pushed all the way down to the&lt;br/&gt;
enums when possible/appropriate.&lt;/p&gt;

&lt;p&gt;This change also inverts the meaning first arg to&lt;br/&gt;
TermsEnum.docs/AndPositions (renames from skipDocs to liveDocs).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12511656">LUCENE-3246</key>
            <summary>Invert IR.getDelDocs -&gt; IR.getLiveDocs</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jun 2011 16:51:26 +0100</created>
                <updated>Fri, 10 May 2013 11:44:00 +0100</updated>
                    <resolved>Wed, 6 Jul 2011 14:54:44 +0100</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13055614" author="mikemccand" created="Mon, 27 Jun 2011 17:01:12 +0100"  >&lt;p&gt;Initial patch, pulled out of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1536&quot; title=&quot;if a filter can support random access API, we should use it&quot;&gt;&lt;del&gt;LUCENE-1536&lt;/del&gt;&lt;/a&gt;, plus 1) renamed IR.getNotDeletedDocs to IR.getLiveDocs, and 2) fixed IR to force subclasses to override this (removing getDeletedDocs).&lt;/p&gt;

&lt;p&gt;I think this is close, but the one thing remaining is to fix the IR impls to &quot;properly&quot; invert their del docs (now they create a NotDocs wrapper around their current bitsets).&lt;/p&gt;</comment>
                    <comment id="13055680" author="thetaphi" created="Mon, 27 Jun 2011 18:40:33 +0100"  >&lt;p&gt;Hi Mike,&lt;/p&gt;

&lt;p&gt;some work for you: I removed the nocommits in both contrib IndexSplitters. Now only NotBits usage in core is left over, right?&lt;/p&gt;</comment>
                    <comment id="13055683" author="mikemccand" created="Mon, 27 Jun 2011 18:47:24 +0100"  >&lt;p&gt;Awesome, thanks Uwe!  I&apos;ll work on SR cutting over to live docs on disk...&lt;/p&gt;</comment>
                    <comment id="13057942" author="mikemccand" created="Thu, 30 Jun 2011 18:32:52 +0100"  >&lt;p&gt;Patch.  I think it&apos;s ready!&lt;/p&gt;</comment>
                    <comment id="13057979" author="thetaphi" created="Thu, 30 Jun 2011 19:42:49 +0100"  >&lt;p&gt;Hi Mike,&lt;br/&gt;
As we have now both variants to read/write BitVectors, would it be not a good idea to automatically use the old encoding for liveDocs, if more than 50% of all bits are unset? This would save disk space if a segments has more deletetions than live docs. Not sure if this can easily be implemented and is worth the complexity (that we already have because of both versions)?&lt;/p&gt;

&lt;p&gt;The patch looks fine!&lt;/p&gt;</comment>
                    <comment id="13058107" author="mikemccand" created="Thu, 30 Jun 2011 23:24:10 +0100"  >&lt;blockquote&gt;&lt;p&gt;As we have now both variants to read/write BitVectors, would it be not a good idea to automatically use the old encoding for liveDocs, if more than 50% of all bits are unset? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That seems like a good idea?  Ie, handle both sparse set and sparse unset compactly?  Though it should be unusual that you have so many deletes against a segment (esp. because TMP now targets such segs more aggressively).&lt;/p&gt;

&lt;p&gt;We should do this under a new issue (the old code also didn&apos;t handle the &quot;many deletions&quot; case sparsely either, just the &quot;few deletions&quot; case).&lt;/p&gt;</comment>
                    <comment id="13060582" author="mikemccand" created="Wed, 6 Jul 2011 14:54:44 +0100"  >&lt;p&gt;Next I&apos;ll work on &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1536&quot; title=&quot;if a filter can support random access API, we should use it&quot;&gt;&lt;del&gt;LUCENE-1536&lt;/del&gt;&lt;/a&gt;...&lt;/p&gt;</comment>
                    <comment id="13060583" author="mikemccand" created="Wed, 6 Jul 2011 14:55:54 +0100"  >&lt;p&gt;This commit changed the index format (the *.del), but the change is fully back-compat even with trunk indices.&lt;/p&gt;</comment>
                    <comment id="13130945" author="slavelle" created="Wed, 19 Oct 2011 21:10:45 +0100"  >&lt;p&gt;I think the javadoc comments for TermsEnum.docs are now incorrect due to this commit. It says &quot;@param liveDocs set bits are documents that should not be returned&quot;, which looks backwards. (maybe other places are wrong too; I haven&apos;t checked)&lt;/p&gt;</comment>
                    <comment id="13131869" author="mikemccand" created="Thu, 20 Oct 2011 19:22:46 +0100"  >&lt;blockquote&gt;&lt;p&gt;I think the javadoc comments for TermsEnum.docs are now incorrect due to this commit.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You&apos;re right!  I just committed a fix.  Thanks Sean.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12483981" name="LUCENE-3246-IndexSplitters.patch" size="6145" author="thetaphi" created="Mon, 27 Jun 2011 18:40:33 +0100" />
                    <attachment id="12484800" name="LUCENE-3246.patch" size="246095" author="mikemccand" created="Thu, 30 Jun 2011 18:32:52 +0100" />
                    <attachment id="12483967" name="LUCENE-3246.patch" size="194986" author="mikemccand" created="Mon, 27 Jun 2011 17:01:12 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 27 Jun 2011 17:40:33 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10756</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24450</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>