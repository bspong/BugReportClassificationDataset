<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:59:06 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1558/LUCENE-1558.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1558] Make IndexReader/Searcher ctors readOnly=true by default</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1558</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Another &quot;change the defaults&quot; in 3.0.&lt;/p&gt;

&lt;p&gt;Right now you get a read/write reader from IndexReader.open and new IndexSearcher(...), and reserving the right to write causes thread contention (on isDeleted).&lt;/p&gt;

&lt;p&gt;In 3.0 let&apos;s make readOnly reader the default, but still allow opening a read/write IndexReader.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12416635">LUCENE-1558</key>
            <summary>Make IndexReader/Searcher ctors readOnly=true by default</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Mar 2009 11:27:26 +0000</created>
                <updated>Wed, 25 Nov 2009 16:47:49 +0000</updated>
                    <resolved>Sun, 15 Nov 2009 18:48:27 +0000</resolved>
                            <version>2.4.1</version>
                                <fixVersion>3.0</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12762000" author="thetaphi" created="Sun, 4 Oct 2009 08:30:24 +0100"  >&lt;p&gt;We have deprecated all these methods and I removed them yesterday. Do you want to put them back again?&lt;/p&gt;</comment>
                    <comment id="12762009" author="mikemccand" created="Sun, 4 Oct 2009 10:34:27 +0100"  >&lt;blockquote&gt;&lt;p&gt;Do you want to put them back again?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we should?  Ie, &quot;readOnly=true&quot; is the natural default for creating an IndexReader?  Seems silly to force people to specify true/false when they create an IndexReader.  But maybe wait until we reach closure on the config/builder discussion on java-dev?&lt;/p&gt;</comment>
                    <comment id="12762011" author="thetaphi" created="Sun, 4 Oct 2009 10:53:14 +0100"  >&lt;p&gt;Krrrrr, I rewrote all tests to add this parameter &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12762014" author="mikemccand" created="Sun, 4 Oct 2009 10:58:36 +0100"  >&lt;p&gt;But, the tests can keep that change (being explicit about read-only).&lt;/p&gt;</comment>
                    <comment id="12777162" author="markrmiller@gmail.com" created="Thu, 12 Nov 2009 20:25:21 +0000"  >&lt;p&gt;Ah - didn&apos;t see this issue and assumed Uwe&apos;s change was what we were going with so I updated the javadoc to reflect. If we change again, it will need another tweak (adding back that its the current default).&lt;/p&gt;

&lt;p&gt;&lt;b&gt;edit&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Personally, I&apos;m not so sure its a bad idea making the user specify as it is now - its not much work and will likely head off users wondering why they can&apos;t do a write operation after making an IndexReader and not thinking about the param or that its readonly.&lt;/p&gt;</comment>
                    <comment id="12777864" author="mikemccand" created="Sat, 14 Nov 2009 10:08:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Personally, I&apos;m not so sure its a bad idea making the user specify as it is now&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The thing is, I expect the vast majority of users use readOnly=true, and to those users they would be baffled that IndexReader even has a readOnly=false possibility.  &quot;Simple things should be simple&quot;.  Also, the exception that&apos;s thrown if you attempt a write operation against a readOnly reader is pretty darned clear about what&apos;s gone wrong:&lt;/p&gt;

&lt;p&gt;    throw new UnsupportedOperationException(&quot;This IndexReader cannot make any changes to the index (it was opened with readOnly = true)&quot;);&lt;/p&gt;

&lt;p&gt;(We can reword it to say something like &quot;You must open the IndexReader with readOnly=false to make changes&quot; or some such).&lt;/p&gt;

&lt;p&gt;In other cases, I would agree we should force sneaky parameters to be explicit on construction, so users think about the choice.  EG we did this with maxFieldLength to IndexWriter, because in that case the truncation was silent, actually resulted in losing indexed content,  and we saw from our user&apos;s that it tripped people up far too often.  But I don&apos;t think this case fits that same pattern...&lt;/p&gt;</comment>
                    <comment id="12778005" author="thetaphi" created="Sat, 14 Nov 2009 22:20:09 +0000"  >&lt;p&gt;I am +/- 0 for adding these defaults to the ctors.&lt;/p&gt;

&lt;p&gt;Mike, do you have a patch? I think IndexSearcher.ctor and IndexReader.open() are the only affected code parts.&lt;/p&gt;</comment>
                    <comment id="12778033" author="mikemccand" created="Sun, 15 Nov 2009 01:04:22 +0000"  >&lt;p&gt;Patch attached, also removing a little dead code from removing deprecations.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12424984" name="LUCENE-1558.patch" size="3202" author="mikemccand" created="Sun, 15 Nov 2009 01:04:22 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 4 Oct 2009 07:30:24 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12196</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26171</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>