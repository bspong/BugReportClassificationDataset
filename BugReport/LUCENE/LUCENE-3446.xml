<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:16:39 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3446/LUCENE-3446.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3446] NullPointerException in BooleanFilter </title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3446</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;BooleanFilter getDISI() method used with QueryWrapperFilter occur NullPointerException,&lt;br/&gt;
if any QueryWrapperFilter not match terms in IndexReader.&lt;/p&gt;

&lt;p&gt;---------------------------------------------------&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.lucene.util.OpenBitSetDISI.inPlaceAnd(OpenBitSetDISI.java:66)&lt;br/&gt;
	at org.apache.lucene.search.BooleanFilter.getDocIdSet(BooleanFilter.java:102)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.searchWithFilter(IndexSearcher.java:551)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:532)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:463)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:433)&lt;br/&gt;
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:356)&lt;br/&gt;
	at test.BooleanFilterTest.main(BooleanFilterTest.java:50)&lt;br/&gt;
---------------------------------------------------&lt;/p&gt;

&lt;p&gt;null-check below lines.&lt;br/&gt;
---------------------------------------------------&lt;br/&gt;
res = new OpenBitSetDISI(getDISI(shouldFilters, i, reader), reader.maxDoc());&lt;br/&gt;
res.inPlaceOr(getDISI(shouldFilters, i, reader));&lt;br/&gt;
res = new OpenBitSetDISI(getDISI(notFilters, i, reader), reader.maxDoc());&lt;br/&gt;
res.inPlaceNot(getDISI(notFilters, i, reader));&lt;br/&gt;
res = new OpenBitSetDISI(getDISI(mustFilters, i, reader), reader.maxDoc());&lt;br/&gt;
res.inPlaceAnd(getDISI(mustFilters, i, reader));&lt;br/&gt;
---------------------------------------------------&lt;/p&gt;</description>
                <environment></environment>
            <key id="12524240">LUCENE-3446</key>
            <summary>NullPointerException in BooleanFilter </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="umishu">Shuji Umino</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Sep 2011 07:22:41 +0100</created>
                <updated>Sun, 27 Nov 2011 12:29:35 +0000</updated>
                    <resolved>Thu, 22 Sep 2011 23:18:01 +0100</resolved>
                            <version>3.4</version>
                                <fixVersion>3.5</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/other</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                                                  <comments>
                    <comment id="13112408" author="thetaphi" created="Thu, 22 Sep 2011 09:34:06 +0100"  >&lt;p&gt;Thanks for reporting this bug. Indeed, getDocIdSet() and DISI.getDocIdSetIterator() can return null, if no documents match. BooleanFilter must respect this.&lt;/p&gt;

&lt;p&gt;I will take care.&lt;/p&gt;</comment>
                    <comment id="13112459" author="thetaphi" created="Thu, 22 Sep 2011 11:22:52 +0100"  >&lt;p&gt;Patch for trunk.&lt;/p&gt;

&lt;p&gt;This patch handles filters returning null DocIdSet and also those returning null DISIs (like QueryWrapperFilter when scorer==null). I also added tests for all combinations.&lt;/p&gt;

&lt;p&gt;This patch also optimized the filter building, as getDocIdSet is not called unnecessarily twice (which is expensive for lots of filters).&lt;/p&gt;

&lt;p&gt;I added a TODO: The Filter uses OpenBitSet and has optimizations for OpenBitSets that no longer apply to Lucene core&apos;s filters: Core filters mostly return FixedBitSet now. A move to FixedBitSet for BooleanFilter is not possible at the moment, as and() and andNot() are missing in this class.&lt;/p&gt;</comment>
                    <comment id="13112556" author="thetaphi" created="Thu, 22 Sep 2011 14:33:45 +0100"  >&lt;p&gt;Patch (contains &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3448&quot; title=&quot;Add FixedBitSet.and(other/DISI), andNot(other/DISI)&quot;&gt;&lt;del&gt;LUCENE-3448&lt;/del&gt;&lt;/a&gt;) using FixedBitSets new methods. OpenBitSetDISI no longer needed.&lt;/p&gt;</comment>
                    <comment id="13112844" author="thetaphi" created="Thu, 22 Sep 2011 20:24:52 +0100"  >&lt;p&gt;Patch update.&lt;/p&gt;</comment>
                    <comment id="13112897" author="thetaphi" created="Thu, 22 Sep 2011 21:49:25 +0100"  >&lt;p&gt;Committed trunk revision: 1174380&lt;/p&gt;</comment>
                    <comment id="13112964" author="thetaphi" created="Thu, 22 Sep 2011 23:18:01 +0100"  >&lt;p&gt;Backported to 3.x branch revision: 1174418&lt;/p&gt;</comment>
                    <comment id="13157807" author="thetaphi" created="Sun, 27 Nov 2011 12:29:35 +0000"  >&lt;p&gt;Bulk close after release of 3.5&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12496165" name="LUCENE-3446.patch" size="18812" author="thetaphi" created="Thu, 22 Sep 2011 20:24:52 +0100" />
                    <attachment id="12496109" name="LUCENE-3446.patch" size="18946" author="thetaphi" created="Thu, 22 Sep 2011 14:33:45 +0100" />
                    <attachment id="12496090" name="LUCENE-3446.patch" size="10309" author="thetaphi" created="Thu, 22 Sep 2011 11:22:52 +0100" />
                </attachments>
            <subtasks>
            <subtask id="12524277">LUCENE-3448</subtask>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 22 Sep 2011 08:34:06 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2679</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24250</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>