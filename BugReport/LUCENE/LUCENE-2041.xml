<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:19:04 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2041/LUCENE-2041.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2041] Complete parallelizaton of ParallelMultiSearcher</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2041</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;ParallelMultiSearcher is parallel only for the method signatures of &apos;search&apos;.&lt;/p&gt;

&lt;p&gt;Part of a query process calls the method docFreq(). There was a TODO comment to parallelize this. Parallelizing this method actually increases the performance of a query on multiple indexes, especially remotely.&lt;/p&gt;
</description>
                <environment></environment>
            <key id="12440065">LUCENE-2041</key>
            <summary>Complete parallelizaton of ParallelMultiSearcher</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="jsurls">Joey Surls</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Nov 2009 22:07:46 +0000</created>
                <updated>Mon, 7 Dec 2009 14:49:53 +0000</updated>
                    <resolved>Tue, 10 Nov 2009 17:18:45 +0000</resolved>
                            <version>2.9</version>
                                <fixVersion>3.0</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                          <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                    <timeestimate seconds="3600">1h</timeestimate>
                                  <comments>
                    <comment id="12774492" author="simonw" created="Fri, 6 Nov 2009 23:43:42 +0000"  >&lt;p&gt;Hey Joey, &lt;br/&gt;
good to see you coming up with patches, nice that you catch up on that TODO. You added support for parallel DocFreq which is good! Did you think about using an interface from the new concurrent utils instead of subclassing thread? I would like to see people using the new features which make code slightly more readable too. You would be able to simply throw the exception in the Callable#call() method and retrieve it once it has terminated.&lt;br/&gt;
you could also use a Pooled Executor to run those threads so you don&apos;t have to spawn them each time you call docFreq on the multi searcher.&lt;/p&gt;

&lt;p&gt;one more thing, your patch is hard to read as you formated the source code. please try to do not format it - that would make it way easier to read and see what has been added  / changed.&lt;/p&gt;</comment>
                    <comment id="12774494" author="simonw" created="Fri, 6 Nov 2009 23:44:33 +0000"  >&lt;p&gt;moving to 3.1 for now. we will see how this turns out&lt;/p&gt;</comment>
                    <comment id="12774498" author="jsurls" created="Fri, 6 Nov 2009 23:54:02 +0000"  >&lt;p&gt;I agree with you on the Pooled Executor and concurrent utils, I was actually trying to copy the semantics of the search methods in place so someone could quickly grasp the code.&lt;/p&gt;

&lt;p&gt;Ya, I thought that&apos;s why the patch was full was from the formatted code. Sorry about that. I&apos;ll look for that in the future. I noticed the link in the wiki for the formatting under Helpful Resources doesn&apos;t work anymore.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://wiki.apache.org/lucene-java/HowToContribute&quot; class=&quot;external-link&quot;&gt;http://wiki.apache.org/lucene-java/HowToContribute&lt;/a&gt;&lt;/p&gt;

</comment>
                    <comment id="12774501" author="thetaphi" created="Sat, 7 Nov 2009 00:09:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;Ya, I thought that&apos;s why the patch was full was from the formatted code. Sorry about that. I&apos;ll look for that in the future. I noticed the link in the wiki for the formatting under Helpful Resources doesn&apos;t work anymore.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fixed that and uploaded a new Eclipse Galieo style also containing our way for Java 5 Generics.&lt;/p&gt;</comment>
                    <comment id="12774689" author="simonw" created="Sat, 7 Nov 2009 23:59:16 +0000"  >&lt;p&gt;I drove this a bit further and refactored the whole code to use the java 1.5 concurrent utils. I seem to be somewhat cleaner with executors / callable and a little refactoring.&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="12774972" author="thetaphi" created="Mon, 9 Nov 2009 13:53:55 +0000"  >&lt;p&gt;I take it as communicated.&lt;/p&gt;</comment>
                    <comment id="12774974" author="simonw" created="Mon, 9 Nov 2009 13:58:40 +0000"  >&lt;p&gt;thanks uwe! &lt;/p&gt;</comment>
                    <comment id="12774976" author="thetaphi" created="Mon, 9 Nov 2009 14:07:23 +0000"  >&lt;p&gt;String.isEmpty() is Java 6 only, changed this to length() == 0.&lt;/p&gt;</comment>
                    <comment id="12774979" author="thetaphi" created="Mon, 9 Nov 2009 14:16:19 +0000"  >&lt;p&gt;Updated patch.&lt;/p&gt;</comment>
                    <comment id="12774980" author="simonw" created="Mon, 9 Nov 2009 14:16:56 +0000"  >&lt;p&gt;Fixed the Java5 issue. &lt;br/&gt;
Damned I should use java 5 on my notebook.&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="12774982" author="simonw" created="Mon, 9 Nov 2009 14:20:58 +0000"  >&lt;p&gt;hehe - my patch was quicker but you comment appears first &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12774983" author="thetaphi" created="Mon, 9 Nov 2009 14:27:03 +0000"  >&lt;p&gt;I also changed some formatting, we require whitespace after control statements like for, while, catch,... and before {&lt;/p&gt;</comment>
                    <comment id="12774987" author="thetaphi" created="Mon, 9 Nov 2009 14:30:06 +0000"  >&lt;p&gt;I will also readd support for MaxScore in the fielded case (it is still supported by Searchable.search(SortField))!!!&lt;/p&gt;</comment>
                    <comment id="12775186" author="thetaphi" created="Mon, 9 Nov 2009 23:26:36 +0000"  >&lt;p&gt;Advanced patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Removed @SuppressWarnings by duplicating some code, but it is type-safe now&lt;/li&gt;
	&lt;li&gt;Added support for maxScore in sorted mode&lt;/li&gt;
	&lt;li&gt;Refactoring: made all internal classes static inner classes&lt;/li&gt;
	&lt;li&gt;Fix thread safety: hq.setFields() synchronized&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12775196" author="thetaphi" created="Mon, 9 Nov 2009 23:52:32 +0000"  >&lt;p&gt;Here another possibility, removing more duplicated code: MultiSearcher contains now the merge Callables as static inner classes. These Callables are used directly without Executor in MultiSearcher, but with Executor in ParallelMultiSearcher.&lt;/p&gt;</comment>
                    <comment id="12775920" author="simonw" created="Tue, 10 Nov 2009 15:57:17 +0000"  >&lt;p&gt;Added some more final keywords and generalized HitQueue to PriorityQueue&amp;lt;ScoreDoc&amp;gt;  in search (no sort)&lt;/p&gt;

&lt;p&gt;I guess we are set with this patch, good team work Uwe! Lets get this out for heavy committing! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I get the impression that we should think about moving stuff like the Function interface out to utils. This could be useful in many situations though. Thoughts?&lt;/p&gt;</comment>
                    <comment id="12775926" author="thetaphi" created="Tue, 10 Nov 2009 16:15:26 +0000"  >&lt;p&gt;Here my latest patch, will commit soon.&lt;/p&gt;

&lt;p&gt;Uwe&lt;/p&gt;</comment>
                    <comment id="12775927" author="thetaphi" created="Tue, 10 Nov 2009 16:18:23 +0000"  >&lt;p&gt;Oh I didn&apos;t see your patch. But its not so different, I also did lots of code cleanup.&lt;/p&gt;

&lt;p&gt;I also used ReentrantLocks. I added a new DummyLock to utils, that is a replacement for ReentrantLock, but does simply nothing. By this, the synchronized around the HitQueue in MultiSearcher can be ommitted.&lt;/p&gt;</comment>
                    <comment id="12775937" author="thetaphi" created="Tue, 10 Nov 2009 16:47:12 +0000"  >&lt;p&gt;Merged our patches somehow, but left HitQueue generic param (I like this more, because it conforms to the sort inner class). I think this is final now.&lt;/p&gt;

&lt;p&gt;Ready to commit, all tests are running.&lt;/p&gt;</comment>
                    <comment id="12775945" author="simonw" created="Tue, 10 Nov 2009 17:13:02 +0000"  >&lt;p&gt;+1 go for it - seems to be quite pretty compared to the current trunk version. &lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12775948" author="thetaphi" created="Tue, 10 Nov 2009 17:18:45 +0000"  >&lt;p&gt;(Heavy) committed revision: 834550&lt;/p&gt;

&lt;p&gt;Thanks Joey &amp;amp; Simon&lt;/p&gt;</comment>
                    <comment id="12786932" author="itsadok" created="Mon, 7 Dec 2009 14:49:53 +0000"  >&lt;p&gt;This has turned into a complete refactoring of the class, but I&apos;d like to comment that the original intent of this patch was a bit misguided: docFreq() is not called during normal use of ParallelMultiSearcher. What does get called is docFreqs() on the sub-searchers. This is done in MultiSearcher.createWeight(), and is done sequentially.&lt;/p&gt;

&lt;p&gt;I created issue &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2128&quot; title=&quot;Further parallelizaton of ParallelMultiSearcher&quot;&gt;&lt;del&gt;LUCENE-2128&lt;/del&gt;&lt;/a&gt; to suggest a solution to this.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12424475" name="LUCENE-2041-final.patch" size="33203" author="thetaphi" created="Tue, 10 Nov 2009 16:47:12 +0000" />
                    <attachment id="12424272" name="LUCENE_2041.patch" size="17585" author="simonw" created="Sat, 7 Nov 2009 23:59:16 +0000" />
                    <attachment id="12424469" name="LUCENE-2041.patch" size="28367" author="simonw" created="Tue, 10 Nov 2009 15:57:16 +0000" />
                    <attachment id="12424413" name="LUCENE-2041.patch" size="19757" author="thetaphi" created="Mon, 9 Nov 2009 23:26:36 +0000" />
                    <attachment id="12424363" name="LUCENE-2041.patch" size="17674" author="simonw" created="Mon, 9 Nov 2009 14:16:56 +0000" />
                    <attachment id="12424362" name="LUCENE-2041.patch" size="17776" author="thetaphi" created="Mon, 9 Nov 2009 14:16:19 +0000" />
                    <attachment id="12424231" name="LUCENE-2041.patch" size="13322" author="jsurls" created="Fri, 6 Nov 2009 22:08:36 +0000" />
                    <attachment id="12424471" name="LUCENE-2041-refactor.patch" size="30057" author="thetaphi" created="Tue, 10 Nov 2009 16:15:26 +0000" />
                    <attachment id="12424418" name="LUCENE-2041-refactor.patch" size="24015" author="thetaphi" created="Mon, 9 Nov 2009 23:52:32 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>9.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 6 Nov 2009 23:43:42 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11736</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25684</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>