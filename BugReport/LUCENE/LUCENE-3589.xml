<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:59:55 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3589/LUCENE-3589.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3589] BytesRef copy short missed the length setting</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3589</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;when storing a short type integer to BytesRef, BytesRef missed the length setting. then it will cause the storage size is ZERO if no continuous options on this BytesRef&lt;/p&gt;</description>
                <environment>&lt;p&gt;linux 64bit jdk 6&lt;/p&gt;</environment>
            <key id="12532585">LUCENE-3589</key>
            <summary>BytesRef copy short missed the length setting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="peterchang">peter chang</reporter>
                        <labels>
                        <label>patch</label>
                    </labels>
                <created>Thu, 24 Nov 2011 08:00:01 +0000</created>
                <updated>Fri, 10 May 2013 11:44:07 +0100</updated>
                    <resolved>Thu, 24 Nov 2011 14:11:58 +0000</resolved>
                            <version>4.0-ALPHA</version>
                                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/other</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13156694" author="rcmuir" created="Thu, 24 Nov 2011 13:22:52 +0000"  >&lt;p&gt;Peter: thank you very much for opening this issue.&lt;/p&gt;

&lt;p&gt;Your patch is correct - however I noticed this method is totally dead code in lucene.&lt;br/&gt;
Its not used by any code or tests.&lt;/p&gt;

&lt;p&gt;I&apos;m going to remove any dead code in BytesRef... this class is spiraling out of control.&lt;/p&gt;</comment>
                    <comment id="13156695" author="dweiss" created="Thu, 24 Nov 2011 13:26:34 +0000"  >&lt;p&gt;I think I&apos;m using it in that fst suggester patch, actually... Not that it cannot be hand-coded if necessary.&lt;/p&gt;</comment>
                    <comment id="13156708" author="peterchang" created="Thu, 24 Nov 2011 13:43:57 +0000"  >&lt;p&gt;in fact, i use BytesRef.copy(short) in my code to store an id something like this, and since in lucene 4.0 return BytesRef when get binary value  of a field. i think this piece of code can be kept.&lt;/p&gt;</comment>
                    <comment id="13156715" author="rcmuir" created="Thu, 24 Nov 2011 13:55:58 +0000"  >&lt;p&gt;We really cannot just let BytesRef pile up into some mega API.&lt;br/&gt;
When we add things to the public API, we have to eventually support this stuff in future releases.&lt;/p&gt;

&lt;p&gt;If we are hell-bent to keep the api, we must fix the bogosities about it, otherwise its unmaintainable, and should be removed:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the fact it is copy(short) is wrong, if i delete the copy(short) and copy(int) methods everything compiles as normal, leading me to believe they are unused. this is because anything using thse gets promoted to copy(long). So the methods must be renamed to copyShort, copyInt, etc to prevent these types of mistakes.&lt;/li&gt;
	&lt;li&gt;why do we reset the offset to 0?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In general i&apos;m just wondering why this is needed in bytesref itself... do people know about ByteArrayDataInput and ByteArrayDataOutput?&lt;/p&gt;

&lt;p&gt;Separately, I&apos;m still going to remove all unused bytesref methods at the current moment... i&apos;ll leave this one be though.&lt;/p&gt;</comment>
                    <comment id="13156717" author="dweiss" created="Thu, 24 Nov 2011 14:02:21 +0000"  >&lt;p&gt;I agree with you in that to know what these methods actually do one has to look into the source code &amp;#8211; this is what I actually did. And I agree this isn&apos;t good from the API perspective. &lt;/p&gt;

&lt;p&gt;As for ByteArrayDataInput/Output &amp;#8211; these are fine, we all know they&apos;re; I used BytesRef#copy(short) to avoid creating an extra object. &lt;/p&gt;</comment>
                    <comment id="13156718" author="rcmuir" created="Thu, 24 Nov 2011 14:05:00 +0000"  >&lt;blockquote&gt;
&lt;p&gt;As for ByteArrayDataInput/Output &#8211; these are fine, we all know they&apos;re; I used BytesRef#copy(short) to avoid creating an extra object. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you are worried about the object overhead of ByteArrayDataInput/Output in some loop or something, just reuse the same one with reset()....&lt;/p&gt;</comment>
                    <comment id="13156719" author="dweiss" created="Thu, 24 Nov 2011 14:09:19 +0000"  >&lt;p&gt;I&apos;d probably just push the two bytes myself to the byte array, to be honest &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13156720" author="rcmuir" created="Thu, 24 Nov 2011 14:11:58 +0000"  >&lt;p&gt;Thanks Peter: I committed your fix&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12504994" name="BytesRef_bug_lucene3589.patch" size="398" author="peterchang" created="Thu, 24 Nov 2011 08:03:21 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 24 Nov 2011 13:22:52 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>218319</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24108</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>