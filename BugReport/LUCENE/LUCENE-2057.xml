<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:21:58 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2057/LUCENE-2057.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2057] TopDocsCollector should have bounded generic &lt;T extends ScoreDoc&gt;</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2057</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;TopDocsCollector was changed to be TopDocsCollector&amp;lt;T&amp;gt;. However it has methods which specifically assume the PQ stores ScoreDoc. Therefore, if someone extends it and defines a type which is not ScoreDoc, things will break.&lt;/p&gt;

&lt;p&gt;We shouldn&apos;t put &amp;lt;T&amp;gt; on TopDocsCollector at all, but rather change its ctor to &lt;b&gt;protected TopDocsCollector(PriorityQueue&amp;lt;? extends ScoreDoc&amp;gt; pq)&lt;/b&gt;. TopDocsCollector should handle ScoreDoc types. If we do this, we&apos;ll need to change FieldValueHitQueue&apos;s Entry to extend ScoreDoc as well.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12440441">LUCENE-2057</key>
            <summary>TopDocsCollector should have bounded generic &lt;T extends ScoreDoc&gt;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="shaie">Shai Erera</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Nov 2009 19:49:55 +0000</created>
                <updated>Wed, 25 Nov 2009 16:47:57 +0000</updated>
                    <resolved>Wed, 11 Nov 2009 21:58:55 +0000</resolved>
                                            <fixVersion>3.0</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12776612" author="shaie" created="Wed, 11 Nov 2009 19:50:22 +0000"  >&lt;p&gt;Uwe, let me know if you&apos;d like me to work on a patch.&lt;/p&gt;</comment>
                    <comment id="12776616" author="thetaphi" created="Wed, 11 Nov 2009 19:52:40 +0000"  >&lt;p&gt;The patch is already finished and ready to commit.&lt;/p&gt;</comment>
                    <comment id="12776618" author="thetaphi" created="Wed, 11 Nov 2009 19:54:18 +0000"  >&lt;p&gt;The generics should in all cases put on top of the whole class, because it is a wrapper around PQ. And PQ needs a generic type. By using a ?-like type you have to still cast in all sub-classes. See also other classes in oal.search (MultTermQueryWrapperFilter and so on).&lt;/p&gt;</comment>
                    <comment id="12776634" author="shaie" created="Wed, 11 Nov 2009 20:21:40 +0000"  >&lt;p&gt;It&apos;s strange ... I&apos;d thought that if I declare PQ&amp;lt;T&amp;gt;, and then from TFC for example init FVHQ, which extends PQ as &amp;lt;Entry&amp;gt;, then all who&apos;ll use FVHQ won&apos;t need to cast to Entry. I&apos;ve tried it and indeed TSDC does not need to case to ScoreDoc, but TFC needs to case to Entry.&lt;/p&gt;

&lt;p&gt;Patch looks good Uwe !&lt;/p&gt;</comment>
                    <comment id="12776672" author="thetaphi" created="Wed, 11 Nov 2009 21:35:13 +0000"  >&lt;blockquote&gt;&lt;p&gt;It&apos;s strange ... I&apos;d thought that if I declare PQ&amp;lt;T&amp;gt;, and then from TFC for example init FVHQ, which extends PQ as &amp;lt;Entry&amp;gt;, then all who&apos;ll use FVHQ won&apos;t need to cast to Entry. I&apos;ve tried it and indeed TSDC does not need to case to ScoreDoc, but TFC needs to case to Entry. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Because of that it is implemented with a generic type param. This ensures that both the class implementation and the embedded PQ both work with the same data type and you never have to cast. The problem with the state before was that Entry did not extend ScoreDoc and because of that the generics were unbounded.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit this soon (waiting for the backwards-tests).&lt;/p&gt;</comment>
                    <comment id="12776683" author="thetaphi" created="Wed, 11 Nov 2009 21:58:55 +0000"  >&lt;p&gt;Committed revision: 835090&lt;/p&gt;

&lt;p&gt;Thanks Shai! As this is not a new bug, I added you to the changes entry for the Java 5 generics additions.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12424637" name="scoredoc.patch" size="6562" author="thetaphi" created="Wed, 11 Nov 2009 19:52:40 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 11 Nov 2009 19:52:40 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11720</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25668</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>