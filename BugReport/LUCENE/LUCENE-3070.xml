<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:34:46 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3070/LUCENE-3070.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3070] Enable DocValues by default for every Codec</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3070</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Currently DocValues are enable with a wrapper Codec so each codec which needs DocValues must be wrapped by DocValuesCodec. The DocValues writer and reader should be moved to Codec to be enabled by default.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12506176">LUCENE-3070</key>
            <summary>Enable DocValues by default for every Codec</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="simonw">Simon Willnauer</assignee>
                                <reporter username="simonw">Simon Willnauer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 May 2011 15:31:06 +0100</created>
                <updated>Mon, 16 May 2011 13:25:37 +0100</updated>
                    <resolved>Mon, 16 May 2011 13:25:37 +0100</resolved>
                            <version>CSF branch</version>
                                <fixVersion>CSF branch</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13029056" author="rcmuir" created="Thu, 5 May 2011 00:57:04 +0100"  >&lt;p&gt;first taking a look at the branch, just a really quick hack at a patch adding docsConsumer() and docsProducer() to Codec, with some renaming to fit (DefaultDocValuesConsumer/Producer) and enabling this for all codecs (except preflex)&lt;/p&gt;

&lt;p&gt;all tests pass, but there might be some naming/api issues... additionally maybe we should address the TestSort issue, we want to enable this test (without docvalues) on Preflex... maybe we should have an explicit test for that.&lt;/p&gt;

&lt;p&gt;also we need a plain text impl for simpletext &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13029233" author="simonw" created="Thu, 5 May 2011 09:30:43 +0100"  >&lt;p&gt;Robert patch looks great!&lt;/p&gt;

&lt;p&gt;some comments:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the simpletext nocommit should be a TODO IMO&lt;/li&gt;
	&lt;li&gt;for the preflex problem I think we need to add some infrastructure to add tests for 4.0 features somehow I will think about this&lt;/li&gt;
	&lt;li&gt;one problem we are having here is that our current implementation is somewhat wasteful. Currently on flush we pull a FieldsConsumer for every codec used in the indexing session (per DWPT) regardless if this field is indexed. so we are creating some unneeded files if you use one field for docvalues only. The other thing is that we need to somehow reset the FieldInfo#hasDocValues &quot;flag&quot; on an error when we are hitting non-aborting exceptions during indexing before we can actually create the corresponding consumer. That is something we should address in a spin-off issue I think.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;overall I think you should commit the current state and we work from here!&lt;/p&gt;</comment>
                    <comment id="13029237" author="simonw" created="Thu, 5 May 2011 09:37:52 +0100"  >&lt;p&gt;one more think I think preflex should throw UOE instead of returning null... At some point we should also think about a better name for Source, something like InMemoryDocValues or RamResidentDocValues - something more self speaking&lt;/p&gt;</comment>
                    <comment id="13033964" author="simonw" created="Mon, 16 May 2011 11:55:22 +0100"  >&lt;p&gt;This patch adds UOE to PreFlex codec and makes FieldInfo#docValues transactional to prevent wrong flags if non-aborting exceptions occur.&lt;/p&gt;

&lt;p&gt;I also added some random docValues fields to RandomIndexWriter as well as some basic checks to CheckIndex. It&apos;s not perfect though but it&apos;s a start.&lt;/p&gt;</comment>
                    <comment id="13033970" author="rcmuir" created="Mon, 16 May 2011 12:06:47 +0100"  >&lt;p&gt;Seems like it might be a good idea in RandomIndexWriter to sometimes not add docvalues?&lt;/p&gt;</comment>
                    <comment id="13033971" author="simonw" created="Mon, 16 May 2011 12:13:14 +0100"  >&lt;blockquote&gt;&lt;p&gt;Seems like it might be a good idea in RandomIndexWriter to sometimes not add docvalues?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yeah I think we should make this per RIW session not per document though since we already have random DocValues Types so some docs might get docvalues_int_xyz and some might get docvalues_float_xyz fields. &lt;/p&gt;</comment>
                    <comment id="13033975" author="simonw" created="Mon, 16 May 2011 12:32:09 +0100"  >&lt;p&gt;new patch, I added random DocValues to updateDocument and randomly enable / disable docValues entirely on optimize / commit / getReader so we get segments that don&apos;t have docValues at all etc. I think I will commit soon if nobody objects.&lt;/p&gt;</comment>
                    <comment id="13033977" author="rcmuir" created="Mon, 16 May 2011 12:37:14 +0100"  >&lt;p&gt;looks good, i think this will help the test coverage a lot.&lt;/p&gt;

&lt;p&gt;can you rename swtichDoDocValues to switchDoDocValues? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13033979" author="simonw" created="Mon, 16 May 2011 12:41:26 +0100"  >&lt;p&gt;fixed typo - I will commit in a second.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12479316" name="LUCENE-3070.patch" size="16776" author="simonw" created="Mon, 16 May 2011 12:41:26 +0100" />
                    <attachment id="12479314" name="LUCENE-3070.patch" size="16776" author="simonw" created="Mon, 16 May 2011 12:32:09 +0100" />
                    <attachment id="12479308" name="LUCENE-3070.patch" size="15420" author="simonw" created="Mon, 16 May 2011 11:55:22 +0100" />
                    <attachment id="12478230" name="LUCENE-3070.patch" size="59613" author="rcmuir" created="Thu, 5 May 2011 00:57:04 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 4 May 2011 23:57:04 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10845</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24623</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>