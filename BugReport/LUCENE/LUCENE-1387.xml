<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:17:08 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1387/LUCENE-1387.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1387] Add LocalLucene</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1387</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Local Lucene (Geo-search) has been donated to the Lucene project, per &lt;a href=&quot;https://issues.apache.org/jira/browse/INCUBATOR-77&quot; class=&quot;external-link&quot;&gt;https://issues.apache.org/jira/browse/INCUBATOR-77&lt;/a&gt;.  This issue is to handle the Lucene portion of integration.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://lucene.markmail.org/message/orzro22sqdj3wows?q=LocalLucene&quot; class=&quot;external-link&quot;&gt;http://lucene.markmail.org/message/orzro22sqdj3wows?q=LocalLucene&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
            <key id="12404379">LUCENE-1387</key>
            <summary>Add LocalLucene</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="ryantxu">Ryan McKinley</assignee>
                                <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Sep 2008 19:58:49 +0100</created>
                <updated>Thu, 2 May 2013 03:29:16 +0100</updated>
                    <resolved>Tue, 2 Jun 2009 20:38:43 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>modules/spatial</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>9</watches>
                                                    <comments>
                    <comment id="12631107" author="gsingers" created="Mon, 15 Sep 2008 20:10:50 +0100"  >&lt;p&gt;NOTE: This code cannot be released until the LGPL dependencies are removed.  &lt;/p&gt;</comment>
                    <comment id="12631928" author="ryantxu" created="Wed, 17 Sep 2008 21:29:30 +0100"  >&lt;p&gt;I&apos;m in the process of removing the LGPL dependencies now....&lt;/p&gt;

&lt;p&gt;What are the thoughts on where this should live once things are squared away?  &lt;/p&gt;

&lt;p&gt;Currently, the package names are:&lt;br/&gt;
 com.pjaol.search.*&lt;br/&gt;
 com.mapquest.spatialbase;&lt;br/&gt;
 com.mapquest.localsolr;&lt;/p&gt;

&lt;p&gt;Where do we want them to live in lucene?&lt;/p&gt;

&lt;p&gt; org.apache.lucene.spatial&lt;br/&gt;
 org.apache.solr.spatial&lt;/p&gt;

&lt;p&gt;perhaps &quot;geo&quot;, &quot;gis&quot;, &quot;geosearch&quot;&lt;/p&gt;

&lt;p&gt;I lean towards &quot;spatial&quot;&lt;/p&gt;
</comment>
                    <comment id="12631974" author="ryantxu" created="Wed, 17 Sep 2008 23:04:45 +0100"  >&lt;p&gt;locallucene has some java 1.5 code in it &amp;#8211; enums and a few iterators.&lt;/p&gt;

&lt;p&gt;What is the policy with java 1.5 for contribs?  &lt;/p&gt;

&lt;p&gt;We could probably make it 1.4 compatible, but why fight the future?!&lt;/p&gt;</comment>
                    <comment id="12632066" author="ryantxu" created="Thu, 18 Sep 2008 03:48:07 +0100"  >&lt;p&gt;How do lucene contribs usually do logging?&lt;/p&gt;

&lt;p&gt;My understanding is that lucene core does not do logging...   can we do SLF4J logging with this?  That would fit nicely with &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-560&quot; title=&quot;Convert JDK logging to SLF4J&quot;&gt;&lt;del&gt;SOLR-560&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12632092" author="ryantxu" created="Thu, 18 Sep 2008 06:16:05 +0100"  >&lt;p&gt;Ok, I&apos;ve got this compiling and running without the LGPL libraries/files&lt;/p&gt;

&lt;p&gt;I moved mqspatialbase into locallucene and use the mqspatialbase math (LatLng.arcDistance( LatLng )) rather then the stuff from LatLonTrig.java&lt;/p&gt;

&lt;p&gt;What are the next steps? &lt;/p&gt;

&lt;p&gt;If we add a &quot;spatial&quot; contrib to lucene now, can it be excluded from 2.4?&lt;/p&gt;</comment>
                    <comment id="12632196" author="gsingers" created="Thu, 18 Sep 2008 13:52:12 +0100"  >&lt;p&gt;I think we can wait until after 2.4, which should be soon.  Mike said he was going to branch today anyway, so...&lt;/p&gt;

&lt;p&gt;I think we could put in a contrib in 2.9 if we wanted to.&lt;/p&gt;

&lt;p&gt;As for JDK 1.5, we allow new contribs to be 1.5.&lt;/p&gt;</comment>
                    <comment id="12632198" author="gsingers" created="Thu, 18 Sep 2008 13:56:04 +0100"  >&lt;p&gt;Logging:  Lucene contribs handler their own logging.  SLF4J sounds good to me&lt;/p&gt;

&lt;p&gt;As for package name, spatial works for me&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What are the next steps? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Create a patch per the HowToContribute section on the wiki that hooks it into the build system like the other contribs.  Make sure it has tests, docs, etc.&lt;/p&gt;</comment>
                    <comment id="12632415" author="ryantxu" created="Thu, 18 Sep 2008 23:11:52 +0100"  >&lt;p&gt;Here is a modified version of the grant with no LGPL dependencies and moved to org.apache.lucene.spatial.&lt;/p&gt;

&lt;p&gt;Since 2.4 has been branched, it would be nice to add this soon so better qualified folks can push on it easily &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12632721" author="ryantxu" created="Fri, 19 Sep 2008 16:21:44 +0100"  >&lt;p&gt;I&apos;m struggling to get two of the existing tests to pass...  I don&apos;t think it is from my modifications since they don&apos;t pass on the original either.&lt;/p&gt;

&lt;p&gt;The two are:&lt;br/&gt;
  TestCartesian.java&lt;br/&gt;
  TestDistance.java&lt;/p&gt;

&lt;p&gt;originally, they get 0 results for everything.  After I add:  writer.commit();  in setup, I get more results, but still not matching the existing tests expectaions.&lt;/p&gt;

&lt;p&gt;For TestCartesian, I get:&lt;br/&gt;
Distances should be 10 14&lt;br/&gt;
Results should be 6 7&lt;/p&gt;

&lt;p&gt;For TestDistanc I get:&lt;br/&gt;
Distance Filter filtered: 7&lt;br/&gt;
Results: 7&lt;br/&gt;
(it expects 6 for both...)&lt;/p&gt;

&lt;p&gt;Any ideas?&lt;/p&gt;</comment>
                    <comment id="12633102" author="karl.wettin" created="Sun, 21 Sep 2008 23:32:59 +0100"  >&lt;blockquote&gt;&lt;p&gt;I&apos;m struggling to get two of the existing tests to pass... I don&apos;t think it is from my modifications since they don&apos;t pass on the original either.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;On my box the test fails with different results due to the writer not beeing comitted in setUp, giving me 0 results. After adding a commit it fails with the results you are reporting here.&lt;/p&gt;

&lt;p&gt;Is it possible that you are getting one sort of result in the original due to non committed writer and another error in this version due to your changes to the distance measurement? All points in the list are rather close to each other so very small changes to the algorithm might be the problem.&lt;/p&gt;

&lt;p&gt;I have a hard time tracing the code and I&apos;m sort of hoping this might be the problem.&lt;/p&gt;</comment>
                    <comment id="12633276" author="pjaol" created="Mon, 22 Sep 2008 15:50:39 +0100"  >&lt;p&gt;Yeah, the tests numbers are wrong, I&apos;ll put together better tests later today for it.&lt;br/&gt;
It was brought to my attention recently when someone was trying lucene 2.4, I just didn&apos;t get around to resolving it.&lt;/p&gt;
</comment>
                    <comment id="12641264" author="javasmash" created="Tue, 21 Oct 2008 05:31:35 +0100"  >&lt;p&gt;Hey Guys! Where is this now? Has it been checked in yet? I am asking as I am currently planning a feature and wanted to know if it is realistic to take advantage of it now. Any update is appreciated!&lt;/p&gt;</comment>
                    <comment id="12657837" author="pjaol" created="Thu, 18 Dec 2008 18:13:03 +0000"  >&lt;p&gt;Latest version of local / spatial lucene with LGPL dependencies removed&lt;br/&gt;
and working unit tests. The code&apos;s only dependency is on JUnit for tests during compilation.&lt;/p&gt;

&lt;p&gt;All the code&apos;s header&apos;s should be changed to Apache License as well.&lt;/p&gt;</comment>
                    <comment id="12657843" author="ryantxu" created="Thu, 18 Dec 2008 18:25:28 +0000"  >&lt;p&gt;Looks great patrick!&lt;/p&gt;

&lt;p&gt;At quick glance, all the headers look fine &amp;#8211; i&apos;ll run it through RAT to make sure though.&lt;/p&gt;

&lt;p&gt;Some notes about the changes here:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;this includes a copy of NumberUtils from solr rather then depending on the library &amp;#8211; I think that is the best option till NumberUtils can be moved into Lucene&lt;/li&gt;
	&lt;li&gt;this uses the package name: org.apache.lucene.spatial.tier&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I&apos;ll try to get the ball rolling to get this committed soon.  Then we will have a base to work from and integrate with solr.&lt;/p&gt;</comment>
                    <comment id="12657865" author="ryantxu" created="Thu, 18 Dec 2008 19:38:57 +0000"  >&lt;p&gt;Just noticed something...&lt;/p&gt;

&lt;p&gt;The TestCartesian creates a temp index like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;File luceneDirectory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;/tmp/example-lucene&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (! luceneDirectory.exists()) 
      luceneDirectory.mkdir();
    
    directory = FSDirectory.getDirectory(luceneDirectory);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For simplicity, we should probably just use:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   directory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RAMDirectory();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12657875" author="ryantxu" created="Thu, 18 Dec 2008 19:53:03 +0000"  >&lt;p&gt;here is an updated zip.&lt;/p&gt;

&lt;p&gt;This one can be dropped into:&lt;br/&gt;
 &lt;a href=&quot;http://svn.apache.org/repos/asf/lucene/java/trunk/contrib&quot; class=&quot;external-link&quot;&gt;http://svn.apache.org/repos/asf/lucene/java/trunk/contrib&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and hooks into that build system.&lt;/p&gt;

&lt;p&gt;Now i &lt;b&gt;really&lt;/b&gt; think this is ready to go....&lt;/p&gt;</comment>
                    <comment id="12658062" author="ehatcher" created="Fri, 19 Dec 2008 11:06:13 +0000"  >&lt;p&gt;I&apos;ve taken some quick peeks into the code, run the unit tests, nicely packaged and presented!&lt;/p&gt;

&lt;p&gt;A couple of thoughts:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Maybe the Filter&apos;s should be using the DocIdSet API rather than the BitSet deprecated stuff?  We can refactor that after being committed I supposed, but not something we want to leave like that.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;DistanceQuery is awkwardly named.  It&apos;s not an (extends) Query.... it&apos;s a POJO with helpers.  Maybe DistanceQueryFactory?   (but it creates a Filter also)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;CartesianPolyFilter is not a Filter (but CartesianShapeFilter is)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think this looks good enough to commit as well, just noting the above for cosmetic refactoring consideration after the code is in.&lt;/p&gt;

</comment>
                    <comment id="12658089" author="ryantxu" created="Fri, 19 Dec 2008 14:20:05 +0000"  >&lt;p&gt;Agree &amp;#8211; but these changes are best made in svn.  &lt;/p&gt;

&lt;p&gt;More eyes will help out&lt;/p&gt;</comment>
                    <comment id="12659858" author="ryantxu" created="Tue, 30 Dec 2008 17:31:44 +0000"  >&lt;p&gt;added in #730067&lt;/p&gt;

&lt;p&gt;thanks everyone.&lt;/p&gt;</comment>
                    <comment id="12707821" author="earwin" created="Sun, 10 May 2009 19:16:20 +0100"  >&lt;p&gt;LatLonDistanceFilter.java:&lt;/p&gt;

&lt;p&gt;  public BitSet bits(IndexReader reader) throws IOException {&lt;/p&gt;

&lt;p&gt;    /* Create a BitSet to store the result */&lt;br/&gt;
    int maxdocs = reader.numDocs();               &amp;lt;----- probably reader.maxDoc ?&lt;br/&gt;
    BitSet bits = new BitSet(maxdocs);&lt;/p&gt;</comment>
                    <comment id="12708178" author="gsingers" created="Mon, 11 May 2009 21:00:57 +0100"  >&lt;p&gt;FWIW, you might find the discussion on &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-773&quot; title=&quot;Incorporate Local Lucene/Solr&quot;&gt;&lt;del&gt;SOLR-773&lt;/del&gt;&lt;/a&gt; interesting.&lt;/p&gt;</comment>
                    <comment id="12715640" author="mikemccand" created="Tue, 2 Jun 2009 20:38:43 +0100"  >&lt;p&gt;I committed that fix; thanks Earwin!&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12404381">SOLR-773</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12396407" name="spatial-lucene.zip" size="832654" author="pjaol" created="Thu, 18 Dec 2008 18:13:00 +0000" />
                    <attachment id="12396419" name="spatial.tar.gz" size="26142" author="ryantxu" created="Thu, 18 Dec 2008 19:53:03 +0000" />
                    <attachment id="12390432" name="spatial.zip" size="1388552" author="ryantxu" created="Thu, 18 Sep 2008 23:11:52 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 17 Sep 2008 20:29:30 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12364</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26344</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>