<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:59:35 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-834/LUCENE-834.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-834] Payload Queries</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-834</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Now that payloads have been implemented, it will be good to make them searchable via one or more Query mechanisms.  See &lt;a href=&quot;http://wiki.apache.org/lucene-java/Payload_Planning&quot; class=&quot;external-link&quot;&gt;http://wiki.apache.org/lucene-java/Payload_Planning&lt;/a&gt; for some background information and &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-755&quot; class=&quot;external-link&quot;&gt;https://issues.apache.org/jira/browse/LUCENE-755&lt;/a&gt; for the issue that started it all.  &lt;/p&gt;</description>
                <environment></environment>
            <key id="12365166">LUCENE-834</key>
            <summary>Payload Queries</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="gsingers">Grant Ingersoll</assignee>
                                <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Mar 2007 12:10:45 +0000</created>
                <updated>Fri, 10 May 2013 11:43:48 +0100</updated>
                    <resolved>Sun, 10 Aug 2008 22:43:00 +0100</resolved>
                                            <fixVersion>2.2</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12481892" author="gsingers" created="Sat, 17 Mar 2007 21:41:23 +0000"  >&lt;p&gt;First draft at a BoostingTermQuery, which is based on the SpanTermQuery and can be used for boosting the score of a term based on what is in the payload (for things like weighting terms higher according to their font size or part of speech).  &lt;/p&gt;

&lt;p&gt;A couple of classes that were previously package level are now public and have been marked as Public and for derivational purposes only.&lt;/p&gt;


&lt;p&gt;See the CHANGES.xml for some more details.&lt;/p&gt;

&lt;p&gt;I believe all tests still pass.&lt;/p&gt;</comment>
                    <comment id="12481896" author="gsingers" created="Sat, 17 Mar 2007 23:01:56 +0000"  >&lt;p&gt;I should add, one open question is how big the array in the BoostingSpanScorer should be preallocated to.  I set it to 256, but I would imagine it could be smaller???? but I&apos;m not sure.  Probably should be configurable, but I didn&apos;t go that route.  I would think, for practical purposes, that payloads should be kept small for the most part, otherwise performance will most likely suffer.  What do others think?  Have you seen papers/applications where the engine is storing large amounts of data on a per term basis?&lt;/p&gt;

&lt;p&gt;I could see where it might be useful to write VInts, etc. to the payload.  Perhaps a refactoring of some of the writing/reading methods to allow for usage of them may be useful.  Just thinking out loud...&lt;/p&gt;</comment>
                    <comment id="12484859" author="gsingers" created="Wed, 28 Mar 2007 13:59:04 +0100"  >&lt;p&gt;I committed this patch, plus added in some more documentation.  Everything is still marked experimental.&lt;/p&gt;

&lt;p&gt;SVN revision: 523302.&lt;/p&gt;</comment>
                    <comment id="12489519" author="michaelbusch" created="Tue, 17 Apr 2007 20:31:44 +0100"  >&lt;p&gt;Hi Grant,&lt;/p&gt;

&lt;p&gt;cool that you started implementing queries that use of payloads! I have a question about this one: BoostingTermQuery only takes the payload of the first term position into account for scoring. Could you explain why you implemented it this way? Shouldn&apos;t we rather compute the average of the payload values of all positions?&lt;/p&gt;</comment>
                    <comment id="12489523" author="gsingers" created="Tue, 17 Apr 2007 20:47:39 +0100"  >&lt;p&gt;Uh, because I always forget about multiple terms per position?  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Mea culpa.&lt;/p&gt;

&lt;p&gt;Average sounds good, or, would it be better to deliver all the payloads at a given term and let the implementation decide?&lt;/p&gt;</comment>
                    <comment id="12489534" author="michaelbusch" created="Tue, 17 Apr 2007 21:20:10 +0100"  >&lt;p&gt;I think averaging should be the default, but you are right, it would be nice if it was possible to alter this, maybe via subclassing?. I wouldn&apos;t recommend to gather all payloads and send them to Similarity. Memory consumption would be proportional to posting list size then.&lt;/p&gt;</comment>
                    <comment id="12489540" author="creamyg" created="Tue, 17 Apr 2007 22:06:54 +0100"  >&lt;p&gt;Would it be so bad if memory consumption was proportional to posting list size?  True, special consideration might be necessary for large documents if payloads were large, and if you have any Query subclasses that rewrite themselves to a zillion subqueries, each of which maintains its own TermPositions subclass instance, that could pose difficulties. What are some other problematic scenarios?&lt;/p&gt;</comment>
                    <comment id="12489562" author="michaelbusch" created="Tue, 17 Apr 2007 23:12:29 +0100"  >&lt;p&gt;Yes, I was mainly thinking about large documents. I think in general memory consumption during search should depend on query complexity, not on the actual index.&lt;br/&gt;
Besides, I don&apos;t see much benefits in gathering all payloads up front and processing them thereafter (maybe I overlook some?). What about having a method in BoostingTermScorer like:&lt;/p&gt;

&lt;p&gt;protected float calculateTermBoost(TermPostions tp);&lt;/p&gt;

&lt;p&gt;which implements averaging per default but can be overwritten by subclasses? An optimized implementation might e. g. consider just to read the first x% position payloads for large docs and estimate the boost for performance reasons.&lt;/p&gt;</comment>
                    <comment id="12489570" author="creamyg" created="Tue, 17 Apr 2007 23:48:29 +0100"  >&lt;p&gt;Averaging is how I&apos;ve got this implemented by default in KS.  However, all positions and boosts get read in at once.  TermDocs/TermPositions has been replaced by PostingList, which goes doc by doc.  The type of Posting assigned to each field (MatchPosting, ScorePosting, RichPosting, eventually PayloadPosting) determines how much gets read in. (KS doesn&apos;t have any queries that rewrite(), so it&apos;s only large docs that are an issue.)&lt;/p&gt;

&lt;p&gt;I haven&apos;t yet worked out the mechanics of per-position boosts and phrase queries.&lt;/p&gt;</comment>
                    <comment id="12490633" author="gsingers" created="Sat, 21 Apr 2007 17:54:58 +0100"  >&lt;p&gt;Fixed the issue with only loading one payload per term and added unit test for it.  The unit test uses the multiField field that contains a repeat of each set of terms per document. &lt;/p&gt;

&lt;p&gt;Updated the docs on the Similarity to indicate what offset and length are used for.  &lt;/p&gt;</comment>
                    <comment id="12491386" author="gsingers" created="Tue, 24 Apr 2007 19:13:11 +0100"  >&lt;p&gt;I applied and committed this patch&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12359147">LUCENE-755</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12353577" name="boosting.term.query.patch" size="28562" author="gsingers" created="Sat, 17 Mar 2007 21:41:23 +0000" />
                    <attachment id="12355983" name="btq.fix.patch" size="11788" author="gsingers" created="Sat, 21 Apr 2007 17:54:57 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 17 Apr 2007 19:31:44 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12907</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26896</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>