<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:32:15 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1168/LUCENE-1168.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1168] TermVectors index files can become corrupt when autoCommit=false</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1168</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Spinoff from this thread:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.gossamer-threads.com/lists/lucene/java-dev/55951&quot; class=&quot;external-link&quot;&gt;http://www.gossamer-threads.com/lists/lucene/java-dev/55951&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There are actually 2 separate cases here, both only happening when&lt;br/&gt;
autoCommit=false:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;First issue was caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-843&quot; title=&quot;improve how IndexWriter uses RAM to buffer added documents&quot;&gt;&lt;del&gt;LUCENE-843&lt;/del&gt;&lt;/a&gt; (sigh): if you add a bunch of&lt;br/&gt;
    docs with no term vectors, such that 1 or more flushes happen;&lt;br/&gt;
    then you add docs that do have term vectors, the tvx file will not&lt;br/&gt;
    have enough entries (= corruption).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Second issue was caused by bulk merging of term vectors&lt;br/&gt;
    (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1120&quot; title=&quot;Use bulk-byte-copy when merging term vectors&quot;&gt;&lt;del&gt;LUCENE-1120&lt;/del&gt;&lt;/a&gt; &amp;#8211; only in trunk) and bulk merging of stored fields&lt;br/&gt;
    (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1043&quot; title=&quot;Speedup merging of stored fields when field mapping &amp;quot;matches&amp;quot;&quot;&gt;&lt;del&gt;LUCENE-1043&lt;/del&gt;&lt;/a&gt;, in 2.3), and only shows when autoCommit=false, and,&lt;br/&gt;
    the bulk merging optimization runs.  In this case, the code that&lt;br/&gt;
    reads the rawDocs tries to read too far in the tvx/fdx files (it&apos;s&lt;br/&gt;
    not really index corruption but rather a bug in the rawDocs&lt;br/&gt;
    reading).&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment></environment>
            <key id="12388096">LUCENE-1168</key>
            <summary>TermVectors index files can become corrupt when autoCommit=false</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Feb 2008 14:52:23 +0000</created>
                <updated>Sun, 24 Feb 2008 00:40:05 +0000</updated>
                    <resolved>Thu, 7 Feb 2008 21:15:06 +0000</resolved>
                            <version>2.3</version>
                                <fixVersion>2.3.1</fixVersion>
                <fixVersion>2.4</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12566625" author="mikemccand" created="Thu, 7 Feb 2008 15:08:56 +0000"  >&lt;p&gt;Patch attached. I added the original test case as a unit test, plus 2&lt;br/&gt;
other tests.&lt;/p&gt;

&lt;p&gt;The fixes themselves are trivial (a few lines).  I plan to commit end&lt;br/&gt;
of today.&lt;/p&gt;

&lt;p&gt;Thanks for finding &amp;amp; reporting this Suresh!&lt;/p&gt;</comment>
                    <comment id="12568048" author="mikemccand" created="Tue, 12 Feb 2008 10:56:34 +0000"  >&lt;p&gt;Backported to 2.3 branch.&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                <outwardlinks description="blocks">
                            <issuelink>
            <issuekey id="12376448">SOLR-342</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12374975" name="LUCENE-1168.patch" size="8671" author="mikemccand" created="Thu, 7 Feb 2008 15:08:56 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12577</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26561</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>