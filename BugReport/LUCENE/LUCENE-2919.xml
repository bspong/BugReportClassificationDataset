<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:35:44 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2919/LUCENE-2919.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2919] IndexSplitter that divides by primary key term</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2919</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Index splitter that divides by primary key term.  The contrib MultiPassIndexSplitter we have divides by docid, however to guarantee external constraints it&apos;s sometimes necessary to split by a primary key term id.  I think this implementation is a fairly trivial change.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12498609">LUCENE-2919</key>
            <summary>IndexSplitter that divides by primary key term</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="jasonrutherglen">Jason Rutherglen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Feb 2011 03:33:38 +0000</created>
                <updated>Thu, 2 May 2013 03:29:41 +0100</updated>
                    <resolved>Sat, 18 Jun 2011 12:09:28 +0100</resolved>
                            <version>4.0-ALPHA</version>
                                <fixVersion>3.3</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>4</watches>
                                                    <comments>
                    <comment id="13002142" author="jasonrutherglen" created="Thu, 3 Mar 2011 19:04:59 +0000"  >&lt;p&gt;First cut.  Roughly divides an index by the exclusive mid term given.  &lt;/p&gt;</comment>
                    <comment id="13051375" author="mikemccand" created="Fri, 17 Jun 2011 23:48:56 +0100"  >&lt;p&gt;Patch looks good Jason!  Sorry for the long delay... I&apos;ll commit shortly.&lt;/p&gt;

&lt;p&gt;One small thing I fixed: I think the term.compareTo(endTermExcl) &amp;gt; 0 should be a &amp;gt;= 0?&lt;/p&gt;</comment>
                    <comment id="13051386" author="thetaphi" created="Sat, 18 Jun 2011 00:00:50 +0100"  >&lt;p&gt;I would implement this stuff a little bit more flexible:&lt;/p&gt;

&lt;p&gt;You could use a standard Filter to do the split, e.g. TermRangeFilter and use its returned DocIdSet as BitSet (if Filter returns no BitSet, can be checked by instanceof Bits, use OpenBitSetDISI as wrapper - like CachingWrapperFilter). This makes it more flexible, as this Filter again has some code duplication with the other IndexSplitter but is again very specific. A simple tool, let it be an DocumentExtractor, could extract parts of a bigger Index using any filter.&lt;/p&gt;

&lt;p&gt;How about that?&lt;/p&gt;</comment>
                    <comment id="13051388" author="thetaphi" created="Sat, 18 Jun 2011 00:02:29 +0100"  >&lt;p&gt;Too late, already committed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I will still provide patch tomorrow!&lt;/p&gt;</comment>
                    <comment id="13051411" author="thetaphi" created="Sat, 18 Jun 2011 01:17:28 +0100"  >&lt;p&gt;Here patch that changes PKIndexSplitter to use a Filter of &quot;allowed&quot; documents.&lt;/p&gt;

&lt;p&gt;Its yet hardcoded to be a TermRangeFilter, but a second flexible version could e.g. also use NumericRangeFilter, WildCardFilter or whatever.&lt;/p&gt;

&lt;p&gt;The test in the committed code had a bug (the second half of the index had to contain 1 more document, maybe that was the bug Mike mentioned or introduced?). The documentation says: If the midTerm is in the index, its document will be in the second index.&lt;/p&gt;

&lt;p&gt;I think the test should also be improved to check indexes with deleted documents.&lt;/p&gt;

&lt;p&gt;Maybe the Filter could automatically be negated by a boolean parameter to the FilterIndexReader&apos;s ctor.&lt;/p&gt;</comment>
                    <comment id="13051474" author="thetaphi" created="Sat, 18 Jun 2011 09:27:18 +0100"  >&lt;p&gt;New patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;simplified the Filter logic&lt;/li&gt;
	&lt;li&gt;added option to negate the filter in the IndexReader, this enabled use of only &lt;b&gt;one&lt;/b&gt; TermRangeFilter and simply negate it for the second pass.&lt;/li&gt;
	&lt;li&gt;made code correctly close using IOUtils.closeSafely&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Tests are still ugly.&lt;/p&gt;</comment>
                    <comment id="13051487" author="mikemccand" created="Sat, 18 Jun 2011 10:35:39 +0100"  >&lt;p&gt;Patch looks great Uwe!  I love how generic it is now, that you can just provide any Filter.&lt;/p&gt;</comment>
                    <comment id="13051488" author="mikemccand" created="Sat, 18 Jun 2011 10:37:24 +0100"  >&lt;p&gt;Here&apos;s patch for back-porting original approach to 3.x.&lt;/p&gt;</comment>
                    <comment id="13051490" author="thetaphi" created="Sat, 18 Jun 2011 10:55:50 +0100"  >&lt;p&gt;I will fix the test and commit this, then backport again, using your TermPositions.&lt;/p&gt;</comment>
                    <comment id="13051493" author="thetaphi" created="Sat, 18 Jun 2011 11:30:53 +0100"  >&lt;p&gt;Final patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;improved tests&lt;/li&gt;
	&lt;li&gt;changed api to be able to pass arbitrary filter&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This ready to commit, will do this soon, as the current trunk is unfortunately broken (splits incorrect)&lt;/p&gt;</comment>
                    <comment id="13051497" author="thetaphi" created="Sat, 18 Jun 2011 11:47:42 +0100"  >&lt;p&gt;Committed trunk revision: 1137162&lt;/p&gt;

&lt;p&gt;Backporting...&lt;/p&gt;</comment>
                    <comment id="13051498" author="thetaphi" created="Sat, 18 Jun 2011 12:07:21 +0100"  >&lt;p&gt;Patch for 3.x (not merged one).&lt;/p&gt;</comment>
                    <comment id="13051499" author="thetaphi" created="Sat, 18 Jun 2011 12:09:28 +0100"  >&lt;p&gt;Committed 3.x revision: 1137166&lt;/p&gt;</comment>
                    <comment id="13051510" author="mikemccand" created="Sat, 18 Jun 2011 13:53:17 +0100"  >&lt;p&gt;Thanks Uwe!&lt;/p&gt;</comment>
                    <comment id="13051552" author="jasonrutherglen" created="Sat, 18 Jun 2011 17:43:55 +0100"  >&lt;p&gt;Thanks, committing this means I can remove a custom GitHub branch with only this patch.  Also, it&apos;d be great if we somehow published nightly versions to Maven repositories.  Though they&apos;d accumulate over time.&lt;/p&gt;</comment>
                    <comment id="13051575" author="ryantxu" created="Sat, 18 Jun 2011 19:19:29 +0100"  >&lt;p&gt;to get the current maven build, check:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Maven-trunk/lastSuccessfulBuild/artifact/maven_artifacts/&quot; class=&quot;external-link&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Maven-trunk/lastSuccessfulBuild/artifact/maven_artifacts/&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="13051576" author="jasonrutherglen" created="Sat, 18 Jun 2011 19:22:08 +0100"  >&lt;p&gt;@Ryan Thanks!  What would one place as the artifact info into the pom.xml?&lt;/p&gt;</comment>
                    <comment id="13051586" author="ryantxu" created="Sat, 18 Jun 2011 20:00:39 +0100"  >&lt;p&gt;Jason... not really sure what you are asking  4.0-SNAPSHOT?&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-Maven-trunk/lastSuccessfulBuild/artifact/maven_artifacts/org/apache/lucene/lucene-core/4.0-SNAPSHOT/maven-metadata.xml&quot; class=&quot;external-link&quot;&gt;https://builds.apache.org/job/Lucene-Solr-Maven-trunk/lastSuccessfulBuild/artifact/maven_artifacts/org/apache/lucene/lucene-core/4.0-SNAPSHOT/maven-metadata.xml&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="13058927" author="rcmuir" created="Sat, 2 Jul 2011 03:40:16 +0100"  >&lt;p&gt;bulk close for 3.3&lt;/p&gt;</comment>
                    <comment id="13062281" author="jasonrutherglen" created="Sat, 9 Jul 2011 02:11:47 +0100"  >&lt;p&gt;Sorry for the naive off/on-topic question.  &lt;/p&gt;

&lt;p&gt;Ryan, what&apos;s the repository info that needs to be added to the pom.xml so that the project downloads the 4.0 snapshot?&lt;/p&gt;

&lt;p&gt;Eg, I don&apos;t think it&apos;s:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;repository&amp;gt;
  &amp;lt;id&amp;gt;lucene&amp;lt;/id&amp;gt;
  &amp;lt;url&amp;gt;https:&lt;span class=&quot;code-comment&quot;&gt;//builds.apache.org/job/Lucene-Solr-Maven-trunk/lastSuccessfulBuild/artifact/maven_artifacts/org/apache/&amp;lt;/url&amp;gt;
&lt;/span&gt;  &amp;lt;snapshots&amp;gt;
    &amp;lt;enabled&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;lt;/enabled&amp;gt;
  &amp;lt;/snapshots&amp;gt;
&amp;lt;/repository&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13163686" author="elmervc" created="Tue, 6 Dec 2011 16:35:03 +0000"  >&lt;p&gt;This was exactly what I was looking for!&lt;/p&gt;

&lt;p&gt;FTR, for this to work in Lucene 3.1.0 (and 3.2.0), only 2 calls to IOUtils.closeSafely(boolean suppressExceptions, Closeable... objects) need to be changed:&lt;/p&gt;

&lt;p&gt;IOUtils.closeSafely(!success, reader) -&amp;gt; IOUtils.closeSafely(reader)&lt;br/&gt;
IOUtils.closeSafely(!success, w) -&amp;gt; IOUtils.closeSafely(w)&lt;/p&gt;</comment>
                    <comment id="13163688" author="thetaphi" created="Tue, 6 Dec 2011 16:37:26 +0000"  >&lt;p&gt;Thanks!&lt;br/&gt;
You should upgrade to 3.5, 3.1 and 3.2 contains serious index corru(m)ption bugs! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                <outwardlinks description="blocks">
                            <issuelink>
            <issuekey id="12498553">HBASE-3529</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12510414">SOLR-2593</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12483038" name="LUCENE-2919-3x.patch" size="10377" author="thetaphi" created="Sat, 18 Jun 2011 12:07:21 +0100" />
                    <attachment id="12483036" name="LUCENE-2919-filter.patch" size="11854" author="thetaphi" created="Sat, 18 Jun 2011 11:30:53 +0100" />
                    <attachment id="12483032" name="LUCENE-2919-filter.patch" size="7210" author="thetaphi" created="Sat, 18 Jun 2011 09:27:18 +0100" />
                    <attachment id="12483016" name="LUCENE-2919-filter.patch" size="6979" author="thetaphi" created="Sat, 18 Jun 2011 01:17:28 +0100" />
                    <attachment id="12472584" name="LUCENE-2919.patch" size="8658" author="jasonrutherglen" created="Thu, 3 Mar 2011 19:04:59 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>5.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 17 Jun 2011 22:48:56 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10949</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24773</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>