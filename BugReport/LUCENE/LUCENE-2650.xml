<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:15:22 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2650/LUCENE-2650.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2650] improve windows defaults in FSDirectory</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2650</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Currently windows defaults to SimpleFSDirectory, but this is a problem due to the synchronization.&lt;/p&gt;

&lt;p&gt;I have been benchmarking queries &lt;b&gt;sequentially&lt;/b&gt; and was pretty surprised at how much faster&lt;br/&gt;
MMapDirectory is, for example for cases that do many seeks.&lt;/p&gt;

&lt;p&gt;I think we should change the defaults for windows as such:&lt;/p&gt;

&lt;p&gt;if (WINDOWS and UNMAP_SUPPORTED and 64-bit)&lt;br/&gt;
  use MMapDirectory&lt;br/&gt;
else&lt;br/&gt;
  use SimpleFSDirectory &lt;/p&gt;

&lt;p&gt;I think we should just consider doing this for 4.0 only and see how it goes.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12474415">LUCENE-2650</key>
            <summary>improve windows defaults in FSDirectory</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Sep 2010 18:52:15 +0100</created>
                <updated>Wed, 30 Mar 2011 16:50:31 +0100</updated>
                    <resolved>Wed, 8 Dec 2010 20:43:45 +0000</resolved>
                            <version>4.0-ALPHA</version>
                                <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/store</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12910694" author="rcmuir" created="Fri, 17 Sep 2010 18:54:46 +0100"  >&lt;p&gt;Here&apos;s the patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;sets the defaults as described in the issue&lt;/li&gt;
	&lt;li&gt;turns on unmap by default if its possible&lt;/li&gt;
	&lt;li&gt;when unmapping inputs, we should be careful to never allow the region to be accessed.&lt;br/&gt;
 so in close(), we ensure that clones, too set their buffer to null.&lt;br/&gt;
 and in clone() we add a friendlier exception rather than NPE.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12910695" author="rcmuir" created="Fri, 17 Sep 2010 18:55:30 +0100"  >&lt;p&gt;by the way, all lucene/solr tests pass on 64-bit windows with -Dtests.directory=FSDirectory&lt;/p&gt;</comment>
                    <comment id="12910760" author="yseeley@gmail.com" created="Fri, 17 Sep 2010 21:11:08 +0100"  >&lt;blockquote&gt;&lt;p&gt;I think we should just consider doing this for 4.0 only and see how it goes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1, that does seem to be the best option for windows servers at this point.&lt;/p&gt;</comment>
                    <comment id="12910778" author="rcmuir" created="Fri, 17 Sep 2010 21:46:19 +0100"  >&lt;p&gt;same patch, only i added the same safety (ensuring clones null their buffers) to the MultiMMapII that I added to the MMapII.&lt;/p&gt;</comment>
                    <comment id="12911064" author="rcmuir" created="Sat, 18 Sep 2010 19:42:07 +0100"  >&lt;p&gt;by the way, i ran all tests with -Dtests.directory=MMapDirectory under both Oracle/BEA Jrockit and IBM (although this one: 32 bit)&lt;br/&gt;
both these support the unmap hack and all lucene/solr tests pass (except for an unrelated thai issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2653&quot; title=&quot;ThaiAnalyzer assumes things about your jre&quot;&gt;&lt;del&gt;LUCENE-2653&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;so i&apos;d like to commit this to trunk only in a few days if no one objects.&lt;/p&gt;</comment>
                    <comment id="12912838" author="rcmuir" created="Tue, 21 Sep 2010 05:48:46 +0100"  >&lt;p&gt;I&apos;m going to add the extra safety here for cloned mmapindexinputs as a separate commit &lt;br/&gt;
from changing the defaults (in case we have to revert the defaults).&lt;/p&gt;

&lt;p&gt;Its also good to backport (unlike the defaults)&lt;/p&gt;</comment>
                    <comment id="12912978" author="rcmuir" created="Tue, 21 Sep 2010 14:41:05 +0100"  >&lt;p&gt;Committed revision 999409 to trunk.&lt;/p&gt;</comment>
                    <comment id="12966559" author="rcmuir" created="Fri, 3 Dec 2010 15:38:05 +0000"  >&lt;p&gt;I&apos;d like to reopen this issue to propose backporting the defaults change (for 64-bit windows) to 3.x&lt;/p&gt;

&lt;p&gt;Its been a few months now with this default in trunk and there haven&apos;t been any reported problems.&lt;br/&gt;
Additionally our tests are much better now (e.g. we test all directory impls).&lt;/p&gt;</comment>
                    <comment id="12969480" author="rcmuir" created="Wed, 8 Dec 2010 20:43:45 +0000"  >&lt;p&gt;Committed revision 1043666 (branch_3x)&lt;/p&gt;</comment>
                    <comment id="13013508" author="gsingers" created="Wed, 30 Mar 2011 16:50:31 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12474445">LUCENE-2651</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12454899" name="LUCENE-2650.patch" size="5367" author="rcmuir" created="Fri, 17 Sep 2010 21:46:19 +0100" />
                    <attachment id="12454881" name="LUCENE-2650.patch" size="4685" author="rcmuir" created="Fri, 17 Sep 2010 18:54:46 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 17 Sep 2010 20:11:08 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11188</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25042</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>