<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:07:10 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2645/LUCENE-2645.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2645] False assertion of &gt;0 position delta in StandardPostingsWriterImpl</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2645</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;StandardPostingsWriterImpl line 159 is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; delta &amp;gt; 0 || position == 0 || position == -1: &lt;span class=&quot;code-quote&quot;&gt;&quot;position=&quot;&lt;/span&gt; + position + &lt;span class=&quot;code-quote&quot;&gt;&quot; lastPosition=&quot;&lt;/span&gt; + lastPosition;            &lt;span class=&quot;code-comment&quot;&gt;// not quite right (&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; pos=0 is repeated twice we don&apos;t &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; it)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I enable assertions when I run my unit tests and I&apos;ve found this assertion to fail when delta is 0 which occurs when the same position value is sent in twice in arrow.  Once I added RemoveDuplicatesTokenFilter, this problem went away.  Should I really be forced to add this filter?  I think delta &amp;gt;= 0 would be a better assertion.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12474138">LUCENE-2645</key>
            <summary>False assertion of &gt;0 position delta in StandardPostingsWriterImpl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="dsmiley">David Smiley</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Sep 2010 04:35:02 +0100</created>
                <updated>Fri, 10 May 2013 11:44:37 +0100</updated>
                    <resolved>Sat, 4 Jun 2011 14:39:47 +0100</resolved>
                            <version>4.0-ALPHA</version>
                                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="13044077" author="tkurosaka" created="Fri, 3 Jun 2011 22:51:13 +0100"  >&lt;p&gt;This is preventing one of unit tests for our Tokenizer/Filter product to fail.  Although it looks as if the unit test case were failing, a closer look shows that the failure is from this this assertion inside the Lucene core.  &lt;br/&gt;
We have inspected the Token sequence that causes this assertion to fail, and it looks valid.&lt;br/&gt;
The attached program can reproduce this false assertion failure. Please give this bug a higher priority, and remove this assertion.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ javac -cp lucene-core-4.0-SNAPSHOT.jar LuceneTrunkAssertErrorReproducer.java
$ java -ea -cp .:lucene-core-4.0-SNAPSHOT.jar LuceneTrunkAssertErrorReproducer
Exception in thread &quot;main&quot; java.lang.AssertionError: position=1 lastPosition=1
	at org.apache.lucene.index.codecs.standard.StandardPostingsWriter.addPosition(StandardPostingsWriter.java:197)
	at org.apache.lucene.index.FreqProxTermsWriterPerField.flush(FreqProxTermsWriterPerField.java:385)
	at org.apache.lucene.index.FreqProxTermsWriter.flush(FreqProxTermsWriter.java:88)
	at org.apache.lucene.index.TermsHash.flush(TermsHash.java:117)
	at org.apache.lucene.index.DocInverter.flush(DocInverter.java:80)
	at org.apache.lucene.index.DocFieldProcessor.flush(DocFieldProcessor.java:75)
	at org.apache.lucene.index.DocumentsWriterPerThread.flush(DocumentsWriterPerThread.java:457)
	at org.apache.lucene.index.DocumentsWriter.doFlush(DocumentsWriter.java:421)
	at org.apache.lucene.index.DocumentsWriter.flushAllThreads(DocumentsWriter.java:548)
	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2776)
	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2753)
	at org.apache.lucene.index.IndexWriter.prepareCommit(IndexWriter.java:2619)
	at org.apache.lucene.index.IndexWriter.commitInternal(IndexWriter.java:2692)
	at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:2674)
	at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:2658)
	at LuceneTrunkAssertErrorReproducer.main(LuceneTrunkAssertErrorReproducer.java:39)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13044290" author="mikemccand" created="Sat, 4 Jun 2011 14:37:44 +0100"  >&lt;p&gt;Bug only affects 4.0 (we don&apos;t have this assert in 3.x), but I&apos;ll backport the test case to 3.x to make sure.&lt;/p&gt;</comment>
                    <comment id="13044291" author="mikemccand" created="Sat, 4 Jun 2011 14:39:47 +0100"  >&lt;p&gt;Thanks Kurosaka!&lt;/p&gt;</comment>
                    <comment id="13044860" author="dsmiley" created="Mon, 6 Jun 2011 15:14:43 +0100"  >&lt;p&gt;Thanks for the test Korusaka. I didn&apos;t realize my bug report last year that an assert condition&apos;s &quot;&amp;gt;&quot; should become &quot;&amp;gt;=&quot; was insufficient for a committer to simply make the 1-char change. I guess I should work on creating tests for nearly everything for my bug reports to get more traction. :-|&lt;/p&gt;</comment>
                    <comment id="13044918" author="mikemccand" created="Mon, 6 Jun 2011 16:48:29 +0100"  >&lt;p&gt;While test cases are always welcome, they certainly are not necessary in a patch (Yonik&apos;s Law of Patches).&lt;/p&gt;

&lt;p&gt;Which issue had you opened before?  Somehow it fell through the cracks... which, unfortunately, happens all the time in open-source.  Best to bump/gently nag on important fixes...&lt;/p&gt;</comment>
                    <comment id="13044926" author="dsmiley" created="Mon, 6 Jun 2011 17:00:17 +0100"  >&lt;blockquote&gt;&lt;p&gt;Which issue had you opened before?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This one! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &amp;#8211; But if you want to give Korusaka credit for it because he submitted a patch then fine. He went the extra mile that I didn&apos;t think was necessary.&lt;/p&gt;</comment>
                    <comment id="13044928" author="mikemccand" created="Mon, 6 Jun 2011 17:05:17 +0100"  >&lt;p&gt;D&apos;oh!  Woops &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  I didn&apos;t see that you had opened this issue!  And I missed it from last September... sorry &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I will add you to CHANGES.&lt;/p&gt;

&lt;p&gt;And no that extra mile is not necessary.  Just some gentle nagging would help stuff not fall past the event horizons on our todo lists &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13044929" author="tkurosaka" created="Mon, 6 Jun 2011 17:05:17 +0100"  >&lt;p&gt;Thank you, Michael, for quick fix, and David, for initially reporting this bug and giving me a credit &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13044930" author="mikemccand" created="Mon, 6 Jun 2011 17:06:29 +0100"  >&lt;p&gt;Thank you both &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12481411" name="LuceneTrunkAssertErrorReproducer.java" size="2642" author="tkurosaka" created="Fri, 3 Jun 2011 22:51:13 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 3 Jun 2011 21:51:13 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11193</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25047</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>