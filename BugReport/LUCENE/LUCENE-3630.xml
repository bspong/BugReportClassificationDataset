<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:19:52 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3630/LUCENE-3630.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3630] MultiReader and ParallelReader accidently override doOpenIfChanged(boolean readOnly) with doOpenIfChanged(boolean doClone)</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3630</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I found this during adding deprecations for RW access in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3606&quot; title=&quot;Make IndexReader really read-only in Lucene 4.0&quot;&gt;&lt;del&gt;LUCENE-3606&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;the base class defines doOpenIfChanged(boolean readOnly), but MultiReader and ParallelReader &quot;override&quot; this method with a signature doOpenIfChanged(doClone) and missing @Override. This makes consumers calling IR.openIfChanged(boolean readOnly) do the wrong thing. Instead they should get UOE like for the other unimplemented doOpenIfChanged methods in MR and PR.&lt;/p&gt;

&lt;p&gt;Easy fix is to rename and hide this internal &quot;reopen&quot; method, like DirectoryReader,...&lt;/p&gt;</description>
                <environment></environment>
            <key id="12534452">LUCENE-3630</key>
            <summary>MultiReader and ParallelReader accidently override doOpenIfChanged(boolean readOnly) with doOpenIfChanged(boolean doClone)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Dec 2011 10:42:39 +0000</created>
                <updated>Fri, 10 May 2013 11:44:28 +0100</updated>
                    <resolved>Sat, 10 Dec 2011 13:02:56 +0000</resolved>
                            <version>3.5</version>
                                <fixVersion>3.6</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13166813" author="thetaphi" created="Sat, 10 Dec 2011 09:43:06 +0000"  >&lt;p&gt;Only MultiReader has this problem, ParallelReader used another method name for the internal reopen. I will make the internal implementation private for both classes (they were protected because of the above override issue) and rename it to doReopen().&lt;/p&gt;

&lt;p&gt;The same on trunk, where some relicts of those method signatures are still protected. But the bug does not occur here.&lt;/p&gt;</comment>
                    <comment id="13166814" author="thetaphi" created="Sat, 10 Dec 2011 09:52:05 +0000"  >&lt;p&gt;Committed 3.x revision: 1212754&lt;br/&gt;
Committed changes merge + method renaming to trunk revision: 1212755&lt;/p&gt;</comment>
                    <comment id="13166816" author="thetaphi" created="Sat, 10 Dec 2011 10:06:23 +0000"  >&lt;p&gt;I found also a bug report on the user list about reopen not working with MultiReader. The use was calling openIfChanged(true) on MultiReader -&amp;gt; he got a clone instead of a reopened reader. The fix is to also implement doOpenIfChanged(boolean openReadOnly), but allow only true as param and throw UOE on false.&lt;/p&gt;</comment>
                    <comment id="13166817" author="thetaphi" created="Sat, 10 Dec 2011 10:09:31 +0000"  >&lt;p&gt;Added missing doOpenIfChanged(readonly=true) support in 3.x revision: 1212756&lt;/p&gt;</comment>
                    <comment id="13166846" author="thetaphi" created="Sat, 10 Dec 2011 12:10:19 +0000"  >&lt;p&gt;Further investigation showed that supporting openReadOnly on clone/readonly f*cks up refcounting. So don&apos;t support it at all and revert the last commit, clearly saying this.&lt;/p&gt;</comment>
                    <comment id="13166855" author="thetaphi" created="Sat, 10 Dec 2011 13:00:47 +0000"  >&lt;p&gt;Patch with revert and more explanatory UOE for clone and doOpenIfChanged&lt;/p&gt;</comment>
                    <comment id="13166856" author="thetaphi" created="Sat, 10 Dec 2011 13:02:56 +0000"  >&lt;p&gt;Committed fix in revision: 1212787&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12534597">LUCENE-3632</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12506844" name="LUCENE-3630-addMissingMethod.patch" size="2119" author="thetaphi" created="Sat, 10 Dec 2011 10:07:09 +0000" />
                    <attachment id="12506843" name="LUCENE-3630.patch" size="2479" author="thetaphi" created="Sat, 10 Dec 2011 09:47:43 +0000" />
                    <attachment id="12506849" name="LUCENE-3630-revert.patch" size="6792" author="thetaphi" created="Sat, 10 Dec 2011 13:00:47 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>220175</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24068</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>