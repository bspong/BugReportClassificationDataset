<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:16:10 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3362/LUCENE-3362.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3362] Initialization error of Junit tests with solr-test-framework with IDEs and Maven</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3362</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I&apos;m currently developping a new component for Solr. And in my Netbeans project, I have created two Test classes for this component: one class for simple unit tests (derived from  SolrTestCaseJ4 class) and a second one for tests with sharding (derived from  BaseDistributedSearchTestCase).&lt;br/&gt;
When I launch a test with these two classes, I have an error in the initialization of the second class of tests (no matter the class is, this is always the second executed class which fails). The error comes from an &quot;assert&quot; which failed in the begining of the function &quot;initRandom()&quot; of LuceneTestCase class :&lt;/p&gt;

&lt;p&gt;assert !random.initialized;&lt;/p&gt;

&lt;p&gt;But, if I launch each test class separatly, all the tests succeed!&lt;/p&gt;

&lt;p&gt;After a discussion with Mr. Muir, the problems seems to be related to the incompatibility of the class LuceneTestCase with the functioning of Maven projects in IDEs.&lt;/p&gt;

&lt;p&gt;According to mister Muir:&lt;/p&gt;

&lt;p&gt;&quot;&lt;br/&gt;
The problem is that via ant, tests work like this (e.g. for 3 test classes):&lt;br/&gt;
computeTestMethods&lt;br/&gt;
beforeClass&lt;br/&gt;
afterClass&lt;br/&gt;
computeTestMethods&lt;br/&gt;
beforeClass&lt;br/&gt;
AfterClass&lt;br/&gt;
computeTestMethods&lt;br/&gt;
beforeClass&lt;br/&gt;
afterClass&lt;/p&gt;

&lt;p&gt;but via an IDE, if you run it from a folder like you did, then it does this:&lt;br/&gt;
computeTestMethods&lt;br/&gt;
computeTestMethods&lt;br/&gt;
computeTestMethods&lt;br/&gt;
beforeClass&lt;br/&gt;
afterClass&lt;br/&gt;
beforeClass&lt;br/&gt;
afterClass&lt;br/&gt;
beforeClass&lt;br/&gt;
afterClass &lt;br/&gt;
&quot;&lt;/p&gt;</description>
                <environment>&lt;p&gt;NetBeans 6.9.1, Maven 2.2.1, Solr 3.3.0&lt;/p&gt;</environment>
            <key id="12518042">LUCENE-3362</key>
            <summary>Initialization error of Junit tests with solr-test-framework with IDEs and Maven</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="gquaire">G&#233;rald Quaire</reporter>
                        <labels>
                        <label>maven</label>
                        <label>tests</label>
                    </labels>
                <created>Fri, 5 Aug 2011 16:34:50 +0100</created>
                <updated>Sun, 27 Nov 2011 12:31:42 +0000</updated>
                    <resolved>Mon, 8 Aug 2011 12:38:14 +0100</resolved>
                            <version>3.4</version>
                                <fixVersion>3.4</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>general/test</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13080029" author="rcmuir" created="Fri, 5 Aug 2011 16:43:34 +0100"  >&lt;p&gt;Wait, this can&apos;t affect 3.3.0.&lt;/p&gt;

&lt;p&gt;I didnt add this assert until a couple weeks ago: &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12487642/SOLR-2673_randomize_methods.patch&quot; class=&quot;external-link&quot;&gt;https://issues.apache.org/jira/secure/attachment/12487642/SOLR-2673_randomize_methods.patch&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="13080049" author="rcmuir" created="Fri, 5 Aug 2011 17:15:48 +0100"  >&lt;p&gt;the only good solution given the different workflows these different testrunners do, is for the runner to have its own seed.&lt;/p&gt;

&lt;p&gt;the problem is that any other solution either gives us non-reproducibility of tests, or we must give up the shuffling of test methods... I don&apos;t want to do either.&lt;/p&gt;

&lt;p&gt;patch changes them to hex so the seed values are about as long as they are now (nobody cares whats in them, and its all copy-paste anyway).&lt;/p&gt;</comment>
                    <comment id="13080910" author="rcmuir" created="Mon, 8 Aug 2011 12:38:14 +0100"  >&lt;p&gt;Thanks for reporting this G&#233;rald!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12489491" name="LUCENE-3362.patch" size="4057" author="rcmuir" created="Fri, 5 Aug 2011 17:15:48 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 5 Aug 2011 15:43:34 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2729</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24334</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>