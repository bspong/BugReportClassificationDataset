<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:12:14 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1992/LUCENE-1992.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1992] intermittent failure in TestIndexWriter. testExceptionDuringSync </title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1992</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
common.test:

    [mkdir] Created dir: C:\Projects\lucene\trunk-full1\build\test

    [junit] Testsuite: org.apache.lucene.index.TestIndexWriter

    [junit] Tests run: 102, Failures: 0, Errors: 1, Time elapsed: 100,297sec

    [junit]

    [junit] Testcase: testExceptionDuringSync(org.apache.lucene.index.TestIndexWriter): Caused an ERROR

    [junit] _a.fnm

    [junit] java.io.FileNotFoundException: _a.fnm

    [junit]     at org.apache.lucene.store.MockRAMDirectory.openInput(MockRAMDirectory.java:226)

    [junit]     at org.apache.lucene.index.FieldInfos.&amp;lt;init&amp;gt;(FieldInfos.java:68)

    [junit]     at org.apache.lucene.index.SegmentReader$CoreReaders.&amp;lt;init&amp;gt;(SegmentReader.java:116)

    [junit]     at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:620)

    [junit]     at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:590)

    [junit]     at org.apache.lucene.index.DirectoryReader.&amp;lt;init&amp;gt;(DirectoryReader.java:104)

    [junit]     at org.apache.lucene.index.ReadOnlyDirectoryReader.&amp;lt;init&amp;gt;(ReadOnlyDirectoryReader.java:27)

    [junit]     at org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:74)

    [junit]     at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:704)

    [junit]     at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:69)

    [junit]     at org.apache.lucene.index.IndexReader.open(IndexReader.java:307)

    [junit]     at org.apache.lucene.index.IndexReader.open(IndexReader.java:193)

    [junit]     at org.apache.lucene.index.TestIndexWriter.testExceptionDuringSync(TestIndexWriter.java:2723)

    [junit]     at org.apache.lucene.util.LuceneTestCase.runBare(LuceneTestCase.java:206)

    [junit]

    [junit]

    [junit] Test org.apache.lucene.index.TestIndexWriter FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
            <key id="12438406">LUCENE-1992</key>
            <summary>intermittent failure in TestIndexWriter. testExceptionDuringSync </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Sun, 18 Oct 2009 22:49:26 +0100</created>
                <updated>Sat, 7 Nov 2009 14:57:30 +0000</updated>
                    <resolved>Mon, 19 Oct 2009 00:46:07 +0100</resolved>
                                            <fixVersion>2.9.1</fixVersion>
                <fixVersion>3.0</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12767162" author="mikemccand" created="Mon, 19 Oct 2009 00:41:22 +0100"  >&lt;p&gt;Patch attached.  I&apos;ll commit shortly on trunk &amp;amp; 2.9.1.&lt;/p&gt;

&lt;p&gt;There is a thread hazard that happens when a merge is committing just&lt;br/&gt;
as an exception is happening during sync.  There merge actually&lt;br/&gt;
changes the segmentInfos, but fails to checkpoint before exiting the&lt;br/&gt;
sync block.  If an exception during syncing is handled in another&lt;br/&gt;
thread, this can then decRef the newly merged segment to 0, deleting&lt;br/&gt;
it too early.&lt;/p&gt;</comment>
                    <comment id="12767164" author="mikemccand" created="Mon, 19 Oct 2009 00:46:07 +0100"  >&lt;p&gt;Thanks for reporting this Uwe!&lt;/p&gt;</comment>
                    <comment id="12767223" author="thetaphi" created="Mon, 19 Oct 2009 07:23:07 +0100"  >&lt;p&gt;From the patch:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
-    &lt;span class=&quot;code-comment&quot;&gt;// We expect sync exceptions in the merge threads
&lt;/span&gt;-    cms.setSuppressExceptions();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should this also applied to bw branch (2.4 for) 2.9 and (2.9 for) 3.0? I do not know what this call really does and what effect it has.&lt;/p&gt;</comment>
                    <comment id="12767258" author="mikemccand" created="Mon, 19 Oct 2009 10:25:55 +0100"  >&lt;blockquote&gt;&lt;p&gt;Should this also applied to bw branch (2.4 for) 2.9 and (2.9 for) 3.0? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, it can only be applied on trunk.&lt;/p&gt;

&lt;p&gt;That call tells ConcurrentMergeScheduler to expect exceptions during this test, which when autoCommit is true (which this test is doing everywhere except trunk) will happen because when a merge completes, it&apos;ll commit and call Directory.sync which throws the intentional exception.&lt;/p&gt;</comment>
                    <comment id="12774618" author="mikemccand" created="Sat, 7 Nov 2009 14:57:30 +0000"  >&lt;p&gt;Bulk close all 2.9.1 issues.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12422514" name="LUCENE-1992.patch" size="1626" author="mikemccand" created="Mon, 19 Oct 2009 00:41:22 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 19 Oct 2009 06:23:07 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11779</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25733</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>