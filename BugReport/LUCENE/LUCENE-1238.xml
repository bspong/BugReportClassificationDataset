<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:07:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1238/LUCENE-1238.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1238] intermittent failures of  TestTimeLimitedCollector.testTimeoutMultiThreaded in nightly tests</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1238</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Occasionly TestTimeLimitedCollector.testTimeoutMultiThreaded fails. e.g. with this output:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   [junit] ------------- Standard Error -----------------
   [junit] Exception in thread &quot;Thread-97&quot; junit.framework.AssertionFailedError: no hits found!
   [junit]     at junit.framework.Assert.fail(Assert.java:47)
   [junit]     at junit.framework.Assert.assertTrue(Assert.java:20)
   [junit]     at org.apache.lucene.search.TestTimeLimitedCollector.doTestTimeout(TestTimeLimitedCollector.java:152)
   [junit]     at org.apache.lucene.search.TestTimeLimitedCollector.access$100(TestTimeLimitedCollector.java:38)
   [junit]     at org.apache.lucene.search.TestTimeLimitedCollector$1.run(TestTimeLimitedCollector.java:231)
   [junit] Exception in thread &quot;Thread-85&quot; junit.framework.AssertionFailedError: no hits found!
   [junit]     at junit.framework.Assert.fail(Assert.java:47)
   [junit]     at junit.framework.Assert.assertTrue(Assert.java:20)
   [junit]     at org.apache.lucene.search.TestTimeLimitedCollector.doTestTimeout(TestTimeLimitedCollector.java:152)
   [junit]     at org.apache.lucene.search.TestTimeLimitedCollector.access$100(TestTimeLimitedCollector.java:38)
   [junit]     at org.apache.lucene.search.TestTimeLimitedCollector$1.run(TestTimeLimitedCollector.java:231)
   [junit] ------------- ---------------- ---------------
   [junit] Testcase: testTimeoutMultiThreaded(org.apache.lucene.search.TestTimeLimitedCollector):      FAILED
   [junit] some threads failed! expected:&amp;lt;50&amp;gt; but was:&amp;lt;48&amp;gt;
   [junit] junit.framework.AssertionFailedError: some threads failed! expected:&amp;lt;50&amp;gt; but was:&amp;lt;48&amp;gt;
   [junit]     at org.apache.lucene.search.TestTimeLimitedCollector.doTestMultiThreads(TestTimeLimitedCollector.java:255)
   [junit]     at org.apache.lucene.search.TestTimeLimitedCollector.testTimeoutMultiThreaded(TestTimeLimitedCollector.java:220)
   [junit]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Problem either in test or in TimeLimitedCollector.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12391709">LUCENE-1238</key>
            <summary>intermittent failures of  TestTimeLimitedCollector.testTimeoutMultiThreaded in nightly tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="doronc">Doron Cohen</assignee>
                                <reporter username="doronc">Doron Cohen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Mar 2008 05:34:38 +0000</created>
                <updated>Tue, 18 Mar 2008 21:08:30 +0000</updated>
                    <resolved>Tue, 18 Mar 2008 21:08:30 +0000</resolved>
                            <version>2.4</version>
                                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12579749" author="doronc" created="Tue, 18 Mar 2008 07:23:03 +0000"  >&lt;p&gt;fixed typo in summary.&lt;/p&gt;</comment>
                    <comment id="12579752" author="doronc" created="Tue, 18 Mar 2008 07:44:21 +0000"  >&lt;p&gt;Problem was in test.&lt;/p&gt;

&lt;p&gt;However fix adds a greediness option to time-limited-collector (TLC):&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A greedy TLC upon timeout would allow the wrapped collector to&lt;br/&gt;
  collect current doc and only then throw the timeout exception.&lt;/li&gt;
	&lt;li&gt;A non greedy TLC (the default, as before) will immediately throw the exception.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For the test, setting to greedy allows to require that at least one doc was collected.&lt;/p&gt;

&lt;p&gt;I addition this patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Adds missing javadocs for TLC constructor.&lt;/li&gt;
	&lt;li&gt;Increase &quot;slack&quot; in timeout requirements in the test.&lt;br/&gt;
  This is to prevent further noise in this: &lt;br/&gt;
     HLC is required to timeout &quot;not too soon and not too late&quot;, but in a busy machine &lt;br/&gt;
     the &quot;not too late&quot; part is problematic to test.&lt;br/&gt;
     I considered to removing this part (not too late), but decided to leave it in for now.&lt;/li&gt;
	&lt;li&gt;Adds a test for the setGreedy() option.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All TLC tests pass.&lt;/p&gt;</comment>
                    <comment id="12579960" author="doronc" created="Tue, 18 Mar 2008 18:01:12 +0000"  >&lt;p&gt;I intend to commit this later today.&lt;/p&gt;</comment>
                    <comment id="12580083" author="doronc" created="Tue, 18 Mar 2008 21:08:30 +0000"  >&lt;p&gt;Committed. &lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12378106" name="LUCENE-1238.patch" size="11103" author="doronc" created="Tue, 18 Mar 2008 07:44:21 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12509</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26490</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>