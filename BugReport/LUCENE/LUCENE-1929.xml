<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:06:49 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1929/LUCENE-1929.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1929] Highlighter doesn&apos;t support NumericRangeQuery or deprecated RangeQuery</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1929</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Sucks. Will throw a NullPointer exception. &lt;/p&gt;

&lt;p&gt;Only NumericRangeQuery will throw the exception.&lt;br/&gt;
RangeQuery just won&apos;t highlight.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12436699">LUCENE-1929</key>
            <summary>Highlighter doesn&apos;t support NumericRangeQuery or deprecated RangeQuery</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Sun, 27 Sep 2009 17:18:52 +0100</created>
                <updated>Sat, 7 Nov 2009 14:57:30 +0000</updated>
                    <resolved>Mon, 19 Oct 2009 20:26:10 +0100</resolved>
                            <version>2.9</version>
                                <fixVersion>2.9.1</fixVersion>
                                <component>modules/highlighter</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12760056" author="markrmiller@gmail.com" created="Sun, 27 Sep 2009 17:52:41 +0100"  >&lt;p&gt;So making NumericQuery Hilightable is not going to be so quick and easy - best first step is prob just make it be skipped, rather than throwing a NullPointer exception. Highlight support can come later.&lt;/p&gt;</comment>
                    <comment id="12760060" author="thetaphi" created="Sun, 27 Sep 2009 18:00:26 +0100"  >&lt;p&gt;Does it throw a NPE for every &quot;unknown&quot; query type? Or is this because of it is a subclass of MTQ?&lt;/p&gt;</comment>
                    <comment id="12760061" author="thetaphi" created="Sun, 27 Sep 2009 18:02:16 +0100"  >&lt;p&gt;I read what stands in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1221&quot; title=&quot;Change Solr Highlighting to use the SpanScorer with MultiTerm expansion by default&quot;&gt;&lt;del&gt;SOLR-1221&lt;/del&gt;&lt;/a&gt;: It calls MTQ.getTerm() which is deprecated. The getTerm() method is moved downto the sub classes, so MTQ.getTerm() will be removed in 3.0. Because of this there was no intention to implement it in NumericRQ.&lt;/p&gt;</comment>
                    <comment id="12760062" author="markrmiller@gmail.com" created="Sun, 27 Sep 2009 18:08:13 +0100"  >&lt;p&gt;Yeah - eventually (as in when getTerm() is removed), the Highlighter was going to have to deal with that anyway. Deprecated methods should still work though - so whether return null from getTerm is right or wrong, I dunno.&lt;/p&gt;

&lt;p&gt;But thats the issue - except for TermRangeQuery, the Highlighter looks for the Field by calling getTerm and asking for the field - made the exception for TermRangeQuery, but not NumericRangeQuery - so it throw a nullpointer exception. Easy to sidestep in Lucene, more of a pain in Solr (as the plan is to release with 2.9.0)&lt;/p&gt;</comment>
                    <comment id="12760064" author="markrmiller@gmail.com" created="Sun, 27 Sep 2009 18:20:36 +0100"  >&lt;blockquote&gt;&lt;p&gt;so whether return null from getTerm is right or wrong, I dunno.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In fact, its probably wrong - but at this point its a moot point.&lt;/p&gt;</comment>
                    <comment id="12760066" author="thetaphi" created="Sun, 27 Sep 2009 18:36:28 +0100"  >&lt;blockquote&gt;&lt;p&gt;In fact, its probably wrong - but at this point its a moot point.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It can only return a &quot;pattern term&quot; if there is one. What is the pattern term for TermRangeQuery or NumericRangeQuery. Both return null and that is fine (and not a backwards break, as both classes are new in 2.9). That was exactly the discussion behind removing the getTerm() stuff from MTQ.&lt;/p&gt;

&lt;p&gt;Solr could maybe remove the NRQ from the highligter query.&lt;/p&gt;</comment>
                    <comment id="12760067" author="markrmiller@gmail.com" created="Sun, 27 Sep 2009 18:41:11 +0100"  >&lt;p&gt;I realize the difficulties - I wasn&apos;t blaming you for the problem - but it is/was a problem.&lt;/p&gt;

&lt;p&gt;We deprecated getTerm() because of the problem (I think I did it? Don&apos;t remember though).&lt;/p&gt;

&lt;p&gt;However, unless it was documented to return null, just deprecating it doesn&apos;t really fix things. Code thats trying to use it on the base MultiTermQuery isn&apos;t going&lt;br/&gt;
to be checking if its null unless its documented as such.&lt;/p&gt;

&lt;p&gt;I agree its screwed and it will be nice when its gone.&lt;/p&gt;

&lt;p&gt;Like I said, its a moot point. But I&apos;ll argue any point, moot or not &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12760068" author="markrmiller@gmail.com" created="Sun, 27 Sep 2009 18:45:05 +0100"  >&lt;blockquote&gt;&lt;p&gt;and not a backwards break, as both classes are new in 2.9&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I didn&apos;t claim its back compat break - but any method on a base class than can return null really needs to be documented as such. I should have caught that and done a better doc job on MulitTermQuery. I&apos;m not claiming back compat issues, I&apos;m claiming its wrong.&lt;/p&gt;

&lt;p&gt;On a side note, its a bummer we seem to have lost the history on RangeQuery.&lt;/p&gt;</comment>
                    <comment id="12760070" author="thetaphi" created="Sun, 27 Sep 2009 18:49:05 +0100"  >&lt;blockquote&gt;&lt;p&gt;On a side note, its a bummer we seem to have lost the history on RangeQuery.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No we didn&apos;t. As RangeQuery is just a wrapper and will be removed in 3.0, I renamed the old RangeQuery to the new TermRangeQuery (so the history is there) and created a new class RangeQuery for the BW compatibility. This is better than loosing the history in 3.0.&lt;/p&gt;</comment>
                    <comment id="12760071" author="markrmiller@gmail.com" created="Sun, 27 Sep 2009 18:50:33 +0100"  >&lt;p&gt;Ah, thanks - didn&apos;t catch that. Wondered how it could happen - looked weird. Faint memory of the whole thing returning though.&lt;/p&gt;</comment>
                    <comment id="12760072" author="markrmiller@gmail.com" created="Sun, 27 Sep 2009 18:54:49 +0100"  >&lt;blockquote&gt;&lt;p&gt;I wasn&apos;t blaming you for the problem&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In fact, now that I can see the history to remember, if you go back and look, I am completely to blame &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12760074" author="thetaphi" created="Sun, 27 Sep 2009 18:58:55 +0100"  >&lt;p&gt;Another option to fix Solr&apos;s highlighter is to fix this in lucene and release solr with 2.9.0, but an updated highlighter package. As it is contrib, that shouldn&apos;t be a problem?&lt;/p&gt;

&lt;p&gt;In my opinion, the whole highlighter stuff should somehow be implemented without tons of instanceof checks (thats really wired). Maybe we extend Query by some highligther addons in future. I think we had an issue about that?&lt;/p&gt;</comment>
                    <comment id="12760076" author="markrmiller@gmail.com" created="Sun, 27 Sep 2009 19:04:12 +0100"  >&lt;blockquote&gt;&lt;p&gt;Another option to fix Solr&apos;s highlighter is to fix this in lucene and release solr with 2.9.0, but an updated highlighter package. As it is contrib, that shouldn&apos;t be a problem?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thats a good point and prob the way to go.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In my opinion, the whole highlighter stuff should somehow be implemented without tons of instanceof checks (thats really wired). Maybe we extend Query by some highligther addons in future. I think we had an issue about that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes - would be wonderful to lose all of the instanceOf - its just kind of legacy - how its worked in the past. Getting away from it would be &lt;b&gt;fantastic&lt;/b&gt;.&lt;/p&gt;</comment>
                    <comment id="12762037" author="markrmiller@gmail.com" created="Sun, 4 Oct 2009 18:48:26 +0100"  >&lt;p&gt;The 2.9.1 fix&lt;/p&gt;</comment>
                    <comment id="12765082" author="thetaphi" created="Tue, 13 Oct 2009 15:10:49 +0100"  >&lt;p&gt;This is fixed also in trunk, but different where MTQ.getTerm() is not available (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1977&quot; title=&quot;Remove MultiTermQuery.getTerm()&quot;&gt;&lt;del&gt;LUCENE-1977&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                    <comment id="12767392" author="mikemccand" created="Mon, 19 Oct 2009 18:26:33 +0100"  >&lt;p&gt;Mark is this one reading to go into 2.9.1?&lt;/p&gt;</comment>
                    <comment id="12767394" author="markrmiller@gmail.com" created="Mon, 19 Oct 2009 18:29:28 +0100"  >&lt;p&gt;Yeah - sorry - has been for some time. I can commit it shortly.&lt;/p&gt;</comment>
                    <comment id="12774609" author="mikemccand" created="Sat, 7 Nov 2009 14:57:30 +0000"  >&lt;p&gt;Bulk close all 2.9.1 issues.&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12428023">SOLR-1221</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12421233" name="LUCENE-1929.patch" size="6827" author="markrmiller@gmail.com" created="Sun, 4 Oct 2009 18:48:26 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 27 Sep 2009 17:00:26 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11840</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25796</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>