<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:35:11 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2359/LUCENE-2359.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2359] CartesianPolyFilterBuilder doesn&apos;t handle edge case around the 180 meridian</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2359</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Test case:  &lt;br/&gt;
Points all around the globe, plus two points at 0, 179.9 and 0,-179.9 (on each side of the meridian).  Then, do a Cartesian Tier filter on a point right near those two.  It will return all the points when it should just return those two.&lt;/p&gt;

&lt;p&gt;The flawed logic is in the else clause below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (longX2 != 0.0) {
		&lt;span class=&quot;code-comment&quot;&gt;//We are around the prime meridian
&lt;/span&gt;		&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (longX == 0.0) {
			longX = longX2;
			longY = 0.0;
        	shape = getShapeLoop(shape,ctp,latX,longX,latY,longY);
		} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {&lt;span class=&quot;code-comment&quot;&gt;//we are around the 180th longitude
&lt;/span&gt;			longX = longX2;
			longY = -180.0;
			shape = getShapeLoop(shape,ctp,latY,longY,latX,longX);
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Basically, the Y and X values are transposed.  This currently says go from longY (-180) all the way around  to longX which is the lower left longitude of the box formed.  Instead, it should go from the lower left long to -180.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12460854">LUCENE-2359</key>
            <summary>CartesianPolyFilterBuilder doesn&apos;t handle edge case around the 180 meridian</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="gsingers">Grant Ingersoll</assignee>
                                <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Mar 2010 21:20:16 +0100</created>
                <updated>Thu, 2 May 2013 03:29:36 +0100</updated>
                    <resolved>Sat, 27 Nov 2010 23:25:35 +0000</resolved>
                            <version>2.9</version>
                <version>2.9.1</version>
                <version>2.9.2</version>
                <version>3.0</version>
                <version>3.0.1</version>
                                <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/spatial</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12852104" author="gsingers" created="Wed, 31 Mar 2010 22:06:18 +0100"  >&lt;p&gt;Fix.  Will commit today or tomorrow.  Going to double check logic again.&lt;/p&gt;</comment>
                    <comment id="12852136" author="nicolas.helleringer" created="Wed, 31 Mar 2010 23:10:19 +0100"  >&lt;p&gt;This is fixed in the pendig re work done by Chris Male&lt;/p&gt;

&lt;p&gt;Should be comitted in a whole soon&lt;/p&gt;</comment>
                    <comment id="12852139" author="nicolas.helleringer" created="Wed, 31 Mar 2010 23:14:30 +0100"  >&lt;p&gt;If you want to check / compare code while waiting for the commit from Chris :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://code.google.com/p/spatial-search-lucene/source/browse/trunk/src/main/java/org/apache/lucene/spatial/tier/CartesianPolyFilterBuilder.java&quot; class=&quot;external-link&quot;&gt;http://code.google.com/p/spatial-search-lucene/source/browse/trunk/src/main/java/org/apache/lucene/spatial/tier/CartesianPolyFilterBuilder.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Nicolas&lt;/p&gt;</comment>
                    <comment id="12852141" author="cmale" created="Wed, 31 Mar 2010 23:20:53 +0100"  >&lt;p&gt;Hi Nicolas,&lt;/p&gt;

&lt;p&gt;Sorry I hadn&apos;t seen that you had been working on this.  I will create a patch based on your work so we can get this fixed up in the next day or two.&lt;/p&gt;</comment>
                    <comment id="12852374" author="gsingers" created="Thu, 1 Apr 2010 14:17:24 +0100"  >&lt;p&gt;Committed revision 929956.&lt;/p&gt;</comment>
                    <comment id="12853091" author="nicolas.helleringer" created="Sat, 3 Apr 2010 08:42:42 +0100"  >&lt;p&gt;Here is a patch to import the CartesianPolyFilterBuilder:getBoxShape part of the code from the worked we have done with Chris @ GoogleCode&lt;br/&gt;
I tried to keep it as minimal as possible&lt;/p&gt;

&lt;p&gt;Next step is to patch LatLngRectangle in the same way&lt;/p&gt;</comment>
                    <comment id="12853121" author="gsingers" created="Sat, 3 Apr 2010 12:22:46 +0100"  >&lt;p&gt;Nicolas,&lt;/p&gt;

&lt;p&gt;How does this compare to what I already committed?  Also, can you put up a patch that doesn&apos;t have all the formatting changes and just has the bug fixes?&lt;/p&gt;</comment>
                    <comment id="12853150" author="nicolas.helleringer" created="Sat, 3 Apr 2010 16:58:30 +0100"  >&lt;p&gt;Here is the re worked patch, sorry for the formatting :s&lt;/p&gt;

&lt;p&gt;This patch  :&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;handles East AND West tiles when close to the prime meridian (either by 0 or by 180 values) where yours only catch East ones&lt;/li&gt;
	&lt;li&gt;reworks the logic to have algorithm in the code logic instead of in variables values&lt;/li&gt;
	&lt;li&gt;gives variavbles full names to better understand the code logic&lt;/li&gt;
	&lt;li&gt;separates the logic of handling the prime meridian which stays in getBoxShape from the logic of add boxes to the shape in addBoxes : addBoxes is called one time in normal case and two times for search area crossing the prime meridian (half by half)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Hope it better fits your need now&lt;/p&gt;</comment>
                    <comment id="12853156" author="gsingers" created="Sat, 3 Apr 2010 17:41:33 +0100"  >&lt;blockquote&gt;&lt;p&gt;handles East AND West tiles when close to the prime meridian (either by 0 or by 180 values) where yours only catch East ones&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How so?&lt;/p&gt;</comment>
                    <comment id="12853162" author="nicolas.helleringer" created="Sat, 3 Apr 2010 18:04:16 +0100"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (longUpperRight &amp;lt; longLowerLeft) { &lt;span class=&quot;code-comment&quot;&gt;// Box cross the 180 meridian
&lt;/span&gt;      addBoxes(shape, ctp, latLowerLeft, longLowerLeft, latUpperRight, LatLng.LONGITUDE_DEGREE_RANGE / 2);
      addBoxes(shape, ctp, latLowerLeft, -LatLng.LONGITUDE_DEGREE_RANGE / 2, latUpperRight, longUpperRight);
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      addBoxes(shape, ctp, latLowerLeft, longLowerLeft, latUpperRight, longUpperRight);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the search area cross the prime meridian we spilt the addBoxes call in two : one half East of the meridian, one half West to handle the jump from -180 degree to 180&lt;br/&gt;
If not we do a normal addBoxes call&lt;/p&gt;</comment>
                    <comment id="12853164" author="gsingers" created="Sat, 3 Apr 2010 18:17:27 +0100"  >&lt;p&gt;AFAICT, that is covered by the current code.&lt;/p&gt;</comment>
                    <comment id="12853166" author="nicolas.helleringer" created="Sat, 3 Apr 2010 18:20:14 +0100"  >&lt;p&gt;Re checked and you are right.&lt;/p&gt;

&lt;p&gt;I read too fast your patch without the global code context.&lt;br/&gt;
With your fix the code is doing the right thing concerning the prime meridian.&lt;/p&gt;

&lt;p&gt;So, mine should only be considered as a cosmetic one.&lt;br/&gt;
If you do no find that the logic is clearer with it, you can ignore it.&lt;/p&gt;</comment>
                    <comment id="12853904" author="nicolas.helleringer" created="Tue, 6 Apr 2010 13:14:02 +0100"  >&lt;p&gt;Worked again around the code in CartesianPolyFilterBuilder and finally set up this test (attached).&lt;/p&gt;

&lt;p&gt;Here lies the difference between the two patchs : as I reworked all the logic I did change the code in getShapeLoop that you did not touch.&lt;/p&gt;

&lt;p&gt;Maybe it shall be adressed in another issue.&lt;/p&gt;</comment>
                    <comment id="12856565" author="gsingers" created="Tue, 13 Apr 2010 20:22:24 +0100"  >&lt;p&gt;Committed Nicolas&apos; updates to trunk&lt;/p&gt;</comment>
                    <comment id="12856902" author="gsingers" created="Wed, 14 Apr 2010 15:01:45 +0100"  >&lt;p&gt;Nicolas,&lt;/p&gt;

&lt;p&gt;Why the change in the best fit algorithm?  Do you have a reference to calculation of this?&lt;/p&gt;</comment>
                    <comment id="12856929" author="nicolas.helleringer" created="Wed, 14 Apr 2010 16:24:28 +0100"  >&lt;p&gt;What my code do :&lt;/p&gt;

&lt;p&gt;It looks how many times you can fit the search diameter (2.0d * range) into the distance that will be split into longitudes range (I-e distanceUnit.earthCircumference()).&lt;/p&gt;

&lt;p&gt;And then it takes the first biggest level of Tier that will have a range just above the search diameter (int bestFit = (int) Math.ceil(log2(times))&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;This way you ll have the better comprise betwenn  fetching the less number of boxes and not fetching too big boxes with too many documents in them.&lt;/p&gt;</comment>
                    <comment id="12856954" author="nicolas.helleringer" created="Wed, 14 Apr 2010 17:42:06 +0100"  >&lt;p&gt;Summary tables :&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Tile Level&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;TierLegnth&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;TierBoxes&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;TileXLength (miles)&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;24902&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12451&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6225,5&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;64&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3112,75&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;256&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1556,375&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;32&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1024&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;778,1875&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;64&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4096&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;389,09375&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;128&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16384&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;194,546875&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;256&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;65536&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;97,2734375&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;512&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;262144&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;48,63671875&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1024&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1048576&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;24,31835938&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2048&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4194304&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12,15917969&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4096&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16777216&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6,079589844&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;13&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8192&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;67108864&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3,039794922&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16384&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;268435456&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1,519897461&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;15&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;32768&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1073741824&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,75994873&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Radius (miles)&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;legacy bestFit&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;legacy bestFit TileLength&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;legacy bestFit max number of Box to fetch&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;new bestFit&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;new bestFit TileLength&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;new bestFit number of Box to fetch&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;18&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,75994873&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;14&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1,519897461&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,75994873&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;64&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6,079589844&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;15&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;0,75994873&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;225&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12,15917969&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;25&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;13&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3,039794922&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;48,63671875&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;50&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6,079589844&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;97,2734375&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12,15917969&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;194,546875&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;250&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;24,31835938&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;144&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;389,09375&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;500&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;48,63671875&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;144&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;778,1875&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;97,2734375&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;144&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1556,375&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2500&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;194,546875&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;196&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3112,75&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;389,09375&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;196&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6225,5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;778,1875&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;196&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12451&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12856963" author="gsingers" created="Wed, 14 Apr 2010 18:15:38 +0100"  >&lt;p&gt;Thanks, Nicolas.  To me, based on these values, the answer is to revert and then refactor.  &lt;/p&gt;

&lt;p&gt;Also, is the 9 in the last column of the second table (radius 25) an outlier or a c &amp;amp; p error?  That seems really odd.&lt;/p&gt;</comment>
                    <comment id="12856980" author="nicolas.helleringer" created="Wed, 14 Apr 2010 18:38:56 +0100"  >&lt;p&gt;I do agree, it is odd.&lt;/p&gt;

&lt;p&gt;I shall go through the process again and watch where it comes from.&lt;/p&gt;</comment>
                    <comment id="12856984" author="yseeley@gmail.com" created="Wed, 14 Apr 2010 18:43:56 +0100"  >&lt;p&gt;Hi Nicolas, I like the idea of reducing the number of tiles that need to be queried, but it does look like the current reduction might be a little aggressive for the default.  Perhaps we could have some sort of filtering accuracy parameter that could give more precise control over the trade-off?&lt;/p&gt;</comment>
                    <comment id="12857001" author="nicolas.helleringer" created="Wed, 14 Apr 2010 19:10:09 +0100"  >&lt;p&gt;hi Yonik,&lt;/p&gt;

&lt;p&gt;I do not aggre : as the 4 tiles requested go cover all the search area there is no gain in beeing less accurate.&lt;/p&gt;</comment>
                    <comment id="12857006" author="yseeley@gmail.com" created="Wed, 14 Apr 2010 19:22:53 +0100"  >&lt;p&gt;Perhaps I&apos;m misreading the table?  I had assumed that your new algorithm was often less selective (allowed more points through the filter) than the old.  Is this not the case?&lt;/p&gt;</comment>
                    <comment id="12857010" author="nicolas.helleringer" created="Wed, 14 Apr 2010 19:27:41 +0100"  >&lt;p&gt;Yonik, &lt;/p&gt;

&lt;p&gt;It is the case, but the points left out are for sure not in the search area.&lt;/p&gt;

&lt;p&gt;Grant,&lt;/p&gt;

&lt;p&gt;You were right ! It was a c&amp;amp;p error ! As you can see in the above table &apos;TileLength&apos; for Tier 9 is 48,63671875 not 24,31835938 and then the &apos;new bestFit number of Box to fetch&apos; becomes ... 4 ! =)&lt;/p&gt;</comment>
                    <comment id="12857054" author="gsingers" created="Wed, 14 Apr 2010 20:53:33 +0100"  >&lt;p&gt;So, you&apos;re saying then that your approach only ever has to retrieve 4 boxes no matter the radius?  Do you have a reference URL to where we can read more about it?&lt;/p&gt;

&lt;p&gt;Also, please edit your table to reflect the error&lt;/p&gt;</comment>
                    <comment id="12857081" author="nicolas.helleringer" created="Wed, 14 Apr 2010 21:41:27 +0100"  >&lt;p&gt;Edit done.&lt;/p&gt;

&lt;p&gt;I am currently browsing to find a good reference.&lt;/p&gt;</comment>
                    <comment id="12857158" author="gsingers" created="Thu, 15 Apr 2010 01:18:09 +0100"  >&lt;p&gt;Reverted the last patch and the other related ones.  Let&apos;s have a discussion on the mailing list about coordinating all of this.  I&apos;d like to see the patches be focused on solving the specific issues and then we can open up a new issue for refactoring this to make for pluggable best fit, etc.&lt;/p&gt;</comment>
                    <comment id="12926276" author="rcmuir" created="Fri, 29 Oct 2010 14:15:24 +0100"  >&lt;p&gt;reopening for possible 2.9.4/3.0.3 backport.&lt;/p&gt;</comment>
                    <comment id="12932473" author="nicolas.helleringer" created="Tue, 16 Nov 2010 14:18:03 +0000"  >&lt;p&gt;Robert,&lt;/p&gt;

&lt;p&gt;Here is the patch updated to work on rev 1035291&lt;/p&gt;

&lt;p&gt;Validating Unit Tests are included&lt;/p&gt;</comment>
                    <comment id="12964471" author="thetaphi" created="Sat, 27 Nov 2010 23:25:35 +0000"  >&lt;p&gt;Resolving again as this issue will not be backported to 2.9/3.0 branches.&lt;/p&gt;</comment>
                    <comment id="13013389" author="gsingers" created="Wed, 30 Mar 2011 16:50:11 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                <outwardlinks description="blocks">
                            <issuelink>
            <issuekey id="12460358">LUCENE-2350</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12465105">LUCENE-2475</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12459701" name="LUCENE-2359.patch" size="12771" author="nicolas.helleringer" created="Tue, 16 Nov 2010 14:18:03 +0000" />
                    <attachment id="12440695" name="LUCENE-2359.patch" size="12675" author="nicolas.helleringer" created="Sat, 3 Apr 2010 16:58:30 +0100" />
                    <attachment id="12440675" name="LUCENE-2359.patch" size="19317" author="nicolas.helleringer" created="Sat, 3 Apr 2010 08:42:42 +0100" />
                    <attachment id="12440404" name="LUCENE-2359.patch" size="2219" author="gsingers" created="Wed, 31 Mar 2010 22:06:18 +0100" />
                    <attachment id="12440882" name="TEST-2359.patch" size="1345" author="nicolas.helleringer" created="Tue, 6 Apr 2010 13:14:02 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>5.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 31 Mar 2010 22:10:19 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11437</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25331</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>