<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:05:10 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2996/LUCENE-2996.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2996] addIndexes(IndexReader) incorrectly applies existing deletes</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2996</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;If you perform these operations:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;deleteDocuments(Term) for all the new documents&lt;/li&gt;
	&lt;li&gt;addIndexes(IndexReader)&lt;/li&gt;
	&lt;li&gt;commit&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Then addIndexes applies the previous deletes on the incoming indexes as well, which is incorrect. If you call addIndexes(Directory) instead, the deletes are applied beforehand, as they should. The solution, as Mike indicated here: &lt;a href=&quot;http://osdir.com/ml/general/2011-03/msg20876.html&quot; class=&quot;external-link&quot;&gt;http://osdir.com/ml/general/2011-03/msg20876.html&lt;/a&gt; is to add &lt;b&gt;flush(false,true)&lt;/b&gt; to addIndexes(IndexReader).&lt;/p&gt;

&lt;p&gt;I will create a patch with a matching unit test shortly.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12502541">LUCENE-2996</key>
            <summary>addIndexes(IndexReader) incorrectly applies existing deletes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="shaie">Shai Erera</assignee>
                                <reporter username="shaie">Shai Erera</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Mar 2011 05:18:11 +0100</created>
                <updated>Fri, 3 Jun 2011 17:37:10 +0100</updated>
                    <resolved>Fri, 1 Apr 2011 11:54:46 +0100</resolved>
                                            <fixVersion>3.1.1</fixVersion>
                <fixVersion>3.2</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13012026" author="shaie" created="Mon, 28 Mar 2011 13:38:47 +0100"  >&lt;p&gt;Patch adds a test to TestAddIndexes and the trivial fix to IndexWriter (against 3x).&lt;/p&gt;

&lt;p&gt;I will port to trunk and 3.1 branch after a review.&lt;/p&gt;</comment>
                    <comment id="13012028" author="simonw" created="Mon, 28 Mar 2011 13:44:53 +0100"  >&lt;p&gt;Shai, patch looks ok.&lt;/p&gt;

&lt;p&gt;shouldn&apos;t the test use  newIndexWriterConfig(TEST_VERSION_CURRENT, new MockAnalyzer()) instead of new IndexWriterConfig(...)&lt;/p&gt;</comment>
                    <comment id="13012041" author="shaie" created="Mon, 28 Mar 2011 14:07:54 +0100"  >&lt;blockquote&gt;&lt;p&gt;shouldn&apos;t the test use newIndexWriterConfig(TEST_VERSION_CURRENT, new MockAnalyzer()) instead of new IndexWriterConfig(...)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good catch ! it was a remnant from the time this test was a static main().&lt;/p&gt;</comment>
                    <comment id="13012116" author="shaie" created="Mon, 28 Mar 2011 16:56:56 +0100"  >&lt;p&gt;Committed revision 1086275 (3x).&lt;br/&gt;
Committed revision 1086288 (trunk).&lt;/p&gt;

&lt;p&gt;I don&apos;t know if it&apos;s ok to commit to branches/lucene_solr_3_1 just yet, so I&apos;ll keep this open for now.&lt;/p&gt;</comment>
                    <comment id="13014511" author="shaie" created="Fri, 1 Apr 2011 11:54:46 +0100"  >&lt;p&gt;Committed revision 1087647 (3.1.1).&lt;/p&gt;</comment>
                    <comment id="13043462" author="rcmuir" created="Fri, 3 Jun 2011 17:37:10 +0100"  >&lt;p&gt;Bulk closing for 3.2&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12474772" name="LUCENE-2996.patch" size="2949" author="shaie" created="Mon, 28 Mar 2011 14:07:54 +0100" />
                    <attachment id="12474771" name="LUCENE-2996.patch" size="2950" author="shaie" created="Mon, 28 Mar 2011 13:38:47 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 28 Mar 2011 12:44:53 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2173</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24696</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>