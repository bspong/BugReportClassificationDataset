<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:22:06 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3901/LUCENE-3901.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3901] Add katakana stem filter to better deal with certain katakana spelling variants</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3901</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Many Japanese katakana words end in a long sound that is sometimes optional.&lt;/p&gt;

&lt;p&gt;For example, &#12497;&#12540;&#12486;&#12451;&#12540; and &#12497;&#12540;&#12486;&#12451; are both perfectly valid for &quot;party&quot;.  Similarly we have &#12475;&#12531;&#12479;&#12540; and &#12475;&#12531;&#12479; that are variants of &quot;center&quot; as well as &#12469;&#12540;&#12496;&#12540; and &#12469;&#12540;&#12496; for &quot;server&quot;.&lt;/p&gt;

&lt;p&gt;I&apos;m proposing that we add a katakana stemmer that removes this long sound if the terms are longer than a configurable length.  It&apos;s also possible to add the variant as a synonym, but I think stemming is preferred from a ranking point of view.&lt;/p&gt;
</description>
                <environment></environment>
            <key id="12547571">LUCENE-3901</key>
            <summary>Add katakana stem filter to better deal with certain katakana spelling variants</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="cm">Christian Moen</assignee>
                                <reporter username="cm">Christian Moen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Mar 2012 09:59:57 +0000</created>
                <updated>Fri, 10 May 2013 11:42:58 +0100</updated>
                    <resolved>Sat, 24 Mar 2012 08:10:35 +0000</resolved>
                                            <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13235497" author="cm" created="Thu, 22 Mar 2012 10:46:40 +0000"  >&lt;p&gt;Patch for this coming up shortly.&lt;/p&gt;</comment>
                    <comment id="13235746" author="cm" created="Thu, 22 Mar 2012 17:22:04 +0000"  >&lt;p&gt;Find attached a patch for this.&lt;/p&gt;

&lt;p&gt;The stemming is done by &lt;tt&gt;KuromojiKatakanaStemFilter&lt;/tt&gt;, which has been added to &lt;tt&gt;KuromojiAnalyzer&lt;/tt&gt; and a corresponding &lt;tt&gt;KuromojiKatakanaStemFilterFactory&lt;/tt&gt; has been added to the &lt;tt&gt;text_ja&lt;/tt&gt; field type in &lt;tt&gt;schema.xml&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Note that this stemming is now turned on by default and I think it makes good sense to do so.  The minimum length of a token considered for stemming is configurable and I&apos;ve made the default of 4 explicit in &lt;tt&gt;schema.xml&lt;/tt&gt; to convey that it&apos;s there.&lt;/p&gt;

&lt;p&gt;The stemmer only supports full-width katakana and should be used in combination with a &lt;tt&gt;CJKWidthFilter&lt;/tt&gt; if stemming half-width characters is required and you&apos;re doing your wiring.  Both &lt;tt&gt;text_ja&lt;/tt&gt; and &lt;tt&gt;KuromojiAnalyzer&lt;/tt&gt; takes care of this, and the default overall processing is the same.&lt;/p&gt;

&lt;p&gt;There are some test cases in &lt;tt&gt;TestKuromojiKatakanaStemFilter&lt;/tt&gt;, but I&apos;ve added a case to &lt;tt&gt;TestKuromojiAnalyzer&lt;/tt&gt; that demonstrates how the stemming works in combination with katakana compound splitting.&lt;/p&gt;

&lt;p&gt;In Japanese, &quot;manager&quot; can be written both as &#12510;&#12493;&#12540;&#12472;&#12515;&#12540; and &#12510;&#12493;&#12540;&#12472;&#12515; (and probably also &#12510;&#12493;&#12472;&#12515;&#12540;), and for the compound &#12471;&#12491;&#12450;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12510;&#12493;&#12540;&#12472;&#12515;&#12540; (senior project manager), we now get tokens &#12471;&#12491;&#12450; (senior) &#12503;&#12525;&#12472;&#12455;&#12463;&#12488; (project) &#12510;&#12493;&#12540;&#12472;&#12515; (manager), and we&apos;ve stemmed the last token by removing the trailing &#12540;.  Kuromoji also makes the compound &#12471;&#12491;&#12450;&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12510;&#12493;&#12540;&#12472;&#12515; a synonym to &#12471;&#12491;&#12450;, and &#12540; is also removed for the synonym compound.&lt;/p&gt;

&lt;p&gt;Tests pass and I&apos;ve also tested this end-to-end in a Solr trunk build.&lt;/p&gt;</comment>
                    <comment id="13235753" author="rcmuir" created="Thu, 22 Mar 2012 17:26:12 +0000"  >&lt;p&gt;patch looks great!&lt;/p&gt;</comment>
                    <comment id="13235877" author="cm" created="Thu, 22 Mar 2012 18:48:40 +0000"  >&lt;p&gt;Thanks a lot, Robert.&lt;/p&gt;

&lt;p&gt;I&apos;ll do some more testing and hopefully I can commit this to &lt;tt&gt;trunk&lt;/tt&gt; and &lt;tt&gt;branch_3x&lt;/tt&gt; tomorrow.&lt;/p&gt;</comment>
                    <comment id="13237461" author="cm" created="Sat, 24 Mar 2012 06:42:19 +0000"  >&lt;p&gt;Updated patch with minor whitespace changes to &lt;tt&gt;schema.xml&lt;/tt&gt; and added an entry in &lt;tt&gt;CHANGES.txt&lt;/tt&gt;.&lt;/p&gt;</comment>
                    <comment id="13237462" author="cm" created="Sat, 24 Mar 2012 06:43:23 +0000"  >&lt;p&gt;Committed revision 1304719 on &lt;tt&gt;trunk&lt;/tt&gt;.  Backporting to &lt;tt&gt;branch_3x&lt;/tt&gt;.&lt;/p&gt;</comment>
                    <comment id="13237475" author="cm" created="Sat, 24 Mar 2012 07:57:04 +0000"  >&lt;p&gt;Committed revision 1304727 on &lt;tt&gt;branch_3x&lt;/tt&gt;.  Fixed a small javadoc issue in revisions 1304728 and 1304741.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12519789" name="LUCENE-3901.patch" size="16652" author="cm" created="Sat, 24 Mar 2012 06:36:15 +0000" />
                    <attachment id="12519464" name="LUCENE-3901.patch" size="15125" author="cm" created="Thu, 22 Mar 2012 16:57:38 +0000" />
                    <attachment id="12519458" name="LUCENE-3901.patch" size="15098" author="cm" created="Thu, 22 Mar 2012 16:34:44 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 22 Mar 2012 17:26:12 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>232670</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>23800</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>