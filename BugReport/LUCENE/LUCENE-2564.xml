<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:18:45 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2564/LUCENE-2564.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2564] wordlistloader is inefficient</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2564</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;WordListLoader is basically used for loading up stopwords lists, stem dictionaries, etc.&lt;br/&gt;
Unfortunately the api returns Set&amp;lt;String&amp;gt; and sometimes even HashSet&amp;lt;String&amp;gt; or HashMap&amp;lt;String,String&amp;gt;&lt;/p&gt;

&lt;p&gt;I think we should break it and return CharArraySets and CharArrayMaps (but leave the return value as generic Set,Map).&lt;/p&gt;

&lt;p&gt;If someone objects to breaking it in 3.1, then we can do this only in 4.0, but i think it would be good to fix it both places.&lt;br/&gt;
The reason is that if someone does new FooAnalyzer() a lot (probably not uncommon) i think its doing a bunch of useless copying.&lt;/p&gt;

&lt;p&gt;I think we should slap @lucene.internal on this API too, since thats mostly how its being used.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12470164">LUCENE-2564</key>
            <summary>wordlistloader is inefficient</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Jul 2010 14:08:41 +0100</created>
                <updated>Sun, 27 Nov 2011 12:29:22 +0000</updated>
                    <resolved>Thu, 10 Nov 2011 04:03:00 +0000</resolved>
                                            <fixVersion>3.5</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12892316" author="rcmuir" created="Mon, 26 Jul 2010 15:11:20 +0100"  >&lt;p&gt;There are more problems with this loader... it uses FileReader (platform-dependent encoding).&lt;br/&gt;
I think we should break it to default to UTF-8, too.&lt;/p&gt;</comment>
                    <comment id="12982331" author="rcmuir" created="Sun, 16 Jan 2011 16:31:33 +0000"  >&lt;p&gt;as much as i hate the fact this one uses the default encoding in its File method, &lt;br/&gt;
its only used by StopFilter etc.&lt;/p&gt;

&lt;p&gt;Our provided analyzers and Solr are treating all this stuff as UTF-8 encoded resources,&lt;br/&gt;
so I think its ok to delay until 3.2 and re-assess the best way.&lt;/p&gt;

&lt;p&gt;I made a prototype patch and it was complicated, mainly because i wanted to fix&lt;br/&gt;
this thing so that its coherent with Solr&apos;s resource loeading.&lt;/p&gt;</comment>
                    <comment id="13043552" author="rcmuir" created="Fri, 3 Jun 2011 17:40:44 +0100"  >&lt;p&gt;bulk move 3.2 -&amp;gt; 3.3&lt;/p&gt;</comment>
                    <comment id="13146802" author="simonw" created="Wed, 9 Nov 2011 06:32:26 +0000"  >&lt;p&gt;I tried to simplify this a little without going into changing solr (not sure what robert meant by that anyway...)  I basically moved all File / InputStream related stuff out of WordListLoader and made it fixed to CharArraySet/Map - there are still nocommits in there since I wanted to get some feedback what others think before I add javadoc everywhere&lt;/p&gt;</comment>
                    <comment id="13147192" author="rcmuir" created="Wed, 9 Nov 2011 17:58:14 +0000"  >&lt;p&gt;patch looks good... i was just referring to Solr&apos;s resource loading of stopwords and stuff.&lt;/p&gt;

&lt;p&gt;but we don&apos;t have to do that here, imo we should fix the issues here first.&lt;/p&gt;

&lt;p&gt;Maybe for the javadocs on getReader we should explain that unlike the java default, it creates&lt;br/&gt;
a reader that will throw an exception if it detects the charset is wrong &lt;br/&gt;
(so this is good for configuration files-reading like WordListLoader, but not recommended&lt;br/&gt;
for say documents crawled from the web or something)&lt;/p&gt;</comment>
                    <comment id="13147364" author="simonw" created="Wed, 9 Nov 2011 23:27:31 +0000"  >&lt;p&gt;next iteration&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;added javadocs &amp;amp; removed all nocommits&lt;/li&gt;
	&lt;li&gt;renamed IOUtils#getReader to IOUtils#getDecodingReader&lt;/li&gt;
	&lt;li&gt;used a CharSet instance instead of a string in all getDecodingReader variants so we can use a cached UTF-8 CharSet instance instead of looking it up for each invocation.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;I think its ready... where do we add the CHANGES.txt entry for that stuff? I figure since we backport this I should put it under lucene/contrib/CHANGES.txt? &lt;/p&gt;</comment>
                    <comment id="13147366" author="rcmuir" created="Wed, 9 Nov 2011 23:30:50 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I figure since we backport this I should put it under lucene/contrib/CHANGES.txt? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                    <comment id="13147418" author="simonw" created="Thu, 10 Nov 2011 01:17:32 +0000"  >&lt;p&gt;final patch containing a CHANGES.txt entry - I am going to commit this in a minute&lt;/p&gt;</comment>
                    <comment id="13147475" author="simonw" created="Thu, 10 Nov 2011 04:03:00 +0000"  >&lt;p&gt;committed to trunk and backported to 3.x&lt;/p&gt;</comment>
                    <comment id="13157739" author="thetaphi" created="Sun, 27 Nov 2011 12:29:22 +0000"  >&lt;p&gt;Bulk close after release of 3.5&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12503154" name="LUCENE-2564.patch" size="55458" author="simonw" created="Thu, 10 Nov 2011 01:17:32 +0000" />
                    <attachment id="12503144" name="LUCENE-2564.patch" size="54764" author="simonw" created="Wed, 9 Nov 2011 23:27:31 +0000" />
                    <attachment id="12503022" name="LUCENE-2564.patch" size="52128" author="simonw" created="Wed, 9 Nov 2011 06:32:25 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 9 Nov 2011 06:32:26 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2960</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25128</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>