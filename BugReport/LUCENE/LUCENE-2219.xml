<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:22:32 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2219/LUCENE-2219.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2219] improve BaseTokenStreamTestCase to test end()</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2219</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;If offsetAtt/end() is not implemented correctly, then there can be problems with highlighting: see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2207&quot; title=&quot;CJKTokenizer generates tokens with incorrect offsets&quot;&gt;&lt;del&gt;LUCENE-2207&lt;/del&gt;&lt;/a&gt; for an example with CJKTokenizer.&lt;/p&gt;

&lt;p&gt;In my opinion you currently have to write too much code to test this.&lt;/p&gt;

&lt;p&gt;This patch does the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;adds optional Integer finalOffset (can be null for no checking) to assertTokenStreamContents&lt;/li&gt;
	&lt;li&gt;in assertAnalyzesTo, automatically fill this with the String length()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In my opinion this is correct, for assertTokenStreamContents the behavior should be optional, it may not even have a Tokenizer. If you are using assertTokenStreamContents with a Tokenizer then simply provide the extra expected value to check it.&lt;/p&gt;

&lt;p&gt;for assertAnalyzesTo then it is implied there is a tokenizer so it should be checked.&lt;/p&gt;

&lt;p&gt;the tests pass for core but there are failures in contrib even besides CJKTokenizer (apply Koji&apos;s patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2207&quot; title=&quot;CJKTokenizer generates tokens with incorrect offsets&quot;&gt;&lt;del&gt;LUCENE-2207&lt;/del&gt;&lt;/a&gt;, it is correct). Specifically ChineseTokenizer has a similar problem.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12445757">LUCENE-2219</key>
            <summary>improve BaseTokenStreamTestCase to test end()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Jan 2010 08:15:49 +0000</created>
                <updated>Mon, 16 May 2011 19:15:44 +0100</updated>
                    <resolved>Sun, 17 Jan 2010 21:45:13 +0000</resolved>
                            <version>2.9</version>
                <version>3.0</version>
                                <fixVersion>2.9.2</fixVersion>
                <fixVersion>3.0.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12801351" author="rcmuir" created="Sun, 17 Jan 2010 09:29:14 +0000"  >&lt;p&gt;this fixes contrib too, as long as you apply the CJKTokenizer fix from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2207&quot; title=&quot;CJKTokenizer generates tokens with incorrect offsets&quot;&gt;&lt;del&gt;LUCENE-2207&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;end() was incorrect for ChineseTokenizer, SmartChinese, and Wikipedia&lt;/p&gt;</comment>
                    <comment id="12801357" author="thetaphi" created="Sun, 17 Jan 2010 10:00:26 +0000"  >&lt;p&gt;Wikipedia does not call super.end().&lt;/p&gt;

&lt;p&gt;Looks good!&lt;/p&gt;</comment>
                    <comment id="12801358" author="rcmuir" created="Sun, 17 Jan 2010 10:02:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;Wikipedia does not call super.end(). &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Uwe, thanks for taking a look...&lt;/p&gt;

&lt;p&gt;even StandardTokenizer does not call super.end()!&lt;/p&gt;

&lt;p&gt;should we really do this?&lt;/p&gt;</comment>
                    <comment id="12801378" author="rcmuir" created="Sun, 17 Jan 2010 11:48:36 +0000"  >&lt;p&gt;i merged Koji&apos;s fix and tests to CJK from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2207&quot; title=&quot;CJKTokenizer generates tokens with incorrect offsets&quot;&gt;&lt;del&gt;LUCENE-2207&lt;/del&gt;&lt;/a&gt; into this patch, and improved CJKTokenizer&apos;s tests to always use assertAnalyzesTo, for better checking.&lt;/p&gt;

&lt;p&gt;i plan to commit soon&lt;/p&gt;</comment>
                    <comment id="12801425" author="thetaphi" created="Sun, 17 Jan 2010 15:51:10 +0000"  >&lt;p&gt;I am fine with this patch!&lt;/p&gt;</comment>
                    <comment id="12801485" author="rcmuir" created="Sun, 17 Jan 2010 19:28:03 +0000"  >&lt;p&gt;Committed revision 900196 to trunk.&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310010">
                <name>Incorporates</name>
                                <outwardlinks description="incorporates">
                            <issuelink>
            <issuekey id="12445414">LUCENE-2207</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12430546" name="LUCENE-2219.patch" size="20715" author="rcmuir" created="Sun, 17 Jan 2010 11:48:35 +0000" />
                    <attachment id="12430542" name="LUCENE-2219.patch" size="14088" author="rcmuir" created="Sun, 17 Jan 2010 09:29:14 +0000" />
                    <attachment id="12430541" name="LUCENE-2219.patch" size="4508" author="rcmuir" created="Sun, 17 Jan 2010 08:16:24 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 17 Jan 2010 10:00:26 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11569</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25506</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>