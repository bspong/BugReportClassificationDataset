<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:24:55 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2774/LUCENE-2774.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2774] ant generate-maven-artifacts target broken for contrib</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2774</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;When executing &apos;ant generate-maven-artifacts&apos; from a pristine checkout of branch_3x/lucene or trunk/lucene the following error is encountered:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
dist-maven:
     [copy] Copying 1 file to /home/drew/lucene/branch_3x/lucene/build/contrib/analyzers/common
[artifact:install-provider] Installing provider: org.apache.maven.wagon:wagon-ssh:jar:1.0-beta-2:runtime
[artifact:pom] An error has occurred &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing the Maven artifact tasks.
[artifact:pom]  Diagnosis:
[artifact:pom] 
[artifact:pom] Unable to initialize POM pom.xml.template: Cannot find parent: org.apache.lucene:lucene-contrib &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project: org.apache.lucene:lucene-analyzers:jar:3.1-SNAPSHOT &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; project org.apache.lucene:lucene-analyzers:jar:3.1-SNAPSHOT
[artifact:pom] Unable to download the artifact from any repository
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The contrib portion of the ant build is executed in a subant task which does not pick up the pom definitions for lucene-parent and lucene-contrib from the main build.xml, so the lucene-parent and lucene-controb poms must be loaded specifically as a part of the contrib build using the artifact:pom task.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12480543">LUCENE-2774</key>
            <summary>ant generate-maven-artifacts target broken for contrib</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="steve_rowe">Steve Rowe</assignee>
                                <reporter username="drew.farris">Drew Farris</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 Nov 2010 20:08:47 +0000</created>
                <updated>Sun, 23 Jan 2011 17:12:35 +0000</updated>
                    <resolved>Sun, 23 Jan 2011 17:12:35 +0000</resolved>
                            <version>3.1</version>
                <version>4.0-ALPHA</version>
                                                <component>general/build</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12934343" author="drew.farris" created="Sun, 21 Nov 2010 20:11:36 +0000"  >&lt;p&gt;Attached a trivial patch that applies cleanly against both the 3.x branch and trunk.&lt;/p&gt;</comment>
                    <comment id="12934464" author="steve_rowe" created="Mon, 22 Nov 2010 13:50:45 +0000"  >&lt;p&gt;Hi Drew,&lt;/p&gt;

&lt;p&gt;I tried running &lt;tt&gt;ant generate-maven-artifacts&lt;/tt&gt; without your patch, and I see the same failure as you do.&lt;/p&gt;

&lt;p&gt;(Actually, when I first tried, with Ant 1.8.1, it wasn&apos;t able to find the maven ant tasks jar (the most recent) that I had placed in &lt;tt&gt;$ANT_HOME/lib/&lt;/tt&gt; - I downgraded to Ant 1.7.0 and everything went fine.  Apparently Ant 1.8.X no longer pays attention to jars in &lt;tt&gt;$ANT_HOME/lib/&lt;/tt&gt;?)&lt;/p&gt;

&lt;p&gt;However, after applying your patch, the build still fails on trunk (haven&apos;t tried branch_3x yet), though not with the same failure.&lt;/p&gt;

&lt;p&gt;(Ant 1.7.0, Sun JDK 1.6.0_13 on Cygwin/WinVista):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;BUILD FAILED
C:\cygwin\home\us\svn\lucene\dev\trunk\lucene\build.xml:396: The following error occurred while executing this line:
C:\cygwin\home\us\svn\lucene\dev\trunk\lucene\common-build.xml:324: Error deploying artifact &apos;org.apache.lucene:lucene-core:jar&apos;: Error deploying artifact: 
File C:\cygwin\home\us\svn\lucene\dev\trunk\lucene\build\${project.artifactId}-${project.version}.jar does not exist
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looks like some kind of failed interpolation maybe?&lt;/p&gt;

&lt;p&gt;I&apos;m going to try under Linux later today.&lt;/p&gt;</comment>
                    <comment id="12934470" author="thetaphi" created="Mon, 22 Nov 2010 14:10:35 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ANT 1.8 is not recommeneded for Lucene builds, some specials in Lucene do not work correctly, because some internal changes to handling of sysprops and other is not working correcty. Use Ant 1.7.x&lt;/li&gt;
	&lt;li&gt;Both Lucene 3.x and trunk build correctly without your patch, as it can be seen every night on Hudson.&lt;/li&gt;
	&lt;li&gt;There are some warnings and errors about missing artifacts, but the JARs are built correctly - so not fatal - that was always the case and we dont want to touch this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;Building maven artifacts from inside contrib dirs do not work, only from top-level lucene subdir&lt;/li&gt;
	&lt;li&gt;Building maven artifacts from the lucene/solr main folder does not work, too (I mean directly below trunk or branch_3x) -&amp;gt; be sure to be inside lucene folder&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;See hudson builds:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;https://hudson.apache.org/hudson/job/Lucene-trunk/1369/consoleText&quot; class=&quot;external-link&quot;&gt;https://hudson.apache.org/hudson/job/Lucene-trunk/1369/consoleText&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://hudson.apache.org/hudson/job/Lucene-3.x/187/consoleText&quot; class=&quot;external-link&quot;&gt;https://hudson.apache.org/hudson/job/Lucene-3.x/187/consoleText&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Maybe your maven.jar version is wrong, we are using 2.0.9 on hudson. This version is used since ages to also build the release artifacts (see release todo in wiki):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[hudson@lucene ~]$ ls -l ~/.ant/lib/
total 1831
-rw-r--r--  1 hudson  hudson   701049 Jul 27  2006 js.jar
-rw-r--r--  1 hudson  hudson  1018394 Sep 30 20:28 maven-ant-tasks-2.0.9.jar
-rw-r--r--  1 hudson  hudson    34607 Oct 16  2006 script-js.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(the js.jar and script.js.jar are in our ant lib folder as we are using OpenJDK on FreeBSD and that has no JavaScript for testing Solr)&lt;/p&gt;</comment>
                    <comment id="12934712" author="drew.farris" created="Tue, 23 Nov 2010 02:33:21 +0000"  >&lt;p&gt;Hi Steve, Uwe,&lt;/p&gt;

&lt;p&gt;I was using Ant 1.7.1  with 1.6.0_22, maven-ant-tasks 2.2.1 on ubuntu 10.04 &amp;#8211; after switching to maven-ant-tasks 2.0.9 the builds for branch 3.x and trunk work fine without the patch I proposed.&lt;/p&gt;

&lt;p&gt;FWIW, I was able to fetch 2.0.9 from the archive: &lt;a href=&quot;http://archive.apache.org/dist/maven/binaries/maven-ant-tasks-2.0.9.jar&quot; class=&quot;external-link&quot;&gt;http://archive.apache.org/dist/maven/binaries/maven-ant-tasks-2.0.9.jar&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the detailed explanation Uwe.&lt;/p&gt;</comment>
                    <comment id="12935103" author="steve_rowe" created="Tue, 23 Nov 2010 22:55:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;after switching to maven-ant-tasks 2.0.9 the builds for branch 3.x and trunk work fine without the patch I proposed.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;After switching to Ant 1.7.1 and maven-ant-tasks 2.0.9, both trunk and branch_3x now work for me too under Cygwin on Win7 without the proposed patch.  (I put maven-ant-tasks-2.0.9.jar in &lt;tt&gt;C:\Users\sarowe\.ant\lib&lt;/tt&gt;, rather than the Cygwin-ish &lt;tt&gt;/home/sarowe/.ant/lib&lt;/tt&gt;, because Ant is running on the native Windows binary 1.6.0_21 JRE).&lt;/p&gt;
</comment>
                    <comment id="12965305" author="ianeboston" created="Tue, 30 Nov 2010 17:43:03 +0000"  >&lt;p&gt;I am sure you know this, but, this patch fixes an otherwise broken build of Solr and Lucene at r1040465 using &lt;/p&gt;

&lt;p&gt;Apache Ant version 1.8.1 compiled on September 21 2010&lt;br/&gt;
Apache Maven 2.2.1 (r801777; 2009-08-06 20:16:01+0100)&lt;br/&gt;
Java version: 1.6.0_22&lt;br/&gt;
OS name: &quot;mac os x&quot; version: &quot;10.6.5&quot; arch: &quot;x86_64&quot; Family: &quot;mac&quot;&lt;br/&gt;
/usr/share/ant/lib/maven-ant-tasks-2.1.1.jar&lt;/p&gt;

&lt;p&gt;Since 1.8.1 came with the last JDK install, others might be having the same problem.&lt;br/&gt;
HTH&lt;/p&gt;</comment>
                    <comment id="12975186" author="rcmuir" created="Mon, 27 Dec 2010 02:15:33 +0000"  >&lt;p&gt;i know, i&apos;m re-opening a maven issue!&lt;/p&gt;

&lt;p&gt;But I&apos;m working on fixes to resolve our build so it works fine on 1.7 and 1.8.&lt;/p&gt;

&lt;p&gt;I tend to agree with Ian&apos;s comment that since 1.8 is installed on many systems by default,&lt;br/&gt;
we should just try to make things work with it nicely.&lt;/p&gt;

&lt;p&gt;So, if someone wants to make a patch that fixes this issue so it works on both 1.7 and 1.8,&lt;br/&gt;
I think it would be a good thing. Its unclear from the comments whether this patch does&lt;br/&gt;
that (it might, but i don&apos;t know, since we have no way of verifying that maven is working).&lt;/p&gt;</comment>
                    <comment id="12983849" author="steve_rowe" created="Wed, 19 Jan 2011 19:24:11 +0000"  >&lt;p&gt;I&apos;ll work on this once I have committed the patches on &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2657&quot; title=&quot;Replace Maven POM templates with full POMs, and change documentation accordingly&quot;&gt;&lt;del&gt;LUCENE-2657&lt;/del&gt;&lt;/a&gt;.  For that work, I&apos;ve been using Ant 1.7.1 and Maven Ant Tasks 2.0.9 without any problems.  But we should make sure that Ant 1.8.X and Maven Ant Tasks 2.0.10 and 2.1.X also work.&lt;/p&gt;</comment>
                    <comment id="12984583" author="steve_rowe" created="Fri, 21 Jan 2011 06:11:28 +0000"  >&lt;p&gt;I tested &lt;tt&gt;ant clean generate-maven-artifacts&lt;/tt&gt; on branch_3x with &lt;tt&gt;maven-ant-tasks-2.1.1.jar&lt;/tt&gt; and both Ant 1.7.1 and 1.8.1.  Everything works.&lt;/p&gt;

&lt;p&gt;I&apos;ll test more combinations tomorrow.&lt;/p&gt;</comment>
                    <comment id="12984827" author="steve_rowe" created="Fri, 21 Jan 2011 17:39:05 +0000"  >&lt;p&gt;Hudson nightly builds are failing when executing &lt;tt&gt;ant generate-maven-artifacts&lt;/tt&gt;, with the same error as Drew reported.&lt;/p&gt;

&lt;p&gt;When I use &lt;tt&gt;maven-ant-tasks-2.0.9.jar&lt;/tt&gt; with Ant 1.7.1 locally, and the equivalent of Drew&apos;s patches (since the POM parents have changed), I see the same errors, but the build doesn&apos;t fail.&lt;/p&gt;

&lt;p&gt;I just re-ran &lt;tt&gt;ant clean generate-maven-artifacts&lt;/tt&gt; on trunk with an empty &lt;tt&gt;~/.m2/&lt;/tt&gt; directory, Ant 1.7.1 and &lt;tt&gt;maven-ant-tasks-2.1.1.jar&lt;/tt&gt; &amp;#8211; no errors were printed, and the build succeeded.&lt;/p&gt;

&lt;p&gt;I think instead of adding stuff to the *build.xml files, we should require &lt;tt&gt;maven-ant-tasks-2.1.1.jar&lt;/tt&gt; for execution of &lt;tt&gt;ant generate-maven-artifacts&lt;/tt&gt;.&lt;/p&gt;</comment>
                    <comment id="12984966" author="steve_rowe" created="Fri, 21 Jan 2011 22:17:09 +0000"  >&lt;p&gt;It appears that there were two problems blocking the Hudson build scripts from succeeding:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Maven Ant Tasks seems to dislike mixed artifact versions cached in the local maven repository (&lt;tt&gt;~/.m2/repository/&lt;/tt&gt;) - this leads to errors that look like the one Drew originally reported on this issue, regardless of the version of Maven Ant Tasks that is used.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;maven-ant-tasks-2.0.9.jar&lt;/tt&gt; does not work with the new full POMs introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2657&quot; title=&quot;Replace Maven POM templates with full POMs, and change documentation accordingly&quot;&gt;&lt;del&gt;LUCENE-2657&lt;/del&gt;&lt;/a&gt; - errors that look like Drew&apos;s are printed and the build fails.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;However, purging the local maven repository (&lt;tt&gt;~/.m2/repository/&lt;/tt&gt;) and upgrading to &lt;tt&gt;maven-ant-tasks-2.1.1.jar&lt;/tt&gt; allows &lt;tt&gt;ant generate-maven-artifacts&lt;/tt&gt; to consistently succeed.&lt;/p&gt;

&lt;p&gt;Uwe has changed the Hudson build setup to &lt;tt&gt;rm -rf $HOME/.m2/repository&lt;/tt&gt; and has upgraded the Maven Ant Tasks jar to v2.1.1.  Since these changes, the only full build that has completed is the Lucene-3.x build, and it was a success.&lt;/p&gt;

&lt;p&gt;I&apos;ll leave this issue open until all of the nightly Hudson builds have succeeded (hopefully that will happen tonight).&lt;/p&gt;</comment>
                    <comment id="12985365" author="steve_rowe" created="Sun, 23 Jan 2011 17:12:35 +0000"  >&lt;p&gt;All nightlies succeeded last night - resolving.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12460138" name="LUCENE-2774.patch" size="633" author="drew.farris" created="Sun, 21 Nov 2010 20:11:36 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 22 Nov 2010 13:50:45 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11079</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24918</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>