<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:18:16 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3176/LUCENE-3176.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3176] TestNRTThreads test failure</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3176</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;hit a fail in TestNRTThreads running tests over and over:&lt;/p&gt;</description>
                <environment>&lt;p&gt;trunk&lt;/p&gt;</environment>
            <key id="12509353">LUCENE-3176</key>
            <summary>TestNRTThreads test failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Jun 2011 14:35:00 +0100</created>
                <updated>Mon, 14 Nov 2011 10:56:44 +0000</updated>
                    <resolved>Mon, 14 Nov 2011 10:56:44 +0000</resolved>
                                                                    <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="13044840" author="rcmuir" created="Mon, 6 Jun 2011 14:35:24 +0100"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testsuite: org.apache.lucene.index.TestNRTThreads
    [junit] Testcase: testNRTThreads(org.apache.lucene.index.TestNRTThreads):	FAILED
    [junit] expected:&amp;lt;8&amp;gt; but was:&amp;lt;18&amp;gt;
    [junit] junit.framework.AssertionFailedError: expected:&amp;lt;8&amp;gt; but was:&amp;lt;18&amp;gt;
    [junit] 	at org.apache.lucene.index.TestNRTThreads.testNRTThreads(TestNRTThreads.java:515)
    [junit] 	at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1362)
    [junit] 	at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1280)
    [junit] 
    [junit] 
    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 19.812 sec
    [junit] 
    [junit] ------------- Standard Output ---------------
    [junit] doc id=157 is supposed to be deleted, but got docID=119
    [junit] doc id=82 is supposed to be deleted, but got docID=68
    [junit] doc id=83 is supposed to be deleted, but got docID=38
    [junit] doc id=80 is supposed to be deleted, but got docID=36
    [junit] doc id=81 is supposed to be deleted, but got docID=37
    [junit] doc id=67 is supposed to be deleted, but got docID=24
    [junit] doc id=69 is supposed to be deleted, but got docID=26
    [junit] doc id=68 is supposed to be deleted, but got docID=25
    [junit] doc id=672 is supposed to be deleted, but got docID=430
    [junit] doc id=444 is supposed to be deleted, but got docID=344
    [junit] doc id=441 is supposed to be deleted, but got docID=766
    [junit] doc id=442 is supposed to be deleted, but got docID=343
    [junit] doc id=443 is supposed to be deleted, but got docID=767
    [junit] doc id=70 is supposed to be deleted, but got docID=67
    [junit] doc id=71 is supposed to be deleted, but got docID=27
    [junit] doc id=72 is supposed to be deleted, but got docID=28
    [junit] doc id=73 is supposed to be deleted, but got docID=29
    [junit] doc id=74 is supposed to be deleted, but got docID=30
    [junit] doc id=75 is supposed to be deleted, but got docID=31
    [junit] doc id=76 is supposed to be deleted, but got docID=32
    [junit] doc id=219 is supposed to be deleted, but got docID=175
    [junit] doc id=662 is supposed to be deleted, but got docID=425
    [junit] doc id=663 is supposed to be deleted, but got docID=426
    [junit] doc id=218 is supposed to be deleted, but got docID=174
    [junit] doc id=361 is supposed to be deleted, but got docID=286
    [junit] doc id=362 is supposed to be deleted, but got docID=287
    [junit] doc id=360 is supposed to be deleted, but got docID=285
    [junit] doc id=366 is supposed to be deleted, but got docID=291
    [junit] doc id=365 is supposed to be deleted, but got docID=290
    [junit] doc id=364 is supposed to be deleted, but got docID=289
    [junit] doc id=363 is supposed to be deleted, but got docID=288
    [junit] doc id=368 is supposed to be deleted, but got docID=293
    [junit] doc id=367 is supposed to be deleted, but got docID=292
    [junit] doc id=518 is supposed to be deleted, but got docID=361
    [junit] doc id=517 is supposed to be deleted, but got docID=805
    [junit] doc id=220 is supposed to be deleted, but got docID=176
    [junit] doc id=324 is supposed to be deleted, but got docID=269
    [junit] doc id=322 is supposed to be deleted, but got docID=268
    [junit] ------------- ---------------- ---------------
    [junit] ------------- Standard Error -----------------
    [junit] NOTE: reproduce with: ant test -Dtestcase=TestNRTThreads -Dtestmethod=testNRTThreads -Dtests.seed=0:0
    [junit] NOTE: test params are: codec=RandomCodecProvider: {extra8=MockFixedIntBlock(blockSize=1054), extra9=MockVariableIntBlock(baseBlockSize=87), body=MockSep, extra0=MockVariableIntBlock(baseBlockSize=87), packID=Pulsing(freqCutoff=16), extra1=MockRandom, extra2=Standard, extra3=SimpleText, date=MockVariableIntBlock(baseBlockSize=87), extra4=MockSep, extra5=Pulsing(freqCutoff=16), extra6=MockFixedIntBlock(blockSize=1054), extra7=MockVariableIntBlock(baseBlockSize=87), docid=MockVariableIntBlock(baseBlockSize=87), title=SimpleText, titleTokenized=Standard}, locale=ar_JO, timezone=Europe/Oslo
    [junit] NOTE: all tests run in this JVM:
    [junit] [TestSearchForDuplicates, TestMockAnalyzer, TestCheckIndex, TestDoc, TestFlex, TestIndexReaderCloneNorms, TestIndexWriterExceptions, TestIndexWriterUnicode, TestMultiLevelSkipList, TestNRTThreads]
    [junit] NOTE: Mac OS X 10.6.7 x86_64/Apple Inc. 1.6.0_24 (64-bit)/cpus=4,threads=1,free=41147720,total=85000192
    [junit] ------------- ---------------- ---------------
    [junit] TEST org.apache.lucene.index.TestNRTThreads FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13044978" author="rcmuir" created="Mon, 6 Jun 2011 18:42:50 +0100"  >&lt;p&gt;on my machine: this one is tough to reproduce.&lt;/p&gt;

&lt;p&gt;if I run the test by itself, it seems to pass.&lt;/p&gt;

&lt;p&gt;however, if my machine is &quot;busy&quot; (e.g. running ant test-core -Dtests.seed=0:0), then it fails!&lt;/p&gt;</comment>
                    <comment id="13044981" author="jasonrutherglen" created="Mon, 6 Jun 2011 18:52:46 +0100"  >&lt;p&gt;It&apos;s probably the new DWPT code.  There was a specific issue to fix this problem &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2956&quot; title=&quot;Support updateDocument() with DWPTs&quot;&gt;&lt;del&gt;LUCENE-2956&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    <comment id="13045283" author="simonw" created="Tue, 7 Jun 2011 06:35:57 +0100"  >&lt;p&gt;phew! This seems like a delete issue. I only looked at the output robert posted so far but it seems that a FrozenDelPackage gets lost somewhere here....&lt;/p&gt;

&lt;p&gt;I will look after buzzwords&lt;/p&gt;</comment>
                    <comment id="13045917" author="simonw" created="Wed, 8 Jun 2011 13:18:29 +0100"  >&lt;p&gt;I can reproduce this easily and even if I set search threads to 0 and index threads to 1. I forced the IW to use OpenMode.CREATE and suddenly the tests are not failing anymore. It seems that the tempdir is not cleaned up since always the second test fails for me but never the first run.&lt;/p&gt;

&lt;p&gt;this is not a DWPT issue, phew!&lt;/p&gt;</comment>
                    <comment id="13045918" author="rcmuir" created="Wed, 8 Jun 2011 13:20:53 +0100"  >&lt;p&gt;the test cleans itself up in afterClass(), so there is in fact an issue.&lt;/p&gt;</comment>
                    <comment id="13045945" author="rcmuir" created="Wed, 8 Jun 2011 14:17:11 +0100"  >&lt;p&gt;taking a look at this, I don&apos;t like the way _TestUtil.getTempDir(String desc) was working before... it was basically desc + LTC.random.nextInt(xxx), so if you wired the seed like I did, and somehow stuff doesnt totally clean up, then its easy to see how it could return an already-created dir.&lt;/p&gt;

&lt;p&gt;I changed this method to use _TestUtil.createTempFile... I think this is much safer.&lt;/p&gt;</comment>
                    <comment id="13046066" author="simonw" created="Wed, 8 Jun 2011 17:52:32 +0100"  >&lt;p&gt;robert can you still reproduce or can we close this issue here?&lt;/p&gt;</comment>
                    <comment id="13046070" author="rcmuir" created="Wed, 8 Jun 2011 17:55:23 +0100"  >&lt;p&gt;i could never really reproduce... but sometimes if i ran all tests with -Dtests.seed=0:0 it would happen.&lt;/p&gt;

&lt;p&gt;the reason this test is not reproducible is that this test uses &apos;n seconds&apos; as a limit.&lt;br/&gt;
so whether it passes or fails depends upon what your computer is doing at the moment.&lt;/p&gt;

&lt;p&gt;I think we must change it to limit itself by number of docs instead.&lt;/p&gt;</comment>
                    <comment id="13046074" author="mikemccand" created="Wed, 8 Jun 2011 17:58:56 +0100"  >&lt;blockquote&gt;&lt;p&gt;I think we must change it to limit itself by number of docs instead.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree: let&apos;s fix that.&lt;/p&gt;</comment>
                    <comment id="13149560" author="simonw" created="Mon, 14 Nov 2011 10:56:44 +0000"  >&lt;p&gt;this was a temp file issue - fixed&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 6 Jun 2011 17:52:46 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10794</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24521</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>