<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:58:47 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-967/LUCENE-967.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-967] Add &quot;tokenize documents only&quot; task to contrib/benchmark</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-967</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I&apos;ve been looking at performance improvements to tokenization by&lt;br/&gt;
re-using Tokens, and to help benchmark my changes I&apos;ve added a new&lt;br/&gt;
task called ReadTokens that just steps through all fields in a&lt;br/&gt;
document, gets a TokenStream, and reads all the tokens out of it.&lt;/p&gt;

&lt;p&gt;EG this alg just reads all Tokens for all docs in Reuters collection:&lt;/p&gt;

&lt;p&gt;  doc.maker=org.apache.lucene.benchmark.byTask.feeds.ReutersDocMaker&lt;br/&gt;
  doc.maker.forever=false&lt;br/&gt;
  {ReadTokens &amp;gt; : *&lt;/p&gt;</description>
                <environment></environment>
            <key id="12374702">LUCENE-967</key>
            <summary>Add &quot;tokenize documents only&quot; task to contrib/benchmark</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jul 2007 19:08:14 +0100</created>
                <updated>Fri, 25 Jan 2008 03:24:02 +0000</updated>
                    <resolved>Wed, 1 Aug 2007 19:55:59 +0100</resolved>
                            <version>2.3</version>
                                <fixVersion>2.3</fixVersion>
                                <component>modules/benchmark</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12515814" author="mikemccand" created="Thu, 26 Jul 2007 19:09:47 +0100"  >&lt;p&gt;Attached patch that adds ReadTokensTask.java.  I also added change to print net elapsed time of the algorithm.&lt;/p&gt;</comment>
                    <comment id="12516195" author="mikemccand" created="Sun, 29 Jul 2007 01:59:38 +0100"  >&lt;p&gt;New rev of this patch.  Only real change is to reduce overhead&lt;br/&gt;
(slightly) of benchmark framework by pre-building array of PerfTasks&lt;br/&gt;
instead of creating new iterator for each document.&lt;/p&gt;</comment>
                    <comment id="12516747" author="mikemccand" created="Tue, 31 Jul 2007 18:22:16 +0100"  >&lt;p&gt;I plan to commit this soon...&lt;/p&gt;</comment>
                    <comment id="12516806" author="doronc" created="Tue, 31 Jul 2007 22:29:52 +0100"  >&lt;p&gt;I&apos;m reviewing it now...&lt;/p&gt;</comment>
                    <comment id="12516809" author="doronc" created="Tue, 31 Jul 2007 23:07:44 +0100"  >&lt;p&gt;Applies cleanly and all test pass (running from contrib/benchmark.)&lt;/p&gt;

&lt;p&gt;I like the efficiency changes.&lt;/p&gt;

&lt;p&gt;A few suggestions:&lt;/p&gt;

&lt;p&gt;  1) in ReadTokensTask change doLogic() to return the number of tokens &lt;br/&gt;
       processed in that specific call to doLogic() (differs from tokensCount &lt;br/&gt;
       which aggregates all calls).&lt;/p&gt;

&lt;p&gt;  2) in TestPerfTaskLogic the comment in testReadTokens seems &lt;br/&gt;
      copy/pasted from testLineDocFile and should be changed. &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Also (I am not sure if it is worth your time, but) to really test it, you&lt;br/&gt;
      could open a reader against the created index and verify the number &lt;br/&gt;
      of docs, and also the index sum-of-DF comparing to the total tokens &lt;br/&gt;
      counts numbers in ReadTokensTask. &lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12516837" author="doronc" created="Wed, 1 Aug 2007 01:32:43 +0100"  >&lt;p&gt;Also, I think the addition of printing of elapsed time is redundant, &lt;br/&gt;
because you get it anyhow as the elapsed time reported for the &lt;br/&gt;
outermost task sequence. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;For instance, if you add to tokenize.alg this line:&lt;br/&gt;
     RepSumByName&lt;br/&gt;
You get this output:&lt;br/&gt;
     Operation   round   runCnt   recsPerRun        rec/s  elapsedSec    avgUsedMem    avgTotalMem&lt;br/&gt;
     Seq_Exhaust     0        1        21578        638.2       33.81    15,694,368     20,447,232&lt;br/&gt;
     Net elapsed time: 33.809 sec&lt;br/&gt;
So the total elapsed time is actually printed twice now - do we need this?&lt;/p&gt;</comment>
                    <comment id="12516945" author="mikemccand" created="Wed, 1 Aug 2007 13:15:43 +0100"  >&lt;p&gt;&amp;gt; Also, I think the addition of printing of elapsed time is redundant, &lt;br/&gt;
&amp;gt; because you get it anyhow as the elapsed time reported for the &lt;br/&gt;
&amp;gt; outermost task sequence. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Duh, right &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  I will remove that.&lt;/p&gt;

&lt;p&gt;&amp;gt;  1) in ReadTokensTask change doLogic() to return the number of tokens &lt;br/&gt;
&amp;gt;       processed in that specific call to doLogic() (differs from tokensCount &lt;br/&gt;
&amp;gt;       which aggregates all calls).&lt;/p&gt;

&lt;p&gt;Ahh good idea!&lt;/p&gt;

&lt;p&gt;&amp;gt;  2) in TestPerfTaskLogic the comment in testReadTokens seems &lt;br/&gt;
&amp;gt;      copy/pasted from testLineDocFile and should be changed. &lt;/p&gt;

&lt;p&gt;Woops, will fix.&lt;/p&gt;

&lt;p&gt;&amp;gt;      - Also (I am not sure if it is worth your time, but) to really test it, you &lt;br/&gt;
&amp;gt;      could open a reader against the created index and verify the number &lt;br/&gt;
&amp;gt;      of docs, and also the index sum-of-DF comparing to the total tokens &lt;br/&gt;
&amp;gt;      counts numbers in ReadTokensTask. &lt;/p&gt;

&lt;p&gt;OK I added this too.  Will submit new patch shortly.&lt;/p&gt;</comment>
                    <comment id="12517031" author="doronc" created="Wed, 1 Aug 2007 19:05:34 +0100"  >&lt;p&gt;Thanks for fixing this Michael, looks perfect to me now.&lt;/p&gt;</comment>
                    <comment id="12517035" author="mikemccand" created="Wed, 1 Aug 2007 19:14:58 +0100"  >&lt;p&gt;Thank you for reviewing!  I will commit shortly.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12362636" name="LUCENE-967.patch" size="10882" author="mikemccand" created="Thu, 26 Jul 2007 19:09:47 +0100" />
                    <attachment id="12362728" name="LUCENE-967.take2.patch" size="12703" author="mikemccand" created="Sun, 29 Jul 2007 01:59:38 +0100" />
                    <attachment id="12362968" name="LUCENE-967.take3.patch" size="14342" author="mikemccand" created="Wed, 1 Aug 2007 13:16:30 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 31 Jul 2007 21:29:52 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12776</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26762</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>