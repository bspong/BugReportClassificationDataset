<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:00:34 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3272/LUCENE-3272.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3272] Consolidate Lucene&apos;s QueryParsers into a module</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3272</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Lucene has a lot of QueryParsers and we should have them all in a single consistent place.  &lt;/p&gt;

&lt;p&gt;The following are QueryParsers I can find that warrant moving to the new module:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Lucene Core&apos;s QueryParser&lt;/li&gt;
	&lt;li&gt;AnalyzingQueryParser&lt;/li&gt;
	&lt;li&gt;ComplexPhraseQueryParser&lt;/li&gt;
	&lt;li&gt;ExtendableQueryParser&lt;/li&gt;
	&lt;li&gt;Surround&apos;s QueryParser&lt;/li&gt;
	&lt;li&gt;PrecedenceQueryParser&lt;/li&gt;
	&lt;li&gt;StandardQueryParser&lt;/li&gt;
	&lt;li&gt;XML-Query-Parser&apos;s CoreParser&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All seem to do a good job at their kind of parsing with extensive tests.&lt;/p&gt;

&lt;p&gt;One challenge of consolidating these is that many tests use Lucene Core&apos;s QueryParser.  One option is to just replicate this class in src/test and call it TestingQueryParser.  Another option is to convert all tests over to programmatically building their queries (seems like alot of work).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12512420">LUCENE-3272</key>
            <summary>Consolidate Lucene&apos;s QueryParsers into a module</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="cmale">Chris Male</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Jul 2011 03:52:33 +0100</created>
                <updated>Fri, 10 May 2013 11:44:59 +0100</updated>
                    <resolved>Tue, 20 Mar 2012 15:04:57 +0000</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/queryparser</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                                                  <comments>
                    <comment id="13058191" author="rcmuir" created="Fri, 1 Jul 2011 04:01:11 +0100"  >&lt;p&gt;This is really important I think, we should eventually consolidate all the QPs across lucene-core, contrib, and solr into a module.&lt;/p&gt;

&lt;p&gt;I think its also important that we do this so that eventually we could hopefully move core queries into the queries module, and finally add all the cool stuff to the Lucene QP that is &quot;missing&quot; (positional stuff like NEAR, function queries, join, ...)&lt;/p&gt;

&lt;p&gt;I think most tests only use the QP for convenience, maybe just make a REALLY REALLY simple MockQueryParser that is basically a String.split() for these tests for convenience? Then it would analyze the terms and make a boolean query... anything else more complicated (e.g. phrasequery) could just be explicitly instantiated?&lt;/p&gt;

</comment>
                    <comment id="13058198" author="cmale" created="Fri, 1 Jul 2011 04:11:03 +0100"  >&lt;blockquote&gt;&lt;p&gt;... contrib, and solr into a module&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure about the practicalities of consolidating Solr&apos;s QPs at the moment.  Most, if not all, are somehow directly tied to Solr&apos;s Schema concepts.  That in fact seems to be their advantage since the typing information is hugely beneficial.  With Lucene&apos;s FieldType work coming up, maybe some of it can be offloaded to those.  We can also work on inverting the APIs in some places, providing abstractions in others.&lt;/p&gt;

&lt;p&gt;That all said, I&apos;m not afraid of trying.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I think most tests only use the QP for convenience, maybe just make a REALLY REALLY simple MockQueryParser that is basically a String.split() for these tests for convenience? Then it would analyze the terms and make a boolean query... anything else more complicated (e.g. phrasequery) could just be explicitly instantiated?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds like a great plan (and a great first step).&lt;/p&gt;</comment>
                    <comment id="13058200" author="rcmuir" created="Fri, 1 Jul 2011 04:19:06 +0100"  >&lt;blockquote&gt;
&lt;p&gt;With Lucene&apos;s FieldType work coming up, maybe some of it can be offloaded to those. We can also work on inverting the APIs in some places, providing abstractions in others.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think we have to do all the work at once? Like, ideally however these problems are being solved (e.g. adding numericrange support to the QP is one example), we could eventually move the solr QPs to use this &apos;information&apos; and maybe refactor how its own schema works... if it turns out stuff is really solr-specific and not generalizable then keep it in solr.&lt;/p&gt;

&lt;p&gt;But I think as a start, we can consolidate what is in lucene core and contrib, thats a ton of work in itself. &lt;/p&gt;</comment>
                    <comment id="13058476" author="mikemccand" created="Fri, 1 Jul 2011 12:00:35 +0100"  >&lt;p&gt;Big +1!  We&apos;ve needed query parsing factored out for a loooong time.  And cutting tests over to a new MockQP, and then simply moving (but not merging) all QPs together to a module, sounds like great first steps.&lt;/p&gt;

&lt;p&gt;Note that the FieldType work (at least as currently planned/targetted) isn&apos;t a schema &amp;#8211; it&apos;s really just a nicer API for working with documents.  Ie, nothing is persisted, nothing checks that 2 docs have the fields / types, etc.&lt;/p&gt;

&lt;p&gt;Still, it would be great to pull Solr&apos;s QP in and somehow abstract the parts that require access to Solr&apos;s schema.&lt;/p&gt;</comment>
                    <comment id="13058730" author="hossman" created="Fri, 1 Jul 2011 20:35:20 +0100"  >&lt;p&gt;single module != single jar ... correct?&lt;/p&gt;

&lt;p&gt;someone writing a small form factor app that wants to use the basic Lucene QueryParser shouldn&apos;t have to load a jar containing every query parser provided by solr (and all of the dependencies they have)&lt;/p&gt;</comment>
                    <comment id="13058769" author="rcmuir" created="Fri, 1 Jul 2011 21:19:23 +0100"  >&lt;p&gt;single jar, but you can customize: its open source.&lt;/p&gt;

&lt;p&gt;Hoss I think you are looking at this the wrong way: this actually makes it way easier for someone writing a small form factor app that uses no query parser at all, or their own queryparser, or whatever.&lt;/p&gt;

&lt;p&gt;we should do this to make the lucene core smaller, and then you plug in the modules you need (and maybe only selected parts from them, but thats your call).&lt;/p&gt;

&lt;p&gt;I don&apos;t think we need to provide X * Y * Z possibilities, nor do we need to provide 87 jar files.&lt;/p&gt;


&lt;p&gt;But, this is just rehashing &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2323&quot; title=&quot;reorganize contrib modules&quot;&gt;&lt;del&gt;LUCENE-2323&lt;/del&gt;&lt;/a&gt;, where we already had this conversation. I think at the least we should put all these QPs into one place to make refactoring between them easier. Then we make a smaller amount of code for these small form factor apps you are so concerned about, with the messy duplication this is not possible now.&lt;/p&gt;

&lt;p&gt;I still stand by my comments in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2323&quot; title=&quot;reorganize contrib modules&quot;&gt;&lt;del&gt;LUCENE-2323&lt;/del&gt;&lt;/a&gt;, and guess what, turns out I think I was right.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1938&quot; title=&quot;Precedence query parser using the contrib/queryparser framework&quot;&gt;&lt;del&gt;LUCENE-1938&lt;/del&gt;&lt;/a&gt; then refactored one of these queryparsers, removing 4000 lines of code but keeping the same functionality.&lt;/p&gt;</comment>
                    <comment id="13149550" author="simonw" created="Mon, 14 Nov 2011 10:44:06 +0000"  >&lt;p&gt;can we close this issue? seems resolved?&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
            <subtask id="12512423">LUCENE-3273</subtask>
            <subtask id="12512917">LUCENE-3278</subtask>
            <subtask id="12513061">LUCENE-3283</subtask>
            <subtask id="12513062">LUCENE-3284</subtask>
            <subtask id="12513065">LUCENE-3285</subtask>
            <subtask id="12513066">LUCENE-3286</subtask>
            <subtask id="12514012">LUCENE-3311</subtask>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 1 Jul 2011 03:01:11 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10733</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24424</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>