<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:13:10 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-773/LUCENE-773.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-773] Deprecate &quot;create&quot; method in FSDirectory.getDirectory in favor of IndexWriter&apos;s &quot;create&quot;</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-773</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;It&apos;s confusing that there is a create=true|false at the FSDirectory&lt;br/&gt;
level and then also another create=true|false at the IndexWriter&lt;br/&gt;
level.  Which one should you use when creating an index?&lt;/p&gt;

&lt;p&gt;Our users have been confused by this in the past:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.gossamer-threads.com/lists/lucene/java-user/4792&quot; class=&quot;external-link&quot;&gt;http://www.gossamer-threads.com/lists/lucene/java-user/4792&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think in general we should try to have one obvious way to achieve&lt;br/&gt;
something (like Python: &lt;a href=&quot;http://en.wikipedia.org/wiki/Python_philosophy&quot; class=&quot;external-link&quot;&gt;http://en.wikipedia.org/wiki/Python_philosophy&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;And the fact that there are now two code paths that are supposed to do&lt;br/&gt;
the same (similar?) thing, can more easily lead to sneaky bugs.  One&lt;br/&gt;
case of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-140&quot; title=&quot;docs out of order&quot;&gt;&lt;del&gt;LUCENE-140&lt;/del&gt;&lt;/a&gt; (already fixed in trunk but not past releases),&lt;br/&gt;
which inspired this issue, can happen if you send create=false to the&lt;br/&gt;
FSDirectory and create=true to the IndexWriter.&lt;/p&gt;

&lt;p&gt;Finally, as of lockless commits, it is now possible to open an&lt;br/&gt;
existing index for &quot;create&quot; while readers are still using the old&lt;br/&gt;
&quot;point in time&quot; index, on Windows.  (At least one user had tried this&lt;br/&gt;
previously and failed).  To do this, we use the IndexFileDeleter class&lt;br/&gt;
(which retries on failure) and we also look at the segments file to&lt;br/&gt;
determine the next segments_N file to write to.&lt;/p&gt;

&lt;p&gt;With future issues like &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-710&quot; title=&quot;Implement &amp;quot;point in time&amp;quot; searching without relying on filesystem semantics&quot;&gt;&lt;del&gt;LUCENE-710&lt;/del&gt;&lt;/a&gt; even more &quot;smarts&quot; may be required&lt;br/&gt;
to know what it takes to &quot;create&quot; a new index into an existing&lt;br/&gt;
directory.  Given that we have have quite a few Directory&lt;br/&gt;
implemenations, I think these &quot;smarts&quot; logically should live in&lt;br/&gt;
IndexWriter (not replicated in each Directory implementation), and we&lt;br/&gt;
should leave the Directory as an interface that knows how to make&lt;br/&gt;
changes to some backing store but does not itself try to make any&lt;br/&gt;
changes.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12360447">LUCENE-773</key>
            <summary>Deprecate &quot;create&quot; method in FSDirectory.getDirectory in favor of IndexWriter&apos;s &quot;create&quot;</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Sat, 13 Jan 2007 10:52:13 +0000</created>
                <updated>Tue, 27 Feb 2007 18:10:39 +0000</updated>
                    <resolved>Tue, 23 Jan 2007 17:34:45 +0000</resolved>
                            <version>1.9</version>
                <version>2.0.0</version>
                <version>2.1</version>
                                <fixVersion>2.1</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12464586" author="hibou" created="Sun, 14 Jan 2007 11:26:32 +0000"  >&lt;p&gt;I was working on the IndexFormat mechanism, &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-622&quot; title=&quot;Provide More of Lucene For Maven&quot;&gt;&lt;del&gt;LUCENE-622&lt;/del&gt;&lt;/a&gt; being the first draft of it. And I have tried to use some Java-1.5 parametered types to see if it is possible to make index readers/writers typed by the index format. And I am in front of one issue : the directory have to know the index format because of the IndexNameFilter and the create feature. And I don&apos;t think it is a good idea because of how they are instanciated.&lt;/p&gt;

&lt;p&gt;I have not finished the design of this Java-1.5-way-of-typing, I have other issues to look at, but I vote +1 for removing any index structure specificity in the store package.&lt;/p&gt;</comment>
                    <comment id="12464588" author="hibou" created="Sun, 14 Jan 2007 11:52:35 +0000"  >&lt;p&gt;forget what I have said about &quot;removing any index structure specificity in the store package.&quot;. Actually, the directory is the only central instance that can holds an indexformat instance.&lt;/p&gt;

&lt;p&gt;Anyway, I still +1 for not duplicating code ! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12464590" author="mikemccand" created="Sun, 14 Jan 2007 12:25:29 +0000"  >&lt;p&gt;Nicolas, I think you meant &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-662&quot; title=&quot;Extendable writer and reader of field data&quot;&gt;&lt;del&gt;LUCENE-662&lt;/del&gt;&lt;/a&gt; above?&lt;/p&gt;

&lt;p&gt;But I&apos;ll take the +1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12464608" author="hibou" created="Sun, 14 Jan 2007 18:51:22 +0000"  >&lt;p&gt;ho, yeah, it&apos;s the 662 of course, my eyes might have squited. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; (and it can&apos;t be the 622 as I am definitively not a maven user ^^)&lt;/p&gt;</comment>
                    <comment id="12465904" author="mikemccand" created="Thu, 18 Jan 2007 22:48:48 +0000"  >
&lt;p&gt;OK I committed this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Added removal of old write lock in IndexWriter&apos;s create (it&lt;br/&gt;
    already removes unreferenced files).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Deprecated FSDirectory.getDirectory constructors that take a&lt;br/&gt;
    boolean create.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Verified all unit tests still pass while using deprecated create.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed all but one unit test to no longer use the now-deprecated&lt;br/&gt;
    constructors (I left one to make sure we do in fact continue to&lt;br/&gt;
    test the deprecated getDirectory constructor).  I added an &quot;rmDir&quot;&lt;br/&gt;
    utility method in a new class o/a/l/util/_TestUtil.java for those&lt;br/&gt;
    tests that were using getDirectory to just remove a directory.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Removed FSDirectory.getDirectory methods that had &quot;create&quot; that we&lt;br/&gt;
    had added with LockFactory.  These methods were never released so&lt;br/&gt;
    no sense newly releasing deprecated APIs.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12466776" author="mikemccand" created="Tue, 23 Jan 2007 17:30:39 +0000"  >
&lt;p&gt;My fix here broke one case of backwards compatibility for Directory implementations that provide their own locking implementation (ie, that do not use Lockfactory).  See here:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;http://www.gossamer-threads.com/lists/lucene/java-dev/44555&quot; class=&quot;external-link&quot;&gt;http://www.gossamer-threads.com/lists/lucene/java-dev/44555&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12466779" author="mikemccand" created="Tue, 23 Jan 2007 17:34:45 +0000"  >&lt;p&gt;OK I added a unit test that hits the NPE, and corrected it so the test&lt;br/&gt;
now passes.&lt;/p&gt;

&lt;p&gt;Sorry about this and thanks for catching it Aaron!&lt;/p&gt;</comment>
                    <comment id="12476283" author="mikemccand" created="Tue, 27 Feb 2007 18:10:39 +0000"  >&lt;p&gt;Closing all issues that were resolved for 2.1.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 14 Jan 2007 11:26:32 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12980</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26957</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>