<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:06:57 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1198/LUCENE-1198.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1198] Exception in DocumentsWriter.ThreadState.init leads to corruption</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1198</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;If an exception is hit in the init method, DocumentsWriter incorrectly&lt;br/&gt;
increments numDocsInRAM when in fact the document is not added.&lt;/p&gt;

&lt;p&gt;Spinoff of this thread:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://markmail.org/message/e76hgkgldxhakuaa&quot; class=&quot;external-link&quot;&gt;http://markmail.org/message/e76hgkgldxhakuaa&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The root cause that led to the exception in init was actually due to&lt;br/&gt;
incorrect use of Lucene&apos;s APIs (one thread still modifying the&lt;br/&gt;
Document while IndexWriter.addDocument is adding it) but still we&lt;br/&gt;
should protect against any exceptions coming out of init.&lt;/p&gt;
</description>
                <environment></environment>
            <key id="12389959">LUCENE-1198</key>
            <summary>Exception in DocumentsWriter.ThreadState.init leads to corruption</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Mar 2008 13:30:35 +0000</created>
                <updated>Thu, 8 May 2008 20:47:58 +0100</updated>
                    <resolved>Sun, 2 Mar 2008 23:23:42 +0000</resolved>
                            <version>2.3</version>
                                <fixVersion>2.3.2</fixVersion>
                <fixVersion>2.4</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12574112" author="mikemccand" created="Sat, 1 Mar 2008 13:32:19 +0000"  >&lt;p&gt;Attached patch.  I added a unit test showing the issue.  To do this, I&lt;br/&gt;
added this method to IndexWriter:&lt;/p&gt;

&lt;p&gt;  boolean testPoint(String name)&lt;/p&gt;

&lt;p&gt;Then in DocumentsWriter.ThreadState.init I added this:&lt;/p&gt;

&lt;p&gt;  assert writer.testPoint(&quot;DocumentsWriter.ThreadState.init start&quot;);&lt;/p&gt;

&lt;p&gt;Then, tests can subclass IndexWriter and do interesting things at each&lt;br/&gt;
of these test points.  We can add further test points over time...&lt;/p&gt;

&lt;p&gt;Then I fixed the issue and the tests (&amp;amp; all tests) pass.  I&apos;ll commit&lt;br/&gt;
in a day or two.&lt;/p&gt;</comment>
                    <comment id="12577573" author="hossman" created="Tue, 11 Mar 2008 19:28:31 +0000"  >&lt;p&gt;targeted for 2.3.2 bug fix release&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12376901" name="LUCENE-1198.patch" size="5229" author="mikemccand" created="Sat, 1 Mar 2008 13:32:19 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 11 Mar 2008 19:28:31 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12547</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26531</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>