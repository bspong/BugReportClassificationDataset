<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:27:08 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-453/LUCENE-453.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-453] Using MultiSearcher and ParallelMultiSearcher can change the sort order.</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-453</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;When using multiple sort criteria the first criterium that indicates a difference should be used.&lt;br/&gt;
When a field does not exist for a given document, special rules apply.&lt;br/&gt;
From what I see in the code, it is sorted as 0 for integer and float fields, and null Strings are sorted before others.&lt;/p&gt;

&lt;p&gt;This works correctly in both Lucene 1.4.3 and in trunk as long as you use a single IndexSearcher (except perhaps in special cases, see other bug reports like &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-374&quot; title=&quot;You cannot sort on fields that don&amp;#39;t exist&quot;&gt;&lt;del&gt;LUCENE-374&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;However, in MultiSearcher and ParallelMultiSearcher, the results of the separate IndexSearchers are merged and there an error occurs.&lt;br/&gt;
The bug is located in FieldDocSortedHitQueue.&lt;/p&gt;

&lt;p&gt;It can even be demonstrated by passing a single indexSearcher to a MultiSearcher.&lt;/p&gt;

&lt;p&gt;TestCase and patch follow.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Checked with revision 314961 on 2005-10-12&lt;/p&gt;</environment>
            <key id="12317882">LUCENE-453</key>
            <summary>Using MultiSearcher and ParallelMultiSearcher can change the sort order.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                <reporter username="lvl">Luc Vanlerberghe</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Oct 2005 03:05:49 +0100</created>
                <updated>Thu, 2 Jun 2011 23:03:45 +0100</updated>
                    <resolved>Thu, 10 Nov 2005 14:58:21 +0000</resolved>
                                            <fixVersion>1.9</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12331910" author="lvl" created="Thu, 13 Oct 2005 03:13:08 +0100"  >&lt;p&gt;The two assertMatches using the full index will pass.&lt;br/&gt;
The same assertMatches using a MultiSearcher or a ParallelMultiSearcher will fail.&lt;/p&gt;</comment>
                    <comment id="12331911" author="lvl" created="Thu, 13 Oct 2005 03:14:58 +0100"  >&lt;p&gt;This fixes the case where both Strings are null.&lt;/p&gt;</comment>
                    <comment id="12332392" author="lucenebugs@danielnaber.de" created="Wed, 19 Oct 2005 05:34:49 +0100"  >&lt;p&gt;What about the other &quot;case&quot; statements in FieldDocSortedHitQueue that return 1 or -1 but never 0. Should these be patched the same way?&lt;/p&gt;</comment>
                    <comment id="12332408" author="yseeley@gmail.com" created="Wed, 19 Oct 2005 06:17:24 +0100"  >&lt;p&gt;most of the other cases are guaranteed to never have null values (except for perhaps CUSTOM)?&lt;/p&gt;</comment>
                    <comment id="12357195" author="yseeley@gmail.com" created="Thu, 10 Nov 2005 14:58:21 +0000"  >&lt;p&gt;Thanks for the patch Luc!&lt;br/&gt;
I&apos;ve applied it to the current dev version (1.9).&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12314846" name="FieldDocSortedHitQueue.diff" size="1040" author="lvl" created="Thu, 13 Oct 2005 03:14:58 +0100" />
                    <attachment id="12314845" name="TestSort.diff" size="3679" author="lvl" created="Thu, 13 Oct 2005 03:13:08 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 19 Oct 2005 04:34:49 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>13296</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>27278</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>