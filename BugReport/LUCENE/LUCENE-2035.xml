<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:57:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2035/LUCENE-2035.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2035] TokenSources.getTokenStream() does not assign positionIncrement</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2035</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;TokenSources.StoredTokenStream does not assign positionIncrement information. This means that all tokens in the stream are considered adjacent. This has implications for the phrase highlighting in QueryScorer when using non-contiguous tokens.&lt;/p&gt;

&lt;p&gt;For example:&lt;br/&gt;
Consider  a token stream that creates tokens for both the stemmed and unstemmed version of each word - the fox (jump|jumped)&lt;br/&gt;
When retrieved from the index using TokenSources.getTokenStream(tpv,false), the token stream will be - the fox jump jumped&lt;/p&gt;

&lt;p&gt;Now try a search and highlight for the phrase query &quot;fox jumped&quot;. The search will correctly find the document; the highlighter will fail to highlight the phrase because it thinks that there is an additional word between &quot;fox&quot; and &quot;jumped&quot;. If we use the original (from the analyzer) token stream then the highlighter works.&lt;/p&gt;

&lt;p&gt;Also, consider the converse - the fox did not jump&lt;br/&gt;
&quot;not&quot; is a stop word and there is an option to increment the position to account for stop words - (the,0) (fox,1) (did,2) (jump,4)&lt;br/&gt;
When retrieved from the index using TokenSources.getTokenStream(tpv,false), the token stream will be - (the,0) (fox,1) (did,2) (jump,3).&lt;/p&gt;

&lt;p&gt;So the phrase query &quot;did jump&quot; will cause the &quot;did&quot; and &quot;jump&quot; terms in the text &quot;did not jump&quot; to be highlighted. If we use the original (from the analyzer) token stream then the highlighter works correctly.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12439938">LUCENE-2035</key>
            <summary>TokenSources.getTokenStream() does not assign positionIncrement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                <reporter username="chris morris">Christopher Morris</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2009 13:40:22 +0000</created>
                <updated>Wed, 30 Mar 2011 16:50:25 +0100</updated>
                    <resolved>Sat, 27 Nov 2010 23:25:33 +0000</resolved>
                            <version>2.4</version>
                <version>2.4.1</version>
                <version>2.9</version>
                                <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/highlighter</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                          <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                    <timeestimate seconds="86400">24h</timeestimate>
                                  <comments>
                    <comment id="12773929" author="chris morris" created="Thu, 5 Nov 2009 13:43:11 +0000"  >&lt;p&gt;For the highlighter trunk&lt;/p&gt;</comment>
                    <comment id="12791152" author="markrmiller@gmail.com" created="Wed, 16 Dec 2009 03:00:28 +0000"  >&lt;p&gt;Thanks for the tests and fix Christopher!&lt;/p&gt;

&lt;p&gt;I&apos;ve got one more patch coming and ill commit in a few days.&lt;/p&gt;

&lt;p&gt;I&apos;m going to break the tests back out in a separate file again (on second thought I think how you had is a good idea) and remove an author tag. Then after one more review I think this good to go in.&lt;/p&gt;</comment>
                    <comment id="12791680" author="markrmiller@gmail.com" created="Wed, 16 Dec 2009 23:47:01 +0000"  >&lt;p&gt;Hey Christopher, why are you going through the trouble of the custom collector to check that there are no hits? Why not just do a standard search?&lt;/p&gt;</comment>
                    <comment id="12791686" author="markrmiller@gmail.com" created="Wed, 16 Dec 2009 23:53:32 +0000"  >&lt;p&gt;I&apos;ve broken the new tests back out into there own file, change the hit collector code to just search basically, and improved the test coverage of TokenSources a bit.&lt;/p&gt;</comment>
                    <comment id="12791939" author="markrmiller@gmail.com" created="Thu, 17 Dec 2009 14:11:44 +0000"  >&lt;p&gt;I&apos;ll commit this soon.&lt;/p&gt;</comment>
                    <comment id="12792410" author="chris morris" created="Fri, 18 Dec 2009 09:32:17 +0000"  >&lt;p&gt;Cheers Mark,&lt;/p&gt;

&lt;p&gt;The custom collector was probably because I was learning the new API at the time.&lt;/p&gt;

&lt;p&gt;The only changes I&apos;ve made since the patch I submitted were to initialise the ArrayList with tpv.getTerms().length because that represents the minimum size that the list will grow to, and to replace the List and Iterator fields with an array (derived from the list) and an integer pointer. Both of which are probably unnecessary.&lt;/p&gt;

&lt;p&gt;The tests could be improved - the first case could be fixed in it&apos;s present form by using the Analyzer to generate the phrase query. If the stemmed word was the middle word of the phrase then that fix wouldn&apos;t work.&lt;/p&gt;</comment>
                    <comment id="12797251" author="markrmiller@gmail.com" created="Wed, 6 Jan 2010 19:08:57 +0000"  >&lt;p&gt;Thanks Christopher!&lt;/p&gt;</comment>
                    <comment id="12926269" author="rcmuir" created="Fri, 29 Oct 2010 14:11:45 +0100"  >&lt;p&gt;reopening for possible 2.9.4/3.0.3 backport.&lt;/p&gt;</comment>
                    <comment id="12964468" author="thetaphi" created="Sat, 27 Nov 2010 23:25:33 +0000"  >&lt;p&gt;Resolving again as this issue will not be backported to 2.9/3.0 branches.&lt;/p&gt;</comment>
                    <comment id="13013475" author="gsingers" created="Wed, 30 Mar 2011 16:50:25 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12428241" name="LUCENE-2035.patch" size="41204" author="markrmiller@gmail.com" created="Wed, 16 Dec 2009 23:53:32 +0000" />
                    <attachment id="12428123" name="LUCENE-2035.patch" size="20633" author="markrmiller@gmail.com" created="Wed, 16 Dec 2009 02:49:52 +0000" />
                    <attachment id="12424126" name="LUCENE-2305.patch" size="20324" author="chris morris" created="Thu, 5 Nov 2009 13:43:11 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 16 Dec 2009 03:00:28 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11742</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25690</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>