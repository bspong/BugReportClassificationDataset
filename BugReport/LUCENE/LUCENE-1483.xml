<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:02:28 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1483/LUCENE-1483.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1483] Change IndexSearcher multisegment searches to search each individual segment using a single HitCollector</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1483</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;This issue changes how an IndexSearcher searches over multiple segments. The current method of searching multiple segments is to use a MultiSegmentReader and treat all of the segments as one. This causes filters and FieldCaches to be keyed to the MultiReader and makes reopen expensive. If only a few segments change, the FieldCache is still loaded for all of them.&lt;/p&gt;

&lt;p&gt;This patch changes things by searching each individual segment one at a time, but sharing the HitCollector used across each segment. This allows FieldCaches and Filters to be keyed on individual SegmentReaders, making reopen much cheaper. FieldCache loading over multiple segments can be much faster as well - with the old method, all unique terms for every segment is enumerated against each segment - because of the likely logarithmic change in terms per segment, this can be very wasteful. Searching individual segments avoids this cost. The term/document statistics from the multireader are used to score results for each segment.&lt;/p&gt;

&lt;p&gt;When sorting, its more difficult to use a single HitCollector for each sub searcher. Ordinals are not comparable across segments. To account for this, a new field sort enabled HitCollector is introduced that is able to collect and sort across segments (because of its ability to compare ordinals across segments). This TopFieldCollector class will collect the values/ordinals for a given segment, and upon moving to the next segment, translate any ordinals/values so that they can be compared against the values for the new segment. This is done lazily.&lt;/p&gt;

&lt;p&gt;All and all, the switch seems to provide numerous performance benefits, in both sorted and non sorted search. We were seeing a good loss on indices with lots of segments (1000?) and certain queue sizes / queries, but the latest results seem to show thats been mostly taken care of (you shouldnt be using such a large queue on such a segmented index anyway).&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Introduces
	&lt;ul&gt;
		&lt;li&gt;MultiReaderHitCollector - a HitCollector that can collect across multiple IndexReaders. Old HitCollectors are wrapped to support multiple IndexReaders.&lt;/li&gt;
		&lt;li&gt;TopFieldCollector - a HitCollector that can compare values/ordinals across IndexReaders and sort on fields.&lt;/li&gt;
		&lt;li&gt;FieldValueHitQueue - a Priority queue that is part of the TopFieldCollector implementation.&lt;/li&gt;
		&lt;li&gt;FieldComparator - a new Comparator class that works across IndexReaders. Part of the TopFieldCollector implementation.&lt;/li&gt;
		&lt;li&gt;FieldComparatorSource - new class to allow for custom Comparators.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Alters
	&lt;ul&gt;
		&lt;li&gt;IndexSearcher uses a single HitCollector to collect hits against each individual SegmentReader. All the other changes stem from this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Deprecates
	&lt;ul&gt;
		&lt;li&gt;TopFieldDocCollector&lt;/li&gt;
		&lt;li&gt;FieldSortedHitQueue&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
            <key id="12410235">LUCENE-1483</key>
            <summary>Change IndexSearcher multisegment searches to search each individual segment using a single HitCollector</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="markrmiller@gmail.com">Mark Miller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Dec 2008 00:43:16 +0000</created>
                <updated>Wed, 27 Oct 2010 18:19:39 +0100</updated>
                    <resolved>Mon, 2 Feb 2009 16:22:12 +0000</resolved>
                            <version>2.9</version>
                                <fixVersion>2.9</fixVersion>
                                        <due></due>
                    <votes>1</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12654751" author="mikemccand" created="Tue, 9 Dec 2008 09:48:43 +0000"  >&lt;p&gt;Mark did you intend to attach the patch here?&lt;/p&gt;</comment>
                    <comment id="12654771" author="markrmiller@gmail.com" created="Tue, 9 Dec 2008 11:43:59 +0000"  >&lt;p&gt;I had meant to attach a patch, but then a bunch of stuff wasn&apos;t working...&lt;/p&gt;

&lt;p&gt;This is still a poor mans patch. I need to switch to using the expose subreaders patch. This also doesnt include the multisearcher sort patch yet, because when I tried the first one (2nd rev) everything broke. I&apos;ll work on integrating that later.&lt;/p&gt;

&lt;p&gt;I think all tests pass except for the very last sort test.&lt;/p&gt;

&lt;p&gt;Some cleanup needed, including the possible drop of using MultiSearcher itself.&lt;/p&gt;

&lt;p&gt;Basically, its still in a proof of concept stage.&lt;/p&gt;</comment>
                    <comment id="12654805" author="creamyg" created="Tue, 9 Dec 2008 14:20:11 +0000"  >&lt;p&gt;&amp;gt; Quick micro bench - did it twice and both times came out 17% slower.&lt;/p&gt;

&lt;p&gt;I&apos;d guess that all the OO construction/destruction costs in this part of your patch are slowing things down.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+    Searchable[] searchers = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Searchable[readers.length];
+    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; readers.length; i++) {
+      searchers[i] = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IndexSearcher(readers[i]);
+    }
+
+    MultiSearcher multiSearcher = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MultiSearcher(searchers);
+    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; multiSearcher.search(weight, filter, nDocs, sort);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12654812" author="markrmiller@gmail.com" created="Tue, 9 Dec 2008 14:53:40 +0000"  >&lt;p&gt;I&apos;ll be sure to include that info with the next set of results. &lt;/p&gt;

&lt;p&gt;I don&apos;t think those results represent getting lucky though: its 4 rounds and 2 runs with the same results (17% both runs). Nothing scientific, just did it real quick to get a base feel of the slowdown before the patch is finished up.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt; Just like I forgot to take the optimize out of the sort alg when I pasted it here, looks like I missed it for the benches as well. Disregard those numbers.&lt;/p&gt;

&lt;p&gt;Here is the alg I used:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
merge.factor=mrg:50
compound=false

sort.rng=20000:10000:20000:10000

analyzer=org.apache.lucene.analysis.standard.StandardAnalyzer
directory=FSDirectory
#directory=RamDirectory

doc.stored=true
doc.tokenized=true
doc.term.vector=false
doc.add.log.step=100000

docs.dir=reuters-out

doc.maker=org.apache.lucene.benchmark.byTask.feeds.SortableSimpleDocMaker

query.maker=org.apache.lucene.benchmark.byTask.feeds.SimpleQueryMaker

# task at this depth or less would print when they start
task.max.depth.log=2

log.queries=true
# -------------------------------------------------------------------------------------

{ &quot;Rounds&quot;
	{ &quot;Run&quot;
      ResetSystemErase

      { &quot;Populate&quot;
        -CreateIndex
        { &quot;MAddDocs&quot; AddDoc(100) &amp;gt; : 500000
        -CloseIndex
      }
    
      { &quot;TestSortSpeed&quot;
        OpenReader  
        { &quot;LoadFieldCacheAndSearch&quot; SearchWithSort(sort_field:int) &amp;gt; : 1 
        { &quot;SearchWithSort&quot; SearchWithSort(sort_field) &amp;gt; : 5000
        CloseReader 
      
      }
    
      NewRound
     } : 4

} 

RepSumByName

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12654822" author="markrmiller@gmail.com" created="Tue, 9 Dec 2008 15:17:24 +0000"  >&lt;p&gt;Okay, I straightened things out, and now it looks like possibly no loss (for few segments anyway). Last I looked at the index, only 6 segments. I&apos;ve got to put real time into all this later though. Only been able to give it some very backgroundish time this morning.&lt;/p&gt;</comment>
                    <comment id="12654828" author="yseeley@gmail.com" created="Tue, 9 Dec 2008 15:30:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;Okay, I straightened things out, and now it looks like possibly no loss&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So if there was a 17%  loss on the optimized index, and very little loss on a segmented index, I assume that means that matching/scoring is enough slower on the segmented index that the loss in sorting performance doesn&apos;t matter as much?&lt;/p&gt;</comment>
                    <comment id="12654834" author="markrmiller@gmail.com" created="Tue, 9 Dec 2008 15:41:31 +0000"  >&lt;p&gt;Ignore those first results entirely. It turns out I had the latest 1471 patched in. That shouldnt slow down a single segment though. Neither this or 1471 should have slowed things down because they only affect multisegment and multiindex searches I thought. Odd, but I just junked all of that and started fresh, did the tests a little closer to right, and see the numbers looking the same. Didn&apos;t want to get too into benching before its sorted out a bit more.  I&apos;ll try to get enough time to be more rigorous later though.  My free moments are under heavy attack by the female that appears to have made herself at home in my house.&lt;/p&gt;

&lt;p&gt;As a side not, 1471 doesn&apos;t work in a couple ways with this patch - it throws both a nullpointer exception and a class cast exception in different circumstances.&lt;/p&gt;</comment>
                    <comment id="12654839" author="mikemccand" created="Tue, 9 Dec 2008 16:10:24 +0000"  >&lt;p&gt;I think there should be very little impact to performance, for single or multi segment indices, for the search itself against a warmed reader.  (And actually &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1471&quot; title=&quot;Faster MultiSearcher.search merge docs &quot;&gt;&lt;del&gt;LUCENE-1471&lt;/del&gt;&lt;/a&gt; should make things a wee bit faster, especially if n,m are largeish, though this will typically be in the noise).&lt;/p&gt;

&lt;p&gt;But warming after reopen should be much faster with this patch (we should try to measure that too).&lt;/p&gt;</comment>
                    <comment id="12654842" author="markrmiller@gmail.com" created="Tue, 9 Dec 2008 16:32:16 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think there should be very little impact to performance, for single or multi segment indices, for the search itself against a warmed reader. (And actually &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1471&quot; title=&quot;Faster MultiSearcher.search merge docs &quot;&gt;&lt;del&gt;LUCENE-1471&lt;/del&gt;&lt;/a&gt; should make things a wee bit faster, especially if n,m are largeish, though this will typically be in the noise). &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That seems to be inline with what I got with 6 segments. I&apos;m running some 30-50 seg range tests on my other laptop now.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But warming after reopen should be much faster with this patch (we should try to measure that too).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ve got a base alg for that type of thing around somewhere too, from 831. It should be about the same, which means pretty dramatic reopen improvements if you multiple segments, especially if the new segment is small. Its likely to be small in comparison to all of the segs anyway, which means pretty great improvements. &lt;/p&gt;</comment>
                    <comment id="12654895" author="markrmiller@gmail.com" created="Tue, 9 Dec 2008 19:00:57 +0000"  >&lt;p&gt;Ill bench again after this issue is polished up, but it looks like at 100 segments I am seeing the 20% drop. I didn&apos;t see any drop at 6 segments in a retest.&lt;/p&gt;

&lt;p&gt;Ill do some longer, more thought out benchmarks when the patch is in better shape.&lt;/p&gt;</comment>
                    <comment id="12654922" author="mikemccand" created="Tue, 9 Dec 2008 19:37:18 +0000"  >
&lt;p&gt;Hmmmmmmm.&lt;/p&gt;

&lt;p&gt;OK I think I see what could explain this: insertion into the pqueue is&lt;br/&gt;
fairly costly.  So, because we now make 100 pqueues, each gathering&lt;br/&gt;
top N results, we are paying much more insertion cost overall than the&lt;br/&gt;
single queue that IndexSearcher(MultiReader) uses.&lt;/p&gt;

&lt;p&gt;So.... how about still doing the searches per-sub-reader(searcher),&lt;br/&gt;
but, make a HitCollector that gathers the results into a single&lt;br/&gt;
pqueue, passing that HitCollector to each sub-searcher?&lt;/p&gt;

&lt;p&gt;If that turns out OK, then I think it would make &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1471&quot; title=&quot;Faster MultiSearcher.search merge docs &quot;&gt;&lt;del&gt;LUCENE-1471&lt;/del&gt;&lt;/a&gt; moot&lt;br/&gt;
because we should similarly change MultiSearcher to use a single&lt;br/&gt;
shared pqueue.&lt;/p&gt;

&lt;p&gt;Actually I think this approach should be a bit faster, because there&lt;br/&gt;
is some very small method call overhead to how MultiReader implements&lt;br/&gt;
TermDocs/Positions by &quot;concatenating&quot; its sub-readers.  So by pushing&lt;br/&gt;
Searcher down onto each SegmentReader we should gain a bit, but it&lt;br/&gt;
could very well be in the noise.  For this reason we may in fact want&lt;br/&gt;
to do this same thing for the &quot;normal&quot; (sort by relevance)&lt;br/&gt;
IndexSearcher.search.&lt;/p&gt;

&lt;p&gt;I wish I thought of this sooner.  Sorry for the runaround Mark!&lt;/p&gt;</comment>
                    <comment id="12654940" author="cutting" created="Tue, 9 Dec 2008 20:17:12 +0000"  >&lt;p&gt;&amp;gt; make a HitCollector that gathers the results into a single pqueue&lt;/p&gt;

&lt;p&gt;That&apos;s good when everything&apos;s local, but bad when things are distributed.  If we movE RemoteSearchable to contrib (as discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1314&quot; title=&quot;IndexReader.clone&quot;&gt;&lt;del&gt;LUCENE-1314&lt;/del&gt;&lt;/a&gt;) then this may not be a problem, but we might still leave hooks so that someone can write a search that uses a separate top-queue per remote segment.&lt;/p&gt;</comment>
                    <comment id="12654962" author="mikemccand" created="Tue, 9 Dec 2008 20:57:39 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt;&amp;gt; make a HitCollector that gathers the results into a single pqueue&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; That&apos;s good when everything&apos;s local, but bad when things are distributed. If we movE RemoteSearchable to contrib (as discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1314&quot; title=&quot;IndexReader.clone&quot;&gt;&lt;del&gt;LUCENE-1314&lt;/del&gt;&lt;/a&gt;) then this may not be a problem, but we might still leave hooks so that someone can write a search that uses a separate top-queue per remote segment.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good point; so this means we can&apos;t blindly do this optimization to MultiSearcher (w/o having option to do separate queues, merged in the end).  But for IndexSearcher(Multi*Reader).search it should be safe?&lt;/p&gt;</comment>
                    <comment id="12654970" author="cutting" created="Tue, 9 Dec 2008 21:18:38 +0000"  >&lt;p&gt;&amp;gt; But for IndexSearcher(Multi*Reader).search it should be safe?&lt;/p&gt;

&lt;p&gt;Right.  Perhaps this is a reason to encourage folks to use MultiReader instead of MultiSearcher.  Are there cases, other than distributed, where MultiSearcher is required?  If not, perhaps it could be moved to the contrib/distributed layer too.&lt;/p&gt;</comment>
                    <comment id="12655005" author="markrmiller@gmail.com" created="Tue, 9 Dec 2008 23:04:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;make a HitCollector that gathers the results into a single pqueue &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well it certainly made the code cleaner and the patch a bit nicer, but on first quick test, I still see the 20% slowdown with 100 more/less segments.&lt;/p&gt;

&lt;p&gt;I&apos;m looking through too see where I may have done something funny.&lt;/p&gt;</comment>
                    <comment id="12655025" author="mikemccand" created="Wed, 10 Dec 2008 00:02:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;on first quick test, I still see the 20% slowdown with 100 more/less segments.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Argh!  Can you post your current patch?&lt;/p&gt;</comment>
                    <comment id="12655027" author="markrmiller@gmail.com" created="Wed, 10 Dec 2008 00:11:31 +0000"  >&lt;p&gt;Here is what I&apos;ve got. The final sort test still fails, but the rest should pass.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12655036" author="markrmiller@gmail.com" created="Wed, 10 Dec 2008 00:31:48 +0000"  >&lt;p&gt;I also did a quick reopen alg. The speed gain on this can really vary depending on index access patterns. I tried adding 500000 (very small) docs with a random sort field. Then added 50000 docs and then reopen 10 times. Repeat all 4 times. Comparison is of the time it takes to load the fieldcache and do one search. With this patch it came out about 40-50% faster. Obviously going to depend on many factors in real world though. In certain applications I&apos;m sure it could be many times faster or slower.&lt;/p&gt;</comment>
                    <comment id="12655048" author="markrmiller@gmail.com" created="Wed, 10 Dec 2008 00:58:57 +0000"  >&lt;p&gt;Doing a little profiling on the new code and off the top results of interest are:&lt;/p&gt;

&lt;p&gt;FieldSortedHitQueue.lessThan(object,object) approx 12%&lt;br/&gt;
FieldSortedHitQueue.insertWIthOverflow(object) approx 12%&lt;br/&gt;
MultiReaderTopFieldDocCollector.collect(int,float) 6.3%&lt;br/&gt;
FieldSortedHitQueue$4.compare() 5.3 %&lt;/p&gt;

&lt;p&gt;and on...&lt;/p&gt;


&lt;p&gt;For Lucene trunk, a day or two ago:&lt;/p&gt;

&lt;p&gt;FieldSortedHitQueue.insertWIthOverflow(object) approx 11%&lt;br/&gt;
TopFieldDocCollector.collect(int,float) 7.1%&lt;br/&gt;
FieldSortedHitQueue.lessThan(object,object) approx 6.7%&lt;br/&gt;
FieldSortedHitQueue.updateMaxScore 3.2%&lt;br/&gt;
FieldSortedHitQueue$4.compare() 3.2 %&lt;/p&gt;</comment>
                    <comment id="12655424" author="markrmiller@gmail.com" created="Wed, 10 Dec 2008 23:32:46 +0000"  >&lt;p&gt;I think I see my mistake. Dumb one - I think I did it well trying to get things to work and didn&apos;t realize I left it in. I&apos;ll put up another patch after some benches finish.&lt;/p&gt;</comment>
                    <comment id="12655434" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 00:11:42 +0000"  >&lt;p&gt;Okay, now its as fast, if not a bit faster. I was doing the priority queue n*readers, as part of getting tests to pass early. Left it after fixing things elsewhere, and boom - explains all the lessthan nonsense in the profiling. Whoops.&lt;/p&gt;

&lt;p&gt;Looks good now though - still  need to investigate failure of last sort test.&lt;/p&gt;</comment>
                    <comment id="12655461" author="mikemccand" created="Thu, 11 Dec 2008 01:56:43 +0000"  >&lt;p&gt;Exellent!  That was a sneaky one.&lt;/p&gt;

&lt;p&gt;I attached a tiny change to the patch, which is to set the docBase in MultiReaderTopFieldDocCollector; this saves the lookup into starts in each collect call.&lt;/p&gt;</comment>
                    <comment id="12655616" author="mikemccand" created="Thu, 11 Dec 2008 12:01:05 +0000"  >
&lt;p&gt;OK, I ran a quick perf test on a 100 segment index with 1 million docs&lt;br/&gt;
(10K docs per segment), for a single TermQuery (&quot;text&quot;), and I&apos;m&lt;br/&gt;
seeing 11.1% speedup (best of 4: 20.36s -&amp;gt; 18.11s) with this patch, on&lt;br/&gt;
Mac OS X.  On Linux I see 6.3% speedup (best of 4: 23.31s -&amp;gt; 21.84s).&lt;/p&gt;

&lt;p&gt;Single segment index shows no difference, as expected.&lt;/p&gt;

&lt;p&gt;I think the speedup is due to avoiding the extra method call plus 2nd&lt;br/&gt;
pass through the int docs[] to add in the doc base, in&lt;br/&gt;
MultiSegmentReader.MultiTermDocs.read(int[] docs, int[] freqs).&lt;/p&gt;

&lt;p&gt;This is a nice &quot;side effect&quot;, ie in addition to getting faster reopen&lt;br/&gt;
performance (the original goal here), we get a bump in single term&lt;br/&gt;
search performance.&lt;/p&gt;

&lt;p&gt;I think given this, we should cutover other search methods&lt;br/&gt;
(sort-by-relevance, custom HitCollector) to this approach?  Maybe if&lt;br/&gt;
we add a new Scorer.score method that can accept a &quot;docBase&quot; which it&lt;br/&gt;
adds into the doc() before calling collect()?  In fact, if we do that,&lt;br/&gt;
we may not even need the new MultiReaderTopFieldDocCollector at all?&lt;/p&gt;

&lt;p&gt;Hmm, though, a Scorer may override that score(HitCollector), eg&lt;br/&gt;
BooleanScorer does.  Maybe we have to make a wrapper HitCollector that&lt;br/&gt;
simply adds in the docBase and then invokes the real&lt;br/&gt;
HitCollector.collect after shifting the docBase?  Though that costs us&lt;br/&gt;
an extra method call per collect().&lt;/p&gt;

&lt;p&gt;Here&apos;s the alg I used (slight modified from the one above):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;merge.factor=1000
compound=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;

analyzer=org.apache.lucene.analysis.standard.StandardAnalyzer
directory=FSDirectory
#directory=RamDirectory

doc.tokenized=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
doc.term.vector=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
doc.add.log.step=100000
max.buffered=10000
ram.flush.mb=1000

work.dir = /lucene/work

doc.maker=org.apache.lucene.benchmark.byTask.feeds.SortableSimpleDocMaker

query.maker=org.apache.lucene.benchmark.byTask.feeds.FileBasedQueryMaker
file.query.maker.file = test.queries

task.max.depth.log=2

log.queries=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;

{ &lt;span class=&quot;code-quote&quot;&gt;&quot;Populate&quot;&lt;/span&gt;
  -CreateIndex
  { &lt;span class=&quot;code-quote&quot;&gt;&quot;MAddDocs&quot;&lt;/span&gt; AddDoc(100) &amp;gt; : 1000000
  -CloseIndex
}
    
{ &lt;span class=&quot;code-quote&quot;&gt;&quot;Rounds&quot;&lt;/span&gt;
  { &lt;span class=&quot;code-quote&quot;&gt;&quot;Run&quot;&lt;/span&gt;
    { &lt;span class=&quot;code-quote&quot;&gt;&quot;TestSortSpeed&quot;&lt;/span&gt;
      OpenReader  
      { &lt;span class=&quot;code-quote&quot;&gt;&quot;LoadFieldCacheAndSearch&quot;&lt;/span&gt; SearchWithSort(sort_field:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) &amp;gt; : 1 
      { &lt;span class=&quot;code-quote&quot;&gt;&quot;SearchWithSort&quot;&lt;/span&gt; SearchWithSort(sort_field) &amp;gt; : 500
      CloseReader 
    }
    NewRound
  } : 4
} 

RepSumByPrefRound SearchWithSort
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It creates the index once, then does 4 rounds of searching with the&lt;br/&gt;
single query &quot;text&quot; in test.queries (SimpleQueryMaker was creating&lt;br/&gt;
other queries that were getting 0 or 1 hits).&lt;/p&gt;

&lt;p&gt;I&apos;m running with &quot;java -Xms1024M -Xmx1024M -Xbatch -server&quot;; java is&lt;br/&gt;
1.6.0_07 on Mac Pro OS X 10.5.5 and 1.6.0_10-rc on 2.6.22.1 linux&lt;br/&gt;
kernel.&lt;/p&gt;</comment>
                    <comment id="12655617" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 12:01:50 +0000"  >&lt;p&gt;Thanks Mike.&lt;/p&gt;

&lt;p&gt;Are we going to be screwed with this filter stuff though? I&apos;m looking into the last sort test failing - my first thought is that a filter with say 8 docs, is getting pushed down onto 4 searches with 2 docs in each reader type of thing. A filter that allows the 8th doc wont do very well on a bunch of 2 docs searches...or hopefully I don&apos;t know what I&apos;m talking about. Looking to see if I can figure my way around it now.&lt;/p&gt;</comment>
                    <comment id="12655620" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 12:13:06 +0000"  >&lt;p&gt;Hmmm...well this makes the test pass (I subtract the base from the filter doc id)...&lt;/p&gt;

&lt;p&gt;Let me know if I&apos;m all wet on this...&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;that cant be quite right...I&apos;ll try making a different test.&lt;/p&gt;</comment>
                    <comment id="12655623" author="mikemccand" created="Thu, 11 Dec 2008 12:17:45 +0000"  >&lt;p&gt;One thing to fix is ParalellReader: it currently defines a getSubReaders method, but, this won&apos;t work for searching (because ParallelReader&apos;s sub-readers are not &quot;concatenated&quot;).  I think we need a more specific name than &quot;getSubReaders&quot; (there&apos;s some initial discussion of this in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1475&quot; title=&quot;Expose sub-IndexReaders from MultiReader or MultiSegmentReader&quot;&gt;&lt;del&gt;LUCENE-1475&lt;/del&gt;&lt;/a&gt;).  Maybe getConcatenatedReaders?  getSequentialReaders?  Something else...?&lt;/p&gt;</comment>
                    <comment id="12655628" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 12:36:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think given this, we should cutover other search methods (sort-by-relevance, custom HitCollector) to this approach? Maybe if we add a new Scorer.score method that can accept a &quot;docBase&quot; which it adds into the doc() before calling collect()? In fact, if we do that, we may not even need the new MultiReaderTopFieldDocCollector at all?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I like this idea. I&apos;d love to figure out how &apos;outside&apos; systems could get the reopen benefit as well (solr caches and such, beyond internal sorting). This seems like a first step towards that possibility (though I admittedly don&apos;t see a clear path yet).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Hmm, though, a Scorer may override that score(HitCollector), eg BooleanScorer does. Maybe we have to make a wrapper HitCollector that simply adds in the docBase and then invokes the real HitCollector.collect after shifting the docBase? Though that costs us an extra method call per collect().&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Well, we might as well bench and see what we lose...&lt;/p&gt;</comment>
                    <comment id="12655634" author="mikemccand" created="Thu, 11 Dec 2008 13:28:11 +0000"  >&lt;p&gt;Maybe, we should add &quot;setDocBase&quot; to HitCollector.  Then, fix all core/contrib HitCollectors to respect this.  Then add a method &quot;supportsDocBase()&quot; which returns false in default impl in HitCollector.  Then, in search() if we are dealing w/ a HitCollector that does not supportDocBase() we have to wrap?&lt;/p&gt;

&lt;p&gt;Alternatively, we could throw an UnsupportedOperationException in setDocBase() by default, catch that, and fallback to wrapping.&lt;/p&gt;

&lt;p&gt;This way we avoid the extra collect() method call in the common cases (builtin HitCollectors).  Also, we save an add when the doc is not competitive.&lt;/p&gt;</comment>
                    <comment id="12655639" author="mikemccand" created="Thu, 11 Dec 2008 13:44:51 +0000"  >&lt;p&gt;You shouldn&apos;t need to subtract base from the filter&apos;s docID, since the filter is operating in the docID space of the sub-reader.&lt;/p&gt;

&lt;p&gt;Is it TestSort.testTopDocScores that you see failing (that&apos;s what I see)?&lt;/p&gt;

&lt;p&gt;Unfortunately, the filter in that test is assuming that the IndexReader it&apos;s passed in is equal to the &quot;full&quot; IndexReader, because it references docs1.scoreDocs&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.doc, which is the docID space of the full reader.&lt;/p&gt;

&lt;p&gt;I would say the test is buggy (it&apos;s making an assumption about the API that happens to be true but was not guaranteed).  However, this could mean similar filters &quot;out there&quot; think they can grab docIDs from the top-level IndexReader, cache them, and then assign them inside the getDocIdSet method.&lt;/p&gt;</comment>
                    <comment id="12655640" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 13:47:15 +0000"  >&lt;p&gt;A filter fix thats closer to correct and a new test. &lt;/p&gt;</comment>
                    <comment id="12655642" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 13:53:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is it TestSort.testTopDocScores that you see failing (that&apos;s what I see)?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;right&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Unfortunately, the filter in that test is assuming that the IndexReader it&apos;s passed in is equal to the &quot;full&quot; IndexReader, because it references docs1.scoreDocs&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.doc, which is the docID space of the full reader.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;right, its using the full  id space - isnt that legal though? It did work.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I would say the test is buggy (it&apos;s making an assumption about the API that happens to be true but was not guaranteed). However, this could mean similar filters &quot;out there&quot; think they can grab docIDs from the top-level IndexReader, cache them, and then assign them inside the getDocIdSet method.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That was my first thought - are they aloud to build the filter this way? But it worked to do it right? I like your assumption thought though - suits my lazy side &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;What if someone made a filter that is supposed to only allow the first doc? So it is set for 0...all of the first docs of each sub reader would match. That seemed to be supported before right?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;nm, I guess that still fits the &apos;assumption&apos; thing. Feels odd changing this behavior still though - I guess you have this same issue over multisearchers though ...&lt;/p&gt;

&lt;p&gt;How about those keeping their own reader to filter cache or something? A single filter could correctly apply against a single MultiReader before...now you would need a different filter for each subreader right?&lt;/p&gt;</comment>
                    <comment id="12655647" author="mikemccand" created="Thu, 11 Dec 2008 14:13:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;How about those keeping their own reader to filter cache or something? A single filter could correctly apply against a single MultiReader before...now you would need a different filter for each subreader right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Such cases would then be caching by sub-reader, right?  That&apos;s the benefit of this approach.  EG I had been thinking we&apos;d need to fix the recently added FieldCacheRangeFilter to also &quot;understand&quot; when it&apos;s dealing w/ concatenated sub-readers, but in fact with this change that filter is only given the sub-readers, one at a time, and so it only asks FieldCache per sub-reader, and we automatically get faster reopen performance &quot;for free&quot; (no change to FieldCacheRangeFilter required).&lt;/p&gt;

&lt;p&gt;Still, I agree this is probably dangerous to suddenly change, since there could easily be filters out there that are &lt;span class=&quot;error&quot;&gt;&amp;#91;illegally&amp;#93;&lt;/span&gt; using a docID not belonging/corresponding to the reader that was passed in.  So maybe we should provide a migration path.  EG, add &quot;allowSubReaders&quot; to Filter, defaulting to &quot;return false&quot; so that any external Filter impls still get passed the Multi*Reader, and then fix all core/contrib filters to return true from that method?&lt;/p&gt;</comment>
                    <comment id="12655663" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 14:33:53 +0000"  >&lt;p&gt;Okay, I follow now. If you did things correctly, you&apos;ll always be passed the right segmentreader through a hook. Nice. I think we really do want to do this for the other search methods.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Still, I agree this is probably dangerous to suddenly change, since there could easily be filters out there that are &lt;span class=&quot;error&quot;&gt;&amp;#91;illegally&amp;#93;&lt;/span&gt; using a docID not belonging/corresponding to the reader that was passed in. So maybe we should provide a migration path. EG, add &quot;allowSubReaders&quot; to Filter, defaulting to &quot;return false&quot; so that any external Filter impls still get passed the Multi*Reader, and then fix all core/contrib filters to return true from that method?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This seems reasonable. I am following your &lt;span class=&quot;error&quot;&gt;&amp;#91;illegal&amp;#93;&lt;/span&gt; argument better now though, so I wouldn&apos;t feel so bad leaving it out. If its unsupported behavior, I like the idea of adding backward compat cruft much less. I had it in my head that you might be caching things based on the top level multireader, but it looks like now, that you always should be using the reader provided by a hook - which will be the single seg reader.&lt;/p&gt;</comment>
                    <comment id="12655688" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 16:30:15 +0000"  >&lt;p&gt;I think this is almost there: added the new logic to relevance and hitcollector search as well.&lt;/p&gt;</comment>
                    <comment id="12655696" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 17:01:05 +0000"  >&lt;p&gt;That actually needed a couple of tweaks.&lt;/p&gt;</comment>
                    <comment id="12655703" author="mikemccand" created="Thu, 11 Dec 2008 17:14:32 +0000"  >&lt;p&gt;Looks good!  Do we really need IndexReader.supportsSequentialReaders?  Because the default impl (return length 1 array of itself) seems sufficient?&lt;/p&gt;

&lt;p&gt;Also, I don&apos;t think ParallelReader needs to throw UnsupportedOperationException in that method &amp;#8211; it can fallback to the default?&lt;/p&gt;

&lt;p&gt;It would be nice to somehow deprecate &quot;supportsDocBase&quot; so that all outside HitCollectors would need to support it on upgrading to 3.0, but, I&apos;m not sure how to cleanly do that.  (Ie I&apos;d rather not have that method continue to exist in 3.0).&lt;/p&gt;

&lt;p&gt;It&apos;s a delightfully small patch now!&lt;/p&gt;</comment>
                    <comment id="12655704" author="mikemccand" created="Thu, 11 Dec 2008 17:21:47 +0000"  >&lt;p&gt;Also, back compat tests fail to compile because we renamed Multi*Reader.getSubReaders --&amp;gt; getSequentialSubReaders.  So when committing this be sure to also fix the test-tag branch!&lt;/p&gt;</comment>
                    <comment id="12655709" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 17:29:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;Looks good! Do we really need IndexReader.supportsSequentialReaders? Because the default impl (return length 1 array of itself) seems sufficient? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Let me investigate. If you try using the default impl, and you change the parralellreaderreopen test to use getSequintialReaders rather than getSubReaders, the test will throw a stack trace overflow on checking if the reader is closed. I put the illegal in there to make sure I wasnt calling it, because upon switching to getSubReaders, problem goes away. Seemed fair enough, but I&apos;ll I guess have to understand what was going on to really respond.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It would be nice to somehow deprecate &quot;supportsDocBase&quot; so that all outside HitCollectors would need to support it on upgrading to 3.0, but, I&apos;m not sure how to cleanly do that. (Ie I&apos;d rather not have that method continue to exist in 3.0).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1. I dont see what we can do but release it deprecated with a note explaining. Fair enough for 3.0 I think.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It&apos;s a delightfully small patch now!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, this one had the great feeling of the multiterm patch - rolled right up into something nice. Goto love the Lucene API, flaws or not. &lt;/p&gt;</comment>
                    <comment id="12655710" author="mikemccand" created="Thu, 11 Dec 2008 17:47:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;If you try using the default impl, and you change the parralellreaderreopen test to use getSequintialReaders rather than getSubReaders&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But you shouldn&apos;t change that test (it should continue to call ParalellReader.getSubReaders).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I dont see what we can do but release it deprecated with a note explaining. Fair enough for 3.0 I think.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problem is this doesn&apos;t create a the right sequence.  Ie, if we mark supportsDocBase as deprecated, then some ExternalHitCollector won&apos;t see the deprecation warning (they have not overridden supportsDocBase), and so then we can&apos;t remove it in 3.0 since their code will then silently break.  I think the only thing to do would be deprecate collect() in favor of another method.  Or, deprecate HitCollector entirely in favor of new class DocBaseHitCollector (don&apos;t like that name).  Sigh...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Yeah, this one had the great feeling of the multiterm patch - rolled right up into something nice. Goto love the Lucene API, flaws or not.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I love this kind &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12655712" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 17:49:05 +0000"  >&lt;p&gt;So I don&apos;t know what that stackover flow was, but I just put things to how they should be and all tests pass.&lt;/p&gt;

&lt;p&gt;So very close now. I&apos;m not ready to commit myself though. I do most of my thinking after the work &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12655713" author="mikemccand" created="Thu, 11 Dec 2008 17:49:41 +0000"  >&lt;p&gt;Oh one more thing: I think we don&apos;t need both supportsDocBase and setDocBase throwing UOE by default?  How about just the 2nd one, and you fix search to catch the UOE and wrap in DocBaseCollector?&lt;/p&gt;</comment>
                    <comment id="12655716" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 17:55:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;But you shouldn&apos;t change that test (it should continue to call ParalellReader.getSubReaders).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, I was coming at it from the wrong angle. I had refactored in the change with eclipse, and seeing that ParalellReader.getSuquentialReaders could cause a statckoverflow, thats why i put in the isSequentialSuported check. Guess its not a concern though. I didn&apos;t take much time to understand it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The problem is this doesn&apos;t create a the right sequence. Ie, if we mark supportsDocBase as deprecated, then some ExternalHitCollector won&apos;t see the deprecation warning (they have not overridden supportsDocBase), and so then we can&apos;t remove it in 3.0 since their code will then silently break. I think the only thing to do would be deprecate collect() in favor of another method. Or, deprecate HitCollector entirely in favor of new class DocBaseHitCollector (don&apos;t like that name). Sigh...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This depends right? Don&apos;t we have a lot of latitude with 3.0? I would think we could require that you read some upgrade notes on changes...3.0 is our hope to change some things we couldn&apos;t normally get away with I thought &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I agree we should be friendly, like 1 to 2, but its tempting to use 3.0 to do some things more cleanly rather than less.&lt;/p&gt;</comment>
                    <comment id="12655718" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 17:58:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;Oh one more thing: I think we don&apos;t need both supportsDocBase and setDocBase throwing UOE by default? How about just the 2nd one, and you fix search to catch the UOE and wrap in DocBaseCollector?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you&apos;d like...I&apos;m not a fan of control with exceptions. I am also not a fan of of isSupported methods though...I was leaning that way over exceptions...sounds like you lean the other way...? I guess it has its appeal in this case...&lt;/p&gt;</comment>
                    <comment id="12655761" author="cutting" created="Thu, 11 Dec 2008 20:11:33 +0000"  >&lt;p&gt;Could we add a new class like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class Hitable {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; void setBase(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; base);
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; void hit(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; doc, &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; score);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;upgrade everything in trunk to use this, and change HitCollector to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/** @deprecated */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class HitCollector &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Hitable {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; void setBase() { &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UOE(); }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;then, for back-compatiblity, wrap anything that extends HitCollector to rebase?&lt;/p&gt;

&lt;p&gt;Then you&apos;d have neither an isSupported method nor use exceptions for control.&lt;/p&gt;</comment>
                    <comment id="12655771" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 21:05:28 +0000"  >&lt;p&gt;Thats a great idea, I&apos;ll try that route.&lt;/p&gt;

&lt;p&gt;Another tiny win in this is that MuliSearcher doesn&apos;t have to use a doubled up hitcollector anymore.&lt;/p&gt;</comment>
                    <comment id="12655789" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 22:13:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;upgrade everything in trunk to use this, &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt; If users are using a HitCollector as a ref to a trunk HitCollector that becomes a Hitable, won&apos;t their code break? I really like this idea, but does it get around back compat? &lt;/p&gt;</comment>
                    <comment id="12655812" author="cutting" created="Thu, 11 Dec 2008 23:35:43 +0000"  >&lt;p&gt;&amp;gt; If users are using a HitCollector as a ref to a trunk HitCollector that becomes a Hitable, won&apos;t their code break?&lt;/p&gt;

&lt;p&gt;Lucene never passes someone a HitCollector that they didn&apos;t create.  So all the classes that folks create may need to remain subclasses of HitCollector, but classes used internally do not need to, and we can deprecate all public HitCollector implementations and provide new versions that extend Hitable.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/class-use/HitCollector.html&quot; class=&quot;external-link&quot;&gt;http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/class-use/HitCollector.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Does that address your concern?&lt;/p&gt;

&lt;p&gt;I&apos;m not too fond of Hitable, but can&apos;t think of anything better.  With that name, the method might better be called hit() than collect(), but that&apos;s a more invasive change.  DocCollector?  Collector?&lt;/p&gt;</comment>
                    <comment id="12655821" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 00:26:16 +0000"  >&lt;p&gt;Okay, so subclasses of HitCollector stay subclasses until 3, and then they extend Hitable? Sounds good.&lt;br/&gt;
&lt;b&gt;EDIT&lt;/b&gt;&lt;br/&gt;
No that wont work and I read your comment wrong - we have to provide new impls, and old impls will be wrapped. Got it. Patch coming.&lt;/p&gt;

&lt;p&gt;I kind of like Hitable myself. You are collecting a &apos;hit&apos; with a Hittable object. A hit is a doc and score. Any other opinions? I&apos;m less fond of other Collector variations. hit() could be better than collect(), but collect() is not such a stretch in my mind.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;One further thought, if we are replacing TopDocCollector, what would it become? TopDocDocCollector, TopDocHitable? I&apos;m liking these names less...&lt;/p&gt;</comment>
                    <comment id="12655829" author="mikemccand" created="Fri, 12 Dec 2008 00:45:11 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; I&apos;m not a fan of control with exceptions. I am also not a fan of of isSupported methods though...I was leaning that way over exceptions...sounds like you lean the other way...? I guess it has its appeal in this case...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, though I leaned towards using an exception because 1) no new&lt;br/&gt;
API needing future deprecation would then have been added, and 2) the&lt;br/&gt;
expectation (but not forced, and this is a problem) is that over time&lt;br/&gt;
all HitCollector subclasses would implement setBase, so the exception&lt;br/&gt;
would be the exception (heh) not the rule.&lt;/p&gt;

&lt;p&gt;But I like Doug&apos;s proposal instead, since on upgrading to 2.9 you&apos;ll&lt;br/&gt;
see your code is deprecated, which then allows us to drop it in 3.0.&lt;br/&gt;
I have a slight preference for DocCollector.&lt;/p&gt;

&lt;p&gt;This means any methods that accept a HitCollector would also be&lt;br/&gt;
deprecated, and we&apos;d add a new method that takes DocCollector instead,&lt;br/&gt;
and change the deprecated one to wrap a DocBaseCollector around the&lt;br/&gt;
HitCollector and invoke the new method.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; we can deprecate all public HitCollector implementations and provide new versions that extend Hitable&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Could we leave (eg) TopDocCollector extending HitCollector in 2.9, and&lt;br/&gt;
then in 3.0 change it to directly extend DocCollector (Hitable)?&lt;br/&gt;
(This saves having to deprecate TopDocCollector and at least 2&lt;br/&gt;
others).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Don&apos;t we have a lot of latitude with 3.0?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think in 3.0, when changing APIs, we are only allowed to remove&lt;br/&gt;
deprecated APIs from 2.9?  Ie we can&apos;t do more drastic changes.&lt;/p&gt;</comment>
                    <comment id="12655832" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 00:49:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;Could we leave (eg) TopDocCollector extending HitCollector in 2.9, and then in 3.0 change it to directly extend DocCollector (Hitable)? (This saves having to deprecate TopDocCollector and at least 2 others).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If we do that, I don&apos;t think we can do our check to use base or not by checking for HitCollector right?&lt;/p&gt;
</comment>
                    <comment id="12655836" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 01:00:45 +0000"  >&lt;p&gt;Is that right? We better get going on java5 conversion then...&lt;/p&gt;</comment>
                    <comment id="12655839" author="mikemccand" created="Fri, 12 Dec 2008 01:04:03 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; If we do that, I don&apos;t think we can do our check to use base or not by checking for HitCollector right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ahh right, so if a user outside creates a TopDocCollector &amp;amp; passes it in, we can&apos;t tell that it can handle setBase natively.  Or we could test &amp;amp; catch the UOE (since HitCollector is deprecated, using an exception here will go away in 3.0).&lt;/p&gt;</comment>
                    <comment id="12655847" author="mikemccand" created="Fri, 12 Dec 2008 01:42:15 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Is that right? We better get going on java5 conversion then... &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ahh right, that too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  But, as of 3.0 we can start accepting/making changes to Lucene that require 1.5 JRE, but still we can&apos;t just swap out APIs w/o going through deprecation first?&lt;/p&gt;</comment>
                    <comment id="12655850" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 01:48:45 +0000"  >&lt;p&gt;I thought there were some that wanted to change some of the API to java &lt;br/&gt;
5 for the 3.0 release, cause I thought back compat was less restricted &lt;br/&gt;
2-3. I guess mabye that won&apos;t end up happening, if it was going to, it &lt;br/&gt;
seems we&apos;d want to deprecate what will be changed in 2.9.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;


</comment>
                    <comment id="12655866" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 02:56:16 +0000"  >&lt;p&gt;I think its almost there. I still want to spend a little time looking it over, but I think its looking good.&lt;/p&gt;</comment>
                    <comment id="12655892" author="hossman" created="Fri, 12 Dec 2008 05:20:53 +0000"  >&lt;p&gt;I haven&apos;t been following this issue too closely (or truthfully: at all) but if there&apos;s talk of  deprecating HItCollector and introducing a new superclass to replace it, would it also make sense to revist the idea of adding a return type to the collect/hit method? ... ie: an enum style result indicating &quot;OK&quot; or &quot;ABORT&quot; (with the potential of adding additional constants later ala FieldSelectorResult)&lt;/p&gt;

&lt;p&gt;I remember this coming up as a &quot;wish list&quot; back when TimeLimitedCollector was added (but i don&apos;t really remember if it was decided that the current implementation was actually better then if collect() did have a return value)&lt;/p&gt;

&lt;p&gt;Anyway, just something to ponder...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class Hitable {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; void setBase(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; base);
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; HitStatus hit(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; doc, &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; score);
}
/** @deprecated */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class HitCollector &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; Hitable {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; void collect(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; doc, &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; score);
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setBase(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; base) { &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UOE(); }
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; HitStatus hit(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; doc, &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; score) { 
    collect(doc, score); 
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; HitStatus.OK;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12655955" author="mikemccand" created="Fri, 12 Dec 2008 10:22:07 +0000"  >&lt;p&gt;Mark, I got on hunk (HitCollector) failed on applying the patch &amp;#8211; looks like it&apos;s the $Id$ issue again (your area doesn&apos;t expand $Id$ tags).  No problem &amp;#8211; I just applied it manually.&lt;/p&gt;</comment>
                    <comment id="12655957" author="mikemccand" created="Fri, 12 Dec 2008 10:28:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;adding a return type to the collect/hit method? ... ie: an enum style result indicating &quot;OK&quot; or &quot;ABORT&quot; (with the potential of adding additional constants later ala FieldSelectorResult)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we should consider this, though this then implies an if stmt checking the return result &amp;amp; doing something, on each hit, so we should test the cost of doing so vs the cost of throwing an exception instead (eg we could define a typed exception in this new interface which means &quot;abort the search now&quot; and maybe another to mean &quot;stop searching &amp;amp; return the results you got so far&quot;, etc.).&lt;/p&gt;</comment>
                    <comment id="12655963" author="thetaphi" created="Fri, 12 Dec 2008 10:39:35 +0000"  >&lt;blockquote&gt;&lt;blockquote&gt;&lt;p&gt;adding a return type to the collect/hit method? ... ie: an enum style result indicating &quot;OK&quot; or &quot;ABORT&quot; (with the potential of adding additional constants later ala FieldSelectorResult)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we should consider this, though this then implies an if stmt checking the return result &amp;amp; doing something, on each hit, so we should test the cost of doing so vs the cost of throwing an exception instead (eg we could define a typed exception in this new interface which means &quot;abort the search now&quot; and maybe another to mean &quot;stop searching &amp;amp; return the results you got so far&quot;, etc.).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This looks like a really good idea. Currently to stop a iterator, I use an exception class that extends RuntimeException (to have it unchecked) to cancel a search. Very nice if you support it directly.&lt;/p&gt;</comment>
                    <comment id="12655976" author="mikemccand" created="Fri, 12 Dec 2008 11:37:52 +0000"  >&lt;p&gt;Duh: I just realized that when we switched back to a single pqueue for&lt;br/&gt;
gathering results across the N subreaders, we lost the original&lt;br/&gt;
intended &quot;benefit&quot; for this issue.  Hard to keep the forrest in mind&lt;br/&gt;
when looking at all the trees....&lt;/p&gt;

&lt;p&gt;Ie, we are now (again) creating a single FieldSortedHitQueue, which&lt;br/&gt;
pulls the FieldCache for the entire MultiReader, not per-segment.  So&lt;br/&gt;
warming time is still slow, when sorting by fields.&lt;/p&gt;

&lt;p&gt;Really we&apos;ve &quot;stumbled&quot; on 2 rather different optimizations:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Run Scorer at the &quot;sub reader&quot; level: this gains performance&lt;br/&gt;
    because you save the cost of going through a MultiReader.  This&lt;br/&gt;
    requires the new DocCollector class, so we can setDocBase(...).&lt;/li&gt;
	&lt;li&gt;Do collection (sort comparison w/ pqueue) at the &quot;sub reader&quot;&lt;br/&gt;
    level: this gains warming performance because we only ask for&lt;br/&gt;
    FieldCache for each subreader.  But, it seems to hurt search&lt;br/&gt;
    performance (pqueue comparison &amp;amp; insertion cost went up), so it&apos;s&lt;br/&gt;
    no longer a no-brainer tradeoff (by default at least).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Given that #1 has emerged as a tentatively fairly compelling gain, I&lt;br/&gt;
now think we should decouple it from #2.  Even though #2 was the&lt;br/&gt;
original intent here, let&apos;s now morph this issue into addressing #1&lt;br/&gt;
(since that&apos;s what current patch does), and I&apos;ll open a new issue for&lt;br/&gt;
#2?&lt;/p&gt;</comment>
                    <comment id="12655984" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 11:55:46 +0000"  >&lt;p&gt;Ugg...you know I was afraid of that when I was making the change, but I easily convinced myself that FieldSortedHitQueue was just taking that Reader for AUTO detect and didnt really relook. It also makes the comparators. Bummer. I guess lets open a new issue if we can&apos;t easily deal with it here (I&apos;ve got to look at it some more).&lt;/p&gt;</comment>
                    <comment id="12655996" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 12:28:23 +0000"  >&lt;p&gt;I&apos;ve got a quick idea I want to try to fix it.&lt;/p&gt;</comment>
                    <comment id="12656007" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 12:57:53 +0000"  >&lt;p&gt;Bah. You can&apos;t share that queue and get the reopen benefit without jumping too many hoops. All of a sudden you can&apos;t use ordinals, comparators need to know how to compare across comparators, and it just breaks down fast. How disappointing.&lt;/p&gt;</comment>
                    <comment id="12656014" author="mikemccand" created="Fri, 12 Dec 2008 13:42:51 +0000"  >
&lt;p&gt;Yeah, ugg.  This is the nature of &quot;progress&quot;!  It&apos;s not exactly a&lt;br/&gt;
straight line from point A to B &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Lots of fits &amp;amp; starts, dead ends,&lt;br/&gt;
jumps, etc.&lt;/p&gt;

&lt;p&gt;We could simply offer both (&quot;collect into single pqueue but pay high&lt;br/&gt;
warming cost&quot; or &quot;collect into separate pqueues, then merge, and pay&lt;br/&gt;
low warming cost&quot;), but that sure is an annoying choice to have to&lt;br/&gt;
make.&lt;/p&gt;

&lt;p&gt;Oh, here&apos;s another idea: do separate pqueues (again!), but after the&lt;br/&gt;
first segment is done, grab the values for the worst scoring doc in&lt;br/&gt;
the pqueue (assuming the queue filled up to its numHits) and use this&lt;br/&gt;
as the &quot;cutoff&quot; before inserting into the next segment&apos;s pqueue.&lt;/p&gt;

&lt;p&gt;In grabbing that cutoff we&apos;d have to 1) map ord-&amp;gt;value for segment 1,&lt;br/&gt;
then 2) map value-&amp;gt;ord for segment 2, then 3) use that cutoff for&lt;br/&gt;
segment 2.  (And likewise for all segment N -&amp;gt; N+1).&lt;/p&gt;

&lt;p&gt;I think this&apos;d greatly reduce the number of inserts &amp;amp; comparisons done&lt;br/&gt;
in subsequent queues because it mimics how a single pqueue behaves:&lt;br/&gt;
you don&apos;t bother re-considering hits that won&apos;t be globally&lt;br/&gt;
competitive.&lt;/p&gt;

&lt;p&gt;We could also maybe merge after each segment is processed; that way&lt;br/&gt;
the cutoff we carry to the next segment is &quot;true&quot; so we&apos;d reduce&lt;br/&gt;
comparisons even further.&lt;/p&gt;

&lt;p&gt;Would this work?  Let&apos;s try to think hard before writing code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12656016" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 13:58:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;We could simply offer both (&quot;collect into single pqueue but pay high warming cost&quot; or &quot;collect into separate pqueues, then merge, and pay low warming cost&quot;), but that sure is an annoying choice to have to make.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Agreed. I really hope we don&apos;t have to settle for this.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Oh, here&apos;s another idea:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good one! Keep those ideas coming.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Would this work?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It sounds like you&apos;ve nailed it to me, but I&apos;ll let it float around in my head for a bit while I work on some other things.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Let&apos;s try to think hard before writing code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Now theres a new concept for me. My brain will work itself to death trying to avoid real work &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12656073" author="cutting" created="Fri, 12 Dec 2008 17:25:08 +0000"  >&lt;p&gt;&amp;gt;   public abstract void setBase(int base);&lt;/p&gt;

&lt;p&gt;It occurred to me last night that this really has no place in HitCollector.  We&apos;re forcing applications to handle an implementation detail that they really shouldn&apos;t have to know about.  It would be better to pass the base down to the scorer implementations and have them add it on before they call collect(), no?&lt;/p&gt;</comment>
                    <comment id="12656079" author="mikemccand" created="Fri, 12 Dec 2008 17:42:34 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; It would be better to pass the base down to the scorer implementations and have them add it on before they call collect(), no?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So we&apos;d add Scorer.setDocBase instead?&lt;/p&gt;

&lt;p&gt;The only downside I can think of here is that often you will perform the addition when it wasn&apos;t necessary.&lt;/p&gt;

&lt;p&gt;Ie, if the score is not competitive at all, then you wouldn&apos;t need to create the full docID and so you&apos;d save one add opcode.&lt;/p&gt;

&lt;p&gt;Admittedly, this is a very small (tiny) cost, and I do agree that making HitCollector know about docBase is really an abstraction violation...&lt;/p&gt;</comment>
                    <comment id="12656089" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 18:14:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;Oh, here&apos;s another idea: do separate pqueues (again!), but after the first segment is done, grab the values for the worst scoring doc in the pqueue (assuming the queue filled up to its numHits) and use this as the &quot;cutoff&quot; before inserting into the next segment&apos;s pqueue.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We&apos;ve got to try it. Whats the hard part in this? Converting a value to an ord?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Okay, I see, we can just find our place by running through new value Comparables.&lt;/p&gt;

&lt;p&gt;An added cost for going back to per reader is that all doc id values (not ords) also need to be adjusted (for the multisearcher).&lt;/p&gt;</comment>
                    <comment id="12656132" author="mikemccand" created="Fri, 12 Dec 2008 19:47:36 +0000"  >&lt;p&gt;OK, here&apos;s another tweak on the last proposal: maybe we could,&lt;br/&gt;
instead, take the pqueue produced by segment 1 and &quot;convert&quot; it into&lt;br/&gt;
the ords matching segment 2, and then do normal searching for segment&lt;br/&gt;
2 using that single pqueue (and the same for all seg N -&amp;gt; N+1&lt;br/&gt;
transitions)?&lt;/p&gt;

&lt;p&gt;For all numeric fields, the conversion is a no-op (their ord is&lt;br/&gt;
currently the actual numeric byte, short, int, etc. value, though&lt;br/&gt;
conceivably that could change in the future); only String fields, and&lt;br/&gt;
custom (hmm) would need to do something.&lt;/p&gt;

&lt;p&gt;This should be more efficient than the cutoff approach because it&apos;d&lt;br/&gt;
result in less comparisons/inserts.  Ie, it&apos;s exactly a single pqueue&lt;br/&gt;
again, just with some &quot;conversion&quot; between segments.  The conversion&lt;br/&gt;
cost is near zero for numeric fields, and for string fields it&apos;d be&lt;br/&gt;
O(numHits*log2(numValue)), where numValue is number of unique string&lt;br/&gt;
values in next segment for that sort field.  I think for most cases&lt;br/&gt;
(many more docs than numHits requested) this would be faster than the&lt;br/&gt;
cutoff approach.&lt;/p&gt;

&lt;p&gt;Would that work?&lt;/p&gt;</comment>
                    <comment id="12656136" author="yseeley@gmail.com" created="Fri, 12 Dec 2008 19:54:29 +0000"  >&lt;p&gt;segment 1 has terms:  apple, banana, orange&lt;br/&gt;
segment 2 has terms: apple, orange&lt;/p&gt;

&lt;p&gt;What is the ord of banana in segment2?&lt;/p&gt;</comment>
                    <comment id="12656144" author="mikemccand" created="Fri, 12 Dec 2008 20:01:36 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; What is the ord of banana in segment2?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;How about 0.5?&lt;/p&gt;

&lt;p&gt;Ie, we just need an ord that means it&apos;s in-between two ords for the current segment.&lt;/p&gt;

&lt;p&gt;On encountering that, we&apos;d also need to record it&apos;s real value so that subsequent segments could look it up properly (or, if it survives until the end, to return the correct value &quot;banana&quot;).&lt;/p&gt;</comment>
                    <comment id="12656206" author="markrmiller@gmail.com" created="Sat, 13 Dec 2008 00:10:42 +0000"  >&lt;p&gt;Okay, but how am I going to squeeze between two customs? I guess you&apos;d have to store as a compare against either side?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;There is also the problem that all compares are done based on ScoreDocs that index into a single ord array by doc. The previous pq&apos;s ScoreDocs will not compare right - they won&apos;t index into the ord array for the current Reader - they are indexes into the array for the previous Reader. This is what made me give up on single pq earlier.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;I guess we put them on the ScoreDoc like we do the values for multisearcher? Then we could use a PQ like FieldDocPQ that used ords rather than vals?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Hmmm...How do I get at the ordinals though? The value is exposed, but the ordinals are hidden behind a compare method...&lt;/p&gt;</comment>
                    <comment id="12656285" author="markrmiller@gmail.com" created="Sat, 13 Dec 2008 13:28:01 +0000"  >&lt;p&gt;Okay, in a pinch I guess we just grab the ordinals straight from the field cache and violate the comparator abit. But we don&apos;t have the score docs until after running the collector, so we cant perch stuff on them.&lt;/p&gt;

&lt;p&gt;Hmm - we need something like the current hits work with the standard get ord mechanism (which has its own probs cause we compare, we don&apos;t look at ords) and the last hits work with an ord on the scoredoc or something. Its all ugly stuff in my head.&lt;/p&gt;</comment>
                    <comment id="12656287" author="mikemccand" created="Sat, 13 Dec 2008 14:31:36 +0000"  >&lt;p&gt;I&apos;m exploring one possible approach, with a new Comparator API that&apos;s told when to switch to the next subReader (which gives it the chance to translate the ords in the queue).  Not sure it&apos;ll work out yet though...&lt;/p&gt;</comment>
                    <comment id="12656304" author="markrmiller@gmail.com" created="Sat, 13 Dec 2008 16:53:56 +0000"  >&lt;p&gt;Thats were I don&apos;t follow though - its not ords in the queue right? Its ScoreDocs. Thats whats getting me at the moment.&lt;/p&gt;</comment>
                    <comment id="12656339" author="mikemccand" created="Sat, 13 Dec 2008 21:44:06 +0000"  >&lt;p&gt;Attached initial patch (derived from one of the earlier patches).&lt;br/&gt;
Alot of work remains.  TestSort (and likely others) fail.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Thats were I don&apos;t follow though - its not ords in the queue right? Its ScoreDocs. Thats whats getting me at the moment. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Exactly &amp;#8211; so I built first cut at the alternative &quot;copy value&quot;&lt;br/&gt;
approach, where the comparator (new FieldComparator abstract class) is&lt;br/&gt;
responsible for holding the values it needs for docs inserted into the&lt;br/&gt;
queue.  I also added TopFieldValueDocCollector (extends DocCollector),&lt;br/&gt;
and ByValueFieldSortedHitQueue (extends PriorityQueue) that interacts&lt;br/&gt;
with the FieldComparators.  (We can change these names...).  I updated&lt;br/&gt;
IndexSearcher to use this new queue for field sorting.&lt;/p&gt;

&lt;p&gt;This patch only handles SortField.&lt;/p&gt;
{DOC,SCORE,INT}
&lt;p&gt; now, but I think the&lt;br/&gt;
approach has early surprising promise: I&apos;m seeing a sizable&lt;br/&gt;
performance gain for the &quot;sort by int field&quot; case (13.76 sec vs 17.95&lt;br/&gt;
sec for 300 queries getting top 100 hits from 1M results) --&amp;gt; 23%&lt;br/&gt;
faster.  I verified for the test sort alg (above) it&apos;s producing the&lt;br/&gt;
right results (at least top 40 docs match).&lt;/p&gt;

&lt;p&gt;I didn&apos;t expect such performance gain (I was hoping for not much&lt;br/&gt;
performance loss, actually).  I think it may be that although the&lt;br/&gt;
initial value copy adds some cost, the within-queue comparsions are&lt;br/&gt;
then faster because you don&apos;t have to deref back to the fieldcache&lt;br/&gt;
array.  It seems we keep accidentally discovering performance gains&lt;br/&gt;
here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;If we go forward with this approach I think it&apos;d mean deprecating&lt;br/&gt;
FieldSortedHitQueue &amp;amp; ScoreDocComparator, because I think there&apos;s no&lt;br/&gt;
back-compatible way to migrate forward.  I also like that this&lt;br/&gt;
approach means we only need an iterator interface to FieldCache&lt;br/&gt;
values (for &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-831&quot; title=&quot;Complete overhaul of FieldCache API/Implementation&quot;&gt;LUCENE-831&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Mark can you look this over and see if it makes sense and maybe try to&lt;br/&gt;
tackle the other sort types?  String will be the most interesting but&lt;br/&gt;
I think very doable.&lt;/p&gt;</comment>
                    <comment id="12656398" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 15:43:58 +0000"  >&lt;p&gt;Fantastic Mike! I&apos;ve started working through the tests and I&apos;ve corrected a small ordering problem and added most of the other basic types. This is great stuff I think, but I need some more time to digest it all.  Still looks like String will be the interesting piece. I think we have to fill fields for the multisearcher as well, which is annoying, because the multisearcher will have to let the indexsearcher know to do it, or we may do it for no reason. Then we just have to clear up the setbase stuff. Light at the end of the tunnel!&lt;/p&gt;</comment>
                    <comment id="12656417" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 17:37:11 +0000"  >&lt;p&gt;It seems there are a few hoops to jump through with strings beyond what I was thinking. We don&apos;t have the full array of unique terms now, but rather a bunch of smaller arrays of unique terms, with overlap. That makes converting Strings to ords very difficult right? We almost have to create the full array. Also, we still have to do some fancy foot work to get a proper ord. Then we have to juggle and track things so that we can return the String value in getValue (we are more concerned with ords, so its not fun). It seems a lot of spinning/tracking unless we go back to a full StringIndex. Perhaps its just as good to just compare by String value and give up on ord? It really seems that by the time we jump through every hoop to create ords from Strings on a bunch of smaller StringIndexes, we will have at least eaten as much as it costs to do String.compare? Not a conclusion really though, I am still mucking...&lt;/p&gt;

&lt;p&gt;Any insight?&lt;/p&gt;</comment>
                    <comment id="12656430" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 18:17:55 +0000"  >&lt;p&gt;I was off on the fillFields stuff, I forgot we are back to a single hit collector. EDIT - can&apos;t even follow my own thoughts - I wasn&apos;t off, you are just already handling the adjustment that needs to be made. I&apos;d like to avoid filling fields unless we are in a multisearcher still though...&lt;/p&gt;

&lt;p&gt;I&apos;ve got everything working except custom and locale stuff, in a suboptimal way anyway. String values rather than ords, and there is plenty that can probably be improved.&lt;/p&gt;

&lt;p&gt;4 tests still fail (3 with custom, 1 with locale). Still trying to lock down the best way to deal with String ords/values.&lt;/p&gt;</comment>
                    <comment id="12656431" author="mikemccand" created="Sun, 14 Dec 2008 18:28:18 +0000"  >
&lt;blockquote&gt;
&lt;p&gt;&amp;gt; I&apos;ve started working through the tests and I&apos;ve corrected a small ordering problem and added most of the other basic types.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Great!&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Then we just have to clear up the setbase stuff.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah I think we should remove that (and use setNextReader instead).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; That makes converting Strings to ords very difficult right? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right (this was the challenging example Yonik brought up above).&lt;/p&gt;

&lt;p&gt;How about something like this: at any given time, the slots are filled&lt;br/&gt;
with an instance that has 1) the ord (that &quot;matches&quot; the current&lt;br/&gt;
reader) and 2) the actual value.  When transitioning readers you have&lt;br/&gt;
to remap all ords to the new reader (but keep the value unchagned):&lt;br/&gt;
for each slot, you take its String value look it up in the new reader&lt;br/&gt;
w/ binary search.  If it&apos;s present, assign it the corresponding ord.&lt;br/&gt;
If it&apos;s not present, it must fall between ord X and X+1 so assign it&lt;br/&gt;
an ord of X+0.5.&lt;/p&gt;

&lt;p&gt;Then proceed like normal, since all ords are now &quot;matched&quot; to your&lt;br/&gt;
current reader.  You compare with ords, never with values.&lt;/p&gt;

&lt;p&gt;The one caveat is... we have to take care with precision.  A float&lt;br/&gt;
X+0.5 won&apos;t be precise enough.  We could use double, or, we could use&lt;br/&gt;
long and &quot;remap&quot; all valid ords to be 2X (even) their value, and all&lt;br/&gt;
&quot;in between&quot; ords (carried over from previous reader) to be odd&lt;br/&gt;
values.  I think we&apos;d need long for this since in the worst case, if&lt;br/&gt;
you have max number of docs and each doc has unique string you would&lt;br/&gt;
have 2^31 unique ords to represent.&lt;/p&gt;
</comment>
                    <comment id="12656436" author="thetaphi" created="Sun, 14 Dec 2008 18:40:26 +0000"  >&lt;p&gt;You do not need to map to long, if you would use negative integers as marker for in between. So doc 0 has -1, doc 1 has -2, doc 2 has -3,..., doc (2^31-1 == Integer.MAX_VALUE) would have (-2^32 == Integer.MIN_VALUE)&lt;/p&gt;

&lt;p&gt;Just an idea.&lt;/p&gt;</comment>
                    <comment id="12656439" author="thetaphi" created="Sun, 14 Dec 2008 18:41:58 +0000"  >&lt;p&gt;Sorry that does not work because of comparing, but you could substract 2^31 form doc number and multiply by two.&lt;/p&gt;</comment>
                    <comment id="12656440" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 18:47:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;How about something like this:&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Okay, I actually got a ways down that path before I gave up...it was clearer in my head before I got the new code - that had me trying to map one ord at a time (my fault, not the code of course) - but right, I&apos;d have to map them all on reader change. Clears up the haze a bit.&lt;/p&gt;

&lt;p&gt;Locale is in, custom coming. That will make all tests pass. Then I&apos;ll get back on this String stuff (switch to ord from the value stuff I have going now). Then cleanup. Very awesome stuff , thanks Mike.&lt;/p&gt;</comment>
                    <comment id="12656453" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 20:36:00 +0000"  >&lt;p&gt;What do we do about the old SortComparatorSource et al? I can&apos;t figure out a way to make old custom implementations work with this - they implement logic that compares ScoreDocs and I cant see how I can make a new comparator that works based on custom SortComparators.&lt;/p&gt;</comment>
                    <comment id="12656454" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 20:42:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;You compare with ords, never with values.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But I still have to implement getValue for fillFields. That means either storing the value along with ords (at each slot), or storing the orig ord plus the orig StringIndex is came out of for each slot...right?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Okay, that answer is in your earlier comment anyway - we have to track value by slot as well. I&apos;m almost there...&lt;/p&gt;</comment>
                    <comment id="12656458" author="mikemccand" created="Sun, 14 Dec 2008 20:56:53 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; You do not need to map to long, if you would use negative integers as marker for in between&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Actually a variation on this would work: we could logically do the even/odd ord mapping, but shift it down into negative numbers to make use of the full int range.  That&apos;d give us enough precision.&lt;/p&gt;</comment>
                    <comment id="12656459" author="mikemccand" created="Sun, 14 Dec 2008 21:00:47 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; What do we do about the old SortComparatorSource et al?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think we have to deprecate SortComparatorSource and ScoreDocComparator (in favor of FieldComparator and we should add a FieldComparatorSource, too I guess).  Ie, custom sort implementations would need to migrate to the new API?&lt;/p&gt;</comment>
                    <comment id="12656460" author="mikemccand" created="Sun, 14 Dec 2008 21:02:16 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Sorry that does not work because of comparing, but you could substract 2^31 form doc number and multiply by two. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ahh I missed that (I said the same thing 4 comments later... moving fast here!).&lt;/p&gt;</comment>
                    <comment id="12656466" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 21:17:23 +0000"  >&lt;p&gt;Does this have to wait for 3 then? How can we back compatibly tell everyone they have to write new custom comparator implementations?&lt;/p&gt;</comment>
                    <comment id="12656472" author="mikemccand" created="Sun, 14 Dec 2008 21:45:07 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Does this have to wait for 3 then? How can we back compatibly tell everyone they have to write new custom comparator implementations?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If we deprecate old and introduce new in 2.9, then we can remove old in 3.0, right?&lt;/p&gt;</comment>
                    <comment id="12656473" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 21:49:44 +0000"  >&lt;p&gt;But if you are using the old one it wont work with the new Searcher methods? I guess I&apos;ll have to think about it some more.&lt;/p&gt;

&lt;p&gt;I&apos;ve got the String stuff working (I think) except for one issue...if a bunch of ords already in the queue map to the same index, they need to be adjusted to be in order (eg when you convert a value, its not in the terms list for the next binary search). I tried some naive tricks to adjust the number based on the old ord, but no real progress yet...&lt;/p&gt;</comment>
                    <comment id="12656486" author="mikemccand" created="Sun, 14 Dec 2008 22:35:54 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; But if you are using the old one it wont work with the new Searcher methods? I guess I&apos;ll have to think about it some more. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the search methods, on seeing that there is a SortField.CUSTOM type and then seeing that it&apos;s a SortComparatorSource in there, would fallback to the current impl, but all other Sorts would use the new one?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; if a bunch of ords already in the queue map to the same index, they need to be adjusted to be in order &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmmm!  Perhaps on comparing two &quot;odd&quot; values that are the same we could fallback to a true String.compareTo (I don&apos;t like that added if, though, it should be rare).  Or, better, we could add a &quot;subord&quot; to break the tie.  That subord&apos;d have to be computed by gathering all String values that sorted to the same &quot;odd ord&quot; and sorting them to assign subords.&lt;/p&gt;</comment>
                    <comment id="12656487" author="yseeley@gmail.com" created="Sun, 14 Dec 2008 22:35:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;If it&apos;s not present, it must fall between ord X and X+1 so assign it an ord of X+0.5.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I went down this thought path in the past... float doesn&apos;t have the precision, double might, could use long and left shift to make space for &quot;inbetween&quot;, etc.&lt;/p&gt;

&lt;p&gt;One problem is that putting an ord &quot;inbetween&quot; isn&apos;t good enough since you may be mapping many values.  At that point, one starts wondering if it&apos;s worth getting an ord, and what is solved or optimized by using ords.&lt;/p&gt;

&lt;p&gt;Why are ords useful:&lt;br/&gt;
 (a) fast comparison when reordering the priority queue (insertion/removal of items)&lt;br/&gt;
 (b) fast comparison to determine if something should be inserted into the priority queue&lt;br/&gt;
 (c) other (non sorting) usage, using term numbers instead of term values.&lt;/p&gt;

&lt;p&gt;Using ords for (a) seems expensive, as all ords in the queue must be translated.&lt;br/&gt;
Using ords for (b) means calculating an ord only for the smallest element of the priority queue.&lt;/p&gt;

&lt;p&gt;When doing a large search with a diverse set of keys to sort by, there are many more checks to see if an item should be inserted into the queue than are actually inserted.  Also, when using an ord for (b), it doesn&apos;t have to be exact - it can be rounded since it&apos;s purpose isn&apos;t an exact comparison, but just an optimization to determine if insertion into the priority queue can be skipped.&lt;/p&gt;</comment>
                    <comment id="12656488" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 22:57:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;One problem is that putting an ord &quot;inbetween&quot; isn&apos;t good enough since you may be mapping many values. &lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;I don&apos;t like that added if, though, it should be rare&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not rare right? Let say there are 20 values in the queue, and now the new reader has 2 values. Lots will map to the same index.&lt;/p&gt;

&lt;p&gt;I&apos;m still digesting the rest of what yonik said. I don&apos;t have this String ord stuff working 100%, but I have it working sort of (seems to sort pieces right, but then the pieces are out of order). I don&apos;t think the precision exists to do what I&apos;m doing anyway, but since it kind of works, I could prob bench the diff of using values rather than ords.&lt;/p&gt;</comment>
                    <comment id="12656489" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 22:59:55 +0000"  >&lt;p&gt;&amp;gt; But if you are using the old one it wont work with the new Searcher methods? I guess I&apos;ll have to think about it some more. &lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;I think the search methods, on seeing that there is a SortField.CUSTOM type and then seeing that it&apos;s a SortComparatorSource in there, would fallback to the current impl, but all other Sorts would use the new one?&lt;/p&gt;

&lt;p&gt;Ahhh...I was afraid of the ugliness. All right.&lt;/p&gt;</comment>
                    <comment id="12656490" author="mikemccand" created="Sun, 14 Dec 2008 23:01:44 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Not rare right? Let say there are 20 values in the queue, and now the new reader has 2 values. Lots will map to the same index.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;True, not rare in that case, but then the added cost will be tiny since the new segment has relatively so few hits.&lt;/p&gt;</comment>
                    <comment id="12656507" author="mikemccand" created="Sun, 14 Dec 2008 23:26:52 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; At that point, one starts wondering if it&apos;s worth getting an ord, and what is solved or optimized by using ords.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree: all this complexity may not be worth it, if simple&lt;br/&gt;
compare-by-value in fact performs well enough.  I think we should&lt;br/&gt;
benchmark both.&lt;/p&gt;

&lt;p&gt;Mark if you get things to a semi-stable state &amp;amp; post a patch we&lt;br/&gt;
can do some benching.  You could actually just have two SortField&lt;br/&gt;
types (STRING and STRING_ORD) then we could easily swap&lt;br/&gt;
back &amp;amp; forth.&lt;/p&gt;</comment>
                    <comment id="12656508" author="markrmiller@gmail.com" created="Sun, 14 Dec 2008 23:31:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;Or, better, we could add a &quot;subord&quot; to break the tie. That subord&apos;d have to be computed by gathering all String values that sorted to the same &quot;odd ord&quot; and sorting them to assign subords.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That seems like a bit or work to manage. What if I just kept a separate double subords that holds the old mapping? If two slots are equal, we can fall down to that? We would have the whole new array, but the other way we have to track what maps to the same index, sort that, and then have a map or another array anyway. What do we save? We could have an int[] rather than a double[]? But a lot more juggling...&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;br/&gt;
Nm...that logic doesnt quite work...&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Or it does...man I have a scatterbrain and a half. I got it to work (at least partially - the tests pass). I&apos;ll now work on getting something up for you to test with. My main worry at this point is that I&apos;m doing things inefficiently enough that its not a fair test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12656512" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 00:24:32 +0000"  >&lt;p&gt;Quick question: what should I use for the value version...Strings or StringIndex? StringIndex takes less mem, but requires two array lookups.&lt;/p&gt;</comment>
                    <comment id="12656517" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 00:52:09 +0000"  >&lt;p&gt;Here you go. I&apos;m sorry I&apos;ve made everything so messy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I&apos;ll clean later.&lt;/p&gt;

&lt;p&gt;There is now SortField.STRING_VAL and STRING_ORD.&lt;/p&gt;

&lt;p&gt;STRING uses StringIndex,&lt;br/&gt;
STRING_VAL uses Strings[]&lt;br/&gt;
STRING_ORD uses ordinals.&lt;/p&gt;

&lt;p&gt;I havn&apos;t benched anything yet myself.&lt;/p&gt;

&lt;p&gt;There is still a lot of cleanup to do beyond this String stuff  (and the old comparators still don&apos;t work)&lt;/p&gt;

&lt;p&gt;I havn&apos;t gotten over everything post scramble yet: hope I&apos;m not doing anything too stupid. Sort tests pass other than custom comparator.&lt;/p&gt;</comment>
                    <comment id="12656519" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 01:07:31 +0000"  >&lt;p&gt;One small error:&lt;/p&gt;

&lt;p&gt;+    public int sortType() &lt;/p&gt;
{
+      return SortField.STRING_VA;
+    }

&lt;p&gt;should be&lt;/p&gt;

&lt;p&gt;+    public int sortType() &lt;/p&gt;
{
+      return SortField.STRING_VAL;
+    }</comment>
                    <comment id="12656607" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 12:19:07 +0000"  >&lt;p&gt;That actually had a system.out as well. Another patch that takes care of the above error and the system.out, and a manual fix of the HitCollector $id.&lt;/p&gt;</comment>
                    <comment id="12656608" author="mikemccand" created="Mon, 15 Dec 2008 12:22:34 +0000"  >&lt;p&gt;Thanks Mark.  FWIW, when I generate a patch (with &quot;svn diff&quot;) that is near the $Id$ tag, I too cannot apply the patch.  So it seems like &quot;svn diff&quot; has some &quot;smarts&quot; whereby it un-expands a keyword, thus screwing up patch.  We really need that &quot;svn patch&quot; command... (which IIRC is coming in an upcoming svn release).&lt;/p&gt;</comment>
                    <comment id="12656610" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 12:28:52 +0000"  >&lt;p&gt;Some more quick comments:&lt;/p&gt;

&lt;p&gt;the StringIndex value version does two much array derefing, so I&apos;d fix that, or just use the String version.&lt;/p&gt;

&lt;p&gt;I&apos;m dong ordinals by keeping a second Double subord array. Everytime ords are mapped to the new IndexReader, if an ord doesnt map directly onto the new terms array, if the subord is not 0, I multiply the old ord mapping into the sub ord and give it the new ord eg the subord becomes the old ord times the current subord and the ord is updated. When comparing, if two ords are the same, we drop to the subord.&lt;/p&gt;

&lt;p&gt;I havn&apos;t though about precision issues (it prob doesn&apos;t work, but I don&apos;t know), but it works for the tests.&lt;/p&gt;</comment>
                    <comment id="12656653" author="mikemccand" created="Mon, 15 Dec 2008 16:40:00 +0000"  >&lt;p&gt;BTW, one important difference w/ the new TopFieldValueDocCollector is it does not track the max score &amp;#8211; we probably need to add that back in, until Hits is removed in 3.0 (is it needed beyond that?).&lt;/p&gt;</comment>
                    <comment id="12656654" author="mikemccand" created="Mon, 15 Dec 2008 16:43:02 +0000"  >&lt;p&gt;There&apos;s something wrong w/ the SortField.STRING_ORD case &amp;#8211; I&apos;m trying &quot;sort by title&quot; w/ a Wikipedia index, and while I see the same results in a clean checkout vs STRING_VAL, I get different (wrong) results for STRING_ORD.&lt;/p&gt;

&lt;p&gt;Clean checkout &amp;amp; STRING_VAL get:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hit 0: docID=1974521 title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Born into Trouble as the Sparks Fly Upward.&quot;&lt;/span&gt;
hit 1: docID=688913 title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Into The Open&quot;&lt;/span&gt; Exhibition
hit 2: docID=1648 title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Love and Theft&quot;&lt;/span&gt;
hit 3: docID=599545 title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Repent, Harlequin!&quot;&lt;/span&gt; Said the Ticktockman
hit 4: docID=349499 title=&lt;span class=&quot;code-quote&quot;&gt;&quot;The Spaghetti Incident?&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but STRING_ORD gets this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hit 0: docID=599545 title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Repent, Harlequin!&quot;&lt;/span&gt; Said the Ticktockman
hit 1: docID=688913 title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Into The Open&quot;&lt;/span&gt; Exhibition
hit 2: docID=1974521 title=&lt;span class=&quot;code-quote&quot;&gt;&quot;Born into Trouble as the Sparks Fly Upward.&quot;&lt;/span&gt;
hit 3: docID=992439 title=&apos;Abd al-Malik II
hit 4: docID=1951563 title=&apos;Auhelawa language
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I haven&apos;t tried to track it down yet...&lt;/p&gt;</comment>
                    <comment id="12656659" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 16:56:36 +0000"  >&lt;blockquote&gt;&lt;p&gt;haven&apos;t tried to track it down yet...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I wouldn&apos;t. Well the method I am using passes the tests, its not likely viable (maybe even on a smaller scale than i would have guessed based on what your seeing). But since its close, I figure a benchmark of it against using values should tell us a lot about whether it makes sense to keep pushing with ord. Ord will no doubt end up a little slower if its to work properly, but comparing them now should give us a gauge of using values instead. Thats what we were looking for right?&lt;/p&gt;

&lt;p&gt;I still have tons I want to look at in this patch (and hopefully some ideas/suggestions). I havn&apos;t looked at it at all in that context yet though. I merely sat down and made the tests pass one by one with little consideration for anything else. &lt;/p&gt;</comment>
                    <comment id="12656670" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 17:35:20 +0000"  >&lt;p&gt;Another thing I&apos;ll do is added another sort test - the tests may not hit all of the edge cases - i dont think they hit compare(ord, doc, score) at all for one (if i am remembering right).&lt;/p&gt;</comment>
                    <comment id="12656709" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 19:24:51 +0000"  >&lt;p&gt;I just made a quick new test for what im doing with ords - it seems once i add more than about 500 docs, one or two are out of order - that problem compounds as the number goes up. Special case I am missing, or precision issues.&lt;/p&gt;</comment>
                    <comment id="12656728" author="mikemccand" created="Mon, 15 Dec 2008 19:55:08 +0000"  >
&lt;p&gt;OK I ran an initial test, though since the ord approach is a &quot;bit&quot;&lt;br/&gt;
buggy we can&apos;t be sure how well to trust these results.&lt;/p&gt;

&lt;p&gt;I indexed first 2M docs from Wikipedia, into 101 segment index, then&lt;br/&gt;
search for &quot;text&quot; (hits 97K results), sort by title, pulling best 100&lt;br/&gt;
hits.  I do the search 1000 times in each round.&lt;/p&gt;

&lt;p&gt;Current trunk (best 107.1 searches/sec):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Operation            round   runCnt   recsPerRun        rec/s  elapsedSec    avgUsedMem    avgTotalMem
XSearchWarm              0        1            1          0.0       93.64   463,373,760  1,029,046,272
XSearchWithSort_1000 -   0 -  -   1 -  -  - 1000 -  -   100.6 -  -   9.94 - 463,373,760  1,029,046,272
XSearchWithSort_1000     1        1         1000        107.1        9.34   572,969,344  1,029,046,272
XSearchWithSort_1000 -   2 -  -   1 -  -  - 1000 -  -   105.5 -  -   9.48 - 572,969,344  1,029,046,272
XSearchWithSort_1000     3        1         1000        106.2        9.41   587,068,928  1,029,046,272
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Patch STRING_ORD (best 102.0 searches/sec):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Operation            round   runCnt   recsPerRun        rec/s  elapsedSec    avgUsedMem    avgTotalMem
XSearchWarm              0        1            1          0.5        2.16   384,153,600  1,029,046,272
XSearchWithSort_1000 -   0 -  -   1 -  -  - 1000 -  -  - 94.1 -  -  10.63 - 439,173,824  1,029,046,272
XSearchWithSort_1000     1        1         1000        100.7        9.93   439,173,824  1,029,046,272
XSearchWithSort_1000 -   2 -  -   1 -  -  - 1000 -  -   101.9 -  -   9.81 - 573,822,208  1,029,046,272
XSearchWithSort_1000     3        1         1000        102.0        9.81   573,822,208  1,029,046,272
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Patch STRING_VAL (best 34.6 searches/sec):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;XSearchWarm              0        1            1          0.4        2.24   368,201,088  1,029,046,272
XSearchWithSort_1000 -   0 -  -   1 -  -  - 1000 -  -  - 34.6 -  -  28.94 - 415,107,648  1,029,046,272
XSearchWithSort_1000     1        1         1000         33.9       29.54   415,107,648  1,029,046,272
XSearchWithSort_1000 -   2 -  -   1 -  -  - 1000 -  -  - 33.9 -  -  29.46 - 545,339,904  1,029,046,272
XSearchWithSort_1000     3        1         1000         34.0       29.40   545,339,904  1,029,046,272
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Notes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Populating the field cache on trunk for MultiReader is&lt;br/&gt;
    fantastically costly (94 sec).  The IO cache was already hot so&lt;br/&gt;
    this isn&apos;t IO latency.  I think MultiTermEnum/Docs behaves badly&lt;br/&gt;
    for this use case (single unique term (title) per doc).  We really&lt;br/&gt;
    need to switch to column-stride fields, not un-invert, for this.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;For this case at least STRING_ORD is still quite a bit faster than&lt;br/&gt;
    STRING_VAL; however, it&apos;s still buggy.  Maybe a smaller queue size&lt;br/&gt;
    (eg 10 or 20) would make them closer.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;STRING_ORD is still a bit slower than trunk&apos;s sort; hopefully once&lt;br/&gt;
    tuned it&apos;ll be closer.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think we now need to fix the STRING_ORD bug &amp;amp; retest.&lt;/p&gt;</comment>
                    <comment id="12656732" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 20:04:01 +0000"  >&lt;p&gt;Thanks Mike. Yup - that says enough for me. We have to get ords working. I don&apos;t think ords will get faster though (you wouldnt surprise me though), I think they will get slower. Certainly they should stay much faster than value though - what a dog. But who knows - we can test fall back to value compare instead of subords as well. My naive ords attempt now is keeping previous mapping ords order by multiplying it as we move to new readers - thats going to explode into some very large numbers pretty fast, and I don&apos;t expect we can get by so easily. Either fall back to value will be good enough, or we will prob have to map to new ords rather than simple multiplying to retain each stages ording.&lt;/p&gt;

&lt;p&gt;I&apos;ll keep playing with the ord on my end though - i only got it to pass those tests moments before that patch went up. I try to keep a frantic pace because I never know if my spare cycles will go away - I have juggled a defensive plate for a while &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; No doubt I&apos;ll squeeze some more hours tonight though. &lt;/p&gt;</comment>
                    <comment id="12656770" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 21:57:10 +0000"  >&lt;p&gt;I&apos;m starting to think fall back to value wont be so bad. I&apos;ll give you another cut that does fall back to value and whatever I have to do to get correct subord stuff right.&lt;/p&gt;</comment>
                    <comment id="12656832" author="mikemccand" created="Tue, 16 Dec 2008 01:18:47 +0000"  >
&lt;p&gt;We should definitely try fallback compare-by-value.&lt;/p&gt;

&lt;p&gt;But, sort by title (presumably unique key) is actually a worst case&lt;br/&gt;
for us, because all values in the queue will not exist in the next&lt;br/&gt;
segment.  So it&apos;s a good test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; We should also test sorting by an&lt;br/&gt;
enum field (&quot;country&quot;, &quot;state&quot;).&lt;/p&gt;

&lt;p&gt;Thinking more about how to compute subords... I think we could store&lt;br/&gt;
ord &amp;amp; subord each as int, and then efficiently translate them to the&lt;br/&gt;
next segment with a single pass through the queue, in sort key order.&lt;br/&gt;
This would ensure we hit all the dups (different Strings that map to&lt;br/&gt;
the same ord in the next segment, but different subords) in one&lt;br/&gt;
cluster.  And, the subord could be easily computed by simply&lt;br/&gt;
incrementing (starting with 1) in key sort order, until the cluster is&lt;br/&gt;
done.&lt;/p&gt;

&lt;p&gt;It should be simple to step through the pqueue&apos;s heap in sort order&lt;br/&gt;
min-&amp;gt;max (w/o removing the entries which is the &quot;normal&quot; heapsort way&lt;br/&gt;
to sort the elements); you&apos;d need to maintain some sort of queue to&lt;br/&gt;
keep track of the &quot;frontier&quot; as you walk down the heap.  But I haven&apos;t&lt;br/&gt;
found a cookbook example yet...  It should be fast since we can use&lt;br/&gt;
the ord/subords in the queue for all within-queue comparisons.&lt;/p&gt;

&lt;p&gt;We could also save time on the binary search by bounding the search by&lt;br/&gt;
where we just found the last key.  It may be worth tracking the max&lt;br/&gt;
value in the queue, to bound the other end of the search.  For a big&lt;br/&gt;
search the queue should have a fairly tight bound.&lt;/p&gt;</comment>
                    <comment id="12656846" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 01:50:15 +0000"  >&lt;blockquote&gt;&lt;p&gt;We should also test sorting by an enum field (&quot;country&quot;, &quot;state&quot;).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m actually trying on random data that I am creating, and I&apos;m getting different results. Oddly, many cases where Values seem to beat Trunk.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We could also save time on the binary search by bounding the search by&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;where we just found the last key. It may be worth tracking the max&lt;br/&gt;
value in the queue, to bound the other end of the search. For a big&lt;br/&gt;
search the queue should have a fairly tight bound.&lt;/p&gt;

&lt;p&gt;Right, I&apos;ve been thinking of ways to cut that down too. Its def binary searching much more then it needs to. That seems to be a big ord slowdown from what I can tell  - fallback to compare by value is actually appearing slower than by value. I&apos;ve made a couple small optimizations, but theirs def more.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Thinking more about how to compute subords...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Cool. Great idea to think about. My main search has been to get subord as an int. Getting both to int would certainly be optimal. Everything I&apos;ve come up with seems too expensive though - I&apos;ll try to run with that idea.&lt;/p&gt;</comment>
                    <comment id="12656847" author="mikemccand" created="Tue, 16 Dec 2008 01:51:44 +0000"  >&lt;p&gt;Ugh &amp;#8211; that approach won&apos;t work, because the pqueue in the collector&lt;br/&gt;
is not necessarily sorted primarily by our field (eg if the String&lt;br/&gt;
sort field is not the first SortField).  So we don&apos;t have a fast way&lt;br/&gt;
to visit the keys in sorted order.&lt;/p&gt;</comment>
                    <comment id="12656866" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 03:32:23 +0000"  >&lt;p&gt;Okay, I just full on did it inefficiently, and maybe I can work backwards a little. Seems to be solid.&lt;/p&gt;

&lt;p&gt;I just collect the old ords by making a map with the mapped to index as the key. The map has List values and when a list gets more than one entry, the entry is added to a morethanone set. After mapping all the ords, i go through the morethanone set and sort each list - each subord is then set based on its index in the sorted list.&lt;/p&gt;

&lt;p&gt;We already knew that was easy enough - I just think its probably on the terribly inefficient side. Now to think about whacking pieces off. It just makes me not very hopeful to start at something so slow. And still the double ords &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Perhaps the negative int could still come into play though. &lt;/p&gt;

&lt;p&gt;Way too many little objects being made...&lt;/p&gt;</comment>
                    <comment id="12656964" author="mikemccand" created="Tue, 16 Dec 2008 11:38:39 +0000"  >
&lt;p&gt;Can you post your inefficient remapping version?&lt;/p&gt;

&lt;p&gt;I too created the fallback version (just set subord to -1 when value&lt;br/&gt;
isn&apos;t found in the new index &amp;amp; respect that in the two compare&lt;br/&gt;
methods).  I confirmed it gives correct top 50 results.  This then&lt;br/&gt;
brings ord perf to 97.6 searches/sec (vs trunk 107.1 searches/sec), so&lt;br/&gt;
that&apos;s our number to beat since it seems to be bug-free.&lt;/p&gt;

&lt;p&gt;Then I ran &quot;MatchAllDocsQuery&quot; (to test a much larger result set &amp;#8211;&lt;br/&gt;
this returns 2M hits but previous query &quot;text&quot; returned ~97K hits),&lt;br/&gt;
sorting by title, queue size=100.  Trunk still has unbelievely slow&lt;br/&gt;
warming (95 sec), and then gets 7.6 searches/sec.  Patch ord search&lt;br/&gt;
(with fallback) gets 30.7 searches/sec.&lt;/p&gt;

&lt;p&gt;This is very interesting and odd &amp;#8211; I can&apos;t explain why ord searching&lt;br/&gt;
w/ fallback is so much faster than current trunk when the number of&lt;br/&gt;
hits is large (2M).  I think this is very important because it&apos;s the&lt;br/&gt;
big slow queries that are most important to improve here, even if it&apos;s&lt;br/&gt;
at some cost to the queries that are already fast.&lt;/p&gt;

&lt;p&gt;Ie, we still need to do more tests, but if this result holds (and we&lt;br/&gt;
need to explain the difference), I think it&apos;s a strong vote for the&lt;br/&gt;
ord+fallback approach.  Not to mention, it also sidesteps the absurdly&lt;br/&gt;
slow warming time of FieldCache.StringIndex on a Multi*Reader.&lt;/p&gt;</comment>
                    <comment id="12656997" author="mikemccand" created="Tue, 16 Dec 2008 14:47:24 +0000"  >&lt;p&gt;When I run MatchAllDocsQuery (2M hits), with a queue size of 10 instead of 100, trunk still gets 7.6 searches/sec and ord w/ fallback gets 33.1 searches/sec.&lt;/p&gt;</comment>
                    <comment id="12657000" author="mikemccand" created="Tue, 16 Dec 2008 14:55:57 +0000"  >&lt;p&gt;I tested the query &quot;1&quot;, which gets 384K hits.  Trunk gets 48.1 searches/sec and ord w/ fallback gets 55.0.&lt;/p&gt;

&lt;p&gt;So somehow as the result set gets larger, with a crossover somewhere between 97K hits (query &quot;text&quot;) and 384K hits (query &quot;1&quot;), the ord w/ fallback becomes faster and then gets much faster as the result set gets quite large (2M hits).&lt;/p&gt;</comment>
                    <comment id="12657010" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 15:10:30 +0000"  >&lt;p&gt;Okay, here is the super inefficient ords version.&lt;/p&gt;

&lt;p&gt;    SortField.STRING_VAL:   sort by val&lt;br/&gt;
    SortField.STRING_ORD: sort by ord and subord&lt;br/&gt;
    SortField.STRING_ORD_VAL: sort by ord fallback to val&lt;/p&gt;

&lt;p&gt;Those multireader fieldcache loading times blow me away...crazy.&lt;/p&gt;</comment>
                    <comment id="12657013" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 15:14:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I too created the fallback version (just set subord to -1 when value&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;isn&apos;t found in the new index &amp;amp; respect that in the two compare&lt;br/&gt;
methods).&lt;/p&gt;

&lt;p&gt;Yours may be better than my then - i got rid of the subord array for fallback, and if they are equal ords, i do a compare on the values.&lt;/p&gt;</comment>
                    <comment id="12657019" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 15:30:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;This is very interesting and odd - I can&apos;t explain why ord searching w/ fallback is so much faster than current trunk when the number of hits is large (2M).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was testing with randomly created data (just random number of digits (2-8), each digit randomly 0-9) and a lot of what I was doing, straight values seemed to handily beat straight ords! It depended on how many docs I was making and how segmented I made it I think. Wasn&apos;t very official, and the test was somewhat short, but I ran it over and over...seemed odd.&lt;/p&gt;</comment>
                    <comment id="12657024" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 15:39:55 +0000"  >&lt;p&gt;I guess I can&apos;t get away with my new index calculation either:  ords&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; = ((-index &amp;lt;&amp;lt; 1) - 3) / 2.0d;&lt;/p&gt;

&lt;p&gt;Index is an int, so its going to overflow.&lt;/p&gt;

&lt;p&gt;EDIT&lt;/p&gt;

&lt;p&gt;Wait...thats based on unique terms per reader not possible number of docs...guess it can stay.&lt;/p&gt;</comment>
                    <comment id="12657135" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 19:46:41 +0000"  >&lt;p&gt;Or can it? Over int.max/2 unique ids and then sort on id would be broke right? Okay, it would be kind of nuts to try and sort on that many unique terms, but in the future?...&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Actually, one seg would need int.max /2, but you know what i mean...&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Okay, I guess my argument with JIRA cleared up - you&apos;d have to have the second segment or later with over int.max/2 terms. Do we care about such an insane possibility?&lt;/p&gt;</comment>
                    <comment id="12657147" author="mikemccand" created="Tue, 16 Dec 2008 20:16:46 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; I was testing with randomly created data (just random number of digits (2-8), each digit randomly 0-9)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Can you post a patch for this?  Seems handy to fix contrib/benchmark to be able to generate such a field...&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; straight values seemed to handily beat straight ords!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll try to test this case too; we need to understand why natural data (Wiki titles) shows one thing but synthetic data shows the opposite.  And we still need to test the enum case.&lt;/p&gt;</comment>
                    <comment id="12657205" author="mikemccand" created="Tue, 16 Dec 2008 22:46:01 +0000"  >
&lt;blockquote&gt;
&lt;p&gt;&amp;gt; I guess I can&apos;t get away with my new index calculation either: ords&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt; = ((-index &amp;lt;&amp;lt; 1) - 3) / 2.0d; &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think you can use an int for the ords?  Now that we have subord,&lt;br/&gt;
when you get negative index back from binary search, you can set ord&lt;br/&gt;
to -index-1 which is the &quot;lower bound&quot;, and then as long as subord is&lt;br/&gt;
at least 1 it should compare correctly.&lt;/p&gt;

&lt;p&gt;Also, in your 2nd pass, if the list is length 1 then you can&lt;br/&gt;
immediately set subord to 1 and move on.&lt;/p&gt;

&lt;p&gt;In your first pass, in the &quot;else&quot; clause (when the value was found in&lt;br/&gt;
the next segment) don&apos;t you need to set subord to 0?&lt;/p&gt;</comment>
                    <comment id="12657227" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 23:51:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think you can use an int for the ords? Now that we have subord, when you get negative index back from binary search, you can set ord to -index-1 which is the &quot;lower bound&quot;, and then as long as subord is at least 1 it should compare correctly.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Ah, indeed - no need for in the middle if you can fall to the subord. I think I may have been thinking it would be nice not to fall through the ords so much, but surly its worth losing double and doing the average. Seems to like -2  not  -1  though, then I start the subords at 1 rather than 0...I&apos;ll bring real thought to it later, but thats generating some good looking results.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Arg - with -2 one tests fails, with -1 it passes, but reverse sort fails &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Prob is 1 one then, and I&apos;ve got a small issue elsewhere.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In your first pass, in the &quot;else&quot; clause (when the value was found in the next segment) don&apos;t you need to set subord to 0?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;hmm...I had that commented out as I was playing...let me think - if you don&apos;t set it and multiple numbers don&apos;t map to clean new ords and they are the same, it will fall to subords...so right, you wouldn&apos;t want an old subord around.&lt;/p&gt;

&lt;p&gt;I&apos;m hoping there is a lot more optimization we can do to the pure ords case, but frankly I have low hopes for it - it should be a bit more competitive though.&lt;/p&gt;

&lt;p&gt;I&apos;m going to take some time to finish up some other pieces and then come back again I think.  I&apos;ve polished up the comparators a bit, so once I get some other work in ill put up another rev.&lt;/p&gt;</comment>
                    <comment id="12657237" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 00:18:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;Admittedly, this is a very small (tiny) cost, and I do agree that making HitCollector know about docBase is really an abstraction violation...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sold either way. Push to scorer?&lt;/p&gt;</comment>
                    <comment id="12657243" author="mikemccand" created="Wed, 17 Dec 2008 00:37:59 +0000"  >&lt;p&gt;But, with this new approach (single pqueue that &quot;knows&quot; when we transition to the next segment) aren&apos;t we back to HitCollector not only knowing the doc base but also the IndexReader we are now advancing to?  (We should remove the setDocBase call).&lt;/p&gt;

&lt;p&gt;Or I guess we could pre-add the doc (in Scorer) so that collect is called with the full docID.&lt;/p&gt;

&lt;p&gt;Still that &quot;tiny&quot; performance cost nags at me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  Most of the time the add would not have been necessary since the number of inserts into the pqueue should be a small percentage for a large number of hits.  And this is the hotspot of searching for Lucene, so maybe we should not add on this cost even if it&apos;s tiny?  And we can always wrap a collector that doesn&apos;t implement setIndexReader and pre-add the docId for it.  It&apos;s like an &quot;expert&quot; DocCollector API vs the normal one.&lt;/p&gt;</comment>
                    <comment id="12657244" author="mikemccand" created="Wed, 17 Dec 2008 00:47:18 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Prob is 1 one then, and I&apos;ve got a small issue elsewhere.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we want ord to be the lower bound.  EG if seg 1 has:&lt;/p&gt;

&lt;p&gt;  apple -&amp;gt; 0&lt;br/&gt;
  banana -&amp;gt; 1&lt;br/&gt;
  orange -&amp;gt; 2&lt;/p&gt;

&lt;p&gt;and then seg 2 has just apple &amp;amp; orange, then banana should map to ord 0 subord 1, meaning it&apos;s between ord 0 &amp;amp; 1, I think?&lt;/p&gt;

&lt;p&gt;And an exact match (apple &amp;amp; orange in this case) should have subord 0.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; I&apos;m hoping there is a lot more optimization we can do to the pure ords case, but frankly I have low hopes for it - it should be a bit more competitive though.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think the perf gains are very compelling, already, for the ord fallback case &amp;amp; title sorting.  Small result sets are slower, but large result sets are substantially faster, than current trunk.  Not to mention much faster warming time (side stepping the weirdness with Multi*Reader, and, only loading FieldCache for new segments).&lt;/p&gt;</comment>
                    <comment id="12657245" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 00:54:24 +0000"  >&lt;p&gt;Okay, I guess thats fair enough. I was going to push down the fall back sorted search (with the old Custom&apos;s) to a single reader too, but thats not actually worth keeping setdocbase for (or needed now that I think about it). So setNextReader brings the same abstraction argument though. But what can you do I guess - the benefits are clearly worth it, and those comparators need access to current subreader.&lt;/p&gt;</comment>
                    <comment id="12657247" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 01:01:29 +0000"  >

&lt;blockquote&gt;&lt;p&gt;I think the perf gains are very compelling, already, for the ord fallback case &amp;amp; title sorting. Small result sets are slower, but large result sets are substantially faster, than current trunk. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh, I agree there - I think this patch still makes perfect sense - its brings lot of gains. I just don&apos;t think that ords without fallback is going to get very good. I&apos;m wondering if we should even try too hard if ord with val fallback does so well.&lt;/p&gt;</comment>
                    <comment id="12657281" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 04:18:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;and then seg 2 has just apple &amp;amp; orange, then banana should map to ord 0 subord 1, meaning it&apos;s between ord 0 &amp;amp; 1, I think?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;apple -&amp;gt; 0&lt;br/&gt;
orange -&amp;gt;1&lt;/p&gt;

&lt;p&gt;the binary search gives back -insertionpoint - 1, the insertion point for banana is 1, so -1 -1 = -2. So I reverse that and subtract 2 to get 0 right? It lands on apple. Then on sort, apple comes first for 0, 1 and then orange is 0, 2.&lt;/p&gt;

&lt;p&gt;(I dont remember off hand why subord has to start at 1 not 0, but i remember it didnt work otherwise)&lt;/p&gt;</comment>
                    <comment id="12657330" author="mikemccand" created="Wed, 17 Dec 2008 10:03:38 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; the binary search gives back -insertionpoint - 1, the insertion point for banana is 1, so -1 -1 = -2. So I reverse that and subtract 2 to get 0 right? It lands on apple.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Hmm &amp;#8211; I didn&apos;t realize binarySearch is returning the insertion point on a miss.  So your logic (negate then subtract 2) makes perfect sense now.&lt;/p&gt;

&lt;p&gt;Just be sure... maybe you should temporarily add asserts when a negative index is returned that values&lt;span class=&quot;error&quot;&gt;&amp;#91;-index-2&amp;#93;&lt;/span&gt;.compareTo(newValue) &amp;lt; 0 and values&lt;span class=&quot;error&quot;&gt;&amp;#91;-index-1&amp;#93;&lt;/span&gt; &amp;gt; 0 (making sure those array accesses are in bounds)?&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; (I dont remember off hand why subord has to start at 1 not 0, but i remember it didnt work otherwise)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is very important &amp;#8211; that 1 is &quot;equivalent&quot; to the original 0.5 proposal, ie, think of subord as the 2nd digit in a 2-digit number.  That 2nd digit being non zero is how we know that even though banana&apos;s ord landed on apple&apos;s, banana is in fact &lt;b&gt;not&lt;/b&gt; equal to apple (because the subord for banana is &amp;gt; 0) and is instead &lt;b&gt;between&lt;/b&gt; apple and orange.&lt;/p&gt;</comment>
                    <comment id="12657331" author="mikemccand" created="Wed, 17 Dec 2008 10:05:10 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; I just don&apos;t think that ords without fallback is going to get very good. I&apos;m wondering if we should even try too hard if ord with val fallback does so well.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Maybe we can try a bit more (I&apos;ll run perf tests on your next iteration here?) and then start wrapping things up?  Progress not perfection!  We can further improve this later.&lt;/p&gt;</comment>
                    <comment id="12657398" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 14:18:11 +0000"  >&lt;p&gt;I&apos;m on board with whatever you think is best. &lt;/p&gt;

&lt;p&gt;I&apos;ll keep playing with ords.&lt;/p&gt;

&lt;p&gt;I spent some time last night putting in most of the rest of the cleaup/finishup that was left outside of the comparators. Theres a handful of non SortTest classes tests that still fail though, so I still have to fix those. I&apos;ll do that, give ords a little play time, and then I think the patch will be fairly close. Then we can take it in and bench on a fairly close to done version.&lt;/p&gt;</comment>
                    <comment id="12657400" author="thetaphi" created="Wed, 17 Dec 2008 14:26:45 +0000"  >&lt;p&gt;I have still one question: Why do we need the new DocCollector? Is this really needed? Would it be not OK to just add the offset before calling collect()?&lt;/p&gt;</comment>
                    <comment id="12657402" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 14:37:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;I have still one question: Why do we need the new DocCollector? Is this really needed? Would it be not OK to just add the offset before calling collect()?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If its not needed, lets get rid of it. We don&apos;t want to deprecate HitCollector if we don&apos;t have to. The main reason I can see that we are doing it at the moment is that the TopFieldValueDocCollector needs that hook so that it can set the next IndexReader for each Comparator. The Comparator needs it to create the fieldcaches and map ords from one reader to the next. Also, it lets us do the docBase stuff, which is nice because you add the docBase less often if done in the collector.&lt;/p&gt;</comment>
                    <comment id="12657403" author="mikemccand" created="Wed, 17 Dec 2008 14:37:34 +0000"  >
&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Why do we need the new DocCollector? Is this really needed? Would it be not OK to just add the offset before calling collect()?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;d like to allow for &apos;expert&apos; cases, where the collector is told when&lt;br/&gt;
we advance to the next sequential reader and can do something at that&lt;br/&gt;
point (like our sort-by-field collector does).&lt;/p&gt;

&lt;p&gt;But then still allow for &apos;normal&apos; cases, where the collector is&lt;br/&gt;
unchanged with what we have today (ie it receives the &quot;real&quot; docID).&lt;/p&gt;

&lt;p&gt;The core collectors would use the expert API to eke out all&lt;br/&gt;
performance; external collectors can use either, but the &apos;normal&apos; one&lt;br/&gt;
would be simplest (and match back compat).&lt;/p&gt;

&lt;p&gt;So then how to &quot;implement&quot; this approach... I would actually be fine&lt;br/&gt;
with keeping HitCollector, adding a default &quot;setNextReader&quot; method,&lt;br/&gt;
that either throws UOE or (if we are strongly against exceptions)&lt;br/&gt;
returns &quot;false&quot; indicating it cannot handle sequential readers.&lt;/p&gt;

&lt;p&gt;Then when we run searches we simply check if the collector is an&lt;br/&gt;
&quot;expert&quot; one (does not throw UOE or return false from setNextReader)&lt;br/&gt;
and if it isn&apos;t we wrap it with DocBaseCollector (which adds the doc&lt;br/&gt;
base for every collect() call).&lt;/p&gt;</comment>
                    <comment id="12657406" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 14:46:20 +0000"  >&lt;p&gt;Hmmm...we had a reason for deprecating HitCollector though. At first it was to do the capability check (instance of HitCollector would be wrapped), but that didn&apos;t pan out. I think we also liked it because people got deprecation warnings though - so that they would know to implement that method for 3.0 when we would take out the wrapper.&lt;/p&gt;</comment>
                    <comment id="12657410" author="mikemccand" created="Wed, 17 Dec 2008 14:50:46 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; so that they would know to implement that method for 3.0 when we would take out the wrapper.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Right but the new insight (for me at least) is it&apos;s OK for external collectors to not code to the expert API.&lt;/p&gt;

&lt;p&gt;Ie previously we wanted to force migration to the expert API, but now I think it&apos;s OK to allow normal API and expert API to exist together.&lt;/p&gt;</comment>
                    <comment id="12657414" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 15:02:19 +0000"  >&lt;p&gt;Okay, I hate the idea of leaving in the wrapper, but it is true thats too difficult of a method for HitCollector (to be required anyway).  setReader is a jump in understanding above setDocBase, which was bad enough.&lt;/p&gt;</comment>
                    <comment id="12657445" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 16:54:36 +0000"  >&lt;p&gt;Hey Mike how about this one? BooleanScorer can collect hits out of order if you force it (against the contract). I think its an issue with basedoc type stuff.&lt;/p&gt;

&lt;p&gt;Actually I&apos;ll clarify that - I think its an issue with the multple reader mojo - didnt mean to put it solely on adding bases in particular yet.&lt;/p&gt;</comment>
                    <comment id="12657455" author="mikemccand" created="Wed, 17 Dec 2008 17:25:15 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; BooleanScorer can collect hits out of order if you force it (against the contract).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Hmmm... right.  You mean if you pass in allowDocsOutOfOrder=true (defaults to false).&lt;/p&gt;

&lt;p&gt;I think this should not be a problem?  (Though, I really don&apos;t fully understand BooleanScorer!).  Since we are running scoring per-segment, each segment might collect its docIDs out of order, but all such docs are still within the current segment.  Then when we advance to the new segment, the collector can do something if it needs to, and then collection proceeds again on the next segment&apos;s docs, possibly out of order.  Ie, the out-of-orderness never jumps across a segment and then back again?&lt;/p&gt;

&lt;p&gt;But this is a challenge for &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-831&quot; title=&quot;Complete overhaul of FieldCache API/Implementation&quot;&gt;LUCENE-831&lt;/a&gt;, if we go with a primarily iterator-driven API.&lt;/p&gt;</comment>
                    <comment id="12657458" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 17:30:58 +0000"  >&lt;p&gt;I didnt think it should be a problem either, since we just push everything to one reader; But it seems to be - the only test not passing involves allowDocsOutOfOrder=true. Do the search with it true, do the same search with it false, gets 3 and 4 docs. 2 or 3 tests involving that fail. I don&apos;t have time to dig in till tonight though - thought you might shortcut me to the answer &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12657466" author="cutting" created="Wed, 17 Dec 2008 18:07:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;I would actually be fine with keeping HitCollector, adding a default &quot;setNextReader&quot; method, that either throws UOE or (if we are strongly against exceptions) returns &quot;false&quot; indicating it cannot handle sequential readers.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Could we instead add a new HitCollector subclass, that adds the setNextReader, then use &apos;instanceof&apos; to decide whether to wrap or not?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I really don&apos;t fully understand BooleanScorer!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The original version of BooleanScorer uses a ~16k array to score windows of docs.  So it scores docs 0-16k first, then docs 16-32k, etc. For each window it iterates through all query terms and accumulates a score in table&lt;span class=&quot;error&quot;&gt;&amp;#91;doc%16k&amp;#93;&lt;/span&gt;.  It also stores in the table a bitmask representing which terms contributed to the score.  Non-zero scores are chained in a linked list.  At the end of scoring each window it then iterates through the linked list and, if the bitmask matches the boolean constraints, collects a hit.  For boolean queries with lots of frequent terms this can be much faster, since it does not need to update a priority queue for each posting, instead performing constant-time operations per posting.  The only downside is that it results in hits being delivered out-of-order within the window, which means it cannot be nested within other scorers.  But it works well as a top-level scorer.  The new BooleanScorer2 implementation instead works by merging priority queues of postings, albeit with some clever tricks.  For example, a pure conjunction (all terms required) does not require a priority queue.  Instead it sorts the posting streams at the start, then repeatedly skips the first to to the last.  If the first ever equals the last, then there&apos;s a hit.  When some terms are required and some terms are optional, the conjunction can be evaluated first, then the optional terms can all skip to the match and be added to the score.  Thus the conjunction can reduce the number of priority queue updates for the optional terms.  Does that help any?&lt;/p&gt;</comment>
                    <comment id="12657468" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 18:23:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Could we instead add a new HitCollector subclass, that adds the setNextReader, then use &apos;instanceof&apos; to decide whether to wrap or not?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Woah! Don&apos;t make me switch all that again! I&apos;ve got wrist injuries here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; The reason I lost the instanceof is that we would have to deprecate the HitCollector implementations because they need to extend HitCollector. Mike seemed against deprecating those if we could get away with it, so I&apos;ve since dropped that. I&apos;ve already gone back and forth - whats it going to be ? Ill admit I don&apos;t like using the exception trap I am now, but I dont much like the return true/false method either...&lt;/p&gt;


&lt;p&gt;&lt;b&gt;Edit&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Ah, I see, you have a new tweak on this time. Extend HitCollector rather then HitCollector extending the new type...&lt;/p&gt;

&lt;p&gt;Nice, I think this is the way to go.&lt;/p&gt;</comment>
                    <comment id="12657476" author="cutting" created="Wed, 17 Dec 2008 18:40:56 +0000"  >&lt;p&gt;&amp;gt; Woah! Don&apos;t make me switch all that again!&lt;/p&gt;

&lt;p&gt;Sorry, I&apos;m just tossing out ideas.  Don&apos;t take me too seriously...&lt;/p&gt;

&lt;p&gt;&amp;gt; The reason I lost the instanceof is that we would have to deprecate the HitCollector implementations because they need to extend HitCollector.&lt;/p&gt;

&lt;p&gt;Would we?  I was suggesting that, if we&apos;re going to have two APIs, one expert and one non-expert, then we could make the expert API a subclass and not deprecate or otherwise alter HitCollector.  I do not like using exceptions for normal control flow.  Instanceof is better, but not ideal.  A default implementation of an expert method that returns &apos;false&apos;, as Mike suggested, isn&apos;t bad and might be best.  It requires neither deprecation, exceptions nor instanceof.  Would we have a subclass that overrides this that&apos;s used as a base class for optimized implementations?&lt;/p&gt;</comment>
                    <comment id="12657481" author="mikemccand" created="Wed, 17 Dec 2008 18:53:44 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Would we have a subclass that overrides this that&apos;s used as a base class for optimized implementations?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If we do this, I don&apos;t think we need a new base class for &quot;expert&quot; collectors; they can simply subclass HitCollector &amp;amp; override the setNextReader method?&lt;/p&gt;

&lt;p&gt;Though one downside of this approach is the &quot;simple&quot; HitCollector API is polluted with this advanced method, and HitCollector&apos;s collect method gets different args depending on what that method returns.  It&apos;s a somewhat confusing API.&lt;/p&gt;

&lt;p&gt;I guess Id&apos; actually prefer subclassing HitCollector (SequentialHitCollector?  AdvancedHitCollector?  SegmentedHitCollector?), adding setNextReader only to that subclass, and using instanceof to wrap HitCollector subclasses.&lt;/p&gt;</comment>
                    <comment id="12657482" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 18:54:09 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; Woah! Don&apos;t make me switch all that again!&lt;/p&gt;

&lt;p&gt;&amp;gt;Sorry, I&apos;m just tossing out ideas. Don&apos;t take me too seriously...&lt;/p&gt;

&lt;p&gt;Same here. If you guys have a 100 ideas, id do it 100 times. No worries. Just wrist frustration &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I misunderstood you anyways.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It requires neither deprecation, exceptions nor instanceof. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Okay, fair points. I guess my main dislike was having to call it, see what it returns, and then maybe call it again. That turned me off as much as instanceof. I&apos;m still liking the suggestion you just made myself...&lt;/p&gt;

&lt;p&gt;Mike?&lt;/p&gt;</comment>
                    <comment id="12657483" author="mikemccand" created="Wed, 17 Dec 2008 18:54:34 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Does that help any?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, thanks!  So much so that I&apos;m going to go add that blurb to the javadocs...&lt;/p&gt;</comment>
                    <comment id="12657489" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 19:06:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;I guess Id&apos; actually prefer subclassing HitCollector (SequentialHitCollector? AdvancedHitCollector? SegmentedHitCollector?), adding setNextReader only to that subclass, and using instanceof to wrap HitCollector subclasses.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thats actually what I prefer as well (and what I tried). I used MultiReaderHitCollector. Still thinking about the name...&lt;/p&gt;</comment>
                    <comment id="12657493" author="mikemccand" created="Wed, 17 Dec 2008 19:17:28 +0000"  >&lt;p&gt;I like MultiReaderHitCollector!&lt;/p&gt;</comment>
                    <comment id="12657579" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 22:05:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hmmm... right. You mean if you pass in allowDocsOutOfOrder=true (defaults to false).&lt;/p&gt;

&lt;p&gt;I think this should not be a problem? (Though, I really don&apos;t fully understand BooleanScorer!). Since we are running scoring per-segment, each segment might collect its docIDs out of order, but all such docs are still within the current segment. Then when we advance to the new segment, the collector can do something if it needs to, and then collection proceeds again on the next segment&apos;s docs, possibly out of order. Ie, the out-of-orderness never jumps across a segment and then back again?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I was off base with my guess - its actually only using one reader for that test (3 or 4 docs). Gotto be the HitCollector that the out of order scorer uses needs to be tweaked. Last tests to fix.&lt;/p&gt;</comment>
                    <comment id="12657586" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 22:37:46 +0000"  >&lt;p&gt;Hmmm...working more with ints as ords rather than double...it gives us ints but it complicates things a bit. Before, the only ords that had to be sorted and suborded were ones that didn&apos;t map on the new Reader exactly. With an int ord, &lt;b&gt;everything&lt;/b&gt; you add is going to collide, and you need the ords in the queue added to the double lists and you need to fall down to the subord much more often...&lt;/p&gt;

&lt;p&gt;interesting...&lt;/p&gt;

&lt;p&gt;I guess I&apos;ll go with it for now though...&lt;/p&gt;</comment>
                    <comment id="12657594" author="mikemccand" created="Wed, 17 Dec 2008 22:51:25 +0000"  >&lt;p&gt;Hang on &amp;#8211; if the value carries over to the new segment (and you set subord to 0) then you don&apos;t need to add those ords to the double lists?&lt;/p&gt;</comment>
                    <comment id="12657600" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 22:58:16 +0000"  >&lt;p&gt;Yeah - sorry. I actually realized that as I just finished it off, but I&apos;m trying not too spam the dev list so much (not winning that war). But it does drop more often &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Ignore those concerns. Ill put up a patch in a minute.&lt;/p&gt;</comment>
                    <comment id="12657608" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 23:17:47 +0000"  >&lt;p&gt;This patch is entering the finishing stages I think. This one is pretty much functionally complete and all tests should pass.&lt;/p&gt;

&lt;p&gt;There is still a bunch of polish to be done though.&lt;/p&gt;

&lt;p&gt;There are still the following sort types: SortField.STRING_VAL, STRING_ORD, STRING_ORD_VAL, and STRING is currently set to straight ord.&lt;/p&gt;

&lt;p&gt;I think the ord case is still pretty slow, I&apos;m sure there are still a few optimizations left, but it would be nice to see where its at.&lt;/p&gt;

&lt;p&gt;There is still an issue with custom FieldComparators - they are currently passed the top level reader in the hook - this still needs to be addressed somehow. We also need a test for one.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;(ignore the couple setDocBases you see in contrib - ive got em)&lt;/p&gt;</comment>
                    <comment id="12657620" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 23:48:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hang on - if the value carries over to the new segment (and you set subord to 0) then you don&apos;t need to add those ords to the double lists? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What was actually happening: I noticed it wasn&apos;t quite working right after switching ords to ints from double, and I realized the problem was that there was always going to be a collision for the sort list, whereas before, there was only a sortable collision when more than one mapped-from ord collided. So I thought that out wrong and figured you needed to sort the current ord as well, but in fact, of course you don&apos;t: I just needed to assume there is always a collision that adds to the sort list, not wait for 2 mapped-from ords to collide.&lt;/p&gt;</comment>
                    <comment id="12657745" author="mikemccand" created="Thu, 18 Dec 2008 12:01:18 +0000"  >&lt;p&gt;Patch is looking good!  All tests, and back-compat tests, pass.  I&apos;m&lt;br/&gt;
going to run a round of perf tests...&lt;/p&gt;

&lt;p&gt;Some minor things I noticed:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Fix indent on FieldComparatorSource.java to 2 spaces&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Leftover &quot;check val&quot; print in FieldComparator.java&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Do we need to track maxScore in TopFieldValueDocCollector (but&lt;br/&gt;
    mark as deprecated)?  (Because Hits isn&apos;t removed yet).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Got some &quot;nocommit&quot; comments to resolve still&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I think StringComparatorLocale should call FieldCache.getStrings&lt;br/&gt;
   (as it does on trunk now when you do String sort w/ Locale), not&lt;br/&gt;
   getStringIndex.  Then the queue should just hold the String[]&lt;br/&gt;
   values, not StringIndex[]?&lt;br/&gt;
.&lt;br/&gt;
   (Aside: we could fix StringIndex computation to take a Locale,&lt;br/&gt;
   which&apos;d give better performance, but that&apos;s a separate issue).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I think you can improve the ord fallback comparator a bit, by&lt;br/&gt;
    keeping separate &quot;equals&quot; array that&apos;s just like subord but is&lt;br/&gt;
    instead a boolean.  Equals is true when the ord is present in the&lt;br/&gt;
    new segment and false if the string could not be found in the new&lt;br/&gt;
    segment.  Then only fallback to String.compareTo when equals is&lt;br/&gt;
    false.  I think this is important for enum fields because the two&lt;br/&gt;
    segments will not have the same String object when they are equal.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12657760" author="markrmiller@gmail.com" created="Thu, 18 Dec 2008 13:12:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;Fix indent on FieldComparatorSource.java to 2 spaces&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Roger.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Leftover &quot;check val&quot; print in FieldComparator.java&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll be sure to get all of this...i also have a ton of System.outs commented out that I&apos;ll remove.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do we need to track maxScore in TopFieldValueDocCollector (but mark as deprecated)? (Because Hits isn&apos;t removed yet).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;You know it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Got some &quot;nocommit&quot; comments to resolve still&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right - time to start looking at these, names, and design changes that might make sense I think.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think StringComparatorLocale should call FieldCache.getStrings (as it does on trunk now when you do String sort w/ Locale), not getStringIndex. Then the queue should just hold the String[] values, not StringIndex[]?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I swear I looked at trunk twice and saw it was using a StringIndex - just looked again ands its not. I love that.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think you can improve the ord fallback comparator a bit...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Lets see if its in even in the ballpark yet...if it is, ill tweak it all we can.&lt;/p&gt;


</comment>
                    <comment id="12657763" author="mikemccand" created="Thu, 18 Dec 2008 13:20:14 +0000"  >&lt;p&gt;One question: do you think we should provide a simple &quot;legacy fallback&quot; option, deprecated, so that in case we messed something up here, people can force the sort to use the current approach?  We already have automatic &quot;legacy&quot; computation (if the old CUSTOM sort is in use) but we could eg add a deprecated &quot;setLegacy&quot; to SortField or some such?  As an insurance policy...&lt;/p&gt;</comment>
                    <comment id="12657767" author="markrmiller@gmail.com" created="Thu, 18 Dec 2008 13:30:16 +0000"  >&lt;p&gt;Yeah, that seems like a great idea. Will help debugging a lot if someone reports an oddity...&lt;/p&gt;</comment>
                    <comment id="12657771" author="markrmiller@gmail.com" created="Thu, 18 Dec 2008 13:42:21 +0000"  >&lt;p&gt;How about names?&lt;/p&gt;

&lt;p&gt; TopFieldValueDocCollector&lt;/p&gt;

&lt;p&gt;I&apos;m not digging this one at the moment. I didn&apos;t dig TopFieldDocCollector either though. TopDocCollector makes sense, but shouldnt these be more like TopFieldSortedDocCollector or something?&lt;/p&gt;

&lt;p&gt;ByValueFieldSortedHitQueue&lt;/p&gt;

&lt;p&gt;How about maybe FieldValueSortedHitQueue?&lt;/p&gt;</comment>
                    <comment id="12657778" author="mikemccand" created="Thu, 18 Dec 2008 14:08:09 +0000"  >&lt;p&gt;How about ByValueFieldSortedHitQueue --&amp;gt; FieldValueHitQueue (the &quot;sorted&quot; seems redundant?)&lt;/p&gt;

&lt;p&gt;How about TopFieldValueDocCollector --&amp;gt; TopFieldCollector (I actually don&apos;t mind the current name TopFieldDocCollector, but, we can&apos;t use that name, so I dropped the Doc part).&lt;/p&gt;
</comment>
                    <comment id="12657781" author="markrmiller@gmail.com" created="Thu, 18 Dec 2008 14:20:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;How about ByValueFieldSortedHitQueue --&amp;gt; FieldValueHitQueue (the &quot;sorted&quot; seems redundant?) &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fair enough, and shorter is better.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How about TopFieldValueDocCollector --&amp;gt; TopFieldCollector (I actually don&apos;t mind the current name TopFieldDocCollector, but, we can&apos;t use that name, so I dropped the Doc part).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Okay...shorter better again, so agreed. I find TopFieldDocCollector confusing myself - I&apos;d rather it be easier to know, this sorts by relevance, this sorts by field value, and those names don&apos;t say that to a non lucene user (or more fairly, they didn&apos;t say that to me). I think, what the heck is a FieldDoc? Moot point though, I agree with both suggestions.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;edit&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Hmm...I guess that its not just fields, but also doc id and relevance if you want, that complicates things for that name...I guess in that way I also prefer TopFieldDocCollector over TopFieldCollector - ah well. &lt;/p&gt;</comment>
                    <comment id="12657792" author="mikemccand" created="Thu, 18 Dec 2008 14:50:32 +0000"  >&lt;p&gt;Can you change DocComparator to just return doc1-doc2?  (instead of having if that translates that into -1/1)?  I think that eeks performance.  (And we should fix javadoc saying &quot;any neg number&quot; and &quot;any pos number&quot; is OK; oh I see a nocommit asking for that already).&lt;/p&gt;</comment>
                    <comment id="12657795" author="markrmiller@gmail.com" created="Thu, 18 Dec 2008 14:58:55 +0000"  >&lt;p&gt;DocComparator? Its not doing the if&apos;s...&lt;/p&gt;

&lt;p&gt;Do you mean relevance? That doesn&apos;t work right when you can have negatives does it? This is what I have for Doc (I don&apos;t think I&apos;ve touched it from what you did):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; class DocComparator &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; FieldComparator {

    &lt;span class=&quot;code-comment&quot;&gt;// nocommit -- maybe &lt;span class=&quot;code-quote&quot;&gt;&quot;setcurrentscoredoc&quot;&lt;/span&gt;?
&lt;/span&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] docIDs;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; docBase;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; readerMaxDoc;

    DocComparator(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numHits) {
      docIDs = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[numHits];
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; slot1, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; slot2) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; docIDs[slot1] - docIDs[slot2];
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; compare(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; slot, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; doc, &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; score) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; docIDs[slot] - docBase - doc;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void copy(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; slot, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; doc, &lt;span class=&quot;code-object&quot;&gt;float&lt;/span&gt; score) {
      docIDs[slot] = docBase + doc;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setNextReader(IndexReader reader) {
      &lt;span class=&quot;code-comment&quot;&gt;// TODO: can we &lt;span class=&quot;code-quote&quot;&gt;&quot;map&quot;&lt;/span&gt; our docIDs to the current
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// reader? saves having to then subtract on every
&lt;/span&gt;      &lt;span class=&quot;code-comment&quot;&gt;// compare call
&lt;/span&gt;      docBase += readerMaxDoc;
      readerMaxDoc = reader.maxDoc();
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; sortType() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; SortField.DOC;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Comparable value(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; slot) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;(docIDs[slot]);
    }
  };
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12657798" author="mikemccand" created="Thu, 18 Dec 2008 15:04:18 +0000"  >&lt;p&gt;Woops, you&apos;re right, sorry, I was looking at an old version...&lt;/p&gt;</comment>
                    <comment id="12657801" author="markrmiller@gmail.com" created="Thu, 18 Dec 2008 15:16:35 +0000"  >&lt;p&gt;I left a doubled set in the ords comparator thats no longer needed. We can just use map.values() instead. I&apos;m sure there are small win tricks we can do too - if its anywhere near competitive.&lt;/p&gt;</comment>
                    <comment id="12657805" author="markrmiller@gmail.com" created="Thu, 18 Dec 2008 15:44:49 +0000"  >&lt;p&gt;A slightly improved setNextReader for the ords case:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setNextReader(IndexReader reader) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
      
      &lt;span class=&quot;code-comment&quot;&gt;// Map ords in queue to ords in reader
&lt;/span&gt;      
      StringIndex currentReaderValues = ExtendedFieldCache.EXT_DEFAULT
          .getStringIndex(reader, field);
      
      lookup = currentReaderValues.lookup;
      order = currentReaderValues.order;

      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lookup.length == 0) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
      }
      
&lt;span class=&quot;code-comment&quot;&gt;//      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; lookup.length; i++) {
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;i:&quot;&lt;/span&gt; + i + &lt;span class=&quot;code-quote&quot;&gt;&quot; &quot;&lt;/span&gt; + lookup[i]);
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;//      }
&lt;/span&gt;
      Map map = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap();
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; slot + 1; i++) {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; val = values[i];
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (val == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
        }

        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; index = binarySearch(lookup, val);

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (index &amp;lt; 0) {
          &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ord = -index - 2;
          &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; intOrd = &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.valueOf(ord);
          List slotVals = (List) map.get(intOrd);
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (slotVals == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            slotVals = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList();
            slotVals.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlotValPair(i, val));
            map.put(intOrd, slotVals);
          } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            slotVals.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlotValPair(i, val));
          }

          ords[i] = ord;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          ords[i] = index;
          subords[i] = 0;
        }
      }

      Iterator dit = map.values().iterator();
      &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (dit.hasNext()) {
        List list = (List) dit.next();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (list.size() &amp;gt; 1) {
          Collections.sort(list);

          &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; list.size(); i++) {
            SlotValPair svp = (SlotValPair) list.get(i);
            subords[svp.i] = i+1;
          }
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          SlotValPair svp = (SlotValPair) list.get(0);
          subords[svp.i] = 1;
        }
      }

    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12657870" author="mikemccand" created="Thu, 18 Dec 2008 19:43:11 +0000"  >
&lt;p&gt;OK I ran a bunch of sort perf tests, on trunk &amp;amp; with the patch.&lt;br/&gt;
(Attached the two Python sources for doing this... though they require&lt;br/&gt;
some small local mods to run properly).&lt;/p&gt;

&lt;p&gt;Each alg is run with &quot;java -Xms1024M -Xmx1024M -Xbatch -server&quot; on OS&lt;br/&gt;
X 10.5.5, java 1.6.0_07-b06-153.&lt;/p&gt;

&lt;p&gt;I use two indexes, each with 2M docs.  One is docs from Wikipedia&lt;br/&gt;
(labeled &quot;wiki&quot;), the other is SortableSimpleDocMaker docs augmented&lt;br/&gt;
to include a random country field (labeled &quot;simple&quot;).  For each I&lt;br/&gt;
created 1-segment, 10-segment and 100-segment indices.  I sort by&lt;br/&gt;
score, doc, string (val, ord = true ord+subord, ordval = ord +&lt;br/&gt;
fallback).  Queue size is 10.&lt;/p&gt;

&lt;p&gt;I ran various queries... query &quot;147&quot; hits ~5k docs, query &quot;text&quot; hits&lt;br/&gt;
~97K docs, query &quot;1&quot; hits 386K docs and alldocs query hits 2M docs.  qps&lt;br/&gt;
is queries per sec and warm is time for first warmup query, from&lt;br/&gt;
trunk.  qpsnew &amp;amp; warmnew are with patch.  pctg shows % gain in&lt;br/&gt;
qps performance:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;meth&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5717.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5627.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -1.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 340.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 348.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  2.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  86.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  89.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  3.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4071.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4649.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 225.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 253.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  56.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  23.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 67.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  21.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  34.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 64.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 24.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  20.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  32.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 57.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  20.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  34.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 67.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4210.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4288.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 160.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 163.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  63.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  64.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  21.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 57.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  21.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  35.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 67.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;meth&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4228.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4510.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  6.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 294.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 341.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  75.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  87.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3332.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4033.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 217.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 277.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 27.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  54.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  70.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;203.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 31.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  34.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;193.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 27.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  32.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;182.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  34.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;196.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3124.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  4.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3353.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 156.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 160.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  62.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  64.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 27.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;190.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  35.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;209.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;meth&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1282.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1162.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -9.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 232.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 275.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  80.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1170.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1132.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -3.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 171.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 230.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 45.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;433.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  36.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;374.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  35.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;360.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  36.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;377.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 583.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-45.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 750.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-29.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 122.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 128.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  35.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;356.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  37.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;374.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;It&apos;s a ridiculous amount of of data to digest... but here are some&lt;br/&gt;
initial thoughts:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;These are only single term queries; I&apos;d expect for multi term&lt;br/&gt;
    queries the gain would be less since net/net less %tg of the time&lt;br/&gt;
    is spent collecting.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Ord + val fallback (ordval) is generally faster than pure&lt;br/&gt;
    ord/subord.  I think for now we should run with ord + val&lt;br/&gt;
    fallback?  (We can leave ord + subord commented out?).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;It&apos;s great that we see decent speedups for &quot;sort by score&quot; which&lt;br/&gt;
    is presumably the most common sort used.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;We do get slower in certain cases (neg pctg in the rightmost&lt;br/&gt;
    column): all not-in-the-noise slowdowns were with query &quot;147&quot; on&lt;br/&gt;
    the 100 segment index.  This query hits relatively few docs (~5K)&lt;br/&gt;
    So, this is expected, because the new approach spends some time&lt;br/&gt;
    updating its queue for each subreader.  If the time spent&lt;br/&gt;
    searching is relatively tiny then this queue update time becomes&lt;br/&gt;
    relatively big.  I think with larger queue size the slowdown will&lt;br/&gt;
    be worse.  However, I think this is an acceptable tradeoff.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The gains for field sorting on a single segment (optimized) index&lt;br/&gt;
    are impressive.  Generally, the more hits encountered the better&lt;br/&gt;
    the gains.  It&apos;s amazing that we see ~67.8% gain sorting by docID,&lt;br/&gt;
    country, and title for alldocs query.  My only guess for this is&lt;br/&gt;
    better cache hit rate (because we gain locality by copying values&lt;br/&gt;
    to local compact arrays).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Across the board the alldocs query shows very sizable (5X faster&lt;br/&gt;
    for 100 segment index; 3X faster for 10 segment index)&lt;br/&gt;
    improvements.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I didn&apos;t break out %tg difference, but warming time with the patch&lt;br/&gt;
    is waaaay faster than trunk when index has &amp;gt; 1 segment.  Reopen&lt;br/&gt;
    time should also be fantastically faster (we are sidestepping&lt;br/&gt;
    something silly happing w/ FieldCache on a Multi*Reader).  Warming&lt;br/&gt;
    on trunk takes ~95 seconds with the 100 segment index!&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12657886" author="markrmiller@gmail.com" created="Thu, 18 Dec 2008 20:28:19 +0000"  >&lt;p&gt;Awesome results Mike, thanks! You are a wizard.&lt;/p&gt;</comment>
                    <comment id="12657924" author="mikemccand" created="Thu, 18 Dec 2008 21:53:17 +0000"  >&lt;p&gt;I set the queue size to 1000 and reran the tests:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1356.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1361.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  0.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 224.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 223.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -0.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  73.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  72.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -1.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1527.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1475.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -3.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 182.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 235.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 33.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  22.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  37.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 71.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  19.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  30.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 60.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  19.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  29.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 49.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 733.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 732.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -0.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 109.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 114.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  5.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  55.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  19.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  30.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 57.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1259.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1274.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  1.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 215.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 220.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  2.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  69.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  72.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  3.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1409.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1394.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -1.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 192.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 232.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  53.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  66.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  37.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;215.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  30.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;174.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  29.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;164.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  26.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 655.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  84.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-87.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  26.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  77.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-22.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  26.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  48.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  26.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  28.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;161.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 704.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 677.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -3.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 169.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 186.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;score&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  56.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 785.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 724.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -7.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 159.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 204.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  44.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  64.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 44.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;doc&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  40.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;417.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  32.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;337.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  28.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;291.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 189.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 446.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  19.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-95.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 188.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  87.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  27.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-68.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 190.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  24.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-40.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;lt;all&amp;gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 189.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   7.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  18.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;148.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Performance clearly gets worse for queries not hitting many docs, and&lt;br/&gt;
with a large queue, against an index with a large number of&lt;br/&gt;
segments, and sorting by a unique String field (like title).&lt;/p&gt;

&lt;p&gt;The slowdown for &quot;147&quot; at 100 segments is quite bad.&lt;/p&gt;

&lt;p&gt;So... I wonder how often users of Lucene set a very large queue size&lt;br/&gt;
(to do some sort of post filtering, which could be more efficiently&lt;br/&gt;
done as a real Filter, but...).  I think it may a non-trivial number,&lt;br/&gt;
so... what to do?&lt;/p&gt;

&lt;p&gt;EG we could offer a different collector that&apos;s better optimized&lt;br/&gt;
towards collecting a large topN (probably doing the toplevel&lt;br/&gt;
FieldCache that&apos;s done today)?  Or, we could explore a hybrid approach&lt;br/&gt;
whereby a slot is only switched to the current segment when it&apos;s first&lt;br/&gt;
visited again (instead of updating all of them on switching readers)?&lt;br/&gt;
Or... something else?&lt;/p&gt;</comment>
                    <comment id="12658083" author="mikemccand" created="Fri, 19 Dec 2008 13:24:20 +0000"  >&lt;p&gt;One more small thing: StringOrdValComparator.compare uses double ord1 and double ord2 when comparing 2 slots, but in fact they should just be ints?&lt;/p&gt;</comment>
                    <comment id="12658085" author="markrmiller@gmail.com" created="Fri, 19 Dec 2008 13:36:11 +0000"  >&lt;p&gt;Yeah, wow. I&apos;ve actually fixed that (though I didn&apos;t notice doing so). I&apos;ve made a half dozen little tweaks trying to eek out some speed and maybe trigger some ideas. Nothing thats made much of a difference yet. We can subtract instead of compare and other tiny in the noise stuff - hoping I trigger a bigger idea though.&lt;/p&gt;</comment>
                    <comment id="12658092" author="mikemccand" created="Fri, 19 Dec 2008 14:42:59 +0000"  >&lt;p&gt;Another fix to do: in StringOrdValComparator.compare (the one that takes slot, doc, score), it does not fallback to String value comparison.&lt;/p&gt;</comment>
                    <comment id="12658096" author="markrmiller@gmail.com" created="Fri, 19 Dec 2008 15:06:24 +0000"  >&lt;p&gt;Thanks. I&apos;ve got a convert on demand version to give a try too.&lt;/p&gt;</comment>
                    <comment id="12658116" author="mikemccand" created="Fri, 19 Dec 2008 16:27:48 +0000"  >&lt;p&gt;OK wanna post a new patch w/ all these fixes?  I&apos;ll re-test, and add on-demand queue.  If perf cost of that one is still too high, we may want to offer a queue that pulls MultiReader&apos;s FieldCache values, but uses the slot-based pqueue (we would have to fix this insanely slow warm time if we do that...).  I bet for very large queue sizes that&apos;d give the best performance, at the obvious expense of reopen cost.&lt;/p&gt;</comment>
                    <comment id="12658389" author="markrmiller@gmail.com" created="Sun, 21 Dec 2008 15:36:23 +0000"  >&lt;p&gt;Escaped back to the computer. Here is the latest. I went down a few dead ends trying to improve things, and I don&apos;t think I found anything significant.&lt;/p&gt;

&lt;p&gt;There are the following String sort types:&lt;/p&gt;

&lt;p&gt;SortField.STRING_VAL : by value&lt;/p&gt;

&lt;p&gt;SortField.STRING_ORD: by ordinal fall back to subord&lt;/p&gt;

&lt;p&gt;SortField.STRING_ORD_VAL: by ordinal fall back to value&lt;/p&gt;

&lt;p&gt;SortField.STRING_ORD_VAL_DEM: by ordinal fall back to value, convert on demand&lt;/p&gt;

&lt;p&gt;and just for kicks:&lt;/p&gt;

&lt;p&gt;SortField.STRING_ORD_VAL_DEM_WIN: by ordinal fall back to value, convert a window of 20 in each direction of n on demand&lt;/p&gt;

&lt;p&gt;SortField.STRING is set to STRING_ORD_VAL&lt;/p&gt;</comment>
                    <comment id="12658390" author="markrmiller@gmail.com" created="Sun, 21 Dec 2008 15:40:42 +0000"  >&lt;p&gt;Again with the two $id issues fixed.&lt;/p&gt;</comment>
                    <comment id="12658419" author="markrmiller@gmail.com" created="Sun, 21 Dec 2008 21:13:35 +0000"  >&lt;p&gt;Was just thinking about the window convert (which I doubt is worth considering anyway) - I wouldnt bench it...I forgot to make it check for conversion as its working on the window. It just checks the window pivot point. Creates lots of extra work.&lt;/p&gt;</comment>
                    <comment id="12658656" author="mikemccand" created="Mon, 22 Dec 2008 20:46:01 +0000"  >&lt;p&gt;New patch attached:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Made IndexWriter.getSegmentCount package protected again&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed StringOrdComparator to use no doubles&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added &quot;API is experimental&quot; warnings to the new APIs&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Deprecated FieldValueHitQueue.getMaxScore &amp;#8211; I think in 3.0 we&lt;br/&gt;
    should remove this (with Hits)?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Tweaked StringOrdValOnDemComparator to avoid Arrays.fill in&lt;br/&gt;
    setNextReader &lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed FieldValueHitQueue to actually pull the right &quot;on demand&quot;&lt;br/&gt;
    comparator (it was incorrectly pulling StringOrdValComparator)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I re-ran perf tests:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 375.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-49.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 811.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 806.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  8.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 207.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  32.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-70.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 121.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 119.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  90.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-16.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  55.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  8.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 27.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 383.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-42.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  86.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-87.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 104.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-84.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  77.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-88.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-66.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  80.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-20.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  90.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-10.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  72.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-28.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-65.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  8.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 238.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-46.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  19.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-95.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  28.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-93.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  54.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-87.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-62.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  27.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-68.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  40.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-53.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  53.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-39.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-64.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  25.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-38.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-17.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  4.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Haven&apos;t digested these results yet...&lt;/p&gt;</comment>
                    <comment id="12658659" author="mikemccand" created="Mon, 22 Dec 2008 21:06:22 +0000"  >&lt;p&gt;Sorry, disregard those results above... I think there&apos;s a bug in the on-demand comparator.&lt;/p&gt;</comment>
                    <comment id="12658706" author="mikemccand" created="Mon, 22 Dec 2008 22:48:02 +0000"  >
&lt;p&gt;OK new patch attached:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Fixed the bug (I had added) in StringOrdValOnDemComparator that&lt;br/&gt;
    was doing too much work on first segment (especially skewed&lt;br/&gt;
    1-segment index results).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Removed &quot;this.slot = slot&quot; from StringOrdComparator,&lt;br/&gt;
    StringOrdValComparator and StringOrdValOnDemWinComparator.  I&lt;br/&gt;
    think this was a bug that was causing setNextReader to not convert&lt;br/&gt;
    enough of the queue in my tests.  Unfortunately, this makes&lt;br/&gt;
    performance worse for these classes.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Tweaked null checks for string values to be tiny bit faster if there&lt;br/&gt;
     are nulls.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;New benchmark results for topN=1000;&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 33.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 27.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 369.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-50.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 808.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 815.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 731.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -1.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  32.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-70.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 121.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 119.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 114.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  5.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  56.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  55.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 19.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 35.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 382.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-42.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  57.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-91.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  71.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-89.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  91.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-86.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-66.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  62.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-37.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  75.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-24.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  79.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-20.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-65.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  45.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  6.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  48.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  8.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 240.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-45.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-97.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  18.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-95.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  57.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-87.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-62.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  17.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-79.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  27.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-68.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  54.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-38.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-63.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  16.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-59.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  27.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-32.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  43.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  5.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12658718" author="mikemccand" created="Mon, 22 Dec 2008 23:46:11 +0000"  >&lt;p&gt;Results with topN=10:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 24.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2441.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-34.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4426.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4352.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4063.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  8.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  39.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 164.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 162.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 157.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-73.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  64.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1732.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-42.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3067.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  2.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3283.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3237.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  7.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 159.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 160.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 154.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  64.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  64.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 27.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  59.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  6.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 454.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-57.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 519.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-51.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 692.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-35.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 778.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-27.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-64.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 122.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 126.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 124.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-67.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  59.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  54.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12658736" author="markrmiller@gmail.com" created="Tue, 23 Dec 2008 03:44:01 +0000"  >&lt;p&gt;Hmm...I&apos;m going to have to break down and think hard about the slot issue. You have switched it to values.length - here is what I&apos;m thinking: In the case where 3 hits come from a Reader, but you ask for 1000 back, that will run through that loop 1000 times, but you only need to convert 3 right? This is what I was attempting - what test are you running to see the failure? The idea for me was that if you only have 20 hits so far on a top 1000 search, you only need to hit that loop to convert 20 values to the new Reader, rather 1000 everytime (though you spin fast hitting the ==null). I&apos;m not sure - xmas shopping has burned my whats left of my brain cells. I&apos;ll let it stew, perhaps run some code, and come back.&lt;/p&gt;</comment>
                    <comment id="12658810" author="mikemccand" created="Tue, 23 Dec 2008 10:01:39 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; In the case where 3 hits come from a Reader, but you ask for 1000 back, that will run through that loop 1000 times, but you only need to convert 3 right?&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;Well, it&apos;s tricky... and indeed all tests pass with the bug (which is&lt;br/&gt;
spooky &amp;#8211; I think we need to add cases to TestSort where 1) the index&lt;br/&gt;
has many segments, and 2) the number of hits is much greater than the&lt;br/&gt;
queue size), but I&apos;m pretty sure it&apos;s a bug.&lt;/p&gt;

&lt;p&gt;You&apos;re right: it&apos;d be nice to only visit the &quot;used&quot; slots in the queue&lt;br/&gt;
on advancing to each reader.  During the &quot;startup transient&quot; (when&lt;br/&gt;
collector has not yet seen enough hits to fill its queue), the slot&lt;br/&gt;
indeed increases one at a time, and you could at that point use it to&lt;br/&gt;
efficiently visit only the used slots.&lt;/p&gt;

&lt;p&gt;Howevever, after startup transient, the pqueue will then track the&lt;br/&gt;
weakest entry in the queue, which can occur in any of the slots, and&lt;br/&gt;
when a hit that beats that weakest entry arrives, it will call copy()&lt;br/&gt;
into that slot.&lt;/p&gt;

&lt;p&gt;So the slot passed to copy is now a &quot;relatively random&quot; value.  For a&lt;br/&gt;
1000 sized queue whose slots are full, you might get a copy into slot&lt;br/&gt;
242.  In this case we were incorrectly setting &quot;this.slot&quot; to 242 and&lt;br/&gt;
then only converting the first 242 entries.&lt;/p&gt;

&lt;p&gt;If we changed to to track the maxSlot it should work... but I&apos;m not&lt;br/&gt;
sure this is worthwhile, since it only speeds up already super-fast&lt;br/&gt;
searches and slightly hurts slow searches.&lt;/p&gt;</comment>
                    <comment id="12658831" author="mikemccand" created="Tue, 23 Dec 2008 12:03:10 +0000"  >
&lt;p&gt;New patch attached:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I moved maxScore tracking up into TopFieldCollector to save a&lt;br/&gt;
    method call per collect().&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Deprecated TopDocs.get/setMaxScore()&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Inlined the common &quot;only 1 comparator&quot; case&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Some small optimizations&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed a bug in reverse sorting &amp;amp; short-circuit testing&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Renamed a few attrs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In addition to fixing TestSort to test multi-segment index where&lt;br/&gt;
totalHits is much greater than topN, we should include reverse sorting&lt;br/&gt;
(to tickle the bug I just found) as well as sorting by 2 or more&lt;br/&gt;
fields.  Mark do you want to take a stab at this?  Given how many&lt;br/&gt;
sneaky bugs we&apos;re uncovering just by staring at the code (for long&lt;br/&gt;
enough) I&apos;d like to increase test coverage....&lt;/p&gt;

&lt;p&gt;Here&apos;re the topN=10 results with this patch:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 32.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 33.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2451.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-34.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4459.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 19.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4478.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 19.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4233.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-73.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 165.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 159.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 161.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-73.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 31.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  66.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  64.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 33.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1695.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-43.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3072.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  2.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3328.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3295.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 158.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 161.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 157.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  66.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 32.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  63.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  8.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 456.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-57.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 522.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-51.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 667.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-37.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 781.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-26.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-65.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 123.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 127.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 126.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-67.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  59.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 24.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  59.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12658837" author="markrmiller@gmail.com" created="Tue, 23 Dec 2008 13:11:21 +0000"  >&lt;p&gt;Just as a reminder to myself - we also need a custom comparator test.&lt;/p&gt;</comment>
                    <comment id="12658842" author="mikemccand" created="Tue, 23 Dec 2008 13:56:53 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; If we changed to to track the maxSlot it should work... but I&apos;m not&lt;br/&gt;
&amp;gt; sure this is worthwhile, since it only speeds up already super-fast&lt;br/&gt;
&amp;gt; searches and slightly hurts slow searches.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;OK I realized we could do this with very little added cost, by passing in &quot;numFilledSlots&quot; to FieldComparator.setNextReader.  I&apos;m attaching the patch with this.&lt;/p&gt;</comment>
                    <comment id="12658843" author="mikemccand" created="Tue, 23 Dec 2008 13:58:10 +0000"  >&lt;p&gt;Current results with topN=1000:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 37.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 33.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 31.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 381.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-48.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 905.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 906.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 834.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  32.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 124.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 123.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 119.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  59.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  57.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 39.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 32.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 417.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-37.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-91.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  72.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-89.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-86.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-66.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-35.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  78.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-21.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  79.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-20.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-65.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  8.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 24.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 245.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-44.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-97.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  18.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-95.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-86.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-61.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  17.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-80.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  29.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-66.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  56.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-35.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-63.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ord&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  16.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-59.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  28.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-30.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  44.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  7.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12659240" author="mikemccand" created="Fri, 26 Dec 2008 14:17:11 +0000"  >
&lt;p&gt;Given how different the results are, depending on how many segments&lt;br/&gt;
index has, queue size, how many hits search gets, etc., I think we&lt;br/&gt;
need a dynamic solution, meaning in certain situations (many hits,&lt;br/&gt;
small queue depth, small number of large segments) you use ORD but&lt;br/&gt;
other times you use ORDDEM.&lt;/p&gt;

&lt;p&gt;So I&apos;m thinking setNextReader should return a new comparator?  Often&lt;br/&gt;
it would simply return itself, but if it deems it worthwhile to switch&lt;br/&gt;
eg from ORD to ORDDEM it would switch to ORDDEM and return that.&lt;/p&gt;

&lt;p&gt;EG for real-time search we may have a tail of a zillion small&lt;br/&gt;
segments...&lt;/p&gt;

&lt;p&gt;Then I also thought of a wild possible change: when doing searching,&lt;br/&gt;
it&apos;d be best to visit the segments from largest to smallest, doing ORD&lt;br/&gt;
in the beginning and switching to ORDDEM at some point.  So, could we&lt;br/&gt;
do this?  I think we only &quot;require&quot; in-order docs within a segment, so&lt;br/&gt;
could we switch up segment order.  We&apos;d need to fix setNextReader API&lt;br/&gt;
to take in reader &amp;amp; docBase.  Would that work?&lt;/p&gt;
</comment>
                    <comment id="12659359" author="markrmiller@gmail.com" created="Sat, 27 Dec 2008 17:56:29 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Given how different the results are, depending on how many segments&lt;br/&gt;
index has, queue size, how many hits search gets, etc., I think we&lt;br/&gt;
need a dynamic solution, meaning in certain situations (many hits,&lt;br/&gt;
small queue depth, small number of large segments) you use ORD but&lt;br/&gt;
other times you use ORDDEM.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds interesting...&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;So I&apos;m thinking setNextReader should return a new comparator? Often&lt;br/&gt;
it would simply return itself, but if it deems it worthwhile to switch&lt;br/&gt;
eg from ORD to ORDDEM it would switch to ORDDEM and return that.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I like that I think. Only other option I see off hand is a comparator that can do both, but not as clean and probably adds a check in tightly looped code.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Then I also thought of a wild possible change: when doing searching,&lt;br/&gt;
it&apos;d be best to visit the segments from largest to smallest, doing ORD&lt;br/&gt;
in the beginning and switching to ORDDEM at some point. So, could we&lt;br/&gt;
do this? I think we only &quot;require&quot; in-order docs within a segment, so&lt;br/&gt;
could we switch up segment order. We&apos;d need to fix setNextReader API&lt;br/&gt;
to take in reader &amp;amp; docBase. Would that work?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this could work well. Since you are likely to have a few large segments, ord would be fastest, then as you moved through the many small segments, orddem would likely work best. Is largest to smallest best though? You do get to map onto smaller term[] arrays as you go, but that causes more fallback. You are also likely to be carrying more hits in the queue into the nextreader right? From smallest to largest you likely have fewer hits to map as you hit the big segments, and more room to fit in for less fallback. So the question is, what obvious piece am I missing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Largest to smallest, you fill the queue faster earlier. So more to convert as you hit all the other segments - but I guess that will be heavily mitigated by on demand.. You will convert slot.min, and if nothing beats it, I guess thats it...so not so bad actually. And if you go smallest to largest, I guess the queue wont be full, so there will be more &apos;wins&apos; into the queue, which will cause more conversions over the small segments...in which case for a ton of them and a big queue, largest to smallest seems better. Still feel like I&apos;m missing something, but I guess I have convinced myself largest to smallest is the way to go.&lt;/p&gt;

&lt;p&gt;I&apos;m probably not the first to wish there were more hours in the day...&lt;/p&gt;

&lt;p&gt;I&apos;ll put up a patch with the better testing soon just in case.&lt;/p&gt;


</comment>
                    <comment id="12659436" author="mikemccand" created="Sun, 28 Dec 2008 14:37:38 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Only other option I see off hand is a comparator that can do both, but not as clean and probably adds a check in tightly looped code.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Right, I wanted to avoid inner-loop check by swapping out the comparator in between segments.  Though, modern CPUs are quite good when an if-statement consistently goes one way, so it could be a single comparator that does internal switching might perform fine.  Still, if we fix the API to return a new comparator, we can then allow both options.&lt;/p&gt;

&lt;p&gt;I think in some cases we&apos;d even fall back to VAL comparison.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt;  Is largest to smallest best though?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good question; it&apos;s not obvious.  We should try both, and perhaps allow for the collector to optionally specify the order.&lt;/p&gt;

&lt;p&gt;My thinking was the first large segment using ORD is &quot;free&quot; (because ORD is only costly on switching segments).  If there are many hits, likely the queue has done most of the work it&apos;ll do (ie, the majority of the total # insertions will have been done), unless search is &quot;degenerate&quot;.  Perhaps the second segment, if large, warrants ORD, but them sometime soonish you&apos;d switch to ORDDEM or VAL.&lt;/p&gt;

&lt;p&gt;The &quot;long tail&quot; of tiny segments would then normally be zipped through w/ hardly any insertions, so a higher insertion cost (with zero segment transition cost) is OK.&lt;/p&gt;

&lt;p&gt;But you&apos;re right: if we do the tiny segments first, then the queue would be small so transition cost is lower.&lt;/p&gt;

&lt;p&gt;We should make it simple to override a method to implement your own &quot;search plan&quot;, and then provide a default heuristic that decides when to switch comparators.  Probably that default heuristic should be based on how often compare was actually invoked for the segment.  EG if the String sort is secondary to a numeric sort then even if there are many hits, if the numeric sort mostly wins (doesn&apos;t have many compare(...) == 0&apos;s) then the String sort should probably immediately switch to VAL after the first segment.&lt;/p&gt;</comment>
                    <comment id="12659437" author="markrmiller@gmail.com" created="Sun, 28 Dec 2008 15:23:43 +0000"  >&lt;p&gt;Nice Mike! Definitely what needs to be done and very cool. Pluggable policy sounds great. You should be able to ride the right turns often enough to really reduce some of those losses. Ord with no transition cost on the largest segment should be a nice win on its own. I think thats what I was missing - if you come from smallest, you have to map on the ord switch.&lt;/p&gt;</comment>
                    <comment id="12659842" author="markrmiller@gmail.com" created="Tue, 30 Dec 2008 16:31:25 +0000"  >&lt;p&gt;I was playing with this late last night and I got some of the work moving. I&apos;ve got it so you can work the readers in any order (sorting by size at the moment, largest to smallest), but in doing so, straight ord no longer works. This is likely because the testing has gotten a little better, but I am not sure whats up. The other comparators work fine. Got a little of the return a new comparator type stuff in too, but nothing finished.&lt;/p&gt;

&lt;p&gt;Kind of got caught up on ord  - when thats fixed I&apos;ll put up a patch though.&lt;/p&gt;</comment>
                    <comment id="12660217" author="markrmiller@gmail.com" created="Thu, 1 Jan 2009 19:45:00 +0000"  >&lt;p&gt;Alright, my new years gift to myself is going to be to work on this a bit.&lt;/p&gt;

&lt;p&gt;I&apos;ve got part of the straight ord problem - if multiple queue entries clashed on conversion, and they were indeed not just clashes but clashes with the same oringal value, they were still getting an incremented subord when they should get an identical subord. So I&apos;ve taken care of that, but something still fails. Looking.&lt;/p&gt;

&lt;p&gt;On a side note though, we probably want another straight ords comparator that does not fall back to subords. Then we can use that as the first comparator on a large segment, and equal values wont have to needlessly fallback to subords for a worthless 0 on 0 check.&lt;/p&gt;
</comment>
                    <comment id="12660226" author="markrmiller@gmail.com" created="Thu, 1 Jan 2009 20:18:43 +0000"  >&lt;p&gt;Cool, got the other one. When copying the doc into a slot (FieldComparator.copy), the subord had to be set to 0 so that it didnt retain a stale value. Straight ord looks good now as do the rest, so I&apos;ll try and get a custom comparator policy in there so we can benchmark a couple strategies.&lt;/p&gt;

&lt;p&gt;Rather than a new Comparator for a pure ord that doesnt fall to subord, perhaps the policy could return an overridden straight ord if its first and on the first index reader...&lt;/p&gt;</comment>
                    <comment id="12660242" author="markrmiller@gmail.com" created="Thu, 1 Jan 2009 22:26:05 +0000"  >&lt;p&gt;Still pretty ugly, but this patch has a working ord I think, allows readers in any order (giving largest to smallest now), and has a hackey ComparatorPolicy that can alter the comparators being used. Right now there is an ugly little one for ORD that switches to ORD_DEM after the first segment. The rest just use the same comparator throughout.&lt;/p&gt;

&lt;p&gt;Also added something we may take out - an option to not fill fields (which we cant use for back compat, but a user could). If you are not using a MultiSearcher, its kind of a waste of time to fill fields.&lt;/p&gt;

&lt;p&gt;Much to do, but fully functional I think.&lt;/p&gt;</comment>
                    <comment id="12660322" author="markrmiller@gmail.com" created="Fri, 2 Jan 2009 14:22:56 +0000"  >&lt;p&gt;So what looks like a promising strategy?&lt;/p&gt;

&lt;p&gt;Off the top I am thinking something as simple as:&lt;/p&gt;

&lt;p&gt;start with ORD with no fallback on the largest.&lt;br/&gt;
if the next segments are fairly large, use ORD_VAL&lt;br/&gt;
if the segments get somewhat smaller, move to ORD_DEM&lt;/p&gt;

&lt;p&gt;Oddly, I&apos;ve seen VAL perform well in certain situations, so maybe it has its place, but I don&apos;t know where yet.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;edit&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Oh, yeah, queue size should also play a roll in the switching &lt;/p&gt;</comment>
                    <comment id="12660465" author="mikemccand" created="Sat, 3 Jan 2009 14:08:00 +0000"  >
&lt;p&gt;Patch looks great!  I will run some perf tests once I&apos;m back at home&lt;br/&gt;
base (still on vacation now, far away from home!).  Some comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The comment &quot;use multiple queues&quot; in IndexSearcher.java isn&apos;t&lt;br/&gt;
    right &amp;#8211; it should be &quot;use single reader&quot;?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I think FieldValueHitQueue.getComparatorPolicy should receive&lt;br/&gt;
    subreaders?  EG when there&apos;s only one sub-reader, straight ORD is&lt;br/&gt;
    best.  And possibly its order in the sort?  We may want to move&lt;br/&gt;
    getComparatorPolicy into SortField so that one may override for&lt;br/&gt;
    &quot;expert&quot; cases?  But we could do this later.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;We should fix sorting of sub-readers by maxDoc() to be done once,&lt;br/&gt;
    not per query?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I think we should sort sub-readers by numDocs() not maxDoc()?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;We should fix javadocs of MultiReaderHitCollector to explain that&lt;br/&gt;
    sub-readers are visited not-in-order.  (And other javadoc fixes,&lt;br/&gt;
    but this can wait for the &quot;polishing&quot; phase...).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I like the &quot;don&apos;t fill fields&quot; option&lt;/li&gt;
&lt;/ul&gt;

</comment>
                    <comment id="12660476" author="markrmiller@gmail.com" created="Sat, 3 Jan 2009 15:18:42 +0000"  >&lt;p&gt;I&apos;ll put up another patch soon with those changes. All look correct. I wasn&apos;t sure about maxdoc or numdoc (not that I spent much time thinking about it) because the fieldcache loads up all the deleted docs - for things like the terms array to be mapped to, that depends on maxdoc. But then how many hits are likely to end up in the queue is more related to numdocs. Switched it to numdocs.&lt;/p&gt;

&lt;p&gt;Still have to wrap up the custom comparator, but a comparatorpolicy changes things there. If you can set a custom comparatorpolicy (move it to sort?), than you can easily put in any custom comparators.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12660519" author="markrmiller@gmail.com" created="Sun, 4 Jan 2009 01:56:43 +0000"  >&lt;p&gt;Less ugly, but still some finishing work to do, including some intelligent ComparatorPolicies.&lt;/p&gt;</comment>
                    <comment id="12660580" author="markrmiller@gmail.com" created="Sun, 4 Jan 2009 15:01:21 +0000"  >&lt;p&gt;No real work, but some more necessary cleanup.&lt;/p&gt;</comment>
                    <comment id="12661145" author="mikemccand" created="Tue, 6 Jan 2009 14:10:40 +0000"  >&lt;p&gt;Mark, I see 3 testcase failures in TestSort if I &quot;pretend&quot; that SortField.STRING means STRING_ORD &amp;#8211; do you see that?&lt;/p&gt;

&lt;p&gt;I think we should fix TestSort so that it runs N times, each time using a different STRING sort method, to make sure we are covering all these methods?&lt;/p&gt;</comment>
                    <comment id="12661148" author="mikemccand" created="Tue, 6 Jan 2009 14:13:30 +0000"  >&lt;p&gt;I prototyped a rough change to the FieldComparator API, whereby&lt;br/&gt;
TopFieldCollector calls setBottom to notify the comparator which slot&lt;br/&gt;
is the bottom of the queue (whenever it changes), and then calls&lt;br/&gt;
compareBottom (which replaces compare(int slot, int doc, float&lt;br/&gt;
score)).  This seems to offer decent perf. gains so I think we should&lt;br/&gt;
make this change for real?&lt;/p&gt;

&lt;p&gt;I think it gives good gains because 1) compare to bottom is very&lt;br/&gt;
frequent for a search that has many hits, and where the queue fairly&lt;br/&gt;
quickly converges to the top N, 2) it allows the on-demand comparator&lt;br/&gt;
to pre-cache the bottom&apos;s ord, and 3) it saves one array deref.&lt;/p&gt;

&lt;p&gt;TopFieldCollector would guarantee that compareBottom is not called&lt;br/&gt;
unless setBottom was called; during the startup transient, setBottom&lt;br/&gt;
is not called until the queue becomes full.&lt;/p&gt;
</comment>
                    <comment id="12661149" author="mikemccand" created="Tue, 6 Jan 2009 14:15:11 +0000"  >&lt;p&gt;On what ComparatorPolicy to use by default... I think we should start&lt;br/&gt;
with ORD, but gather counters of number of compares vs number of&lt;br/&gt;
copies, and based on those counters (and comparing to numDocs())&lt;br/&gt;
decide &quot;how aggressively&quot; to switch comparators?  That determination&lt;br/&gt;
should also take into account the queue size.&lt;/p&gt;

&lt;p&gt;An optimized index would always use ORD (w/o gathering counters),&lt;br/&gt;
which is fastest.&lt;/p&gt;

&lt;p&gt;In the future... we could imagine allowing the query to dictate the&lt;br/&gt;
order that segments are visited.  EG if the query can roughly estimate&lt;br/&gt;
how many hits it&apos;ll get on a given segment, we could order by that&lt;br/&gt;
instead of simply numDocs().&lt;/p&gt;

&lt;p&gt;The query could also choose an appropriate ComparatorPolicy, eg, if it&lt;br/&gt;
estimates it&apos;ll get very few hits, VAL is best right from the start,&lt;br/&gt;
else start with ORD.&lt;/p&gt;

&lt;p&gt;Another future fix would be to implement ORDSUB with a single pass&lt;br/&gt;
through the queue, using a reused secondary pqueue to do the full sort&lt;br/&gt;
of the queue.  This would let us assign subords much faster, I think.&lt;/p&gt;

&lt;p&gt;But I don&apos;t think we should pursue these optimizations as part of this&lt;br/&gt;
issue... we need to bring closure here; we already have some solid&lt;br/&gt;
gains to capture.  I think we should wrapup now...&lt;/p&gt;
</comment>
                    <comment id="12661160" author="markrmiller@gmail.com" created="Tue, 6 Jan 2009 14:52:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Mark, I see 3 testcase failures in TestSort if I &quot;pretend&quot; that SortField.STRING means STRING_ORD - do you see that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, sorry. That STRING_ORD custom comparator policy is just a joke really, so I only really tested it on the StringSort test. It&apos;s just not initing the ords along with the values on switching. Making ords package private so that it can be changed (and changing it) fixes things. Not sure about new constructors or package private for that part of the switch...&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think we should fix TestSort so that it runs N times, each time using a different STRING sort method, to make sure we are covering all these methods?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, this makes sense in any case. I just keep switching them by hand as I work on them.&lt;/p&gt;</comment>
                    <comment id="12661165" author="markrmiller@gmail.com" created="Tue, 6 Jan 2009 15:11:19 +0000"  >&lt;p&gt;There are other little conversion steps that have to be considered as well I think. Like when you switch to ord dem, you won&apos;t have the ReaderIndex array filled in properly, etc. (probably an issue with that example policy in there beyond the ords copy)&lt;/p&gt;

&lt;p&gt;Depending on what you come from and what you go to, a couple little hoops have to be jumped.&lt;/p&gt;</comment>
                    <comment id="12661238" author="markrmiller@gmail.com" created="Tue, 6 Jan 2009 18:27:53 +0000"  >&lt;p&gt;Here is what that example policy has to be essentially. We just have to create a good way to do the right conversion I guess. I&apos;ll work on whatever you don&apos;t put up when you share your latest optimizations.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; SortField.STRING_ORD:
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ComparatorPolicy(){
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; FieldComparator comparator = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FieldComparator.StringOrdComparator(numHits, field);
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; first = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; second = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; FieldComparator nextComparator(FieldComparator oldComparator,
            IndexReader reader, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numHits, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numSlotsFull)
            &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(first) {
            first = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; comparator;
          } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(second){
            StringOrdValOnDemComparator comp = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FieldComparator.StringOrdValOnDemComparator(numHits, field);
            comp.values = ((FieldComparator.StringOrdComparator)comparator).values;
            comp.ords = ((FieldComparator.StringOrdComparator)comparator).ords;
            comp.currentReaderIndex = 1;
            comparator = comp;
            second = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; comp;
          }
          &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; comparator;
        }};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12661260" author="ryantxu" created="Tue, 6 Jan 2009 19:05:17 +0000"  >&lt;p&gt;Any estimates on how far along this is?&lt;/p&gt;

&lt;p&gt;Is it close enough that the reasonably simple patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1304&quot; title=&quot;Memory Leak when using Custom Sort (i.e., DistanceSortSource) of LocalLucene with Lucene&quot;&gt;&lt;del&gt;LUCENE-1304&lt;/del&gt;&lt;/a&gt; should wait?  Or do you think it is worth waiting for this? &lt;/p&gt;

&lt;p&gt;I&apos;m trying to get local lucene and solr to play nice (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-773&quot; title=&quot;Incorporate Local Lucene/Solr&quot;&gt;&lt;del&gt;SOLR-773&lt;/del&gt;&lt;/a&gt;).  The hoops you have to jump through to avoid memory leaks make the final code too strange and not reusable.&lt;/p&gt;</comment>
                    <comment id="12661264" author="markrmiller@gmail.com" created="Tue, 6 Jan 2009 19:18:22 +0000"  >&lt;p&gt;I think we are wrapping up, but it may make sense to do 1304 anyway. That code will be deprecated, but if you use a custom comparator, it will use the deprecated code. The custom comparator will be removed in 3.0 I think, and you&apos;d have to make a new comparator or comparator policy.&lt;/p&gt;

&lt;p&gt;So its probably best to do 1304 if we want it, just for the 2.9 release.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12661294" author="mikemccand" created="Tue, 6 Jan 2009 20:16:43 +0000"  >&lt;p&gt;Attached prototype changes to switch to &quot;setBottom&quot; and &quot;compareBottom&quot; API for FieldComparator, but, I only included the few files I modified over the last patch, and it does not pass TestSort when I switch to it (fails the same tests ORD fails on).&lt;/p&gt;

&lt;p&gt;Mark can you switch the comparators to this new API (and remove the compare(int, int, float) method) and fix the test failures?  Once that passes tests, I&apos;ll re-run perf test and we can tune the default policy.  I think we are close!&lt;/p&gt;</comment>
                    <comment id="12661295" author="mikemccand" created="Tue, 6 Jan 2009 20:18:11 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Not sure about new constructors or package private for that part of the switch...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Could we just make ctors on each comparator that take the other comparator and copy over what they need?  This way we can make attrs &quot;private final&quot; again, in case that helps the JRE optimize.&lt;/p&gt;</comment>
                    <comment id="12661304" author="mikemccand" created="Tue, 6 Jan 2009 20:42:06 +0000"  >
&lt;blockquote&gt;
&lt;p&gt;&amp;gt; I&apos;m trying to get local lucene and solr to play nice (&lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-773&quot; title=&quot;Incorporate Local Lucene/Solr&quot;&gt;&lt;del&gt;SOLR-773&lt;/del&gt;&lt;/a&gt;). The hoops you have to jump through to avoid memory leaks make the final code too strange and not reusable.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;With this patch we are changing how custom sorting works.&lt;/p&gt;

&lt;p&gt;Previously, Lucene would iterate the terms for you, asking you to&lt;br/&gt;
produce a Comparable for each one.  With this patch, we are asking you&lt;br/&gt;
to implement FieldComparator, which compares docs/slots directly and&lt;br/&gt;
must be aware of switching sub-readers during searching.&lt;/p&gt;

&lt;p&gt;Ryan, can you have a look at FieldComparator to see if it &quot;works&quot; for&lt;br/&gt;
local lucene (and any other feedback on it)?&lt;/p&gt;

&lt;p&gt;I think the best outcome here would be to get this issue done, and&lt;br/&gt;
then get local lucene switched over to this new API (so local lucene&lt;br/&gt;
sees the benefits of the new API, and sidesteps the memory leak in&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1304&quot; title=&quot;Memory Leak when using Custom Sort (i.e., DistanceSortSource) of LocalLucene with Lucene&quot;&gt;&lt;del&gt;LUCENE-1304&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;We may still need to do &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1304&quot; title=&quot;Memory Leak when using Custom Sort (i.e., DistanceSortSource) of LocalLucene with Lucene&quot;&gt;&lt;del&gt;LUCENE-1304&lt;/del&gt;&lt;/a&gt; in case others hit the memory leak&lt;br/&gt;
of the old custom sort API.&lt;/p&gt;</comment>
                    <comment id="12661306" author="markrmiller@gmail.com" created="Tue, 6 Jan 2009 20:47:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;Could we just make ctors on each comparator that take the other comparator and copy over what they need? This way we can make attrs &quot;private final&quot; again, in case that helps the JRE optimize.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, good idea.&lt;/p&gt;

&lt;p&gt;I&apos;ll get everything together and put up a patch.&lt;/p&gt;</comment>
                    <comment id="12661390" author="markrmiller@gmail.com" created="Wed, 7 Jan 2009 00:45:32 +0000"  >&lt;p&gt;Can&apos;t seem to use the partial patch, but I&apos;ll try to put in by hand. Just gotta remember to make sure I don&apos;t miss anything.&lt;/p&gt;</comment>
                    <comment id="12661394" author="markrmiller@gmail.com" created="Wed, 7 Jan 2009 01:04:56 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we should fix TestSort so that it runs N times, each time using a different STRING sort method, to make sure we are covering all these methods?&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;Yeah, this makes sense in any case. I just keep switching them by hand as I work on them.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In thinking about this, we are going to drop those other sort types though right? I figured we would still just have String, and the comparator policy for String would pick the right comparators rather than the sort type?&lt;/p&gt;</comment>
                    <comment id="12661412" author="markrmiller@gmail.com" created="Wed, 7 Jan 2009 02:42:17 +0000"  >&lt;p&gt;Merged everything and put Sort.ORD back the way it was (using ORD_SUBORD).&lt;/p&gt;

&lt;p&gt;Added two new types, STRING_POLICY and STRING_POLICY2. Nothing good, but something to get started with I suppose.&lt;/p&gt;

&lt;p&gt;The first will just use straight ord and then switch to ordval on demand after the first reader.&lt;/p&gt;

&lt;p&gt;The second will start with straight ord, go to ordval if the next readers have over 1000 docs (or is 5000?), and then finally move to ordvaldem.&lt;/p&gt;

&lt;p&gt;Whats left:&lt;/p&gt;

&lt;p&gt;Polish (mostly javadoc at this point I think)&lt;br/&gt;
A good default String policy&lt;br/&gt;
Custom FieldComparator test&lt;br/&gt;
Tests for each of the new String comparators (not sure how yet if we remove the new SortField types - perhaps we do leave them after all?)&lt;br/&gt;
Remove the new SortField types that are being used for testing&lt;/p&gt;</comment>
                    <comment id="12661530" author="mikemccand" created="Wed, 7 Jan 2009 12:01:45 +0000"  >&lt;blockquote&gt;
&lt;p&gt;&amp;gt; Can&apos;t seem to use the partial patch&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Woops, sorry &amp;#8211; did I miss a file I had changed?  I just quickly pulled together the files I thought I had changed.  I &lt;b&gt;really&lt;/b&gt; want the &quot;svn patch&quot; command....&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;gt; In thinking about this, we are going to drop those other sort types though right? &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;True, I think.  Or, we may keep some of them around for &quot;expert&quot; usage.  I still think it&apos;d be very helpful if one could alter a static array or something in TestSort to list the STRING sort methods to test out, and TestSort runs entirely with each method; then if one is making a private method one could stick it into the test to make sure it works.  Making a functionally correct STRING sort method is proving to be quite a challenge!&lt;/p&gt;

&lt;p&gt;OK I&apos;ll test the new patch... thanks Mark!&lt;/p&gt;</comment>
                    <comment id="12662027" author="mikemccand" created="Thu, 8 Jan 2009 16:33:29 +0000"  >&lt;p&gt;Attached full patch (though you&apos;ll get failed hunks because of the&lt;br/&gt;
annoying $Id$ expansion problem).&lt;/p&gt;

&lt;p&gt;I fixed various small issues, and added a new TestStressSort test.  It&lt;br/&gt;
runs legacy vs new sort and asserts that they are the same.&lt;/p&gt;

&lt;p&gt;It is currently failing... but I haven&apos;t spent any time digging into&lt;br/&gt;
why.&lt;/p&gt;

&lt;p&gt;Mark could you dig and try to figure out why it&apos;s failing?  I think we&lt;br/&gt;
should resolve it before running (or, trusting) perf tests.&lt;/p&gt;

&lt;p&gt;Also: I wonder if we can remove the null checking in the compare&lt;br/&gt;
methods for String*Comparator?  EG maybe we need a new&lt;br/&gt;
FieldCache.getString&lt;/p&gt;
{s,Index}
&lt;p&gt; methods that optionally take a&lt;br/&gt;
&quot;fillNulls&quot; param, and if true nulls are replaced with empty string?&lt;br/&gt;
However... that would unfortunately cause a difference whereby &quot;&quot;&lt;br/&gt;
would be equal to null (whereas now null sorts ahead of &quot;&quot;), which is&lt;br/&gt;
not back compatible.  I guess we could make a &quot;non-null&quot; comparator&lt;br/&gt;
and use it whenever it&apos;s known there are no nulls in the FieldCache&lt;br/&gt;
array.  It may not be worth the hassle.  If the value is never null,&lt;br/&gt;
cpu will guess the right branch path every time, so penalty should&lt;br/&gt;
be small (yet non-zero!).&lt;/p&gt;</comment>
                    <comment id="12662028" author="markrmiller@gmail.com" created="Thu, 8 Jan 2009 16:40:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;It runs legacy vs new sort and asserts that they are the same.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Clever. Very good idea.&lt;/p&gt;

&lt;p&gt;I&apos;ll fix it up. Also, if you have any ideas about what Policies you want to start with, I&apos;d be happy to push those around a bit too.&lt;/p&gt;</comment>
                    <comment id="12662038" author="markrmiller@gmail.com" created="Thu, 8 Jan 2009 17:01:39 +0000"  >&lt;p&gt;Its the ORDSUBORD again (which I don&apos;t think we will use) and the two Policies. Odd because its the last hit of  10 that fails for all 3. I&apos;ll ferret it out tonight.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;EDIT&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;yup...always the last entry thats wrong no matter the queue size - for all 3, which is odd because ORD_SUBORD doesnt have too much of a relationship to the two policies. Will be a fun one.&lt;/p&gt;</comment>
                    <comment id="12662380" author="markrmiller@gmail.com" created="Fri, 9 Jan 2009 14:29:55 +0000"  >&lt;p&gt;Still coming. Heavily side tracked for a bit with other stuff unfortunately, but I did fix the ORD_SUBORD issue last night (had to return -1 for the subord comparison rather than 1, something you had caught and left a &apos;is this wrong?&apos; comment about).&lt;/p&gt;

&lt;p&gt;The two policy problems are trickier, and must have something to do with the switch from one comparator to another. I see you straightened out some of the setbottom stuff that had to go on, but I can&apos;t find what else is off yet. Like I said, busy time for me for another week or two, but I&apos;ll find some time this weekend I hope.&lt;/p&gt;

&lt;p&gt;I still find it odd that it always the last hit thats off (at least from a couple quick tests) - somehow theres a clue there...&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12663371" author="mikemccand" created="Tue, 13 Jan 2009 16:23:14 +0000"  >&lt;p&gt;OK new patch attached.  TestStressSort now passes &amp;#8211; there were a&lt;br/&gt;
number of silly small bugs I had to fix.  Next up I&apos;ll run some perf&lt;br/&gt;
tests...&lt;/p&gt;</comment>
                    <comment id="12663379" author="markrmiller@gmail.com" created="Tue, 13 Jan 2009 17:20:01 +0000"  >&lt;p&gt;What was causing the two policies to miss, even though the individual comparators passed? Was it more set bottom stuff messing up the transition between comparators? I couldn&apos;t see a transition problem last week. I see some of you other tweaks, but in terms of comparator transistion, I only see the readerGeneration rename there offhand (nice change). I actually think the generation can start with 0 rather than 1, as it normally starts at -1.&lt;/p&gt;

&lt;p&gt;I see that bottom optimization made the ordsubord bottomCompare more complicated as well - I&apos;m surprised I saw everything passing with just a negative 1 rather than 1.&lt;/p&gt;

&lt;p&gt;Very much looking forward to the benchmark results! Wish I had more time to work on this, thanks for letting me in on so much of it.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12663397" author="mikemccand" created="Tue, 13 Jan 2009 18:24:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;What was causing the two policies to miss, even though the individual comparators passed?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think (not sure!) it was not correctly setting bottom* in one of the transition cases.  There were also a couple bugs in some of the setBottoms.&lt;/p&gt;</comment>
                    <comment id="12663406" author="mikemccand" created="Tue, 13 Jan 2009 18:30:37 +0000"  >&lt;p&gt;OK here are the current results:&lt;/p&gt;

&lt;p&gt;Queue size 10:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 37.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 35.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 36.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 35.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 36.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2557.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-31.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4561.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4551.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4569.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4551.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3743.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4526.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-73.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 166.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 166.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 168.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 165.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 144.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 165.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-73.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  68.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  68.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  69.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 35.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  66.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  66.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 40.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 41.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 41.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1735.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-42.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3077.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  2.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3415.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3537.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3463.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3004.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3356.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  38.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 164.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 164.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 164.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 163.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 162.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  68.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 36.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  68.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 36.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  66.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 31.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  8.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 33.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 450.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-57.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 480.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-54.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 624.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-41.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 703.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-34.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 724.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-32.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1066.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 638.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-40.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  37.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-65.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 118.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  7.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 121.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 123.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 123.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 11.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 110.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 121.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   3.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  61.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  62.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  63.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 32.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  61.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  61.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 27.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;Queue size 1000:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 41.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 40.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 38.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 38.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 37.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 385.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-48.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 970.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 31.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 938.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 839.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 938.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 26.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 740.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 924.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 24.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 127.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 125.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 122.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 125.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 108.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 125.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  62.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  61.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 32.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 31.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 42.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 41.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 41.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 39.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 39.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 411.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-38.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-91.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  71.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-89.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  89.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-86.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  89.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-86.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 664.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  71.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-89.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-66.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  68.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-31.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  80.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-19.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  84.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-15.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  84.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-15.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  79.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-20.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-66.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  52.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 24.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  54.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  53.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 23.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 24.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   8.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 243.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-45.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-97.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  19.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-95.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-86.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-86.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 442.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  18.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-95.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  32.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-63.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-81.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  27.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-68.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-47.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-46.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  93.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  88.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  27.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-67.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-61.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  26.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-35.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  37.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -9.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  37.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -9.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;100&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;policy2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  92.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  25.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-36.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12663440" author="markrmiller@gmail.com" created="Tue, 13 Jan 2009 19:38:39 +0000"  >&lt;p&gt;Ha, how disappointing. I suppose not entirely unexpected though. I wouldn&apos;t expect one segment as straight ord would be much of a gain, but I am surprised it doesn&apos;t at least edge out the transition cost. Policy 2 is even worse - likely the arbitrary switch to on demand is not very useful - on the large queues it appears better to just orddem the whole thing. Perhaps it should switch sooner, or use a better heuristic. You gave some good ideas for that above, but I don&apos;t think thats a quick get.&lt;/p&gt;

&lt;p&gt;Need to try and re micro bench little experiments to get an idea of what to do I think...&lt;/p&gt;

&lt;p&gt;I hope something smarter can eek out more gains than that.&lt;/p&gt;</comment>
                    <comment id="12663607" author="markrmiller@gmail.com" created="Wed, 14 Jan 2009 02:55:18 +0000"  >&lt;p&gt;Disregarding any missing gains with those simple policies, the rest of those numbers actually look pretty good! Still some problems here and there (large queue size still sticky), but overall some solid gains as well.&lt;/p&gt;

&lt;p&gt;orddem seems to be best in most cases currently - maybe we can tweak that a little more somehow. Where its not better, or not much worse, is with a single segment. That result is interesting, because both policies beat it nicely, and its because they simpely use straight ord on the first segment. But ordsubord seems to outperform the policies. That doesn&apos;t make sense. Its largely the same, but should be a tad slower if anything. Other results match up so nicely, it seems like it might not be noise, in which case, weird.&lt;/p&gt;</comment>
                    <comment id="12663754" author="mikemccand" created="Wed, 14 Jan 2009 14:38:55 +0000"  >&lt;p&gt;I agree, ORDDEM looks overall best.  I&apos;m going to try to tune it a bit...&lt;/p&gt;</comment>
                    <comment id="12663761" author="markrmiller@gmail.com" created="Wed, 14 Jan 2009 14:54:14 +0000"  >&lt;p&gt;Any ideas on why ORDSUBORD would beat the policies with 1 segment and 1000 queue size? That technically boils down to ORD VS ORDSUBORD, and ORD should edge out or be about the same - but ORDSUBORD clearly wins by a few percent each time. Does this point to some funky policy problem or something?&lt;/p&gt;</comment>
                    <comment id="12663765" author="mikemccand" created="Wed, 14 Jan 2009 15:00:58 +0000"  >&lt;p&gt;I was wondering the same thing.  ORD (policy/policy2 on a 1 seg index) ought to be faster than ORDSUB, always, but it&apos;s not.  Somthing is amiss.  I&apos;ll try running under YourKit to see if something stands out.&lt;/p&gt;</comment>
                    <comment id="12664658" author="mikemccand" created="Fri, 16 Jan 2009 20:10:28 +0000"  >&lt;p&gt;OK new patch finally:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Fixed a few small things YourKit uncovered, eg the private&lt;br/&gt;
    binarySearch() method was inserting extra run-time access check&lt;br/&gt;
    method so I changed it to package protected.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I changed ComparatorPolicy.nextComparator -&amp;gt; nextReader, making it&lt;br/&gt;
    that method&apos;s job to possibly switch comparators as well as call&lt;br/&gt;
    setNextReader internally.  This allows us to pass in the&lt;br/&gt;
    sub-reader when we init a new comparator.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Improved TestStressSort some more.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I made a new ORDDEM2 that does not convert slots when comparing,&lt;br/&gt;
    but does convert the bottom slot.  So it uses ORD in&lt;br/&gt;
    compareBottom, and ORD comparison between slots if the slots have&lt;br/&gt;
    the same gen, else compare-by-value.  Also, when converting, it&lt;br/&gt;
    bounds the binarySearch by using bottomOrd.  This seems to give&lt;br/&gt;
    better performance in the high-segment-count, large-queue-size,&lt;br/&gt;
    few hits cases, and comparable performance in other cases.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think for a custom sort we should allow user to pass in a ComparatorPolicy?&lt;/p&gt;</comment>
                    <comment id="12664661" author="mikemccand" created="Fri, 16 Jan 2009 20:11:46 +0000"  >&lt;p&gt;I decided to change the wiki indexes I use for perf. testing.  Previously&lt;br/&gt;
the 10 and 100 segment indexes all had fix-sized segments, which is&lt;br/&gt;
not natural &amp;#8211; normally segments have a logarithmic size distribution.&lt;br/&gt;
So I created new 10 and 36 segment indexes from Wikipedia, with 2M&lt;br/&gt;
docs that are more &quot;natural&quot;, and re-ran tests on them.&lt;/p&gt;

&lt;p&gt;I think net/net ORDDEM2 makes a good default policy!&lt;/p&gt;

&lt;p&gt;queue=1000&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 36.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 39.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 38.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 39.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 739.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 379.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-48.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 739.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 954.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 739.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 951.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 739.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 858.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 739.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 860.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 109.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 109.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 125.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 109.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 126.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 109.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 123.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 12.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 109.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 124.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  61.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 31.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  61.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 31.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  60.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  11.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 20.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 38.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 40.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 40.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   9.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 39.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 659.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 406.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-38.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 659.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  68.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-89.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 659.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  86.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-86.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 659.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 117.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-82.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 659.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 288.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-56.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 101.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  33.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-66.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 101.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  68.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-32.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 101.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  83.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-17.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 101.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  87.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-13.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 101.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 100.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -0.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-65.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  46.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  9.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  53.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 25.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  54.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 29.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  57.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 35.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 609.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 358.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-41.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 609.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  37.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-93.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 609.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  58.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-90.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 609.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 113.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-81.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 609.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 258.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-57.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  98.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  34.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-65.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  98.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  39.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-60.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  98.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-33.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  98.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  85.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-12.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  98.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  94.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -3.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  44.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-67.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  44.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  30.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-30.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  44.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  47.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  7.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  44.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  54.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 24.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  44.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  56.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;queue=10&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 36.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 37.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 37.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 37.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3727.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2546.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-31.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3727.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4537.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3727.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4568.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3727.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4552.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 22.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3727.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4537.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 143.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  39.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-72.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 143.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 165.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 15.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 143.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 167.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 143.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 167.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 143.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 168.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 17.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  13.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-73.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  66.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 28.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  69.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  69.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  51.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  69.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 19.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 39.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 42.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 41.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;simple&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;country&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2000000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  10.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   0.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  14.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 41.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2943.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1761.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-40.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2943.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3035.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  3.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2943.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3325.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 13.0%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2943.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3481.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2943.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3574.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 21.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  39.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-71.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 161.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 16.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 165.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 165.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 18.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 139.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 166.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 19.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-69.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 30.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  68.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 35.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  12.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  50.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 34.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;numSeg&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;index&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;sortBy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;topN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;hits&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warm&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;warmnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qpsnew&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;pctg&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2137.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1143.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-46.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2137.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1641.5&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-23.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2137.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2046.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; -4.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2137.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2203.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  3.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;147&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   4984&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2137.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2215.3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  3.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 135.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  39.8&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-70.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 135.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 149.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 10.9%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 135.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 154.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 135.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 154.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;text&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  97191&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  42.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 135.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 155.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 14.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;val&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  49.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  15.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;-68.4%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordsub&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  49.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  65.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 32.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ordval&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  49.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 35.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  49.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 36.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;36&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;wiki&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;title&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;orddem2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;10&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 386435&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  41.9&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  49.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;   2.2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;  67.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 36.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


</comment>
                    <comment id="12664667" author="markrmiller@gmail.com" created="Fri, 16 Jan 2009 20:34:17 +0000"  >&lt;p&gt;Nice Mike! Those results look great. Do we want to keep the policy idea if we don&apos;t end up using any that switch comparators? I&apos;d also like to see if sorting readers by size really does any good.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;I think for a custom sort we should allow user to pass in a ComparatorPolicy?&lt;/p&gt;

&lt;p&gt;Yeah def. If we keep the policies, we should rip out the custom comparator and allow for a custom policy.&lt;/p&gt;</comment>
                    <comment id="12664670" author="mikemccand" created="Fri, 16 Jan 2009 20:42:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;Do we want to keep the policy idea if we don&apos;t end up using any that switch comparators?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good question.  I think we should not keep it &amp;#8211; all our attempts to use it to improve performance have not succeeded.  And then we can stick with FieldComparatorSource for custom sorting.  I&apos;ll make this change.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;d also like to see if sorting readers by size really does any good. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think this likely does help, because if you visit the largest segment first, your queue will tend to quickly get most of its inserts out of the way.  ORDDEM2 is fastest on the first segment because all ORDs are comparable.  I think this&apos;ll matter most for indexes that have many deletions, such that the old large segments contain many deletes (in which case they are sorted later).&lt;/p&gt;</comment>
                    <comment id="12664707" author="mikemccand" created="Fri, 16 Jan 2009 22:17:15 +0000"  >&lt;p&gt;New patch w/ ComparatorPolicy removed.&lt;/p&gt;</comment>
                    <comment id="12664711" author="mikemccand" created="Fri, 16 Jan 2009 22:24:47 +0000"  >&lt;p&gt;Woops, last one had compilation errors in contrib/benchmark... this one should work.&lt;/p&gt;</comment>
                    <comment id="12664883" author="markrmiller@gmail.com" created="Sat, 17 Jan 2009 23:34:05 +0000"  >&lt;p&gt;Re: The FieldCache loading problem with MultiSegmentReader&lt;/p&gt;

&lt;p&gt;I think this is just the overhead cost associated with how we currently handle this.&lt;/p&gt;

&lt;p&gt;To load a FieldCache for a single segment we get a SegmentTermDocs and just keep calling next, which basically just calls readbyte and readint over and over on the index. Pretty efficient. Do it for each term to be loaded.&lt;/p&gt;

&lt;p&gt;To load a FieldCache for multiple segments we get a MultiSegmentReader to get  MultiTermDocs. As we call next on MultiTermDocs it will get a TermDocs for each Reader and call seek to get to the Term. The seek appears pretty slow, and we do it for the number of Readers x the number of Terms to be loaded. &lt;/p&gt;

&lt;p&gt;Under seek, TermInfosReader.get looks slow with SegmentTermeEnum.scanTo looking to be the worst offender under it.&lt;/p&gt;

&lt;p&gt;All in all though, there is just a big difference in whats going on, that compounds with more segments.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12664888" author="markrmiller@gmail.com" created="Sun, 18 Jan 2009 00:24:51 +0000"  >&lt;p&gt;Or put in another way:&lt;/p&gt;

&lt;p&gt;the single segment version, with about 20000 terms for a field will seek on one segment about 20,000 times, once for each term.&lt;/p&gt;

&lt;p&gt;a multisegment version over 79 segments will seek about 1,580,000 times. The MultiSegment seek for each term is pretty much free, so I dont count that, but you seek on each term for each individual segment as you call next on the TermDocs. If your terms are spread across all of the segments, its not even much cheaper on any given segment to do the seek.&lt;/p&gt;</comment>
                    <comment id="12664915" author="markrmiller@gmail.com" created="Sun, 18 Jan 2009 02:45:17 +0000"  >&lt;p&gt;Cool - this problem affects other things too, like SpanQueries. This will be a good boost for them as well if you have more than a few segments. Same with the multi term queries I think (enumeration should be faster). This patch is going to be dope for performance all around.&lt;/p&gt;</comment>
                    <comment id="12664924" author="markrmiller@gmail.com" created="Sun, 18 Jan 2009 03:30:25 +0000"  >&lt;p&gt;Whoops. As usual, getting ahead of myself. Perhaps there won&apos;t be big gains with those other queries.&lt;/p&gt;

&lt;p&gt;While there is  a big difference between searching a single segment vs multisegments for these things, we already knew about that - thats why you optimize.&lt;/p&gt;

&lt;p&gt;Even when we search each individual indexsearcher with a single hit queue (this patch), we have to load the field cache for each segment and do a seek, the same as the old method with the multireader. One seek for each reader for each term.&lt;/p&gt;

&lt;p&gt;However, it still appears that we get to do WAY fewer seeks this way - for my last example, maybe like 40000 seeks. Quite a bit better than 1.5 million. But why?&lt;/p&gt;

&lt;p&gt;Perhaps its because we can use only the terms from each segment. Then, rather than num readers X total unique terms seeks, you have the sum of unique terms per index seeks. That could count for a lot of saved seeks, but I am not sure that it accounts for all of them (1.5 mil to 40,000 is quite the drop). Beyond all the saved seeks though, I imagine its more efficient to hit the same reader n times, than to hit each reader round robin n times. Something makes me think there is something else that allows us to avoid seeks, but not sure what yet...&lt;/p&gt;</comment>
                    <comment id="12664948" author="mikemccand" created="Sun, 18 Jan 2009 11:11:09 +0000"  >
&lt;blockquote&gt;&lt;p&gt;As we call next on MultiTermDocs it will get a TermDocs for each Reader and call seek to get to the Term. The seek appears pretty slow, and we do it for the number of Readers x the number of Terms to be loaded.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right &amp;#8211; the uninverting we do to populate the FieldCache is very&lt;br/&gt;
costly through MultiReader for fields that are mostly unique String&lt;br/&gt;
(eg a title field, or a &quot;primary key&quot; id field, etc.).&lt;/p&gt;

&lt;p&gt;Enum type fields (like country) don&apos;t have this problem (1.0 sec vs&lt;br/&gt;
0.6 sec to populate FieldCache through MultiReader for the 100 segment&lt;br/&gt;
index).&lt;/p&gt;

&lt;p&gt;But, with this change, we sidestep this problem for Lucene&apos;s core, but&lt;br/&gt;
for apps that directly load FieldCache for the MultiReader the problem&lt;br/&gt;
is still there.&lt;/p&gt;

&lt;p&gt;Once we have column stride fields (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1231&quot; title=&quot;Column-stride fields (aka per-document Payloads)&quot;&gt;&lt;del&gt;LUCENE-1231&lt;/del&gt;&lt;/a&gt;) it should then be far&lt;br/&gt;
faster to load the FieldCache for unique String fields.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;While there is a big difference between searching a single segment vs multisegments for these things, we already knew about that - thats why you optimize.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, but for realtime search you don&apos;t have the luxury of&lt;br/&gt;
optimizing.  This patch makes warming time after reopen much faster&lt;br/&gt;
for a many-segment index for apps that use FieldCache with mostly unique String&lt;br/&gt;
fields.&lt;/p&gt;</comment>
                    <comment id="12664965" author="markrmiller@gmail.com" created="Sun, 18 Jan 2009 14:06:30 +0000"  >&lt;p&gt;I think its pretty costly even for non id type fields. In your enum case, their are what, 50 unique  values? Even still, you are seeing like a 40% diff, but small enough times to not matter.&lt;/p&gt;

&lt;p&gt;My test example has 20,000 unique terms for 600,000 documents (lots of overlap, 2-8 char strings, 1-9, I think), so quite a bit short of a primary key - but it still was WAY faster with the new method.&lt;/p&gt;

&lt;p&gt;Old method non optimized, 79 segments - 1.5 million seeks, WAY slow.&lt;br/&gt;
Old method, optimized, 1 segment - 20,000 seeks, pretty darn fast.&lt;br/&gt;
New method, non optimized, 79 segments - 40,000 seeks, pretty darn fast.&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;While there is a big difference between searching a single segment vs multisegments for these things, we already knew about that - thats why you optimize.&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;Right, but for realtime search you don&apos;t have the luxury of&lt;br/&gt;
optimizing. This patch makes warming time after reopen much faster&lt;br/&gt;
for a many-segment index for apps that use FieldCache with mostly unique String&lt;br/&gt;
fields.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, I got you - I know we can&apos;t optimize. I was just realizing that explaining why 100 segments was so slow was not explaining why the new method on 100 segments was so fast. I still don&apos;t think I fully have why that is. I don&apos;t think getting to use the unique terms at each segment saves enough seeks for what I am seeing. Especially in this test case, the terms should be pretty evenly distributed across segments...&lt;/p&gt;</comment>
                    <comment id="12664979" author="mikemccand" created="Sun, 18 Jan 2009 16:36:50 +0000"  >
&lt;blockquote&gt;&lt;p&gt;Even still, you are seeing like a 40% diff, but small enough times to not matter. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, good point.&lt;/p&gt;

&lt;p&gt;I think the massive slowness of iterating through all terms &amp;amp; docs&lt;br/&gt;
from a MultiTermEnum/Docs may come from asking the N-1 SegmentReaders&lt;br/&gt;
to seek to a non-existent (for them) term.&lt;/p&gt;

&lt;p&gt;Ie when we ask MultiTermDocs to seek to a unique title X, only the&lt;br/&gt;
particular segment that title X comes from actually has it, whereas&lt;br/&gt;
the others do a costly seek to the index term just before it then scan&lt;br/&gt;
to look for the non-existent term, and then repeat that for the next&lt;br/&gt;
title, etc.&lt;/p&gt;

&lt;p&gt;In fact this probably causes the underlying buffer in&lt;br/&gt;
BufferedIndexReader to get reloaded many times whenever we cross a&lt;br/&gt;
boundary (ie, we keep flipping between buffer N and N+1, then back to&lt;br/&gt;
N then N+1 again, etc.) &amp;#8211; maybe that&apos;s the source massive slowness?&lt;/p&gt;

&lt;p&gt;BTW I think this change may also speed up Range/PrefixQuery as well.&lt;/p&gt;</comment>
                    <comment id="12664983" author="yseeley@gmail.com" created="Sun, 18 Jan 2009 16:58:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;think the massive slowness of iterating through all terms &amp;amp; docs from a MultiTermEnum/Docs may come from asking the N-1 SegmentReaders to seek to a non-existent (for them) term.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ve seen cases where the MultiTermEnum was the bottleneck (compared to the MultiTermDocs) when iterating over all docs for all terms in a field.  But quickly looking at the code, MultiTermEnum.next() looks pretty efficient.&lt;/p&gt;</comment>
                    <comment id="12664984" author="markrmiller@gmail.com" created="Sun, 18 Jan 2009 17:20:20 +0000"  >&lt;p&gt;My previous results had a few oddities going with them (I was loosely playing around). Being a little more careful, here is an example of the difference, and the hotspots. Timings are probably not completely comparable as my comp couldnt keep up profiling the second version very well - its much slower without profiling as well though:&lt;/p&gt;

&lt;p&gt;Index is 600000 docs, 46 segments&lt;/p&gt;

&lt;p&gt;Load the fieldcache on one multireader&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;time&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;invocations&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FieldCacheImpl.createValue&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;156536(98%)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MultiTermDocs.next()&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;148499(93.5%)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;621803&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;MutliTermDocs(int)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;140397(88.4%)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1002938&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SegmentTermDocs.seek(Term)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;138332(87.1%)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1002938&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;load the fieldcache on each sub reader of the multireader, one at a time&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;method&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;time&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;invocations&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;FieldCacheImpl.createValue&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7815(80.4%)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;46&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SegmentTermDocs.next()&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3315(34.1%)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;642046&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SegmentTermEnum.next()&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1936(19.9%)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;42046&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;SegmentTermDocs.seek(TermEnum)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;874(9%)&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;42046&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;



&lt;p&gt;&lt;b&gt;edit&lt;/b&gt;&lt;br/&gt;
wrong values&lt;/p&gt;


</comment>
                    <comment id="12664988" author="mikemccand" created="Sun, 18 Jan 2009 18:04:58 +0000"  >&lt;blockquote&gt;
&lt;p&gt;In fact this probably causes the underlying buffer in&lt;br/&gt;
BufferedIndexReader to get reloaded many times whenever we cross a&lt;br/&gt;
boundary&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;OK I was wrong about this &amp;#8211; there is logic in TermInfosReader.get to not go backwards to the last index term.  So we are in fact reading each tis file sequentially...&lt;/p&gt;</comment>
                    <comment id="12665008" author="markrmiller@gmail.com" created="Sun, 18 Jan 2009 22:27:08 +0000"  >&lt;p&gt;Okay, I think I have it. I tried to count the terms per segment by getting a term enum and looping through it for each sub reader, but something must have been off with that count. Taking a second look with checkindex, and all of the docs / terms are piled into the first couple segments - the rest are a long tail with few terms. So it makes sense then - for every segment with few terms in it, all of the unique terms for the whole index get checked against it. A segment with even 1 term will be hit against for every unique term in the whole index. Thats what was happening in this case, as its like a logarithmic drop. I&apos;ll try playing around some more with less of a thin tail end of segments, but I guess that is enough to explain the drop in seeks in this case.&lt;/p&gt;</comment>
                    <comment id="12665102" author="mikemccand" created="Mon, 19 Jan 2009 11:24:48 +0000"  >&lt;p&gt;I&apos;m working on another iteration of this patch, cleaning things up, adding javadocs, etc., in preparation for committing...&lt;/p&gt;</comment>
                    <comment id="12665252" author="michaelbusch" created="Mon, 19 Jan 2009 22:13:48 +0000"  >&lt;p&gt;Mark and Mike,&lt;/p&gt;

&lt;p&gt;this issue and the patch are amazingly long and catching up here after vacation is pretty hard. Maybe you could update the description of this issue with a summary (maybe a bullet list?) that describes the main goals and changes here? That would be great...&lt;/p&gt;</comment>
                    <comment id="12665260" author="markrmiller@gmail.com" created="Mon, 19 Jan 2009 22:48:40 +0000"  >&lt;p&gt;Here is a start at a better summary. It could be improved.&lt;/p&gt;</comment>
                    <comment id="12665277" author="markrmiller@gmail.com" created="Mon, 19 Jan 2009 23:15:28 +0000"  >&lt;p&gt;Okay, its not a handbook, but this should be a much better summary. Hopefully I didnt miss anything too major.&lt;/p&gt;</comment>
                    <comment id="12665953" author="mikemccand" created="Wed, 21 Jan 2009 20:14:00 +0000"  >
&lt;p&gt;OK I made a bunch of small fixes.&lt;/p&gt;

&lt;p&gt;With this patch there is one back-compat test failing&lt;br/&gt;
(TestScorerPerf), because it seems to assume that a searcher on an&lt;br/&gt;
index with 0 segments will call Scorer.collect(HitCollector).  We used&lt;br/&gt;
to do so, but no longer as of this patch, and I don&apos;t think it&apos;s a&lt;br/&gt;
reasonable assumption, so I plan to commit a small fix to the test on&lt;br/&gt;
the back compat branch (and trunk) to add a single empty doc to the&lt;br/&gt;
index.&lt;/p&gt;

&lt;p&gt;One thing worries me: we changed TopDocCollector to subclass&lt;br/&gt;
MultiReaderHitCollector instead of HitCollector, which means it&lt;br/&gt;
(TopDocCollector) now tracks docBase.  But this means subclasses of&lt;br/&gt;
TopDocCollector will suddenly see the not-rebased docID passed to&lt;br/&gt;
their collect methods, resulting in a hard to detect bug for the app.&lt;/p&gt;

&lt;p&gt;Maybe we should leave TopDocCollector how it was, and make a new&lt;br/&gt;
TopDocCollector (any name suggestion?) that subclasses from&lt;br/&gt;
MultiReaderHitCollector?&lt;/p&gt;

&lt;p&gt;Changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Renamed StringOrdValOnDem2Comparator --&amp;gt; StringOrdValComparator;&lt;br/&gt;
    commented out the other String*Comparator except for StringVal&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Switched over to sorted sub-readers for all searching in&lt;br/&gt;
    IndexSearcher&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Moved sub-reader sorting to IndexSearcher&apos;s ctor&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Also removed SortField.STRING* except for STRING (uses&lt;br/&gt;
    StringOrdValComparator) and STRING_VAL (uses StringValComparator)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Changed FieldComparatorSource from interface --&amp;gt; abstract class;&lt;br/&gt;
    removed Serializable&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Moved the &quot;set legacy sort when using legacy custom sort&quot; logic&lt;br/&gt;
    into SortField out of IndexSearcher&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed TimeLimitedCollector, ParallelMultiSearcher, MultiSearcher&lt;br/&gt;
    to &quot;pass down&quot; MultiReaderHitCollector if that&apos;s what they were&lt;br/&gt;
    passed in, else wrap the HitCollector&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added test in TestSort to test FieldComparatorSource (custom&lt;br/&gt;
    sort)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Addressed/removed all nocommits, removed dead code&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added some javadocs; removed unused imports&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed whitespace&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added entries to CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12666163" author="markrmiller@gmail.com" created="Thu, 22 Jan 2009 15:02:30 +0000"  >&lt;p&gt;Nice work Mike - pretty polished. I&apos;ve spent a little time looking it over, but I&apos;m going to look more tonight. Everything looking pretty good to me.&lt;/p&gt;

&lt;p&gt;Not sure what to name that new class, but here are some ideas:&lt;/p&gt;

&lt;p&gt;TopScoreDocCollector&lt;br/&gt;
TopHitCollector&lt;br/&gt;
TopResultCollector&lt;br/&gt;
TopMatchCollector&lt;br/&gt;
TopCollector&lt;br/&gt;
TopScoreCollector&lt;/p&gt;

&lt;p&gt;Could be a low score, so that last one is odd, but I guess the low would kind of be the top...&lt;br/&gt;
&lt;b&gt;edit&lt;/b&gt;&lt;br/&gt;
nevermind...I was thinking lowest score could be considered top match, but it wouldnt be the case with this hitcollector implementation, so I guess it makes as much sense as any of the others.&lt;/p&gt;
</comment>
                    <comment id="12666509" author="mikemccand" created="Fri, 23 Jan 2009 11:59:28 +0000"  >&lt;p&gt;OK I named it &quot;TopScoreDocCollector&quot; and left TopDocCollector as it was.  New patch attached.&lt;/p&gt;

&lt;p&gt;I think this is finally ready to commit!  I&apos;ll wait a few days for any comments...&lt;/p&gt;</comment>
                    <comment id="12666538" author="markrmiller@gmail.com" created="Fri, 23 Jan 2009 13:24:06 +0000"  >&lt;p&gt;I went over all of the diffs for a while last night - I didn&apos;t see anything that seemed worth putting up a patch for. All of the tweaks, fixes, polish looks great to me. All tests also passing for me.&lt;/p&gt;

&lt;p&gt;+1 on committing in a few days barring any objections.&lt;/p&gt;</comment>
                    <comment id="12666574" author="thetaphi" created="Fri, 23 Jan 2009 15:54:43 +0000"  >&lt;p&gt;Hi Michael &amp;amp; Mike,&lt;br/&gt;
great work. I patched my tree and compiled, no problems. One test failed with the following exception:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;testcase classname=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.lucene.benchmark.quality.TestQualityRun&quot;&lt;/span&gt; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;testTrecQuality&quot;&lt;/span&gt; time=&lt;span class=&quot;code-quote&quot;&gt;&quot;64.656&quot;&lt;/span&gt;&amp;gt;
  &amp;lt;error type=&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.NullPointerException&quot;&lt;/span&gt;&amp;gt;java.lang.NullPointerException
	at org.apache.lucene.benchmark.byTask.feeds.ReutersDocMaker.getNextDocData(ReutersDocMaker.java:112)
	at org.apache.lucene.benchmark.byTask.feeds.BasicDocMaker.makeDocument(BasicDocMaker.java:98)
	at org.apache.lucene.benchmark.byTask.tasks.AddDocTask.setup(AddDocTask.java:61)
	at org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:89)
	at org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
	at org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:122)
	at org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
	at org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:141)
	at org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:122)
	at org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:92)
	at org.apache.lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java:246)
	at org.apache.lucene.benchmark.byTask.Benchmark.execute(Benchmark.java:73)
	at org.apache.lucene.benchmark.byTask.TestPerfTasksLogic.execBenchmark(TestPerfTasksLogic.java:455)
	at org.apache.lucene.benchmark.quality.TestQualityRun.createReutersIndex(TestQualityRun.java:173)
	at org.apache.lucene.benchmark.quality.TestQualityRun.testTrecQuality(TestQualityRun.java:56)
  &amp;lt;/error&amp;gt;
&amp;lt;/testcase&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am not sure if this failing test have anything to do with the patch.&lt;/p&gt;

&lt;p&gt;I then tested the resulting lucene-core.jar as a drop-in-replacement for my big portal (www.pangaea.de) - as we are waiting for the optimized reopen with sorted search results here since months. In my test environment I got no errors/exception etc. After tests, I set it online on my productive system (I will look into the error logs of the webserver for exceptions).&lt;/p&gt;

&lt;p&gt;The speed increase of a sorted search after a reopen of the index (600,000 docs), that only added some documents into a new cfs segment, is incredible. In the past, the warmup for filling the field cache was about 3 seconds - now it shows up without any recognizable time. So no warmup after reopen is needed anymore.&lt;/p&gt;

&lt;p&gt;One thing I noticed when compiling my code against the new lucene-core.jar:&lt;br/&gt;
Top(Field)Docs deprecated the method getMaxScore(). Why is this so? To display search results with a score normalized to 1.0, you need to divide by the maximum score. The docs say, you should implement your own HitCollector (why that, I want to use TopDocs?), but why does TopDocs deprecate the maximum score? OK, for relevance/score sorted TopDocs, this is no problem, as the maximum score is in ScoreDoc&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, but for docs sorted by fields (which extends TopFieldDoc), you need the max score. If you have generic search code that does not distinguish between TopDocs and TopFieldDocs, the generic code is to divide by TopDocs.getMaxScore().&lt;/p&gt;

&lt;p&gt;I am happy, +1 for commiting. But let getMaxScore live after Lucene 3.0!&lt;/p&gt;</comment>
                    <comment id="12666580" author="mikemccand" created="Fri, 23 Jan 2009 16:15:50 +0000"  >
&lt;blockquote&gt;&lt;p&gt;One test failed with the following exception: &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Could you try removing your contrib/benchmark/work directory and see&lt;br/&gt;
if the test then passes?  I&apos;ve seen similar exceptions in the past where&lt;br/&gt;
somehow the reuters docs weren&apos;t properly unpacked.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In my test environment I got no errors/exception etc. After tests, I set it online on my productive system (I will look into the error logs of the webserver for exceptions).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s good to hear!  Please report back if you get excetpions in the&lt;br/&gt;
production system... (and thanks for that vote of confidence!).&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In the past, the warmup for filling the field cache was about 3 seconds - now it shows up without any recognizable time. So no warmup after reopen is needed anymore.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Excellent!  This was the primary (original) goal here...&lt;/p&gt;

&lt;p&gt;Speedup on warming should be even better when you sort by textual&lt;br/&gt;
fields that have a highish number of unique terms.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;OK, for relevance/score sorted TopDocs, this is no problem, as the maximum score is in ScoreDoc&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;, but for docs sorted by fields (which extends TopFieldDoc), you need the max score. If you have generic search code that does not distinguish between TopDocs and TopFieldDocs, the generic code is to divide by TopDocs.getMaxScore().&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;OK I agree we should un-deprecate this and keep it; I&apos;ll do that.&lt;/p&gt;

&lt;p&gt;Thanks for reviewing this Uwe!&lt;/p&gt;</comment>
                    <comment id="12666597" author="thetaphi" created="Fri, 23 Jan 2009 16:55:30 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;One test failed with the following exception: &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Could you try removing your contrib/benchmark/work directory and see&lt;br/&gt;
if the test then passes? I&apos;ve seen similar exceptions in the past where&lt;br/&gt;
somehow the reuters docs weren&apos;t properly unpacked.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Test passes now, sorry for the false alarm.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Speedup on warming should be even better when you sort by textual fields that have a highish number of unique terms.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I was looking after the initial warmup, but noticed no difference. Maybe the string field I used was not distinct enough. What is a good number for a noticeable speed improve (50% distinct terms?).&lt;/p&gt;

&lt;p&gt;During reviewing my TrieRangeQuery/-Filter code, I noticed, that TrieRangeFilter.getDocIdSet() is executed separately for each segment now (this is clear to me). The test case should also return the number of terms visited during the split of the trie range on stdout. As each segment was searched separate, the statistics about terms was incorrect (because the range statistics were reset on each getDocIdSet() call). I changed the test case to optimize the index before testing the TrieRangeQuery to have only one segment, to show the real trie range split stats.&lt;/p&gt;</comment>
                    <comment id="12666601" author="markrmiller@gmail.com" created="Fri, 23 Jan 2009 17:05:42 +0000"  >&lt;blockquote&gt;&lt;p&gt;I was looking after the initial warmup, but noticed no difference. Maybe the string field I used was not distinct enough. What is a good number for a noticeable speed improve (50% distinct terms?).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hes not saying after the warm up, but that the warm up should be faster based on that.&lt;/p&gt;

&lt;p&gt;Its because of this:&lt;/p&gt;

&lt;p&gt;The old way, if you had 5 segments with unique terms distributions of 50,000, 6000, 6000, 5, 5, then for the old way, we would try to load all 62,010 terms for every segment - 62,010 x 5 -310,050.&lt;/p&gt;

&lt;p&gt;With the new way, we load 50,000 terms for the first, 6000 for the next, then 6000, then 5 and 5: total of 62,010.&lt;/p&gt;

&lt;p&gt;Even though most of the 62,010 wont be found in the 5 term segment, it still takes a long time to check them all. So the more unique terms and the more segments, the worse the problem got.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;edit&lt;/b&gt;&lt;br/&gt;
little fix on those numbers&lt;/p&gt;</comment>
                    <comment id="12666609" author="thetaphi" created="Fri, 23 Jan 2009 17:19:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hes not saying after the warm up, but that the warm up should be faster based on that.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I meant not &quot;looking &lt;b&gt;after&lt;/b&gt; the initial warmup&quot;, I meant &quot;looking &lt;b&gt;for&lt;/b&gt; the initial warmup&quot; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. The speed difference for the initial warmup was neglectible for my index (not optimized). But I did not know, how many segments and terms the index really had. I can find this out for a better test-case here. I keep you informed.&lt;/p&gt;</comment>
                    <comment id="12666673" author="mikemccand" created="Fri, 23 Jan 2009 19:49:38 +0000"  >
&lt;p&gt;New patch:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Un-deprecate TopDocs.get/setMaxScore&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Made IndexSearcher.sortSubReaders protected so a subclass can&lt;br/&gt;
    change it&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added logic in IndexSearcher to recursively expand sub-readers, so&lt;br/&gt;
    eg a MultiReader containing several MultiSegmentReaders would&lt;br/&gt;
    visit the SegmentReaders one by one.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Small javadoc fixes&lt;/li&gt;
&lt;/ul&gt;

</comment>
                    <comment id="12666732" author="thetaphi" created="Fri, 23 Jan 2009 21:56:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;Un-deprecate TopDocs.get/setMaxScore &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Fine, now my code compiles without deprecation warnings.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Added logic in IndexSearcher to recursively expand sub-readers, so eg a MultiReader containing several MultiSegmentReaders would visit the SegmentReaders one by one. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is even better, when I looked into the code, I was thinking about that, too. I have portals consisting of many separate indexes, concenated with MultiReader. With your new patch, the Searcher will use all readers downto the lowest, single segment of each index.&lt;/p&gt;

&lt;p&gt;By the way: No warnings or exceptions here until now.&lt;/p&gt;</comment>
                    <comment id="12666785" author="thetaphi" created="Fri, 23 Jan 2009 23:38:58 +0000"  >&lt;p&gt;Hi again,&lt;br/&gt;
I found a small problem with getSequentialReaders() and your recursion. In my opinion, the whole problem is the way, how getSequentialReaders() is defined in IndexReader.&lt;/p&gt;

&lt;p&gt;First the problem:&lt;br/&gt;
If you create an MultiReader consisting of only one IndexReader (this can be the case if you supply 3 indexes in a user interface and the user can check them for searching. If the user only checks one, the MultiReader will contain one). The recursion in IndexSearcher.gatherSubReaders() stops, when the count is 1. If this one reader is a unoptimized index (a MultiSegmentReader), the sub-readers are not gathered.&lt;/p&gt;

&lt;p&gt;In my opinion, I would do it in another way:&lt;br/&gt;
a) rename getSequentialReaders() into getSubReaders(). IndexReader.getSubReaders returns an empty array or null (because it has no sub readers). Multi(Segment)Reader returns the sub-readers.&lt;br/&gt;
b) gatherSubReaders then looks like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void gatherSubReaders(List allSubReaders, IndexReader r) {
    IndexReader[] subReaders = r.getSubReaders();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (subReaders == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || subReaders.length == 0) {
      allSubReaders.add(r);
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
      &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i=0;i&amp;lt;subReaders.length;i++) {
        gatherSubReaders(allSubReaders, subReaders[i]);
      }
    }
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In my opinion, this is the cleaner way. Returning a one-entry-array containing itsself in getSequentialReader() is not clean and can lead to endless loops if used wrongly.&lt;/p&gt;</comment>
                    <comment id="12666790" author="mikemccand" created="Fri, 23 Jan 2009 23:48:51 +0000"  >&lt;p&gt;Excellent!  I like that solution.  I&apos;ll make that change.&lt;/p&gt;</comment>
                    <comment id="12666791" author="mikemccand" created="Fri, 23 Jan 2009 23:50:16 +0000"  >&lt;p&gt;Though... I think I still like getSequentialReaders?  EG, some readers might have subreaders that are not &quot;sequential&quot;, eg ParallelReader already defines getSubReaders() but we cannot treat them sequentially.&lt;/p&gt;</comment>
                    <comment id="12666793" author="mikemccand" created="Fri, 23 Jan 2009 23:54:27 +0000"  >&lt;p&gt;And... if an empty list is returned I think that should mean this reader has no sub-readers, ie, it can be skipped?  EG a MultiSegmentReader with 0 segments.&lt;/p&gt;

&lt;p&gt;So null --&amp;gt; I cannot be split into sub-readers; empty array --&amp;gt; I am a null reader; array.length &amp;gt; 0 --&amp;gt; I do have sequential sub-readers?&lt;/p&gt;</comment>
                    <comment id="12666794" author="thetaphi" created="Fri, 23 Jan 2009 23:56:44 +0000"  >&lt;p&gt;You are right, I noticed that when I started to prepared a patch and wondered about failed tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; The name-clash and backwards compatibility needs this. So getSequentialReaders() or getSequentialSubReaders() is ok. With the same name, a ParallelReader used in a IndexSearcher would crash the whole thing.&lt;/p&gt;</comment>
                    <comment id="12666795" author="thetaphi" created="Fri, 23 Jan 2009 23:57:57 +0000"  >&lt;p&gt;by the way: The package private method getSubReaders in MultiSegmentReader can be removed, it is not used in the test (which uses getSequentialReader).&lt;/p&gt;</comment>
                    <comment id="12666801" author="thetaphi" created="Sat, 24 Jan 2009 00:06:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;So null --&amp;gt; I cannot be split into sub-readers; empty array --&amp;gt; I am a null reader; array.length &amp;gt; 0 --&amp;gt; I do have sequential sub-readers?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is a good optimization. If a MultiReader would return null instead of an empty array, it wouldn&apos;t be a problem (the empty reader would be searched with no results). But returning an empty array is better in this case. So gatherSubReaders() should only check for (null) and then add the parent reader itsself to the List and in all other cases do the recursion.&lt;/p&gt;</comment>
                    <comment id="12666805" author="mikemccand" created="Sat, 24 Jan 2009 00:19:38 +0000"  >&lt;p&gt;OK I will rename to getSequentialSubReaders, with the semantics above.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;by the way: The package private method getSubReaders in MultiSegmentReader can be removed, it is not used in the test (which uses getSequentialReader).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, but then &quot;ant test-tag&quot; fails to compile.  But I agree, we should fix it (and I&apos;ll commit the fix to back-compat branch at the same time) and MultiReader&apos;s getSubReaders too.  Probably we should plant tags along the back-compat branch and reference that tag in build.xml, this way if others have a checkout ant run &quot;ant test-tag&quot; they won&apos;t see compile failures if they haven&apos;t yet updated this commit.  I&apos;ll do that.&lt;/p&gt;</comment>
                    <comment id="12666878" author="mikemccand" created="Sat, 24 Jan 2009 10:59:51 +0000"  >&lt;p&gt;New patch.  I&apos;m attaching the actual patch plus the &quot;back compat&quot;&lt;br/&gt;
changes patch.  In order to run with these patches you should 1) run&lt;br/&gt;
&quot;ant test-tag&quot; so it checks out the back-compat branch under &quot;tags&quot;,&lt;br/&gt;
2) apply the main patch, 3) apply the back-compat patch on your&lt;br/&gt;
tags/... sources, then run &quot;ant test test-tag&quot;.&lt;/p&gt;

&lt;p&gt;Changes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Renamed to getSequentialSubReaders, which returns null (use me&lt;br/&gt;
    directly), empty array (I am a null reader), or non-empty array (I&lt;br/&gt;
    do have sub-readers)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Removed the &quot;for testing&quot; package private&lt;br/&gt;
    Multi*Reader.getSubReaders methods since they are the same as&lt;br/&gt;
    getSequentialSubReaders.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12666886" author="thetaphi" created="Sat, 24 Jan 2009 11:18:26 +0000"  >&lt;p&gt;Hi Mike,&lt;/p&gt;

&lt;p&gt;looks good. I did not yet test the backwards compat one. I forget yesterday to add one other note:&lt;br/&gt;
in sortSubReaders is an unneeded System.arraycopy(). This was needed before, when you did not have the List for collecting the subreaders. Now the array is coped by List.toArray() and then again copied by System.arraycopy:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    List subReadersList = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList();
    gatherSubReaders(subReadersList, reader);
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; IndexReader[] subReaders = (IndexReader[]) subReadersList.toArray(indexReaderZeroArray);
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; length = subReaders.length;
    sortedSubReaders = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IndexReader[length];
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.arraycopy(subReaders, 0, sortedSubReaders, 0,
                     length);
    sortedStarts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[length];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;More efficient would be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    List subReadersList = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList();
    gatherSubReaders(subReadersList, reader);
    sortedSubReaders = (IndexReader[]) subReadersList.toArray(indexReaderZeroArray);
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; length = sortedSubReaders.length;
    sortedStarts = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[length];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I did not create a patch, because I do not want to mix all changes alltogether with yours, I think it is simplier to change it at your checkout.&lt;/p&gt;

&lt;p&gt;And: the casts to MultiSegmentReader in the TestIndexReopen are not needed anymore, as every IndexReader has getSequentialSubReaders().&lt;/p&gt;

&lt;p&gt;I think, it is perfect now! +1 for commit!&lt;/p&gt;</comment>
                    <comment id="12666889" author="mikemccand" created="Sat, 24 Jan 2009 11:26:50 +0000"  >&lt;p&gt;Excellent &amp;#8211; new patch with those fixes.  Thanks for reviewing Uwe!&lt;/p&gt;</comment>
                    <comment id="12666901" author="thetaphi" created="Sat, 24 Jan 2009 12:19:55 +0000"  >&lt;p&gt;Now, I cannot find any other improvements.&lt;/p&gt;

&lt;p&gt;Just a comment for discussion:&lt;br/&gt;
In principle, the MultiSearcher is obsolete now. Maybe we can deprecate it and remove it in 3.0. The hint is: Use IndexSearcher with a MultiReader instead.&lt;/p&gt;

&lt;p&gt;Only ParallelMultiSearcher is of use now, but I am not sure how to keep it alive (maybe as a ParallelIndexSearcher inherited from IndexSearcher, that does the searches of the bigger segments in parallel. Parallel searching the smaller segments is of no use).&lt;/p&gt;</comment>
                    <comment id="12667326" author="cutting" created="Mon, 26 Jan 2009 17:52:04 +0000"  >&lt;p&gt;&amp;gt; In principle, the MultiSearcher is obsolete now.&lt;/p&gt;

&lt;p&gt;It&apos;s still useful with RemoteSearchable, no?  That was the original motivating case for MultiSearcher.  While the RMI-based RemoteSearchable might not be industrial-strength, it does serve as a placeholder for distributed search.  We&apos;d like the Lucene APIs to be able to gracefully support distributed search, and I think that requires MultiSearcher.&lt;/p&gt;</comment>
                    <comment id="12667344" author="thetaphi" created="Mon, 26 Jan 2009 18:30:36 +0000"  >&lt;p&gt;Good comment, you are right! I forget the remote application. Nevertheless, for local-only applications, the new IndexSearcher is preferable over a MultiSearcher with separate IndexSearchers for each index.&lt;/p&gt;

&lt;p&gt;An improvement of the current ParallelMultiSearcher could be, as mentioned before, to use the new sorting by doc count of all subreaders implemented by gatherSubReaders in the new IndexSearcher together with a maxThreads property. The new ParallelIndexSearcher could spawn max threads for the first (and biggest) n index readers in the list and one for the rest. The search could then done in parallel. This solves the problem of the current ParallelMultiSearcher spawning too many threads (because there is no limitation). The new one could only parallelize the search inside bigger indexes (this is just an idea). Note: This ParallelIndexSearcher would not get separate Searchables as c&apos;tor parameter, but one IndexReader like IndexSearcher. The parallelization is only done based on all sub-readers. The only problem with parallelization is that the MultiReaderHitCollector must be synchronized in some way.&lt;/p&gt;</comment>
                    <comment id="12667553" author="jasonrutherglen" created="Tue, 27 Jan 2009 02:07:28 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Uwe: &quot;An improvement of the current ParallelMultiSearcher&lt;br/&gt;
could be, as mentioned before, to use the new sorting by doc count of&lt;br/&gt;
all subreaders implemented by gatherSubReaders&quot; &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 Parallelization is important as many applications are looking for&lt;br/&gt;
reduced latency of queries, something parallelizing with multiple&lt;br/&gt;
threads guarantees (provided there is sufficient hardware).&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Uwe: &quot;The only problem with parallelization is that the MultiReaderHitCollector must be synchronized in some way.&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;True, thread locking (synchronization) definitely won&apos;t work for this.  &lt;/p&gt;</comment>
                    <comment id="12667752" author="thetaphi" created="Tue, 27 Jan 2009 18:45:21 +0000"  >&lt;p&gt;Hi Mike,&lt;br/&gt;
since last Friday, we had no problem with the new sort implementation. No exceptions from Lucene or any problems with Lucene. The sorting of results was (as far as I have seen) always correct (tested was SortField.INT, SortField.STRING). The index was updated each half hour and reopened, really great performance. There were also no errors after an optimize() and reopen again on Sunday (only that it took longer than to warmup the sorting).&lt;/p&gt;</comment>
                    <comment id="12667755" author="thetaphi" created="Tue, 27 Jan 2009 18:54:46 +0000"  >&lt;p&gt;Jason: We should open a new issue for that after this one is solved. Maybe we can create a good parallelized implementation after solving the problems with MultiReaderHitCollector (if more than one thread call setNextReader with collect calls inbetween, it would not work).&lt;/p&gt;</comment>
                    <comment id="12667774" author="mikemccand" created="Tue, 27 Jan 2009 19:44:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;since last Friday, we had no problem with the new sort implementation.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;OK, excellent.  I will commit shortly!&lt;/p&gt;</comment>
                    <comment id="12667775" author="mikemccand" created="Tue, 27 Jan 2009 19:53:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;The only problem with parallelization is that the MultiReaderHitCollector must be synchronized in some way.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think we&apos;d have to collect to separate collectors and then merge&lt;br/&gt;
(like ParallelMultiSearcher does today)?&lt;/p&gt;

&lt;p&gt;I think this (separate thread for the &quot;big&quot; segments, and one thread&lt;br/&gt;
for the &quot;long tail&quot;) would be a good approach, except I don&apos;t like&lt;br/&gt;
that the performance would depend so much on the structure of the&lt;br/&gt;
index.  EG after you&apos;ve optimized your index you&apos;d suddenly get no&lt;br/&gt;
concurrency, and presumably worse performance than when you had a few&lt;br/&gt;
big segments.&lt;/p&gt;

&lt;p&gt;Could we instead divide the index into chunks and have each thread&lt;br/&gt;
skipTo the start of its chunk?  EG if the index has N docs, and you&lt;br/&gt;
want to use M threads, each thread visits N/M docs.  If that can work&lt;br/&gt;
it should be less dependent on the index structure.&lt;/p&gt;</comment>
                    <comment id="12667791" author="mikemccand" created="Tue, 27 Jan 2009 20:17:41 +0000"  >&lt;p&gt;Committed revision 738219.  Thanks to everyone who helped out&lt;br/&gt;
here...and many thanks to Mark for working through so many iterations&lt;br/&gt;
as we explored the different approaches here!&lt;/p&gt;</comment>
                    <comment id="12668891" author="yseeley@gmail.com" created="Fri, 30 Jan 2009 15:12:24 +0000"  >&lt;p&gt;My previous comment:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I tracked down how this patch was causing Solr failures:&lt;/p&gt;

&lt;p&gt;ExternalFileField in Solr maps from a uniqueKey to a float value from a separate file.&lt;br/&gt;
There is a cache that is essentially keyed by (IndexReader,field) that gives back a float[].&lt;/p&gt;

&lt;p&gt;Any change in the index used to cause all values to be updated (cache miss because the MultiReader was a different instance). Now, since it&apos;s called segment-at-a-time, only new segments are reloaded from the file, leaving older segments with stale values.&lt;/p&gt;

&lt;p&gt;It&apos;s certainly in the very gray area... but perhaps Solr won&apos;t be the only one affected by this - maybe apps that implement security filters, etc?&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;&lt;p&gt;Yonik, why was the failure so intermittent? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It failed for others but not for me due to a Solr bug that prevented IndexReader.reopen() from being used on Windows.&lt;br/&gt;
As to why it reportedly worked for Mark when he built Lucene himself.... &amp;lt;shrug&amp;gt;... at this point perhaps testing error.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Lucene implicitly assumes that a FieldCache&apos;s arrays do not change for&lt;br/&gt;
a given segment; this is normally safe since the arrays are derived&lt;br/&gt;
from the postings in the field (which are write once).&lt;/p&gt;

&lt;p&gt;But it sounds like Solr changed that assumption, and the values in the&lt;br/&gt;
(Solr-subclass of) FieldCache&apos;s arrays are now derived from something&lt;br/&gt;
external, which is no longer write once.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Right... it used to hold in solr because nothing really operated below the MultiReader level.&lt;br/&gt;
The intention is that at the time when a new IndexReader is opened, the entire file is read.&lt;br/&gt;
This patch changes that up.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;How do you plan to fix it with Solr? It seems like, since you are&lt;br/&gt;
maintaining a private cache, you could forcefully evict entries from&lt;br/&gt;
the cache for all SegmentReaders whenever the external file has&lt;br/&gt;
changed (or a new MultiSegmentReader had been opened)?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It&apos;s not so easy... the same segment could be associated with two different active MultiReaders (with a different set of values for each).  When the scorer is created, only the SegmentReader is passed with no other context.&lt;/p&gt;</comment>
                    <comment id="12668910" author="mikemccand" created="Fri, 30 Jan 2009 16:17:57 +0000"  >&lt;p&gt;One immediate workaround would be to use the legacy searching (SortField.setUseLegacySearch) when sorting by an &quot;external file&quot; field?&lt;/p&gt;</comment>
                    <comment id="12669194" author="yseeley@gmail.com" created="Sat, 31 Jan 2009 16:19:58 +0000"  >&lt;p&gt;How about an option to deliver docs in sorted order (basically, skip the segment sort)&lt;/p&gt;</comment>
                    <comment id="12669203" author="yseeley@gmail.com" created="Sat, 31 Jan 2009 17:57:03 +0000"  >&lt;p&gt;As far as a Solr fix... the code needs more context than the IndexReader passed in.&lt;/p&gt;

&lt;p&gt;After a reopen, I could tear apart the MultiSegmentReader and create my own MultiReader, wrapping each reader.  The only real difference between the two is getVersion() and isCurrent(), right?&lt;/p&gt;</comment>
                    <comment id="12669224" author="mikemccand" created="Sat, 31 Jan 2009 19:55:47 +0000"  >&lt;p&gt;You are using oal.function.ValueSource as the interface for loading values for &quot;external file&quot; fields, right?&lt;/p&gt;

&lt;p&gt;Could you maintain a separate FieldCacheImpl, newly created each time you reopen the reader, and extend *ValueSource so that they use that private FieldCache instead of the default one?  Then, when a ValueSourceQuery is created, you&apos;d have to init it with the right private FieldCache instance corresponding to your MultiSegmentReader.  Would that work?&lt;/p&gt;</comment>
                    <comment id="12669225" author="mikemccand" created="Sat, 31 Jan 2009 19:57:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;How about an option to deliver docs in sorted order (basically, skip the segment sort) &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We could do that; would you add it to Query?&lt;/p&gt;</comment>
                    <comment id="12669227" author="mikemccand" created="Sat, 31 Jan 2009 19:59:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;After a reopen, I could tear apart the MultiSegmentReader and create my own MultiReader, wrapping each reader. The only real difference between the two is getVersion() and isCurrent(), right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That&apos;s a neat idea!  But there are other differences (eg you wouldn&apos;t be able to make changes, I think?  Because no IndexReader has the SegmentInfos?).&lt;/p&gt;</comment>
                    <comment id="12669253" author="thetaphi" created="Sat, 31 Jan 2009 21:28:28 +0000"  >&lt;p&gt;Some other idea:&lt;br/&gt;
How about adding a API to FieldCache/ExtendedFieldCache, that makes it possible to remove all cached values for a specific field name? It would remove the stale arrays of that field from each IndexReader&apos;s cache in the WeakHashMap. So it would not make a difference if the search uses one reader or each segment in separate. This would be a move forward to &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-831&quot; title=&quot;Complete overhaul of FieldCache API/Implementation&quot;&gt;LUCENE-831&lt;/a&gt;.&lt;/p&gt;</comment>
                    <comment id="12669275" author="yseeley@gmail.com" created="Sat, 31 Jan 2009 22:40:09 +0000"  >&lt;p&gt;&amp;gt; &amp;gt; How about an option to deliver docs in sorted order (basically, skip the segment sort) &lt;br/&gt;
&amp;gt; We could do that; would you add it to Query?&lt;/p&gt;

&lt;p&gt;I wouldn&apos;t want to add another field on Query...I was thinking more along the lines of adding a flag to the IndexSearcher constructor: IndexSearcher(IndexReader, boolean sortSegments) or something&lt;/p&gt;</comment>
                    <comment id="12669369" author="mikemccand" created="Sun, 1 Feb 2009 11:15:41 +0000"  >&lt;blockquote&gt;&lt;p&gt;IndexSearcher(IndexReader, boolean sortSegments) or something&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But isn&apos;t that too coarse?  (Ie, it&apos;s only very specific kinds of queries, against very specific fields, that are affected by visiting segments in reverse-size order)?&lt;/p&gt;

&lt;p&gt;Actually, how would this help fix Solr&apos;s &quot;external file&quot; field (vs the private FieldCache approach)?&lt;/p&gt;</comment>
                    <comment id="12669370" author="mikemccand" created="Sun, 1 Feb 2009 11:19:01 +0000"  >&lt;blockquote&gt;&lt;p&gt;How about adding a API to FieldCache/ExtendedFieldCache, that makes it possible to remove all cached values for a specific field name?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think maybe that&apos;s too coarse &amp;#8211; there may be situations when you want to keep both the old and the new cache around (eg, while warming is taking place, but also in cases where you don&apos;t immediately retired the old reader once a new one is reopened).&lt;/p&gt;

&lt;p&gt;It&apos;s really like Solr needs its own &quot;key&quot;, combined with the SegmentReader, when retrieving entries from FieldCache, or the ability to use a private FieldCache for certain queries (which I think is a viable solution today for *ValueSource).&lt;/p&gt;</comment>
                    <comment id="12669392" author="yseeley@gmail.com" created="Sun, 1 Feb 2009 15:38:25 +0000"  >&lt;p&gt;&amp;gt;&amp;gt; IndexSearcher(IndexReader, boolean sortSegments) or something&lt;/p&gt;

&lt;p&gt;&amp;gt; But isn&apos;t that too coarse? (Ie, it&apos;s only very specific kinds of queries, against very specific fields, that are affected by visiting segments in reverse-size order)?&lt;/p&gt;

&lt;p&gt;Actually, I think a number of applications will probably be affected (those sensitive to doc order).&lt;br/&gt;
Think about anyone using SortedVIntListBuilder, or anyone with their own hit collector that short-circuits too soon based on the assumption that docs often come in index order.  The worst thing is that they often will come in index order... and only break later on under certain circumstances.&lt;/p&gt;

&lt;p&gt;We could add a flag to methods that take a hit collector, but that would require keeping two lists of Segments (sorted and original) and corresponding bases.  It seemes cleaner to just sort or not in the constructor..... people who want both behaviors can instantiate two IndexSearcher objects.&lt;/p&gt;

&lt;p&gt;&amp;gt; Actually, how would this help fix Solr&apos;s &quot;external file&quot; field (vs the private FieldCache approach)?&lt;/p&gt;

&lt;p&gt;It&apos;s unrelated, I should have made that clearer.&lt;/p&gt;

&lt;p&gt;&amp;gt; It&apos;s really like Solr needs its own &quot;key&quot;, combined with the SegmentReader&lt;/p&gt;

&lt;p&gt;Yep.  No worries... I think I&apos;ve got this one figured out.  There are numbers of options (including thread-local too), but I&apos;m liking the sound of wrapping segment readers for general flexibility.&lt;/p&gt;</comment>
                    <comment id="12669486" author="mikemccand" created="Mon, 2 Feb 2009 01:20:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;It seemes cleaner to just sort or not in the constructor&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;OK, I agree... I&apos;ll work out a patch.&lt;/p&gt;</comment>
                    <comment id="12669489" author="yseeley@gmail.com" created="Mon, 2 Feb 2009 01:53:42 +0000"  >&lt;p&gt;My initial thought was to just add it to the most expert level constructor (i.e. avoid adding flags to every constructor):&lt;br/&gt;
  public IndexSearcher(IndexReader r, boolean sortSegments)  (or docsInOrder?)&lt;/p&gt;</comment>
                    <comment id="12669577" author="mikemccand" created="Mon, 2 Feb 2009 12:02:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;public IndexSearcher(IndexReader r, boolean sortSegments) (or docsInOrder?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds good... I added an expert ctor that takes boolean docsInOrder (attached).&lt;/p&gt;</comment>
                    <comment id="12669632" author="yseeley@gmail.com" created="Mon, 2 Feb 2009 15:39:00 +0000"  >&lt;p&gt;+1, thanks Mike!&lt;/p&gt;

&lt;p&gt;javadoc: maxDoc should be numDocs in &quot;in order of decreasing maxDoc()&quot;&lt;/p&gt;</comment>
                    <comment id="12669643" author="mikemccand" created="Mon, 2 Feb 2009 16:18:11 +0000"  >&lt;blockquote&gt;&lt;p&gt;javadoc: maxDoc should be numDocs in &quot;in order of decreasing maxDoc()&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Woops, right!  I&apos;ll fix &amp;amp; commit.  Thanks Yonik!&lt;/p&gt;</comment>
                    <comment id="12669645" author="mikemccand" created="Mon, 2 Feb 2009 16:22:12 +0000"  >&lt;p&gt;Committed revision 740021.&lt;/p&gt;</comment>
                    <comment id="12675438" author="mikemccand" created="Fri, 20 Feb 2009 18:57:32 +0000"  >&lt;p&gt;Hmm &amp;#8211; we didn&apos;t deprecate SortComparator/SortComparatorSource with this, but I think we should have?  Does that sound right?  If so I can work up a patch...&lt;/p&gt;</comment>
                    <comment id="12675900" author="mikemccand" created="Mon, 23 Feb 2009 14:00:15 +0000"  >&lt;p&gt;OK I committed the missing deprecations (Committed revision 747019).&lt;/p&gt;</comment>
                    <comment id="12675903" author="markrmiller@gmail.com" created="Mon, 23 Feb 2009 14:04:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;OK I committed the missing deprecations.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1. Thanks.&lt;/p&gt;</comment>
                    <comment id="12695577" author="jvolkman" created="Fri, 3 Apr 2009 22:05:23 +0100"  >&lt;p&gt;I&apos;m trying to create a FieldValueHitQueue outside of an IndexSearcher. One part of my code collects all results in a fashion similar to &lt;a href=&quot;http://www.gossamer-threads.com/lists/lucene/java-user/66362#66362&quot; class=&quot;external-link&quot;&gt;http://www.gossamer-threads.com/lists/lucene/java-user/66362#66362&lt;/a&gt;. At the end of my collection, I used to pass the results through a FieldSortedHitQueue of the proper size to get sorted results. The problem now is that FieldValueHitQueue takes an array of subreaders instead of one IndexReader. As far as I can tell, there&apos;s no way for me to get a proper sorted array of subreaders for an IndexReader without copying and pasting the gatherSubReaders and sortSubReaders methods from IndexSearcher. This isn&apos;t desirable, so could IndexSearcher perhaps provide some sort of getSortedSubReaders() method? Either that, or extract this functionality out into a common utility method that IndexSearcher uses.&lt;/p&gt;</comment>
                    <comment id="12695586" author="shaie" created="Fri, 3 Apr 2009 22:15:44 +0100"  >&lt;p&gt;Hi Jeremy&lt;/p&gt;

&lt;p&gt;This will be taken care of in 1575 by removing the IndexReader[] arg from TopFieldCollector. As a matter of fact, 1575 changes quite a bit the collector&apos;s API, so you might want to take a look there. Anyway, I&apos;ve run into the same issue there and realized this arg can be safely removed from TopFieldCollector as well as FieldValueHitQueue.&lt;/p&gt;</comment>
                    <comment id="12695587" author="thetaphi" created="Fri, 3 Apr 2009 22:18:11 +0100"  >&lt;p&gt;This will be changed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1575&quot; title=&quot;Refactoring Lucene collectors (HitCollector and extensions)&quot;&gt;&lt;del&gt;LUCENE-1575&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12784986" author="gunnar" created="Wed, 2 Dec 2009 20:18:48 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;This issue introduced SorterTemplate.java. Right in the header it says &quot;Borrowed from Cglib.&quot;. Unfortunately, our IP team is not able to clarify provenance on CGLib. It seems that we can&apos;t get in touch with the authors. Any help is appreciated.&lt;/p&gt;

&lt;p&gt;Is it possible to exclude that file from this patch or replace it with an alternate implementation?&lt;/p&gt;</comment>
                    <comment id="12784990" author="yseeley@gmail.com" created="Wed, 2 Dec 2009 20:30:09 +0000"  >&lt;p&gt;That&apos;s strange... looks like SorterTemplate isn&apos;t even used anywhere.  Mike, was this an accidental commit?&lt;/p&gt;</comment>
                    <comment id="12784997" author="markrmiller@gmail.com" created="Wed, 2 Dec 2009 20:59:57 +0000"  >&lt;p&gt;I originally borrowed to sort readers and starts at the same time - since then, we stopped doing that sort. We could drop it - though technically its a bw compat break now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12784999" author="rcmuir" created="Wed, 2 Dec 2009 21:01:58 +0000"  >&lt;p&gt;but isn&apos;t this code ok to borrow? &lt;a href=&quot;http://cglib.cvs.sourceforge.net/viewvc/cglib/cglib/src/proxy/net/sf/cglib/util/SorterTemplate.java?revision=1.2&amp;amp;view=markup&amp;amp;pathrev=MAIN&quot; class=&quot;external-link&quot;&gt;http://cglib.cvs.sourceforge.net/viewvc/cglib/cglib/src/proxy/net/sf/cglib/util/SorterTemplate.java?revision=1.2&amp;amp;view=markup&amp;amp;pathrev=MAIN&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12785003" author="markrmiller@gmail.com" created="Wed, 2 Dec 2009 21:06:25 +0000"  >&lt;p&gt;Sure is - but IP teams are crazy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Other stuff was likely borrowed in other cases, there just wasn&apos;t a trail like this left behind &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Even things that we have gotten software grants for don&apos;t have a trail thats easily followable always (or at all from the source code) - so essentially, we are being trusted in any case. But if you look at previous discussions that have come up about this type of thing, common sense won&apos;t win &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12785288" author="mikemccand" created="Thu, 3 Dec 2009 12:35:40 +0000"  >&lt;blockquote&gt;&lt;p&gt;originally borrowed to sort readers and starts at the same time - since then, we stopped doing that sort. We could drop it - though technically its a bw compat break now&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think, going forward, whenever we adopt some utility class like this, we should declare that it&apos;s for internal use by Lucene only, and we made it public only to use within different sub-packages in Lucene.  And that we reserve full future rights to break back compat &amp;#8211; change the APIs, change semantics of the methods, remove the class entirely.&lt;/p&gt;

&lt;p&gt;EG I&apos;ve done this with DoubleBarrelLRUCache.&lt;/p&gt;

&lt;p&gt;In this particular case, I&apos;m inclined to simply make an exception to back compat, and simply remove the class, for 3.1.  Any objections?&lt;/p&gt;</comment>
                    <comment id="12785291" author="markrmiller@gmail.com" created="Thu, 3 Dec 2009 12:43:55 +0000"  >&lt;blockquote&gt;&lt;p&gt;we should declare that it&apos;s for internal use by Lucene only&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Any objections?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not from me - the chances are slim to nil anyone is using it I bet - and if they are, they can copy it into their code base. We don&apos;t want to have to mange util classes we don&apos;t use.&lt;/p&gt;</comment>
                    <comment id="12785404" author="mikemccand" created="Thu, 3 Dec 2009 17:25:45 +0000"  >&lt;p&gt;OK I just removed SorterTemplate.java&lt;/p&gt;</comment>
                    <comment id="12925413" author="thetaphi" created="Wed, 27 Oct 2010 16:18:21 +0100"  >&lt;p&gt;Reverted the removal of SorterTemplate, its now replaced by a better implementation, only inspired by CGLIB: &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2719&quot; title=&quot;Re-add SorterTemplate and use it to provide fast ArraySorting and replace BytesRefHash sorting&quot;&gt;&lt;del&gt;LUCENE-2719&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12398067">LUCENE-1304</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12478122">LUCENE-2719</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12398643" name="LUCENE-1483-backcompat.patch" size="3812" author="mikemccand" created="Sat, 24 Jan 2009 10:59:51 +0000" />
                    <attachment id="12397224" name="LUCENE-1483-partial.patch" size="63815" author="mikemccand" created="Tue, 6 Jan 2009 20:16:43 +0000" />
                    <attachment id="12399264" name="LUCENE-1483.patch" size="6328" author="mikemccand" created="Mon, 2 Feb 2009 12:02:39 +0000" />
                    <attachment id="12398644" name="LUCENE-1483.patch" size="203051" author="mikemccand" created="Sat, 24 Jan 2009 11:26:50 +0000" />
                    <attachment id="12398642" name="LUCENE-1483.patch" size="203351" author="mikemccand" created="Sat, 24 Jan 2009 10:59:51 +0000" />
                    <attachment id="12398599" name="LUCENE-1483.patch" size="203334" author="mikemccand" created="Fri, 23 Jan 2009 19:49:38 +0000" />
                    <attachment id="12398559" name="LUCENE-1483.patch" size="203716" author="mikemccand" created="Fri, 23 Jan 2009 11:59:28 +0000" />
                    <attachment id="12398427" name="LUCENE-1483.patch" size="196851" author="mikemccand" created="Wed, 21 Jan 2009 20:13:59 +0000" />
                    <attachment id="12398118" name="LUCENE-1483.patch" size="211294" author="mikemccand" created="Fri, 16 Jan 2009 22:24:47 +0000" />
                    <attachment id="12398117" name="LUCENE-1483.patch" size="211589" author="mikemccand" created="Fri, 16 Jan 2009 22:17:15 +0000" />
                    <attachment id="12398103" name="LUCENE-1483.patch" size="223685" author="mikemccand" created="Fri, 16 Jan 2009 20:10:28 +0000" />
                    <attachment id="12397799" name="LUCENE-1483.patch" size="212445" author="mikemccand" created="Tue, 13 Jan 2009 16:23:14 +0000" />
                    <attachment id="12397435" name="LUCENE-1483.patch" size="206599" author="mikemccand" created="Thu, 8 Jan 2009 16:33:29 +0000" />
                    <attachment id="12397258" name="LUCENE-1483.patch" size="191947" author="markrmiller@gmail.com" created="Wed, 7 Jan 2009 02:42:17 +0000" />
                    <attachment id="12397080" name="LUCENE-1483.patch" size="188025" author="markrmiller@gmail.com" created="Sun, 4 Jan 2009 15:01:20 +0000" />
                    <attachment id="12397055" name="LUCENE-1483.patch" size="187014" author="markrmiller@gmail.com" created="Sun, 4 Jan 2009 01:56:43 +0000" />
                    <attachment id="12397001" name="LUCENE-1483.patch" size="187699" author="markrmiller@gmail.com" created="Thu, 1 Jan 2009 22:26:05 +0000" />
                    <attachment id="12396673" name="LUCENE-1483.patch" size="175266" author="mikemccand" created="Tue, 23 Dec 2008 13:56:53 +0000" />
                    <attachment id="12396667" name="LUCENE-1483.patch" size="174859" author="mikemccand" created="Tue, 23 Dec 2008 12:03:10 +0000" />
                    <attachment id="12396639" name="LUCENE-1483.patch" size="170973" author="mikemccand" created="Mon, 22 Dec 2008 22:48:02 +0000" />
                    <attachment id="12396629" name="LUCENE-1483.patch" size="170968" author="mikemccand" created="Mon, 22 Dec 2008 20:46:00 +0000" />
                    <attachment id="12396566" name="LUCENE-1483.patch" size="162319" author="markrmiller@gmail.com" created="Sun, 21 Dec 2008 16:52:14 +0000" />
                    <attachment id="12396357" name="LUCENE-1483.patch" size="163644" author="markrmiller@gmail.com" created="Wed, 17 Dec 2008 23:17:47 +0000" />
                    <attachment id="12396198" name="LUCENE-1483.patch" size="172135" author="markrmiller@gmail.com" created="Tue, 16 Dec 2008 15:10:30 +0000" />
                    <attachment id="12396084" name="LUCENE-1483.patch" size="110139" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 12:19:07 +0000" />
                    <attachment id="12396050" name="LUCENE-1483.patch" size="110154" author="markrmiller@gmail.com" created="Mon, 15 Dec 2008 00:52:09 +0000" />
                    <attachment id="12396018" name="LUCENE-1483.patch" size="79440" author="mikemccand" created="Sat, 13 Dec 2008 21:44:05 +0000" />
                    <attachment id="12395901" name="LUCENE-1483.patch" size="62619" author="markrmiller@gmail.com" created="Fri, 12 Dec 2008 02:56:16 +0000" />
                    <attachment id="12395854" name="LUCENE-1483.patch" size="18557" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 17:49:05 +0000" />
                    <attachment id="12395849" name="LUCENE-1483.patch" size="18557" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 17:01:04 +0000" />
                    <attachment id="12395847" name="LUCENE-1483.patch" size="18006" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 16:30:15 +0000" />
                    <attachment id="12395835" name="LUCENE-1483.patch" size="12744" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 13:47:15 +0000" />
                    <attachment id="12395828" name="LUCENE-1483.patch" size="11489" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 12:13:06 +0000" />
                    <attachment id="12395788" name="LUCENE-1483.patch" size="11489" author="mikemccand" created="Thu, 11 Dec 2008 01:56:43 +0000" />
                    <attachment id="12395777" name="LUCENE-1483.patch" size="10749" author="markrmiller@gmail.com" created="Thu, 11 Dec 2008 00:11:42 +0000" />
                    <attachment id="12395698" name="LUCENE-1483.patch" size="10766" author="markrmiller@gmail.com" created="Wed, 10 Dec 2008 00:11:31 +0000" />
                    <attachment id="12395630" name="LUCENE-1483.patch" size="12745" author="markrmiller@gmail.com" created="Tue, 9 Dec 2008 11:43:59 +0000" />
                    <attachment id="12396416" name="sortBench.py" size="6011" author="mikemccand" created="Thu, 18 Dec 2008 19:43:10 +0000" />
                    <attachment id="12396417" name="sortCollate.py" size="1658" author="mikemccand" created="Thu, 18 Dec 2008 19:43:11 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>39.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 9 Dec 2008 09:48:43 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12268</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26244</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>