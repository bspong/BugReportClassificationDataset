<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:25:04 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1144/LUCENE-1144.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1144] NPE crash in case of out of memory</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1144</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The attached class makes Lucene crash with an NPE when starting it with -Xmx10M, although there&apos;s probably an OutOfMemory problem. The stacktrace:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;br/&gt;
	at java.util.Arrays.fill(Unknown Source)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter$ByteBlockPool.reset(DocumentsWriter.java:2873)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter$ThreadState.resetPostings(DocumentsWriter.java:637)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.resetPostingsData(DocumentsWriter.java:458)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.abort(DocumentsWriter.java:423)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:2433)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:2397)&lt;br/&gt;
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1445)&lt;br/&gt;
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1424)&lt;br/&gt;
	at LuceneCrash.myrun(LuceneCrash.java:32)&lt;br/&gt;
	at LuceneCrash.main(LuceneCrash.java:19)&lt;/p&gt;

&lt;p&gt;The documents are quite big (some hundred KB each), I cannot attach them but I can send them via private mail if needed. The crash happens the first time reset() is called, after indexing 10 documents. I assume the bug is just that the error is misleading, there maybe should be an OOM error.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12386726">LUCENE-1144</key>
            <summary>NPE crash in case of out of memory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="lucenebugs@danielnaber.de">Daniel Naber</reporter>
                        <labels>
                    </labels>
                <created>Sun, 20 Jan 2008 17:09:57 +0000</created>
                <updated>Sun, 20 Jan 2008 18:38:21 +0000</updated>
                    <resolved>Sun, 20 Jan 2008 18:38:21 +0000</resolved>
                            <version>2.3</version>
                                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12560831" author="mikemccand" created="Sun, 20 Jan 2008 17:55:54 +0000"  >&lt;p&gt;Indeed, it looks likely that you hit OOM, then DocumentsWriter is&lt;br/&gt;
trying to abort, but hits the NPE while aborting.  Can you try the&lt;br/&gt;
attached patch to see if it lets you see the original OOM exception?&lt;/p&gt;</comment>
                    <comment id="12560835" author="lucenebugs@danielnaber.de" created="Sun, 20 Jan 2008 18:29:15 +0000"  >&lt;p&gt;Yes, I get the correct exception now with your patch. Thanks!&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.recyclePostings(DocumentsWriter.java:3033)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.access$0(DocumentsWriter.java:3028)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter$ThreadState$FieldData.resetPostingArrays(DocumentsWriter.java:1333)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter$ThreadState.resetPostings(DocumentsWriter.java:644)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.resetPostingsData(DocumentsWriter.java:458)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.abort(DocumentsWriter.java:423)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:2433)&lt;br/&gt;
	at org.apache.lucene.index.DocumentsWriter.addDocument(DocumentsWriter.java:2397)&lt;br/&gt;
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1445)&lt;br/&gt;
	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1424)&lt;br/&gt;
	at LuceneCrash.myrun(LuceneCrash.java:35)&lt;br/&gt;
	at LuceneCrash.main(LuceneCrash.java:19)&lt;/p&gt;</comment>
                    <comment id="12560839" author="mikemccand" created="Sun, 20 Jan 2008 18:34:08 +0000"  >&lt;p&gt;Super, thanks Daniel!&lt;/p&gt;

&lt;p&gt;I will commit to trunk &amp;amp; 2.3.  This is a low risk fix.  Keep testing!!&lt;/p&gt;</comment>
                    <comment id="12560841" author="mikemccand" created="Sun, 20 Jan 2008 18:38:21 +0000"  >&lt;p&gt;Fixed on trunk &amp;amp; 2.3.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12373626" name="LUCENE-1144.patch" size="1638" author="mikemccand" created="Sun, 20 Jan 2008 17:55:54 +0000" />
                    <attachment id="12373622" name="LuceneCrash.java" size="1227" author="lucenebugs@danielnaber.de" created="Sun, 20 Jan 2008 17:11:39 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 20 Jan 2008 17:55:54 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12601</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26585</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>