<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:19:27 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2675/LUCENE-2675.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2675] Add support for 3.0 indexes in 2.9 branch</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2675</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;There was a lot of user requests to be able to read Lucene 3.0 indexes also with 2.9. This would make the migration easier. There is no problem in doing that, as the new stored fields version in Lucene 3.0 is only used to mark a segment&apos;s stored fields file as no longer containing compressed fields. But index format did not really change. This patch simply allows FieldsReader to pass a Lucene 3.0 version number, but still writes segments in 2.9 format (as you could suddenly turn on compression for added documents).&lt;/p&gt;

&lt;p&gt;I added ZIP files for 3.0 indexes for TestBackwards. Without the patch it does not pass, as FieldsReader complains about incorrect version number (although it could read the file easily). If we would release maybe a 2.9.4 release of Lucene we should include that patch.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12475241">LUCENE-2675</key>
            <summary>Add support for 3.0 indexes in 2.9 branch</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Sep 2010 22:11:24 +0100</created>
                <updated>Wed, 1 Dec 2010 14:50:00 +0000</updated>
                    <resolved>Fri, 29 Oct 2010 14:13:09 +0100</resolved>
                            <version>2.9</version>
                <version>2.9.1</version>
                <version>2.9.2</version>
                <version>2.9.3</version>
                                <fixVersion>2.9.4</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12915492" author="rcmuir" created="Mon, 27 Sep 2010 22:26:39 +0100"  >&lt;p&gt;in my opinion this would be very confusing and set a bad precedent.&lt;/p&gt;

&lt;p&gt;I don&apos;t understand how it would make migration easier... migration backwards?&lt;/p&gt;

&lt;p&gt;Personally I think we should let things be... e.g. someone will get confused and think they &lt;br/&gt;
can open their 3.0-created index with 2.9/java 1.4 but it is a different version of Unicode, for example.&lt;/p&gt;</comment>
                    <comment id="12915496" author="thetaphi" created="Mon, 27 Sep 2010 22:37:55 +0100"  >&lt;p&gt;Forget about Java versions. Almost everybody who migrates to 3.0 already uses Java 1.5 or 1.6. The problem is during the migration phase (when you undeprecate your code) you cannot switch between both versions easily as soon as you touch an index with 3.0, it will not open anymore in 2.9, but in reality its the same index version, there is &lt;b&gt;no fileformat change&lt;/b&gt; at all! The version number is simply a marker for SegmentMerger in 3.0 that it can raw-copy documents because they do not contain compression anymore. If we would not have removed compression in 3.0, the file format would have been identical.&lt;/p&gt;

&lt;p&gt;As we declare 2.9 and 3.0 as feature-identical even in the latest version, it is not understandable to anyone why they cannot open an 3.0 index with 2.9 and vice versa. For unicode reasons you should then also disallow opening a 2.9 index with 3.0 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I got requests (even on java-user, but also from my customers) quite often about that and one user that wants to migrate to 3.0 through 2.9 again asked me today.&lt;/p&gt;

&lt;p&gt;I just repeat: The index format is identical!&lt;/p&gt;

&lt;p&gt;Maybe we have other comments, I will only commit this if we have an agreement and only if we would release 2.9.4.&lt;/p&gt;</comment>
                    <comment id="12915498" author="thetaphi" created="Mon, 27 Sep 2010 22:44:42 +0100"  >&lt;p&gt;Additionally I opened this issue, so I can point those people to this issue, so they can patch their Lucene 2.9 to do what they expect. EVen if this gets rejected somehow. I am simply tired of sending this patch out to everyone.&lt;/p&gt;</comment>
                    <comment id="12915506" author="rcmuir" created="Mon, 27 Sep 2010 23:02:24 +0100"  >&lt;blockquote&gt;&lt;p&gt;Forget about Java versions&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;well its important to me, so I won&apos;t just forget about it. Especially to users that don&apos;t know how their analysis works, &lt;br/&gt;
they do not know that java 1.4 is unicode 3.x and java 5 is unicode 4.x and harmony java5 is unicode 5.2 and java 6 is unicode 6.0. &lt;/p&gt;

&lt;p&gt;But this is even just part of the issue, i don&apos;t think we should do this. it adds too much confusion to be officially supported in any release.&lt;br/&gt;
furthermore its not like it can be duplicated with 4.0, i would be against adding 4.x index support to 3.x also, forget about in a bugfix release.&lt;br/&gt;
historically lucene has been held back by backwards compatibility, lets not throw forward compatibility into the mix.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;If we would not have removed compression in 3.0, the file format would have been identical.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;a great example of why major release shouldn&apos;t be just removal of deprecations.&lt;/p&gt;
</comment>
                    <comment id="12926226" author="mikemccand" created="Fri, 29 Oct 2010 11:10:56 +0100"  >&lt;p&gt;So, first off, Lucene&apos;s bw compat policy has never ensured this&lt;br/&gt;
&quot;reverse compat&quot;.  Promising this would have been exceptionally&lt;br/&gt;
costly, in the past.  Once a new major release &quot;kisses&quot; your index, it&lt;br/&gt;
cannot be used by older versions of Lucene.&lt;/p&gt;

&lt;p&gt;However, now with the switch to pluggable codecs in 4.0, it would be&lt;br/&gt;
conceptually possible to make a codec that ensures no change to the&lt;br/&gt;
index format, even on upgrade of the software.  And I think such a&lt;br/&gt;
codec would be reasonable to offer (we already basically have the&lt;br/&gt;
&quot;hard part&quot; done, with the preflex write codec, but it&apos;s only exposed&lt;br/&gt;
for testing).  But... nobody has stepped up to create this for&lt;br/&gt;
4.0... and it&apos;s not clear anybody will of course.&lt;/p&gt;

&lt;p&gt;That this is so trivial really is a reflection of our crazy major&lt;br/&gt;
release criteria in the past (ie nothing of consequence changes going&lt;br/&gt;
from X.9 -&amp;gt; (X+1).0!).  Of course this is now changed, ie, 4.0 is&lt;br/&gt;
changing tons from 3.x.&lt;/p&gt;

&lt;p&gt;I do appreciate the motivation for this, ie to allow an app to &quot;try&quot;&lt;br/&gt;
updating the software (Lucene 2.x -&amp;gt; 3.x) fully independently of&lt;br/&gt;
updating the index format.  It&apos;s a valid use case.&lt;/p&gt;

&lt;p&gt;Net/net I&apos;m fine with this change.  But we should advertise very&lt;br/&gt;
clearly that this is not in general promised by Lucene.  It&apos;ll be on a&lt;br/&gt;
case by case basis.  EG even if someone steps up and we make a codec&lt;br/&gt;
for 4.0 that can read/write the 3.x index format, that&apos;s still not&lt;br/&gt;
ensured going forward (unless we make a change to our back-compat&lt;br/&gt;
policy, which is a separate discussion).&lt;/p&gt;</comment>
                    <comment id="12926260" author="thetaphi" created="Fri, 29 Oct 2010 14:01:42 +0100"  >&lt;p&gt;So as Robert seems to also agree, I think I commit this and modify changes.txt to explicitely say that thisonly applys to 2.9/3.0, as it uses same codebase and same bugfix level.&lt;/p&gt;</comment>
                    <comment id="12926272" author="thetaphi" created="Fri, 29 Oct 2010 14:13:09 +0100"  >&lt;p&gt;Committed revision: 1028723&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12455755" name="index.30.cfs.zip" size="4786" author="thetaphi" created="Mon, 27 Sep 2010 22:15:28 +0100" />
                    <attachment id="12455756" name="index.30.nocfs.zip" size="8953" author="thetaphi" created="Mon, 27 Sep 2010 22:15:28 +0100" />
                    <attachment id="12455754" name="LUCENE-2675.patch" size="4054" author="thetaphi" created="Mon, 27 Sep 2010 22:15:28 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 27 Sep 2010 21:26:39 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11167</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25017</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>