<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:34:51 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3101/LUCENE-3101.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3101] TestMinimize.testAgainstBrzozowski reproducible seed OOM</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3101</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    [junit] Testsuite: org.apache.lucene.util.automaton.TestMinimize
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 3.792 sec
    [junit] 
    [junit] ------------- Standard Error -----------------
    [junit] NOTE: reproduce with: ant test -Dtestcase=TestMinimize -Dtestmethod=testAgainstBrzozowski -Dtests.seed=-7429820995201119781:1013305000165135537
    [junit] NOTE: test params are: codec=PreFlex, locale=ru, timezone=America/Pangnirtung
    [junit] NOTE: all tests run in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; JVM:
    [junit] [TestMinimize]
    [junit] NOTE: Linux 2.6.37-gentoo amd64/Sun Microsystems Inc. 1.6.0_25 (64-bit)/cpus=8,threads=1,free=294745976,total=310378496
    [junit] ------------- ---------------- ---------------
    [junit] Testcase: testAgainstBrzozowski(org.apache.lucene.util.automaton.TestMinimize):     Caused an ERROR
    [junit] Java heap space
    [junit] java.lang.OutOfMemoryError: Java heap space
    [junit]     at java.util.BitSet.initWords(BitSet.java:144)
    [junit]     at java.util.BitSet.&amp;lt;init&amp;gt;(BitSet.java:139)
    [junit]     at org.apache.lucene.util.automaton.MinimizationOperations.minimizeHopcroft(MinimizationOperations.java:85)
    [junit]     at org.apache.lucene.util.automaton.MinimizationOperations.minimize(MinimizationOperations.java:52)
    [junit]     at org.apache.lucene.util.automaton.RegExp.toAutomaton(RegExp.java:502)
    [junit]     at org.apache.lucene.util.automaton.RegExp.toAutomatonAllowMutate(RegExp.java:478)
    [junit]     at org.apache.lucene.util.automaton.RegExp.toAutomaton(RegExp.java:428)
    [junit]     at org.apache.lucene.util.automaton.AutomatonTestUtil.randomAutomaton(AutomatonTestUtil.java:256)
    [junit]     at org.apache.lucene.util.automaton.TestMinimize.testAgainstBrzozowski(TestMinimize.java:43)
    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1282)
    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1211)
    [junit] 
    [junit] 
    [junit] Test org.apache.lucene.util.automaton.TestMinimize FAILED


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
            <key id="12507264">LUCENE-3101</key>
            <summary>TestMinimize.testAgainstBrzozowski reproducible seed OOM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="selckin">selckin</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 May 2011 13:19:51 +0100</created>
                <updated>Fri, 10 May 2013 11:43:28 +0100</updated>
                    <resolved>Mon, 16 May 2011 13:16:20 +0100</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13033679" author="thetaphi" created="Sun, 15 May 2011 13:55:30 +0100"  >&lt;p&gt;Thanks! What to do?&lt;/p&gt;</comment>
                    <comment id="13033680" author="thetaphi" created="Sun, 15 May 2011 13:58:19 +0100"  >&lt;blockquote&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;14:08&amp;#93;&lt;/span&gt;	s1monw: that automaton has 94201 states&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;14:08&amp;#93;&lt;/span&gt;	s1monw: &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;14:08&amp;#93;&lt;/span&gt;	s1monw: 450 MB long[]&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;14:08&amp;#93;&lt;/span&gt;	s1monw: selckin: can you open an issue?&lt;/p&gt;&lt;/blockquote&gt;</comment>
                    <comment id="13033928" author="rcmuir" created="Mon, 16 May 2011 10:11:22 +0100"  >&lt;p&gt;an explicit test case&lt;/p&gt;</comment>
                    <comment id="13033950" author="rcmuir" created="Mon, 16 May 2011 11:13:57 +0100"  >&lt;p&gt;the problem appears to be splitblock[] and partition[]. these are using n^2 space... &lt;br/&gt;
the rest of the datastructures seem ok (either just #states or sigma * #states)&lt;/p&gt;

&lt;p&gt;these two were cut over from arraylist to bitset in revision 1026190, but it looks like they are &lt;br/&gt;
sparse and we should use a better datastructure (just for these two, i think the other bitsets are all fine).&lt;/p&gt;</comment>
                    <comment id="13033957" author="thetaphi" created="Mon, 16 May 2011 11:41:21 +0100"  >&lt;p&gt;I will look into reverting parts of the last commit on that issue - and move back to LinkedList&amp;lt;State&amp;gt;. The overhead should be small, I checked the cardinalities of those bit sets... LOW! And it only uses LinkedLists of pointers to state structures, in contrast to a naive LinkedList&amp;lt;Integer&amp;gt;.&lt;/p&gt;</comment>
                    <comment id="13033976" author="thetaphi" created="Mon, 16 May 2011 12:36:43 +0100"  >&lt;p&gt;This patch reverts splitblock[], partition[] and reverse[][] to state before r1026190, the BitSets on top-level (not in inner loops are unchanged)&lt;/p&gt;</comment>
                    <comment id="13033982" author="thetaphi" created="Mon, 16 May 2011 12:57:41 +0100"  >&lt;p&gt;After some perf analysis, it showed, that replacing the LinkedList in partition[] by HashSet makes it faster. Order is unimportant and the b1.remove()/b2.add() combi in inner loop no longer uses linear scan.&lt;/p&gt;</comment>
                    <comment id="13033984" author="rcmuir" created="Mon, 16 May 2011 13:02:58 +0100"  >&lt;p&gt;Thanks for looking into this Uwe, looks like a good solution to me.&lt;/p&gt;</comment>
                    <comment id="13033988" author="thetaphi" created="Mon, 16 May 2011 13:13:25 +0100"  >&lt;p&gt;Some more cleanup, I will commit this now.&lt;/p&gt;

&lt;p&gt;If somebody else has a better idea how to optimize this on memory usage (maybe use Mike&apos;s SortedIntSet), go go go &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13033989" author="thetaphi" created="Mon, 16 May 2011 13:16:20 +0100"  >&lt;p&gt;Committed revision: 1103711&lt;/p&gt;

&lt;p&gt;Thanks Robert for help with this horrible monster!&lt;/p&gt;</comment>
                    <comment id="13034004" author="rcmuir" created="Mon, 16 May 2011 14:04:59 +0100"  >&lt;p&gt;Thanks for reporting this selckin, this is a great find, definitely amazed we randomly generated this one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13034006" author="dweiss" created="Mon, 16 May 2011 14:09:03 +0100"  >&lt;p&gt;There is a lot of power in randomness, huh? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I really like these randomized tests... this should be a built-in functionality in JUnit (call it &apos;repeatable randomness&apos;)...&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310050">
                <name>Regression</name>
                                                <inwardlinks description="is broken by">
                            <issuelink>
            <issuekey id="12478010">LUCENE-2716</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12479319" name="LUCENE-3101.patch" size="6479" author="thetaphi" created="Mon, 16 May 2011 13:13:24 +0100" />
                    <attachment id="12479317" name="LUCENE-3101.patch" size="6315" author="thetaphi" created="Mon, 16 May 2011 12:57:41 +0100" />
                    <attachment id="12479315" name="LUCENE-3101.patch" size="6306" author="thetaphi" created="Mon, 16 May 2011 12:36:43 +0100" />
                    <attachment id="12479304" name="LUCENE-3101_test.patch" size="590" author="rcmuir" created="Mon, 16 May 2011 10:11:22 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 15 May 2011 12:55:30 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10827</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24593</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>