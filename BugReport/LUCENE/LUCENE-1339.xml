<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:59:26 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1339/LUCENE-1339.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1339] Add IndexReader.acquire() and release() methods using IndexReader&apos;s ref counting</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1339</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;From: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200807.mbox/%3cPine.OSX.4.64.0807170752080.1708@c5850-a3-2-62-147-22-102.dial.proxad.net%3e&quot; class=&quot;external-link&quot;&gt;http://mail-archives.apache.org/mod_mbox/lucene-java-dev/200807.mbox/%3cPine.OSX.4.64.0807170752080.1708@c5850-a3-2-62-147-22-102.dial.proxad.net%3e&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have a server where a bunch of threads are handling search requests. I&lt;br/&gt;
have a another process that updates the index used by the search server and&lt;br/&gt;
that asks the searcher server to reopen its index reader after the updates&lt;br/&gt;
completed.&lt;/p&gt;

&lt;p&gt;When I reopen() the index reader, I also close the old one (if the reopen()&lt;br/&gt;
yielded a new instance). This causes problems for the other threads that&lt;br/&gt;
are currently in the middle of a search request.&lt;/p&gt;

&lt;p&gt;I&apos;d like to propose the addition of two methods, acquire() and release() &lt;br/&gt;
(attached to this bug report), that increment/decrement the ref count that IndexReader &lt;br/&gt;
instances currently maintain for related purposes. That ref count prevents &lt;br/&gt;
the index reader from being actually closed until it reaches zero.&lt;/p&gt;

&lt;p&gt;My server&apos;s search threads, thus acquiring and releasing the index reader &lt;br/&gt;
can be sure that the index reader they&apos;re currently using is good until &lt;br/&gt;
they&apos;re done with the current request, ie, until they release() it.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12400544">LUCENE-1339</key>
            <summary>Add IndexReader.acquire() and release() methods using IndexReader&apos;s ref counting</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="vajda">Andi Vajda</reporter>
                        <labels>
                    </labels>
                <created>Fri, 18 Jul 2008 14:22:25 +0100</created>
                <updated>Sat, 11 Oct 2008 13:49:41 +0100</updated>
                    <resolved>Tue, 22 Jul 2008 12:15:00 +0100</resolved>
                                            <fixVersion>2.4</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12614898" author="mikemccand" created="Fri, 18 Jul 2008 23:23:40 +0100"  >&lt;p&gt;Thanks Andi.  What would you think of just exposing incRef() &amp;amp; decRef() as expert public methods? &amp;#8211; Yonik suggested this on java-dev.&lt;/p&gt;

&lt;p&gt;We would just add ensureOpen() to those methods and make them public.&lt;/p&gt;</comment>
                    <comment id="12615001" author="vajda@ovaltofu.org" created="Sat, 19 Jul 2008 15:51:32 +0100"  >&lt;p&gt;That would work just as well !&lt;br/&gt;
Andi..&lt;/p&gt;</comment>
                    <comment id="12615579" author="mikemccand" created="Tue, 22 Jul 2008 12:15:00 +0100"  >&lt;p&gt;Thanks Andi!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12386391" name="lucene-1339.patch" size="1206" author="vajda" created="Fri, 18 Jul 2008 14:24:09 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 18 Jul 2008 22:23:40 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12409</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26389</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>