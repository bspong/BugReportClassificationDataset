<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:22:29 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1745/LUCENE-1745.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1745] Add ability to specify compilation/matching flags to RegexCapabiltiies implementations</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1745</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The Jakarta Regexp and Java Util Regex packages both support the ability to provides flags that alter the matching behavior of a given regular expression. While the java.util.regex.Pattern implementation supports providing these flags as part of the regular expression string, the Jakarta Regexp implementation does not.  Therefore, this improvement request is to add the capability to provide those modification flags to either implementation. &lt;/p&gt;

&lt;p&gt;I&apos;ve developed a working implementation that makes minor additions to the existing code. The default constructor is explicitly defined with no arguments, and then a new constructor with an additional &quot;int flags&quot; argument is provided. This provides complete backwards compatibility. For each RegexCapabilties implementation, the appropriate flags from the regular expression package is defined as  FLAGS_XXX static fields. These are pass through to the underlying implementation. They are re-defined to avoid bleeding the actual implementation classes into the caller namespace.&lt;/p&gt;

&lt;p&gt;Proposed changes:&lt;/p&gt;

&lt;p&gt;For the JavaUtilRegexCapabilities.java, the following is the changes made.&lt;/p&gt;

&lt;p&gt;  private int flags = 0;&lt;/p&gt;

&lt;p&gt;  // Define the optional flags from Pattern that can be used.&lt;br/&gt;
  // Do this here to keep Pattern contained within this class.&lt;/p&gt;

&lt;p&gt;  public final int FLAG_CANON_EQ = Pattern.CANON_EQ;&lt;br/&gt;
  public final int FLAG_CASE_INSENSATIVE = Pattern.CASE_INSENSATIVE;&lt;br/&gt;
  public final int FLAG_COMMENTS = Pattern.COMMENTS;&lt;br/&gt;
  public final int FLAG_DOTALL = Pattern.DOTALL;&lt;br/&gt;
  public final int FLAG_LITERAL = Pattern.LITERAL;&lt;br/&gt;
  public final int FLAG_MULTILINE = Pattern.MULTILINE;&lt;br/&gt;
  public final int FLAG_UNICODE_CASE = Pattern.UNICODE_CASE;&lt;br/&gt;
  public final int FLAG_UNIX_LINES = Pattern.UNIX_LINES;&lt;/p&gt;

&lt;p&gt;  /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Default constructor that uses java.util.regex.Pattern&lt;/li&gt;
	&lt;li&gt;with its default flags.&lt;br/&gt;
   */&lt;br/&gt;
  public JavaUtilRegexCapabilities()  
{
    this.flags = 0;
  }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Constructor that allows for the modification of the flags that&lt;/li&gt;
	&lt;li&gt;the java.util.regex.Pattern will use to compile the regular expression.&lt;/li&gt;
	&lt;li&gt;This gives the user the ability to fine-tune how the regular expression&lt;/li&gt;
	&lt;li&gt;to match the functionlity that they need.&lt;/li&gt;
	&lt;li&gt;The 
{@link java.util.regex.Pattern Pattern}
&lt;p&gt; class supports specifying&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;these fields via the regular expression text itself, but this gives the caller&lt;/li&gt;
	&lt;li&gt;another option to modify the behavior. Useful in cases where the regular expression text&lt;/li&gt;
	&lt;li&gt;cannot be modified, or if doing so is undesired.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@flags The flags that are ORed together.&lt;br/&gt;
   */&lt;br/&gt;
  public JavaUtilRegexCapabilities(int flags) 
{
    this.flags = flags;
  }&lt;br/&gt;
  &lt;br/&gt;
  public void compile(String pattern) {
    this.pattern = Pattern.compile(pattern, this.flags);
  }&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
For the JakartaRegexpCapabilties.java, the following is changed:&lt;br/&gt;
&lt;br/&gt;
  private int flags = RE.MATCH_NORMAL;&lt;br/&gt;
&lt;br/&gt;
  /**&lt;br/&gt;
   * Flag to specify normal, case-sensitive matching behaviour. This is the default.&lt;br/&gt;
   */&lt;br/&gt;
  public static final int FLAG_MATCH_NORMAL = RE.MATCH_NORMAL;&lt;br/&gt;
  &lt;br/&gt;
  /**&lt;br/&gt;
   * Flag to specify that matching should be case-independent (folded)&lt;br/&gt;
   */&lt;br/&gt;
  public static final int FLAG_MATCH_CASEINDEPENDENT = RE.MATCH_CASEINDEPENDENT;&lt;br/&gt;
 &lt;br/&gt;
  /**&lt;br/&gt;
   * Contructs a RegexCapabilities with the default MATCH_NORMAL match style.&lt;br/&gt;
   */&lt;br/&gt;
  public JakartaRegexpCapabilities() {}&lt;br/&gt;
  &lt;br/&gt;
  /**&lt;br/&gt;
   * Constructs a RegexCapabilities with the provided match flags.&lt;br/&gt;
   * Multiple flags should be ORed together.&lt;br/&gt;
   * &lt;br/&gt;
   * @param flags The matching style&lt;br/&gt;
   */&lt;br/&gt;
  public JakartaRegexpCapabilities(int flags)&lt;br/&gt;
  {
    this.flags = flags;
  }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;  public void compile(String pattern) &lt;/p&gt;
{
    regexp = new RE(pattern, this.flags);
  }</description>
                <environment></environment>
            <key id="12430501">LUCENE-1745</key>
            <summary>Add ability to specify compilation/matching flags to RegexCapabiltiies implementations</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="zampetti">Marc Zampetti</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jul 2009 15:35:08 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:29 +0100</updated>
                    <resolved>Fri, 31 Jul 2009 18:41:18 +0100</resolved>
                            <version>2.4.1</version>
                                <fixVersion>2.9</fixVersion>
                                <component>modules/other</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12731562" author="zampetti" created="Wed, 15 Jul 2009 18:11:06 +0100"  >&lt;p&gt;Adding patch file with complete changes. All tests passed and included additional test cases to test new functionality.&lt;/p&gt;</comment>
                    <comment id="12737228" author="zampetti" created="Thu, 30 Jul 2009 19:52:49 +0100"  >&lt;p&gt;What is the status of having this patch reviewed and commited to the next 2.x release?&lt;/p&gt;</comment>
                    <comment id="12737229" author="zampetti" created="Thu, 30 Jul 2009 19:53:43 +0100"  >&lt;p&gt;Incorrectly added the &quot;Fixed Version&quot; in the last update.&lt;/p&gt;</comment>
                    <comment id="12737610" author="mikemccand" created="Fri, 31 Jul 2009 18:37:11 +0100"  >&lt;p&gt;Patch looks good Marc; I plan to commit shortly.&lt;/p&gt;

&lt;p&gt;I think it&apos;s unlikely we&apos;ll do a 2.4.2 release, since 2.9 is just around the corner (this will be included in 2.9).&lt;/p&gt;</comment>
                    <comment id="12737612" author="mikemccand" created="Fri, 31 Jul 2009 18:41:18 +0100"  >&lt;p&gt;Thanks Marc!&lt;/p&gt;</comment>
                    <comment id="12737618" author="zampetti" created="Fri, 31 Jul 2009 18:56:32 +0100"  >&lt;p&gt;Thanks Michael. Look forward to getting my hands on 2.9 when its released.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12413577" name="LUCENE-1745.patch" size="7413" author="zampetti" created="Wed, 15 Jul 2009 18:11:06 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 31 Jul 2009 17:37:11 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12015</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25981</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>