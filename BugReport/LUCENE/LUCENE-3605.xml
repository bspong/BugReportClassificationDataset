<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:35:28 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3605/LUCENE-3605.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3605] revisit segments.gen sleeping</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3605</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3601&quot; title=&quot;testIWondiskfull unreferenced files failure&quot;&gt;&lt;del&gt;LUCENE-3601&lt;/del&gt;&lt;/a&gt;, i worked up a change where we intentionally crash() all un-fsynced files &lt;br/&gt;
in tests to ensure that we are calling sync on files when we should.&lt;/p&gt;

&lt;p&gt;I think this would be nice to do always (and with some fixes all tests pass).&lt;/p&gt;

&lt;p&gt;But this is super-slow sometimes because when we corrupt the unsynced segments.gen, it causes&lt;br/&gt;
SIS.read to take 500ms each time (and in checkindex for some reason we do this twice, which seems wrong).&lt;/p&gt;

&lt;p&gt;I can workaround this for now for tests (just do a partial crash that avoids corrupting the segments.gen),&lt;br/&gt;
but I wanted to create this issue for discussion about the sleeping/non-fsyncing of segments.gen, just&lt;br/&gt;
because i guess its possible someone could hit this slowness.&lt;/p&gt;
</description>
                <environment></environment>
            <key id="12532914">LUCENE-3605</key>
            <summary>revisit segments.gen sleeping</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Nov 2011 14:42:19 +0000</created>
                <updated>Fri, 10 May 2013 11:43:36 +0100</updated>
                    <resolved>Thu, 22 Dec 2011 18:02:20 +0000</resolved>
                                            <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13173433" author="mikemccand" created="Tue, 20 Dec 2011 19:06:15 +0000"  >
&lt;p&gt;Patch: I removed the sleep+retry loop in loading the segments.gen&lt;br/&gt;
file; I don&apos;t think SIS should do any sleeping (it&apos;s risky; an app&lt;br/&gt;
could in theory hit the net 0.5 second sleep here).&lt;/p&gt;

&lt;p&gt;I also changed SegmentInfos.finishCommit to sync this file, if it&lt;br/&gt;
was written successfully, but to suppress exceptions (but then try to&lt;br/&gt;
delete the file) since a reader could have it open as we try to commit&lt;br/&gt;
(which is fine; the file is optional since we use dir listing to&lt;br/&gt;
locate segments_N).&lt;/p&gt;</comment>
                    <comment id="13173596" author="rcmuir" created="Tue, 20 Dec 2011 23:06:18 +0000"  >&lt;p&gt;I agree... i think we can also remove the now unused defaultGenFileRetryPauseMsec and its setter too?&lt;/p&gt;</comment>
                    <comment id="13173597" author="rcmuir" created="Tue, 20 Dec 2011 23:08:05 +0000"  >&lt;p&gt;I meant getter... you already nuked the setter&lt;/p&gt;</comment>
                    <comment id="13173995" author="mikemccand" created="Wed, 21 Dec 2011 10:41:48 +0000"  >&lt;p&gt;Woops &amp;#8211; I&apos;ll nuke the getter!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12508117" name="LUCENE-3605.patch" size="6816" author="mikemccand" created="Tue, 20 Dec 2011 19:06:15 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 20 Dec 2011 19:06:15 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>218647</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24093</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>