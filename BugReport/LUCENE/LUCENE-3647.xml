<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:30:14 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3647/LUCENE-3647.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3647] DocValues merging is not associative, leading to different results depending upon how merges execute</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3647</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;recently I cranked up TestDuelingCodecs to actually test docvalues (previously it wasn&apos;t testing it at all).&lt;/p&gt;

&lt;p&gt;This test is simple, it indexes the same random content with 2 different indexwriters, it just allows them&lt;br/&gt;
to use different codecs with different indexwriterconfigs.&lt;/p&gt;

&lt;p&gt;then it asserts the indexes are equal.&lt;/p&gt;

&lt;p&gt;Sometimes, always on BYTES_FIXED_DEREF type, we end out with one reader that has a zero-filled byte[] for a doc,&lt;br/&gt;
but that same document in the other reader has no docvalues at all.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12535144">LUCENE-3647</key>
            <summary>DocValues merging is not associative, leading to different results depending upon how merges execute</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Dec 2011 12:12:33 +0000</created>
                <updated>Fri, 10 May 2013 11:44:24 +0100</updated>
                    <resolved>Wed, 14 Dec 2011 12:50:44 +0000</resolved>
                            <version>4.0-ALPHA</version>
                                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13169278" author="rcmuir" created="Wed, 14 Dec 2011 12:14:57 +0000"  >&lt;p&gt;here&apos;s the test, run ant test -Dtestcase=TestDuelingCodecs -Dtestmethod=testEquals -Dtests.seed=-40a075cbf2de8088:-42be31e45e2a3e63:-1340cc72c4576f5a -Dtests.multiplier=3 -Dargs=&quot;-Dfile.encoding=ISO8859-1&quot;&lt;/p&gt;</comment>
                    <comment id="13169288" author="rcmuir" created="Wed, 14 Dec 2011 12:36:23 +0000"  >&lt;p&gt;hmm my debugging there is a little bogus (just ignore the previous file, you can use the existing test with taht seed), but i think the synopsis is still correct.&lt;/p&gt;

&lt;p&gt;I think as a start, don&apos;t we need to be careful when handling these fixed types in all places? Here&apos;s a patch for MultiDocValues that should fix some bugs related to this (unfortunately the seed still fails).&lt;/p&gt;

&lt;p&gt;MultiDocValues isnt actually used during merging so we need to investigate other parts too and probably do the same?&lt;/p&gt;</comment>
                    <comment id="13169289" author="simonw" created="Wed, 14 Dec 2011 12:36:52 +0000"  >&lt;p&gt;my first guess is that this comes due to the different IWCs if you don&apos;t specify a value for a field in one IW before the segment is flushed it will not write anything out. but if for instance in your second IW the last doc in a seg has a value DV fills it with default values for the other docs.  is that something which could happen here? Same is true if you merge fields ie. if you have slightly different merge policies?&lt;/p&gt;
</comment>
                    <comment id="13169291" author="rcmuir" created="Wed, 14 Dec 2011 12:39:21 +0000"  >&lt;p&gt;updated patch... fixes the test fail, was a missing break in the switch... I promise I won&apos;t write any more patches until i wake up with more coffee or beer.&lt;/p&gt;</comment>
                    <comment id="13169306" author="rcmuir" created="Wed, 14 Dec 2011 12:50:44 +0000"  >&lt;p&gt;all 3 failed hudson seeds pass now.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12507339" name="LUCENE-3647_multi.patch" size="3145" author="rcmuir" created="Wed, 14 Dec 2011 12:36:23 +0000" />
                    <attachment id="12507341" name="LUCENE-3647.patch" size="2724" author="rcmuir" created="Wed, 14 Dec 2011 12:39:21 +0000" />
                    <attachment id="12507337" name="LUCENE-3647_test.patch" size="2494" author="rcmuir" created="Wed, 14 Dec 2011 12:14:57 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 14 Dec 2011 12:36:52 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>220829</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24051</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>