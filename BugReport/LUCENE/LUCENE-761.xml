<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:08:30 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-761/LUCENE-761.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-761] Clone proxStream lazily in SegmentTermPositions</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-761</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;In SegmentTermPositions the proxStream should be cloned lazily, i. e. at the first time nextPosition() is called. Then the initialization costs of TermPositions are not higher anymore compared to TermDocs and thus there is no reason anymore for Scorers to use TermDocs instead of TermPositions. In fact, all Scorers should use TermPositions, because custom subclasses of existing scorers might want to access payloads, which is only possible via TermPositions. We could further merge SegmentTermDocs and SegmentTermPositions into one class and deprecate the interface TermDocs.&lt;/p&gt;

&lt;p&gt;I&apos;m going to attach a patch once the payloads feature (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-755&quot; title=&quot;Payloads&quot;&gt;&lt;del&gt;LUCENE-755&lt;/del&gt;&lt;/a&gt;) is committed.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12359332">LUCENE-761</key>
            <summary>Clone proxStream lazily in SegmentTermPositions</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="michaelbusch">Michael Busch</assignee>
                                <reporter username="michaelbusch">Michael Busch</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Dec 2006 14:56:16 +0000</created>
                <updated>Tue, 19 Jun 2007 09:14:50 +0100</updated>
                    <resolved>Sun, 11 Mar 2007 07:15:03 +0000</resolved>
                                            <fixVersion>2.2</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12461381" author="gsingers" created="Fri, 29 Dec 2006 14:51:18 +0000"  >&lt;p&gt;Hi Michael,&lt;/p&gt;

&lt;p&gt;I am not sure I understand why 755 blocks this one.  I would think it would be the other way around, that way we could integrate this into scoring and people could access it seamlessly w/o having to change their query code (except maybe the similarity, as I suggested, or by adding some other interface).  &lt;/p&gt;


&lt;p&gt;-Grant&lt;/p&gt;</comment>
                    <comment id="12465753" author="michaelbusch" created="Thu, 18 Jan 2007 13:35:20 +0000"  >&lt;p&gt;Grant,&lt;/p&gt;

&lt;p&gt;your are absolutely right, 755 does not block this issue. The reason why I wanted to wait to submit a patch here was that 755 and this one are changing the same files. So committing this one would have prevented 755 from applying cleanly on the trunk. But since there were a couple of commits in the last days/weeks and the Payloads API is still under discussion I can as well submit a patch here now, because I have to change 755 to apply cleanly to the trunk anyway.&lt;/p&gt;</comment>
                    <comment id="12479835" author="gsingers" created="Sat, 10 Mar 2007 12:50:04 +0000"  >&lt;p&gt;If I understand correctly, all we need on this one is to move line 37 of SegmentTermPositions to line 55, right?&lt;/p&gt;</comment>
                    <comment id="12479876" author="michaelbusch" created="Sat, 10 Mar 2007 20:04:26 +0000"  >&lt;p&gt;Grant,&lt;/p&gt;

&lt;p&gt;you&apos;re right, it is a simple change to clone the stream lazily. And I think I will do that for now. The benefit then is, that it won&apos;t be more expensive anymore to use a SegmentTermPosition object instead of a SegmentTermDocs in scorers. &lt;/p&gt;

&lt;p&gt;However, there might be one drawback. SegmentTermDocs implements the method &lt;br/&gt;
   int read(final int[] docs, final int[] freqs)&lt;br/&gt;
which is used by TermScorer for better performance. SegmentTermPositions overwrites this method and just throws a UnsupportedOperationException. This just becomes a problem if we want to make TermScorer extendable, so that subclasses can make use of payloads.... But actually I don&apos;t see much benefit in extending TermScorer over just extending Scorer for such a use case. What do you think?&lt;/p&gt;</comment>
                    <comment id="12479878" author="michaelbusch" created="Sat, 10 Mar 2007 20:30:06 +0000"  >&lt;p&gt;Here is the simple patch. All unit tests pass. I&apos;ll commit this soon if nobody objects...&lt;/p&gt;</comment>
                    <comment id="12479909" author="michaelbusch" created="Sun, 11 Mar 2007 07:15:03 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12353058" name="lucene-761.patch" size="1246" author="michaelbusch" created="Sat, 10 Mar 2007 20:30:06 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 29 Dec 2006 14:51:18 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12991</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26969</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>