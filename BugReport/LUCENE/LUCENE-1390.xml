<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:34:37 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1390/LUCENE-1390.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1390] add ASCIIFoldingFilter and deprecate ISOLatin1AccentFilter</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1390</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The ISOLatin1AccentFilter is removing accents from accented characters in the ISO Latin 1 character set.&lt;br/&gt;
It does what it does and there is no bug with it.&lt;/p&gt;

&lt;p&gt;It would be nicer, though, if there was a more comprehensive version of this code that included not just ISO-Latin-1 (ISO-8859-1) but the entire Latin 1 and Latin Extended A unicode blocks.&lt;br/&gt;
See: &lt;a href=&quot;http://en.wikipedia.org/wiki/Latin-1_Supplement_unicode_block&quot; class=&quot;external-link&quot;&gt;http://en.wikipedia.org/wiki/Latin-1_Supplement_unicode_block&lt;/a&gt;&lt;br/&gt;
See: &lt;a href=&quot;http://en.wikipedia.org/wiki/Latin_Extended-A_unicode_block&quot; class=&quot;external-link&quot;&gt;http://en.wikipedia.org/wiki/Latin_Extended-A_unicode_block&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That way, all languages using roman characters are covered.&lt;br/&gt;
A new class, ISOLatinAccentFilter is attached. It is intended to supercede ISOLatin1AccentFilter which should get deprecated.&lt;/p&gt;</description>
                <environment>&lt;p&gt;any&lt;/p&gt;</environment>
            <key id="12404567">LUCENE-1390</key>
            <summary>add ASCIIFoldingFilter and deprecate ISOLatin1AccentFilter</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                <reporter username="vajda">Andi Vajda</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Sep 2008 20:39:34 +0100</created>
                <updated>Sun, 6 Dec 2009 20:11:18 +0000</updated>
                    <resolved>Sat, 6 Dec 2008 23:28:21 +0000</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12631898" author="vajda" created="Wed, 17 Sep 2008 20:41:03 +0100"  >&lt;p&gt;The new ISOLatinAccentFilter class, superceding ISOLatin1AccentFilter.&lt;/p&gt;</comment>
                    <comment id="12631931" author="steve_rowe" created="Wed, 17 Sep 2008 21:32:38 +0100"  >&lt;p&gt;I think that at a minimum, the Latin Extended Additional block &lt;span class=&quot;error&quot;&gt;&amp;#91;U+1E00-U+1EFF&amp;#93;&lt;/span&gt; should be added, since it is included in Unicode v3.0 (the version of Unicode that Java 1.4.2 is conformant with), and it consists mainly of characters which have exact diacritic-stripped ASCII versions.  Wikipedia doesn&apos;t seem to have a page for this block, and I can&apos;t find a code chart PDF for Unicode v3.0 on unicode.org, so here&apos;s the PDF for Unicode v5.1 (the latest version):&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.unicode.org/charts/PDF/U1E00.pdf&quot; class=&quot;external-link&quot;&gt;http://www.unicode.org/charts/PDF/U1E00.pdf&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Probably should check against the &lt;a href=&quot;http://www.unicode.org/Public/3.0-Update1/UnicodeData-3.0.1.txt&quot; class=&quot;external-link&quot;&gt;Unicode 3.0 data file&lt;/a&gt; to make sure there haven&apos;t been any changes to this block between v3.0 and v5.1.0 - i.e., to make sure that the above-linked PDF is accurate for Unicode v3.0.&lt;/p&gt;

&lt;p&gt;There is one more Latin block listed in the &lt;a href=&quot;http://www.unicode.org/Public/3.0-Update/Blocks-3.txt&quot; class=&quot;external-link&quot;&gt;Unicode 3.0 blocks data file&lt;/a&gt;: &lt;a href=&quot;http://en.wikipedia.org/wiki/Latin_Extended-B_unicode_block&quot; class=&quot;external-link&quot;&gt;Latin Extended-B&lt;/a&gt;.  Since many of the characters in this block don&apos;t have exact diacritic-stripped ASCII versions, maybe it could be argued that they shouldn&apos;t be included in this filter.  A fair proportion of them (maybe 40%), however, do.&lt;/p&gt;</comment>
                    <comment id="12631946" author="vajda@ovaltofu.org" created="Wed, 17 Sep 2008 21:57:45 +0100"  >
&lt;p&gt;Makes sense.&lt;/p&gt;


&lt;p&gt;I did look at that block and it looked much more remote from the purpose of &lt;br/&gt;
this class. But you&apos;re right, many of these could be handled as well.&lt;/p&gt;

&lt;p&gt;And I agree that they should be handled to be able to claim to be doing a &lt;br/&gt;
complete job.&lt;/p&gt;

&lt;p&gt;So far, I&apos;ve claimed that this class handles Latin 1 and Latin Extended A &lt;br/&gt;
which should cover most, if not all, european/turkish languages using latin &lt;br/&gt;
script and thus goes much farther than the ISOLatin1AccentFilter in that &lt;br/&gt;
respect.&lt;/p&gt;</comment>
                    <comment id="12632332" author="vajda" created="Thu, 18 Sep 2008 19:36:08 +0100"  >&lt;p&gt;ISOLatinAccentFilter.java again, now with Unicode Latin Extended B as well.&lt;/p&gt;</comment>
                    <comment id="12632339" author="steve_rowe" created="Thu, 18 Sep 2008 19:58:53 +0100"  >&lt;p&gt;Andi,&lt;/p&gt;

&lt;p&gt;What do you think of the idea of remaking this into a filter that folds all Unicode characters to their ASCII equivalents?  This would be (I think) a superset of what you&apos;ve done, but would also include things like fullwidth Latin characters, smaller variants of some ASCII symbols, fancy quotation marks, etc.  Maybe non-Arabic decimal numeric characters could be converted to their Arabic versions.&lt;/p&gt;</comment>
                    <comment id="12632458" author="vajda" created="Fri, 19 Sep 2008 00:53:45 +0100"  >

&lt;p&gt;I think that would be a whole lot of typing &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Not a bad idea, still.&lt;br/&gt;
I&apos;m in the process of entering the 1E00 - 1EFF range.&lt;br/&gt;
The Extended-C and D blocks also have relevant things to include but I&apos;m &lt;br/&gt;
hoping to stop at the Extended Additional block currently in progress.&lt;/p&gt;</comment>
                    <comment id="12632480" author="vajda" created="Fri, 19 Sep 2008 02:20:57 +0100"  >&lt;p&gt; Now with the u1e00 - u1eff range.&lt;/p&gt;</comment>
                    <comment id="12632706" author="steve_rowe" created="Fri, 19 Sep 2008 15:51:01 +0100"  >&lt;blockquote&gt;&lt;p&gt;The Extended-C and D blocks also have relevant things to include&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;These two blocks were not included in Unicode 3.0, the version supported by Java 1.4.2, which is the Java version that Lucene 2.X supports.&lt;/p&gt;

&lt;p&gt;Nevertheless, the ranges these two blocks occupy in Unicode 5.1 are non-characters in Unicode 3.0, so I don&apos;t think it would be a problem to add them.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at adding more stuff this weekend.&lt;/p&gt;

&lt;p&gt;I also will add the Unicode character descriptions to the comments for each character (e.g. &quot;LATIN CAPITAL LETTER A WITH MACRON&quot;).&lt;/p&gt;</comment>
                    <comment id="12633135" author="hossman" created="Mon, 22 Sep 2008 05:08:43 +0100"  >&lt;p&gt;It would be good to clarify how the goals of this issue differ from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1343&quot; title=&quot;A replacement for AsciiFoldingFilter that does a more thorough job of removing diacritical marks or non-spacing modifiers.&quot;&gt;&lt;del&gt;LUCENE-1343&lt;/del&gt;&lt;/a&gt; ... as an outside observer they seem to be the same thing&lt;/p&gt;</comment>
                    <comment id="12635594" author="steve_rowe" created="Tue, 30 Sep 2008 00:37:43 +0100"  >&lt;blockquote&gt;&lt;p&gt;It would be good to clarify how the goals of this issue differ from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1343&quot; title=&quot;A replacement for AsciiFoldingFilter that does a more thorough job of removing diacritical marks or non-spacing modifiers.&quot;&gt;&lt;del&gt;LUCENE-1343&lt;/del&gt;&lt;/a&gt; ... as an outside observer they seem to be the same thing&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1343&quot; title=&quot;A replacement for AsciiFoldingFilter that does a more thorough job of removing diacritical marks or non-spacing modifiers.&quot;&gt;&lt;del&gt;LUCENE-1343&lt;/del&gt;&lt;/a&gt; depends on either Java 6 or an ICU jar.  Java 5 support (much less Java 6 support) is still a ways off, and core Lucene can&apos;t have external dependencies.  IMO, this issue intends to provide &lt;b&gt;core&lt;/b&gt; Lucene support for folding a wider set of accented characters to ASCII.&lt;/p&gt;

&lt;p&gt;In a moment I&apos;ll attach a patch that, in addition to the larger set of accented characters to be folded that Andi has provided, folds all Unicode characters I could find to their ASCII equivalents.&lt;/p&gt;</comment>
                    <comment id="12635607" author="steve_rowe" created="Tue, 30 Sep 2008 00:53:37 +0100"  >&lt;p&gt;Changes from Andi&apos;s version:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Changed the name of the class to ASCIIFoldingFilter&lt;/li&gt;
	&lt;li&gt;Added the Unicode chracter descriptions to comments on each character&lt;/li&gt;
	&lt;li&gt;Added a test class&lt;/li&gt;
	&lt;li&gt;Added several other Unicode blocks from which characters are converted to their ASCII equivalents.  Added characters include digits and punctuation.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I did not provide mappings for characters from the Math block - flattening circled plus, for example, didn&apos;t seem appropriate.&lt;/p&gt;

&lt;p&gt;I &lt;b&gt;did&lt;/b&gt; provide mappings for IPA and two other phonetic character blocks, and I&apos;m not sure whether this is appropriate.  I was following what seemed to me to be the logic of Andi&apos;s mappings, and those provided by Latin1AccentFilter: convert characters to those that &lt;b&gt;look like&lt;/b&gt; them in ASCII.  As a result, e.g., the character described as &quot;LATIN SMALL LETTER TURNED M&quot; (U+0270) from the IPA block is mapped to &quot;m&quot;, regardless of its actual phonetic value.&lt;/p&gt;

&lt;p&gt;There are lots of mappings in there now.  I generated the mappings by Perl scripting over the contents of the Unicode 5.1 version of UnicodeData.txt from Unicode.org, after grep&apos;ing e.g. for &quot;LATIN&quot; and &quot;LETTER&quot; or &quot;DIGRAPH&quot;, etc., and then moved things around to the appropriate places by hand.  I guess this is one weakness of this patch: it&apos;s large enough that manual verification is tough.  It&apos;s my hope that adding the Unicode character descriptions will allow for at least improved verifiability.&lt;/p&gt;</comment>
                    <comment id="12635620" author="steve_rowe" created="Tue, 30 Sep 2008 01:23:09 +0100"  >&lt;p&gt;Forgot to mention three additional change in ASCIIFoldingFilter.patch:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Some of the added character mappings produce 3 or 4 characters - e.g. the character &quot;&#9342; &quot; &amp;#8211; described as &quot;PARENTHESIZED NUMBER ELEVEN&quot; &amp;#8211; is mapped to &apos;(&apos; + &apos;1&apos; + &apos;1&apos; +&apos;)&apos;.&lt;/li&gt;
	&lt;li&gt;As a result of the increased maximum length of each mapping, the output buffer length is set to 4 times the length of the input token.&lt;/li&gt;
	&lt;li&gt;ArrayUtils.getNextSize() is used to resize the output buffer when it needs to grow.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    <comment id="12637565" author="steve_rowe" created="Tue, 7 Oct 2008 18:51:49 +0100"  >&lt;p&gt;Minor adjustment to previous version: this version fixes a couple of character mappings that were out of order in the mapped-to-capital-&quot;B&quot; section.&lt;/p&gt;</comment>
                    <comment id="12643152" author="vajda" created="Tue, 28 Oct 2008 06:23:45 +0000"  >&lt;p&gt;Wow, Steve, I&apos;m impressed. This is quite an improvement over my earlier patches and even more of an improvement over ISOLatin1AccentFilter. Thank you for doing this !&lt;br/&gt;
What&apos;s next ? Does any Lucene committer watching this bug have objections in checking this in ?&lt;br/&gt;
One (minor) missing piece to the patch is the deprecation of ISOLatin1AccentFilter itself.&lt;/p&gt;</comment>
                    <comment id="12643215" author="steve_rowe" created="Tue, 28 Oct 2008 14:07:47 +0000"  >&lt;p&gt;Some of the new mappings, e.g. the character representing parenthesized 10 mapped to the 4 character sequence &quot;(10)&quot;, might better be handled before tokenization, very much like &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-822&quot; title=&quot;CharFilter - normalize characters before tokenizer&quot;&gt;&lt;del&gt;SOLR-822&lt;/del&gt;&lt;/a&gt; - I thought about doing something like that but decided that it was too much work &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.  However, maybe it would be possible to write a reader adapter that takes in a &lt;b&gt;token&lt;/b&gt; filter (like this one) and then passes the entire contents of the reader through the filter.&lt;/p&gt;</comment>
                    <comment id="12652691" author="rcmuir" created="Wed, 3 Dec 2008 05:42:24 +0000"  >&lt;p&gt;I am using this patch and its working well.&lt;/p&gt;

&lt;p&gt;Nitpick... wonder if you could change the mapping of &#399; and &#601; to from E to A... This character is only used in Azeri and not too long ago (&amp;lt;20 years) it was written as A with umlaut, so there is some precedence.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Robert&lt;/p&gt;</comment>
                    <comment id="12652694" author="vajda" created="Wed, 3 Dec 2008 06:20:46 +0000"  >&lt;p&gt;Could you please attach a patch for the change you requested, I&apos;m not sure &lt;br/&gt;
it&apos;s displaying correctly here. You seem to asking about a change for the &lt;br/&gt;
mapping of AE and E+acute which is unexpected. Thanks !&lt;/p&gt;
</comment>
                    <comment id="12652808" author="timmsc" created="Wed, 3 Dec 2008 14:34:42 +0000"  >&lt;p&gt;From my brief reading, it seems that &quot;ae&quot; would be the best transliteration for the schwa character.  &quot;Some people write &apos;&#230;&apos; instead if the schwa is not available. &quot;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.omniglot.com/writing/azeri.htm&quot; class=&quot;external-link&quot;&gt;http://www.omniglot.com/writing/azeri.htm&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12652831" author="rcmuir" created="Wed, 3 Dec 2008 15:27:49 +0000"  >&lt;p&gt;sean... from your link: On 16th May 1992 the Latin alphabet for Azerbaijani was slightly revised - the letter &#228; was replaced with &#601; and the order of letters was changed as well. &lt;/p&gt;

&lt;p&gt;i&apos;ve never seen &apos;ae&apos; used in its place, certainly not in the Azeri text that I am indexing.&lt;/p&gt;

&lt;p&gt;andi... im referring to the schwa character in azeri: U+018F (uppercase) and U+0259 (lowercase)&lt;/p&gt;</comment>
                    <comment id="12652834" author="rcmuir" created="Wed, 3 Dec 2008 15:35:15 +0000"  >&lt;p&gt;with regards to transliteration the bgn/pcgn standard states: &lt;/p&gt;

&lt;p&gt;The special letter &#399;, &#601; known as schwa, should be reproduced in that form whenever encountered.&lt;br/&gt;
Use &#1240; (U+04D8) and &#1241; (U+04D9) for schwa when writing in the Cyrillic script, but use &#399; (U+018F) and &#601; (U+0259) for schwa when writing in the Roman alphabet.&lt;/p&gt;

&lt;p&gt;In those instances when it cannot be reproduced, however, the letter &#196; &#228; may be substituted for it.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://earth-info.nga.mil/gns/html/Romanization/Romanization_Azerbaijani.pdf&quot; class=&quot;external-link&quot;&gt;http://earth-info.nga.mil/gns/html/Romanization/Romanization_Azerbaijani.pdf&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12652875" author="vajda" created="Wed, 3 Dec 2008 18:04:45 +0000"  >
&lt;p&gt;Ah, I see now what you&apos;re asking for. Sorry about the misunderstanding.&lt;br/&gt;
I believe I had picked &apos;e&apos; for schwa because it looks closest to that &lt;br/&gt;
letter. I have no objections to switching to using &apos;a&apos; instead if that&apos;s &lt;br/&gt;
more &quot;correct&quot;.&lt;br/&gt;
This Wikipedia seems to agree: &lt;a href=&quot;http://en.wikipedia.org/wiki/Schwa_(Cyrillic&quot; class=&quot;external-link&quot;&gt;http://en.wikipedia.org/wiki/Schwa_(Cyrillic&lt;/a&gt;)&lt;br/&gt;
This other Wikipedia &lt;a href=&quot;http://en.wikipedia.org/wiki/Schwa&quot; class=&quot;external-link&quot;&gt;http://en.wikipedia.org/wiki/Schwa&lt;/a&gt; is less clear about &lt;br/&gt;
this, but it seems that using &apos;a&apos; instead of &apos;e&apos; doesn&apos;t contradict it.&lt;/p&gt;

&lt;p&gt;Steven, I can amend the patch but you said you had more changes coming. If &lt;br/&gt;
that&apos;s the case, could you please add this change as well. If that&apos;s not the &lt;br/&gt;
case, is it ok for me to add this change and call for this bug to be &lt;br/&gt;
committed to trunk and closed ?&lt;/p&gt;</comment>
                    <comment id="12652898" author="steve_rowe" created="Wed, 3 Dec 2008 18:57:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;Steven, I can amend the patch but you said you had more changes coming. If that&apos;s the case, could you please add this change as well. If that&apos;s not the case, is it ok for me to add this change and call for this bug to be committed to trunk and closed ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Andi, I don&apos;t think I said I had more changes coming.  If you are referring to &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1390?focusedCommentId=12643215#action_12643215&quot; class=&quot;external-link&quot;&gt;this comment about pre-tokenization filtering&lt;/a&gt;, I meant that as an idea that could be pursued separately from this issue.&lt;/p&gt;

&lt;p&gt;At any rate, please feel free to add Robert&apos;s suggested change yourself.&lt;/p&gt;</comment>
                    <comment id="12652911" author="vajda" created="Wed, 3 Dec 2008 19:24:45 +0000"  >&lt;p&gt;Great, I&apos;ll include Robert&apos;s change and try to convince a committer to &lt;br/&gt;
finalize it.&lt;/p&gt;</comment>
                    <comment id="12653010" author="rcmuir" created="Wed, 3 Dec 2008 22:33:12 +0000"  >&lt;p&gt;thanks guys, just as a comment to whoever is listining I think this is very useful functionality.&lt;/p&gt;

&lt;p&gt;I am indexing a lot of docs and doing it with ICU works well, but that method (unicode decomposition etc) is very expensive and still doesnt handle many common cases. In profiling, it was slowing down entire indexing process.&lt;/p&gt;

&lt;p&gt;The existing ISO filter doesn&apos;t handle many cases that are actually in use in my text, but this filter works well and appears to have coverage for most of the common cases such as full width forms, at the same time it is fast.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Robert&lt;/p&gt;</comment>
                    <comment id="12653016" author="markrmiller@gmail.com" created="Wed, 3 Dec 2008 22:39:27 +0000"  >&lt;p&gt;Hey guys, not sure how soon I can bring some time to bear on this, but I&apos;d be happy to help get this committed. &lt;/p&gt;</comment>
                    <comment id="12653031" author="markrmiller@gmail.com" created="Wed, 3 Dec 2008 23:00:01 +0000"  >&lt;p&gt;In regards to deprecating ISOLatin1AccentFilter: what are the back compatibility issues? What is the likelyhood that a forced upgrade to this class would lose words in an older index without a reindex?&lt;/p&gt;

&lt;p&gt;If its a real concern, we could keep the deprecated class until 3.0, but that still wouldn&apos;t help anyone that wanted to move to 2 from 3 without a reindex (if thats something we will maintain on 3).&lt;/p&gt;

&lt;p&gt;So I&apos;m just exploring for comments, but maybe we leave both classes?&lt;/p&gt;</comment>
                    <comment id="12653045" author="vajda" created="Wed, 3 Dec 2008 23:24:45 +0000"  >

&lt;p&gt;This class includes all of ISOLatin1AccentFilter.&lt;/p&gt;

&lt;p&gt;Still, a difference in behaviour could be seen when using the new &lt;br/&gt;
filter with characters getting converted now that didn&apos;t before.&lt;/p&gt;

&lt;p&gt;If that sort of lack of backwards compatibility is something we don&apos;t want &lt;br/&gt;
to impose on the 3.0 release then the ISOLatin1AccentFilter class needs to &lt;br/&gt;
be preserved.&lt;/p&gt;

&lt;p&gt;Thanks for volunteering to finalize this bug !&lt;/p&gt;</comment>
                    <comment id="12653049" author="steve_rowe" created="Wed, 3 Dec 2008 23:29:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;What is the likelyhood that a forced upgrade to this class would lose words in an older index without a reindex? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problem would be words that contain characters that were not folded by ISOLatin1AccentFilter, but are folded by ASCIIFoldingFilter, and that are used in documents &lt;b&gt;and&lt;/b&gt; in queries.  Individual implementors would have to make that determination, but it&apos;s not outside the realm of possibility.&lt;/p&gt;

&lt;p&gt;If ISOLatin1AccentFilter were deprecated for 2.9, and advertised as targeted for removal in 3.0, assuming there will be a significant gap in time between the 2.9 and 3.0 releases, that would give users time to complain about its pending demise, and the plan to remove it could be revisited based on that feedback.&lt;/p&gt;</comment>
                    <comment id="12653061" author="markrmiller@gmail.com" created="Wed, 3 Dec 2008 23:48:50 +0000"  >&lt;p&gt;Everything looks pretty good to me. If you can work up one last patch, I&apos;ll put it through its paces. I&apos;d like to hear another committers opinion on deprecating ISOLatin1AccentFilter as well, but I guess we will see if we are able to draw the attention.&lt;/p&gt;

&lt;p&gt;I think we have a lot of latitude with the 3.0 move, but I don&apos;t know what the consensus is on the limits of that latitude...&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12653064" author="rcmuir" created="Wed, 3 Dec 2008 23:54:51 +0000"  >&lt;p&gt;does ISOLatin1AccentFilter really need to be deprecated? I don&apos;t think its misleading, could just reiterate it only covers Latin 1 and ref this one in the docs?&lt;/p&gt;

&lt;p&gt;just as this one documents what blocks it covers and i don&apos;t expect it to normalize U+338E to &apos;mg&apos;&lt;/p&gt;</comment>
                    <comment id="12653099" author="markrmiller@gmail.com" created="Thu, 4 Dec 2008 01:08:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;does ISOLatin1AccentFilter really need to be deprecated? I don&apos;t think its misleading, could just reiterate it only covers Latin 1 and ref this one in the docs? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thats the leaning of my thinking at the moment as well.&lt;/p&gt;</comment>
                    <comment id="12653122" author="vajda" created="Thu, 4 Dec 2008 01:53:33 +0000"  >&lt;p&gt;This latest version supercedes the previous one and moves all schwa characters to the &apos;A&apos; or &apos;a&apos; depending on their case. 0259, lowercase schwa, was missing and thus added.&lt;/p&gt;</comment>
                    <comment id="12653123" author="vajda" created="Thu, 4 Dec 2008 01:56:51 +0000"  >&lt;p&gt;Mark, I attached a new version of the patch with Robert&apos;s change.&lt;/p&gt;

&lt;p&gt;As for the deprecation of ISOLatin1AccentFilter.java, I don&apos;t have a definite opinion on this.&lt;br/&gt;
It&apos;s pretty much redundant with what this new class does. If the maintenance overhead is not too bad then keeping the duplication around may be worth the effort to preserve some backwards compat.&lt;/p&gt;

&lt;p&gt;Thanks for taking this from here !&lt;br/&gt;
Andi..&lt;/p&gt;</comment>
                    <comment id="12653132" author="markrmiller@gmail.com" created="Thu, 4 Dec 2008 02:15:18 +0000"  >&lt;p&gt;Not to be wishy washy, but deprecating is looking better to me. If there is a large outcry, it can always be revisited before its fully removed. The odds that you will be affected legitimately, appear pretty low. We can call it out in 3.0 changes, and those that really need it (which is looking like it would be a weird situation to need it) could maintain their own copy. Seem reasonable?&lt;/p&gt;</comment>
                    <comment id="12653139" author="vajda" created="Thu, 4 Dec 2008 02:52:46 +0000"  >


&lt;p&gt;Yep, I&apos;m leaning that way too.&lt;/p&gt;</comment>
                    <comment id="12653272" author="markrmiller@gmail.com" created="Thu, 4 Dec 2008 12:12:00 +0000"  >&lt;p&gt;So my final thought on this is performance...is handling more much slower? Could that be a reason to keep the Latin1 filter as well?&lt;/p&gt;</comment>
                    <comment id="12653500" author="rcmuir" created="Thu, 4 Dec 2008 21:41:24 +0000"  >&lt;p&gt;its a bit slower, but the difference is minor. i just ran some tests with some cpu-bound (these filters are right at the top of hprof.txt) indexes that i build&lt;/p&gt;

&lt;p&gt;i ran em a couple times and it looks like this... not very scientific but it gives an idea.&lt;/p&gt;

&lt;p&gt;ASCII Folding filter index time (ms): 143365&lt;br/&gt;
ISOLatin1Accent filter (ms): 134649&lt;/p&gt;</comment>
                    <comment id="12653520" author="rcmuir" created="Thu, 4 Dec 2008 22:29:14 +0000"  >&lt;p&gt;sorry, that wasn&apos;t a fair test case. a good chunk of those docs contain accents outside of latin1, so asciifoldingfilter was doing more work&lt;/p&gt;

&lt;p&gt;i reran on some heavily accented (but only latin1) data and the difference was negligible, 1% or so &lt;/p&gt;

&lt;p&gt;appears asciifoldingfilter only slows you down versus isolatin1accentfilter in the case where it probably should be! (you have accents outside of latin1 but are using latin1accentfilter)&lt;/p&gt;</comment>
                    <comment id="12653539" author="markrmiller@gmail.com" created="Thu, 4 Dec 2008 23:05:50 +0000"  >&lt;p&gt;Thanks Robert. I plan to commit this in a few days with the deprecation of the latin1 filter for removal in 3.0.&lt;/p&gt;</comment>
                    <comment id="12654159" author="markrmiller@gmail.com" created="Sat, 6 Dec 2008 23:28:21 +0000"  >&lt;p&gt;Committed, thanks a lot guys!&lt;/p&gt;</comment>
                    <comment id="12654160" author="vajda" created="Sat, 6 Dec 2008 23:40:45 +0000"  >&lt;p&gt;Thanks Mark !&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12400768">LUCENE-1343</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12395244" name="ASCIIFoldingFilter.patch" size="208995" author="vajda" created="Thu, 4 Dec 2008 01:53:33 +0000" />
                    <attachment id="12391651" name="ASCIIFoldingFilter.patch" size="212381" author="steve_rowe" created="Tue, 7 Oct 2008 18:51:49 +0100" />
                    <attachment id="12391177" name="ASCIIFoldingFilter.patch" size="212402" author="steve_rowe" created="Tue, 30 Sep 2008 00:53:37 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 17 Sep 2008 20:32:38 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12361</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26341</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>