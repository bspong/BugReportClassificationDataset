<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:15:52 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1020/LUCENE-1020.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1020] Basic tool for checking &amp; repairing an index</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1020</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;This has been requested a number of times on the mailing lists.  Most&lt;br/&gt;
recently here:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://www.gossamer-threads.com/lists/lucene/java-user/53474&quot; class=&quot;external-link&quot;&gt;http://www.gossamer-threads.com/lists/lucene/java-user/53474&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think we should provide a basic tool out of the box.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12379745">LUCENE-1020</key>
            <summary>Basic tool for checking &amp; repairing an index</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Oct 2007 12:36:20 +0100</created>
                <updated>Mon, 22 Oct 2007 15:22:40 +0100</updated>
                    <resolved>Mon, 22 Oct 2007 15:22:40 +0100</resolved>
                            <version>2.3</version>
                                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12532634" author="mikemccand" created="Fri, 5 Oct 2007 12:39:44 +0100"  >&lt;p&gt;Attached patch.&lt;/p&gt;

&lt;p&gt;I created a first cut at this.  It takes the path to the index, opens&lt;br/&gt;
it, and steps through all segments scanning terms, freq, prox, fields,&lt;br/&gt;
norms, stored fields and term vectors.  If it detects anything&lt;br/&gt;
inconsistent, and you specified &quot;-fix&quot; on the command-line, it will&lt;br/&gt;
write a new segments file that does not reference the bad segments.&lt;/p&gt;

&lt;p&gt;WARNING: this is all brand new code.  Be very careful when trying it.&lt;br/&gt;
Make a full backup copy of your index first!&lt;/p&gt;

&lt;p&gt;It also prints useful details about the index (eg &quot;roughly&quot; what&lt;br/&gt;
version of Lucene produced it) which can be used to gather diagnostics&lt;br/&gt;
when trying to debug problems with an index.&lt;/p&gt;

&lt;p&gt;Below is the output on a healthy index.  On an un-healthy index, the&lt;br/&gt;
tool prints &apos;FAILED&apos; for one or more of the segments and then prints&lt;br/&gt;
the full excpeption (reason).  But, nothing is done to the index&lt;br/&gt;
unless you specify the &apos;-fix&apos; command-line option.&lt;/p&gt;

&lt;p&gt;Healthy index output:&lt;/p&gt;


&lt;p&gt;Opening index @ contrib/benchmark/work/index&lt;/p&gt;

&lt;p&gt;Segments file=segments_3 numSegments=6 version=FORMAT_SHARED_DOC_STORE &lt;span class=&quot;error&quot;&gt;&amp;#91;Lucene 2.3&amp;#93;&lt;/span&gt;&lt;br/&gt;
  1 of 6: name=_l docCount=9039&lt;br/&gt;
    compound=false&lt;br/&gt;
    numFiles=11&lt;br/&gt;
    size (MB)=44.276&lt;br/&gt;
    docStoreOffset=0&lt;br/&gt;
    docStoreSeEgment=_0&lt;br/&gt;
    no deletions&lt;br/&gt;
    test: open reader.........OK&lt;br/&gt;
    test: fields, norms.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;3 fields&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: terms, freq, prox...OK &lt;span class=&quot;error&quot;&gt;&amp;#91;391050 terms; 6573991 terms/docs pairs; 20476680 tokens&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: stored fields.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;27117 total field count; avg 3 fields per doc&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: term vectors........OK &lt;span class=&quot;error&quot;&gt;&amp;#91;18078 total vector count; avg 2 term/freq vector fields per doc&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;  2 of 6: name=_16 docCount=9193&lt;br/&gt;
    compound=false&lt;br/&gt;
    numFiles=11&lt;br/&gt;
    size (MB)=44.743&lt;br/&gt;
    docStoreOffset=9039&lt;br/&gt;
    docStoreSeEgment=_0&lt;br/&gt;
    no deletions&lt;br/&gt;
    test: open reader.........OK&lt;br/&gt;
    test: fields, norms.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;3 fields&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: terms, freq, prox...OK &lt;span class=&quot;error&quot;&gt;&amp;#91;391013 terms; 6619615 terms/docs pairs; 20746479 tokens&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: stored fields.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;27579 total field count; avg 3 fields per doc&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: term vectors........OK &lt;span class=&quot;error&quot;&gt;&amp;#91;18386 total vector count; avg 2 term/freq vector fields per doc&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;  3 of 6: name=_1a docCount=3686&lt;br/&gt;
    compound=false&lt;br/&gt;
    numFiles=11&lt;br/&gt;
    size (MB)=11.797&lt;br/&gt;
    docStoreOffset=18232&lt;br/&gt;
    docStoreSeEgment=_0&lt;br/&gt;
    no deletions&lt;br/&gt;
    test: open reader.........OK&lt;br/&gt;
    test: fields, norms.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;3 fields&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: terms, freq, prox...OK &lt;span class=&quot;error&quot;&gt;&amp;#91;164885 terms; 1866591 terms/docs pairs; 5047412 tokens&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: stored fields.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;11058 total field count; avg 3 fields per doc&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: term vectors........OK &lt;span class=&quot;error&quot;&gt;&amp;#91;5953 total vector count; avg 1.615 term/freq vector fields per doc&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;  4 of 6: name=_1f docCount=3987&lt;br/&gt;
    compound=false&lt;br/&gt;
    numFiles=11&lt;br/&gt;
    size (MB)=11.851&lt;br/&gt;
    docStoreOffset=21918&lt;br/&gt;
    docStoreSeEgment=_0&lt;br/&gt;
    no deletions&lt;br/&gt;
    test: open reader.........OK&lt;br/&gt;
    test: fields, norms.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;3 fields&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: terms, freq, prox...OK &lt;span class=&quot;error&quot;&gt;&amp;#91;159546 terms; 1804415 terms/docs pairs; 5199299 tokens&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: stored fields.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;11961 total field count; avg 3 fields per doc&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: term vectors........OK &lt;span class=&quot;error&quot;&gt;&amp;#91;7547 total vector count; avg 1.893 term/freq vector fields per doc&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;  5 of 6: name=_1l docCount=838&lt;br/&gt;
    compound=false&lt;br/&gt;
    numFiles=11&lt;br/&gt;
    size (MB)=3.143&lt;br/&gt;
    docStoreOffset=28712&lt;br/&gt;
    docStoreSeEgment=_0&lt;br/&gt;
    no deletions&lt;br/&gt;
    test: open reader.........OK&lt;br/&gt;
    test: fields, norms.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;3 fields&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: terms, freq, prox...OK &lt;span class=&quot;error&quot;&gt;&amp;#91;68824 terms; 436884 terms/docs pairs; 1281678 tokens&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: stored fields.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;2514 total field count; avg 3 fields per doc&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: term vectors........OK &lt;span class=&quot;error&quot;&gt;&amp;#91;1617 total vector count; avg 1.93 term/freq vector fields per doc&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;  6 of 6: name=_1m docCount=450&lt;br/&gt;
    compound=false&lt;br/&gt;
    numFiles=11&lt;br/&gt;
    size (MB)=2.165&lt;br/&gt;
    docStoreOffset=29550&lt;br/&gt;
    docStoreSeEgment=_0&lt;br/&gt;
    no deletions&lt;br/&gt;
    test: open reader.........OK&lt;br/&gt;
    test: fields, norms.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;3 fields&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: terms, freq, prox...OK &lt;span class=&quot;error&quot;&gt;&amp;#91;53147 terms; 278659 terms/docs pairs; 877940 tokens&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: stored fields.......OK &lt;span class=&quot;error&quot;&gt;&amp;#91;1350 total field count; avg 3 fields per doc&amp;#93;&lt;/span&gt;&lt;br/&gt;
    test: term vectors........OK &lt;span class=&quot;error&quot;&gt;&amp;#91;895 total vector count; avg 1.989 term/freq vector fields per doc&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;No problems were detected with this index.&lt;/p&gt;</comment>
                    <comment id="12536209" author="mikemccand" created="Fri, 19 Oct 2007 14:12:17 +0100"  >&lt;p&gt;Attached patch: another rev of this tool, with a few minor additions.&lt;/p&gt;

&lt;p&gt;I plan to commit in a day or two.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12367140" name="LUCENE-1020.patch" size="12863" author="mikemccand" created="Fri, 5 Oct 2007 12:39:43 +0100" />
                    <attachment id="12368009" name="LUCENE-1020.take2.patch" size="13212" author="mikemccand" created="Fri, 19 Oct 2007 14:12:17 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12725</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26709</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>