<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:58:23 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3534/LUCENE-3534.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3534] Backport FilteredQuery/IndexSearcher changes to 3.x: Remove filter logic from IndexSearcher and delegate to FilteredQuery</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3534</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Spinoff from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1536&quot; title=&quot;if a filter can support random access API, we should use it&quot;&gt;&lt;del&gt;LUCENE-1536&lt;/del&gt;&lt;/a&gt;: We simplified the code in IndexSearcher to no longer do the filtering there, instead wrap all Query with FilteredQuery, if a non-null filter is given. The conjunction code would then only exist in FilteredQuery which makes it easier to maintain. Currently both implementations differ in 3.x, in trunk we used the more optimized IndexSearcher variant with addition of a simplified in-order conjunction code.&lt;/p&gt;

&lt;p&gt;This issue will backport those changes (without random access bits).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12528666">LUCENE-3534</key>
            <summary>Backport FilteredQuery/IndexSearcher changes to 3.x: Remove filter logic from IndexSearcher and delegate to FilteredQuery</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2011 13:40:27 +0100</created>
                <updated>Sun, 27 Nov 2011 12:29:34 +0000</updated>
                    <resolved>Tue, 25 Oct 2011 18:15:01 +0100</resolved>
                                            <fixVersion>3.5</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13134989" author="thetaphi" created="Tue, 25 Oct 2011 13:44:33 +0100"  >&lt;p&gt;I will start merging IndexSearcher and FilteredQuery changes to 3.x soon.&lt;/p&gt;</comment>
                    <comment id="13135128" author="thetaphi" created="Tue, 25 Oct 2011 16:00:23 +0100"  >&lt;p&gt;My problem is that this backport is almost impossible: Searchable and Searcher abstract class prevent this from being done.&lt;/p&gt;

&lt;p&gt;We have several choices:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;we can heavily break backwards and maybe nuke Searcher and Searchable earlier&lt;/li&gt;
	&lt;li&gt;we keep API intact, only call FilteredQuery.weight() from inside IndexSaercher instead of duplicating code&lt;/li&gt;
	&lt;li&gt;close issue as won&apos;t fix&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Any comments?&lt;/p&gt;</comment>
                    <comment id="13135131" author="rcmuir" created="Tue, 25 Oct 2011 16:06:10 +0100"  >&lt;p&gt;i dont think we should heavy-break in a minor release, especially since we cannot use random access Bits.&lt;/p&gt;</comment>
                    <comment id="13135132" author="thetaphi" created="Tue, 25 Oct 2011 16:08:23 +0100"  >&lt;p&gt;I tend to the second solution, as the whole issue was about removing the code duplication between IS and FQ (which also have different implementations of the same code).&lt;/p&gt;</comment>
                    <comment id="13135141" author="rcmuir" created="Tue, 25 Oct 2011 16:24:22 +0100"  >&lt;p&gt;for the second solution, we get some benefits of cleanup, without breaks right? Sounds good to me.&lt;/p&gt;</comment>
                    <comment id="13135173" author="thetaphi" created="Tue, 25 Oct 2011 16:58:53 +0100"  >&lt;p&gt;Here the easy implementation, that simply removes code duplication and uses the same scorer for both implementations (IS and FQ).&lt;/p&gt;

&lt;p&gt;This patch uses a hack, to provide access to the wrapped scorer from inside IndexSearcher.&lt;/p&gt;

&lt;p&gt;This is all with no public API change at all.&lt;/p&gt;</comment>
                    <comment id="13135219" author="thetaphi" created="Tue, 25 Oct 2011 17:47:08 +0100"  >&lt;p&gt;Small optimization, as in 3.x we dont need to move the filter to first doc, so the scorer has one less if-check.&lt;/p&gt;

&lt;p&gt;Also the previous patch was missing the deprecated similarity pass-through to Scorer.&lt;/p&gt;

&lt;p&gt;I think thats ready to commit, any comments?&lt;/p&gt;</comment>
                    <comment id="13135224" author="rcmuir" created="Tue, 25 Oct 2011 17:51:20 +0100"  >&lt;p&gt;+1, i prefer the hackedy-h&#228;ck-hack over duplicated code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13135226" author="thetaphi" created="Tue, 25 Oct 2011 17:53:07 +0100"  >&lt;p&gt;hey, there was an umlaut!&lt;/p&gt;</comment>
                    <comment id="13135236" author="thetaphi" created="Tue, 25 Oct 2011 18:05:42 +0100"  >&lt;blockquote&gt;&lt;p&gt;Robert Muir added a comment - 25/Oct/11 16:51 - &lt;b&gt;edited&lt;/b&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Much better! I will commit soon and move forward to nuking SpanFilters &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13135243" author="thetaphi" created="Tue, 25 Oct 2011 18:15:01 +0100"  >&lt;p&gt;Committed 3.x revision: 1188805&lt;/p&gt;</comment>
                    <comment id="13157801" author="thetaphi" created="Sun, 27 Nov 2011 12:29:34 +0000"  >&lt;p&gt;Bulk close after release of 3.5&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12500717" name="LUCENE-3463.patch" size="13772" author="thetaphi" created="Tue, 25 Oct 2011 17:47:08 +0100" />
                    <attachment id="12500699" name="LUCENE-3534.patch" size="14241" author="thetaphi" created="Tue, 25 Oct 2011 16:58:53 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 25 Oct 2011 15:06:10 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>214527</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24163</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>