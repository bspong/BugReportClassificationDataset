<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:15:57 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1452/LUCENE-1452.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1452] Binary field content lost during optimize</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1452</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Scenario:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;create an index with arbitrary content, and close it&lt;/li&gt;
	&lt;li&gt;open IndexWriter again, and add a document with binary field (stored but not compressed)&lt;/li&gt;
	&lt;li&gt;close IndexWriter &lt;em&gt;without&lt;/em&gt; optimizing, so that the new document is in a separate segment.&lt;/li&gt;
	&lt;li&gt;open IndexReader. You can read the last document and its binary field just fine.&lt;/li&gt;
	&lt;li&gt;open IndexWriter, optimize the index, close IndexWriter&lt;/li&gt;
	&lt;li&gt;open IndexReader. Now the field is still present (not null) and is marked as binary, but the data is not there - Field.getBinaryLength() returns 0.&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Ubuntu 8.04, x86_64&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 11.0-b15, mixed mode)&lt;/p&gt;</environment>
            <key id="12408460">LUCENE-1452</key>
            <summary>Binary field content lost during optimize</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="ab">Andrzej Bialecki </reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Nov 2008 22:31:39 +0000</created>
                <updated>Sun, 10 Oct 2010 14:54:27 +0100</updated>
                    <resolved>Fri, 14 Nov 2008 10:31:42 +0000</resolved>
                            <version>2.4</version>
                <version>2.9</version>
                                <fixVersion>2.4.1</fixVersion>
                <fixVersion>2.9</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12647438" author="ab" created="Thu, 13 Nov 2008 22:35:46 +0000"  >&lt;p&gt;Test case to illustrate the problem. This happens both in 2.4.0 and trunk, although the patch is from trunk.&lt;/p&gt;

&lt;p&gt;Unfortunately, I don&apos;t know the reason for this behavior, so I can&apos;t provide a fix.&lt;/p&gt;</comment>
                    <comment id="12647556" author="mikemccand" created="Fri, 14 Nov 2008 09:51:14 +0000"  >&lt;p&gt;I found the issue.  It was caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1219&quot; title=&quot;support array/offset/ length setters for Field with binary data&quot;&gt;&lt;del&gt;LUCENE-1219&lt;/del&gt;&lt;/a&gt; (first released in&lt;br/&gt;
2.4.0), which added a reuse API to Fieldable for binary fields.  When&lt;br/&gt;
loading a field for merging we were failing to set the binaryLength.&lt;br/&gt;
A similar case affected lazy field merging (I extended the test case&lt;br/&gt;
to show it).&lt;/p&gt;

&lt;p&gt;This is a silent data loss bug.  It only affects non-compressed binary&lt;br/&gt;
fields.  Whenever segments are merged such that the segment&apos;s fields&lt;br/&gt;
are non-congruent (ie, the same field name was assigned different&lt;br/&gt;
field numbers across the segments being merged), then binary fields in&lt;br/&gt;
those segments are all set to 0 length.&lt;/p&gt;

&lt;p&gt;I will commit shortly.&lt;/p&gt;</comment>
                    <comment id="12647559" author="mikemccand" created="Fri, 14 Nov 2008 10:03:32 +0000"  >&lt;p&gt;Committed revision 713962 to trunk.&lt;/p&gt;

&lt;p&gt;I think we should back-port this for a future 2.4.1.&lt;/p&gt;</comment>
                    <comment id="12647569" author="mikemccand" created="Fri, 14 Nov 2008 10:31:42 +0000"  >&lt;p&gt;Committed revision 713970 on 2.4 branch.&lt;/p&gt;

&lt;p&gt;Thanks for reporting this Andrzej!&lt;/p&gt;</comment>
                    <comment id="12919604" author="raz71abb6" created="Sun, 10 Oct 2010 14:54:27 +0100"  >&lt;p&gt;&lt;a href=&quot;http://getflightsto.com&quot; class=&quot;external-link&quot;&gt;flights&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://childcareforums.com&quot; class=&quot;external-link&quot;&gt;baby names&lt;/a&gt;&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12393901" name="binaryField-junit.patch" size="3513" author="ab" created="Thu, 13 Nov 2008 22:35:46 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 14 Nov 2008 09:51:14 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12299</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26275</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>