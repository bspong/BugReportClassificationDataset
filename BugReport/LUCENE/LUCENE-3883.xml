<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:17:14 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3883/LUCENE-3883.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3883] Analysis for Irish</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3883</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Adds analysis for Irish.&lt;/p&gt;

&lt;p&gt;The stemmer is generated from a snowball stemmer. I&apos;ve sent it to Martin Porter, who says it will be added during the week.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12547034">LUCENE-3883</key>
            <summary>Analysis for Irish</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="jimregan">Jim Regan</reporter>
                        <labels>
                        <label>analysis</label>
                        <label>newbie</label>
                    </labels>
                <created>Mon, 19 Mar 2012 16:12:03 +0000</created>
                <updated>Fri, 10 May 2013 11:43:42 +0100</updated>
                    <resolved>Sat, 24 Mar 2012 16:22:45 +0000</resolved>
                                            <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="13232702" author="jimregan" created="Mon, 19 Mar 2012 16:13:53 +0000"  >&lt;p&gt;Patch adding Irish analysis&lt;/p&gt;</comment>
                    <comment id="13232704" author="jimregan" created="Mon, 19 Mar 2012 16:17:55 +0000"  >&lt;p&gt;Patch, redone from top level of svn.&lt;/p&gt;</comment>
                    <comment id="13232706" author="rcmuir" created="Mon, 19 Mar 2012 16:22:08 +0000"  >&lt;p&gt;Thanks Jim! This looks really nicely done... &lt;/p&gt;

&lt;p&gt;Out of curiousity could you share your snowball rules (the .sbl) with us?&lt;/p&gt;</comment>
                    <comment id="13232712" author="thetaphi" created="Mon, 19 Mar 2012 16:33:27 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;very funny lowercase filter! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; One thing: It does not actually ArrayIndexOutOfBoundsEx in the filter because of the way how CharTermAttributeImpl is implemented internally, but theoretically there is a length check missing. The nUpper/tUpper stuff can get out of bounds if the length of term in 0 or 1 (which are valid length). But thats only a minor complaint about the code. Otherwise looks great. Just appearing from no irish support at all! really needed! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Uwe&lt;/p&gt;</comment>
                    <comment id="13232717" author="rcmuir" created="Mon, 19 Mar 2012 16:36:40 +0000"  >&lt;p&gt;By the way I created &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3884&quot; title=&quot;Move elisionfilter out of .fr package&quot;&gt;&lt;del&gt;LUCENE-3884&lt;/del&gt;&lt;/a&gt; to move the ElisionFilter out of the french package&lt;br/&gt;
into a more general .util package. That doesnt need to hold up this issue: it just&lt;br/&gt;
reminded me we should move it because its not really french-specific.&lt;/p&gt;</comment>
                    <comment id="13232720" author="jimregan" created="Mon, 19 Mar 2012 16:38:58 +0000"  >&lt;p&gt;Irish snowball script&lt;/p&gt;</comment>
                    <comment id="13232721" author="jimregan" created="Mon, 19 Mar 2012 16:41:35 +0000"  >&lt;p&gt;Yeah, it&apos;s quite an odd thing (Scots Gaelic has a similar phenomenon, but they consistently keep the hyphen), but it does help with the stemmer in those cases to know that the t or n at the start of the word is due only to mutation.&lt;/p&gt;</comment>
                    <comment id="13232732" author="jimregan" created="Mon, 19 Mar 2012 16:56:48 +0000"  >&lt;p&gt;I&apos;m not sure if I actually needed to use the ElisionFilter, because the stemmer handles those - because of the initial mutation in Irish, trimming the start of the word is more important than trimming the end. I was copying the Catalan analyser, and using ElisionFilter seemed like The Thing To Do.&lt;/p&gt;</comment>
                    <comment id="13232741" author="jimregan" created="Mon, 19 Mar 2012 17:20:14 +0000"  >&lt;p&gt;New version of patch, also checking that chLen (array length) &amp;gt; 1&lt;/p&gt;</comment>
                    <comment id="13233159" author="rcmuir" created="Tue, 20 Mar 2012 03:26:06 +0000"  >&lt;p&gt;Thanks for updating the patch Jim!&lt;/p&gt;

&lt;p&gt;one concern doing some very very rudimentary testing:&lt;/p&gt;

&lt;p&gt;we have special lowercasing for situations like nAthair -&amp;gt; n-athair,&lt;/p&gt;

&lt;p&gt;which the snowball rules then strip:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;define initial_morph as (
  [substring] among (
    &apos;h-&apos; &apos;n-&apos; &apos;t-&apos; //nAthair -&amp;gt; n-athair, but alone are problematic
    (delete)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is if the input initially comes as n-athair, Unicode break rules&lt;br/&gt;
will split this up on the hyphen into two tokens &lt;/p&gt;
{n, athair}
&lt;p&gt;. You can visualize this at &lt;a href=&quot;http://unicode.org/cldr/utility/breaks.jsp&quot; class=&quot;external-link&quot;&gt;http://unicode.org/cldr/utility/breaks.jsp&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This means we can add many spurious &apos;n&apos; tokens in the index...&lt;/p&gt;

&lt;p&gt;So we have two potential solutions to this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;we can simply add &apos;n&apos;, &apos;h&apos;, &apos;t&apos;, etc to the stopwords list. This is the simplest solution. Would this be too aggressive?&lt;/li&gt;
	&lt;li&gt;we can add a CharFilter for IrishAnalyzer to prevent this splitting from happening. This is more complex.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    <comment id="13233169" author="rcmuir" created="Tue, 20 Mar 2012 03:38:15 +0000"  >&lt;p&gt;Hmm another downside of #1 is that with a simple stopfilter approach, position increments won&apos;t line up&lt;br/&gt;
if we have a phrase query of &quot;n-athair&quot; with indexed nAthair.&lt;/p&gt;

&lt;p&gt;So I start to lean towards #2 since it would be a better solution... but I&apos;m going to think about it&lt;br/&gt;
and see if I come up with any other ideas.&lt;/p&gt;

&lt;p&gt;Separately, what about h- when succeeded by a vowel? Is there actually usually a hyphen here?&lt;br/&gt;
(Wikipedia says no, playing around with GaelSpell seems to agree, but I don&apos;t know anything about this language!)&lt;br/&gt;
Would this case be too aggressive to handle?&lt;/p&gt;</comment>
                    <comment id="13233183" author="rcmuir" created="Tue, 20 Mar 2012 04:13:26 +0000"  >&lt;p&gt;To make matters worse: this exact example of splitting on hyphen for this Irish case is &lt;br/&gt;
actually mentioned on &lt;a href=&quot;http://en.wikipedia.org/wiki/Hyphen#In_computing&quot; class=&quot;external-link&quot;&gt;http://en.wikipedia.org/wiki/Hyphen#In_computing&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;From there it seems like the right thing to do is heuristically convert to &lt;br/&gt;
U+2011 (non-breaking hyphen) but this only affects Unicode line-break rules,&lt;br/&gt;
not word break rules &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;So it seems like the least hackish workaround would be for a charfilter to &lt;br/&gt;
convert n-athair -&amp;gt; nAthair (to prevent the tokenizer from splitting it up),&lt;br/&gt;
since the IrishLowerCaseFilter will convert it back and stem it anyway.&lt;/p&gt;

&lt;p&gt;I&apos;ll see if i can hack something up.&lt;/p&gt;</comment>
                    <comment id="13233195" author="rcmuir" created="Tue, 20 Mar 2012 04:28:19 +0000"  >&lt;p&gt;updated patch, with a simple solution to the hyphen-phrasequery-problem:&lt;/p&gt;

&lt;p&gt;I added a special stopset just for these:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  /**
   * When StandardTokenizer splits t&#8209;athair into {t, athair}, we don&apos;t
   * want to cause a position increment, otherwise there will be problems
   * with phrase queries versus tAthair (which would not have a gap).
   */
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CharArraySet HYPHENATIONS = CharArraySet.unmodifiableSet(
      &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CharArraySet(Version.LUCENE_CURRENT,
          Arrays.asList(
              &lt;span class=&quot;code-quote&quot;&gt;&quot;h&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;n&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;t&quot;&lt;/span&gt;
          ), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is used with enablePositionIncrements=false to ensure no gap is added... I also added a simple test for this.&lt;/p&gt;</comment>
                    <comment id="13233465" author="jimregan" created="Tue, 20 Mar 2012 15:01:30 +0000"  >&lt;p&gt;Wow! Thanks Robert!&lt;/p&gt;

&lt;p&gt;There isn&apos;t usually a hyphen with &apos;h&apos; before a vowel, but I&apos;ve started to see it recently &amp;#8211; there are no native Irish words beginning with &apos;h&apos;, so it used to be relatively unambiguous that a &apos;h&apos; was a mutation, but with an increase of scientific literature in Irish, there are more Greek and Latin loan words being added which do begin with &apos;h&apos;, so it&apos;s no longer clear.&lt;/p&gt;</comment>
                    <comment id="13233470" author="rcmuir" created="Tue, 20 Mar 2012 15:07:34 +0000"  >&lt;p&gt;Thanks Jim. Personally I think this patch is ready to be committed. &lt;/p&gt;

&lt;p&gt;I&apos;m just going to wait a bit in case you get any feedback from Martin or other snowball developers,&lt;br/&gt;
but I won&apos;t wait too long &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                    <comment id="13233593" author="jimregan" created="Tue, 20 Mar 2012 17:31:10 +0000"  >&lt;p&gt;Great &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Regarding the initial &apos;h&apos;, I asked Kevin Scannell (among other feathers in his cap, he created the dictionary used in GaelSpell, and ran an Irish-language search engine), who said: &lt;br/&gt;
&quot;I looked carefully at how often initial h is a prefix vs not a while ago.  I can send you those data - non-prefixes might be more common than you&apos;d think in running text bc of proper names, English mixed in, etc.  So upshot is it&apos;s a bad idea to strip all initial h&apos;s with no hyphen following. &lt;br/&gt;
  As far as h- (with hyphen) goes, it&apos;s non-standard but common enough that I&apos;d leave it in the stemmer.   Not like there would be false positives in that case if the hyphen is there.&apos;&lt;/p&gt;</comment>
                    <comment id="13233597" author="rcmuir" created="Tue, 20 Mar 2012 17:33:42 +0000"  >&lt;p&gt;This makes sense to me, I agree with the conservative approach here!&lt;/p&gt;</comment>
                    <comment id="13233621" author="dsmiley" created="Tue, 20 Mar 2012 17:53:29 +0000"  >&lt;p&gt;How ironic this issue is created nearly on St. Patrick&apos;s Day.&lt;/p&gt;</comment>
                    <comment id="13233632" author="jimregan" created="Tue, 20 Mar 2012 18:01:47 +0000"  >&lt;p&gt;It was on my mind, a little &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I made the stemmer on the 15th, on the 17th I made ICU transliteration rules for Irish-&amp;gt;IPA, but that&apos;s not quite relevant here.&lt;/p&gt;</comment>
                    <comment id="13235598" author="rcmuir" created="Thu, 22 Mar 2012 14:27:53 +0000"  >&lt;p&gt;Same patch but with the solr pieces too (factory/test for the lowercasefilter, text_ga fieldtype, resources synced, etc).&lt;/p&gt;</comment>
                    <comment id="13237591" author="rcmuir" created="Sat, 24 Mar 2012 16:22:45 +0000"  >&lt;p&gt;Thank you very much Jim! I just committed this.&lt;/p&gt;</comment>
                    <comment id="13237599" author="jimregan" created="Sat, 24 Mar 2012 16:38:52 +0000"  >&lt;p&gt;Yay! Thanks for all your help!&lt;/p&gt;</comment>
                    <comment id="13271783" author="jimregan" created="Wed, 9 May 2012 21:42:05 +0100"  >&lt;p&gt;Just to follow up, the Irish stemmer is now available from the Snowball site: &lt;a href=&quot;http://snowball.tartarus.org/otherapps/oregan/intro.html&quot; class=&quot;external-link&quot;&gt;http://snowball.tartarus.org/otherapps/oregan/intro.html&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="13271792" author="rcmuir" created="Wed, 9 May 2012 21:47:05 +0100"  >&lt;p&gt;Thanks Jim! I already removed our local copy of the irish.sbl as its now available on&lt;br/&gt;
the snowball site.&lt;/p&gt;

&lt;p&gt;I have to investigate the Czech implementation, I think we should make it available&lt;br/&gt;
as well, since it also supports stemming of derivational endings: Dawid opened&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-4042&quot; title=&quot;New snowball stemmers (Irish gaelic and Czech)&quot;&gt;LUCENE-4042&lt;/a&gt; for that.&lt;/p&gt;

&lt;p&gt;Thanks for contributing these to snowball.&lt;/p&gt;</comment>
                    <comment id="13271831" author="jimregan" created="Wed, 9 May 2012 22:32:02 +0100"  >&lt;p&gt;I wouldn&apos;t recommend the aggressive mode, and I regret that I left it uncommented. If you really think an alternative would be welcome, it would be quite easy to get the best of both (in fact, I spent roughly half the time on that trying to beat Snowball into overstemming to match the original).&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12518912" name="irish.sbl" size="2541" author="jimregan" created="Mon, 19 Mar 2012 16:38:57 +0000" />
                    <attachment id="12519441" name="LUCENE-3883.patch" size="51427" author="rcmuir" created="Thu, 22 Mar 2012 14:27:53 +0000" />
                    <attachment id="12519019" name="LUCENE-3883.patch" size="42932" author="rcmuir" created="Tue, 20 Mar 2012 04:28:18 +0000" />
                    <attachment id="12518913" name="LUCENE-3883.patch" size="40697" author="jimregan" created="Mon, 19 Mar 2012 17:20:14 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 19 Mar 2012 16:22:08 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>232193</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>23818</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>