<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:22:47 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2248/LUCENE-2248.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2248] Tests using Version.LUCENE_CURRENT will produce problems in backwards branch, when development for 3.2 starts</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2248</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;A lot of tests for the most-recent functionality in Lucene use Version.LUCENE_CURRENT, which is fine in trunk, as we use the most recent version without hassle and changing this in later versions.&lt;/p&gt;

&lt;p&gt;The problem is, if we copy these tests to backwards branch after 3.1 is out and then start to improve analyzers, we then will have the maintenance hell for backwards tests. And we loose backward compatibility testing for older versions. If we would specify a specific version like LUCENE_31 in our tests, after moving to backwards they must work without any changes!&lt;/p&gt;

&lt;p&gt;To not always modify all tests after a new version comes out (e.g. after switching to 3.2 dev), I propose to do the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;declare a static final Version TEST_VERSION = Version.LUCENE_CURRENT (or better) Version.LUCENE_31 in LuceneTestCase(4J).&lt;/li&gt;
	&lt;li&gt;change all tests that use Version.LUCENE_CURRENT using eclipse refactor to use this constant and remove unneeded import statements.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When we then move the tests to backward we must only change one line, depending on how we define this constant:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If in trunk LuceneTestCase it&apos;s Version.LUCENE_CURRENT, we just change the backwards branch to use the version numer of the released thing.&lt;/li&gt;
	&lt;li&gt;If trunk already uses the LUCENE_31 constant (I prefer this), we do not need to change backwards, but instead when switching version numbers we just move trunk forward to the next major version (after added to Version enum).&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
            <key id="12455290">LUCENE-2248</key>
            <summary>Tests using Version.LUCENE_CURRENT will produce problems in backwards branch, when development for 3.2 starts</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Feb 2010 09:40:32 +0000</created>
                <updated>Fri, 10 May 2013 11:43:47 +0100</updated>
                    <resolved>Wed, 10 Feb 2010 13:36:35 +0000</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                <component>core/other</component>
                <component>core/query/scoring</component>
                <component>core/queryparser</component>
                <component>core/search</component>
                <component>core/store</component>
                <component>core/termvectors</component>
                <component>general/javadocs</component>
                <component>modules/analysis</component>
                <component>modules/benchmark</component>
                <component>modules/highlighter</component>
                <component>modules/other</component>
                <component>modules/spatial</component>
                <component>modules/spellchecker</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                                                  <comments>
                    <comment id="12829567" author="mikemccand" created="Thu, 4 Feb 2010 10:20:32 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                    <comment id="12829569" author="simonw" created="Thu, 4 Feb 2010 10:26:03 +0000"  >&lt;p&gt;Uwe, as I already said while we where discussion this, I would add the version to LuceneTestCase (or equivalent for JU4)  and then we can do the tests in sub-issues which prevents those super huge patches.&lt;/p&gt;

&lt;p&gt;thoughts?!&lt;/p&gt;</comment>
                    <comment id="12830527" author="thetaphi" created="Sat, 6 Feb 2010 17:27:14 +0000"  >&lt;p&gt;Here my first patch. Please tell me which name for the static constant should be used, I use CURRENT_VERSION. Maybe something with &quot;test&quot; in it?&lt;/p&gt;

&lt;p&gt;I transformed TestCharArraySet as a demonstation.&lt;/p&gt;</comment>
                    <comment id="12830543" author="simonw" created="Sat, 6 Feb 2010 18:40:25 +0000"  >&lt;p&gt;Patch looks good uwe, I think we should reflect its purpose in the name maybe TEST_VERSION_LATEST or TEST_VERSION_CURRENT&lt;/p&gt;

&lt;p&gt;simon &lt;/p&gt;</comment>
                    <comment id="12830547" author="thetaphi" created="Sat, 6 Feb 2010 18:54:16 +0000"  >&lt;p&gt;Simon: I opened a sub-issue for contrib and assigned you to it!&lt;/p&gt;

&lt;p&gt;I will change to TEST_VERSION_CURRENT and then run eclipse to do the refactoring.&lt;/p&gt;</comment>
                    <comment id="12830548" author="thetaphi" created="Sat, 6 Feb 2010 18:57:31 +0000"  >&lt;p&gt;Patch with updated constant name.&lt;/p&gt;

&lt;p&gt;Simon, if you like you can use it as basis and start with contrib. &lt;/p&gt;</comment>
                    <comment id="12830550" author="simonw" created="Sat, 6 Feb 2010 19:00:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Simon, if you like you can use it as basis and start with contrib. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;will do...&lt;/p&gt;</comment>
                    <comment id="12830924" author="thetaphi" created="Mon, 8 Feb 2010 12:40:18 +0000"  >&lt;p&gt;Here the patch for all core tests.&lt;/p&gt;

&lt;p&gt;I also did a eclipse import cleanup to remove the unused Version imports. Now the code is also clean from a full-specified class name (o.a.l.util.Version.LUCENE_CURRENT), I introduced during my 3.0 refactoring (I did not add the import statements at this time).&lt;/p&gt;

&lt;p&gt;I would like to commit this soon, if nobody objects, because the patch could get out of sync very fast.&lt;/p&gt;</comment>
                    <comment id="12830936" author="thetaphi" created="Mon, 8 Feb 2010 13:30:26 +0000"  >&lt;p&gt;Updated patch, I missed some LUCENE_CURRENT occurences. Now all are catched and changed. My sed-command was wrong (missed to replace all occurences in one line) &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;All test pass still. Will commit if nobody objects this evening.&lt;/p&gt;</comment>
                    <comment id="12831984" author="thetaphi" created="Wed, 10 Feb 2010 13:36:35 +0000"  >&lt;p&gt;Committed revision: 908496&lt;/p&gt;</comment>
                    <comment id="12831986" author="thetaphi" created="Wed, 10 Feb 2010 13:37:56 +0000"  >&lt;p&gt;I forgot to add the latest patch.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12435442" name="LUCENE-2248.patch" size="376014" author="thetaphi" created="Wed, 10 Feb 2010 13:37:56 +0000" />
                    <attachment id="12435165" name="LUCENE-2248.patch" size="374905" author="thetaphi" created="Mon, 8 Feb 2010 13:30:26 +0000" />
                    <attachment id="12435163" name="LUCENE-2248.patch" size="373392" author="thetaphi" created="Mon, 8 Feb 2010 12:40:18 +0000" />
                    <attachment id="12435085" name="LUCENE-2248.patch" size="10099" author="thetaphi" created="Sat, 6 Feb 2010 18:57:31 +0000" />
                    <attachment id="12435083" name="LUCENE-2248.patch" size="9969" author="thetaphi" created="Sat, 6 Feb 2010 17:27:14 +0000" />
                </attachments>
            <subtasks>
            <subtask id="12455548">LUCENE-2251</subtask>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>5.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 4 Feb 2010 10:20:32 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11540</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25477</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>