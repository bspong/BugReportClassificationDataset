<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:12:15 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3184/LUCENE-3184.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3184] add LuceneTestCase.rarely()/LuceneTestCase.atLeast()</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3184</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3175&quot; title=&quot;speed up core tests&quot;&gt;&lt;del&gt;LUCENE-3175&lt;/del&gt;&lt;/a&gt;, the tests were sped up a lot by using reasonable number of iterations normally, but cranking up for NIGHTLY.&lt;br/&gt;
we also do crazy things more &apos;rarely&apos; for normal builds (e.g. simpletext, payloads, crazy merge params, etc)&lt;br/&gt;
also, we found some bugs by doing this, because in general our parameters are too fixed.&lt;/p&gt;

&lt;p&gt;however, it made the code look messy... I propose some new methods:&lt;br/&gt;
instead of some crazy code in your test like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numdocs = (TEST_NIGHTLY ? 1000 : 100) * RANDOM_MULTIPLIER;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you use:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numdocs = atLeast(100);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this will apply the multiplier, also factor in nightly, and finally add some random fudge... so e.g. in local runs its sometimes 127 docs, sometimes 113 docs, etc.&lt;/p&gt;

&lt;p&gt;additionally instead of code like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((TEST_NIGHTLY &amp;amp;&amp;amp; random.nextBoolean()) || (random.nextInt(20) == 17)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;you do&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rarely()) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;which applies NIGHTLY and also the multiplier (logarithmic growth).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12509631">LUCENE-3184</key>
            <summary>add LuceneTestCase.rarely()/LuceneTestCase.atLeast()</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jun 2011 20:51:29 +0100</created>
                <updated>Sun, 27 Nov 2011 12:29:25 +0000</updated>
                    <resolved>Sun, 30 Oct 2011 04:31:30 +0000</resolved>
                                            <fixVersion>3.5</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13046170" author="rcmuir" created="Wed, 8 Jun 2011 20:52:02 +0100"  >&lt;p&gt;here&apos;s a patch, also includes some random speedups to some of these tests.&lt;/p&gt;</comment>
                    <comment id="13046172" author="mikemccand" created="Wed, 8 Jun 2011 20:53:49 +0100"  >&lt;p&gt;Looks great!  I love the LTC.rarely, usually, atLeast methods &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13046280" author="rcmuir" created="Thu, 9 Jun 2011 00:40:54 +0100"  >&lt;p&gt;we can fix the remaining tests to use this stuff as we get around to them.&lt;/p&gt;</comment>
                    <comment id="13048514" author="thetaphi" created="Mon, 13 Jun 2011 12:13:55 +0100"  >&lt;p&gt;There are some problems now in nightly builds with OOMs (boith 3.x and trunk). We can do either:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;reduce some nightly settings&lt;/li&gt;
	&lt;li&gt;raise -Xmx if nightly=true, maybe dependent on number of iterations, too?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="13048515" author="thetaphi" created="Mon, 13 Jun 2011 12:15:47 +0100"  >&lt;p&gt;All OOMs are related to FST usage (mostly the one with the big file and lots of iterations):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.lucene.util.fst.TestFSTs.testBigSet&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;but also:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.lucene.index.TestPerFieldCodecSupport.testStressPerFieldCodec&lt;/li&gt;
	&lt;li&gt;org.apache.lucene.search.TestPhraseQuery.testRandomPhrases&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="13048517" author="thetaphi" created="Mon, 13 Jun 2011 12:19:34 +0100"  >&lt;p&gt;I have also to note, that the tests now take horribly long in nightly. One build took 2 hrs and was finally failing at testBigSet. So it was not even running module/contrib tests, it took 2hrs for test-core in Lucene. Clover did also not run, but it does &lt;b&gt;not&lt;/b&gt; use nightly or more than one iteration.&lt;/p&gt;</comment>
                    <comment id="13139535" author="rcmuir" created="Sun, 30 Oct 2011 04:31:30 +0000"  >&lt;p&gt;I think uwe&apos;s reported problems are fixed&lt;/p&gt;</comment>
                    <comment id="13157752" author="thetaphi" created="Sun, 27 Nov 2011 12:29:25 +0000"  >&lt;p&gt;Bulk close after release of 3.5&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12481854" name="LUCENE-3184.patch" size="39500" author="rcmuir" created="Wed, 8 Jun 2011 20:52:02 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 8 Jun 2011 19:53:49 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2951</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24513</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>