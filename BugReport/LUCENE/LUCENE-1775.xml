<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:06:11 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1775/LUCENE-1775.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1775] Change remaining contrib streams/filters to use new TokenStream API</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1775</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;All other contrib streams/filters have already been converted with &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1460&quot; title=&quot;Change all contrib TokenStreams/Filters to use the new TokenStream API&quot;&gt;&lt;del&gt;LUCENE-1460&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The two shingle filters are the last ones we need to convert.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12431974">LUCENE-1775</key>
            <summary>Change remaining contrib streams/filters to use new TokenStream API</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="michaelbusch">Michael Busch</assignee>
                                <reporter username="michaelbusch">Michael Busch</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Aug 2009 23:59:36 +0100</created>
                <updated>Mon, 16 May 2011 19:15:40 +0100</updated>
                    <resolved>Mon, 3 Aug 2009 23:45:44 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12738010" author="michaelbusch" created="Sun, 2 Aug 2009 08:54:15 +0100"  >&lt;p&gt;First half is done:&lt;br/&gt;
ShingleFilter and ShingleFilterTest are converted to the new API.&lt;/p&gt;

&lt;p&gt;ShingleFilter is much more efficient now, it clones much less often and computes the tokens mostly on the fly now. &lt;/p&gt;

&lt;p&gt;Would be good if someone could review my changes.&lt;/p&gt;

&lt;p&gt;We still need to convert ShingleMatrixFilter.&lt;/p&gt;</comment>
                    <comment id="12738016" author="michaelbusch" created="Sun, 2 Aug 2009 09:16:47 +0100"  >&lt;p&gt;Converted TestShingleMatrixFilter. Not the actual filter yet.&lt;/p&gt;</comment>
                    <comment id="12738021" author="michaelbusch" created="Sun, 2 Aug 2009 09:55:45 +0100"  >&lt;p&gt;ShingleMatrixFilter is a very complicated filter. It seems that it is implemented in a very inefficient way, it does lots of cloning. While I was able to fully convert ShingleFilter in a way, so that it is now much more efficient now, I&apos;m not going to do that with the ShingleMatrixFilter.&lt;br/&gt;
I don&apos;t know the code well enough to even try and with 1000 LOC it&apos;s very complex.&lt;/p&gt;

&lt;p&gt;The drawback of not fully converting it is that if someone uses custom Attributes, i. e. ones that are not in core Lucene, it is undefined what the filter will do with those Attributes. However, I don&apos;t even know what the behavior should be. If only core Attributes are used, everything is working fine, as the passing junits show.&lt;/p&gt;

&lt;p&gt;I added a corresponding comment to the javadocs of that class.&lt;/p&gt;</comment>
                    <comment id="12738022" author="michaelbusch" created="Sun, 2 Aug 2009 09:57:25 +0100"  >&lt;p&gt;I&apos;ll commit this in a couple of days if nobody objects.&lt;/p&gt;</comment>
                    <comment id="12738026" author="thetaphi" created="Sun, 2 Aug 2009 10:24:27 +0100"  >&lt;p&gt;This ShingleMatrixFilter is really a pain!&lt;/p&gt;

&lt;p&gt;I think the ShingeMatrix is very &quot;special&quot; and only produce tokens with few correlation to the original input stream, so it is not so bad, if the extra attributes get lost.&lt;/p&gt;

&lt;p&gt;You could use a simple AttributeSource instead of EmptyTokenStream and create it with the same AttributeFactory as the filter isself. Because of this, you could copyTo the extra Tokens (currently implemented by the Token instance). This reuseableToken could also be an AttributeSource? For me it is not really clear what all this copying between the attributes and the Token instance does, but it seems that it could be converted to Attributes, too. If you do it that way, would it be not work also with custom attributes? One possibility would be to copyTo the Tokens around (or use States) and then modify the shingle speicfic things.&lt;/p&gt;</comment>
                    <comment id="12738028" author="michaelbusch" created="Sun, 2 Aug 2009 10:34:23 +0100"  >&lt;p&gt;I noticed that a shingle test uses PrefixAndSuffixAwareTokenFilter.&lt;/p&gt;

&lt;p&gt;So I undeprecated it and also PrefixAwareTokenFitler by using the same trick as in ShingleMatrixFilter.&lt;/p&gt;

&lt;p&gt;All tests pass.&lt;/p&gt;</comment>
                    <comment id="12738029" author="michaelbusch" created="Sun, 2 Aug 2009 10:38:12 +0100"  >&lt;p&gt;Hi Uwe,&lt;/p&gt;

&lt;p&gt;I just noticed your comment after I attached the latest patch...&lt;/p&gt;

&lt;p&gt;There&apos;s probably a better way to do it. Feel free to update the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
My brain is tired and I really need to sleep now...&lt;/p&gt;

&lt;p&gt;I used the same trick in the Prefix/Suffix filters - one of the reasons I did it in those filters is it to not change the updateSuffixToken(Token, Token) method, which I assume is there so that users can overwrite it.&lt;/p&gt;</comment>
                    <comment id="12738184" author="michaelbusch" created="Mon, 3 Aug 2009 05:33:35 +0100"  >&lt;p&gt;Committed revision 800195.&lt;/p&gt;</comment>
                    <comment id="12738325" author="rcmuir" created="Mon, 3 Aug 2009 13:58:58 +0100"  >&lt;p&gt;Michael, I looked at your patch, really glad you were successful here!&lt;/p&gt;

&lt;p&gt;One last question, we didnt do anything with analysis/sinks (DateRecognizerSinkTokenizer, etc). &lt;br/&gt;
These are deprecated as they extend SinkTokenizer... will they be removed with the old api or do we need to implement alternatives?&lt;/p&gt;</comment>
                    <comment id="12738487" author="michaelbusch" created="Mon, 3 Aug 2009 19:36:44 +0100"  >&lt;blockquote&gt;
&lt;p&gt;One last question, we didnt do anything with analysis/sinks (DateRecognizerSinkTokenizer, etc). &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah I guess we should. Here is the patch.&lt;/p&gt;</comment>
                    <comment id="12738498" author="rcmuir" created="Mon, 3 Aug 2009 19:56:55 +0100"  >&lt;p&gt;same patch as Michael&apos;s, just removed a stray import org.apache.tools.ant.filters.FixCrLfFilter.AddAsisRemove;&lt;/p&gt;</comment>
                    <comment id="12738543" author="michaelbusch" created="Mon, 3 Aug 2009 20:57:45 +0100"  >&lt;p&gt;Thanks, Robert. I&apos;ll commit this later today.&lt;/p&gt;</comment>
                    <comment id="12738656" author="michaelbusch" created="Mon, 3 Aug 2009 23:45:44 +0100"  >&lt;p&gt;Committed revision 800606.&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12435152">LUCENE-1903</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12415271" name="lucene-1775.patch" size="69188" author="michaelbusch" created="Sun, 2 Aug 2009 10:34:23 +0100" />
                    <attachment id="12415269" name="lucene-1775.patch" size="55417" author="michaelbusch" created="Sun, 2 Aug 2009 09:55:44 +0100" />
                    <attachment id="12415265" name="lucene-1775.patch" size="47848" author="michaelbusch" created="Sun, 2 Aug 2009 09:16:47 +0100" />
                    <attachment id="12415264" name="lucene-1775.patch" size="16751" author="michaelbusch" created="Sun, 2 Aug 2009 08:54:15 +0100" />
                    <attachment id="12415385" name="lucene-contrib-sinks.patch" size="19868" author="rcmuir" created="Mon, 3 Aug 2009 19:56:55 +0100" />
                    <attachment id="12415382" name="lucene-contrib-sinks.patch" size="19699" author="michaelbusch" created="Mon, 3 Aug 2009 19:39:56 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>6.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 2 Aug 2009 09:24:27 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11987</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25951</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>