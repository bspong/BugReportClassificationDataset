<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:34:49 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1370/LUCENE-1370.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1370] Add ShingleFilter option to output unigrams if no shingles can be generated</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1370</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Currently if ShingleFilter.outputUnigrams==false and the underlying token stream is only one token long, then ShingleFilter.next() won&apos;t return any tokens. This patch provides a new option, outputUnigramIfNoNgrams; if this option is set and the underlying stream is only one token long, then ShingleFilter will return that token, regardless of the setting of outputUnigrams.&lt;/p&gt;

&lt;p&gt;My use case here is speeding up phrase queries. The technique is as follows:&lt;/p&gt;

&lt;p&gt;First, doing index-time analysis using ShingleFilter (using outputUnigrams==true), thereby expanding things as follows:&lt;/p&gt;

&lt;p&gt;&quot;please divide this sentence into shingles&quot; -&amp;gt;&lt;br/&gt;
 &quot;please&quot;, &quot;please divide&quot;&lt;br/&gt;
 &quot;divide&quot;, &quot;divide this&quot;&lt;br/&gt;
 &quot;this&quot;, &quot;this sentence&quot;&lt;br/&gt;
 &quot;sentence&quot;, &quot;sentence into&quot;&lt;br/&gt;
 &quot;into&quot;, &quot;into shingles&quot;&lt;br/&gt;
 &quot;shingles&quot;&lt;/p&gt;

&lt;p&gt;Second, do query-time analysis using ShingleFilter (using outputUnigrams==false and outputUnigramIfNoNgrams==true). If the user enters a phrase query, it will get tokenized in the following manner:&lt;/p&gt;

&lt;p&gt;&quot;please divide this sentence into shingles&quot; -&amp;gt;&lt;br/&gt;
 &quot;please divide&quot;&lt;br/&gt;
 &quot;divide this&quot;&lt;br/&gt;
 &quot;this sentence&quot;&lt;br/&gt;
 &quot;sentence into&quot;&lt;br/&gt;
 &quot;into shingles&quot;&lt;/p&gt;

&lt;p&gt;By doing phrase queries with bigrams like this, I can gain a very considerable speedup. Without the outputUnigramIfNoNgrams option, then a single word query would tokenize like this:&lt;/p&gt;

&lt;p&gt;&quot;please&quot; -&amp;gt;&lt;br/&gt;
   &lt;span class=&quot;error&quot;&gt;&amp;#91;no tokens&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;But thanks to outputUnigramIfNoNgrams, single words will now tokenize like this:&lt;/p&gt;

&lt;p&gt;&quot;please&quot; -&amp;gt;&lt;br/&gt;
  &quot;please&quot;&lt;/p&gt;

&lt;p&gt;****&lt;/p&gt;

&lt;p&gt;The patch also adds a little to the pre-outputUnigramIfNoNgrams option tests.&lt;/p&gt;

&lt;p&gt;****&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if the patch in this state is useful to anyone else, but I thought I should throw it up here and try to find out.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12403400">LUCENE-1370</key>
            <summary>Add ShingleFilter option to output unigrams if no shingles can be generated</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="steve_rowe">Steve Rowe</assignee>
                                <reporter username="ryguasu">Chris Harris</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Aug 2008 23:56:45 +0100</created>
                <updated>Mon, 16 May 2011 19:15:30 +0100</updated>
                    <resolved>Sat, 9 Oct 2010 18:44:20 +0100</resolved>
                            <version>2.9.3</version>
                <version>3.0.2</version>
                <version>3.1</version>
                <version>4.0-ALPHA</version>
                                <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>3</votes>
                        <watches>4</watches>
                                                    <comments>
                    <comment id="12627308" author="karl.wettin" created="Sun, 31 Aug 2008 14:18:40 +0100"  >&lt;p&gt;It&apos;s an OK filter setting if you ask me.&lt;/p&gt;

&lt;p&gt;However I&apos;m curious to why you don&apos;t query for unigrams unless the input is a single token? That means you always require a 0-slop between any two tokens of the input. I know nothing about your needs, but it could be dangerous. You can always boost the bigrams a bit more than the unigrams if they cause a problem. I think you should benchmark the cost. I&apos;m sure it&apos;s rather small and that you&apos;ll get better quality results by doing that. Users tend to never enter a query the way I want them to.&lt;/p&gt;</comment>
                    <comment id="12627337" author="ryguasu" created="Sun, 31 Aug 2008 20:52:05 +0100"  >&lt;p&gt;Karl, that&apos;s a good point about my setup being incompatible with non-0 slop. However, the performance gains I&apos;m seeing with this patch on my data are substantial. When I last tested on the same index, same machine, same # of threads in my testing process, etc., and went from analyzing my queries with&lt;/p&gt;

&lt;p&gt;outputUnigrams==true&lt;/p&gt;

&lt;p&gt;to analyzing with&lt;/p&gt;

&lt;p&gt;using outputUnigrams==false and outputUnigramIfNoNgrams==true&lt;/p&gt;

&lt;p&gt;phrase queries ended up performing something like 50x as fast. Which is good, because the initial performance wasn&apos;t acceptable.&lt;/p&gt;

&lt;p&gt;The performance gains from outputUnigramIfNoNgrams were greater than those from when I instead tried moving the index to a solid state drive. (It was a a fairly entry-level SSD drive, but still.) It would be interesting to compare to moving to a machine with an obscene amount of RAM. (Not quite sure what would count as &quot;obscene&quot;, but my index is 90+GB. Maybe half of that is taken up by stored fields.)&lt;/p&gt;</comment>
                    <comment id="12627343" author="karl.wettin" created="Sun, 31 Aug 2008 21:32:53 +0100"  >&lt;p&gt;Do you say it is 50x faster with shingle queries that only contains bigram compared to shingle queries that contains uni- and bigrams? Or is it 50x faster using shingles compared to phrase queries? (I&apos;ve myself seen performance gains similar to the latter.)&lt;/p&gt;</comment>
                    <comment id="12627348" author="ryguasu" created="Sun, 31 Aug 2008 22:14:21 +0100"  >&lt;p&gt;: Do you say it is 50x faster with shingle queries that only contains bigram&lt;br/&gt;
: compared to shingle queries that contains uni- and bigrams? Or is it 50x&lt;br/&gt;
: faster using shingles compared to phrase queries? (I&apos;ve myself seen&lt;br/&gt;
: performance gains similar to the latter.)&lt;/p&gt;

&lt;p&gt;I&apos;m not sure I totally understand you, so let me try rephrasing things. What I mean is that phrase queries that have only bigrams, like this:&lt;/p&gt;

&lt;p&gt;PhraseQuery&lt;br/&gt;
{&lt;br/&gt;
&quot;please divide&quot;&lt;br/&gt;
&quot;divide this&quot;&lt;br/&gt;
&quot;this sentence&quot;&lt;br/&gt;
&quot;sentence into&quot;&lt;br/&gt;
&quot;into shingles&quot;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;run maybe 50x as fast as phrase queries that have both bigrams and unigrams, like this:&lt;/p&gt;

&lt;p&gt;PhraseQuery&lt;br/&gt;
{&lt;br/&gt;
&quot;please&quot;, &quot;please divide&quot;&lt;br/&gt;
&quot;divide&quot;, &quot;divide this&quot;&lt;br/&gt;
&quot;this&quot;, &quot;this sentence&quot;&lt;br/&gt;
&quot;sentence&quot;, &quot;sentence into&quot;&lt;br/&gt;
&quot;into&quot;, &quot;into shingles&quot;&lt;br/&gt;
&quot;shingles&quot;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;If it clarifies things any further, let me say that I&apos;m handling all quoted phrase queries with the normal PhraseQuery class; I&apos;m not, for instance, turning quoted phrases into some kind of BooleanQuery. (Technically it&apos;s not me that&apos;s making the PhraseQuery object but Solr and its query parser. But Solr is indeed turning my quoted phrase queries into normal PhraseQuery objects.)&lt;/p&gt;</comment>
                    <comment id="12627533" author="ryguasu" created="Mon, 1 Sep 2008 21:40:11 +0100"  >&lt;p&gt;Fixing to merge cleanly against changes made in r687357. The patch file will also now have a proper name, &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1370&quot; title=&quot;Add ShingleFilter option to output unigrams if no shingles can be generated&quot;&gt;&lt;del&gt;LUCENE-1370&lt;/del&gt;&lt;/a&gt;.patch.&lt;/p&gt;</comment>
                    <comment id="12627534" author="ryguasu" created="Mon, 1 Sep 2008 21:43:42 +0100"  >&lt;p&gt;Getting rid of Windows-style newlines&lt;/p&gt;</comment>
                    <comment id="12753192" author="ryguasu" created="Wed, 9 Sep 2009 19:01:34 +0100"  >&lt;p&gt;Updating the patch to apply successfully against r813015, and hopefully thereby against the upcoming Lucene 2.9 release.&lt;/p&gt;</comment>
                    <comment id="12753200" author="ryguasu" created="Wed, 9 Sep 2009 19:19:18 +0100"  >&lt;p&gt;Any ideas on whether it will ever make sense for this patch to make it into the trunk? Some random thoughts:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The latest patch does make ShingleFilter marginally less clean. (Maybe my least favorite part is how fillShingleBuffer() is now responsible for setting firstToken; that it should do so is not obvious from the method name.)&lt;/li&gt;
	&lt;li&gt;This patch&apos;s functionality could potentially be implemented without modifying ShingleFilter itself. For example, maybe instead of patching ShingleFilter we could have a ShingleFilterUnigramWrapper class, that would delegate to ShingleFilter, except when ShingleFilter failed to produce ngrams. I&apos;m a little worried that this would require using a CachingTokenFilter, and that might not be ideal from an efficiency perspective.&lt;/li&gt;
	&lt;li&gt;It might be good to rename outputUnigramIfNoNgrams to something like forceUnigramIfNoNgrams. With the current naming scheme, you end up setting some contradictory-sounding options, e.g. setting outputUnigrams==false and outputUnigramIfNoNgrams==true. If you look at the code this might not be confusing, but it&apos;d be nice if it were more straightforward without making you look at the code.&lt;/li&gt;
	&lt;li&gt;I gather that some people have an interest in making a minShingleSize option. (See &lt;a href=&quot;http://www.nabble.com/shingle-filter-td25125367.html&quot; class=&quot;external-link&quot;&gt;http://www.nabble.com/shingle-filter-td25125367.html&lt;/a&gt;) I&apos;m not sure how best to modify this patch should that get implemented. It might depend on the typical use cases for minShingleSize, and if there&apos;s any overlap with my use case here.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12753598" author="rcmuir" created="Thu, 10 Sep 2009 13:54:35 +0100"  >&lt;p&gt;Chris, just a small comment:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (outputUnigramIfNoNgrams &amp;amp;&amp;amp; firstToken == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          firstToken = captureState();
  }
  shingleBuf.add(captureState());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;here i think you could save a clone() by not calling captureState twice?&lt;br/&gt;
even though it doesnt have to recompute the state, captureState does have to clone it.&lt;/p&gt;

&lt;p&gt;(I am thinking about trying out your patch where i have some very short fields, this is why i mentioned it)&lt;/p&gt;</comment>
                    <comment id="12753621" author="thetaphi" created="Thu, 10 Sep 2009 14:41:01 +0100"  >&lt;blockquote&gt;&lt;p&gt;even though it doesnt have to recompute the state, captureState does have to clone it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The recomputation is only done once for the lifetime of the TokenStream (as far as there are no modifications in the number of attributes). The State linked list is just another representation of the instances LinkedHashMap for faster iteration during cloning (no new Iterators to create and so on).&lt;/p&gt;</comment>
                    <comment id="12753623" author="rcmuir" created="Thu, 10 Sep 2009 14:49:52 +0100"  >&lt;p&gt;Uwe, I see... i had not looked far enough yet to see how this was done, thanks.&lt;/p&gt;

&lt;p&gt;but i think my comment still holds true, we can save a clone() here on the first token.&lt;br/&gt;
for long fields does not matter so much, but for short fields a small savings.&lt;/p&gt;</comment>
                    <comment id="12753789" author="ryguasu" created="Thu, 10 Sep 2009 20:53:08 +0100"  >&lt;blockquote&gt;
&lt;p&gt;here i think you could save a clone() by not calling captureState twice?&lt;br/&gt;
even though it doesnt have to recompute the state, captureState does have to clone it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So is the idea to replace&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getNextToken()) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (outputUnigramIfNoNgrams &amp;amp;&amp;amp; firstToken == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          firstToken = captureState();
        }
        shingleBuf.add(captureState());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getNextToken()) {
        State curState = captureState();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (outputUnigramIfNoNgrams &amp;amp;&amp;amp; firstToken == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          firstToken = curState;
        }
        shingleBuf.add(curState);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That seems fine, unless there&apos;s some hidden reason why you can&apos;t share State objects.&lt;/p&gt;

&lt;p&gt;I&apos;d guess you could optimize more than that, but I think you run into diminishing returns, making the code harder to read more than you&apos;re making it faster. For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getNextToken()) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (outputUnigramIfNoNgrams &amp;amp;&amp;amp; firstToken == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
          firstToken = captureState();
          shingleBuf.add(firstToken);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
          shingleBuf.add(captureState());
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12753795" author="rcmuir" created="Thu, 10 Sep 2009 21:05:11 +0100"  >&lt;p&gt;Chris, yeah I was thinking something like your first method...&lt;br/&gt;
i&apos;m not concerned with any micro-optimization just reducing a clone if we can )&lt;/p&gt;</comment>
                    <comment id="12753798" author="thetaphi" created="Thu, 10 Sep 2009 21:20:22 +0100"  >&lt;p&gt;AttributeSource.State objects are unmodifiable (as the contents are private and so you have no access to the wrapped attributes).&lt;/p&gt;</comment>
                    <comment id="12753882" author="ryguasu" created="Fri, 11 Sep 2009 00:06:59 +0100"  >&lt;p&gt;Update patch to avoid an unnecessary State.clone(), as suggested by Robert.&lt;/p&gt;</comment>
                    <comment id="12774216" author="ryguasu" created="Fri, 6 Nov 2009 06:15:39 +0000"  >&lt;p&gt;At the risk of being annoying, is there any chance this patch (perhaps slightly refined, if you guys want) could make it into Lucene 3.0? I think I&apos;m not the only person who wants to use the ShingleFilter in this slightly way. For example, I just noticed that the new Solr 1.4 Enterprise Search Server book (on p. 288) makes brief mention of &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-744&quot; title=&quot;Patch to make ShingleFilter.outputUnigramsIfNoShingles (LUCENE-1370) available in Solr schema files&quot;&gt;&lt;del&gt;SOLR-744&lt;/del&gt;&lt;/a&gt;, which depends on this patch. I&apos;m fine keeping this out of the Lucene distribution if people think ShingleFilter.outputUnigrams is a silly hack and there&apos;s a better way to get the job done. But if this captures a legitimate use case, are there compelling reasons to keep it out?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                    <comment id="12774252" author="karl.wettin" created="Fri, 6 Nov 2009 09:29:57 +0000"  >&lt;p&gt;Oups, I seem to have assigned this to me and then forgotten about it. Sorry!&lt;br/&gt;
I&apos;ll check it out this weekend!&lt;/p&gt;</comment>
                    <comment id="12776350" author="simonw" created="Wed, 11 Nov 2009 07:58:05 +0000"  >&lt;p&gt;Karl, are you working on this? Seems like this should not block 3.0 - feel free to move it to 3.1&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="12778003" author="thetaphi" created="Sat, 14 Nov 2009 22:16:52 +0000"  >&lt;p&gt;This patch is very straightforward, I think we could add it to 3.0, too. But 3.0 should not conatin new features, so move to 3.1?&lt;/p&gt;</comment>
                    <comment id="12778260" author="thetaphi" created="Mon, 16 Nov 2009 08:40:31 +0000"  >&lt;p&gt;I move this to 3.1 as it is a new feature.&lt;/p&gt;</comment>
                    <comment id="12918155" author="rcmuir" created="Tue, 5 Oct 2010 21:40:29 +0100"  >&lt;p&gt;I think this patch is really important to get into 3.x and trunk... &lt;/p&gt;

&lt;p&gt;its a dead simple way (analysis configuration only) for folks to get a massive performance improvement for phrasequeries.&lt;/p&gt;</comment>
                    <comment id="12918349" author="steve_rowe" created="Wed, 6 Oct 2010 01:21:37 +0100"  >&lt;p&gt;The previous patch predates the rewrite ShingleFilter was subjected to as a result of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2218&quot; title=&quot;ShingleFilter improvements&quot;&gt;&lt;del&gt;LUCENE-2218&lt;/del&gt;&lt;/a&gt;, so it needed to be rejiggered somewhat.&lt;/p&gt;

&lt;p&gt;Changes from the previous patch:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;The new patch simply enables unigram output if the number of input tokens is less than minShingleSize.  The existing code then handles the situation appropriately, and reset() restores the original unigram output option.&lt;/li&gt;
	&lt;li&gt;I renamed the option &quot;outputUnigramIfNoNgrams&quot; to &quot;outputUnigramsIfNoShingles&quot;, because:
	&lt;ul&gt;
		&lt;li&gt;Unigram -&amp;gt; Unigrams: the output could result in more than one unigram if minShingleSize is greater than the default 2; and&lt;/li&gt;
		&lt;li&gt;Ngrams -&amp;gt; Shingles: for consistency with the class&apos;s name.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;I renamed &quot;returnedAnyTokensYet&quot; to &quot;noShingleOutput&quot;, and reversed its (boolean) sense, because:
	&lt;ul&gt;
		&lt;li&gt;unigrams should be output only if no &lt;b&gt;shingles&lt;/b&gt; can be output, rather than no &lt;b&gt;tokens&lt;/b&gt;; and&lt;/li&gt;
		&lt;li&gt;reversing the sense allowed the test using it to avoid negation, and allowed the name to be shorter.&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;I added a note to the setOutputUnigramsIfNoShingles() method javadoc to the effect that if outputUnigram == true, unigrams will always be output regardless of the setting of outputUnigramsIfNoShingles.&lt;/li&gt;
	&lt;li&gt;I added a test that makes sure that when minShingleSize &amp;gt; 2 and the number of input tokens is less than minShingleSize, (multiple) unigrams are output&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    <comment id="12918358" author="steve_rowe" created="Wed, 6 Oct 2010 01:46:53 +0100"  >&lt;p&gt;Added lucene/CHANGES.txt entry, and slightly modified reset() code switching back the unigram output option.&lt;/p&gt;

&lt;p&gt;All tests pass.&lt;/p&gt;

&lt;p&gt;If there are no objections, I&apos;ll commit this in a couple of days.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;edit&lt;/b&gt;: I added an entry to *modules/analysis/*CHANGES.txt, not *lucene/*CHANGES.txt&lt;/p&gt;</comment>
                    <comment id="12918378" author="rcmuir" created="Wed, 6 Oct 2010 02:36:06 +0100"  >&lt;p&gt;Looks good to me, I tested it and had no problems.&lt;/p&gt;

&lt;p&gt;Maybe we should add the option to ShingleAnalyzerWrapper too? &lt;br/&gt;
This would be very convenient for Lucene users.&lt;/p&gt;</comment>
                    <comment id="12918424" author="steve_rowe" created="Wed, 6 Oct 2010 06:19:20 +0100"  >&lt;blockquote&gt;&lt;p&gt;Looks good to me, I tested it and had no problems.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for testing, Robert.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Maybe we should add the option to ShingleAnalyzerWrapper too?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, I missed that one - I&apos;ve added support for it in this version of the patch, along with one test in ShingleAnalyzerWrapperTest (for the single-token case).&lt;/p&gt;</comment>
                    <comment id="12919519" author="steve_rowe" created="Sat, 9 Oct 2010 18:44:20 +0100"  >&lt;p&gt;Committed: trunk revision 1006187, branch_3x revision 1006195&lt;/p&gt;</comment>
                    <comment id="13013371" author="gsingers" created="Wed, 30 Mar 2011 16:50:07 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12403457">SOLR-744</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12456477" name="LUCENE-1370.patch" size="12185" author="steve_rowe" created="Wed, 6 Oct 2010 06:19:20 +0100" />
                    <attachment id="12456456" name="LUCENE-1370.patch" size="8823" author="steve_rowe" created="Wed, 6 Oct 2010 01:46:53 +0100" />
                    <attachment id="12456455" name="LUCENE-1370.patch" size="8232" author="steve_rowe" created="Wed, 6 Oct 2010 01:21:37 +0100" />
                    <attachment id="12419233" name="LUCENE-1370.patch" size="8444" author="ryguasu" created="Fri, 11 Sep 2009 00:06:59 +0100" />
                    <attachment id="12419077" name="LUCENE-1370.patch" size="8320" author="ryguasu" created="Wed, 9 Sep 2009 19:01:34 +0100" />
                    <attachment id="12389314" name="LUCENE-1370.patch" size="6851" author="ryguasu" created="Mon, 1 Sep 2008 21:43:42 +0100" />
                    <attachment id="12389313" name="LUCENE-1370.patch" size="6867" author="ryguasu" created="Mon, 1 Sep 2008 21:40:11 +0100" />
                    <attachment id="12389206" name="ShingleFilter.patch" size="6593" author="ryguasu" created="Fri, 29 Aug 2008 23:56:59 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>8.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 31 Aug 2008 13:18:40 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12381</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26361</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>