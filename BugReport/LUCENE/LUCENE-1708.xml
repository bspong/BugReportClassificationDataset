<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:19:31 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1708/LUCENE-1708.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1708] Improve the use of isDeleted in the indexing code</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1708</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;A spin off from here: &lt;a href=&quot;http://www.nabble.com/Some-thoughts-around-the-use-of-reader.isDeleted-and-hasDeletions-td23931216.html&quot; class=&quot;external-link&quot;&gt;http://www.nabble.com/Some-thoughts-around-the-use-of-reader.isDeleted-and-hasDeletions-td23931216.html&lt;/a&gt;.&lt;br/&gt;
Two changes:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Optimize SegmentMerger work when a reader has no deletions.&lt;/li&gt;
	&lt;li&gt;IndexReader.document() will no longer check if the document is deleted.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Will post a patch shortly&lt;/p&gt;</description>
                <environment></environment>
            <key id="12428502">LUCENE-1708</key>
            <summary>Improve the use of isDeleted in the indexing code</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="shaie">Shai Erera</reporter>
                        <labels>
                    </labels>
                <created>Sun, 21 Jun 2009 08:43:53 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:27 +0100</updated>
                    <resolved>Tue, 23 Jun 2009 21:32:39 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12722316" author="shaie" created="Sun, 21 Jun 2009 09:42:03 +0100"  >&lt;p&gt;Patch includes changes to SegmentMerger, IndexReader, SegmentReader, CHANGES, and TestSegmentReader (on tags as well).&lt;/p&gt;

&lt;p&gt;I think this is ready to commit (all tests pass). Before commit, we should complete the &quot;Shai Erera via&quot; in CHANGES.&lt;/p&gt;</comment>
                    <comment id="12722644" author="mikemccand" created="Mon, 22 Jun 2009 16:35:47 +0100"  >&lt;p&gt;I see lots of cleanups snuck in here &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12722665" author="mikemccand" created="Mon, 22 Jun 2009 17:29:52 +0100"  >&lt;p&gt;Attached another iteration on the patch, basically cosmetic changes (removing un-needed args, naming things more verbosely, etc.).  I think it&apos;s ready to be committed.  I&apos;ll wait a day or two.&lt;/p&gt;</comment>
                    <comment id="12722783" author="shaie" created="Mon, 22 Jun 2009 20:57:31 +0100"  >&lt;blockquote&gt;&lt;p&gt;I see lots of cleanups snuck in here&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Not all cleanups are bad, i.e. changing to iteration-based loops, rather than calling list.size() in each loop and list.get&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, is better, and cleaner &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I admit though that some of the cleanups just helped me understand the code better.&lt;/p&gt;</comment>
                    <comment id="12722789" author="mikemccand" created="Mon, 22 Jun 2009 21:12:27 +0100"  >&lt;blockquote&gt;&lt;p&gt;Not all cleanups are bad,&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh, they are all good cleanups!  I just wish they were in a dedicated &quot;cleanup&quot; issue, somehow, instead... because then it&apos;s harder for me to focus on the &quot;real&quot; changes (though I realize &quot;clean as you go&quot; is mighty convenient).&lt;/p&gt;</comment>
                    <comment id="12723293" author="mikemccand" created="Tue, 23 Jun 2009 21:32:39 +0100"  >&lt;p&gt;Thanks Shai!&lt;/p&gt;</comment>
                    <comment id="12726543" author="markrmiller@gmail.com" created="Thu, 2 Jul 2009 17:36:00 +0100"  >&lt;p&gt;I cant find the back compat discussion on this. Did I miss?&lt;/p&gt;

&lt;p&gt;I do see where mike mentions the isDeleted change should happen with deprecation, but this patch appears to just make the change. Our current back compat policy doesn&apos;t allow that. It doesn&apos;t even really allow the really special exceptions that we have had to make (and I think it should spell that out, as well as our &apos;experiemental trick&apos;). We have not officially allowed a relaxed back compat policy right?&lt;/p&gt;

&lt;p&gt;I&apos;m not trying to police back compat, but I think we need to do our best to live up to it until its officially changed. Having had to make a couple exceptions doesn&apos;t mean we can just toss it for this release.&lt;/p&gt;

&lt;p&gt;Sorry if I missed the relevant discussion on this - didn&apos;t see anything in the attached email thread.&lt;/p&gt;</comment>
                    <comment id="12726563" author="markrmiller@gmail.com" created="Thu, 2 Jul 2009 18:13:34 +0100"  >&lt;p&gt;I suppose, to be fair, we do mention that we might change runtime behaviour and document it - its just that we don&apos;t usually say, code around it.&lt;/p&gt;

&lt;p&gt;I guess its simple enough here thats its not really a big deal. I was just surprised I saw no mention of back compat in the discussion other than Mike mentioning that the change should be made through deprecation early on in the attached email thread.&lt;/p&gt;</comment>
                    <comment id="12726580" author="shaie" created="Thu, 2 Jul 2009 18:54:57 +0100"  >&lt;p&gt;There is a paragraph in CHANGES under &quot;Changes to Runtime Behavior&quot; that explains this. I think it was on the email thread and not on this issue, that people preferred the runtime change vs. the deprecation and a new method name for document(), under the assumption that it&apos;s very unlikely that someone relies on IndexReader.document() checking for isDeleted (i.e., it passes a document which may or may not be deleted).&lt;/p&gt;</comment>
                    <comment id="12726593" author="markrmiller@gmail.com" created="Thu, 2 Jul 2009 19:03:52 +0100"  >&lt;blockquote&gt;&lt;p&gt;There is a paragraph in CHANGES under &quot;Changes to Runtime Behavior&quot; that explains this. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, I saw that - I just wondered about the discussion to do it.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think it was on the email thread and not on this issue, that people preferred the runtime change vs. the deprecation and a new method name for document(), under the assumption that it&apos;s very unlikely that someone relies on IndexReader.document() checking for isDeleted (i.e., it passes a document which may or may not be deleted).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks - thats the discussion I wasn&apos;t able to spot.&lt;/p&gt;

&lt;p&gt;I see - it was a quick back and forth at the end. Got lazy towards the end &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Thanks for pointing out.&lt;/p&gt;</comment>
                    <comment id="12726614" author="shaie" created="Thu, 2 Jul 2009 19:37:42 +0100"  >&lt;blockquote&gt;&lt;p&gt;it was a quick back and forth at the end. Got lazy towards the end&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sometimes it&apos;s a valid way to pass a decision &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12411423" name="LUCENE-1708.patch" size="30175" author="mikemccand" created="Mon, 22 Jun 2009 17:29:52 +0100" />
                    <attachment id="12411337" name="LUCENE-1708.patch" size="29729" author="shaie" created="Sun, 21 Jun 2009 09:42:03 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 22 Jun 2009 15:35:47 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12050</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26018</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>