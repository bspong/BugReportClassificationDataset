<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:04:36 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3848/LUCENE-3848.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3848] basetokenstreamtestcase should fail if tokenstream starts with posinc=0</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3848</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;This is meaningless for a tokenstream to start with posinc=0,&lt;/p&gt;

&lt;p&gt;Its also caused problems and hairiness in the indexer (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1255&quot; title=&quot;CheckIndex should allow term position = -1&quot;&gt;&lt;del&gt;LUCENE-1255&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1542&quot; title=&quot;Lucene can incorrectly set the position of tokens that start a field with positonInc 0.&quot;&gt;&lt;del&gt;LUCENE-1542&lt;/del&gt;&lt;/a&gt;),&lt;br/&gt;
and it makes senseless tokenstreams. We should add a check and fix any that do this.&lt;/p&gt;

&lt;p&gt;Furthermore the same bug can exist in removing-filters if they have enablePositionIncrements=false.&lt;br/&gt;
I think this option is useful: but it shouldnt mean &apos;allow broken tokenstream&apos;, it just means we&lt;br/&gt;
don&apos;t add gaps. &lt;/p&gt;

&lt;p&gt;If you remove tokens with enablePositionIncrements=false it should not cause the TS to start with&lt;br/&gt;
positionincrement=0, and it shouldnt &apos;restructure&apos; the tokenstream (e.g. moving synonyms on top of a different word).&lt;br/&gt;
It should just not add any &apos;holes&apos;.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12545104">LUCENE-3848</key>
            <summary>basetokenstreamtestcase should fail if tokenstream starts with posinc=0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Mar 2012 19:39:41 +0000</created>
                <updated>Fri, 10 May 2013 11:43:51 +0100</updated>
                    <resolved>Fri, 16 Mar 2012 14:29:07 +0000</resolved>
                                            <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13221982" author="rcmuir" created="Sun, 4 Mar 2012 19:41:06 +0000"  >&lt;p&gt;patch fixing the bug in WikipediaTokenizer.&lt;/p&gt;

&lt;p&gt;But i think we just dont have good tests for the removers.&lt;/p&gt;

&lt;p&gt;Ideally for tests i think we should have a simple &apos;MockSynonymsFilter&apos; that is juts stupid and slow and makes certain synonyms (maybe some multi-word) to use in testing.&lt;/p&gt;

&lt;p&gt;Then we can write tests to find and fix the bugs in the removingfilter.&lt;/p&gt;</comment>
                    <comment id="13222017" author="mikemccand" created="Sun, 4 Mar 2012 21:28:22 +0000"  >&lt;p&gt;Patch, adding a MockGraphTokenFilter we can use to randomly insert fake graph arcs...&lt;/p&gt;</comment>
                    <comment id="13230328" author="rcmuir" created="Thu, 15 Mar 2012 17:12:21 +0000"  >&lt;p&gt;updated patch: I think its ready to commit.&lt;/p&gt;

&lt;p&gt;I didn&apos;t integrate Mike&apos;s nice MockGraphTokenFilter &lt;b&gt;yet&lt;/b&gt; but will do this under a separate issue: its likely to expose a few bugs &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13230341" author="mikemccand" created="Thu, 15 Mar 2012 17:29:32 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                    <comment id="13230510" author="rcmuir" created="Thu, 15 Mar 2012 20:21:34 +0000"  >&lt;p&gt;I think this is ready to go in, ill wait a bit.&lt;/p&gt;

&lt;p&gt;I didn&apos;t make any changes re: &quot;graph-restructuring&quot;, though I still feel we should fix this, but it means&lt;br/&gt;
dealing with backwards compatibility, etc.&lt;/p&gt;

&lt;p&gt;The changes in this patch are backwards compatible, in the sense that consumers are already correcting &lt;br/&gt;
&apos;initial posInc=0&apos; to posinc=1 anyway.&lt;/p&gt;</comment>
                    <comment id="13231233" author="rcmuir" created="Fri, 16 Mar 2012 14:29:07 +0000"  >&lt;p&gt;I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3873&quot; title=&quot;tie MockGraphTokenFilter into all analyzers tests&quot;&gt;&lt;del&gt;LUCENE-3873&lt;/del&gt;&lt;/a&gt; to integrate MockGraphTokenFilter into tests.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12517022" name="LUCENE-3848-MockGraphTokenFilter.patch" size="21979" author="mikemccand" created="Sun, 4 Mar 2012 21:28:22 +0000" />
                    <attachment id="12518482" name="LUCENE-3848.patch" size="9567" author="rcmuir" created="Thu, 15 Mar 2012 17:12:21 +0000" />
                    <attachment id="12517016" name="LUCENE-3848.patch" size="2119" author="rcmuir" created="Sun, 4 Mar 2012 19:41:06 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 4 Mar 2012 21:28:22 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>230291</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>23853</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>