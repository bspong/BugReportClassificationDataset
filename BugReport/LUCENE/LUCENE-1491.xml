<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:32:19 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1491/LUCENE-1491.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1491] EdgeNGramTokenFilter stops on tokens smaller then minimum gram size.</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1491</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;If a token is encountered in the stream that is shorter in length than the min gram size, the filter will stop processing the token stream.&lt;/p&gt;

&lt;p&gt;Working up a unit test now, but may be a few days before I can provide it. Wanted to get it in the system.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12410617">LUCENE-1491</key>
            <summary>EdgeNGramTokenFilter stops on tokens smaller then minimum gram size.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="otis">Otis Gospodnetic</assignee>
                                <reporter username="tfeak">Todd Feak</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Dec 2008 23:45:11 +0000</created>
                <updated>Thu, 2 May 2013 03:29:25 +0100</updated>
                    <resolved>Tue, 14 Jul 2009 20:46:15 +0100</resolved>
                            <version>2.4</version>
                <version>2.4.1</version>
                <version>2.9</version>
                <version>3.0</version>
                                <fixVersion>2.9</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12656783" author="tfeak" created="Mon, 15 Dec 2008 22:39:57 +0000"  >&lt;p&gt;The NGramTokenFilter is affected by the same bug.&lt;/p&gt;</comment>
                    <comment id="12656784" author="tfeak" created="Mon, 15 Dec 2008 22:41:19 +0000"  >&lt;p&gt;Patch includes test to highlight broken EgdeNGramTokenFilter and NGramTokenFilter. Fixes for both.&lt;/p&gt;</comment>
                    <comment id="12658308" author="hossman" created="Sat, 20 Dec 2008 18:36:19 +0000"  >&lt;p&gt;patch looks good ... the one question i have is whether the fix meets user expectations: the patch as posted &quot;skips&quot; any input tokens that are shorter then the minimum ngram length ... is that what most people will expect, or will people expect shorter tokens to be passed through?&lt;/p&gt;

&lt;p&gt;ie: should &quot;min&quot; be the minimum token size produced by the filters (a hard min), or should it be the minimum ngram size produced by the filter (a soft min)?&lt;/p&gt;

&lt;p&gt;either way this patch is an improvement, i&apos;m just wondering what we want to define the semantics to be (or if we want to make an additional option for this)&lt;/p&gt;</comment>
                    <comment id="12715551" author="otis" created="Tue, 2 Jun 2009 16:27:44 +0100"  >&lt;p&gt;I agree this is an improvement, but like Hoss I&apos;m worried about silently skipping shorter-than-specified-min-ngram-size tokens.&lt;/p&gt;

&lt;p&gt;Perhaps we need boolean keepSmaller somewhere, so we can explicitly control the behaviour?&lt;/p&gt;</comment>
                    <comment id="12715567" author="karl.wettin" created="Tue, 2 Jun 2009 17:19:11 +0100"  >&lt;blockquote&gt;&lt;p&gt;Perhaps we need boolean keepSmaller somewhere, so we can explicitly control the behaviour?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not sure. Is there a use case for this or is it an XY-problem?&lt;/p&gt;
</comment>
                    <comment id="12715661" author="otis" created="Tue, 2 Jun 2009 21:26:27 +0100"  >&lt;p&gt;I&apos;m not 100% sure - I&apos;m not using ngrams at the moment, so I have no place to test this out, but skipping a shorter than minimal ngrams seems like it would result in silent data loss.&lt;/p&gt;

&lt;p&gt;Ah, here, example:&lt;br/&gt;
What would happen to &quot;to be or not to be&quot; if min=4 and we relied on ngrams to perform phrase queries?&lt;/p&gt;

&lt;p&gt;All of those terms would be dropped, so a search for &quot;to be or not to be&quot; would result in 0 hits.&lt;/p&gt;

&lt;p&gt;If the above is correct, I think this sounds like a bad thing that one wouldn&apos;t expect...&lt;/p&gt;</comment>
                    <comment id="12715712" author="karl.wettin" created="Tue, 2 Jun 2009 22:51:16 +0100"  >&lt;p&gt;Although you have a valid point I&apos;d like to argue this a bit. &lt;/p&gt;

&lt;p&gt;My arguments are probably considered silly by some. Perhaps it&apos;s just me that use ngrams for something completly different than what everybody else does, but here we go: Adding the feature as suggested by this patch is, according to me, to fix symptoms from bad use of character ngrams.&lt;/p&gt;

&lt;p&gt;BOL, EOL, whitespace and punctuation are all valid parts of character ngrams than can increase precision/recall quite a bit. EdgeNGrams could sort of be considered such data too. So what I&apos;m saying here is that I consider your example a bad use of charachter ngrams, that the whole sentance should have been grammed up. So in the case of 4-grams the output would end up as: &quot;to b&quot;, &quot;o be&quot;, &quot; be &quot;, &quot;be o&quot;, and so on. Perhaps even &quot;$to &quot;, &quot;to b&quot;, &quot;o be&quot;, and so on.&lt;/p&gt;

&lt;p&gt;Supporting what I suggest will of course mean quite a bit of more work. A whole new filter that also does input text normalization such as removing double spaces and what not. That will probably not be implemented anytime soon. But adding the features in the patch to the filter actually means that this use is endorsed by the community and I&apos;m not sure that&apos;s a good idea. I thus think it would be better with some sort of secondary filter that did the exact same thing as the patch.&lt;/p&gt;

&lt;p&gt;Perhaps I should leave this issue alone and do some more work with &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1306&quot; title=&quot;CombinedNGramTokenFilter&quot;&gt;&lt;del&gt;LUCENE-1306&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;</comment>
                    <comment id="12715763" author="otis" created="Wed, 3 Jun 2009 01:38:11 +0100"  >&lt;p&gt;Karl - &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1306&quot; title=&quot;CombinedNGramTokenFilter&quot;&gt;&lt;del&gt;LUCENE-1306&lt;/del&gt;&lt;/a&gt; - I agree, I think the existing edge and non-edge ngram stuff should be folded into &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1306&quot; title=&quot;CombinedNGramTokenFilter&quot;&gt;&lt;del&gt;LUCENE-1306&lt;/del&gt;&lt;/a&gt; (or the other way around, if it&apos;s easier).&lt;/p&gt;

&lt;p&gt;But won&apos;t question of what we do with the chunks shorter than min ngram remain?  Does adding that boolean hurt anything? (other than an if test for every ngram &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;/p&gt;</comment>
                    <comment id="12715849" author="viobade" created="Wed, 3 Jun 2009 08:29:59 +0100"  >&lt;p&gt;I think is better to keep the main goal of ngram: groups of characters between min and max.  If is need in any practical situation for minimum ngram equals with one or two characters, this can be done setting the minimum....otherwise the filter must  work in the way that is expected.. If I expect subword with minimum 3 length why do I get a token with two characters while it is not accomplish the condition?&lt;/p&gt;</comment>
                    <comment id="12716053" author="otis" created="Wed, 3 Jun 2009 21:29:08 +0100"  >&lt;p&gt;I&apos;m getting convinced to just drop ngrams &amp;lt; minNgram.&lt;br/&gt;
If nobody complains by the end of the week, I&apos;ll commit.&lt;/p&gt;</comment>
                    <comment id="12731034" author="mikemccand" created="Tue, 14 Jul 2009 19:38:11 +0100"  >&lt;p&gt;Otis this one looks ready to commit?&lt;/p&gt;</comment>
                    <comment id="12731074" author="otis" created="Tue, 14 Jul 2009 20:46:15 +0100"  >&lt;p&gt;Thanks Todd &amp;amp; Co.&lt;/p&gt;

&lt;p&gt;Sending        CHANGES.txt&lt;br/&gt;
Sending        analyzers/src/java/org/apache/lucene/analysis/ngram/EdgeNGramTokenFilter.java&lt;br/&gt;
Sending        analyzers/src/java/org/apache/lucene/analysis/ngram/NGramTokenFilter.java&lt;br/&gt;
Sending        analyzers/src/test/org/apache/lucene/analysis/ngram/EdgeNGramTokenFilterTest.java&lt;br/&gt;
Sending        analyzers/src/test/org/apache/lucene/analysis/ngram/NGramTokenFilterTest.java&lt;br/&gt;
Transmitting file data .....&lt;br/&gt;
Committed revision 794034.&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12426610">SOLR-1192</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12396134" name="LUCENE-1491.patch" size="4703" author="tfeak" created="Mon, 15 Dec 2008 22:41:19 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sat, 20 Dec 2008 18:36:19 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12260</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26236</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>