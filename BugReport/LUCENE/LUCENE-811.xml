<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:06:29 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-811/LUCENE-811.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-811] Public API inconsistency</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-811</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;org.apache.lucene.index.SegmentInfos is public, and contains public methods (which is good for expert-level index manipulation tools such as Luke). However, SegmentInfo class has package visibility. This leads to a strange result that it&apos;s possible to read SegmentInfos, but it&apos;s not possible to access its details (SegmentInfos.info(int)) from a user application.&lt;/p&gt;

&lt;p&gt;The solution is to make SegmentInfo class public.&lt;/p&gt;</description>
                <environment>&lt;p&gt;2.1.0 release&lt;/p&gt;</environment>
            <key id="12363380">LUCENE-811</key>
            <summary>Public API inconsistency</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="ab">Andrzej Bialecki </reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Feb 2007 09:11:50 +0000</created>
                <updated>Tue, 19 Jun 2007 09:14:53 +0100</updated>
                    <resolved>Tue, 27 Feb 2007 13:29:04 +0000</resolved>
                            <version>2.1</version>
                                <fixVersion>2.2</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12475104" author="cutting" created="Thu, 22 Feb 2007 17:49:25 +0000"  >&lt;p&gt;Rather I think we should consider making SegmentInfos package-private again.  This was made public by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-701&quot; title=&quot;Lock-less commits&quot;&gt;&lt;del&gt;LUCENE-701&lt;/del&gt;&lt;/a&gt;.  Is it too late to hide it again?  Is this really an API we want to support long-term?  If there are individual methods that we wish to expose, perhaps they can instead be exposed through IndexReader or IndexWriter.  It is a slippery slope to now start making things it references public.&lt;/p&gt;

&lt;p&gt;Perhaps we should in the future try to separate interfaces and implementations into separate packages.  The implementation package could be named something like &apos;index2impl&apos; with the understanding that its public API will not be supported long-term.  But, until we do something like that, I think package-private works well.  Tools like Luke can add classes to the package in order to access package-private stuff.&lt;/p&gt;</comment>
                    <comment id="12475121" author="mikemccand" created="Thu, 22 Feb 2007 19:12:56 +0000"  >&lt;p&gt;Indeed I did this as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-701&quot; title=&quot;Lock-less commits&quot;&gt;&lt;del&gt;LUCENE-701&lt;/del&gt;&lt;/a&gt;, but I can&apos;t remember what on&lt;br/&gt;
earth my reasoning was.&lt;/p&gt;

&lt;p&gt;I agree it&apos;s not necessary and we should make it package protected&lt;br/&gt;
again.  I can make this fix.&lt;/p&gt;

&lt;p&gt;Could we release a 2.0.1 that would include this (and anything else if&lt;br/&gt;
we need to)?  I would volunteer to do the release mechanics since I&lt;br/&gt;
caused this (sorry) &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I will also review what else I made public, and, be more careful in&lt;br/&gt;
the future to not relax protection unless it&apos;s absolutely needed.&lt;/p&gt;</comment>
                    <comment id="12475124" author="mikemccand" created="Thu, 22 Feb 2007 19:13:59 +0000"  >&lt;p&gt;Sorry, make that 2.1.1 above!&lt;/p&gt;</comment>
                    <comment id="12475132" author="hossman" created="Thu, 22 Feb 2007 19:33:36 +0000"  >&lt;p&gt;since SegmentInfos is final, and all of it&apos;s methods are (at best) package protected i don&apos;t think it&apos;s a big risk to make it private again (without requiring a bump to lucene-3.0.0)&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if re-privatizing this class really neccessitates a 2.1.1 release ... it doesn&apos;t cause any bugs, and it does&apos;t really give people very much rope to hang themselves with unless they are going out of their way to put stuff in the org.apache.lucene.index package.&lt;/p&gt;</comment>
                    <comment id="12475173" author="mikemccand" created="Thu, 22 Feb 2007 21:54:07 +0000"  >&lt;p&gt;Attaching proposed patch to change SegmentInfos (and all of its methods/fields) back to package level protection.&lt;/p&gt;

&lt;p&gt;I also found a few other cases (IndexFileNames, IndexFileNamesFilter, SegmentInfo) that I had added public methods which should be kept at package protection.&lt;/p&gt;</comment>
                    <comment id="12475178" author="cutting" created="Thu, 22 Feb 2007 22:09:08 +0000"  >&lt;p&gt;I think making some methods public is fine, so long as the class is kept package-private.&lt;/p&gt;</comment>
                    <comment id="12475193" author="ab" created="Thu, 22 Feb 2007 23:06:29 +0000"  >&lt;p&gt;I&apos;m fine with making these classes package-private - Luke already uses a &quot;gateway&quot; class to access SegmentInfo, IndexFileDeleter &amp;amp; friends.&lt;/p&gt;</comment>
                    <comment id="12475311" author="mikemccand" created="Fri, 23 Feb 2007 10:50:37 +0000"  >&lt;p&gt;&amp;gt; I think making some methods public is fine, so long as the class is&lt;br/&gt;
&amp;gt; kept package-private.&lt;/p&gt;

&lt;p&gt;But, for a package-private final class, marking un-inherited&lt;br/&gt;
methods/fields public doesn&apos;t enable any additional access since the&lt;br/&gt;
class itself is only visible within the package (I think)?  Or am I&lt;br/&gt;
missing something basic about Java&apos;s access protections?&lt;/p&gt;</comment>
                    <comment id="12475418" author="cutting" created="Fri, 23 Feb 2007 17:50:56 +0000"  >&lt;p&gt;&amp;gt; for a package-private final class, marking un-inherited &lt;br/&gt;
&amp;gt; methods/fields public doesn&apos;t enable any additional access&lt;/p&gt;

&lt;p&gt;Right.  You were switching several such methods from public to package-private, which is a no-op and prompted my comment.  On the other-hand, if the class is ever made public, it may be useful to have its intended public API pre-declared, and, even if it&apos;s never made public, declaring some methods public has some documentation value.  In general, the style I prefer is try to declare fields and methods as though each class were public.  Package-private methods and fields are really only required for classes that actually are public but that wish to hide some things from all but others in their package.&lt;/p&gt;

&lt;p&gt;This is a fine point, and doesn&apos;t warrant too much analysis.  I probably should have just held my tongue.&lt;/p&gt;</comment>
                    <comment id="12475436" author="mikemccand" created="Fri, 23 Feb 2007 18:55:44 +0000"  >&lt;p&gt;Ahhh, OK, I see.  I like that style (declaring fields/methods public&lt;br/&gt;
even when the class is package-private).  I will re-work that patch&lt;br/&gt;
based on this.&lt;/p&gt;</comment>
                    <comment id="12475439" author="djd" created="Fri, 23 Feb 2007 19:09:38 +0000"  >&lt;p&gt;Doesn&apos;t making such methods public mean they can be called trough reflection?&lt;/p&gt;</comment>
                    <comment id="12475453" author="mikemccand" created="Fri, 23 Feb 2007 20:02:36 +0000"  >&lt;p&gt;OK fixed the patch to leave some fields/methods public.&lt;/p&gt;</comment>
                    <comment id="12476169" author="mikemccand" created="Tue, 27 Feb 2007 13:29:04 +0000"  >&lt;p&gt;This is resolved.  If we do a 2.1.1 then I will backport to the 2.1 branch at that time.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12351838" name="LUCENE-811.patch" size="12016" author="mikemccand" created="Thu, 22 Feb 2007 21:54:07 +0000" />
                    <attachment id="12351914" name="LUCENE-811-take2.patch" size="4295" author="mikemccand" created="Fri, 23 Feb 2007 20:02:36 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 22 Feb 2007 17:49:25 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12929</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26919</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>