<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:14:50 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1173/LUCENE-1173.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1173] index corruption autoCommit=false</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1173</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;In both Lucene 2.3 and trunk, the index becomes corrupted when autoCommit=false&lt;/p&gt;</description>
                <environment></environment>
            <key id="12388384">LUCENE-1173</key>
            <summary>index corruption autoCommit=false</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="yseeley@gmail.com">Yonik Seeley</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Feb 2008 21:11:25 +0000</created>
                <updated>Sun, 10 Oct 2010 23:16:26 +0100</updated>
                    <resolved>Thu, 14 Feb 2008 15:28:54 +0000</resolved>
                            <version>2.3</version>
                                <fixVersion>2.3.1</fixVersion>
                <fixVersion>2.4</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>3</votes>
                        <watches>3</watches>
                                                    <comments>
                    <comment id="12567817" author="yseeley@gmail.com" created="Mon, 11 Feb 2008 21:17:02 +0000"  >&lt;p&gt;Attaching a patch that can reproduce.&lt;br/&gt;
With autoCommit=true, the test passes. Change it to false and it fails.&lt;/p&gt;

&lt;p&gt;The test basic uses multiple threads to update documents.  The last document for any id is kept, and then all these docs are indexed again serially.  The two indicies are them compared.&lt;/p&gt;</comment>
                    <comment id="12567818" author="yseeley@gmail.com" created="Mon, 11 Feb 2008 21:21:25 +0000"  >&lt;p&gt;Note: if I reduce the test to indexing with a single thread, it still fails.&lt;br/&gt;
    Map docs = indexRandom(1, 50, 50, dir1);&lt;br/&gt;
The test still does the indexing in a different thread than the close(), so it&apos;s not quite a single threaded test.&lt;/p&gt;

&lt;p&gt;Another thing to note: all of the terms are matching up (the test succeeds if I don&apos;t test the stored fields).&lt;/p&gt;</comment>
                    <comment id="12567819" author="mikemccand" created="Mon, 11 Feb 2008 21:23:48 +0000"  >&lt;p&gt;Uh oh ... I&apos;ll take this!&lt;/p&gt;</comment>
                    <comment id="12567845" author="yseeley@gmail.com" created="Mon, 11 Feb 2008 22:18:31 +0000"  >&lt;p&gt;Thanks Mike!&lt;/p&gt;

&lt;p&gt;Attaching new version of test that correctly deals with terms with no docs (because of deletions).&lt;br/&gt;
Other variations were failing before, now it&apos;s just those with autoCommit=false&lt;/p&gt;

&lt;p&gt;Note that it&apos;s possible to trigger this bug by indexing only 3 documents:&lt;br/&gt;
mergeFactor=2; maxBufferedDocs=2; Map docs = indexRandom(1, 3, 2, dir1);&lt;/p&gt;

&lt;p&gt;I love random testing&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12567849" author="mikemccand" created="Mon, 11 Feb 2008 22:26:13 +0000"  >&lt;p&gt;Yes this is one awesome test case &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                    <comment id="12567867" author="mikemccand" created="Mon, 11 Feb 2008 23:12:36 +0000"  >&lt;p&gt;I just sent email to java-user to give a heads up on this.&lt;/p&gt;

&lt;p&gt;Attach patch fixes the issue.  All tests pass.&lt;/p&gt;

&lt;p&gt;I think we should spin 2.3.1 for this one?&lt;/p&gt;</comment>
                    <comment id="12567873" author="yseeley@gmail.com" created="Mon, 11 Feb 2008 23:25:46 +0000"  >&lt;p&gt;Patch looks good (heh... a one liner!)&lt;br/&gt;
At least it won&apos;t break previously working code since autoCommit=true is the default.  The only risk is people trying out the new setting and not realizing it can break things.&lt;br/&gt;
2.3.1 might be nice, but I&apos;ll leave to others (who have the actual time to do the work) to decide.&lt;/p&gt;</comment>
                    <comment id="12567878" author="yseeley@gmail.com" created="Mon, 11 Feb 2008 23:44:13 +0000"  >&lt;p&gt;Hold up a bit... my random testing may have hit another bug....&lt;br/&gt;
testMultiConfig hit an error at some point when I cranked up the iterations... I&apos;m trying to reproduce.&lt;/p&gt;</comment>
                    <comment id="12568053" author="mikemccand" created="Tue, 12 Feb 2008 11:13:25 +0000"  >
&lt;p&gt;Backported to 2.3.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Patch looks good (heh... a one liner!)&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah the worst ones always seem to be one-liner fixes.  Sigh.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Hold up a bit... my random testing may have hit another bug....&lt;br/&gt;
testMultiConfig hit an error at some point when I cranked up the iterations... I&apos;m trying to reproduce. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I&apos;ll go dig on that one next.&lt;/p&gt;</comment>
                    <comment id="12568966" author="mikemccand" created="Thu, 14 Feb 2008 15:28:54 +0000"  >&lt;p&gt;Committed to 2.3 &amp;amp; trunk.&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                <outwardlinks description="blocks">
                            <issuelink>
            <issuekey id="12376448">SOLR-342</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12375274" name="indexstress.patch" size="11944" author="yseeley@gmail.com" created="Mon, 11 Feb 2008 22:18:31 +0000" />
                    <attachment id="12375270" name="indexstress.patch" size="10890" author="yseeley@gmail.com" created="Mon, 11 Feb 2008 21:17:02 +0000" />
                    <attachment id="12375277" name="LUCENE-1173.patch" size="12567" author="mikemccand" created="Mon, 11 Feb 2008 23:12:36 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 11 Feb 2008 21:23:48 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12572</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26556</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>