<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:10:27 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-242/LUCENE-242.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-242] Lucene Search has poor cpu utilization on a 4-CPU machine</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-242</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I noticed that the class org.apache.lucene.index.FieldInfos uses private class&lt;br/&gt;
members Vector byNumber and Hashtable byName, both of which are synchronized&lt;br/&gt;
objects, thus resulting in unessesary locks. &lt;/p&gt;

&lt;p&gt;By changing the Vector byNumber to ArrayList byNumber, and Hashtable byName to&lt;br/&gt;
HashMap byName, both are not synchronized objects, I was able to get 110%&lt;br/&gt;
improvement in performance (number of searches per second).&lt;/p&gt;


&lt;p&gt;Here is a sample of blocked thread&lt;br/&gt;
&quot;Thread-32&quot; daemon prio=1 tid=0x082334c0 nid=0xa66 waiting for monitor entry&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;4f385000..4f38687c&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.Vector.elementAt(Vector.java:430)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;waiting to lock &amp;lt;0x452b93a8&amp;gt; (a java.util.Vector)&lt;br/&gt;
        at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)&lt;br/&gt;
        at org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java:151)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:149)&lt;br/&gt;
        at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)&lt;br/&gt;
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:137)&lt;br/&gt;
        at org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:51)&lt;br/&gt;
        at org.apache.lucene.index.IndexReader.termDocs(IndexReader.java:364)&lt;br/&gt;
        at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:59)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:165)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.java:165)&lt;br/&gt;
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:154)&lt;br/&gt;
        at&lt;br/&gt;
gov.gsa.search.SearcherByPageAndSortedField.search(SearcherByPageAndSortedField.java:317)&lt;br/&gt;
        at&lt;br/&gt;
gov.gsa.search.SearcherByPageAndSortedField.search(SearcherByPageAndSortedField.java:203)&lt;br/&gt;
        at&lt;br/&gt;
gov.gsa.search.grants.SearchGrants.searchByPageAndSortedField(SearchGrants.java:308)&lt;br/&gt;
        at&lt;br/&gt;
gov.gsa.search.grants.SearchServlet.searchByIndex(SearchServlet.java:1541)&lt;br/&gt;
        at gov.gsa.search.grants.SearchServlet.getResults(SearchServlet.java:1325)&lt;br/&gt;
        at gov.gsa.search.grants.SearchServlet.doGet(SearchServlet.java:500)&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)&lt;br/&gt;
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)&lt;br/&gt;
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)&lt;br/&gt;
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2415)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)&lt;br/&gt;
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)&lt;br/&gt;
        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)&lt;br/&gt;
        at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)&lt;br/&gt;
        at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:261)&lt;br/&gt;
        at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:360)&lt;br/&gt;
        at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:604)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:562)&lt;br/&gt;
        at org.apache.jk.common.SocketConnection.runIt(ChannelSocket.java:679)&lt;br/&gt;
        at&lt;br/&gt;
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:534)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Operating System: Linux&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
            <key id="12314392">LUCENE-242</key>
            <summary>Lucene Search has poor cpu utilization on a 4-CPU machine</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="java-dev@lucene.apache.org">Lucene Developers</assignee>
                                <reporter username="amordo@infosciences.com">Aviran Mordo</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Jul 2004 01:51:05 +0100</created>
                <updated>Sat, 27 May 2006 02:37:58 +0100</updated>
                    <resolved>Sat, 27 May 2006 02:37:58 +0100</resolved>
                            <version>1.4</version>
                                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12321754" author="otis@apache.org" created="Tue, 13 Jul 2004 22:22:32 +0100"  >&lt;p&gt;Changed in CVS, thanks.&lt;br/&gt;
I don&apos;t have an environment multi-threaded environment suitable for testing this&lt;br/&gt;
change, to ensure it doesn&apos;t break when multiple-threads access FieldInfos. &lt;br/&gt;
Maybe somebody else does?&lt;br/&gt;
Regardless, it looks like there should be no threading issues, since the only&lt;br/&gt;
users of FieldInfos are classes that themselves ought to be thread-safe.&lt;/p&gt;</comment>
                    <comment id="12321755" author="daniel.naber@t-online.de" created="Thu, 23 Sep 2004 03:29:44 +0100"  >&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;Bug 31368 has been marked as a duplicate of this bug. ***&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>30058</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 13 Jul 2004 21:22:32 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>13508</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>27489</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>