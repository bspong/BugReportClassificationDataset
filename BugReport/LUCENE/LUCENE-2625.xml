<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:31:50 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2625/LUCENE-2625.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2625] IndexReader.termDocs() retrieves no documents</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2625</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;TermDocs object returned by indexReader.termDocs() retrieves no documents, howerver, the documents are retrieved correctly when using indexReader.termDocs(Term), indexReader.termDocs(null) and indexSearcher.search(Query).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12472657">LUCENE-2625</key>
            <summary>IndexReader.termDocs() retrieves no documents</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="adriano_crestani">Adriano Crestani</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Aug 2010 00:33:58 +0100</created>
                <updated>Wed, 30 Mar 2011 16:50:09 +0100</updated>
                    <resolved>Tue, 19 Oct 2010 13:14:53 +0100</resolved>
                            <version>3.1</version>
                                <fixVersion>3.1</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12903141" author="adriano_crestani" created="Fri, 27 Aug 2010 00:36:34 +0100"  >&lt;p&gt;This test case reproduces the problem. It fails using branch_3x rev 989949, but passes fine using lucene 3.0.2&lt;/p&gt;</comment>
                    <comment id="12903208" author="shaie" created="Fri, 27 Aug 2010 04:52:32 +0100"  >&lt;p&gt;You add the field as NOT_ANALYZED, therefore there is no indexed term &quot;field:value&quot;. Is the first assert succeeds? I&apos;d assume it should return false.&lt;/p&gt;</comment>
                    <comment id="12903210" author="rcmuir" created="Fri, 27 Aug 2010 04:59:14 +0100"  >&lt;p&gt;Hi, I&apos;m not sure about this one being a bug:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;the test calls termDocs(), which is unpositioned&lt;/li&gt;
	&lt;li&gt;the test then calls next(), but it never positions it with seek()&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;so in my opinion calling next() on an uninitialized iterator can return wrong results, throw an exception, or return nothing at all.&lt;/p&gt;</comment>
                    <comment id="12903211" author="adriano_crestani" created="Fri, 27 Aug 2010 05:00:27 +0100"  >&lt;p&gt;Hi Shai,&lt;/p&gt;

&lt;p&gt;Sorry, but what do you mean by no field:value indexed? NOT_ANALYZED means the term will be indexed as is.&lt;/p&gt;

&lt;p&gt;And yes, all assertions pass fine but the last one, which only fails using lucene 3x rev 989949 &lt;/p&gt;</comment>
                    <comment id="12903219" author="shaie" created="Fri, 27 Aug 2010 05:37:04 +0100"  >&lt;p&gt;Sorry, I&apos;ve misread NOT_ANALYZED w/ NO. Too early for me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;I agree w/ Robert though. Calling termDocs() w/o first positioning it (by seeking) is meaningless. If it returned false/true in 2.9, I don&apos;t think it matters?&lt;/p&gt;</comment>
                    <comment id="12903220" author="adriano_crestani" created="Fri, 27 Aug 2010 05:57:06 +0100"  >&lt;p&gt;Thanks for the quick reply Shai and Robert.&lt;/p&gt;

&lt;p&gt;It makes sense now, but it should be documented somewhere, mainly because the behavior has change from 3.0 to 3.1. Everybody, since version 2, that used to iterate over all documents that way, still expects it to work without calling seek, at least I did.&lt;/p&gt;

&lt;p&gt;In my opinion, being unpositioned means the user needs to be aware about docs being retrieved in any order, all that matters after all is to iterate over all documents in the index.&lt;/p&gt;

&lt;p&gt;Another question is, if indexReader.termDocs(null) is used, where is it positioned if nothing was defined in the parameter? Shouldn&apos;t it work as termDocs()? It just feels inconsistent to me.&lt;/p&gt;</comment>
                    <comment id="12903221" author="adriano_crestani" created="Fri, 27 Aug 2010 05:58:50 +0100"  >&lt;p&gt;Just confirmed here, invoking seek does fix the problem &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12903227" author="rcmuir" created="Fri, 27 Aug 2010 06:17:37 +0100"  >&lt;blockquote&gt;&lt;p&gt;In my opinion, being unpositioned means the user needs to be aware about docs being retrieved in any order, all that matters after all is to iterate over all documents in the index.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;termDocs() is unpositioned, implying you will seek() it yourself with Term/TermEnum&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Another question is, if indexReader.termDocs(null) is used, where is it positioned if nothing was defined in the parameter? Shouldn&apos;t it work as termDocs()? It just feels inconsistent to me.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;termDocs(term) is like termDocs() + seek(term), except for the special null case as listed in the docs (If term is null, then all non-deleted docs are returned with freq=1)&lt;/p&gt;

&lt;p&gt;i&apos;m inclined to agree termDocs(null) is inconsistent because it doesnt work like termDocs() + seek(null), but instead returns the wacky AllTermsDocs&lt;/p&gt;</comment>
                    <comment id="12922392" author="rcmuir" created="Tue, 19 Oct 2010 02:05:53 +0100"  >&lt;p&gt;javadocs patch reminding you to first seek the unpositioned termdocs&lt;/p&gt;</comment>
                    <comment id="12922494" author="mikemccand" created="Tue, 19 Oct 2010 10:21:36 +0100"  >&lt;p&gt;javadoc patch looks good Robert!&lt;/p&gt;</comment>
                    <comment id="12922534" author="rcmuir" created="Tue, 19 Oct 2010 13:14:53 +0100"  >&lt;p&gt;Thanks for bringing this up Adriano!&lt;/p&gt;</comment>
                    <comment id="13013379" author="gsingers" created="Wed, 30 Mar 2011 16:50:09 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12457510" name="LUCENE-2625.patch" size="707" author="rcmuir" created="Tue, 19 Oct 2010 02:05:53 +0100" />
                    <attachment id="12453187" name="TestTermDocs.java" size="1673" author="adriano_crestani" created="Fri, 27 Aug 2010 00:36:34 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 27 Aug 2010 03:52:32 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11212</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25067</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>