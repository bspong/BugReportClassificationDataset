<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:59:39 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1764/LUCENE-1764.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1764] SampleComparable doesn&apos;t work well in contrib/remote tests</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1764</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;As discovered in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1749&quot; title=&quot;FieldCache introspection API&quot;&gt;&lt;del&gt;LUCENE-1749&lt;/del&gt;&lt;/a&gt;, when using identical instances of a SortComparator you get multiple entries in the FieldCache.&lt;/p&gt;

&lt;p&gt;demonstrating this bug currently requires the patches in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1749&quot; title=&quot;FieldCache introspection API&quot;&gt;&lt;del&gt;LUCENE-1749&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;See markmiller&apos;s comment here...&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1749?focusedCommentId=12735190#action_12735190&quot; class=&quot;external-link&quot;&gt;https://issues.apache.org/jira/browse/LUCENE-1749?focusedCommentId=12735190#action_12735190&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
            <key id="12431630">LUCENE-1764</key>
            <summary>SampleComparable doesn&apos;t work well in contrib/remote tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                <reporter username="hossman">Hoss Man</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Jul 2009 22:15:24 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:29 +0100</updated>
                    <resolved>Sun, 2 Aug 2009 18:59:35 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12736299" author="hossman" created="Tue, 28 Jul 2009 22:16:31 +0100"  >&lt;p&gt;Note: i set this as &quot;fix in 2.9&quot; because it&apos;s not clear if this is a bug thta was newly introduced because of all the sorting changes in 2.9 (in which case we should fix it before release), or if it&apos;s always had this problem (in which case we can punt on it if no one has a fix)&lt;/p&gt;</comment>
                    <comment id="12736307" author="markrmiller@gmail.com" created="Tue, 28 Jul 2009 22:24:53 +0100"  >&lt;p&gt;Bug was a bit strong I guess - resource hog trap? - you can sidestep this if you implement hashcode/equals on your SortComparator. We need a warning to do that I think.&lt;/p&gt;

&lt;p&gt;For the unit test that fails, I&apos;ve changed the equals/hashcode for the SortComparator to use:&lt;/p&gt;

&lt;p&gt;      //@Override&lt;br/&gt;
      public int hashCode() &lt;/p&gt;
{
        return getClass().getName().hashCode();
      }

&lt;p&gt;      //@Override&lt;br/&gt;
      public boolean equals(Object other) &lt;/p&gt;
{
        return this.hashCode() == other.hashCode();
      }

&lt;p&gt;We have always had the issue, because the comparator has been part of the key, and when you pass a SortField over the wire, you get a new impl of the comparator factory field thats in it.&lt;/p&gt;</comment>
                    <comment id="12736310" author="thetaphi" created="Tue, 28 Jul 2009 22:27:25 +0100"  >&lt;p&gt;I think this bug was there before. SortField has the problem that not only SortComparator, also custom parsers that are not singletons (serializable singletons using readResolve()!!!) or do not have equals/hashcode will create new cache entries each time, e.g. this one:&lt;br/&gt;
&quot;new SortField(&quot;field&quot;, new FieldCache.LongParser() &lt;/p&gt;
{ ... }
&lt;p&gt;);&quot; creates a different parser instance each time and so a new cache entry is created (even in non-remote usage). This is noted in the docs.&lt;/p&gt;</comment>
                    <comment id="12736361" author="hossman" created="Wed, 29 Jul 2009 00:16:08 +0100"  >&lt;p&gt;updated title/severity since there is no generic problem with SortComparators ... the issue is specifically with SampleCamparable.&lt;/p&gt;</comment>
                    <comment id="12736362" author="hossman" created="Wed, 29 Jul 2009 00:17:19 +0100"  >&lt;p&gt;Committed revision 798726.&lt;/p&gt;

&lt;p&gt;hashcode/equals changes along what miller described.&lt;/p&gt;</comment>
                    <comment id="12736363" author="markrmiller@gmail.com" created="Wed, 29 Jul 2009 00:19:47 +0100"  >&lt;p&gt;We prob want a javadoc warning of some kind too though right? Its not immediately obvious that when you switch to using remote, you better have implemented some form of equals/hashcode or you will have a memory leak. &lt;/p&gt;</comment>
                    <comment id="12737531" author="markrmiller@gmail.com" created="Fri, 31 Jul 2009 15:09:34 +0100"  >&lt;p&gt;I think we need to add warnings - so reopening&lt;/p&gt;</comment>
                    <comment id="12737963" author="markrmiller@gmail.com" created="Sat, 1 Aug 2009 23:50:16 +0100"  >&lt;p&gt;Not very happy with it, but here is sort of a stub for the type of doc we need.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12415253" name="LUCENE-1764.patch" size="1710" author="markrmiller@gmail.com" created="Sat, 1 Aug 2009 23:50:16 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 28 Jul 2009 21:24:53 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11997</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25962</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>