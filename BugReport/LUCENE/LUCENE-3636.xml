<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:34:19 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3636/LUCENE-3636.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3636] make it possible to use searchermanager with distributed stats</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3636</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3555&quot; title=&quot;Add support for distributed stats&quot;&gt;&lt;del&gt;LUCENE-3555&lt;/del&gt;&lt;/a&gt; added explicit stats methods to indexsearcher, but you must&lt;br/&gt;
subclass to override this (e.g. populate with distributed stats).&lt;/p&gt;

&lt;p&gt;Its also impossible to then do this with SearcherManager.&lt;/p&gt;

&lt;p&gt;One idea is make this a factory method (or similar) on IndexSearcher instead,&lt;br/&gt;
so you don&apos;t need to subclass it to override.&lt;/p&gt;

&lt;p&gt;Then you can initialize this in a SearcherWarmer, except there is currently&lt;br/&gt;
a lot of hair in what this warming should be. This is a prime example where&lt;br/&gt;
Searcher has different meaning from Reader, we should clean this up.&lt;/p&gt;

&lt;p&gt;Otherwise, lets make NRT/SearcherManager subclassable in such a way that &lt;br/&gt;
you can return a custom indexsearcher.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12534654">LUCENE-3636</key>
            <summary>make it possible to use searchermanager with distributed stats</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Dec 2011 13:07:04 +0000</created>
                <updated>Fri, 10 May 2013 11:43:50 +0100</updated>
                    <resolved>Sun, 11 Dec 2011 17:18:04 +0000</resolved>
                            <version>3.5</version>
                <version>4.0-ALPHA</version>
                                <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13167082" author="rcmuir" created="Sun, 11 Dec 2011 13:09:29 +0000"  >&lt;p&gt;attached is a patch, but I&apos;m not sure I like the API on indexsearcher, i think it looks confusing.&lt;/p&gt;

&lt;p&gt;I disabled testIntermediateClose in TestSearcherManager, the concurrency is un-understandable and the test seems to rely upon how we warm today (which I changed in the patch)&lt;/p&gt;</comment>
                    <comment id="13167084" author="rcmuir" created="Sun, 11 Dec 2011 13:19:44 +0000"  >&lt;p&gt;I want to try another patch where we make SearcherManager non-final, and have newSearcher()&lt;br/&gt;
or similar. this way we can compare, doesn&apos;t seem like these classes really need to be final.&lt;/p&gt;</comment>
                    <comment id="13167087" author="shaie" created="Sun, 11 Dec 2011 13:32:09 +0000"  >&lt;p&gt;We can make these classes sub-classable, by making most of their methods final, except for newSearcher() and the like.&lt;/p&gt;

&lt;p&gt;Another option is to pass an IndexSearcherFactory which returns an IS given an IR.&lt;/p&gt;</comment>
                    <comment id="13167088" author="rcmuir" created="Sun, 11 Dec 2011 13:33:53 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Another option is to pass an IndexSearcherFactory which returns an IS given an IR.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That might be the only way to go... so we can safely handle the first searcher in the ctor this way too.&lt;/p&gt;</comment>
                    <comment id="13167093" author="rcmuir" created="Sun, 11 Dec 2011 13:56:47 +0000"  >&lt;p&gt;trying Shai&apos;s idea... i like it, it simplifies the APIs.&lt;/p&gt;</comment>
                    <comment id="13167096" author="mikemccand" created="Sun, 11 Dec 2011 14:11:29 +0000"  >&lt;p&gt;I got TestSM.testIntermediateClose to work &amp;#8211; had to modify the newSearcher method to only wait if reopen was tried.&lt;/p&gt;</comment>
                    <comment id="13167097" author="mikemccand" created="Sun, 11 Dec 2011 14:12:44 +0000"  >&lt;p&gt;+1 this approach is nice!&lt;/p&gt;

&lt;p&gt;So now it&apos;s caller&apos;s job to install a merged segment warmer on IW.&lt;/p&gt;</comment>
                    <comment id="13167098" author="rcmuir" created="Sun, 11 Dec 2011 14:15:56 +0000"  >&lt;p&gt;Thanks for fixing the test!&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;So now it&apos;s caller&apos;s job to install a merged segment warmer on IW.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, i should fix the javadocs to recommend this too. In general i think the javadocs need cleanup (I didnt test that there were no warnings yet).&lt;/p&gt;</comment>
                    <comment id="13167103" author="rcmuir" created="Sun, 11 Dec 2011 14:33:40 +0000"  >&lt;p&gt;Setting 3.5 and 4.0... really we should be able to backport this to 3.6 too, we just have to make &lt;br/&gt;
decisions about whether we should break or add lots of deprecated ctors &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13167106" author="shaie" created="Sun, 11 Dec 2011 14:50:54 +0000"  >&lt;p&gt;Phew, that does clean up a lot of code ! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Can we make SearcherFactory its own class? Since SearcherManager and NRTManager both depend on it (and I can already see how I will depend on it as well !), I think it can be its own top-level class.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;really we should be able to backport this to 3.6 too, we just have to make&lt;br/&gt;
decisions about whether we should break or add lots of deprecated ctors&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 for breaking. This API is new, experimental. We ought to be able to break it, and it&apos;s not like a very hard break.&lt;/p&gt;</comment>
                    <comment id="13167124" author="rcmuir" created="Sun, 11 Dec 2011 16:03:48 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Can we make SearcherFactory its own class? Since SearcherManager and NRTManager both depend on it (and I can already see how I will depend on it as well !), I think it can be its own top-level class.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, we don&apos;t have to put it inside SearcherManager.&lt;/p&gt;</comment>
                    <comment id="13167134" author="rcmuir" created="Sun, 11 Dec 2011 16:42:56 +0000"  >&lt;p&gt;updated patch with the factory top-level, javadocs and VERBOSE cleanup.&lt;/p&gt;</comment>
                    <comment id="13167135" author="mikemccand" created="Sun, 11 Dec 2011 16:46:38 +0000"  >&lt;p&gt;+1 looks nice!&lt;/p&gt;</comment>
                    <comment id="13167140" author="rcmuir" created="Sun, 11 Dec 2011 17:18:04 +0000"  >&lt;p&gt;Thanks for the help Shai and Mike!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12506903" name="LUCENE-3636.patch" size="23189" author="rcmuir" created="Sun, 11 Dec 2011 16:42:56 +0000" />
                    <attachment id="12506897" name="LUCENE-3636.patch" size="19251" author="mikemccand" created="Sun, 11 Dec 2011 14:11:29 +0000" />
                    <attachment id="12506895" name="LUCENE-3636.patch" size="18444" author="rcmuir" created="Sun, 11 Dec 2011 13:56:47 +0000" />
                    <attachment id="12506889" name="LUCENE-3636.patch" size="15433" author="rcmuir" created="Sun, 11 Dec 2011 13:09:29 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 11 Dec 2011 13:32:09 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>220376</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24062</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>