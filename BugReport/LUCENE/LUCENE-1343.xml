<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:15:24 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1343/LUCENE-1343.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1343] A replacement for AsciiFoldingFilter that does a more thorough job of removing diacritical marks or non-spacing modifiers.</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1343</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The ISOLatin1AccentFilter takes Unicode characters that have diacritical marks and replaces them with a version of that character with the diacritical mark removed.  For example &#233; becomes e.  However another equally valid way of representing an accented character in Unicode is to have the unaccented character followed by a non-spacing modifier character (like this:  &#233;  )    The ISOLatin1AccentFilter doesn&apos;t handle the accents in decomposed unicode characters at all.    Additionally there are some instances where a word will contain what looks like an accented character, that is actually considered to be a separate unaccented character  such as  &#321;  but which to make searching easier you want to fold onto the latin1  lookalike  version   L  .   &lt;/p&gt;

&lt;p&gt;The UnicodeNormalizationFilter can filter out accents and diacritical marks whether they occur as composed characters or decomposed characters, it can also handle cases where as described above characters that look like they have diacritics (but don&apos;t) are to be folded onto the letter that they look like ( &#321;  -&amp;gt; L )&lt;/p&gt;</description>
                <environment></environment>
            <key id="12400768">LUCENE-1343</key>
            <summary>A replacement for AsciiFoldingFilter that does a more thorough job of removing diacritical marks or non-spacing modifiers.</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="haschart">Robert Haschart</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jul 2008 20:28:27 +0100</created>
                <updated>Wed, 30 Mar 2011 16:49:53 +0100</updated>
                    <resolved>Thu, 6 May 2010 13:28:45 +0100</resolved>
                            <version>3.1</version>
                                <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>5</watches>
                                                    <comments>
                    <comment id="12615753" author="haschart" created="Tue, 22 Jul 2008 20:33:01 +0100"  >&lt;p&gt;Source code for UnicodeNormalizationFilter&lt;/p&gt;</comment>
                    <comment id="12615757" author="haschart" created="Tue, 22 Jul 2008 20:41:32 +0100"  >&lt;p&gt;Java 6 contains a class named java.text.Normalizer that is able to perform Unicode normalization, earlier versions of java do not have that class, and therefore need the code in this jar (which is a subset of the icu4j library) to be able to perform Unicode normalization.    The UnicodeNormalizationFilter can work with either the java 6 class java.text.Normalizer or the class com.ibm.icu.text.Normalizer in the jar here.&lt;/p&gt;</comment>
                    <comment id="12615770" author="hossman" created="Tue, 22 Jul 2008 21:13:48 +0100"  >&lt;p&gt;Random related comment (just because this issue seemed like a good place to put it)&lt;/p&gt;

&lt;p&gt;People may also want to consider constructing a Filter based on the substitution tables from the perl Text::Unidecode module...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://search.cpan.org/~sburke/Text-Unidecode/&quot; class=&quot;external-link&quot;&gt;http://search.cpan.org/~sburke/Text-Unidecode/&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://interglacial.com/~sburke/tpj/as_html/tpj22.html&quot; class=&quot;external-link&quot;&gt;http://interglacial.com/~sburke/tpj/as_html/tpj22.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...i have no idea how it&apos;s behavior compares to the UnicodeNormalizationFilter, just that it seems to have similar goals.&lt;/p&gt;</comment>
                    <comment id="12615775" author="steve_rowe" created="Tue, 22 Jul 2008 21:20:39 +0100"  >&lt;p&gt;Hi Robert,&lt;/p&gt;

&lt;p&gt;My comments below assume you&apos;re intrestested in having this code hosted in the Lucene source repository - please disregard if that&apos;s not the case.&lt;/p&gt;

&lt;p&gt;Have you seen the &lt;a href=&quot;http://wiki.apache.org/lucene-java/HowToContribute&quot; class=&quot;external-link&quot;&gt;HowToContribute page on the Lucene wiki&lt;/a&gt;?  It outlines some of the basics concerning code submissions.&lt;/p&gt;

&lt;p&gt;A couple of things I noticed that need to be addressed before the code will be accepted:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Tab characters should be converted to spaces&lt;/li&gt;
	&lt;li&gt;Indentation increment should be two spaces&lt;/li&gt;
	&lt;li&gt;Test(s) should be moved from the UnicodeNormalizationFilterFactory.main() method into standalone class(es) that extend LuceneTestCase&lt;/li&gt;
	&lt;li&gt;More/more explicit javadocs - for example, you should describe the set of provided transformations (e.g. Cyrillic diacritic stripping is included).&lt;/li&gt;
	&lt;li&gt;Solr is a separate code base, so the UnicodeNormalizationFilterFactory should be moved to a Solr JIRA issue&lt;/li&gt;
	&lt;li&gt;Because it has a dependency on the ICU jar, this contribution will have to live in the contrib/ area &amp;#8211; the Java packages name should be adjusted accordingly.&lt;/li&gt;
	&lt;li&gt;The submission should be repackaged as a patch (instructions available on the above-linked wiki page).&lt;/li&gt;
&lt;/ol&gt;
</comment>
                    <comment id="12622345" author="goksron" created="Wed, 13 Aug 2008 21:31:18 +0100"  >&lt;p&gt;Some languages like Cyrillic have a standard latin-1 transliteration, and deserve their own filters. &lt;/p&gt;

&lt;p&gt;Cyrillic is one case of this. It is based on three alphabets: 1/3 latin, 1/3 greek, and 1/3 new characters for &apos;ya/ye&apos;, &apos;ts&apos;, &apos;sh&apos;, &apos;ch&apos;, &apos;zh&apos;, and &apos;sh-ch&apos; (fiSH CHips!).&lt;/p&gt;

&lt;p&gt;Unit tests are the best way to document the many ways this thing can work.&lt;/p&gt;


</comment>
                    <comment id="12622432" author="kkrugler" created="Thu, 14 Aug 2008 04:49:15 +0100"  >&lt;p&gt;Hi Robert,&lt;/p&gt;

&lt;p&gt;FWIW, the issues being discussed here are very similar to those covered by the &lt;a href=&quot;http://www.unicode.org/reports/tr36/&quot; class=&quot;external-link&quot;&gt;Unicode Security Considerations&lt;/a&gt; technical report #36, and associated data found in the &lt;a href=&quot;http://www.unicode.org/reports/tr39/&quot; class=&quot;external-link&quot;&gt;Unicode Security Mechanisms&lt;/a&gt; technical report #39.&lt;/p&gt;

&lt;p&gt;The fundamental issue for int&apos;l domain name spoofing is detecting when two sequences of Unicode code points will render as similar glyphs...which is basically the same issue you&apos;re trying to address here, so that when you search for something you&apos;ll find all terms that &quot;look&quot; similar.&lt;/p&gt;

&lt;p&gt;So for a more complete (though undoubtedly slower &amp;amp; bigger) solution, I&apos;d suggest using ICU4J to do a NFKD normalization, then toss any combining/spacing marks, lower-case the result, and finally apply mappings using the data tables found in the technical report #39 referenced above.&lt;/p&gt;

&lt;p&gt;&amp;#8211; Ken&lt;/p&gt;</comment>
                    <comment id="12622476" author="ehatcher" created="Thu, 14 Aug 2008 09:42:31 +0100"  >&lt;blockquote&gt;
&lt;p&gt;Unit tests are the best way to document the many ways this thing can work.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;gets a judges score of 11 from me.  Gold for Lance for Quote of the Day.&lt;/p&gt;</comment>
                    <comment id="12622607" author="haschart" created="Thu, 14 Aug 2008 18:10:45 +0100"  >&lt;p&gt;The UnicodeNormalizationFilter does use the decompose normalization &lt;br/&gt;
portion of the icu4j library as a starting point.  However even with &lt;br/&gt;
that there are several instances where the normalizer code does not &lt;br/&gt;
decompose a character into an unaccented character and a accent mark, a &lt;br/&gt;
notable one being   ( &#321; -&amp;gt; L )  so the UnicodeNormalizationFilter start &lt;br/&gt;
with the approach you outlined, perform a decompose normalization &lt;br/&gt;
followed by discarding all non-spacing modifier characters, and then can &lt;br/&gt;
go on from there to further normalize the data by folding the additional &lt;br/&gt;
characters that aren&apos;t handled by the decompose normalization onto their &lt;br/&gt;
Latin1 lookalikes.&lt;/p&gt;

&lt;p&gt;-Robert&lt;/p&gt;



</comment>
                    <comment id="12622746" author="kkrugler" created="Fri, 15 Aug 2008 00:41:00 +0100"  >&lt;p&gt;Hi Robert,&lt;/p&gt;

&lt;p&gt;So given that you and the Unicode consortium seem to be working on the same problem (normalizing visually similar characters), how similar are your tables to the ones that have been developed to deter spoofing of int&apos;l domain names?&lt;/p&gt;

&lt;p&gt;&amp;#8211; Ken&lt;/p&gt;</comment>
                    <comment id="12786689" author="markrmiller@gmail.com" created="Sun, 6 Dec 2009 20:09:19 +0000"  >&lt;p&gt;Mr Muir, can you take a look at this? Offer anything over the ASCIIFoldingFilter? If not, we should close, if so, what do you recommend?&lt;/p&gt;</comment>
                    <comment id="12786701" author="rcmuir" created="Sun, 6 Dec 2009 20:54:49 +0000"  >&lt;p&gt;The big picture here and all these other duplicated normalization issues across jira is related to the outdated unicode support in the JDK. &lt;/p&gt;

&lt;p&gt;This issue speaks of removing diacritical marks / NSM&apos;s, but the underlying issue is missing unicode normalization, duplicated here (incorrectly named): &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1215&quot; title=&quot;Support of Unicode Collation&quot;&gt;&lt;del&gt;LUCENE-1215&lt;/del&gt;&lt;/a&gt; and also here: &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1488&quot; title=&quot;multilingual analyzer based on icu&quot;&gt;&lt;del&gt;LUCENE-1488&lt;/del&gt;&lt;/a&gt; (disclaimer: my impl)&lt;/p&gt;

&lt;p&gt;Speaking for the accent removal: In truth I do not think we should be simply removing NSMs because in most cases, they are there for a reason. For example, they are diacritics in a lot of european languages, but for many eastern languages they are the actual vowels. (i.e. all the indic scripts)&lt;/p&gt;

&lt;p&gt;We need to separate the issue of missing unicode normalization (which is clearly something lucene needs), from the issue of removing diacritics (which is language-specific and doing it based on unicode properties is inappropriate).&lt;/p&gt;

&lt;p&gt;Finally just normalizing unicode in Lucene by itself is not very useful, because there is a careful interaction with other processes and attention needs to be paid to the order in which filters are run. For example, its interaction with case folding can be a bit tricky. If you are interested in this issue I urge you to read the javadocs writeup I placed in the ICUNormalizationFilter in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1488&quot; title=&quot;multilingual analyzer based on icu&quot;&gt;&lt;del&gt;LUCENE-1488&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    <comment id="12786712" author="kkrugler" created="Sun, 6 Dec 2009 21:44:23 +0000"  >&lt;p&gt;Just to make sure this point doesn&apos;t get lost in the discussion over normalization - the issue of &quot;visual normalization&quot; is one that I think ISOLatin1AccentFilter originally was trying to address. Specifically how to fold together forms of letters that a user, when typing, might consider equivalent.&lt;/p&gt;

&lt;p&gt;This is indeed language specific, and re-implementing support that&apos;s already in ICU4J is clearly a Bad Idea.&lt;/p&gt;

&lt;p&gt;I think there&apos;s value in a general normalizer that implements the Unicode Consortium&apos;s algorithm/data for normalization of int&apos;l domain names, as this is intended to avoid visual spoofing of domain names.&lt;/p&gt;

&lt;p&gt;Don&apos;t know/haven&apos;t tracked if or when this is going into ICU4J. But (similar to ICU generic sorting) it provides a useful locale-agnostic approach that would work well-enough for most Lucene use cases.&lt;/p&gt;</comment>
                    <comment id="12786724" author="rcmuir" created="Sun, 6 Dec 2009 22:24:26 +0000"  >&lt;p&gt;Hi Ken, such functionality does exist, although it is new and I think still changing (you are talking about StringPrep/IDN/etc?).&lt;/p&gt;

&lt;p&gt;If a filter for this is desired, we can do it with ICU, though I think its relatively new (probably not optimized, only works on String, etc etc)&lt;/p&gt;

&lt;p&gt;I still think even this is stupid, because unicode encodes characters, not glyphs.&lt;/p&gt;</comment>
                    <comment id="12786941" author="dmsmith" created="Mon, 7 Dec 2009 15:20:14 +0000"  >&lt;p&gt;I also am dubious about a general purpose folding filter that maps letters to their ASCII look-alike and agree that folding is language dependent.&lt;/p&gt;

&lt;p&gt;May Americans are illiterate when it comes to text with diacritics and NSM. Personally I&apos;m nearly illiterate. I think having prominent folding filters without adequate explanation about their pitfalls or usefulness may lead illiterates into a false sense of sufficiency.&lt;/p&gt;

&lt;p&gt;If it makes sense to have a filter for TR39 I think that should be a separate issue. If that&apos;s what this issue is all about then it&apos;s description should be modified.&lt;/p&gt;

&lt;p&gt;I think this should otherwise be closed as a bad idea.&lt;/p&gt;

&lt;p&gt;Robert Muir, Would it make sense to have a Greek filter that strips diacritics? My thought is that if the letter is Greek then the diacritics would be removed, but otherwise it would not.&lt;/p&gt;

&lt;p&gt;Similar question for Hebrew, I see value in two filters: one would strip cantillation and the other, vowel points. Or would it be better to have one that can do both depending on flags?&lt;/p&gt;</comment>
                    <comment id="12786946" author="rcmuir" created="Mon, 7 Dec 2009 15:29:45 +0000"  >&lt;blockquote&gt;&lt;p&gt;Robert Muir, Would it make sense to have a Greek filter that strips diacritics? My thought is that if the letter is Greek then the diacritics would be removed, but otherwise it would not.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The GreekLowerCaseFilter (incorrectly named) does this also, somewhat. it removes tone marks... but this might not be what you &quot;want&quot; (depending on what that is), if you are dealing with polytonic Greek (sorry for my ignorance of the biblical test you are looking at, but I think it is ancient Greek?)&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Similar question for Hebrew, I see value in two filters: one would strip cantillation and the other, vowel points. Or would it be better to have one that can do both depending on flags?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This depends on your use case, and then you have dagesh,shin dot, too... These are all NSMs. But this is going to depend on the user, and I think every person will need their own, they can use CharFilter or other ways of defining these tables.&lt;/p&gt;</comment>
                    <comment id="12786968" author="dmsmith" created="Mon, 7 Dec 2009 16:07:47 +0000"  >&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Robert Muir, Would it make sense to have a Greek filter that strips diacritics? My thought is that if the letter is Greek then the diacritics would be removed, but otherwise it would not.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The GreekLowerCaseFilter (incorrectly named) does this also, somewhat. it removes tone marks... but this might not be what you &quot;want&quot; (depending on what that is), if you are dealing with polytonic Greek (sorry for my ignorance of the biblical test you are looking at, but I think it is ancient Greek?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, I&apos;m referring to ancient Greek (grc, not el) and they are tone and breathing marks. Most ancient texts did not have these marks but modern do. Even some modern representations of the ancient. While I have several semesters of koine Greek under my belt and might be wrong, there may be ambiguities where two words have the same letters but differ on marks, but they are infrequent (I don&apos;t know of any).&lt;/p&gt;

&lt;p&gt;The GreekLowerCaseFilter appears to only do some of the work and only works on composed characters.&lt;/p&gt;

&lt;p&gt;My question is not whether I&apos;d find the filter useful, but whether it&apos;d be a useful addition to Lucene.&lt;/p&gt;

&lt;blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Similar question for Hebrew, I see value in two filters: one would strip cantillation and the other, vowel points. Or would it be better to have one that can do both depending on flags?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This depends on your use case, and then you have dagesh,shin dot, too... These are all NSMs.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I have a terrible habit of not being exact or using the proper terms. Shame on me. I meant that the latter strip all other marks.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But this is going to depend on the user, and I think every person will need their own, they can use CharFilter or other ways of defining these tables.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If there is no general purpose contribution, then it should not be part of Lucene and I&apos;ll have my own.&lt;/p&gt;

&lt;p&gt;When I do work them up, I&apos;ll create an issue or two and attach the results. If they are deemed useful then they can be added to Lucene, otherwise ignored.&lt;/p&gt;</comment>
                    <comment id="12786971" author="rcmuir" created="Mon, 7 Dec 2009 16:18:45 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Yes, I&apos;m referring to ancient Greek (grc, not el) and they are tone and breathing marks. Most ancient texts did not have these marks but modern do. Even some modern representations of the ancient. While I have several semesters of koine Greek under my belt and might be wrong, there may be ambiguities where two words have the same letters but differ on marks, but they are infrequent (I don&apos;t know of any).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I guess I brought this up because this is where you have several situations where case folding and normalization interact, eg. applying FC_NFKC set when case folding so that later NFK&lt;span class=&quot;error&quot;&gt;&amp;#91;CD&amp;#93;&lt;/span&gt; normalization will be closed, I know this is supposed to solve various ways the YPOGEGRAMMENI can be implemented but I forget the details...&lt;/p&gt;

&lt;p&gt;This is why I think, the general purpose contribution should be case folding, normalization, and the stuff like this (FC_NFKC set) to make sure they work together...&lt;/p&gt;

&lt;p&gt;If you later want to apply something more specialized like StringPrep, you need this logic anyway, see &lt;a href=&quot;http://www.ietf.org/rfc/rfc3454.txt&quot; class=&quot;external-link&quot;&gt;http://www.ietf.org/rfc/rfc3454.txt&lt;/a&gt; (especially section 3.2) &lt;/p&gt;</comment>
                    <comment id="12858144" author="rcmuir" created="Sat, 17 Apr 2010 15:34:18 +0100"  >&lt;p&gt;OK! I think we have a good solution here!.&lt;/p&gt;

&lt;p&gt;We can use ICU&apos;s Normalizer2 to implement this, by simply creating a custom normalization mapping.&lt;br/&gt;
This way we can meet multiple use-cases, e.g. someone wants to remove diacritics, someone else doesn&apos;t.&lt;/p&gt;

&lt;p&gt;And we get solid unicode behavior and high performance to boot.&lt;/p&gt;

&lt;p&gt;So I will keep this issue open, I think the best solution is to take the accent-folding mappings here (or use the ones in AsciiFoldingFilter?) and create a .txt file of mappings, passing it to gennorm2 along with NFKC case fold mappings.&lt;/p&gt;

&lt;p&gt;This way we can implement this on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2399&quot; title=&quot;Add support for ICU&amp;#39;s Normalizer2&quot;&gt;&lt;del&gt;LUCENE-2399&lt;/del&gt;&lt;/a&gt;, all compiled to an efficient binary form with no code.&lt;br/&gt;
I&apos;ll take a shot at this once &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2399&quot; title=&quot;Add support for ICU&amp;#39;s Normalizer2&quot;&gt;&lt;del&gt;LUCENE-2399&lt;/del&gt;&lt;/a&gt; is resolved.&lt;/p&gt;</comment>
                    <comment id="12858420" author="rcmuir" created="Mon, 19 Apr 2010 09:35:48 +0100"  >&lt;p&gt;Attached is a patch that implements UTR#30 as a tailored unicode normalization form.&lt;/p&gt;

&lt;p&gt;Essentially it acts as a combined &quot;Internationalized AsciiFoldingFilter&quot; + NFKC_CaseFold (Unicode Case Folding, Default Ignorable removal, and NFKC normalization).&lt;/p&gt;

&lt;p&gt;This is a nice alternative to just using ICUNormalizer2Filter in the case that you want &quot;fuzzy matching&quot; (e.g. ignore diacritical marks). &lt;/p&gt;

&lt;p&gt;The patch is large because it contains all the source data files necessary for gennorm2 to regenerate the 41KB binary trie file... the java implementation is trivial.&lt;/p&gt;</comment>
                    <comment id="12858421" author="rcmuir" created="Mon, 19 Apr 2010 09:37:36 +0100"  >&lt;p&gt;attached is the binary file that goes in the resources/ directory.&lt;/p&gt;

&lt;p&gt;Although I provide the ant logic to regenerate this, its kind of a pain because&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;you must download/compile ICU4c (version 4.4), there is no java gennorm2&lt;/li&gt;
	&lt;li&gt;you must run this on a big-endian machine.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12858891" author="rcmuir" created="Tue, 20 Apr 2010 14:51:22 +0100"  >&lt;p&gt;By the way, I have been running this with the ASCIIFoldingFilter tests and ensuring its a superset (e.g. we have at least all their mappings).&lt;/p&gt;

&lt;p&gt;But there are some bugs in ASCIIFoldingFilter that should be fixed:&lt;/p&gt;

&lt;p&gt;For example, U+1E9B (LATIN SMALL LETTER LONG S WITH DOT ABOVE)&lt;br/&gt;
But in unicode. this is canonically equivalent to U+017F (LONG S) U+0307 (COMBINING DOT ABOVE)&lt;br/&gt;
AsciiFoldingFilter folds U+1E9B (LONG S WITH DOT) to an F&lt;br/&gt;
but it folds U+017F (LONG S) to an S&lt;/p&gt;

&lt;p&gt;Unicode defines this character as a compatibility equivalent to S anyway, but its worse that ASCIIFoldingFilter is canonically inconsistent with itself.&lt;/p&gt;</comment>
                    <comment id="12858907" author="rcmuir" created="Tue, 20 Apr 2010 15:35:15 +0100"  >&lt;p&gt;attached is a modified patch (i will upload the new datafile too).&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;applied ICU or Unicode copyright headers to any datafiles where I sourced from their data, and added a mention to NOTICE.txt to that effect.&lt;/li&gt;
	&lt;li&gt;added some additional punctuation mappings to ensure it contains all ASCIIFoldingFilter foldings&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As noted previously, there are 5 places where this disagrees with ASCIIFoldingFilter:&lt;br/&gt;
U+1E9B: LATIN SMALL LETTER LONG S WITH DOT ABOVE (should be s)&lt;br/&gt;
U+2033: DOUBLE PRIME (should be two single quotes)&lt;br/&gt;
U+2036: REVERSED DOUBLE PRIME (same as above)&lt;br/&gt;
U+2038: CARET (folds to CIRCUMFLEX ACCENT, which should be deleted as its &lt;span class=&quot;error&quot;&gt;&amp;#91;:Diacritic:&amp;#93;&lt;/span&gt;&lt;br/&gt;
U+FF3E: FULLWIDTH CIRCUMFLEX ACCENT (same as above)&lt;/p&gt;

&lt;p&gt;I plan to commit in a few days if no one objects.&lt;/p&gt;</comment>
                    <comment id="12858908" author="rcmuir" created="Tue, 20 Apr 2010 15:36:06 +0100"  >&lt;p&gt;updated datafile.&lt;/p&gt;</comment>
                    <comment id="12859746" author="rcmuir" created="Thu, 22 Apr 2010 09:48:46 +0100"  >&lt;p&gt;Committed revision 936657.&lt;/p&gt;</comment>
                    <comment id="12861275" author="jamietaylor" created="Tue, 27 Apr 2010 08:17:39 +0100"  >&lt;p&gt;Very useful for unicode normalization/folding.  But after trying this package in the nightly build I looked back at the patch and realized that it has a dependency on IBM ICU.&lt;/p&gt;

&lt;p&gt;import com.ibm.icu.text.Normalizer2;&lt;/p&gt;

&lt;p&gt;Is this intentional?  Will it remain dependent?&lt;/p&gt;</comment>
                    <comment id="12861290" author="thetaphi" created="Tue, 27 Apr 2010 08:47:31 +0100"  >&lt;p&gt;Yes, as this contrib package is called &quot;ICU&quot;. If you dont want to use ICU, dont use this contrib. You can alway use ASCIIFoldingFilter, it will not get removed.&lt;/p&gt;</comment>
                    <comment id="12864748" author="rcmuir" created="Thu, 6 May 2010 13:28:45 +0100"  >&lt;p&gt;backported to 3x, revision 941694.&lt;/p&gt;</comment>
                    <comment id="13013289" author="gsingers" created="Wed, 30 Mar 2011 16:49:53 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12404567">LUCENE-1390</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12442301" name="LUCENE-1343.patch" size="186958" author="rcmuir" created="Tue, 20 Apr 2010 15:35:15 +0100" />
                    <attachment id="12442147" name="LUCENE-1343.patch" size="179814" author="rcmuir" created="Mon, 19 Apr 2010 09:35:48 +0100" />
                    <attachment id="12386659" name="normalizer.jar" size="399107" author="haschart" created="Tue, 22 Jul 2008 20:41:32 +0100" />
                    <attachment id="12386658" name="UnicodeCharUtil.java" size="26097" author="haschart" created="Tue, 22 Jul 2008 20:33:01 +0100" />
                    <attachment id="12386656" name="UnicodeNormalizationFilterFactory.java" size="8740" author="haschart" created="Tue, 22 Jul 2008 20:33:01 +0100" />
                    <attachment id="12386657" name="UnicodeNormalizationFilter.java" size="4597" author="haschart" created="Tue, 22 Jul 2008 20:33:01 +0100" />
                    <attachment id="12442302" name="utr30.nrm" size="42140" author="rcmuir" created="Tue, 20 Apr 2010 15:36:06 +0100" />
                    <attachment id="12442148" name="utr30.nrm" size="41932" author="rcmuir" created="Mon, 19 Apr 2010 09:37:35 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>8.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 22 Jul 2008 20:13:48 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12405</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26385</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>