<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:05:41 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1356/LUCENE-1356.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1356] Allow easy extensions of TopDocCollector</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1356</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;TopDocCollector&apos;s members and constructor are declared either private or package visible. It makes it hard to extend it as if you want to extend it you can reuse its &lt;b&gt;hq&lt;/b&gt; and &lt;b&gt;totatlHits&lt;/b&gt; members, but need to define your own. It also forces you to override getTotalHits() and topDocs().&lt;br/&gt;
By changing its members and constructor (the one that accepts a PQ) to protected, we allow users to extend it in order to get a different view of &apos;top docs&apos; (like TopFieldCollector does), but still enjoy its getTotalHits() and topDocs() method implementations.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12402306">LUCENE-1356</key>
            <summary>Allow easy extensions of TopDocCollector</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="doronc">Doron Cohen</assignee>
                                <reporter username="shaie">Shai Erera</reporter>
                        <labels>
                    </labels>
                <created>Wed, 13 Aug 2008 14:59:15 +0100</created>
                <updated>Fri, 13 May 2011 19:20:36 +0100</updated>
                    <resolved>Thu, 4 Sep 2008 00:19:45 +0100</resolved>
                                            <fixVersion>2.4</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12622218" author="shaie" created="Wed, 13 Aug 2008 15:00:20 +0100"  >&lt;p&gt;The very trivial patch&lt;/p&gt;</comment>
                    <comment id="12622223" author="doronc" created="Wed, 13 Aug 2008 15:33:06 +0100"  >&lt;p&gt;Shai, Thanks for creating this issue and patch!&lt;/p&gt;

&lt;p&gt;I noticed you also modified the private reusableSD to be protected.&lt;/p&gt;

&lt;p&gt;This field is just for avoiding creating a new object at each insert to the priority queue. &lt;br/&gt;
Note that TopFieldDocCollector maintains its own reusable object for this matter, and it of a &apos;slightly&apos; different type.&lt;/p&gt;

&lt;p&gt;I am wondering if the right thing to do is to (1) leave that field private, or (2) make it protected but then make TopFieldDocCollector  use it too.&lt;br/&gt;
I&apos;m inclined for option 1.&lt;/p&gt;

&lt;p&gt;What do you think? Others?&lt;/p&gt;</comment>
                    <comment id="12622441" author="shaie" created="Thu, 14 Aug 2008 06:23:38 +0100"  >&lt;p&gt;IMO, TopFieldDocCollector should be changed to use reusableSD. FieldDoc extends ScoreDoc. That&apos;s the reason I modified it to protected - for extensions of TopDocCollector who maintain in PQ ScoreDoc types (either ScoreDoc or extensions).&lt;br/&gt;
I don&apos;t see any advantage in marking it private, nor any disadvantage if any extension to TopDocCollector will maintain its own ScoreDoc instance.&lt;br/&gt;
It&apos;s just that we have TopDocCollector, TopFieldDocCollector and my extension to TDC which insert ScoreDoc instances into PQ, so it made sense to me to change it to protected.&lt;/p&gt;</comment>
                    <comment id="12623267" author="shaie" created="Mon, 18 Aug 2008 07:26:06 +0100"  >&lt;p&gt;Re-thinking this - resuableSD should remain private to both TDC and TFDC. The reason is the two classes use it differently and don&apos;t share any implementation which involves this member (unlike totalHits and hq).&lt;/p&gt;

&lt;p&gt;I was in the middle of adding javadoc to the protected members and constructor (which accepts numHits and PQ) when I noticed that numHits is completely ignored by this constructor --&amp;gt; TopDocCollector(int numHits, PriortityQueue hq).&lt;br/&gt;
The reason is that PQ is be probably configured to hold a maximum number of hits.&lt;/p&gt;

&lt;p&gt;What bothers me with this constructor is that it may falsely lead users of the API to think that it limits their PQ with a maximum number of hits. I think we should remove that parameter and expose two constructors:&lt;br/&gt;
public TopDocCollector(int numHits) AND public TopDocCollector(PriorityQueue hq).&lt;/p&gt;

&lt;p&gt;If you agree, I&apos;ll reflect that in the 2nd patch I want to create (which adds javadoc).&lt;/p&gt;</comment>
                    <comment id="12623274" author="doronc" created="Mon, 18 Aug 2008 08:25:30 +0100"  >&lt;p&gt;You&apos;re right, this is confusing indeed.&lt;br/&gt;
Although it is not public or protected there may users code &lt;br/&gt;
(residing in same package) relying on this method so it can&apos;t&lt;br/&gt;
just be removed but rather just deprecated.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;If you agree, I&apos;ll reflect that in the 2nd patch I want to create (which adds javadoc).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes thanks!&lt;/p&gt;</comment>
                    <comment id="12623281" author="shaie" created="Mon, 18 Aug 2008 09:09:07 +0100"  >&lt;p&gt;Marked the constructor as deprecated, created another one (protected) which accepts PQ only and modified TopFieldDocCollector to use the new c&apos;tor instead of the deprecated one.&lt;br/&gt;
Also added javadoc.&lt;/p&gt;</comment>
                    <comment id="12628163" author="mikemccand" created="Wed, 3 Sep 2008 22:50:22 +0100"  >&lt;p&gt;Doron is this one ready to go in?&lt;/p&gt;</comment>
                    <comment id="12628193" author="doronc" created="Thu, 4 Sep 2008 00:09:46 +0100"  >&lt;p&gt;It is, applies cleanly and seems correct. &lt;br/&gt;
Will commit as soon as tests complete.&lt;/p&gt;</comment>
                    <comment id="12628196" author="doronc" created="Thu, 4 Sep 2008 00:19:45 +0100"  >&lt;p&gt;Thanks Shai !&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12388411" name="1356-2.patch" size="2004" author="shaie" created="Mon, 18 Aug 2008 09:09:07 +0100" />
                    <attachment id="12388144" name="1356.patch" size="858" author="shaie" created="Wed, 13 Aug 2008 15:00:20 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 13 Aug 2008 14:33:06 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12392</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26372</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>