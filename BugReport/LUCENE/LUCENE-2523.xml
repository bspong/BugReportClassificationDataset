<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:19:49 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2523/LUCENE-2523.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2523] if index is too old you should hit an exception saying so</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2523</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;If you create an index in 2.3.x (I used demo&apos;s IndexFiles) and then try to read it in 4.0.x (I used CheckIndex), you hit a confusing exception like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: read past EOF
        at org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:154)
        at org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:39)
        at org.apache.lucene.store.ChecksumIndexInput.readByte(ChecksumIndexInput.java:40)
        at org.apache.lucene.store.DataInput.readInt(DataInput.java:76)
        at org.apache.lucene.index.SegmentInfo.&amp;lt;init&amp;gt;(SegmentInfo.java:171)
        at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:230)
        at org.apache.lucene.index.SegmentInfos$1.doBody(SegmentInfos.java:269)
        at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:649)
        at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:484)
        at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:265)
        at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:308)
        at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:287)
        at org.apache.lucene.index.CheckIndex.main(CheckIndex.java:930)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think instead we should throw an IndexTooOldException or something like that?&lt;/p&gt;</description>
                <environment></environment>
            <key id="12468415">LUCENE-2523</key>
            <summary>if index is too old you should hit an exception saying so</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Jul 2010 10:32:52 +0100</created>
                <updated>Fri, 10 May 2013 11:44:29 +0100</updated>
                    <resolved>Tue, 20 Jul 2010 15:56:46 +0100</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                                                  <comments>
                    <comment id="12884663" author="markrmiller@gmail.com" created="Fri, 2 Jul 2010 13:47:37 +0100"  >&lt;blockquote&gt;&lt;p&gt;I think instead we should throw an IndexTooOldException or something like that?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 - should be nice warm warnings for all index version incompat stuff. A Solr user ran into this the other day I think.&lt;/p&gt;</comment>
                    <comment id="12889621" author="thetaphi" created="Sun, 18 Jul 2010 14:45:21 +0100"  >&lt;p&gt;Here initial patch. I have not yet added a new Exception, but if the text is saying all information and we maybe better use Version Names that contain the first/last supported Lucene Version (not format version), we are fine.&lt;/p&gt;</comment>
                    <comment id="12889627" author="thetaphi" created="Sun, 18 Jul 2010 15:41:37 +0100"  >&lt;p&gt;Here a revised patch after discussion in IRC:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Move the SegmentInfos Versions to the default reader/writer. There is still the format version used at one place in o.a.l.index, maybe we should remove version support there, too&lt;/li&gt;
	&lt;li&gt;Added two Exceptions for too old and too new index.&lt;/li&gt;
	&lt;li&gt;Unified all messages&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12889628" author="thetaphi" created="Sun, 18 Jul 2010 16:09:01 +0100"  >&lt;p&gt;Added minimum version support to CodecUtil.&lt;/p&gt;</comment>
                    <comment id="12889634" author="thetaphi" created="Sun, 18 Jul 2010 17:14:05 +0100"  >&lt;p&gt;This patch now also adds a test, that tries to open old indexes in TestBaclwards and tries to use them. This should produce &lt;b&gt;only&lt;/b&gt; IndexTooOldExceptions, if other exceptions are throws we have still bugs.&lt;/p&gt;

&lt;p&gt;You have to add the old zip files back from 3.x branch with slight renaming. I prefer to use all of them to check all possible old formats, especially those with no version support.&lt;/p&gt;

&lt;p&gt;All tests pass.&lt;/p&gt;</comment>
                    <comment id="12889640" author="thetaphi" created="Sun, 18 Jul 2010 18:50:31 +0100"  >&lt;p&gt;I think this is ready to commit!&lt;/p&gt;</comment>
                    <comment id="12889874" author="cmale" created="Mon, 19 Jul 2010 15:37:49 +0100"  >&lt;p&gt;Since its the format of the index, not the index itself, that is too old / too new, I vote for calling the exceptions IndexFormatTooOldException / IndexFormatTooNewException.  &lt;/p&gt;</comment>
                    <comment id="12889888" author="thetaphi" created="Mon, 19 Jul 2010 16:21:46 +0100"  >&lt;p&gt;I had the same idea, I think I should change this! I will also change the Exception ctor a little bit to produce a generic text, maybe including filename and min/max format version.&lt;/p&gt;</comment>
                    <comment id="12890034" author="thetaphi" created="Mon, 19 Jul 2010 22:08:32 +0100"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Rename of Exception&lt;/li&gt;
	&lt;li&gt;Disabled the segments.gen version check. I had several exceptions about illegal format 0 on windows.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Will investigate more tomorrow.&lt;/p&gt;</comment>
                    <comment id="12890250" author="thetaphi" created="Tue, 20 Jul 2010 13:54:32 +0100"  >&lt;p&gt;The final patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I streamlined the exceptions. The ctor tooks filename, actual format version and min/max. The message is then generated in the exception ctor and looks identical everywhere in the code. Where the filename is not available, it is left out (null). Maybe we should add the filename to CodecUtils, to be able to display it on errors. This helps finding out, which file has wrong header. Or is there a way to get file name from IndexInput?&lt;/li&gt;
	&lt;li&gt;I keep the segments.gen version check disabled, this seems to be needed on windows, to be able to retry.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I will commit soon!&lt;/p&gt;</comment>
                    <comment id="12890273" author="thetaphi" created="Tue, 20 Jul 2010 15:56:46 +0100"  >&lt;p&gt;Committed revision: 965868&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12449922" name="LUCENE-2523.patch" size="34522" author="thetaphi" created="Tue, 20 Jul 2010 13:54:32 +0100" />
                    <attachment id="12449879" name="LUCENE-2523.patch" size="32076" author="thetaphi" created="Mon, 19 Jul 2010 22:08:32 +0100" />
                    <attachment id="12449796" name="LUCENE-2523.patch" size="37073" author="thetaphi" created="Sun, 18 Jul 2010 17:26:12 +0100" />
                    <attachment id="12449792" name="LUCENE-2523.patch" size="26907" author="thetaphi" created="Sun, 18 Jul 2010 16:09:01 +0100" />
                    <attachment id="12449791" name="LUCENE-2523.patch" size="17043" author="thetaphi" created="Sun, 18 Jul 2010 15:41:37 +0100" />
                    <attachment id="12449789" name="LUCENE-2523.patch" size="8376" author="thetaphi" created="Sun, 18 Jul 2010 14:45:21 +0100" />
                </attachments>
            <subtasks>
            <subtask id="12469731">LUCENE-2552</subtask>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>6.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 2 Jul 2010 12:47:37 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11303</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25169</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>