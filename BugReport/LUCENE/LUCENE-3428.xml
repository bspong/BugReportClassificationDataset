<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:15:36 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3428/LUCENE-3428.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3428] trunk tests hang/deadlock TestIndexWriterWithThreads</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3428</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;trunk tests have been hanging often lately in hudson, this time i was careful to kill and get a good stacktrace:&lt;/p&gt;</description>
                <environment></environment>
            <key id="12522681">LUCENE-3428</key>
            <summary>trunk tests hang/deadlock TestIndexWriterWithThreads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="simonw">Simon Willnauer</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 11 Sep 2011 17:34:19 +0100</created>
                <updated>Fri, 10 May 2013 11:43:01 +0100</updated>
                    <resolved>Mon, 14 Nov 2011 10:26:36 +0000</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13102296" author="rcmuir" created="Sun, 11 Sep 2011 17:34:47 +0100"  >&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/G-L/view/Lucene/job/Lucene-Solr-tests-only-trunk/10500&quot; class=&quot;external-link&quot;&gt;https://builds.apache.org/view/G-L/view/Lucene/job/Lucene-Solr-tests-only-trunk/10500&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] 2011-09-11 16:32:39
    [junit] Full thread dump OpenJDK 64-Bit Server VM (20.0-b11 mixed mode):
    [junit] 
    [junit] &quot;Low Memory Detector&quot; daemon prio=5 tid=0x0000000801eee800 nid=0x19642 runnable [0x0000000000000000]
    [junit]    java.lang.Thread.State: RUNNABLE
    [junit] 
    [junit] &quot;C2 CompilerThread1&quot; daemon prio=5 tid=0x0000000801eef000 nid=0x19640 waiting on condition [0x0000000000000000]
    [junit]    java.lang.Thread.State: RUNNABLE
    [junit] 
    [junit] &quot;C2 CompilerThread0&quot; daemon prio=5 tid=0x0000000801ef0000 nid=0x1963d waiting on condition [0x0000000000000000]
    [junit]    java.lang.Thread.State: RUNNABLE
    [junit] 
    [junit] &quot;Signal Dispatcher&quot; daemon prio=5 tid=0x0000000801ef0800 nid=0x19630 waiting on condition [0x0000000000000000]
    [junit]    java.lang.Thread.State: RUNNABLE
    [junit] 
    [junit] &quot;Finalizer&quot; daemon prio=5 tid=0x0000000801ef1800 nid=0x19581 in Object.wait() [0x00007ffffebee000]
    [junit]    java.lang.Thread.State: WAITING (on object monitor)
    [junit] 	at java.lang.Object.wait(Native Method)
    [junit] 	- waiting on &amp;lt;0x0000000828cb0370&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
    [junit] 	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:133)
    [junit] 	- locked &amp;lt;0x0000000828cb0370&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
    [junit] 	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:149)
    [junit] 	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)
    [junit] 
    [junit] &quot;Reference Handler&quot; daemon prio=5 tid=0x0000000801ef3000 nid=0x1957f in Object.wait() [0x00007ffffecef000]
    [junit]    java.lang.Thread.State: WAITING (on object monitor)
    [junit] 	at java.lang.Object.wait(Native Method)
    [junit] 	- waiting on &amp;lt;0x0000000828cb0410&amp;gt; (a java.lang.ref.Reference$Lock)
    [junit] 	at java.lang.Object.wait(Object.java:502)
    [junit] 	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    [junit] 	- locked &amp;lt;0x0000000828cb0410&amp;gt; (a java.lang.ref.Reference$Lock)
    [junit] 
    [junit] &quot;main&quot; prio=5 tid=0x0000000801ef3800 nid=0x19432 waiting on condition [0x00007fffffbfd000]
    [junit]    java.lang.Thread.State: WAITING (parking)
    [junit] 	at sun.misc.Unsafe.park(Native Method)
    [junit] 	- parking to wait for  &amp;lt;0x0000000827a440c0&amp;gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)
    [junit] 	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    [junit] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:838)
    [junit] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:871)
    [junit] 	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1201)
    [junit] 	at java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:214)
    [junit] 	at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:290)
    [junit] 	at org.apache.lucene.index.DocumentsWriterFlushControl.assertActiveDeleteQueue(DocumentsWriterFlushControl.java:435)
    [junit] 	at org.apache.lucene.index.DocumentsWriterFlushControl.markForFullFlush(DocumentsWriterFlushControl.java:428)
    [junit] 	at org.apache.lucene.index.DocumentsWriter.flushAllThreads(DocumentsWriter.java:557)
    [junit] 	- locked &amp;lt;0x0000000827a417c0&amp;gt; (a org.apache.lucene.index.DocumentsWriter)
    [junit] 	at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:2973)
    [junit] 	- locked &amp;lt;0x0000000827a3d738&amp;gt; (a java.lang.Object)
    [junit] 	at org.apache.lucene.index.IndexWriter.flush(IndexWriter.java:2950)
    [junit] 	at org.apache.lucene.index.IndexWriter.closeInternal(IndexWriter.java:1133)
    [junit] 	at org.apache.lucene.index.IndexWriter.close(IndexWriter.java:1097)
    [junit] 	at org.apache.lucene.index.TestIndexWriterWithThreads.testCloseWithThreads(TestIndexWriterWithThreads.java:200)
    [junit] 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [junit] 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    [junit] 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    [junit] 	at java.lang.reflect.Method.invoke(Method.java:616)
    [junit] 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    [junit] 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    [junit] 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    [junit] 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    [junit] 	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:48)
    [junit] 	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    [junit] 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    [junit] 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    [junit] 	at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:148)
    [junit] 	at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:50)
    [junit] 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    [junit] 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    [junit] 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    [junit] 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    [junit] 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    [junit] 	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    [junit] 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    [junit] 	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    [junit] 	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:743)
    [junit] 
    [junit] &quot;VM Thread&quot; prio=5 tid=0x0000000801f29000 nid=0x19516 runnable 
    [junit] 
    [junit] &quot;GC task thread#0 (ParallelGC)&quot; prio=5 tid=0x0000000801f32000 nid=0x1944f runnable 
    [junit] 
    [junit] &quot;GC task thread#1 (ParallelGC)&quot; prio=5 tid=0x0000000801f31000 nid=0x19451 runnable 
    [junit] 
    [junit] &quot;GC task thread#2 (ParallelGC)&quot; prio=5 tid=0x0000000801f30800 nid=0x19458 runnable 
    [junit] 
    [junit] &quot;GC task thread#3 (ParallelGC)&quot; prio=5 tid=0x0000000801f30000 nid=0x1945b runnable 
    [junit] 
    [junit] &quot;GC task thread#4 (ParallelGC)&quot; prio=5 tid=0x0000000801f2f800 nid=0x19463 runnable 
    [junit] 
    [junit] &quot;GC task thread#5 (ParallelGC)&quot; prio=5 tid=0x0000000801f2e800 nid=0x19468 runnable 
    [junit] 
    [junit] &quot;GC task thread#6 (ParallelGC)&quot; prio=5 tid=0x0000000801f2e000 nid=0x1946c runnable 
    [junit] 
    [junit] &quot;GC task thread#7 (ParallelGC)&quot; prio=5 tid=0x0000000801f2d800 nid=0x1947a runnable 
    [junit] 
    [junit] &quot;GC task thread#8 (ParallelGC)&quot; prio=5 tid=0x0000000801f2c800 nid=0x19495 runnable 
    [junit] 
    [junit] &quot;GC task thread#9 (ParallelGC)&quot; prio=5 tid=0x0000000801f2c000 nid=0x19496 runnable 
    [junit] 
    [junit] &quot;GC task thread#10 (ParallelGC)&quot; prio=5 tid=0x0000000801f2b800 nid=0x194a8 runnable 
    [junit] 
    [junit] &quot;GC task thread#11 (ParallelGC)&quot; prio=5 tid=0x0000000801f2b000 nid=0x194ba runnable 
    [junit] 
    [junit] &quot;GC task thread#12 (ParallelGC)&quot; prio=5 tid=0x0000000801f2a000 nid=0x194be runnable 
    [junit] 
    [junit] &quot;VM Periodic Task Thread&quot; prio=5 tid=0x0000000801f28800 nid=0x19646 waiting on condition 
    [junit] 
    [junit] JNI global references: 945
    [junit] 
    [junit] Heap
    [junit]  PSYoungGen      total 156800K, used 136506K [0x000000081f9b0000, 0x0000000829d10000, 0x000000082a450000)
    [junit]   eden space 150528K, 89% used [0x000000081f9b0000,0x0000000827d24378,0x0000000828cb0000)
    [junit]   from space 6272K, 30% used [0x0000000828cb0000,0x0000000828e8a6e8,0x00000008292d0000)
    [junit]   to   space 2560K, 0% used [0x0000000829a90000,0x0000000829a90000,0x0000000829d10000)
    [junit]  PSOldGen        total 100480K, used 0K [0x000000080a450000, 0x0000000810670000, 0x000000081f9b0000)
    [junit]   object space 100480K, 0% used [0x000000080a450000,0x000000080a450000,0x0000000810670000)
    [junit]  PSPermGen       total 21248K, used 13150K [0x0000000805250000, 0x0000000806710000, 0x000000080a450000)
    [junit]   object space 21248K, 61% used [0x0000000805250000,0x0000000805f27880,0x0000000806710000)
    [junit] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13102324" author="simonw" created="Sun, 11 Sep 2011 20:01:57 +0100"  >&lt;p&gt;I think I found the reason or one possible reason for this. there is one place where we don&apos;t release a DWPT lock in the case of a failure. Here is a patch.&lt;/p&gt;</comment>
                    <comment id="13102938" author="simonw" created="Mon, 12 Sep 2011 20:18:44 +0100"  >&lt;p&gt;I committed the patch. I will keep this open for a while...&lt;/p&gt;</comment>
                    <comment id="13149535" author="simonw" created="Mon, 14 Nov 2011 10:26:36 +0000"  >&lt;p&gt;fixed&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12493963" name="LUCENE-3428.patch" size="1550" author="simonw" created="Sun, 11 Sep 2011 20:01:57 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 11 Sep 2011 19:01:57 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4101</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24268</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>