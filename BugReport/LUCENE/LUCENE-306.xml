<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:14:03 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-306/LUCENE-306.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-306] [PATCH]multiple wildcards ? at the end of search pattern return incorrect hits</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-306</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The problem is if you search on &quot;ca??&quot;, the hit includes &apos;cat&apos;, &apos;CA&apos;, &lt;br/&gt;
etc, while the user only wants 4 letter words start with CA, such as &lt;br/&gt;
&apos;card&apos;, &apos;cash&apos;, to be returned. This happens only when multiple &apos;?&apos; at &lt;br/&gt;
the end of search pattern. The solution is to check if the word that is &lt;br/&gt;
matching against search pattern ends while there is still &apos;?&apos; left. If &lt;br/&gt;
this is the case, match should return false.&lt;/p&gt;

&lt;p&gt;Attached is the patch code I generated use &apos;diff&apos;&lt;br/&gt;
********************************************************************&lt;/p&gt;

&lt;p&gt;&amp;#8212; WildcardTermEnum.org	2004-05-11 11:42:10.000000000 -0400&lt;br/&gt;
+++ WildcardTermEnum.java	2004-11-08 14:35:14.823610500 -0500&lt;br/&gt;
@@ -132,6 +132,10 @@&lt;br/&gt;
             }&lt;br/&gt;
             else&lt;br/&gt;
             {&lt;br/&gt;
+	      //to prevent &quot;cat&quot; matches &quot;ca??&quot;&lt;br/&gt;
+	      if(wildchar == WILDCARD_CHAR)&lt;/p&gt;
{
+		return false;
+	      }
&lt;p&gt;	      &lt;br/&gt;
               // Look at the next character&lt;br/&gt;
               wildcardSearchPos++;&lt;br/&gt;
             }&lt;br/&gt;
**********************************************************************&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: Other&lt;/p&gt;</environment>
            <key id="12314456">LUCENE-306</key>
            <summary>[PATCH]multiple wildcards ? at the end of search pattern return incorrect hits</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="xiaozheng.ma@redwood.com">Xiaozheng Ma</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Nov 2004 03:00:48 +0000</created>
                <updated>Tue, 1 Nov 2005 02:10:02 +0000</updated>
                    <resolved>Tue, 1 Nov 2005 02:10:02 +0000</resolved>
                            <version>1.4</version>
                                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12322025" author="xiaozheng.ma@redwood.com" created="Sun, 14 Nov 2004 01:17:25 +0000"  >&lt;p&gt;for unit test:&lt;/p&gt;

&lt;p&gt;In testQuestionmark of TestWildcardQuery.java, The original unit test assetions&lt;br/&gt;
(for query 2 and query3) should change to pass the test. Since previously &lt;br/&gt;
the &apos;metal&apos; matches &apos;metal?&apos;, but it should not.&lt;/p&gt;

&lt;p&gt;changes for quert2&apos;s assertion:&lt;br/&gt;
	assertMatches(searcher, query2, 1); &lt;br/&gt;
	// note that the number changes to&lt;br/&gt;
        // 1 since &apos;metal&apos; is not a match any more.&lt;br/&gt;
The same modification to query3&apos;s assertion is :&lt;br/&gt;
		assertMatches(searcher, query3, 0); &lt;br/&gt;
		//change to 0 since there is no match&lt;/p&gt;

&lt;p&gt;Erik has suggest a new unit test:&lt;/p&gt;

&lt;p&gt;         Query query6 = new WildcardQuery(new Term(&quot;body&quot;, &quot;metal??&quot;));&lt;br/&gt;
         assertMatches(searcher, query6, 0);&lt;/p&gt;

&lt;p&gt;After I review this bug carefully, I realize that the bug is not only for &lt;br/&gt;
multiply &apos;?&apos;, it is for trail &quot;?&quot;-- After all &quot;?&quot; is not a &quot;*&quot;&lt;/p&gt;
</comment>
                    <comment id="12356423" author="bernhard.messer@intrafind.de" created="Tue, 1 Nov 2005 02:10:02 +0000"  >&lt;p&gt;WildcardQuery doesn&apos;t match &apos;cat&apos; for queries like &apos;ca??&apos; anylonger.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>32167</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 1 Nov 2005 02:10:02 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>13443</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>27425</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>