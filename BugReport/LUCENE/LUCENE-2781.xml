<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:18:09 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2781/LUCENE-2781.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2781] Drop deprecations from trunk</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2781</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;subj.&lt;br/&gt;
Also, to each remaining deprecation add release version when it first appeared.&lt;/p&gt;

&lt;p&gt;Patch incoming.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12480958">LUCENE-2781</key>
            <summary>Drop deprecations from trunk</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="earwin">Earwin Burrfoot</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Nov 2010 06:32:23 +0000</created>
                <updated>Fri, 10 May 2013 11:43:15 +0100</updated>
                    <resolved>Tue, 30 Nov 2010 13:08:09 +0000</resolved>
                            <version>4.0-ALPHA</version>
                                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12935996" author="earwin" created="Fri, 26 Nov 2010 12:55:59 +0000"  >&lt;p&gt;Stab one.&lt;/p&gt;

&lt;p&gt;Everything works, except Solr - this fails to compile, and a couple of tests that are commented-out and marked nocommit - these should be converted from DateField to DateUtil or dropped.&lt;/p&gt;</comment>
                    <comment id="12964466" author="earwin" created="Sat, 27 Nov 2010 23:10:14 +0000"  >&lt;p&gt;New patch. Current status:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Lucene&apos;s deprecations are mostly out. Those, which are still in, are marked with Lucene version when they were deprecated - for future reference.&lt;/li&gt;
	&lt;li&gt;I didn&apos;t sift through Solr (and will not), but I fixed it not to use any of Lucene&apos;s removed stuff (eg. it builds and passes tests)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What has to be done?&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;There are a couple of commented out tests marked with nocommit - these used removed DateField class. If anybody knows how to fix them fast - please do this. If not, I&apos;ll get back at them in a couple of days. Or maybe we can just drop them?&lt;/li&gt;
	&lt;li&gt;Version.LUCENE_2x should be dropped, Version.LUCENE_3x - marked as deprecated&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12964482" author="earwin" created="Sun, 28 Nov 2010 01:43:05 +0000"  >&lt;p&gt;New patch.&lt;br/&gt;
Version 2x dropped, 3x deprecated. Builds/passes tests.&lt;/p&gt;</comment>
                    <comment id="12964484" author="earwin" created="Sun, 28 Nov 2010 01:51:19 +0000"  >&lt;p&gt;Same, rebased on latest trunk.&lt;/p&gt;</comment>
                    <comment id="12964619" author="rcmuir" created="Mon, 29 Nov 2010 02:46:46 +0000"  >&lt;p&gt;Lets not allow this patch to get out of date... Earwin i&apos;ll try to help with the Solr stuff after i review this monster &lt;/p&gt;</comment>
                    <comment id="12964625" author="rcmuir" created="Mon, 29 Nov 2010 03:40:14 +0000"  >&lt;p&gt;Earwin: this is looking really nice at a &quot;glance&quot;... i thought you said you weren&apos;t going to sift through solr? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; seems like it works here?&lt;/p&gt;

&lt;p&gt;is the only remaining issue the two commented out tests that used DateField? In my opinion we could TODO these...&lt;/p&gt;</comment>
                    <comment id="12964640" author="earwin" created="Mon, 29 Nov 2010 07:20:17 +0000"  >&lt;blockquote&gt;&lt;p&gt;i thought you said you weren&apos;t going to sift through solr?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I fixed it to work with de-deprecated Lucene, I didn&apos;t remove any of Solr&apos;s own deprecations.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;is the only remaining issue the two commented out tests that used DateField? In my opinion we could TODO these...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes. That&apos;s the only remaining issue &lt;em&gt;known to me&lt;/em&gt;.&lt;br/&gt;
There are already a ton of similar todo&apos;s out there. Not sure I&apos;d like to increase that number, but too lazy currently to do anything about it. We can todo, yeah. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12964730" author="rcmuir" created="Mon, 29 Nov 2010 12:42:13 +0000"  >&lt;p&gt;OK, i looked at the patch and i see a few issues, mainly with the analyzer stuff.&lt;/p&gt;

&lt;p&gt;so if we are gonna really do the 2-version thing you suggested on the list, unfortunately we cant yet remove anything we deprecated in 3.0 or 3.1, as we still need some of these deprecated classes to support Version_3.0 in 4.0.&lt;/p&gt;

&lt;p&gt;Yes I am aware some of these classes say in trunk/3.x &apos;@deprecated This will be removed in Lucene 4.0&apos; but this is wrong !&lt;/p&gt;

&lt;p&gt;Examples include things like DutchStemmer, which are deprecated in 3.1 (branch_3x), but weren&apos;t in 3.0, so we have to keep them?&lt;/p&gt;</comment>
                    <comment id="12964749" author="earwin" created="Mon, 29 Nov 2010 13:43:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;unfortunately we cant yet remove anything we deprecated in 3.0 or 3.1,&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Not completely true. We can&apos;t remove &lt;em&gt;some&lt;/em&gt; of the things deprecated in 3.0 or 3.1. &lt;em&gt;Some other&lt;/em&gt; we can remove.&lt;/p&gt;

&lt;p&gt;I primarily relied on two pointers - something is already deprecated in 3.1, and/or it has &quot;@deprecated This will be removed in Lucene 4.0&quot; stanza.&lt;br/&gt;
Don&apos;t use the stanza if it&apos;s not true! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I also checked things &lt;em&gt;required to support 3.0 indexes&lt;/em&gt;, and remember leaving some such code intact, but could surely miss something.&lt;/p&gt;

&lt;p&gt;Please, post corrected version of the patch, or name exact things we should preserve.&lt;/p&gt;</comment>
                    <comment id="12964751" author="earwin" created="Mon, 29 Nov 2010 13:49:17 +0000"  >&lt;p&gt;Hmm.. and regarding this exact case.&lt;/p&gt;

&lt;p&gt;DutchStemFilter.java had this:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;@deprecated Use {@link SnowballFilter} with {@link org.tartarus.snowball.ext.DutchStemmer} instead, which has the same functionality.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;considering the following snippet from DutchStemmer.java:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;The algorithm is an implementation of the &amp;lt;a href=&quot;http://snowball.tartarus.org/algorithms/dutch/stemmer.html&quot;&amp;gt;dutch stemming&amp;lt;/a&amp;gt; algorithm in Martin Porter&apos;s snowball project.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;we can reliably drop DutchStemFilter+DutchStemmer, people will fix their code to use SnowballFilter and happily read their 3.0 indexes.&lt;br/&gt;
No?&lt;/p&gt;</comment>
                    <comment id="12964753" author="rcmuir" created="Mon, 29 Nov 2010 13:56:32 +0000"  >&lt;blockquote&gt;
&lt;p&gt;we can reliably drop DutchStemFilter+DutchStemmer, people will fix their code to use SnowballFilter and happily read their 3.0 indexes.&lt;br/&gt;
No?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The DutchStemmer might claim that, but it wasnt completely faithful to the algorithm (buggy).&lt;br/&gt;
here&apos;s my example from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2055&quot; title=&quot;Fix buggy stemmers and Remove duplicate analysis functionality&quot;&gt;&lt;del&gt;LUCENE-2055&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DutchStemFilter passes 98.9% of snowball tests. all bugs were in handling of double consonants:
examples:
aangetroffen -&amp;gt; aangetrof expected: aangetroff
afvoerbonnen -&amp;gt; afvoerbon expected: afvoerbonn
klommen -&amp;gt; klom expected: klomm
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So we kept the buggy implementation, for index back compat &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12964755" author="earwin" created="Mon, 29 Nov 2010 14:04:30 +0000"  >&lt;p&gt;Ok, restore it then and fix deprecation note to &quot;will drop it in Lucene 5.0&quot; or something?&lt;/p&gt;</comment>
                    <comment id="12964767" author="rcmuir" created="Mon, 29 Nov 2010 14:49:40 +0000"  >&lt;p&gt;Earwin, yeah ill update your patch for this stuff... (since i was the culprit!)&lt;/p&gt;</comment>
                    <comment id="12965081" author="rcmuir" created="Tue, 30 Nov 2010 03:31:33 +0000"  >&lt;p&gt;Earwin&apos;s patch: I only restored anything necessary for 3.0+ analyzer back compat (along with any back-compat tests).&lt;br/&gt;
All tests pass... in my opinion the patch is sorely needed!&lt;/p&gt;

&lt;p&gt;I think Earwin&apos;s suggestion here makes a ton of sense:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Lets say you are on Lucene 2.4, when you upgrade to 3.0, it continues to provide you backwards compat via the version constant, but Version.LUCENE_24 becomes is deprecated, so its a deprecation in your code you know you must fix, before you move to 4.0. At your leisure, sometime during the entire 3.0-3.9 or whatever, you migrate to Version.LUCENE_30 and the deprecation goes away.&lt;/li&gt;
	&lt;li&gt;When you move to Lucene 4.0, the Version.LUCENE_24 stuff etc stuff is gone, but its no surprise, because you are guided via deprecations. 4.0 doesnt support 2.x indexes anyway.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So I&apos;m strongly +1 to committing this 2.3MB patch that removes 100,000 lines of crap from trunk.&lt;/p&gt;</comment>
                    <comment id="12965087" author="ryantxu" created="Tue, 30 Nov 2010 04:37:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;This sort of patch does not have a great shelflife, so lets not let it rot.  If there is anything in question, lets leave it in for now, and can work with smaller patches to fix.&lt;/p&gt;

&lt;p&gt;Thanks Earwin!&lt;/p&gt;</comment>
                    <comment id="12965198" author="mikemccand" created="Tue, 30 Nov 2010 11:10:49 +0000"  >&lt;p&gt;This is awesome work &amp;#8211; thanks Earwin!&lt;/p&gt;</comment>
                    <comment id="12965204" author="rcmuir" created="Tue, 30 Nov 2010 11:32:46 +0000"  >&lt;p&gt;Committed revision 1040463.&lt;/p&gt;

&lt;p&gt;Thanks a lot Earwin, this is tedious stuff and the patch was great... (the only issues were from my wrong deprecation notices in analyzers)&lt;br/&gt;
I&apos;ll fix these in branch_3.x so people know they are staying aroound till 5.0 for index bw compat reasons.&lt;br/&gt;
we should also deprecate Version_2.x in branch_3x.&lt;br/&gt;
finally we should fix the usage of deprecated code in 3.x (e.g. i think solr there needs to be fixed to use IWconfig too).&lt;/p&gt;

&lt;p&gt;ill see about merging these parts.&lt;/p&gt;</comment>
                    <comment id="12965219" author="rcmuir" created="Tue, 30 Nov 2010 12:55:52 +0000"  >&lt;p&gt;attached is a patch for the branch_3x changes.&lt;/p&gt;</comment>
                    <comment id="12965221" author="rcmuir" created="Tue, 30 Nov 2010 13:08:09 +0000"  >&lt;p&gt;Committed revision 1040505 for the 3x changes. Thanks again Earwin!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12464795" name="drop-deprecations.patch" size="2489878" author="earwin" created="Sun, 28 Nov 2010 01:51:18 +0000" />
                    <attachment id="12464794" name="drop-deprecations.patch" size="2489708" author="earwin" created="Sun, 28 Nov 2010 01:43:04 +0000" />
                    <attachment id="12464790" name="drop-deprecations.patch" size="2473174" author="earwin" created="Sat, 27 Nov 2010 23:10:13 +0000" />
                    <attachment id="12460492" name="drop-deprecations.patch" size="2417826" author="earwin" created="Fri, 26 Nov 2010 12:55:59 +0000" />
                    <attachment id="12464957" name="LUCENE-2781_3x.patch" size="51646" author="rcmuir" created="Tue, 30 Nov 2010 12:55:52 +0000" />
                    <attachment id="12464936" name="LUCENE-2781.patch" size="2378865" author="rcmuir" created="Tue, 30 Nov 2010 03:31:32 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>6.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 29 Nov 2010 02:46:46 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11073</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24911</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>