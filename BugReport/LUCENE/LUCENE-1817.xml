<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:01:17 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1817/LUCENE-1817.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1817] it is impossible to use a custom dictionary for SmartChineseAnalyzer</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1817</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;it is not possible to use a custom dictionary, even though there is a lot of code and javadocs to allow this.&lt;/p&gt;

&lt;p&gt;This is because the custom dictionary is only loaded if it cannot load the built-in one (which is of course, in the jar file and should load)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; WordDictionary getInstance() {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (singleInstance == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      singleInstance = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WordDictionary(); &lt;span class=&quot;code-comment&quot;&gt;// load from jar file
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        singleInstance.load();
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException e) { &lt;span class=&quot;code-comment&quot;&gt;// loading from jar file must fail before it checks the AnalyzerProfile (where &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; can be configured)
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; wordDictRoot = AnalyzerProfile.ANALYSIS_DATA_DIR;
        singleInstance.load(wordDictRoot);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ClassNotFoundException e) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(e);
      }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; singleInstance;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think we should either correct this, document this, or disable custom dictionary support...&lt;/p&gt;</description>
                <environment></environment>
            <key id="12433232">LUCENE-1817</key>
            <summary>it is impossible to use a custom dictionary for SmartChineseAnalyzer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Aug 2009 14:04:30 +0100</created>
                <updated>Sat, 28 Jan 2012 01:01:33 +0000</updated>
                    <resolved>Thu, 27 Aug 2009 20:02:40 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12747963" author="rcmuir" created="Wed, 26 Aug 2009 15:56:49 +0100"  >&lt;p&gt;I am looking at this today. One thing about this code that should also be corrected ASAP is that if you have a custom dictionary directory in .DCT format, the load() method will actually call save()&lt;/p&gt;

&lt;p&gt;This will create a corresponding .MEM file in the same directory after loading the dictionary in DCT format.&lt;/p&gt;

&lt;p&gt;I really do not think load() methods should be creating or writing to files.&lt;/p&gt;</comment>
                    <comment id="12747966" author="thetaphi" created="Wed, 26 Aug 2009 16:02:27 +0100"  >&lt;p&gt;In my opinion, the loader should be able to load either .mem files (which should realy be named *.ser, because they are serialized java objects) or DCT format files (maybe autodetect) or two separate methods. If you want to quicker load the files later, you could also save the DCT as a serialized object after that, but this should be left to the user and not done automatically.&lt;/p&gt;</comment>
                    <comment id="12747967" author="rcmuir" created="Wed, 26 Aug 2009 16:05:47 +0100"  >&lt;p&gt;Uwe, i agree. currently it does do the autodetect (first checks for .MEM, then falls back on DCT).&lt;br/&gt;
but if it has to fall back on DCT, it will create a .MEM file.&lt;/p&gt;</comment>
                    <comment id="12747973" author="simonw" created="Wed, 26 Aug 2009 16:11:13 +0100"  >&lt;p&gt;We should mark the smartcn module  experimental as we plan to do heavy refactoring after 2.9 is out. This patch adds a notice to package.html and JavaDoc.&lt;br/&gt;
Quoting Mark Miller from the list:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Warning users that you don&apos;t plan on promising back compat with experimental warnings seems like a good idea to me.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                    <comment id="12748025" author="rcmuir" created="Wed, 26 Aug 2009 17:54:49 +0100"  >&lt;p&gt;to make matters more complex, trying to load a bigram dictionary from a DCT file gave me:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# An unexpected error has been detected by Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000006dc378d0, pid=3140, tid=5912
#
# Java VM: Java HotSpot(TM) 64-Bit Server VM (11.2-b01 mixed mode windows-amd64)
# Problematic frame:
# V  [jvm.dll+0x3a78d0]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;apparently this is some clover issue in my eclipse and i turned it off, so it is an unrelated problem.&lt;/p&gt;</comment>
                    <comment id="12748037" author="rcmuir" created="Wed, 26 Aug 2009 18:19:08 +0100"  >&lt;p&gt;patch adds:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;load custom dictionaries when the analyzer has been configured to do so&lt;/li&gt;
	&lt;li&gt;test that custom DCT dictionaries load&lt;/li&gt;
	&lt;li&gt;do not serialize/write files when loading DCT&lt;/li&gt;
	&lt;li&gt;change saveToObj() to package protected so someone can serialize their own dictionaries instead.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;the patch requires some binary dct data files which I will try to upload as a zip&lt;/p&gt;</comment>
                    <comment id="12748038" author="rcmuir" created="Wed, 26 Aug 2009 18:20:48 +0100"  >&lt;p&gt;the two files in this directory need to be placed in smartcn/test under o/a/l/analysis/cn/smart/hmm/customDictionaryDCT&lt;/p&gt;</comment>
                    <comment id="12748126" author="rcmuir" created="Wed, 26 Aug 2009 21:19:55 +0100"  >&lt;p&gt;i looked at this file format and I am going to create smaller custom dictionaries for testing.&lt;/p&gt;

&lt;p&gt;this way we do not have huge files in svn&lt;/p&gt;</comment>
                    <comment id="12748127" author="simonw" created="Wed, 26 Aug 2009 21:23:18 +0100"  >&lt;p&gt;Robert, I commited the javadoc changes. Once you have smaller dict files feel free to commit your patch. If you run into problems I would prefer to skip the tests (and the dict files) and commit it without this simple test. This should be fine.&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="12748441" author="rcmuir" created="Thu, 27 Aug 2009 17:50:36 +0100"  >&lt;p&gt;Here is a javadocs-only patch that I think is the best solution.&lt;/p&gt;

&lt;p&gt;This is because i created several custom dictionaries and found:&lt;br/&gt;
1) it will be difficult to support this dictionary format for a number of reasons&lt;br/&gt;
2) the dictionary format is limited to GB2312 encoding, and will not support things like traditional chinese&lt;br/&gt;
3) even when creating a correct file in the correct format, there are many assumptions about what should be in the dictionary.&lt;br/&gt;
   Especially things like WordDictionary.expandDelimiterData&lt;br/&gt;
   If these assumptions are not met, things like infinite loops occur.&lt;/p&gt;

&lt;p&gt;I recommend we instead remove javadocs describing how to use a custom dictionary.&lt;br/&gt;
And in this patch also expand the EXPERIMENTAL wording from just APIs, to both APIs and file formats.&lt;br/&gt;
In the future we should refactor and use a unicode-based format.&lt;/p&gt;

&lt;p&gt;I won&apos;t do anything here without some consensus that others feel it is the right way to go, but I think we should do this in 2.9&lt;/p&gt;</comment>
                    <comment id="12748497" author="markrmiller@gmail.com" created="Thu, 27 Aug 2009 19:41:00 +0100"  >&lt;p&gt;I agree Robert - given your concerns, lots drop custom support for now (even if just at the javadoc lvl if you can&apos;t do custom anyway without rebuilding the jar).&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                    <comment id="12748500" author="rcmuir" created="Thu, 27 Aug 2009 19:47:17 +0100"  >&lt;p&gt;i will wait a bit and see if anyone has an issue with this, otherwise i would like to commit at the end of the day.&lt;/p&gt;</comment>
                    <comment id="12748505" author="markrmiller@gmail.com" created="Thu, 27 Aug 2009 19:55:19 +0100"  >&lt;p&gt;I vote commit it now so it makes the RC - I can appreciate wanting to have consensus here - but silence is consensus in Lucene dev, - and twos often a crowd&lt;br/&gt;
By the powers vested in me as the RM (which are, essentially, none) I say pop this baby in. People have a week to complain and force us to take it out. I think this one is fairly clear territory though.&lt;br/&gt;
Lets put the first RC out with everything we know of taken care of. These are extraordinary times.&lt;/p&gt;</comment>
                    <comment id="12748509" author="rcmuir" created="Thu, 27 Aug 2009 20:02:40 +0100"  >&lt;p&gt;Committed revision 808570.&lt;/p&gt;</comment>
                    <comment id="13195310" author="crystal" created="Sat, 28 Jan 2012 01:01:29 +0000"  >&lt;p&gt;I am interested in working on adding the feature to allow use customized dictionary in text file, not DCT file.&lt;br/&gt;
I have a couple of questions before trying on it.&lt;/p&gt;

&lt;p&gt;In the package, I only saw .mem file. Where should I download .dct file and how to convert from text file to dct file?&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12417759" name="dataFiles.zip" size="2123122" author="rcmuir" created="Wed, 26 Aug 2009 18:20:48 +0100" />
                    <attachment id="12417742" name="LUCENE-1817-mark-cn-experimental.patch" size="16836" author="simonw" created="Wed, 26 Aug 2009 16:11:13 +0100" />
                    <attachment id="12417895" name="LUCENE-1817.patch" size="18292" author="rcmuir" created="Thu, 27 Aug 2009 17:50:36 +0100" />
                    <attachment id="12417758" name="LUCENE-1817.patch" size="8911" author="rcmuir" created="Wed, 26 Aug 2009 18:19:08 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 26 Aug 2009 15:02:27 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11946</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25909</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>