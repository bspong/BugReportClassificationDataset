<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:00:07 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1124/LUCENE-1124.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1124] short circuit FuzzyQuery.rewrite when input token length is small compared to minSimilarity</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1124</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I found this (unreplied to) email floating around in my Lucene folder from during the holidays...&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;From: Timo Nentwig
To: java-dev
Subject: Fuzzy makes no sense for short tokens
Date: Mon, 31 Dec 2007 16:01:11 +0100
Message-Id: &amp;lt;200712311601.12255.lucene@nitwit.de&amp;gt;

Hi!

it generally makes no sense to search fuzzy for short tokens because changing
even only a single character of course already results in a high edit
distance. So it actually only makes sense in this case:

           if( token.length() &amp;gt; 1f / (1f - minSimilarity) )

E.g. changing one character in a 3-letter token (foo) results in an edit
distance of 0.6. And if minSimilarity (which is by default: 0.5 :-) is higher
we can save all the expensive rewrite() logic.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t know much about FuzzyQueries, but this reasoning seems sound ... FuzzyQuery.rewrite should be able to completely skip all TermEnumeration in the event that the input token is shorter then some simple math on the minSimilarity.  (i&apos;m not smart enough to be certain that the math above is right however ... it&apos;s been a while since i looked at Levenstein distances ... tests needed)&lt;/p&gt;</description>
                <environment></environment>
            <key id="12385803">LUCENE-1124</key>
            <summary>short circuit FuzzyQuery.rewrite when input token length is small compared to minSimilarity</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                <reporter username="hossman">Hoss Man</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jan 2008 22:41:47 +0000</created>
                <updated>Sat, 7 Nov 2009 14:57:29 +0000</updated>
                    <resolved>Fri, 16 Oct 2009 18:38:20 +0100</resolved>
                                            <fixVersion>2.9.1</fixVersion>
                <fixVersion>3.0</fixVersion>
                                <component>core/query/scoring</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12557144" author="otis" created="Wed, 9 Jan 2008 05:57:20 +0000"  >&lt;p&gt;This makes sense, Timo.  Could you please attach a patch + a simple unit test?&lt;/p&gt;</comment>
                    <comment id="12623195" author="markrmiller@gmail.com" created="Sun, 17 Aug 2008 15:35:57 +0100"  >&lt;p&gt;This optimization is correct. Highlights some interesting things about fuzzy query as well i.e. if you put a minsim of 0.9, your query term &lt;b&gt;has&lt;/b&gt; to be over 10 chars to have any hope of getting a match. For the default of 0.5 its 2 chars, so in the common case the optimization doesn&apos;t do much good, and you do have to pay for the check every time no matter what. For larger minsim values though, this will turn a lot of fuzz queries into no ops.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Mark&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12623197" author="markrmiller@gmail.com" created="Sun, 17 Aug 2008 15:44:38 +0100"  >&lt;p&gt;Computing the needed term length in the constructor is probably better.&lt;/p&gt;</comment>
                    <comment id="12625476" author="hossman" created="Mon, 25 Aug 2008 20:26:47 +0100"  >&lt;p&gt;I don&apos;t deal with FuzzyQueries much, but skimming this issue it seems to touch on a lot of hte same things that spawned the creation of the &quot;mm&quot; syntax for specifying the &quot;minNumberShouldMatch&quot; value on BooleanQueries in the Solr dismax query parser...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://lucene.apache.org/solr/api/org/apache/solr/util/doc-files/min-should-match.html&quot; class=&quot;external-link&quot;&gt;http://lucene.apache.org/solr/api/org/apache/solr/util/doc-files/min-should-match.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;...perhaps something similar could be used to allow people to specify simpel expressions for dictating the &quot;fuzzyiness&quot; of short input vs medium length input, vs long input.&lt;/p&gt;</comment>
                    <comment id="12660585" author="markrmiller@gmail.com" created="Sun, 4 Jan 2009 15:35:42 +0000"  >&lt;p&gt;Updated to trunk.&lt;/p&gt;

&lt;p&gt;Im going to commit in few days if no one objects.&lt;/p&gt;</comment>
                    <comment id="12664992" author="markrmiller@gmail.com" created="Sun, 18 Jan 2009 18:33:13 +0000"  >&lt;p&gt;Thanks! Committed.&lt;/p&gt;</comment>
                    <comment id="12766588" author="mikemccand" created="Fri, 16 Oct 2009 17:29:31 +0100"  >&lt;p&gt;This fix breaks the case when the exact term is present in the index.&lt;/p&gt;</comment>
                    <comment id="12766592" author="mikemccand" created="Fri, 16 Oct 2009 17:31:12 +0100"  >&lt;p&gt;Attach patch (based on 2.9) showing the bug, along with the fix.  Instead of rewriting to empty BooleanQuery when prefix term is not long enough, I rewrite to TermQuery with that prefix.  This way the exact term matches.&lt;/p&gt;

&lt;p&gt;I&apos;ll commit shortly to trunk &amp;amp; 2.9.x.&lt;/p&gt;</comment>
                    <comment id="12774608" author="mikemccand" created="Sat, 7 Nov 2009 14:57:29 +0000"  >&lt;p&gt;Bulk close all 2.9.1 issues.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12422367" name="LUCENE-1124.patch" size="2937" author="mikemccand" created="Fri, 16 Oct 2009 17:31:12 +0100" />
                    <attachment id="12397082" name="LUCENE-1124.patch" size="2794" author="markrmiller@gmail.com" created="Sun, 4 Jan 2009 15:35:42 +0000" />
                    <attachment id="12388383" name="LUCENE-1124.patch" size="2803" author="markrmiller@gmail.com" created="Sun, 17 Aug 2008 15:44:38 +0100" />
                    <attachment id="12388381" name="LUCENE-1124.patch" size="3298" author="markrmiller@gmail.com" created="Sun, 17 Aug 2008 15:35:57 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 9 Jan 2008 05:57:20 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12621</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26605</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>