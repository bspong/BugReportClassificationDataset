<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:03:24 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3175/LUCENE-3175.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3175] speed up core tests</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3175</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Our core tests have gotten slower and slower, if you don&apos;t have a really fast computer its probably frustrating.&lt;/p&gt;

&lt;p&gt;I think we should:&lt;br/&gt;
1. still have random parameters, but make the &apos;obscene&apos; settings like SimpleText rarer... we can always make them happen more on NIGHTLY&lt;br/&gt;
2. tests that make a lot of documents can conditionalize on NIGHTLY so that they are still doing a reasonable test on ordinary runs e.g. numdocs = (NIGHTLY ? 10000 : 1000) * multiplier&lt;br/&gt;
3. refactor some of the slow huge classes with lots of tests like TestIW/TestIR, at least pull out really slow methods like TestIR.testDiskFull into its own class. this gives better parallelization.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12509316">LUCENE-3175</key>
            <summary>speed up core tests</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 5 Jun 2011 18:30:45 +0100</created>
                <updated>Sun, 27 Nov 2011 12:29:22 +0000</updated>
                    <resolved>Sun, 30 Oct 2011 04:41:03 +0000</resolved>
                                            <fixVersion>3.5</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13044583" author="mikemccand" created="Sun, 5 Jun 2011 18:43:02 +0100"  >&lt;p&gt;Patch looks good!&lt;/p&gt;</comment>
                    <comment id="13044595" author="rcmuir" created="Sun, 5 Jun 2011 19:12:48 +0100"  >&lt;p&gt;here&apos;s some timings on my macbook... still some &apos;bad apples&apos; i didn&apos;t notice on my faster computer at all, but its better (using ant test-core -Dtests.seed=0:0)&lt;/p&gt;

&lt;p&gt;trunk:&lt;/p&gt;

&lt;p&gt;BUILD SUCCESSFUL&lt;br/&gt;
Total time: 12 minutes 40 seconds&lt;/p&gt;

&lt;p&gt;patch:&lt;/p&gt;

&lt;p&gt;BUILD SUCCESSFUL&lt;br/&gt;
Total time: 7 minutes 37 seconds&lt;/p&gt;</comment>
                    <comment id="13044687" author="rcmuir" created="Mon, 6 Jun 2011 04:14:21 +0100"  >&lt;p&gt;updated patch, I did some more reorganization, removed some places where we checkindex&apos;ed twice in a row, sped up some of the really slow tests with beforeClass, etc.&lt;/p&gt;

&lt;p&gt;on my mac this one is now under 6 minutes... I want to keep the issue open as there are still some really really slow tests to fix.&lt;/p&gt;</comment>
                    <comment id="13044693" author="rcmuir" created="Mon, 6 Jun 2011 04:41:18 +0100"  >&lt;p&gt;Committed revision 1132517.&lt;/p&gt;</comment>
                    <comment id="13045387" author="rcmuir" created="Tue, 7 Jun 2011 13:09:48 +0100"  >&lt;p&gt;i shaved another minute off on my mac with this patch.&lt;/p&gt;</comment>
                    <comment id="13056542" author="simonw" created="Tue, 28 Jun 2011 15:45:40 +0100"  >&lt;p&gt;Attached the output of ant test-core on my 2.53 GHZ Core 2 Duo MacBook Pro&lt;/p&gt;

&lt;p&gt;the core tests are still like 6 to 8 min which is very long though. Not that I am complaining about Roberts hard work!! thanks for that it made it way better than it used to be. but I think there are still some test we can improve&lt;/p&gt;</comment>
                    <comment id="13056545" author="rcmuir" created="Tue, 28 Jun 2011 15:49:31 +0100"  >&lt;p&gt;thanks for running this Simon: i think its important we consider &quot;normal hardware&quot;, to a lot of developers your computer is actually a fast computer!&lt;/p&gt;

&lt;p&gt;I&apos;ll review this log and see if we can improve the situation more for some of the very long ones.&lt;/p&gt;</comment>
                    <comment id="13056579" author="simonw" created="Tue, 28 Jun 2011 16:30:30 +0100"  >&lt;p&gt;here is a patch that speeds up some test that use large num of iterations / threads. Especially the num of threads helps a lot on a system with not that many CPUs&lt;/p&gt;</comment>
                    <comment id="13056828" author="cmale" created="Tue, 28 Jun 2011 23:38:03 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                    <comment id="13056915" author="rcmuir" created="Wed, 29 Jun 2011 01:36:42 +0100"  >&lt;p&gt;+1, thanks Simon.&lt;/p&gt;</comment>
                    <comment id="13057042" author="simonw" created="Wed, 29 Jun 2011 08:11:31 +0100"  >&lt;blockquote&gt;&lt;p&gt;+1, thanks Simon.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;committed to trunk&lt;/p&gt;</comment>
                    <comment id="13057048" author="simonw" created="Wed, 29 Jun 2011 08:23:54 +0100"  >&lt;p&gt;I am down to 4 min 36 seconds for ant test-core (without compiling) - here is my output.&lt;/p&gt;

&lt;p&gt;great speedup already!&lt;/p&gt;</comment>
                    <comment id="13057050" author="cmale" created="Wed, 29 Jun 2011 08:28:15 +0100"  >&lt;p&gt;Down from what time pre-patch?&lt;/p&gt;</comment>
                    <comment id="13057057" author="simonw" created="Wed, 29 Jun 2011 08:43:59 +0100"  >&lt;p&gt;pre-patch and roberts latest commits was 6 min 34&lt;/p&gt;</comment>
                    <comment id="13139539" author="rcmuir" created="Sun, 30 Oct 2011 04:41:03 +0000"  >&lt;p&gt;I think this is ok... core tests are about 1/3 what they were&lt;/p&gt;</comment>
                    <comment id="13157737" author="thetaphi" created="Sun, 27 Nov 2011 12:29:22 +0000"  >&lt;p&gt;Bulk close after release of 3.5&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12481686" name="LUCENE-3175_2.patch" size="27413" author="rcmuir" created="Tue, 7 Jun 2011 13:09:48 +0100" />
                    <attachment id="12484462" name="LUCENE-3175.patch" size="5924" author="simonw" created="Tue, 28 Jun 2011 16:30:30 +0100" />
                    <attachment id="12481532" name="LUCENE-3175.patch" size="207889" author="rcmuir" created="Mon, 6 Jun 2011 04:14:21 +0100" />
                    <attachment id="12481508" name="LUCENE-3175.patch" size="122975" author="rcmuir" created="Sun, 5 Jun 2011 18:31:15 +0100" />
                    <attachment id="12484602" name="test-core_core_2_duo_2-53GHZ.rtf" size="41876" author="simonw" created="Wed, 29 Jun 2011 08:23:54 +0100" />
                    <attachment id="12484450" name="test-core_core_2_duo_2-53GHZ.rtf" size="41939" author="simonw" created="Tue, 28 Jun 2011 15:45:40 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>6.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 5 Jun 2011 17:43:02 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2955</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24522</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>