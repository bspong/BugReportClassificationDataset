<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:30:32 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2598/LUCENE-2598.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2598] allow tests to use different Directory impls</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2598</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Now that all tests use MockRAMDirectory instead of RAMDirectory, they are all picky like windows and force our tests to&lt;br/&gt;
close readers etc before closing the directory.&lt;/p&gt;

&lt;p&gt;I think we should do the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;change new MockRAMDIrectory() in tests to .newDirectory(random)&lt;/li&gt;
	&lt;li&gt;LuceneTestCase&lt;span class=&quot;error&quot;&gt;&amp;#91;J4&amp;#93;&lt;/span&gt; tracks if all dirs are closed at tearDown and also cleans up temp dirs like solr.&lt;/li&gt;
	&lt;li&gt;factor out the Mockish stuff from MockRAMDirectory into MockDirectoryWrapper&lt;/li&gt;
	&lt;li&gt;allow a -Dtests.directoryImpl or simpler to specify the default Directory to use for tests: default being &quot;random&quot;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;i think theres a chance we might find some bugs that havent yet surfaced because they are easier to trigger with FSDir&lt;br/&gt;
Furthermore, this would be beneficial to Directory-implementors as they could run the entire testsuite against their Directory impl, just like codec-implementors can do now.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12471329">LUCENE-2598</key>
            <summary>allow tests to use different Directory impls</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Aug 2010 19:13:42 +0100</created>
                <updated>Wed, 30 Mar 2011 16:50:05 +0100</updated>
                    <resolved>Fri, 24 Sep 2010 01:03:43 +0100</resolved>
                            <version>3.1</version>
                <version>4.0-ALPHA</version>
                                <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>general/build</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12897583" author="shaie" created="Thu, 12 Aug 2010 06:31:05 +0100"  >&lt;p&gt;Robert, how about if we use JUnit&apos;s TemporaryFolder (&lt;a href=&quot;http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TemporaryFolder.html)?&quot; class=&quot;external-link&quot;&gt;http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TemporaryFolder.html)?&lt;/a&gt; We can put it in LTC(J4) and have tests that wish to create on-disk resources use it. JUnit guarantees the contents of this folder will be removed when the test is finished, and if the test did not close its resources properly, it will fail. It will save us some code, nothing we cannot develop on our own, as you suggest.&lt;/p&gt;</comment>
                    <comment id="12897699" author="rcmuir" created="Thu, 12 Aug 2010 12:24:14 +0100"  >&lt;blockquote&gt;&lt;p&gt;Robert, how about if we use JUnit&apos;s TemporaryFolder (&lt;a href=&quot;http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TemporaryFolder.html)?&quot; class=&quot;external-link&quot;&gt;http://kentbeck.github.com/junit/javadoc/latest/org/junit/rules/TemporaryFolder.html)?&lt;/a&gt; &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hi Shai, I looked at this, but I don&apos;t think we should use it. I think we should keep a consistent API between LuceneTestCase and LuceneTestCase4J.&lt;/p&gt;

&lt;p&gt;But this TemporaryFolder is too basic for our needs and does not support our usage of LuceneTestCase4J (where the index is created in @beforeClass and destroyed in @afterClass),&lt;br/&gt;
it only supports removing the directory after each test METHOD.&lt;/p&gt;

&lt;p&gt;Furthermore, there is no way to tell junit where to put this TemporaryFolder. Right now ensure that tests don&apos;t stomp on each others feet by giving&lt;br/&gt;
them unique temp directories per-jvm, i would like to continue ensuring that any temporary data is placed there, not somewhere randomly on the users system.&lt;br/&gt;
This way all data created by &apos;ant test&apos; is guaranteed to be removed in &apos;ant clean&apos;.&lt;/p&gt;
</comment>
                    <comment id="12897724" author="shaie" created="Thu, 12 Aug 2010 13:41:00 +0100"  >&lt;p&gt;Ok, that makes sense. I forgot that we create different dir per test JVM. I read about it and thought it&apos;s neat - apparently it&apos;s too basic.&lt;/p&gt;</comment>
                    <comment id="12897727" author="rcmuir" created="Thu, 12 Aug 2010 13:46:40 +0100"  >&lt;p&gt;Yeah i think its neat too, but i guess really we abuse junit &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;the first thing I am working (#1 and #2) is to add newDirectory(Random), and for LuceneTestCase&lt;span class=&quot;error&quot;&gt;&amp;#91;j4&amp;#93;&lt;/span&gt; to ensure all MockRAMDirectories are actually closed in tests.&lt;br/&gt;
This is good because MockRAM checks in its close if readers etc are closed: and its pickiness is os-independent (will fail on unix too)&lt;/p&gt;</comment>
                    <comment id="12897926" author="rcmuir" created="Thu, 12 Aug 2010 20:56:13 +0100"  >&lt;p&gt;Here&apos;s the first step, that adds newDirectory() and LuceneTestCase&lt;span class=&quot;error&quot;&gt;&amp;#91;J4&amp;#93;&lt;/span&gt; track if these are closed correctly by the tests.&lt;/p&gt;

&lt;p&gt;i fixed places where it wasn&apos;t, but since we use MockRAMDirectory everywhere, it tracks if files are left open against it, and so I fixed all the unclosed Readers etc too in the tests.&lt;/p&gt;

&lt;p&gt;There was only one non-test bug, PersistentSnapshotDeletionPolicy makes its own IndexWriter but if it throws an exception in the ctor, never closes it. &lt;/p&gt;</comment>
                    <comment id="12897950" author="rcmuir" created="Thu, 12 Aug 2010 22:09:42 +0100"  >&lt;p&gt;Committed revision 984968 to trunk. I&apos;ll backport to 3x and then look at making MockDirectoryWrapper from MockRAM so we can support other directories in tests.&lt;/p&gt;</comment>
                    <comment id="12901223" author="rcmuir" created="Mon, 23 Aug 2010 00:54:06 +0100"  >&lt;p&gt;attached is a patch (currently has a few problems) to switch the functionality of MockRAMDirectory into MockDirectoryWrapper.&lt;/p&gt;

&lt;p&gt;before applying i did the following svn moves (renames) under test/o.a.l.store/&lt;br/&gt;
MockRAMDirectory -&amp;gt; MockDirectoryWrapper&lt;br/&gt;
MockRAMInputStream -&amp;gt; MockIndexInputWrapper&lt;br/&gt;
MockRAMOutputStream -&amp;gt; MockIndexOutputWrapper&lt;/p&gt;

&lt;p&gt;i think somehow i screwed up the disk full stuff or similar, as most tests pass but just the ones that simulate crashes dont work correctly with newDirectory implemented as new MockDIrectoryWrapper(new RAMDirectory()) &lt;/p&gt;

&lt;p&gt;if we can fix this stuff, we can switch in other impls too.&lt;/p&gt;
</comment>
                    <comment id="12901480" author="rcmuir" created="Mon, 23 Aug 2010 17:58:16 +0100"  >&lt;p&gt;Here&apos;s the updated patch, with all tests passing on trunk with the default impl (RAMDirectory).&lt;/p&gt;

&lt;p&gt;Mike helped with some of the disk full/crash stuff and I think it might sorta-kinda work for Linux etc with FSDirectory. There are definitely problems simulating a crash on windows currently with anything but RAMDir, but we can improve this later.&lt;/p&gt;

&lt;p&gt;for now, using -Dtests.directory with anything other than the default (RAMDirectory) is expert and experimental &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12901486" author="rcmuir" created="Mon, 23 Aug 2010 18:06:45 +0100"  >&lt;p&gt;Committed to r988206 (trunk).&lt;/p&gt;</comment>
                    <comment id="12901519" author="rcmuir" created="Mon, 23 Aug 2010 19:15:02 +0100"  >&lt;p&gt;Committed revision 988238 to 3x.&lt;/p&gt;

&lt;p&gt;I will mark this resolved for now, I think we are mostly there. in general we can shake out bugs in tests until its feasible to run -Dtests.directory=somethingelse perhaps on hudson.&lt;/p&gt;</comment>
                    <comment id="12901597" author="mikemccand" created="Mon, 23 Aug 2010 22:34:10 +0100"  >&lt;p&gt;Small patch to fix a few test failures on Linux if you do -Dtests.directory=SimpleFSDirectory&lt;/p&gt;</comment>
                    <comment id="12901626" author="rcmuir" created="Mon, 23 Aug 2010 23:19:08 +0100"  >&lt;p&gt;Mike, looks great. I applied the patch and less tests fail on windows for me, too.&lt;/p&gt;

&lt;p&gt;Most remaining problems with FSDir look windows specific, like not being able to overwrite open files on crash()&lt;/p&gt;</comment>
                    <comment id="12901871" author="mikemccand" created="Tue, 24 Aug 2010 14:20:59 +0100"  >&lt;p&gt;Some more fixes to try to make tests run faster w/ -Dtests.directory=SimpleFSDir.&lt;/p&gt;

&lt;p&gt;Also, I changed FSDir.length &amp;#8211; previously it first checked if the file exists and then checks the size.  I reversed this check, since presumably it&apos;s far more common that this method is called w/ a real (existing) file.  Only if length comes back as 0 do I then check if it exists.&lt;/p&gt;</comment>
                    <comment id="12901881" author="rcmuir" created="Tue, 24 Aug 2010 14:46:48 +0100"  >&lt;p&gt;Wow, some tests still fail (not any new ones with the patch though), but previously test-core -Dtests.directory=SimpleFSDirectory took 20 minutes. For example TestIW took 1000seconds alone.&lt;/p&gt;

&lt;p&gt;With the patch, test-core is significantly faster with fsdir (3 minutes, 16 seconds), and for examples TestIW takes only 93 seconds.&lt;/p&gt;</comment>
                    <comment id="12901925" author="rcmuir" created="Tue, 24 Aug 2010 16:36:08 +0100"  >&lt;p&gt;mike and i are both working this still, i didnt think we would get this far honestly. &lt;/p&gt;

&lt;p&gt;so im reopening the issue &lt;/p&gt;</comment>
                    <comment id="12901927" author="rcmuir" created="Tue, 24 Aug 2010 16:42:54 +0100"  >&lt;p&gt;patch to enable crash() on windows with fsdir.&lt;/p&gt;

&lt;p&gt;we track all indexii/io&apos;s, for two reasons.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;close them all before crashing (as windows wont let us overwrite/truncate/delete open files)&lt;/li&gt;
	&lt;li&gt;in close() when we refuse to close because files are still open, we can provide a stacktrace to find the unclosed reader, etc.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12901939" author="rcmuir" created="Tue, 24 Aug 2010 17:00:33 +0100"  >&lt;p&gt;heres the patch improved: the i/o wrappers remove themselves from the map, and the exception message is nicer. so if you forget to close files, you get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;junit-sequential:
    [junit] Testsuite: org.apache.lucene.TestDemo
    [junit] Testcase: testDemo(org.apache.lucene.TestDemo):     Caused an ERROR
    [junit] MockRAMDirectory: cannot close: there are still open files: {_0.cfs=1}
    [junit] java.lang.RuntimeException: MockRAMDirectory: cannot close: there are still open files: {_0.cfs=1}
    [junit]     at org.apache.lucene.store.MockDirectoryWrapper.close(MockDirectoryWrapper.java:342)
    [junit]     at org.apache.lucene.TestDemo.testDemo(TestDemo.java:81)
    [junit]     at org.apache.lucene.util.LuceneTestCase.runBare(LuceneTestCase.java:380)
    [junit]     at org.apache.lucene.util.LuceneTestCase.run(LuceneTestCase.java:372)
    [junit] Caused by: java.lang.RuntimeException: unclosed IndexInput
    [junit]     at org.apache.lucene.store.MockDirectoryWrapper.openInput(MockDirectoryWrapper.java:299)
    [junit]     at org.apache.lucene.store.Directory.openInput(Directory.java:138)
    [junit]     at org.apache.lucene.index.CompoundFileReader.&amp;lt;init&amp;gt;(CompoundFileReader.java:67)
    [junit]     at org.apache.lucene.index.SegmentReader$CoreReaders.&amp;lt;init&amp;gt;(SegmentReader.java:126)
    [junit]     at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:536)
    [junit]     at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:509)
    [junit]     at org.apache.lucene.index.DirectoryReader.&amp;lt;init&amp;gt;(DirectoryReader.java:129)
    [junit]     at org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:96)
    [junit]     at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:630)
    [junit]     at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:91)
    [junit]     at org.apache.lucene.index.IndexReader.open(IndexReader.java:415)
    [junit]     at org.apache.lucene.index.IndexReader.open(IndexReader.java:234)
    [junit]     at org.apache.lucene.search.IndexSearcher.&amp;lt;init&amp;gt;(IndexSearcher.java:78)
    [junit]     at org.apache.lucene.TestDemo.testDemo(TestDemo.java:67)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12901966" author="shaie" created="Tue, 24 Aug 2010 18:07:05 +0100"  >&lt;p&gt;Not sure if it&apos;s interesting and/or related to this issue, but we&apos;ve run into a bug in our code (not Lucene&apos;s that is) when the index was located on read-only file system. To simulate the bug in a JUnit test we wrote a ReadOnlyDirectory which throws exceptions on its &apos;write&apos; methods.&lt;/p&gt;

&lt;p&gt;Do you think there are tests that are worth running w/ such a Directory impl? It might be that it&apos;s meaningful in the context of our tests only ...&lt;/p&gt;</comment>
                    <comment id="12901990" author="rcmuir" created="Tue, 24 Aug 2010 18:59:48 +0100"  >&lt;p&gt;Shai, not sure Lucene&apos;s tests will be helpful there (they would just all fail with exceptions), because most of them create a new directory for writing in setUp() etc.&lt;/p&gt;</comment>
                    <comment id="12901995" author="shaie" created="Tue, 24 Aug 2010 19:06:30 +0100"  >&lt;p&gt;Yeah I figured this is sort of &apos;out of Lucene&apos; case, but thought that I&apos;d better mention it, in case you know of a Lucene test that might benefit from it (to simulate a crash or something).&lt;/p&gt;</comment>
                    <comment id="12902007" author="hossman" created="Tue, 24 Aug 2010 19:40:12 +0100"  >&lt;blockquote&gt;&lt;p&gt;because most of them create a new directory for writing in setUp() etc. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;but it does seem like it would be useful for tests where only the setUp method is expected to create the index, and the rest of the code tested is expected to be &quot;read only&quot; .. at a naive level the setUp method of tests for &quot;read only&quot; functionality could unconditionally wrap the underlying Directory in a ReadOnlyDirectory once it&apos;s all finished ... but that seems like it could be done (for the tests that want it) independently of this. (new Jira?)&lt;/p&gt;</comment>
                    <comment id="12902012" author="rcmuir" created="Tue, 24 Aug 2010 19:50:56 +0100"  >&lt;blockquote&gt;&lt;p&gt;but it does seem like it would be useful for tests where only the setUp method is expected to create the index,&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m not against the proposal, but i&apos;m curious just how it would be useful?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;(new Jira?)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree &lt;span class=&quot;error&quot;&gt;&amp;#91;i don&amp;#39;t really understand the suggestion and how it would help improve tests yet&amp;#93;&lt;/span&gt;, as this issue is really about improving test coverage (and as a side effect, providing some way to do basic tests against an arbitrary directory impl). but this is no substitute for real unit tests against any directory impl someone has written.&lt;/p&gt;

&lt;p&gt;first i&apos;d really like to see the tests actually work with -Dtests.directory=FSDirectory (on windows too), this is proving to be challenging enough &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12902093" author="rcmuir" created="Tue, 24 Aug 2010 22:55:39 +0100"  >&lt;p&gt;at the moment, all tests are passing on windows now with -Dtests.directory=FSDirectory.&lt;/p&gt;

&lt;p&gt;So I think the next step would be to default to &apos;random&apos;. &lt;br/&gt;
and we will need a thing to force certain tests like the one triggered by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2239&quot; title=&quot;Revise NIOFSDirectory and its usage due to NIO limitations on Thread.interrupt&quot;&gt;&lt;del&gt;LUCENE-2239&lt;/del&gt;&lt;/a&gt; to not use directories that will always make it fail: it will always fail from NIOFS or Mmap.&lt;/p&gt;</comment>
                    <comment id="12902115" author="hossman" created="Tue, 24 Aug 2010 23:31:57 +0100"  >&lt;p&gt;Of the top of my head...&lt;/p&gt;

&lt;p&gt;What if we add some marker interfaces with no methods that the various directories would implement, along the lines of &quot;InMemoryBasedDirectory&quot;, &quot;NTFSFriendlyDirectory&quot;, etc....  Then change the &quot;newDirectory(Random)&quot; method to &quot;newDirectory(Random,Class...)&quot;&lt;/p&gt;

&lt;p&gt;Tests would specify a list of valid Directory &quot;Classes&quot; (either concrete or interfaces) or nothing if they expect to work with any impl.&lt;/p&gt;

&lt;p&gt;newDirectory would use reflection to expand the class/interface list from the params to all known concrete types, and then likewise for the &quot;tests.directory&quot; system property, and then intersect those lists of concrete directory implementations, and pick randomly from it &amp;#8211; if the intersection is an empty set (ie: the test said it&apos;s only valid for &quot;FSDiskDirectory&quot; but the user specified -Dtests.directory=RAMDirectory) then newDirectory returns null and signals that the test should skip (or fail).  (most tests would just keep calling newDirectory(random) and the default run prop becomes -Dtests.directory=Directory)&lt;/p&gt;

&lt;p&gt;There are simplifications that can be made &amp;#8211; eliminating the marker interfaces and just having the tests pick concrete classes for example &amp;#8211; but ultimately a decision still has to be made about what to do if &quot;tests.directory&quot; conflicts with the impl the actual test says it can/can&apos;t work with.&lt;/p&gt;

&lt;p&gt;(personally; i think marker interfaces would be useful outside of the tests, as a documentation hint to users about what a given Directory subclass is capable of - and having the test take advantage of them would help verify that they are accurate, assuming we get the tests running on various platforms/filesystems)&lt;/p&gt;</comment>
                    <comment id="12902121" author="rcmuir" created="Tue, 24 Aug 2010 23:39:44 +0100"  >&lt;p&gt;Hoss, I honestly think what you describe is too complex. we need to keep the tests simple.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There are simplifications that can be made - eliminating the marker interfaces and just having the tests pick concrete classes for example - but ultimately a decision still has to be made about what to do if &quot;tests.directory&quot; conflicts with the impl the actual test says it can/can&apos;t work with.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Dude not all tests respect tests.directory as-is: they dont all use newDirectory(), some instantiate RAMDirectories themselves still. I only converted the ones that would be easy (and some i should have left alone, so i hardwired them back to ramdir)&lt;/p&gt;

&lt;p&gt;honestly i think if i hardwire TestIndexWriter.testThreadInterruptDeadlock to RAMDirectory, then all tests will pass with NIOFS and MMAP too, and we can randomly choose whichever we want.&lt;/p&gt;

&lt;p&gt;and we are no worse off than before, last week all these tests ran with RAMDirectory no matter what. the crazy picky ones can stay that way.&lt;/p&gt;</comment>
                    <comment id="12902143" author="rcmuir" created="Wed, 25 Aug 2010 00:14:17 +0100"  >&lt;p&gt;attached is a patch for testThreadInterruptDeadlock.&lt;br/&gt;
Now all tests pass with NIOFSDirectory.&lt;/p&gt;

&lt;p&gt;MMapDirectory isn&apos;t ready yet though.&lt;/p&gt;</comment>
                    <comment id="12902168" author="rcmuir" created="Wed, 25 Aug 2010 00:50:34 +0100"  >&lt;p&gt;heres an updated patch, with this both NIOFS and MMapdirectory pass all tests.&lt;/p&gt;

&lt;p&gt;I found an oddity though, exposed from TestTermVectorsReader (see the patch)&lt;br/&gt;
MMapDirectory blindly calls buffer.position(pos) for seek(), so wrong seeks give IllegalArgumentException (not the IOException this test expects).&lt;/p&gt;

&lt;p&gt;In the patch i changed the test to also allow IllegalArgumentException, but I figure&lt;br/&gt;
it was worth mentioning: alternatively we could check bounds on MMapDir&apos;s seek() and throw&lt;br/&gt;
a more expected IOException when its &amp;lt; 0 || &amp;gt; length... personally i&apos;m not eager to add these checks though.&lt;/p&gt;</comment>
                    <comment id="12902376" author="rcmuir" created="Wed, 25 Aug 2010 12:05:08 +0100"  >&lt;p&gt;ok, here is the previous patch, except &quot;random&quot; is now enabled by default. (but most of the time uses ramdirectory so the tests are still generally quick)&lt;/p&gt;</comment>
                    <comment id="12902433" author="rcmuir" created="Wed, 25 Aug 2010 14:19:57 +0100"  >&lt;p&gt;the fixes to NIOFS and MMap are committed in revision 989030.&lt;/p&gt;

&lt;p&gt;On windows all tests pass with all directory impls, but the default is still RAMDirectory until at least we verify macos and linux are ok with &quot;random&quot;.&lt;/p&gt;</comment>
                    <comment id="13013361" author="gsingers" created="Wed, 30 Mar 2011 16:50:05 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12453027" name="LUCENE-2598.patch" size="7605" author="rcmuir" created="Wed, 25 Aug 2010 12:05:07 +0100" />
                    <attachment id="12452990" name="LUCENE-2598.patch" size="2822" author="rcmuir" created="Wed, 25 Aug 2010 00:50:34 +0100" />
                    <attachment id="12452985" name="LUCENE-2598.patch" size="697" author="rcmuir" created="Wed, 25 Aug 2010 00:14:17 +0100" />
                    <attachment id="12452942" name="LUCENE-2598.patch" size="6220" author="rcmuir" created="Tue, 24 Aug 2010 17:00:33 +0100" />
                    <attachment id="12452941" name="LUCENE-2598.patch" size="5212" author="rcmuir" created="Tue, 24 Aug 2010 16:42:54 +0100" />
                    <attachment id="12452928" name="LUCENE-2598.patch" size="8821" author="mikemccand" created="Tue, 24 Aug 2010 14:20:59 +0100" />
                    <attachment id="12452858" name="LUCENE-2598.patch" size="6409" author="mikemccand" created="Mon, 23 Aug 2010 22:34:10 +0100" />
                    <attachment id="12452832" name="LUCENE-2598.patch" size="258372" author="rcmuir" created="Mon, 23 Aug 2010 17:58:16 +0100" />
                    <attachment id="12452762" name="LUCENE-2598.patch" size="248302" author="rcmuir" created="Mon, 23 Aug 2010 00:54:06 +0100" />
                    <attachment id="12451943" name="LUCENE-2598.patch" size="409199" author="rcmuir" created="Thu, 12 Aug 2010 20:56:13 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 12 Aug 2010 05:31:05 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11236</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25094</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>