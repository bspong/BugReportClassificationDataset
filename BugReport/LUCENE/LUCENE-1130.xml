<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:27:21 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1130/LUCENE-1130.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1130] Hitting disk full during DocumentWriter.ThreadState.init(...) can cause hang</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1130</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;More testing of RC2 ...&lt;/p&gt;

&lt;p&gt;I found one case, if you hit disk full during init() in&lt;br/&gt;
DocumentsWriter.ThreadState, when we first create the term vectors &amp;amp;&lt;br/&gt;
fields writer, such that subsequent calls to&lt;br/&gt;
IndexWriter.add/updateDocument will then hang forever.&lt;/p&gt;

&lt;p&gt;What&apos;s happening in this case is we are incrementing nextDocID even&lt;br/&gt;
though we never call finishDocument (because we &quot;thought&quot; init did not&lt;br/&gt;
succeed).  Then, when we finish the next document, it will never&lt;br/&gt;
actually write because missing finishDocument call never happens.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12386070">LUCENE-1130</key>
            <summary>Hitting disk full during DocumentWriter.ThreadState.init(...) can cause hang</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Jan 2008 18:06:33 +0000</created>
                <updated>Fri, 25 Jan 2008 03:24:17 +0000</updated>
                    <resolved>Mon, 14 Jan 2008 17:18:44 +0000</resolved>
                            <version>2.3</version>
                                <fixVersion>2.3</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12558049" author="mikemccand" created="Fri, 11 Jan 2008 18:08:12 +0000"  >&lt;p&gt;I created two test cases that show the issue &amp;amp; patch that fixes it,&lt;br/&gt;
attached.  All tests pass.  I plan to commit to trunk in ~ 1 day, and I&lt;br/&gt;
think we should also push this fix into a 2.3 RC3 (Michael?).&lt;/p&gt;</comment>
                    <comment id="12558054" author="michaelbusch" created="Fri, 11 Jan 2008 18:18:08 +0000"  >&lt;blockquote&gt;
&lt;p&gt;and I think we should also push this fix into a 2.3 RC3 (Michael?).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes. We have a disk full test scenario in our project and I&apos;ll test &lt;br/&gt;
RC2 + your patch today!&lt;/p&gt;

&lt;p&gt;I think we should definitely push this into 2.3. I&apos;ll build RC3 after&lt;br/&gt;
I finished the tests and you committed it.&lt;/p&gt;</comment>
                    <comment id="12558408" author="mikemccand" created="Sun, 13 Jan 2008 15:15:35 +0000"  >&lt;p&gt;Attached take2 patch.&lt;/p&gt;

&lt;p&gt;I created a few more disk full threaded stress tests, whereby multiple&lt;br/&gt;
threads are indexing, at some point start hitting disk full, but keep&lt;br/&gt;
on trying to add docs for a while after that disk full.&lt;/p&gt;

&lt;p&gt;This uncovered a number of sneaky thread safety issues with how&lt;br/&gt;
DocumentsWriter was handling exceptions, aborting, etc..&lt;/p&gt;

&lt;p&gt;I&apos;ve fixed them, and all tests pass.  I&apos;ll wait another day before&lt;br/&gt;
committing.&lt;/p&gt;</comment>
                    <comment id="12558536" author="michaelbusch" created="Mon, 14 Jan 2008 08:09:23 +0000"  >&lt;p&gt;Mike,&lt;/p&gt;

&lt;p&gt;all core &amp;amp; contrib tests pass for me. &lt;br/&gt;
Also the disk full test that I mentioned passes with your take2 patch. &lt;br/&gt;
Without the patch it fails with RC2.&lt;/p&gt;

&lt;p&gt;So +1 for committing it to trunk &amp;amp; 2.3 branch!&lt;br/&gt;
I&apos;ll build RC3 once this is committed.&lt;/p&gt;</comment>
                    <comment id="12558638" author="mikemccand" created="Mon, 14 Jan 2008 15:40:26 +0000"  >&lt;p&gt;OK I will commit today.  Thanks for testing Michael!&lt;/p&gt;</comment>
                    <comment id="12558673" author="michaelbusch" created="Mon, 14 Jan 2008 17:08:33 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Thanks for testing Michael!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;ll forward the thanks to my colleagues, they&apos;re doing a great job with &lt;br/&gt;
testing the 2.3 RCs currently!&lt;/p&gt;

&lt;p&gt;Thank YOU for the quick fixes, Mike!!&lt;/p&gt;</comment>
                    <comment id="12558677" author="mikemccand" created="Mon, 14 Jan 2008 17:18:44 +0000"  >&lt;p&gt;OK fixed &amp;amp; ported to 2.3 branch!&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12386226">SOLR-455</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12372989" name="LUCENE-1130.patch" size="11487" author="mikemccand" created="Fri, 11 Jan 2008 18:08:11 +0000" />
                    <attachment id="12373056" name="LUCENE-1130.take2.patch" size="62336" author="mikemccand" created="Sun, 13 Jan 2008 15:15:35 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 11 Jan 2008 18:18:08 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12615</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26599</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>