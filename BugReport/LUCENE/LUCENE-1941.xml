<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:04:19 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1941/LUCENE-1941.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1941] MinPayloadFunction returns 0 when only one payload is present</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1941</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;In some experiments with payload scoring through PayloadTermQuery, I&apos;m seeing 0 returned when using MinPayloadFunction.  I believe there is a bug there.  No time at the moment to flesh out a unit test, but wanted to report it for tracking.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12437147">LUCENE-1941</key>
            <summary>MinPayloadFunction returns 0 when only one payload is present</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="ehatcher">Erik Hatcher</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Oct 2009 20:05:39 +0100</created>
                <updated>Thu, 25 Feb 2010 10:18:03 +0000</updated>
                    <resolved>Sun, 14 Feb 2010 16:52:09 +0000</resolved>
                            <version>2.9</version>
                <version>3.0</version>
                                <fixVersion>2.9.2</fixVersion>
                <fixVersion>3.0.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/query/scoring</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12832928" author="thetaphi" created="Fri, 12 Feb 2010 10:20:58 +0000"  >&lt;p&gt;Hi Erik,&lt;/p&gt;

&lt;p&gt;I want to release 2.9.2 and 3.0.1, is there any problem? &lt;br/&gt;
I would change this to fix 3.1 only, else it should be fix for 3.0.1 and 2.9.2 both.&lt;/p&gt;</comment>
                    <comment id="12832931" author="mikemccand" created="Fri, 12 Feb 2010 10:24:34 +0000"  >&lt;p&gt;This is a real bug &amp;#8211; it happens because PayloadTermQuery (and PayloadNearQuery) processPayload calls the payload scoring function, passing in the old score and the new one.&lt;/p&gt;

&lt;p&gt;The problem is the old score always defaults to 0.0.  Ie it doesn&apos;t handle the first payload properly &amp;#8211; first payload should set the value for min/max.  So you won&apos;t hit this if your min is &amp;lt; 0.&lt;/p&gt;

&lt;p&gt;MaxPayloadFunction has the bug as well, but you won&apos;t hit it if your max is &amp;gt; 0.&lt;/p&gt;</comment>
                    <comment id="12832932" author="ehatcher" created="Fri, 12 Feb 2010 10:28:47 +0000"  >&lt;p&gt;Feel free to adjust this issue to whichever Lucene version makes sense.  I don&apos;t have bandwidth at the moment to address this myself.&lt;/p&gt;</comment>
                    <comment id="12832952" author="mikemccand" created="Fri, 12 Feb 2010 11:16:42 +0000"  >&lt;p&gt;Attached patch.&lt;/p&gt;

&lt;p&gt;The fix is simple &amp;#8211; the payload function already receives the count of how many payloads were seen so far, so when this count is 0, min/max function should just return the current value.&lt;/p&gt;

&lt;p&gt;We still need a test case though... I&apos;m probably not going to have time (off on &quot;vacation&quot; (scare quotes for Marvin) soon).&lt;/p&gt;</comment>
                    <comment id="12832958" author="mikemccand" created="Fri, 12 Feb 2010 11:30:11 +0000"  >&lt;p&gt;New patch attached &amp;#8211; last patch had unrelated changes to the build xml files.&lt;/p&gt;</comment>
                    <comment id="12832989" author="creamyg" created="Fri, 12 Feb 2010 13:21:35 +0000"  >&lt;p&gt;&amp;gt; off on &quot;vacation&quot; (scare quotes for Marvin)&lt;/p&gt;

&lt;p&gt;Have &quot;fun&quot;!&lt;/p&gt;</comment>
                    <comment id="12833551" author="thetaphi" created="Sun, 14 Feb 2010 11:03:29 +0000"  >&lt;p&gt;As there is no real test available (for the whole class exspect ctor, Mark Miller figured out yesterday) - I think the attached fix is ok at the moment and i would like to apply it to 2.9, 3.0 and trunk to release the pending 2.9.2 and 3.0.1.&lt;/p&gt;

&lt;p&gt;If nobody is against it (Erik?) i would like to apply this patch and release the artifacts for PMC vote today afternoon. Also I open a new issue requesting tests at all &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12833552" author="ehatcher" created="Sun, 14 Feb 2010 11:07:23 +0000"  >&lt;p&gt;Uwe - patch looks good.  Go for it!&lt;/p&gt;</comment>
                    <comment id="12833564" author="thetaphi" created="Sun, 14 Feb 2010 12:50:05 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2264&quot; title=&quot;Add missing tests for PayloadXxxQuery&quot;&gt;LUCENE-2264&lt;/a&gt; for the tests.&lt;/p&gt;

&lt;p&gt;I will now proceed with applying the patches and merging to 2.9/3.0.&lt;/p&gt;</comment>
                    <comment id="12833565" author="thetaphi" created="Sun, 14 Feb 2010 12:55:48 +0000"  >&lt;p&gt;Patch with CHANGES.txt in the new 3.0.1/2.9.2 section of restructured trunk changes.&lt;/p&gt;</comment>
                    <comment id="12833589" author="thetaphi" created="Sun, 14 Feb 2010 16:52:09 +0000"  >&lt;p&gt;Committed trunk revision: 910034&lt;br/&gt;
Committed 3.0 branch revision: 910037&lt;br/&gt;
Committed 2.9 branch revision: 910038&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12456262">LUCENE-2264</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12435819" name="LUCENE-1941.patch" size="2255" author="thetaphi" created="Sun, 14 Feb 2010 12:55:48 +0000" />
                    <attachment id="12435691" name="LUCENE-1941.patch" size="1723" author="mikemccand" created="Fri, 12 Feb 2010 11:30:11 +0000" />
                    <attachment id="12435688" name="LUCENE-1941.patch" size="8321" author="mikemccand" created="Fri, 12 Feb 2010 11:16:42 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 12 Feb 2010 10:20:58 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11829</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25784</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>