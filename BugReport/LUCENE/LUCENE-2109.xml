<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:00:08 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2109/LUCENE-2109.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2109] Make DocsEnum subclass of DocIdSetIterator</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2109</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Spinoff from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1458&quot; title=&quot;Further steps towards flexible indexing&quot;&gt;&lt;del&gt;LUCENE-1458&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;One thing I came along long time ago, but now with a new API it get&apos;s interesting again: &lt;br/&gt;
DocsEnum should extend DocIdSetIterator, that would make it simplier to use and implement e.g. in MatchAllDocQuery.Scorer, FieldCacheRangeFilter and so on. You could e.g. write a filter for all documents that simply returns the docs enumeration from IndexReader.&lt;/p&gt;

&lt;p&gt;So it should be an abstract class that extends DocIdSetIterator. It has the same methods, only some methods must be a little bit renamed. The problem is, because java does not support multiple inheritace, we cannot also extends attributesource  Would DocIdSetIterator be an interface it would work (this is one of the cases where interfaces for really simple patterns can be used, like iterators).&lt;/p&gt;

&lt;p&gt;The problem with multiple inheritance could be solved by an additional method attributes() that creates a new AttributeSource on first access then (because constructing an AttributeSource is costly).  The same applies for the other *Enums, it should be separated for lazy init.&lt;/p&gt;

&lt;p&gt;DocsEnum could look like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; class DocsEnum &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; DocIdSetIterator {
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; AttributeSource atts = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; freq()
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; DontKnowClassName positions()
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; AttributeSource attributes() {
   &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (atts==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) atts=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AttributeSource();
   &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; atts;
  }
  ...&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; impl of the bulk access using the &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; methods from DocIdSetIterator
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
            <key id="12442398">LUCENE-2109</key>
            <summary>Make DocsEnum subclass of DocIdSetIterator</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2009 22:29:13 +0000</created>
                <updated>Fri, 10 May 2013 11:44:11 +0100</updated>
                    <resolved>Sat, 5 Dec 2009 07:30:41 +0000</resolved>
                            <version>4.0-ALPHA</version>
                                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12785579" author="thetaphi" created="Thu, 3 Dec 2009 22:30:51 +0000"  >&lt;p&gt;Here the patch.&lt;/p&gt;</comment>
                    <comment id="12785581" author="thetaphi" created="Thu, 3 Dec 2009 22:32:36 +0000"  >&lt;p&gt;The DocIdSetIterator approach can be easily used for some queries or scorers as it could be e.g. directly returned by filters. A TermFilter is simply returning the DocsEnum for the specific TermRef as iterator, very simple.&lt;/p&gt;</comment>
                    <comment id="12785976" author="thetaphi" created="Fri, 4 Dec 2009 16:09:26 +0000"  >&lt;p&gt;Small updates in JavaDocs (were sometimes copied from deprecated classes).&lt;/p&gt;

&lt;p&gt;What do you think, can we move this way and commit this?&lt;/p&gt;</comment>
                    <comment id="12785980" author="mikemccand" created="Fri, 4 Dec 2009 16:14:29 +0000"  >&lt;p&gt;Looks great Uwe!  I&apos;d say commit it.&lt;/p&gt;</comment>
                    <comment id="12786058" author="thetaphi" created="Fri, 4 Dec 2009 18:31:10 +0000"  >&lt;p&gt;OK, will do shortly after all tests are run (also contrib &amp;amp; bw this time).&lt;/p&gt;

&lt;p&gt;Thanks for reviewing.&lt;/p&gt;</comment>
                    <comment id="12786106" author="thetaphi" created="Fri, 4 Dec 2009 19:43:28 +0000"  >&lt;p&gt;Here the latest patch with fixed contrib (there were still some next() calls on DocsEnum).&lt;/p&gt;

&lt;p&gt;All tests pass. I will commit later this evening, ok?&lt;/p&gt;</comment>
                    <comment id="12786113" author="thetaphi" created="Fri, 4 Dec 2009 19:52:07 +0000"  >&lt;p&gt;Again the patch. I made the attributes() calls unfinal, which is not the best to ensure final, but the FilteredTermsEnum needs to override the method to return the attributes of the underlying TermsEnum.&lt;/p&gt;

&lt;p&gt;So everybody happy?&lt;/p&gt;</comment>
                    <comment id="12786136" author="mikemccand" created="Fri, 4 Dec 2009 20:26:08 +0000"  >&lt;p&gt;Looks good Uwe!&lt;/p&gt;</comment>
                    <comment id="12786145" author="paul.elschot@xs4all.nl" created="Fri, 4 Dec 2009 20:37:44 +0000"  >&lt;p&gt;Vielen Dank f&#252;r diese Gr&#252;ndlichkeit.&lt;/p&gt;</comment>
                    <comment id="12786171" author="thetaphi" created="Fri, 4 Dec 2009 21:14:42 +0000"  >&lt;p&gt;Danke! Mache ich doch gerne!&lt;/p&gt;</comment>
                    <comment id="12786357" author="thetaphi" created="Sat, 5 Dec 2009 07:30:41 +0000"  >&lt;p&gt;Committed revision: 887509&lt;/p&gt;

&lt;p&gt;Thanks for reviewing!&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                <outwardlinks description="blocks">
                            <issuelink>
            <issuekey id="12442406">LUCENE-2111</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12426952" name="LUCENE-2109.patch" size="26250" author="thetaphi" created="Fri, 4 Dec 2009 19:52:07 +0000" />
                    <attachment id="12426949" name="LUCENE-2109.patch" size="26274" author="thetaphi" created="Fri, 4 Dec 2009 19:43:28 +0000" />
                    <attachment id="12426910" name="LUCENE-2109.patch" size="23224" author="thetaphi" created="Fri, 4 Dec 2009 16:09:26 +0000" />
                    <attachment id="12426826" name="LUCENE-2109.patch" size="22977" author="thetaphi" created="Thu, 3 Dec 2009 22:30:51 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 4 Dec 2009 16:14:29 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11670</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25616</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>