<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:31:22 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-995/LUCENE-995.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-995] Add open ended range query syntax to QueryParser</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-995</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The QueryParser fails to generate open ended range queries.&lt;br/&gt;
Parsing e.g. &quot;date:&lt;span class=&quot;error&quot;&gt;&amp;#91;1990 TO *&amp;#93;&lt;/span&gt;&quot;  gives zero results,&lt;br/&gt;
but&lt;br/&gt;
ConstantRangeQuery(&quot;date&quot;,&quot;1990&quot;,null,true,true)&lt;br/&gt;
does produce the expected results.&lt;/p&gt;

&lt;p&gt;&quot;date:&lt;span class=&quot;error&quot;&gt;&amp;#91;* TO 1990&amp;#93;&lt;/span&gt;&quot; gives the same results as ConstantRangeQuery(&quot;date&quot;,null,&quot;1990&quot;,true,true).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12377970">LUCENE-995</key>
            <summary>Add open ended range query syntax to QueryParser</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="jgorski">Jonas Gorski</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Sep 2007 13:33:35 +0100</created>
                <updated>Fri, 10 May 2013 11:42:50 +0100</updated>
                    <resolved>Sat, 23 Oct 2010 12:33:37 +0100</resolved>
                            <version>1.9</version>
                <version>2.0.0</version>
                <version>2.1</version>
                <version>2.2</version>
                                <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/queryparser</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12526448" author="yseeley@gmail.com" created="Tue, 11 Sep 2007 14:04:13 +0100"  >&lt;p&gt;That looks like Solr syntax.  The Lucene QueryParser doesn&apos;t support open-ended range queries.&lt;/p&gt;</comment>
                    <comment id="12526450" author="jgorski" created="Tue, 11 Sep 2007 14:21:26 +0100"  >&lt;p&gt;But if it doesn&apos;t support them, shouldn&apos;t it throw an ParseException? And why does &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;* TO x&amp;#93;&lt;/span&gt;&quot; work? &lt;br/&gt;
That looks inconsistent in behaviour to me.&lt;/p&gt;</comment>
                    <comment id="12526451" author="yseeley@gmail.com" created="Tue, 11 Sep 2007 14:28:14 +0100"  >&lt;p&gt;It doesn&apos;t support them in that it has no special syntax to specify an open endpoint.  So * is a literal *, and is a valid endpoint for a range query (hence no exception). &lt;/p&gt;

&lt;p&gt;For your date strings, you could use something like &quot;0&quot; and &quot;z&quot; for your endpoints.&lt;/p&gt;</comment>
                    <comment id="12747278" author="lafa" created="Tue, 25 Aug 2009 08:50:12 +0100"  >&lt;p&gt;I propose to improve the syntax to allow the following&lt;/p&gt;

&lt;p&gt;&quot;date&amp;gt;1990&quot;&lt;br/&gt;
&quot;date&amp;lt;1990&quot;&lt;br/&gt;
&quot;date=1990&quot;&lt;br/&gt;
&quot;date&amp;gt;=1990&quot;&lt;br/&gt;
&quot;date&amp;lt;=1990&quot;&lt;/p&gt;

&lt;p&gt;What do you guys think?&lt;/p&gt;

&lt;p&gt;We probably could do it at same time we implement &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1823&quot; title=&quot;QueryParser with new features for Lucene 3&quot;&gt;LUCENE-1823&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12747281" author="lafa" created="Tue, 25 Aug 2009 08:55:19 +0100"  >&lt;p&gt;The fix I propose, will only be fixed in the new queryparser implementation.&lt;/p&gt;</comment>
                    <comment id="12758104" author="adriano_crestani" created="Tue, 22 Sep 2009 04:01:49 +0100"  >&lt;p&gt;The patch adds open ended range query to oal.queryParser.QueryParser. By default it&apos;s disabled and may be enabled invoking setEnableOpenEndedRangeQueries. I also added the capability to redefine the open ended token, the default is &apos;*&apos;.&lt;/p&gt;

&lt;p&gt;I also added some test cases. &lt;/p&gt;</comment>
                    <comment id="12924041" author="yseeley@gmail.com" created="Fri, 22 Oct 2010 22:36:46 +0100"  >&lt;p&gt;FYI, this last patch has the same issue as Solr does, described in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2189&quot; title=&quot;QP can&amp;#39;t represent a literal * in range&quot;&gt;&lt;del&gt;SOLR-2189&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
I&apos;m going to take a quick crack at fixing it in the QP, before getRangeQuery() is called.&lt;/p&gt;</comment>
                    <comment id="12924052" author="yseeley@gmail.com" created="Fri, 22 Oct 2010 23:04:08 +0100"  >&lt;p&gt;Here&apos;s a draft patch (no tests yet, so I don&apos;t know if it works).&lt;br/&gt;
But the proposal is simple: * in a range query would be an open end.&lt;br/&gt;
&quot;*&quot; or &amp;#42; would be ways to represent a literal asterisk instead of an open end.&lt;br/&gt;
The QP will now pass null for an open end to getRangeQuery().  This will match&lt;br/&gt;
the constructors on our actual range query objects.&lt;/p&gt;</comment>
                    <comment id="12924059" author="yseeley@gmail.com" created="Fri, 22 Oct 2010 23:21:25 +0100"  >&lt;p&gt;OK, here&apos;s the final patch - adds a few tests and changes TermRangeQuery.toString() to output &amp;#42; for a literal asterisk.&lt;/p&gt;</comment>
                    <comment id="12930840" author="amp834" created="Wed, 10 Nov 2010 23:42:45 +0000"  >&lt;p&gt;Is this a fix just for the date fields, or does it work for all fields, for example will   Author:&lt;span class=&quot;error&quot;&gt;&amp;#91;* TO *&amp;#93;&lt;/span&gt;    work to get all Authors that have something in them  (and also, query like  &lt;b&gt;:&lt;/b&gt; -Author:&lt;span class=&quot;error&quot;&gt;&amp;#91;* TO *&amp;#93;&lt;/span&gt;   to get all records that are missing the Author field?)&lt;/p&gt;

&lt;p&gt;Any idea what version of Lucene this will be included with and when it will be released?&lt;/p&gt;</comment>
                    <comment id="13180013" author="ingorenner" created="Thu, 5 Jan 2012 00:15:44 +0000"  >&lt;p&gt;would it be possible to back port this to 3.x?&lt;/p&gt;</comment>
                    <comment id="13180299" author="ingorenner" created="Thu, 5 Jan 2012 11:42:44 +0000"  >&lt;p&gt;BTW, I applied the patch to 3.x, testing now...&lt;/p&gt;</comment>
                    <comment id="13180420" author="ingorenner" created="Thu, 5 Jan 2012 14:22:54 +0000"  >&lt;p&gt;Here&apos;s the 3.x back port. Unit Test for TestQueryParser is green, but I&apos;d still like someone else to have a look at it as Java is not my primary language.&lt;/p&gt;</comment>
                    <comment id="13180466" author="mikemccand" created="Thu, 5 Jan 2012 15:31:13 +0000"  >&lt;p&gt;3.x patch looks great!&lt;/p&gt;

&lt;p&gt;Only thing I noticed is that QueryParser.java has changes not present in QueryParser.jj&lt;/p&gt;

&lt;p&gt;Also, I see a Solr test failure with this patch; just run:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  ant test -Dtestcase=ConvertedLegacyTest -Dtestmethod=testABunchOfConvertedStuff -Dtests.seed=-217957745e3f4a9e:-1e9dfcec76c86042:439d76b910f98fee -Dargs=&quot;-Dfile.encoding=UTF-8&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Looks like the test has a TermRangeQuery whose * need to be escaped as \ *&lt;/p&gt;</comment>
                    <comment id="13180536" author="ingorenner" created="Thu, 5 Jan 2012 17:10:44 +0000"  >&lt;p&gt;As I said I&apos;m not yet that familiar with Java so I actually had to look up what that .jj file is about and now I understand that QueryParser.java actually is compiled/generated from the .jj file using javacc.&lt;/p&gt;

&lt;p&gt;I don&apos;t know where the other changes come from, all I did was basically applying the 4.x patch and fixing incompatibilities manually.&lt;/p&gt;

&lt;p&gt;Regarding the asterisk, could it be that this is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2189&quot; title=&quot;QP can&amp;#39;t represent a literal * in range&quot;&gt;&lt;del&gt;SOLR-2189&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;</comment>
                    <comment id="13180543" author="ingorenner" created="Thu, 5 Jan 2012 17:13:00 +0000"  >&lt;p&gt;I would guess though, that someone changed QueryParser.java and forgot to apply those changes to the .jj file, too obviously &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13180626" author="yseeley@gmail.com" created="Thu, 5 Jan 2012 17:53:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;Regarding the asterisk, could it be that this is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2189&quot; title=&quot;QP can&amp;#39;t represent a literal * in range&quot;&gt;&lt;del&gt;SOLR-2189&lt;/del&gt;&lt;/a&gt; ?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmmm, I guess I opened &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2189&quot; title=&quot;QP can&amp;#39;t represent a literal * in range&quot;&gt;&lt;del&gt;SOLR-2189&lt;/del&gt;&lt;/a&gt; before I took a crack at fixing it the right way (so solr no longer needs to check for &quot;*&quot; since the QP grammar does).&lt;br/&gt;
I&apos;ll close it.&lt;/p&gt;</comment>
                    <comment id="13180691" author="mikemccand" created="Thu, 5 Jan 2012 18:55:09 +0000"  >&lt;p&gt;OK I see what&apos;s causing the test failure ... the 3.x QP has separate code for the inclusive vs exclusive range cases (in trunk they were merged at some point I guess...), so, I&apos;ll fix the patch to also fix the exclusive case.&lt;/p&gt;

&lt;p&gt;I&apos;ll also sync up QueryParser.jj so that when gen&apos;d it matches the QueryParser.java from the patch.&lt;/p&gt;</comment>
                    <comment id="13180745" author="mikemccand" created="Thu, 5 Jan 2012 19:26:31 +0000"  >&lt;p&gt;Patch, fixing the above issues.&lt;/p&gt;

&lt;p&gt;I also fixed QueryParser.jj to include the &lt;span class=&quot;error&quot;&gt;&amp;#91;untested&amp;#93;&lt;/span&gt; changes to QueryParser.java, from &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2348&quot; title=&quot;No error reported when using a FieldCached backed ValueSource for a field Solr knows won&amp;#39;t work&quot;&gt;&lt;del&gt;SOLR-2348&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    <comment id="13182015" author="mikemccand" created="Sat, 7 Jan 2012 16:13:21 +0000"  >&lt;p&gt;Thanks Ingo!&lt;/p&gt;</comment>
                    <comment id="13182427" author="ingorenner" created="Mon, 9 Jan 2012 09:25:11 +0000"  >&lt;p&gt;Thanks for committing Michael!&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310010">
                <name>Incorporates</name>
                                                <inwardlinks description="is part of">
                            <issuelink>
            <issuekey id="12433389">LUCENE-1823</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12417241">LUCENE-1567</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12478119">SOLR-2189</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12420254" name="LUCENE-995_09_21_2009.patch" size="95911" author="adriano_crestani" created="Tue, 22 Sep 2009 04:01:49 +0100" />
                    <attachment id="12509545" name="LUCENE-995-backport-3x.patch" size="9390" author="ingorenner" created="Thu, 5 Jan 2012 14:22:54 +0000" />
                    <attachment id="12509597" name="LUCENE-995.patch" size="17455" author="mikemccand" created="Thu, 5 Jan 2012 19:26:31 +0000" />
                    <attachment id="12457880" name="LUCENE-995.patch" size="11565" author="yseeley@gmail.com" created="Fri, 22 Oct 2010 23:21:24 +0100" />
                    <attachment id="12457878" name="LUCENE-995.patch" size="9822" author="yseeley@gmail.com" created="Fri, 22 Oct 2010 23:04:07 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>5.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 11 Sep 2007 13:04:13 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12749</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26734</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>