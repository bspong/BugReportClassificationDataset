<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:15:26 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3340/LUCENE-3340.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3340] Buffered deletes are not flushed by RAM or count</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3340</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;When a segment is flushed, we will generally NOT flush the deletes, ie we simply buffer up the pending delete terms/queries, and the only apply them if 1) a segment is going to be merged (so we can remove the del docs in that segment), or 2) the buffered deletes&apos; RAM exceeds 1/2 of IW&apos;s RAM limit when we are flushing a segment, or 3) the buffered deletes count exceeds IWC&apos;s maxBufferedDeleteTerms.&lt;/p&gt;

&lt;p&gt;But the latter 2 triggers are currently broken on trunk; I suspect (but I&apos;m not sure) when we landed DWPT we introduced this bug.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12515235">LUCENE-3340</key>
            <summary>Buffered deletes are not flushed by RAM or count</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jul 2011 11:29:15 +0100</created>
                <updated>Fri, 10 May 2013 11:44:30 +0100</updated>
                    <resolved>Tue, 26 Jul 2011 14:10:46 +0100</resolved>
                            <version>4.0-ALPHA</version>
                                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="13070416" author="mikemccand" created="Mon, 25 Jul 2011 11:34:12 +0100"  >&lt;p&gt;Patch w/ 2 test cases showing the bug... they fail on trunk and pass on 3.x.&lt;/p&gt;</comment>
                    <comment id="13070489" author="simonw" created="Mon, 25 Jul 2011 14:21:11 +0100"  >&lt;p&gt;here is a patch. The FlushPolicy only consulted the current global deletes buffer but didn&apos;t check the already frozen del packages. We also only checked if we need to apply the deletes during deleteQuery / deleteTerm and not during update.&lt;/p&gt;</comment>
                    <comment id="13070591" author="mikemccand" created="Mon, 25 Jul 2011 17:28:08 +0100"  >&lt;p&gt;Thanks Simon!&lt;/p&gt;

&lt;p&gt;I found another case where the deletes weren&apos;t flushing at the right time, and added a new test case (passes on 3.x and fails on trunk but passes w/ this patch).&lt;/p&gt;

&lt;p&gt;I think it&apos;s ready to commit!&lt;/p&gt;</comment>
                    <comment id="13070697" author="simonw" created="Mon, 25 Jul 2011 20:27:44 +0100"  >&lt;blockquote&gt;&lt;p&gt;I think it&apos;s ready to commit!&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;+1 thanks for all the new testcases!&lt;/p&gt;</comment>
                    <comment id="13071078" author="mikemccand" created="Tue, 26 Jul 2011 14:10:46 +0100"  >&lt;p&gt;Thanks Simon!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12487723" name="LUCENE-3340.patch" size="11531" author="mikemccand" created="Mon, 25 Jul 2011 17:28:07 +0100" />
                    <attachment id="12487702" name="LUCENE-3340.patch" size="6221" author="simonw" created="Mon, 25 Jul 2011 14:21:11 +0100" />
                    <attachment id="12487686" name="LUCENE-3340.patch" size="3850" author="mikemccand" created="Mon, 25 Jul 2011 11:34:12 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 25 Jul 2011 13:21:11 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2743</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24356</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>