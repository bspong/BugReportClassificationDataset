<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:22:41 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2986/LUCENE-2986.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2986] divorce defaultsimilarityprovider from defaultsimilarity</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2986</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2236&quot; title=&quot;Similarity can only be set per index, but I may want to adjust scoring behaviour at a field level&quot;&gt;&lt;del&gt;LUCENE-2236&lt;/del&gt;&lt;/a&gt; as a start, we made DefaultSimilarity which implements the factory interface (SimilarityProvider), and also extends Similarity.&lt;/p&gt;

&lt;p&gt;Its factory interface just returns itself always by default.&lt;/p&gt;

&lt;p&gt;Doron mentioned it would be cleaner to split the two, and I thought it would be good to revisit it later.&lt;/p&gt;

&lt;p&gt;Today as I was looking at &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2338&quot; title=&quot;improved per-field similarity integration into schema.xml&quot;&gt;&lt;del&gt;SOLR-2338&lt;/del&gt;&lt;/a&gt;, it became pretty clear that we should do this, it makes things a lot cleaner. I think currently its confusing to users to see the two apis mixed if they are trying to subclass.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12502200">LUCENE-2986</key>
            <summary>divorce defaultsimilarityprovider from defaultsimilarity</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Mar 2011 16:48:57 +0000</created>
                <updated>Fri, 10 May 2013 11:42:51 +0100</updated>
                    <resolved>Fri, 25 Mar 2011 14:01:30 +0000</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13010215" author="rcmuir" created="Wed, 23 Mar 2011 16:50:09 +0000"  >&lt;p&gt;Attached is a patch: adds DefaultSimilarityProvider, which has our default implementations of the non-field-specific methods (coord/queryNorm/etc), and always returns DefaultSimilarity.&lt;/p&gt;</comment>
                    <comment id="13010570" author="doronc" created="Thu, 24 Mar 2011 06:08:25 +0000"  >&lt;p&gt;+1 for this change (I did not remember discussing this, but other than remembering I am consistent &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)&lt;/p&gt;

&lt;p&gt;Patch looks very clean.&lt;/p&gt;

&lt;p&gt;Minor technical comments - concerning just some tests:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;some of the DSP implementations are still named xyzSimilarity - I think it would be more clear to name them xyzSimilarityProvider:
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;o.a.l.search.payloads.TestPayloadNearQuery.BoostingSimilarity&lt;/li&gt;
		&lt;li&gt;o.a.l.search.payloads.TestPayloadTermQuery.BoostingSimilarity&lt;/li&gt;
		&lt;li&gt;o.a.solr.schema.MockConfigurableSimilarity&lt;/li&gt;
		&lt;li&gt;o.a.l.index.TestIndexWriterConfig.MySimilarity&lt;/li&gt;
		&lt;li&gt;o.a.l.index.TestIndexReaderCloneNorms.SimilarityOne&lt;/li&gt;
		&lt;li&gt;o.a.l.index.TestNorms.SimilarityOne&lt;/li&gt;
		&lt;li&gt;o.a.l.index.TestOmitTf.SimpleSimilarity&lt;/li&gt;
		&lt;li&gt;o.a.l.search.TestSimilarity.SimpleSimilarity&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for few of the above it is not only the name - they are still doing both roles: 
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; DefaultSimilarity &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; SimilarityProvider&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;:&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;o.a.l.search.payloads.TestPayloadNearQuery.BoostingSimilarity&lt;/li&gt;
		&lt;li&gt;o.a.l.search.payloads.TestPayloadTermQuery.BoostingSimilarity&lt;/li&gt;
		&lt;li&gt;o.a.l.index.TestOmitTf.SimpleSimilarity&lt;/li&gt;
		&lt;li&gt;o.a.l.search.TestSimilarity.SimpleSimilarity&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Other than that I think it is good to go in.&lt;/p&gt;

&lt;p&gt;Also, tests from trunk/lucene and trunk/solr passed.&lt;br/&gt;
(I am seeing problems in running all trunk tests, at least on Windows, but I&apos;ll send a separate mail to the list on that)&lt;/p&gt;</comment>
                    <comment id="13010672" author="rcmuir" created="Thu, 24 Mar 2011 13:46:30 +0000"  >&lt;p&gt;Thanks, I agree the tests look messy/lazy... I&apos;ll fix these (well I think I would like to delay the solr one until &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-2338&quot; title=&quot;improved per-field similarity integration into schema.xml&quot;&gt;&lt;del&gt;SOLR-2338&lt;/del&gt;&lt;/a&gt;, i fixed the MockConfigurableSimilarity in that patch already)&lt;/p&gt;</comment>
                    <comment id="13011204" author="rcmuir" created="Fri, 25 Mar 2011 14:01:30 +0000"  >&lt;p&gt;Committed revision 1085374.&lt;/p&gt;

&lt;p&gt;I cleaned up all the tests as Doron suggested, except for the solr MockConfigurableSimilarity as I discussed (since solr scoring is not yet per-field, but i have a patch for this that fixes the naming issues there too).&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12496998">SOLR-2338</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12474413" name="LUCENE-2986.patch" size="29309" author="rcmuir" created="Wed, 23 Mar 2011 16:50:09 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 24 Mar 2011 06:08:25 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10894</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24706</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>