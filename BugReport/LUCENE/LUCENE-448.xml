<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:13:54 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-448/LUCENE-448.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-448] optional norms</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-448</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;For applications with many indexed fields, the norms cause memory problems both during indexing and querying.&lt;br/&gt;
This patch makes norms optional on a per-field basis, in the same way that term vectors are optional per-field.&lt;/p&gt;

&lt;p&gt;Overview of changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Field.omitNorms that defaults to false&lt;/li&gt;
	&lt;li&gt;backward compatible lucene file format change: FieldInfos.FieldBits has a bit for omitNorms&lt;/li&gt;
	&lt;li&gt;IndexReader.hasNorms() method&lt;/li&gt;
	&lt;li&gt;During merging, if any segment includes norms, then norms are included.&lt;/li&gt;
	&lt;li&gt;methods to get norms return the equivalent 1.0f array for backward compatibility&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The patch was designed for backward compatibility:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;all current unit tests pass w/o any modifications required&lt;/li&gt;
	&lt;li&gt;compatible with old indexes since the default is omitNorms=false&lt;/li&gt;
	&lt;li&gt;compatible with older/custom subclasses of IndexReader since a default hasNorms() is provided&lt;/li&gt;
	&lt;li&gt;compatible with older/custom users of IndexReader such as Weight/Scorer/explain since a norm array is produced on demand, even if norms were not stored&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If this patch is accepted (or if the direction is acceptable), performance for scoring  could be improved by assuming 1.0f when hasNorms(field)==false.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12317749">LUCENE-448</key>
            <summary>optional norms</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="yseeley@gmail.com">Yonik Seeley</assignee>
                                <reporter username="yseeley@gmail.com">Yonik Seeley</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Oct 2005 01:56:51 +0100</created>
                <updated>Thu, 2 Jun 2011 23:03:38 +0100</updated>
                    <resolved>Sat, 29 Oct 2005 14:15:11 +0100</resolved>
                                                            <component>core/index</component>
                        <due></due>
                    <votes>4</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12356017" author="cutting" created="Thu, 27 Oct 2005 07:46:50 +0100"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;This can greatly reduce the amount of memory used by indexes with lots of fields.&lt;/p&gt;

&lt;p&gt;It might be nice to add something like a Field.Index.NO_NORMS, that assumes un-tokenized...&lt;/p&gt;</comment>
                    <comment id="12356034" author="yseeley@gmail.com" created="Thu, 27 Oct 2005 11:10:45 +0100"  >&lt;p&gt;&amp;gt; It might be nice to add something like a Field.Index.NO_NORMS, that assumes un-tokenized...&lt;/p&gt;

&lt;p&gt;Good idea... un-tokenized fields don&apos;t need a lengthNorm anyway.&lt;/p&gt;

&lt;p&gt;Minor Q: Should fakeNorms() exist on IndexReader (as is now), or simply be private to both SegmentReader and MultiReader (the only two that need to generate fake norm arrays)?&lt;/p&gt;

&lt;p&gt;Very minor Q: Should the getter/setter currently named isOmitNorms()/setOmitNorms() be renamed... I followed the example of isStoreOffsetWithTermVector(), but omitNorms()/omitNorms(boolean)  reads nicer in code.&lt;/p&gt;</comment>
                    <comment id="12356100" author="cutting" created="Fri, 28 Oct 2005 02:07:37 +0100"  >&lt;p&gt;Un-tokenized fields don&apos;t need a lengthNorm, but they can be boosted.  So it should be well documented that disabling norms disables boosting.&lt;/p&gt;

&lt;p&gt;I&apos;d hide fakeNorms().  If user code shouldn&apos;t call it, then it shouldn&apos;t appear in the javadoc.  You could make it package-private.  Or, can you not make MultiReader.norms() rely on SegmentReader.norms() to create fake norms as needed?&lt;/p&gt;

&lt;p&gt;As for naming setter/getters: I don&apos;t feel strongly about this.  I sometimes use get/set, even when I might prefer omitting them, simply because it is the fashion and the style police hassle me when I don&apos;t.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12314776" name="omitNorms.txt" size="18253" author="yseeley@gmail.com" created="Sun, 9 Oct 2005 01:57:50 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 27 Oct 2005 06:46:50 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>13301</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>27283</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>