<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:17:05 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3718/LUCENE-3718.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3718] SamplingWrapperTest failure with certain test seed</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3718</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Build: &lt;a href=&quot;https://builds.apache.org/job/Lucene-Solr-tests-only-trunk/12231/&quot; class=&quot;external-link&quot;&gt;https://builds.apache.org/job/Lucene-Solr-tests-only-trunk/12231/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;1 tests failed.&lt;br/&gt;
REGRESSION:  org.apache.lucene.facet.search.SamplingWrapperTest.testCountUsingSamping&lt;/p&gt;

&lt;p&gt;Error Message:&lt;br/&gt;
Results are not the same!&lt;/p&gt;

&lt;p&gt;Stack Trace:&lt;br/&gt;
org.apache.lucene.facet.FacetTestBase$NotSameResultError: Results are not the same!&lt;br/&gt;
       at org.apache.lucene.facet.FacetTestBase.assertSameResults(FacetTestBase.java:333)&lt;br/&gt;
       at org.apache.lucene.facet.search.sampling.BaseSampleTestTopK.assertSampling(BaseSampleTestTopK.java:104)&lt;br/&gt;
       at org.apache.lucene.facet.search.sampling.BaseSampleTestTopK.testCountUsingSamping(BaseSampleTestTopK.java:82)&lt;br/&gt;
       at org.apache.lucene.util.LuceneTestCase$3$1.evaluate(LuceneTestCase.java:529)&lt;br/&gt;
       at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:165)&lt;br/&gt;
       at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:57)&lt;/p&gt;

&lt;p&gt;NOTE: reproduce with: ant test -Dtestcase=SamplingWrapperTest -Dtestmethod=testCountUsingSamping -Dtests.seed=4a5994491f79fc80:-18509d134c89c159:-34f6ecbb32e930f7 -Dtests.multiplier=3 -Dargs=&quot;-Dfile.encoding=UTF-8&quot;&lt;br/&gt;
NOTE: test params are: codec=Lucene40: {$facets=PostingsFormat(name=MockRandom), $full_path$=PostingsFormat(name=MockSep), content=Pulsing40(freqCutoff=19 minBlockSize=65 maxBlockSize=209), $payloads$=PostingsFormat(name=Lucene40WithOrds)}, sim=RandomSimilarityProvider(queryNorm=true,coord=true): {$facets=LM Jelinek-Mercer(0.700000), content=DFR I(n)B3(800.0)}, locale=bg, timezone=Asia/Manila&lt;/p&gt;</description>
                <environment></environment>
            <key id="12539577">LUCENE-3718</key>
            <summary>SamplingWrapperTest failure with certain test seed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="doronc">Doron Cohen</assignee>
                                <reporter username="doronc">Doron Cohen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jan 2012 07:05:09 +0000</created>
                <updated>Fri, 10 May 2013 11:43:56 +0100</updated>
                    <resolved>Tue, 24 Jan 2012 12:40:55 +0000</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/facet</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13191963" author="doronc" created="Tue, 24 Jan 2012 07:07:36 +0000"  >&lt;p&gt;failure consistently recreated with these parameters.&lt;br/&gt;
It is most likely a test bug, but still annoying.&lt;br/&gt;
Should also rename misspelled method - should be: testCountUsingSampling()&lt;/p&gt;</comment>
                    <comment id="13192031" author="doronc" created="Tue, 24 Jan 2012 09:19:18 +0000"  >&lt;p&gt;well this is not a test bug after all, but rather exposing a bug in Lucene40PostingsReader.&lt;/p&gt;</comment>
                    <comment id="13192034" author="doronc" created="Tue, 24 Jan 2012 09:27:39 +0000"  >&lt;p&gt;Attached simple fix to Lucene40PostingsReader: linearScan() should set doc also when returning refill().&lt;/p&gt;</comment>
                    <comment id="13192039" author="simonw" created="Tue, 24 Jan 2012 09:39:59 +0000"  >&lt;p&gt;+1 good catch&lt;/p&gt;</comment>
                    <comment id="13192041" author="doronc" created="Tue, 24 Jan 2012 09:47:53 +0000"  >&lt;p&gt;updated patch with same fix also in AllDocsSegmentDocsEnum.linearScan() (previous patch fixed only LiveDocsSegmentDocsEnum.linearScan()).&lt;/p&gt;

&lt;p&gt;I also verified that this facets test does not fail in 3x with same seed.&lt;/p&gt;</comment>
                    <comment id="13192043" author="rcmuir" created="Tue, 24 Jan 2012 09:59:17 +0000"  >&lt;p&gt;+1 to commit. this is a good test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13192046" author="doronc" created="Tue, 24 Jan 2012 10:03:03 +0000"  >&lt;p&gt;Fix committed in r1235190 (trunk).&lt;br/&gt;
Added no CHANGES entry - seems to me an overkill here... other opinions?&lt;/p&gt;</comment>
                    <comment id="13192098" author="doronc" created="Tue, 24 Jan 2012 12:40:55 +0000"  >&lt;p&gt;Fixed.&lt;/p&gt;</comment>
                    <comment id="13192155" author="mikemccand" created="Tue, 24 Jan 2012 13:44:45 +0000"  >&lt;p&gt;Wow nice catch!&lt;/p&gt;

&lt;p&gt;I agree we don&apos;t need CHANGES.txt entry for this...&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12511655" name="LUCENE-3718.patch" size="657" author="doronc" created="Tue, 24 Jan 2012 09:47:53 +0000" />
                    <attachment id="12511654" name="LUCENE-3718.patch" size="506" author="doronc" created="Tue, 24 Jan 2012 09:27:39 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 24 Jan 2012 09:39:59 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>225080</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>23980</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>