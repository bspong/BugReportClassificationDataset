<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:20:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3769/LUCENE-3769.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3769] Simplify NRTManager</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3769</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;NRTManager is hairy now, because the applyDeletes is separately passed&lt;br/&gt;
to ctor, passed to maybeReopen, passed to getSearcherManager, etc.&lt;/p&gt;

&lt;p&gt;I think, instead, you should pass it only to the ctor, and if you have&lt;br/&gt;
some cases needing deletes and others not then you can make two&lt;br/&gt;
NRTManagers.  This should be no less efficient than we have today,&lt;br/&gt;
just simpler.&lt;/p&gt;

&lt;p&gt;I think it will also enable NRTManager to subclass ThingyManager&lt;br/&gt;
(&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3761&quot; title=&quot;Generalize SearcherManager&quot;&gt;&lt;del&gt;LUCENE-3761&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12542158">LUCENE-3769</key>
            <summary>Simplify NRTManager</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2012 17:21:12 +0000</created>
                <updated>Fri, 10 May 2013 11:44:50 +0100</updated>
                    <resolved>Mon, 13 Feb 2012 19:35:08 +0000</resolved>
                                            <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13205563" author="mikemccand" created="Fri, 10 Feb 2012 17:28:54 +0000"  >&lt;p&gt;Patch; this is a great simplification of the NRTMgr API, and I think sets it up for ThingyManager.&lt;/p&gt;

&lt;p&gt;But: I had to introduce TrackingIndexWriter, which just wraps an IndexWriter and tracks the changes made through it (as a generation).  Previously NRTManager did this all itself, but now you may need to share this tracking across 2 NRTManagers so I had to pull it out... &lt;/p&gt;</comment>
                    <comment id="13205583" author="simonw" created="Fri, 10 Feb 2012 17:57:55 +0000"  >&lt;p&gt;mike, I like the simplification. I think we talked about this last time we touched this code already. I think this is the most common use-case... Yet, I don&apos;t think NRTManager should expose IndexSearcher directly. Think of an app that either uses NRT or commit / reopen ie. uses a NRTManager and a PlainOldIndexManager. From a user perspective SearcherManager is the main interface to search the index no matter how you commit / flush / NRT etc. I&apos;d rather keep it exposing the SM instead. &lt;/p&gt;

&lt;p&gt;about TrackingIndexWriter - I think we should fix IW to use seq ids eventually but I think for this purpose its fine.&lt;/p&gt;</comment>
                    <comment id="13205609" author="mikemccand" created="Fri, 10 Feb 2012 18:29:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;Yet, I don&apos;t think NRTManager should expose IndexSearcher directly. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Hmm, but the example you raised will be addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3761&quot; title=&quot;Generalize SearcherManager&quot;&gt;&lt;del&gt;LUCENE-3761&lt;/del&gt;&lt;/a&gt;, right?  Ie at that point, both SM and NRTM are ThingyManager&amp;lt;IndexSearcher&amp;gt;?&lt;/p&gt;

&lt;p&gt;I don&apos;t like the extra indirection (you get an SM from NRTM) because now you have two linked instances.  For example, it opens up the risk that the app will (incorrectly) call SM.maybeReopen instead of NRTM.maybeReopen.  I think having the one manager to work with is less dangerous...&lt;/p&gt;</comment>
                    <comment id="13205635" author="simonw" created="Fri, 10 Feb 2012 18:55:19 +0000"  >&lt;blockquote&gt;&lt;p&gt;Hmm, but the example you raised will be addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3761&quot; title=&quot;Generalize SearcherManager&quot;&gt;&lt;del&gt;LUCENE-3761&lt;/del&gt;&lt;/a&gt;, right? Ie at that point, both SM and NRTM are ThingyManager&amp;lt;IndexSearcher&amp;gt;?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think NRTM should delegate rather than subclass. It serves two different purposes and we shouldn&apos;t try to couple tight if not needed.&lt;/p&gt;</comment>
                    <comment id="13206270" author="mikemccand" created="Sat, 11 Feb 2012 21:33:46 +0000"  >&lt;p&gt;New patch, exposing the private SearcherManager via&lt;br/&gt;
getSearcherManager.&lt;/p&gt;

&lt;p&gt;I really don&apos;t like the trappiness, ie that an app will mistakenly&lt;br/&gt;
call SM.maybeReopen instead of NRTM.maybeReopen, thus silently causing&lt;br/&gt;
threads to hang....  But I think once &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3761&quot; title=&quot;Generalize SearcherManager&quot;&gt;&lt;del&gt;LUCENE-3761&lt;/del&gt;&lt;/a&gt; is in we can fix&lt;br/&gt;
this... I&apos;ll open a separate issue to address this....&lt;/p&gt;

&lt;p&gt;I think this is ready!&lt;/p&gt;</comment>
                    <comment id="13206433" author="simonw" created="Sun, 12 Feb 2012 15:38:39 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think this is ready!&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 I think this gets further improved once &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3761&quot; title=&quot;Generalize SearcherManager&quot;&gt;&lt;del&gt;LUCENE-3761&lt;/del&gt;&lt;/a&gt; is in. thanks mike&lt;/p&gt;</comment>
                    <comment id="13206434" author="simonw" created="Sun, 12 Feb 2012 15:39:33 +0000"  >&lt;p&gt;one question, who is &quot;MJB&quot; in the changes.txt?&lt;/p&gt;</comment>
                    <comment id="13207078" author="mikemccand" created="Mon, 13 Feb 2012 19:01:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;one question, who is &quot;MJB&quot; in the changes.txt?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Oh, it&apos;s someone who found the applyDeletes logic confusing... s/he was asking about it in the comments near the end, here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-is-fast.html&quot; class=&quot;external-link&quot;&gt;http://blog.mikemccandless.com/2011/06/lucenes-near-real-time-search-is-fast.html&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="13207113" author="mikemccand" created="Mon, 13 Feb 2012 19:35:08 +0000"  >&lt;p&gt;I&apos;ll open follow-on issue for the nasty trap...&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12514233" name="LUCENE-3769.patch" size="37239" author="mikemccand" created="Sat, 11 Feb 2012 21:33:45 +0000" />
                    <attachment id="12514123" name="LUCENE-3769.patch" size="36718" author="mikemccand" created="Fri, 10 Feb 2012 17:28:54 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 10 Feb 2012 17:57:55 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>227446</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>23930</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>