<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:08:10 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2756/LUCENE-2756.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2756] MultiSearcher.rewrite() incorrectly rewrites queries</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2756</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;This was reported on the userlist, in the context of range queries.&lt;/p&gt;

&lt;p&gt;Its also easy to make our existing tests fail with my patch on &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2751&quot; title=&quot;add LuceneTestCase.newSearcher()&quot;&gt;&lt;del&gt;LUCENE-2751&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant test-core -Dtestcase=TestBoolean2 -Dtestmethod=testRandomQueries -Dtests.seed=7679849347282878725:-903778383189134045
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The fundamental problem is that MultiSearcher first rewrites against individual subs, &lt;br/&gt;
then uses Query.combine() which simply OR&apos;s these sub-clauses.&lt;/p&gt;

&lt;p&gt;This is incorrect for expanded MUST_NOT queries (e.g. from wildcard), as it violates demorgan&apos;s law.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12479795">LUCENE-2756</key>
            <summary>MultiSearcher.rewrite() incorrectly rewrites queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Nov 2010 13:00:55 +0000</created>
                <updated>Sat, 14 May 2011 08:37:53 +0100</updated>
                    <resolved>Tue, 11 Jan 2011 00:22:23 +0000</resolved>
                                            <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12931385" author="rcmuir" created="Fri, 12 Nov 2010 13:04:18 +0000"  >&lt;p&gt;attached is a simple test, it adds a single document &quot;foo bar&quot; to one index,&lt;br/&gt;
and another document &quot;foo baz&quot; to another.&lt;/p&gt;

&lt;p&gt;if you do the query &quot;+foo -ba*&quot;, the multisearcher rewrites this to:&lt;br/&gt;
(+field:foo -field:baz) (+field:foo -field:bar)&lt;/p&gt;

&lt;p&gt;This causes both documents to match the query, when really neither should.&lt;br/&gt;
instead the query should be (+field:foo -field:baz -field:bar)&lt;/p&gt;

&lt;p&gt;if you run the test with -Dtests.verbose=true you can see the rewritten form.&lt;/p&gt;

&lt;p&gt;the reason this only appeared with a certain document count for the issue on the&lt;br/&gt;
user&apos;s list is because they were using CONSTANT_SCORE_AUTO and with that&lt;br/&gt;
document count it was deciding to use a constant-score boolean rewrite method.&lt;/p&gt;</comment>
                    <comment id="12979865" author="mikemccand" created="Tue, 11 Jan 2011 00:22:23 +0000"  >&lt;p&gt;MultiSearcher is now deprecated/removed.&lt;/p&gt;</comment>
                    <comment id="13013414" author="gsingers" created="Wed, 30 Mar 2011 16:50:15 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310000">
                <name>Duplicate</name>
                                                <inwardlinks description="is duplicated by">
                            <issuelink>
            <issuekey id="12507205">LUCENE-3096</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                        <issuelinktype id="12310051">
                <name>Supercedes</name>
                                                <inwardlinks description="is superceded by">
                            <issuelink>
            <issuekey id="12494204">LUCENE-2837</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12459447" name="LUCENE-2756_testcase.patch" size="2297" author="rcmuir" created="Fri, 12 Nov 2010 13:04:18 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 11 Jan 2011 00:22:23 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11095</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24936</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>