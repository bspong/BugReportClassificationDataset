<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:05:51 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3404/LUCENE-3404.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3404] testIWondiskfull checkindex failure</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3404</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;looks like charlie cron created a corrupt index on disk full.. can&apos;t reproduce with the seed on this machine, i can try on that VM with the same environment and see if i have better luck.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12520433">LUCENE-3404</key>
            <summary>testIWondiskfull checkindex failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Aug 2011 14:31:05 +0100</created>
                <updated>Sun, 27 Nov 2011 12:31:37 +0000</updated>
                    <resolved>Sat, 27 Aug 2011 16:33:53 +0100</resolved>
                                            <fixVersion>3.4</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13092292" author="rcmuir" created="Sat, 27 Aug 2011 14:31:15 +0100"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testsuite: org.apache.lucene.index.TestIndexWriterOnDiskFull
    [junit] Testcase: testAddIndexOnDiskFull(org.apache.lucene.index.TestIndexWriterOnDiskFull):	Caused an ERROR
    [junit] CheckIndex failed
    [junit] java.lang.RuntimeException: CheckIndex failed
    [junit] 	at org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:162)
    [junit] 	at org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:148)
    [junit] 	at org.apache.lucene.store.MockDirectoryWrapper.close(MockDirectoryWrapper.java:485)
    [junit] 	at org.apache.lucene.index.TestIndexWriterOnDiskFull.testAddIndexOnDiskFull(TestIndexWriterOnDiskFull.java:429)
    [junit] 	at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:148)
    [junit] 	at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:50)
    [junit] 
    [junit] 
    [junit] Tests run: 4, Failures: 0, Errors: 1, Time elapsed: 0.515 sec
    [junit] 
    [junit] ------------- Standard Output ---------------
    [junit] CheckIndex failed
    [junit] Segments file=segments_2 numSegments=26 version=4.0 format=FORMAT_4_0 [Lucene 4.0]
    [junit]   1 of 26: name=_m docCount=38
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.004
    [junit]     diagnostics = {optimize=false, mergeFactor=10, os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=merge, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [77 terms; 114 terms/docs pairs; 114 tokens]
    [junit]     test: stored fields.......OK [76 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [1 total vector count; avg 0.026 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   2 of 26: name=_l docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   3 of 26: name=_n docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=false
    [junit]     hasProx=true
    [junit]     numFiles=9
    [junit]     size (MB)=0
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   4 of 26: name=_o docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [1 total vector count; avg 0.5 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   5 of 26: name=_p docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   6 of 26: name=_q docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   7 of 26: name=_r docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=false
    [junit]     hasProx=true
    [junit]     numFiles=9
    [junit]     size (MB)=0
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   8 of 26: name=_s docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   9 of 26: name=_t docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=false
    [junit]     hasProx=true
    [junit]     numFiles=9
    [junit]     size (MB)=0
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   10 of 26: name=_u docCount=2
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [5 terms; 6 terms/docs pairs; 6 tokens]
    [junit]     test: stored fields.......OK [4 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   11 of 26: name=_v docCount=1
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [3 terms; 3 terms/docs pairs; 3 tokens]
    [junit]     test: stored fields.......OK [2 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   12 of 26: name=_w docCount=25
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=false
    [junit]     hasProx=true
    [junit]     numFiles=12
    [junit]     size (MB)=0.003
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [51 terms; 75 terms/docs pairs; 75 tokens]
    [junit]     test: stored fields.......OK [50 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [4 total vector count; avg 0.16 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   13 of 26: name=_x docCount=25
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=false
    [junit]     hasProx=true
    [junit]     numFiles=12
    [junit]     size (MB)=0.003
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [51 terms; 75 terms/docs pairs; 75 tokens]
    [junit]     test: stored fields.......OK [50 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [2 total vector count; avg 0.08 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   14 of 26: name=_y docCount=25
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.003
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [51 terms; 75 terms/docs pairs; 75 tokens]
    [junit]     test: stored fields.......OK [50 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [7 total vector count; avg 0.28 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   15 of 26: name=_z docCount=6
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [13 terms; 18 terms/docs pairs; 18 tokens]
    [junit]     test: stored fields.......OK [12 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [2 total vector count; avg 0.333 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   16 of 26: name=_10 docCount=6
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit] FAILED
    [junit]     WARNING: fixIndex() would remove reference to this segment; full exception:
    [junit] java.io.IOException: Read past EOF
    [junit] 	at org.apache.lucene.store.RAMInputStream.switchCurrentBuffer(RAMInputStream.java:92)
    [junit] 	at org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:65)
    [junit] 	at org.apache.lucene.store.DataInput.readInt(DataInput.java:73)
    [junit] 	at org.apache.lucene.store.MockIndexInputWrapper.readInt(MockIndexInputWrapper.java:123)
    [junit] 	at org.apache.lucene.store.CompoundFileDirectory.readEntries(CompoundFileDirectory.java:102)
    [junit] 	at org.apache.lucene.store.CompoundFileDirectory.&amp;lt;init&amp;gt;(CompoundFileDirectory.java:67)
    [junit] 	at org.apache.lucene.index.SegmentInfo.loadFieldInfos(SegmentInfo.java:269)
    [junit] 	at org.apache.lucene.index.SegmentInfo.getFieldInfos(SegmentInfo.java:325)
    [junit] 	at org.apache.lucene.index.SegmentInfo.getHasProx(SegmentInfo.java:582)
    [junit] 	at org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:496)
    [junit] 	at org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:158)
    [junit] 	at org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:148)
    [junit] 	at org.apache.lucene.store.MockDirectoryWrapper.close(MockDirectoryWrapper.java:485)
    [junit] 	at org.apache.lucene.index.TestIndexWriterOnDiskFull.testAddIndexOnDiskFull(TestIndexWriterOnDiskFull.java:429)
    [junit] 	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [junit] 	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    [junit] 	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    [junit] 	at java.lang.reflect.Method.invoke(Method.java:597)
    [junit] 	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    [junit] 	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    [junit] 	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    [junit] 	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:21)
    [junit] 	at org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:48)
    [junit] 	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:29)
    [junit] 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    [junit] 	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    [junit] 	at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:148)
    [junit] 	at org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:50)
    [junit] 	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:194)
    [junit] 	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:53)
    [junit] 	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    [junit] 	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    [junit] 	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:185)
    [junit] 	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:29)
    [junit] 	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    [junit] 	at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    [junit] 	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:40)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)
    [junit] 	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:746)
    [junit] 
    [junit]   17 of 26: name=_11 docCount=6
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [13 terms; 18 terms/docs pairs; 18 tokens]
    [junit]     test: stored fields.......OK [12 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   18 of 26: name=_12 docCount=6
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [13 terms; 18 terms/docs pairs; 18 tokens]
    [junit]     test: stored fields.......OK [12 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   19 of 26: name=_13 docCount=1
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [3 terms; 3 terms/docs pairs; 3 tokens]
    [junit]     test: stored fields.......OK [2 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   20 of 26: name=_14 docCount=4
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]
    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   21 of 26: name=_15 docCount=4
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]
    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [1 total vector count; avg 0.25 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   22 of 26: name=_16 docCount=4
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]
    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [1 total vector count; avg 0.25 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   23 of 26: name=_17 docCount=4
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]
    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [1 total vector count; avg 0.25 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   24 of 26: name=_18 docCount=4
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {optimize=false, mergeFactor=1, os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=merge, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]
    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [1 total vector count; avg 0.25 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   25 of 26: name=_19 docCount=4
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0.001
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [9 terms; 12 terms/docs pairs; 12 tokens]
    [junit]     test: stored fields.......OK [8 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit]   26 of 26: name=_1a docCount=1
    [junit]     codec=SegmentCodecs [codecs=[Standard(minBlockSize=67 maxBlockSize=135), SimpleText], provider=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}]
    [junit]     compound=true
    [junit]     hasProx=true
    [junit]     numFiles=2
    [junit]     size (MB)=0
    [junit]     diagnostics = {os.version=2.6.32-24-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=i386, java.version=1.6.0_20, java.vendor=Oracle Corporation}
    [junit]     no deletions
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [2 fields]
    [junit]     test: field norms.........OK [2 fields]
    [junit]     test: terms, freq, prox...OK [3 terms; 3 terms/docs pairs; 3 tokens]
    [junit]     test: stored fields.......OK [2 total field count; avg 2 fields per doc]
    [junit]     test: term vectors........OK [0 total vector count; avg 0 term/freq vector fields per doc]
    [junit]     test: DocValues........OK [0 total doc Count; Num DocValues Fields 0
    [junit] 
    [junit] WARNING: 1 broken segments (containing 6 documents) detected
    [junit] 
    [junit] ------------- ---------------- ---------------
    [junit] ------------- Standard Error -----------------
    [junit] NOTE: reproduce with: ant test -Dtestcase=TestIndexWriterOnDiskFull -Dtestmethod=testAddIndexOnDiskFull -Dtests.seed=-701a2f1db029fc68:-69e1d358129f80b8:-37e6e82cd17aa6e9 -Dtests.multiplier=3
    [junit] NOTE: test params are: codec=RandomCodecProvider: {id=SimpleText, field=MockSep, f=MockRandom, content=Standard(minBlockSize=67 maxBlockSize=135)}, locale=ar_SD, timezone=Brazil/DeNoronha
    [junit] NOTE: all tests run in this JVM:
    [junit] [TestNumericTokenStream, TestFlex, TestFlushByRamOrCountsPolicy, TestIndexReaderCloneNorms, TestIndexWriterDelete, TestIndexWriterMerging, TestIndexWriterOnDiskFull]
    [junit] NOTE: Linux 2.6.32-24-generic i386/Oracle Corporation 1.6.0_20 (32-bit)/cpus=1,threads=1,free=22929736,total=96641024
    [junit] ------------- ---------------- ---------------
    [junit] TEST org.apache.lucene.index.TestIndexWriterOnDiskFull FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13092293" author="rcmuir" created="Sat, 27 Aug 2011 14:32:43 +0100"  >&lt;p&gt;At revision 1162298.&lt;/p&gt;</comment>
                    <comment id="13092295" author="rcmuir" created="Sat, 27 Aug 2011 14:33:55 +0100"  >&lt;p&gt;OK: seed reproduces if you &apos;svn up -r 1162298&apos; first!&lt;/p&gt;</comment>
                    <comment id="13092306" author="mikemccand" created="Sat, 27 Aug 2011 16:06:49 +0100"  >&lt;p&gt;OK I found the problem &amp;#8211; it&apos;s because we are incorrectly passing true instead of false, as the first arg to IOUtils.closeSafely in IW.copySegmentIntoCFS.  This then suppresses an exception (that corrupted the .cfe file being written), thus making the rest of the code think everything is fine...&lt;/p&gt;

&lt;p&gt;I looked at all other places we call this method and there were a few other cases.&lt;/p&gt;

&lt;p&gt;I think this is trappy &amp;#8211; instead of a boolean, I think we should rename IOUtils.closeSafely into 2 methods: closeSafelyDuringExc, and closeSafely.&lt;/p&gt;</comment>
                    <comment id="13092307" author="mikemccand" created="Sat, 27 Aug 2011 16:08:45 +0100"  >&lt;p&gt;Patch, fixing the issue and the other places where we incorrectly passed true.&lt;/p&gt;

&lt;p&gt;But I want to do another iter with the renaming...&lt;/p&gt;</comment>
                    <comment id="13092308" author="mikemccand" created="Sat, 27 Aug 2011 16:12:10 +0100"  >&lt;p&gt;Actually I&apos;ll commit this fix first, and open a separate issue about not using a boolean here.&lt;/p&gt;</comment>
                    <comment id="13092309" author="rcmuir" created="Sat, 27 Aug 2011 16:16:29 +0100"  >&lt;blockquote&gt;
&lt;p&gt;I think this is trappy &#8211; instead of a boolean, I think we should rename IOUtils.closeSafely into 2 methods: closeSafelyDuringExc, and closeSafely.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds like the other one should be called .closeUnsafely...&lt;/p&gt;</comment>
                    <comment id="13092316" author="mikemccand" created="Sat, 27 Aug 2011 16:33:53 +0100"  >&lt;p&gt;Fixed.&lt;/p&gt;

&lt;p&gt;3.x didn&apos;t have any problems; just test-only changes backported.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12491962" name="LUCENE-3404.patch" size="7197" author="mikemccand" created="Sat, 27 Aug 2011 16:08:45 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sat, 27 Aug 2011 15:06:49 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2706</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24292</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>