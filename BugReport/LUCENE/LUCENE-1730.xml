<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:05:29 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1730/LUCENE-1730.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1730] TrecContentSource should use a fixed encoding, rather than system dependent</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1730</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;TrecContentSource opens InputStreamReader w/o a fixed encoding. On Windows, this means CP1252 (at least on my machine) which is ok. However, when I opened it on a Linux machine w/ a default of UTF-8, it failed to read the files. The patch changes it to use ISO-8859-1, which seems to be the right one (and &lt;a href=&quot;http://mg4j.dsi.unimi.it/man/manual/ch01s04.html&quot; class=&quot;external-link&quot;&gt;http://mg4j.dsi.unimi.it/man/manual/ch01s04.html&lt;/a&gt; mentions this encoding in its example of a script which reads the data).&lt;/p&gt;

&lt;p&gt;Patch to follow shortly.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12429392">LUCENE-1730</key>
            <summary>TrecContentSource should use a fixed encoding, rather than system dependent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                <reporter username="shaie">Shai Erera</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Jul 2009 15:12:13 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:28 +0100</updated>
                    <resolved>Mon, 6 Jul 2009 16:57:18 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>modules/benchmark</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12726491" author="shaie" created="Thu, 2 Jul 2009 15:14:35 +0100"  >&lt;p&gt;All tests pass.&lt;/p&gt;</comment>
                    <comment id="12726492" author="markrmiller@gmail.com" created="Thu, 2 Jul 2009 15:15:31 +0100"  >&lt;p&gt;nice catch&lt;/p&gt;</comment>
                    <comment id="12726493" author="shaie" created="Thu, 2 Jul 2009 15:18:21 +0100"  >&lt;p&gt;Thanks. Took me a while to think in that direction (I was sure UTF-8 is what&apos;s used in the code &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;/p&gt;</comment>
                    <comment id="12726507" author="markrmiller@gmail.com" created="Thu, 2 Jul 2009 15:52:21 +0100"  >&lt;p&gt;I think that it makes sense to make the default the encoding the one that trec typically/always uses, but we should probably make this configurable from the alg file. We don&apos;t want to be locked down to one input encoding. Could be done in another issue though. Should allow that for the other contentsources as well.&lt;/p&gt;</comment>
                    <comment id="12726582" author="shaie" created="Thu, 2 Jul 2009 18:56:57 +0100"  >&lt;p&gt;I don&apos;t understand - the change is in TrecContentSource (only), which reads the TREC collection, which is encoded in ISO-8859-1. Why should it be configurable? Only if someone will read it and write it back in, say, UTF-8, it would make sense to make it configurable, right? Or am I missing something?&lt;/p&gt;</comment>
                    <comment id="12726596" author="markrmiller@gmail.com" created="Thu, 2 Jul 2009 19:13:53 +0100"  >&lt;p&gt;The trec data you are using is ISO-8859-1. Wouldn&apos;t it be conceivable that they might change the encoding to UTF-8 at some point? Or that someone else has created trec compatible data in another encoding? Or trec has data in different encodings? If something reads a source of files, and the files could technically be in any encoding, I would expect things to be configurable so that I can specify what encoding the files are in. It just seems like a good standard feature with something that reads what are essentially pluggable files. The format is going to be consistent, but why would the encoding necessarily be consistent?&lt;/p&gt;</comment>
                    <comment id="12726612" author="shaie" created="Thu, 2 Jul 2009 19:36:42 +0100"  >&lt;p&gt;You&apos;re right, I didn&apos;t think in that direction. I&apos;ll make it configurable, shouldn&apos;t be a problem. And if it makes sense (and I think it is), I&apos;ll put the config parameter on ContentSource.&lt;/p&gt;

&lt;p&gt;Will post a second patch soon.&lt;/p&gt;</comment>
                    <comment id="12726685" author="rcmuir" created="Thu, 2 Jul 2009 22:16:31 +0100"  >&lt;p&gt;I&apos;d like this to be configurable. I used this package to test &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1628&quot; title=&quot;Persian Analyzer&quot;&gt;&lt;del&gt;LUCENE-1628&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;(For this I actually ran it with -Dfile.encoding=UTF-8 to prevent this problem), so its &quot;configurable&quot; already...but not obvious.&lt;/p&gt;</comment>
                    <comment id="12726880" author="shaie" created="Fri, 3 Jul 2009 11:52:16 +0100"  >&lt;p&gt;Added content..source.encoding to ContentSource (default=null) and set it to ISO-8859-1 in TrecContentSource and UTF-8 in LineDocSource (in case someone wants to use a line file that wasn&apos;t created w/ WriteLineDocTask), unless a different encoding is specified.&lt;/p&gt;

&lt;p&gt;Updated CHANGES and Javadocs.&lt;/p&gt;

&lt;p&gt;All tests pass.&lt;/p&gt;</comment>
                    <comment id="12727359" author="shaie" created="Sun, 5 Jul 2009 21:02:45 +0100"  >&lt;p&gt;Any volunteers to help me get it in? I think it&apos;s ready for commit.&lt;/p&gt;</comment>
                    <comment id="12727524" author="markrmiller@gmail.com" created="Mon, 6 Jul 2009 14:44:51 +0100"  >&lt;p&gt;I havn&apos;t patched the code in, but looking at the patch, it looks like you are setting the default &lt;b&gt;after&lt;/b&gt; specifying the encoding to the InputStream?&lt;/p&gt;

&lt;p&gt;+        GZIPInputStream zis = new GZIPInputStream(new FileInputStream(f), BUFFER_SIZE);&lt;br/&gt;
+        reader = new BufferedReader(new InputStreamReader(zis, encoding), BUFFER_SIZE);&lt;/p&gt;

&lt;p&gt;...&lt;/p&gt;

&lt;p&gt;+    if (encoding == null) &lt;/p&gt;
{
+      encoding = &quot;ISO-8859-1&quot;;
+    }</comment>
                    <comment id="12727529" author="shaie" created="Mon, 6 Jul 2009 14:51:41 +0100"  >&lt;p&gt;if (encoding == null) happens in setConfig and the other one in openNextFile() (forgot the exact method name). The patch includes just the changes, w/o the method names, so it may not be obvious just by looking at it.&lt;/p&gt;</comment>
                    <comment id="12727533" author="markrmiller@gmail.com" created="Mon, 6 Jul 2009 14:54:57 +0100"  >&lt;p&gt;Okay, cool. I&apos;ll patch it in, run the tests, and commit later today.&lt;/p&gt;

&lt;p&gt;Thanks Shai.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12412476" name="LUCENE-1730.patch" size="6352" author="shaie" created="Fri, 3 Jul 2009 11:52:16 +0100" />
                    <attachment id="12412395" name="LUCENE-1730.patch" size="1307" author="shaie" created="Thu, 2 Jul 2009 15:14:35 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 2 Jul 2009 14:15:31 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12029</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25996</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>