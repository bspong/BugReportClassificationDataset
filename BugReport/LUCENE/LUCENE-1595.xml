<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:21:53 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1595/LUCENE-1595.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1595] Split DocMaker into ContentSource and DocMaker</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1595</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;This issue proposes some refactoring to the benchmark package. Today, DocMaker has two roles: collecting documents from a collection and preparing a Document object. These two should actually be split up to ContentSource and DocMaker, which will use a ContentSource instance.&lt;/p&gt;

&lt;p&gt;ContentSource will implement all the methods of DocMaker, like getNextDocData, raw size in bytes tracking etc. This can actually fit well w/ 1591, by having a basic ContentSource that offers input stream services, and wraps a file (for example) with a bzip or gzip streams etc.&lt;/p&gt;

&lt;p&gt;DocMaker will implement the makeDocument methods, reusing DocState etc.&lt;/p&gt;

&lt;p&gt;The idea is that collecting the Enwiki documents, for example, should be the same whether I create documents using DocState, add payloads or index additional metadata. Same goes for Trec and Reuters collections, as well as LineDocMaker.&lt;br/&gt;
In fact, if one inspects EnwikiDocMaker and LineDocMaker closely, they are 99% the same and 99% different. Most of their differences lie in the way they read the data, while most of the similarity lies in the way they create documents (using DocState).&lt;br/&gt;
That led to a somehwat bizzare extension of LineDocMaker by EnwikiDocMaker (just the reuse of DocState). Also, other DocMakers do not use that DocState today, something they could have gotten for free with this refactoring proposed.&lt;/p&gt;

&lt;p&gt;So by having a EnwikiContentSource, ReutersContentSource and others (TREC, Line, Simple), I can write several DocMakers, such as DocStateMaker, ConfigurableDocMaker (one which accpets all kinds of config options) and custom DocMakers (payload, facets, sorting), passing to them a ContentSource instance and reuse the same DocMaking algorithm with many content sources, as well as the same ContentSource algorithm with many DocMaker implementations.&lt;/p&gt;

&lt;p&gt;This will also give us the opportunity to perf test content sources alone (i.e., compare bzip, gzip and regular input streams), w/o the overhead of creating a Document object.&lt;/p&gt;

&lt;p&gt;I&apos;ve already done so in my code environment (I extend the benchmark package for my application&apos;s purposes) and I like the flexibility I have. I think this can be a nice contribution to the benchmark package, which can result in some code cleanup as well.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12422634">LUCENE-1595</key>
            <summary>Split DocMaker into ContentSource and DocMaker</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="shaie">Shai Erera</reporter>
                        <labels>
                    </labels>
                <created>Sat, 11 Apr 2009 16:32:19 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:21 +0100</updated>
                    <resolved>Mon, 27 Jul 2009 11:15:21 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>modules/benchmark</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12711577" author="shaie" created="Thu, 21 May 2009 12:41:18 +0100"  >&lt;p&gt;While I change SortableSingleDocMaker I noticed it create a new Random() in getNextDocData(). Shouldn&apos;t that Random be created once? Also, I think it should be created with a seed?&lt;/p&gt;</comment>
                    <comment id="12711581" author="mikemccand" created="Thu, 21 May 2009 12:53:38 +0100"  >&lt;blockquote&gt;&lt;p&gt;While I change SortableSingleDocMaker I noticed it create a new Random() in getNextDocData(). Shouldn&apos;t that Random be created once? Also, I think it should be created with a seed?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;OK, sharing a Random instance seems good.&lt;/p&gt;

&lt;p&gt;Maybe make the seed an optional config?  If it&apos;s not present, let it pick a random seed?&lt;/p&gt;</comment>
                    <comment id="12711583" author="shaie" created="Thu, 21 May 2009 12:56:47 +0100"  >&lt;blockquote&gt;&lt;p&gt;Maybe make the seed an optional config? If it&apos;s not present, let it pick a random seed?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I already went ahead and did that. Only if it&apos;s not present, I chose 13 instead of drawing one every time. That way, runs can be consistent and compared to each other.&lt;/p&gt;</comment>
                    <comment id="12711586" author="shaie" created="Thu, 21 May 2009 12:59:08 +0100"  >&lt;p&gt;BTW, am I allowed to use Java 5 generics in benchmark? Or until 3.0 benchmark should stay on 1.4 as well? I&apos;m asking because I heard a couple of times that contrib is allowed to move to Java 5&lt;/p&gt;</comment>
                    <comment id="12711674" author="mikemccand" created="Thu, 21 May 2009 17:27:09 +0100"  >&lt;p&gt;Probably it&apos;s best to stick w/ 1.4.  Someday, I hope, we will get to 3.0 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12711678" author="markrmiller@gmail.com" created="Thu, 21 May 2009 17:32:27 +0100"  >&lt;p&gt;Right - the back compat for each contrib is completely up to that contrib. In the past though, anything thats 1.4 has stayed 1.4 without good reason so that users are not jolted (probably more out there using java 1.4 than you might think).&lt;/p&gt;

&lt;p&gt;On 3.0, when core goes 1.5, it will make sense to allow 1.5 in all the contribs that are 1.4 now.&lt;/p&gt;</comment>
                    <comment id="12711792" author="shaie" created="Thu, 21 May 2009 21:48:35 +0100"  >&lt;p&gt;Ok I&apos;ll make sure it&apos;s 1.4 compatible then.&lt;/p&gt;</comment>
                    <comment id="12712727" author="shaie" created="Mon, 25 May 2009 15:14:26 +0100"  >&lt;p&gt;Patch includes a new ContentSource class with appropriate extensions for all previously defined DocMakers. DocMaker is a concrete class which creates Documents based on the ContentSource DocData output. It can be configured to reuse fields.&lt;/p&gt;

&lt;p&gt;There are many ContentSource impls now, but only few DocMaker (such as LineDocMaker and EnwikiDocMaker - since their makeDocument() logic is quite simple).&lt;/p&gt;

&lt;p&gt;All tests pass. I also modified all alg files to define content.source instead of doc.maker (default is DocMaker) where appropriate.&lt;/p&gt;

&lt;p&gt;I think we can start iterating on this&lt;/p&gt;</comment>
                    <comment id="12712731" author="markrmiller@gmail.com" created="Mon, 25 May 2009 15:41:48 +0100"  >&lt;p&gt;Just attempted to patch it in - it looks like a bunch of files that don&apos;t exist are in the patch as patches rather than as the new file?&lt;/p&gt;

&lt;p&gt;Having trouble with SingleDocSource, and it looks like half a dozen of the other new files...&lt;/p&gt;
</comment>
                    <comment id="12712734" author="shaie" created="Mon, 25 May 2009 15:47:16 +0100"  >&lt;p&gt;I was afraid that something like that will happen. I used Eclipse refactoring and also Team - &quot;create patch&quot;. That&apos;s the output. Do you use Eclipse to patch it in?&lt;/p&gt;

&lt;p&gt;What should I do with existing classes which I renamed? Add new classes and delete the existing ones? (At least from the eclipse SVN console, that&apos;s what it seems to do when I refactor a class name)&lt;/p&gt;</comment>
                    <comment id="12712737" author="shaie" created="Mon, 25 May 2009 16:09:49 +0100"  >&lt;p&gt;Can you try now?&lt;/p&gt;</comment>
                    <comment id="12712738" author="markrmiller@gmail.com" created="Mon, 25 May 2009 16:15:26 +0100"  >&lt;p&gt;Yes, was using eclipse to patch.&lt;/p&gt;

&lt;p&gt;The patch you just posted appears to work - it compiled and the new files appeared to be created, thanks!&lt;/p&gt;</comment>
                    <comment id="12715059" author="shaie" created="Mon, 1 Jun 2009 12:00:56 +0100"  >&lt;p&gt;Hey Mark, are you reviewing this? Did you catch something interesting so far?&lt;/p&gt;</comment>
                    <comment id="12718060" author="shaie" created="Wed, 10 Jun 2009 14:02:02 +0100"  >&lt;p&gt;Some updates:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Added to PerfTask a log.step config parameter, and implemented in tearDown logging messages. Also introduced a getLogMessage(int recsCount) which can be overridden by sub classes.
	&lt;ul&gt;
		&lt;li&gt;Overrode getLogMessage in the relevant tasks which logged messages, such as AddDocTask, DeleteDocTask, WriteLineDocTask ... I also removed logging from these tasks&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Added ConsumeContentSource task together with a readContent.Source.alg - this can be used to simply read from a content source, if we want to measure the performance of a particular impl.&lt;/li&gt;
	&lt;li&gt;Removed the &quot;xerces&quot; class name from EnwikiContentSource (read more below).&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;I changed EnwikiContentSource to not specifically request for a Xerces SAXParser. However, the default is to use the JRE&apos;s SAXParser, which is Xerces.&lt;/p&gt;

&lt;p&gt;I wanted to remove the Xerces .jar, but when I attempted to read the enwiki-20090306-pages-articles.xml, it failed w/ an AIOOBE, so I don&apos;t think we can remove the .jar yet.&lt;br/&gt;
BTW, in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1591&quot; title=&quot;Enable bzip compression in benchmark&quot;&gt;&lt;del&gt;LUCENE-1591&lt;/del&gt;&lt;/a&gt; I reported that I am not able to parse that particular enwiki version, w/ and w/o Xerces, however Mike succeeded. So I don&apos;t know if this enwiki version is defective, or it&apos;s a problem on Windows.&lt;/p&gt;

&lt;p&gt;Anyway, the bottom line is we cannot remove the Xerces .jar.&lt;/p&gt;

&lt;p&gt;I think this patch is ready for commit. All benchmark tests pass.&lt;/p&gt;</comment>
                    <comment id="12718090" author="markrmiller@gmail.com" created="Wed, 10 Jun 2009 15:21:52 +0100"  >&lt;p&gt;Someone else can nab this from me if they want to go ahead before I get a chance.&lt;/p&gt;

&lt;p&gt;Otherwise, I&apos;ll try and take a look by the end of the weekend. I started looking at it before, but just havn&apos;t yet had a chance to go back to it.&lt;/p&gt;

&lt;p&gt;In either case, we will get it in soon.&lt;/p&gt;</comment>
                    <comment id="12719257" author="markrmiller@gmail.com" created="Sun, 14 Jun 2009 14:18:24 +0100"  >&lt;p&gt;I hope to look at this today. Shai, will this at all invalidate any benchmark algorithms that are already out there?&lt;/p&gt;</comment>
                    <comment id="12719287" author="shaie" created="Sun, 14 Jun 2009 16:40:42 +0100"  >&lt;p&gt;Yes, it will. Basically, DocMaker is now a concrete class which accepts a ContentSource and creates documents out of it. So all the DocMakers were replaced w/ ContentSource (such as Reuters, Trec etc.). I left EnwikiDocMaker and LineDocMaker to create a LineContentSource and EnwikiContentSource, ignoring any content.source parameter that may be set in the config.&lt;/p&gt;

&lt;p&gt;I also updated all the current .alg files to reflect those changes.&lt;/p&gt;

&lt;p&gt;Do you think I should spell it out in CHANGES? Basically the migration is super simple - if you use any doc maker which is not Enwiki or Line, simply rename doc.maker to content.source, and the appropriate ContentSource class.&lt;/p&gt;</comment>
                    <comment id="12719291" author="markrmiller@gmail.com" created="Sun, 14 Jun 2009 16:53:41 +0100"  >&lt;p&gt;I&apos;d love other opinions. &lt;/p&gt;

&lt;p&gt;If we go with it, I think we should def spell it out in the benchmark CHANGES.&lt;/p&gt;

&lt;p&gt;Benchmark has no back compat commitment as far as I see, but we should consider breaking existing algorithms out there very carefully I think. And if there is a way to map the invalid values to values that keep the old behavior, we should def investigate that as well.&lt;/p&gt;</comment>
                    <comment id="12719318" author="shaie" created="Sun, 14 Jun 2009 20:00:06 +0100"  >&lt;p&gt;Well ... depends on what are the &quot;existing algorithms out there&quot;. .alg files that someone wrote which use existing DocMakers (from benchmark) would break, but fixing them is a no brainer (just reference the ContentSource where applicable). .alg files which use custom DocMakers are a bit more challenging, since you&apos;ll need to decide if your DocMaker is a ContentSource, really a DocMaker or both (i.e., split it to DocMaker and ContentSource). Since I haven&apos;t changed the API of DocMaker much, it shouldn&apos;t be a hard task to refactor your custom DocMaker.&lt;/p&gt;

&lt;p&gt;In general. I believe benchmark is not used in production environments, and therefore it shouldn&apos;t be a real problem to adapt your benchmark .alg and/or custom classes to the refactored one. You can also earn by extending DocMaker and using its DocState for a reuse logic. If we say that contrib in general does not need to maintain back-compat, and we&apos;re talking about classes that are in production environments, then I don&apos;t think we have a real issue here.&lt;/p&gt;

&lt;p&gt;I won&apos;t ask how much we believe benchmark is extended (even though it&apos;s important) or used, since this issue was originated from my extension of it. I can only assume that Solr extends it too (or uses it).&lt;/p&gt;
</comment>
                    <comment id="12719351" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 00:13:18 +0100"  >&lt;blockquote&gt;&lt;p&gt;If we say that contrib in general does not need to maintain back-compat, and we&apos;re talking about classes that are in production environments, then I don&apos;t think we have a real issue here.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Contrib does not necessarily have a back compat, but its up to each contrib to determine what its back compat policy is. Even without an explicit policy, we try to do what make sense. Everytime you ignore back compat completely for certain things, you risk alienating certain people. For example, because the highlighter is a semi core type thing, even though we have never made a back compat policy for it, we don&apos;t break back compat there without good reason.&lt;/p&gt;

&lt;p&gt;I agree that the Benchmark contrib comes down on the low end of concern. In fact, I&apos;m not too concerned with breaking back compat anywhere in benchmark except for the algs. Every time we break the algs, we risk causing people who have written custom algs to think twice about writing and maintaining them. Generally, I&apos;d expect things like that to be careful about maintaining back compat or a mode that can run older version algs.&lt;/p&gt;

&lt;p&gt;That said, I&apos;m not saying this change isnt worth a little algorithm disruption. I wouldn&apos;t mind getting the opinion of another committer first though. I doubt too many people even have that many custom algs out there - but thats not a scenioro I want to help and try to perpetuate.&lt;/p&gt;

&lt;p&gt;So its not like I&apos;m sitting here saying this is a huge deal - but I think it should def be considered a bit.&lt;/p&gt;</comment>
                    <comment id="12719374" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 03:39:37 +0100"  >&lt;blockquote&gt;&lt;p&gt;Well ... depends on what are the &quot;existing algorithms out there&quot;. .alg files that someone wrote which use existing DocMakers (from benchmark) would break, but fixing them is a no brainer (just reference the ContentSource where applicable). .alg files which use custom DocMakers are a bit more challenging, since you&apos;ll need to decide if your DocMaker is a ContentSource, really a DocMaker or both (i.e., split it to DocMaker and ContentSource). Since I haven&apos;t changed the API of DocMaker much, it shouldn&apos;t be a hard task to refactor your custom DocMaker. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What about these changes? Are they incompat as well?&lt;/p&gt;

&lt;p&gt;-doc.add.log.step=500&lt;br/&gt;
-doc.delete.log.step=100&lt;br/&gt;
+log.step=500&lt;br/&gt;
+delete.log.step=100&lt;/p&gt;

&lt;p&gt;Sorry, didn&apos;t really get a chance to dig in today as I was feeling a bit under the weather. We will get it in for 2.9.&lt;/p&gt;</comment>
                    <comment id="12719379" author="shaie" created="Mon, 15 Jun 2009 04:31:23 +0100"  >&lt;blockquote&gt;&lt;p&gt;So its not like I&apos;m sitting here saying this is a huge deal - but I think it should def be considered a bit.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I didn&apos;t mean to imply that. In all my recent contributions, back-compat played a major role. I just explained here why here I didn&apos;t give it a second thought, and was actually happy I am more free to make these changes. But I definitely see your point, and would love to get another committer&apos;s opinion too.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;What about these changes? Are they incompat as well?&lt;/p&gt;

&lt;p&gt;-doc.add.log.step=500&lt;br/&gt;
-doc.delete.log.step=100&lt;br/&gt;
+log.step=500&lt;br/&gt;
+delete.log.step=100&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I took another step here, adding code to PerfTask.tearDown() which logs messages, and changed all the current tasks that does it to stop doing it, and instead override a getLogMessage(). That consolidated the logic behind when to log messages, in what format etc. It was not consistent between tasks, and some newer tasks did better job than others.&lt;/p&gt;

&lt;p&gt;With that, I also changed the property name (which was invalid even before - doc.add.log.step wasn&apos;t used just in AddDocTask). About the delete.log.step - I first removed it, relying on the new log.step, but then spotted some .alg which differentiate between when how often to log messages for delete and how often for the rest, so I re-instated it. If you think it matters, I can change revert the name back to doc.delete.log.step.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;We will get it in for 2.9&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Great ! that will relieve some of my custom benchmarking code, and allow me to test on more content sources (today I implemented this model just for TREC for lack of time).&lt;/p&gt;</comment>
                    <comment id="12719555" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 14:43:56 +0100"  >&lt;p&gt;Okay, how about something like this:&lt;/p&gt;

&lt;p&gt;we document up the changes and the conversion processes in the benchmark CHANGES and then, maybe check for removed alg properties in the algorithms and throw an exception pointing people to the CHANGES file if we find one? Or something along those lines?&lt;/p&gt;

&lt;p&gt;I&apos;d like to make the transition as smooth as possible.&lt;/p&gt;</comment>
                    <comment id="12719563" author="shaie" created="Mon, 15 Jun 2009 14:58:46 +0100"  >&lt;p&gt;ok I agree. I&apos;ve already documented CHANGES. I&apos;ll add to PerfTask a deprecated method checkObsoleteSettings which will throw an exception if it finds &quot;doc.add.log.step&quot; and &quot;doc.delete.log.step&quot;. doc.maker is still a valid one, but when you&apos;ll try to cast the argument to a DocMaker, you&apos;ll get an exception, b/c it&apos;s now a concrete class and not interface.&lt;/p&gt;

&lt;p&gt;Does this make sense?&lt;/p&gt;

&lt;p&gt;I&apos;ll post a patch soon.&lt;/p&gt;</comment>
                    <comment id="12719565" author="markrmiller@gmail.com" created="Mon, 15 Jun 2009 15:04:21 +0100"  >&lt;blockquote&gt;&lt;p&gt;Does this make sense?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Okay, sounds good.&lt;/p&gt;

&lt;p&gt;Silence is consent around here, so I think we are good to go with this patch as soon as I go over it a bit. I&apos;ll wait till you post this last one.&lt;/p&gt;</comment>
                    <comment id="12719578" author="shaie" created="Mon, 15 Jun 2009 15:56:30 +0100"  >&lt;p&gt;Patch adds a checkObsoleteSettings to PerfTask to alert on the use of doc.add.log.step and doc.delete.log.step, as well as documentation in CHANGES.&lt;/p&gt;

&lt;p&gt;all benchmark tests pass.&lt;/p&gt;</comment>
                    <comment id="12721039" author="markrmiller@gmail.com" created="Thu, 18 Jun 2009 04:09:57 +0100"  >&lt;p&gt;Added to changes a bit&lt;br/&gt;
Removed modification to core Document class&lt;br/&gt;
updated deletepercent.alg to new alg changes&lt;br/&gt;
fixed a couple comment typos&lt;br/&gt;
set to use content.source.forever rather than doc.maker.forever in ExtractWikipedia#main(String[] args)&lt;br/&gt;
the sort algs don&apos;t work &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; unrelated to this patch and related to our deprecation of the auto sort field - Ryan just hit that over in solr-land too.&lt;/p&gt;

&lt;p&gt;I still want to run some tests with the wikipedia stuff, but still waiting for that mondo file to download &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Looks pretty nice overall, thanks Shai!&lt;/p&gt;</comment>
                    <comment id="12721078" author="shaie" created="Thu, 18 Jun 2009 06:53:21 +0100"  >&lt;blockquote&gt;&lt;p&gt;I still want to run some tests with the wikipedia stuff&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I added readContentSource.alg just for that purpose and ran it over the Wikipedia dump. All documents were read successfully.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Removed modification to core Document class&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Nice ! I don&apos;t know how I missed that getFields().clear() option.&lt;/p&gt;</comment>
                    <comment id="12721311" author="markrmiller@gmail.com" created="Thu, 18 Jun 2009 16:36:52 +0100"  >&lt;blockquote&gt;&lt;p&gt;I added readContentSource.alg just for that purpose and ran it over the Wikipedia dump. All documents were read successfully.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I figured you probably had, but they won&apos;t end up coming after you, they will come after me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; As expected, no issues hit yet though.&lt;/p&gt;


&lt;p&gt;I&apos;ll commit this later today.&lt;/p&gt;</comment>
                    <comment id="12721320" author="shaie" created="Thu, 18 Jun 2009 16:49:39 +0100"  >&lt;blockquote&gt;&lt;p&gt;they won&apos;t end up coming after you, they will come after me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I promise to cover for you if that happens &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;ll commit this later today.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks !&lt;/p&gt;</comment>
                    <comment id="12721441" author="markrmiller@gmail.com" created="Thu, 18 Jun 2009 21:02:39 +0100"  >&lt;p&gt;Thanks Shai, I just committed this.&lt;/p&gt;</comment>
                    <comment id="12735121" author="mikemccand" created="Fri, 24 Jul 2009 19:42:31 +0100"  >&lt;p&gt;Could we remove LineDocMaker entirely, now?  And then move up the doc.random.id.limit into DocMaker (for testing updateDocument performance)?&lt;/p&gt;

&lt;p&gt;I think we could also remove EnwikiDocMaker?  The only different its makeDocument seems to have is that it uses wiki&apos;s name as the id field, rather than incrNumDocsCreated()?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;the sort algs don&apos;t work  unrelated to this patch and related to our deprecation of the auto sort field&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Mark what was this issue?  Was it fixed already?&lt;/p&gt;</comment>
                    <comment id="12735126" author="markrmiller@gmail.com" created="Fri, 24 Jul 2009 20:02:12 +0100"  >&lt;blockquote&gt;&lt;p&gt;Mark what was this issue? Was it fixed already?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes - if you didnt specify a type, it used Auto - but a switch was made to use the new TopField collector, which doesnt resolve auto. I just removed auto support - you must type the field now.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1725&quot; class=&quot;external-link&quot;&gt;https://issues.apache.org/jira/browse/LUCENE-1725&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12735144" author="mikemccand" created="Fri, 24 Jul 2009 21:20:11 +0100"  >&lt;blockquote&gt;&lt;p&gt;I just removed auto support - you must type the field now.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;OK... though it looks like it still falls back to AUTO (in getType()) if it doesn&apos;t recognize the provided type.  I&apos;ll attach a patch shortly, to just accept all types that SortField accepts, and throw an exception if the type isn&apos;t recognized.&lt;/p&gt;</comment>
                    <comment id="12735145" author="mikemccand" created="Fri, 24 Jul 2009 21:20:58 +0100"  >&lt;p&gt;Attached patch.&lt;/p&gt;</comment>
                    <comment id="12735191" author="mikemccand" created="Fri, 24 Jul 2009 23:33:29 +0100"  >&lt;p&gt;Reopening to make sure I remember to commit that patch, and to maybe remove Line/EnwikiDocMaker.&lt;/p&gt;</comment>
                    <comment id="12735233" author="shaie" created="Sat, 25 Jul 2009 04:15:02 +0100"  >&lt;p&gt;I kept Line/EnwikiDocMaker just because they contain very simple logic and are very short. I don&apos;t know if we want to pull the id stuff up to DocMaker since some DocMakers have their own ID (example - TrecDocMaker).&lt;/p&gt;

&lt;p&gt;But I don&apos;t mind removing them. Just, like I said, now they are very optimized for the content source they work on, no extra &apos;ifs&apos; etc. Especially LineDocMaker, which reads a Line file that has only title, date and body. Also notice that both init their own content source.&lt;/p&gt;

&lt;p&gt;But I don&apos;t have a strong feeling for removing/keeping them. Are you going to do it, or shall I?&lt;/p&gt;</comment>
                    <comment id="12735261" author="mikemccand" created="Sat, 25 Jul 2009 11:41:46 +0100"  >&lt;p&gt;My driver here was... updating Lucene in Action to explain all the recent changes to contrib/benchmark, and explaining the tiny differences between these 3 DocMakers was awkward &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  They are &quot;nearly&quot; the same.&lt;/p&gt;

&lt;p&gt;I&apos;ll work up a patch.&lt;/p&gt;</comment>
                    <comment id="12735280" author="mikemccand" created="Sat, 25 Jul 2009 16:14:07 +0100"  >&lt;p&gt;Attached patch that addresses the SortField.AUTO issue, and deprecates&lt;br/&gt;
Line/EnwikiDocMaker.&lt;/p&gt;

&lt;p&gt;I do think we could do some speeding up of the fields handling in&lt;br/&gt;
DocMaker for the reuse case, eg make dedicated members in DocData to&lt;br/&gt;
hold the known fields (id, body, title, etc.) but I think we can wait&lt;br/&gt;
on that for now.&lt;/p&gt;</comment>
                    <comment id="12735283" author="thetaphi" created="Sat, 25 Jul 2009 16:33:31 +0100"  >&lt;p&gt;Just an idea, when redoing the field stuff: maybe we should add the DATE field as a long timestamp (Date.getTime()) using NumericField with default precStep? We could then also do benchmarks on NumericRangeQuery and easily sort by date with type=&quot;long&quot;.&lt;/p&gt;</comment>
                    <comment id="12735298" author="mikemccand" created="Sat, 25 Jul 2009 17:37:30 +0100"  >&lt;blockquote&gt;&lt;p&gt;maybe we should add the DATE field as a long timestamp (Date.getTime()) using NumericField with default precStep?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                                <inwardlinks description="is related to">
                            <issuelink>
            <issuekey id="12414506">LUCENE-1539</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12414516" name="LUCENE-1595.patch" size="20099" author="mikemccand" created="Sat, 25 Jul 2009 16:14:07 +0100" />
                    <attachment id="12414467" name="LUCENE-1595.patch" size="1494" author="mikemccand" created="Fri, 24 Jul 2009 21:20:58 +0100" />
                    <attachment id="12411021" name="LUCENE-1595.patch" size="245662" author="markrmiller@gmail.com" created="Thu, 18 Jun 2009 04:09:57 +0100" />
                    <attachment id="12410679" name="LUCENE-1595.patch" size="247117" author="shaie" created="Mon, 15 Jun 2009 15:56:30 +0100" />
                    <attachment id="12410310" name="LUCENE-1595.patch" size="244981" author="shaie" created="Wed, 10 Jun 2009 14:02:02 +0100" />
                    <attachment id="12408951" name="LUCENE-1595.patch" size="221067" author="shaie" created="Mon, 25 May 2009 16:09:49 +0100" />
                    <attachment id="12408949" name="LUCENE-1595.patch" size="217855" author="shaie" created="Mon, 25 May 2009 15:14:26 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>7.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 21 May 2009 11:53:38 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12160</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26133</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>