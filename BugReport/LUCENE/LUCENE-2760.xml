<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:29:44 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2760/LUCENE-2760.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2760] optimize spanfirstquery, spanpositionrangequery</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2760</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;SpanFirstQuery and SpanPositionRangeQuery (SpanFirst is just a special case of this), are currently inefficient.&lt;/p&gt;

&lt;p&gt;Take this worst case example: SpanFirstQuery(&quot;the&quot;).&lt;br/&gt;
Currently the code reads all the positions for the term &quot;the&quot;.&lt;/p&gt;

&lt;p&gt;But when enumerating spans, once we have passed the allowable range we should move on to the next document (skipTo)&lt;/p&gt;
</description>
                <environment></environment>
            <key id="12479924">LUCENE-2760</key>
            <summary>optimize spanfirstquery, spanpositionrangequery</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Nov 2010 21:27:54 +0000</created>
                <updated>Wed, 30 Mar 2011 16:50:16 +0100</updated>
                    <resolved>Mon, 15 Nov 2010 18:59:35 +0000</resolved>
                                            <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12931892" author="rcmuir" created="Sun, 14 Nov 2010 21:29:39 +0000"  >&lt;p&gt;here&apos;s the patch, the SpanPositionCheckQuery now has logic similar to FilteredTermsEnum,&lt;br/&gt;
instead of returning a boolean true/false for whether a match is acceptable,&lt;br/&gt;
it can return YES, NO, NO_AND_ADVANCE&lt;/p&gt;</comment>
                    <comment id="12931896" author="rcmuir" created="Sun, 14 Nov 2010 21:44:49 +0000"  >&lt;p&gt;Admittedly, I don&apos;t yet have a good benchmarking setup for these spanqueries yet.&lt;/p&gt;

&lt;p&gt;But from doing a quick test on a 125k doc corpus, the SpanFirstQuery on a common term like &quot;the&quot; took&lt;br/&gt;
about half the time.. this is because it read/evaluated 117,556 positions instead of 1,029,622 positions.&lt;/p&gt;</comment>
                    <comment id="12931906" author="rcmuir" created="Sun, 14 Nov 2010 22:21:36 +0000"  >&lt;p&gt;here&apos;s an updated patch, with javadocs.&lt;/p&gt;

&lt;p&gt;additionally i now check for spans.start() &lt;b&gt;&amp;gt;=&lt;/b&gt; end() instead of spans.start() &lt;b&gt;&amp;gt;&lt;/b&gt; end()&lt;/p&gt;

&lt;p&gt;i believe its invalid to have a zero-length span (e.g. for a single term end = start+1)&lt;br/&gt;
I added an assert to check for this, and all tests still pass.&lt;/p&gt;</comment>
                    <comment id="12932107" author="rcmuir" created="Mon, 15 Nov 2010 16:16:15 +0000"  >&lt;p&gt;I&apos;d like to commit this soon if there are no objections.&lt;/p&gt;

&lt;p&gt;these apis (SpanPositionCheckQuery) are new in 3.x/trunk so theres no backwards break&lt;/p&gt;</comment>
                    <comment id="12932146" author="rcmuir" created="Mon, 15 Nov 2010 18:59:35 +0000"  >&lt;p&gt;Committed revision 1035397, 1035411 (3x)&lt;/p&gt;</comment>
                    <comment id="13013422" author="gsingers" created="Wed, 30 Mar 2011 16:50:16 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12459571" name="LUCENE-2760.patch" size="8316" author="rcmuir" created="Sun, 14 Nov 2010 22:21:36 +0000" />
                    <attachment id="12459570" name="LUCENE-2760.patch" size="7637" author="rcmuir" created="Sun, 14 Nov 2010 21:29:39 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 30 Mar 2011 15:50:16 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11091</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24932</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>