<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:04:42 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1737/LUCENE-1737.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1737] Always use bulk-copy when merging stored fields and term vectors</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1737</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Lucene has nice optimizations in place during merging of stored fields&lt;br/&gt;
(&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1043&quot; title=&quot;Speedup merging of stored fields when field mapping &amp;quot;matches&amp;quot;&quot;&gt;&lt;del&gt;LUCENE-1043&lt;/del&gt;&lt;/a&gt;) and term vectors (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1120&quot; title=&quot;Use bulk-byte-copy when merging term vectors&quot;&gt;&lt;del&gt;LUCENE-1120&lt;/del&gt;&lt;/a&gt;) whereby the bytes are&lt;br/&gt;
bulk copied to the new segmetn.  This is much faster than decoding &amp;amp;&lt;br/&gt;
rewriting one document at a time.&lt;/p&gt;

&lt;p&gt;However the optimization is rather brittle: it relies on the mapping&lt;br/&gt;
of field name to number to be the same (&quot;congruent&quot;) for the segment&lt;br/&gt;
being merged.&lt;/p&gt;

&lt;p&gt;Unfortunately, the field mapping will be congruent only if the app&lt;br/&gt;
adds the same fields in precisely the same order to each document.&lt;/p&gt;

&lt;p&gt;I think we should fix IndexWriter to assign the same field number for&lt;br/&gt;
a given field that has been assigned in the past.  Ie, when writing a&lt;br/&gt;
new segment, we pre-seed the field numbers based on past segments.&lt;br/&gt;
All other aspects of FieldInfo would remain fully dynamic.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12429973">LUCENE-1737</key>
            <summary>Always use bulk-copy when merging stored fields and term vectors</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Jul 2009 19:47:48 +0100</created>
                <updated>Wed, 30 Mar 2011 16:50:19 +0100</updated>
                    <resolved>Sun, 19 Dec 2010 10:18:13 +0000</resolved>
                                            <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>3</watches>
                                                    <comments>
                    <comment id="12729382" author="mikemccand" created="Thu, 9 Jul 2009 19:48:04 +0100"  >&lt;p&gt;Clearing 2.9 fix version.&lt;/p&gt;</comment>
                    <comment id="12964459" author="mikemccand" created="Sat, 27 Nov 2010 22:12:11 +0000"  >&lt;p&gt;This turned out to be very simply &amp;#8211; a tiny patch!&lt;/p&gt;</comment>
                    <comment id="12971369" author="mikemccand" created="Tue, 14 Dec 2010 18:51:03 +0000"  >&lt;p&gt;I realized we should fix a few more cases here to use bulk-copy more often.  First, on opening a pre-4.0 index, we should sweep all segments to union the FieldInfos so newly written segments are congruent with all past segments as much as possible.  Second, when merging we should start from the current FieldInfos.&lt;/p&gt;

&lt;p&gt;Even with this, if you addIndexes(Directory[]), which simply copies in new segments, if the fields name-&amp;gt;number assignment on those incoming indices doesn&apos;t match the current index, then when those segments are merged they can&apos;t be bulk copied.&lt;/p&gt;</comment>
                    <comment id="12971370" author="mikemccand" created="Tue, 14 Dec 2010 18:52:21 +0000"  >&lt;p&gt;The fixes above can only be done once we always merge doc stores on merging segments, which will be done in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2814&quot; title=&quot;stop writing shared doc stores across segments&quot;&gt;&lt;del&gt;LUCENE-2814&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    <comment id="12971374" author="mikemccand" created="Tue, 14 Dec 2010 18:55:51 +0000"  >&lt;p&gt;Patch.&lt;/p&gt;

&lt;p&gt;It has one nocommit which we can remove once &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2814&quot; title=&quot;stop writing shared doc stores across segments&quot;&gt;&lt;del&gt;LUCENE-2814&lt;/del&gt;&lt;/a&gt; is in.&lt;/p&gt;</comment>
                    <comment id="13013436" author="gsingers" created="Wed, 30 Mar 2011 16:50:19 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                                <inwardlinks description="is blocked by">
                            <issuelink>
            <issuekey id="12493098">LUCENE-2814</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12466234" name="LUCENE-1737.patch" size="16339" author="mikemccand" created="Tue, 14 Dec 2010 18:55:51 +0000" />
                    <attachment id="12464788" name="LUCENE-1737.patch" size="4393" author="mikemccand" created="Sat, 27 Nov 2010 22:12:11 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 30 Mar 2011 15:50:19 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12022</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25989</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>