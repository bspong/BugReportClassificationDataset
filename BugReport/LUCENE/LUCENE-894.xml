<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:30:33 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-894/LUCENE-894.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-894] Custom build.xml for binary distributions</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-894</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The binary files of a distribution come with the demo sources&lt;br/&gt;
and a build.xml file. However, the build.xml doesn&apos;t work for&lt;br/&gt;
the binary distribution, so it can&apos;t be used to build the &lt;br/&gt;
demos.&lt;/p&gt;

&lt;p&gt;This problem was notices the first time when release 2.1 was&lt;br/&gt;
made. Before we ship 2.2 we should fix this.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12370429">LUCENE-894</key>
            <summary>Custom build.xml for binary distributions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="michaelbusch">Michael Busch</assignee>
                                <reporter username="michaelbusch">Michael Busch</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 May 2007 08:13:39 +0100</created>
                <updated>Tue, 19 Jun 2007 09:14:56 +0100</updated>
                    <resolved>Mon, 4 Jun 2007 05:07:08 +0100</resolved>
                            <version>2.1</version>
                                <fixVersion>2.2</fixVersion>
                                <component>general/build</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12499706" author="michaelbusch" created="Tue, 29 May 2007 08:28:42 +0100"  >&lt;p&gt;This patch adds the new file &quot;build-demo.xml&quot; to the root directory. It &lt;br/&gt;
becomes included in the binary distributions during packaging as &quot;build.xml&quot;.&lt;/p&gt;

&lt;p&gt;It offers the targets &quot;compile-demo&quot;, &quot;jar-demo&quot;, &quot;war-demo&quot;. This patch also &lt;br/&gt;
includes &quot;common-build.xml&quot; in the binary distributions because &lt;br/&gt;
&quot;build-demo.xml&quot; imports it. &lt;/p&gt;

&lt;p&gt;One drawback might be the following (or maybe not a big deal?):&lt;br/&gt;
if you enter &quot;ant -projecthelp&quot; it shows you also the imported targets from&lt;br/&gt;
common-build.xml like &quot;common.jar-core&quot;, which are not needed (and not &lt;br/&gt;
working) for the binaries. Is there a way to hide a subset of the imported &lt;br/&gt;
targets? I admit that I am not the greatest ant expert ever &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, so help is &lt;br/&gt;
highly appreciated.&lt;/p&gt;</comment>
                    <comment id="12499878" author="hossman" created="Tue, 29 May 2007 19:32:54 +0100"  >&lt;p&gt;minor notes...&lt;/p&gt;

&lt;p&gt;1) common-build.xml is a better name then &quot;build-common.xml&quot; like some other projects use because auto completion of file names on &quot;b...&quot; only result in build.xml ... perhaps this new file could be &quot;demo-build.xml&quot;&lt;/p&gt;

&lt;p&gt;2) as i recall, older versions of ant don&apos;t include the targets from imported files, but newer versions do ... the only way i know to supress them is to no provide them a description, which doesn&apos;t work well sicne we want them to have descriptions when imported by build.xml.  a simple solution may be to keep the demo-build.xml file extremly simple, with no imports, and use &amp;lt;ant&amp;gt; or &amp;lt;antcall&amp;gt; to exec targets in common-build.xml (perhaps even new targets written explicitly for the demo)&lt;/p&gt;</comment>
                    <comment id="12500005" author="michaelbusch" created="Wed, 30 May 2007 03:34:40 +0100"  >&lt;p&gt;&amp;gt; minor notes...&lt;/p&gt;

&lt;p&gt;Thanks for reviewing!&lt;/p&gt;

&lt;p&gt;&amp;gt; 1) common-build.xml is a better name then &quot;build-common.xml&quot; like some &lt;br/&gt;
&amp;gt; other projects use because auto completion of file names on &quot;b...&quot; only &lt;br/&gt;
&amp;gt; result in build.xml ... perhaps this new file could be &quot;demo-build.xml&quot;&lt;/p&gt;

&lt;p&gt;I see - will do.&lt;/p&gt;

&lt;p&gt;&amp;gt; 2) as i recall, older versions of ant don&apos;t include the targets from &lt;br/&gt;
&amp;gt; imported files, but newer versions do ... the only way i know to supress &lt;br/&gt;
&amp;gt; them is to no provide them a description, which doesn&apos;t work well sicne &lt;br/&gt;
&amp;gt; we want them to have descriptions when imported by build.xml. a simple &lt;br/&gt;
&amp;gt; solution may be to keep the demo-build.xml file extremly simple, with no &lt;br/&gt;
&amp;gt; imports, and use &amp;lt;ant&amp;gt; or &amp;lt;antcall&amp;gt; to exec targets in common-build.xml &lt;br/&gt;
&amp;gt; (perhaps even new targets written explicitly for the demo)&lt;/p&gt;

&lt;p&gt;If we want to use &amp;lt;ant&amp;gt; we have to move the demo targets from build.xml&lt;br/&gt;
to common-build.xml. And demo-build.xml would have to overwrite some of&lt;br/&gt;
the properties of common-build.xml like the classpath of the core &lt;br/&gt;
classes, because build.xml builds from the sources, whereas demo-build.xml&lt;br/&gt;
has to use the binary jar file. &lt;/p&gt;

&lt;p&gt;Actually I don&apos;t even need to import any targets from common-build.xml in &lt;br/&gt;
demo-build.xml, all I need are some properties like version and build dir.&lt;br/&gt;
A simpler solution which comes to my mind is it therefore to add a new &lt;br/&gt;
file common-build.properties and to move some properties from &lt;br/&gt;
common-build.xml to this new file. Then common-build.xml and &lt;br/&gt;
demo-build.xml import the properties file and we&apos;re fine. I tried this out&lt;br/&gt;
already and it seems to work fine. I will attach a patch with this &lt;br/&gt;
approach. Would be nice if you could take another look, Hoss! (others are&lt;br/&gt;
welcome too of course!)&lt;/p&gt;</comment>
                    <comment id="12500007" author="michaelbusch" created="Wed, 30 May 2007 03:40:06 +0100"  >&lt;p&gt;New patch:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;renamed build-demo.xml to demo-build.xml&lt;/li&gt;
	&lt;li&gt;demo-build.xml does not import common-build.xml anymore&lt;/li&gt;
	&lt;li&gt;added a new file common-build.properties, imported by&lt;br/&gt;
  common-build.xml and demo-build.xml&lt;/li&gt;
	&lt;li&gt;demo-build.xml gets renamed to build.xml when packaged&lt;/li&gt;
	&lt;li&gt;binaries contain common-build.properties, not&lt;br/&gt;
  common-build.xml&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;demo-build.xml has the following 4 targets:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;clean&lt;/li&gt;
	&lt;li&gt;compile-demo&lt;/li&gt;
	&lt;li&gt;jar-demo&lt;/li&gt;
	&lt;li&gt;war-demo&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12500270" author="michaelbusch" created="Thu, 31 May 2007 02:53:37 +0100"  >&lt;p&gt;After updating my patch to the current trunk I noticed that something is&lt;br/&gt;
not working correctly. It seems that the build.xml files of the contrib&lt;br/&gt;
modules that import common-build.xml don&apos;t import the properties correctly&lt;br/&gt;
that I moved to the new properties file. I actually have no idea why.&lt;/p&gt;

&lt;p&gt;But I&apos;m not desperate yet &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; and I got a new idea how to do this more&lt;br/&gt;
elegant: In this new patch I add a file to the root dir called&lt;br/&gt;
demo-build.template which has placeholder strings for the property values&lt;br/&gt;
that are needed in the build.xml file of the binary package like &lt;br/&gt;
&quot;version&quot;. While packaging this template file becomes copied to the build&lt;br/&gt;
dir and via the ant task &amp;lt;replace&amp;gt; the placeholder strings are replaced by&lt;br/&gt;
the actual values. Then this file is included as build.xml in the binary&lt;br/&gt;
packages. &lt;/p&gt;

&lt;p&gt;The advantage of this approach is that we don&apos;t have to include &lt;br/&gt;
common-build.xml or a property file in the binaries. Just a very simple &lt;br/&gt;
build.xml is included with the 4 targets &quot;clean&quot;, &quot;compile-demo&quot;,&lt;br/&gt;
&quot;jar-demo&quot;, &quot;war-demo&quot;. I decided not to dig into the problem with the &lt;br/&gt;
previous patch described above because I believe this is the better &lt;br/&gt;
approach. Thoughts?&lt;/p&gt;</comment>
                    <comment id="12500895" author="michaelbusch" created="Sat, 2 Jun 2007 01:45:37 +0100"  >&lt;p&gt;Has anybody objections against the approach in the latest&lt;br/&gt;
patch? If not, I will commit this in a day or two.&lt;/p&gt;</comment>
                    <comment id="12501062" author="hossman" created="Mon, 4 Jun 2007 00:42:56 +0100"  >&lt;p&gt;Michael: this approach seems great.  I couldn&apos;t help but make a few tweaks...&lt;/p&gt;

&lt;p&gt;1) used a filterset to do the token replacements as part of hte copy (isntead of after the fact)&lt;br/&gt;
2) since the demo build file is now just a template (and can&apos;t be run until it&apos;s pacakged) it now seems more like &quot;source&quot; then part of the build system, so i moved it into &quot;src/demo&quot; (which has the added benefit of keeping the root dir a little cleaner)&lt;/p&gt;</comment>
                    <comment id="12501066" author="hossman" created="Mon, 4 Jun 2007 00:57:00 +0100"  >&lt;p&gt;whoops ... forgot to svn add src/demo/demo-build.template after i moved it .. it has some minor changes because of how i setup the &amp;lt;filterset&amp;gt; &lt;/p&gt;</comment>
                    <comment id="12501081" author="michaelbusch" created="Mon, 4 Jun 2007 03:29:19 +0100"  >&lt;p&gt;&amp;gt; I couldn&apos;t help but make a few tweaks...&lt;/p&gt;

&lt;p&gt;Thanks for reviewing! &lt;/p&gt;

&lt;p&gt;&amp;gt; 1) used a filterset to do the token replacements as part of hte copy &lt;br/&gt;
&amp;gt; (isntead of after the fact)&lt;/p&gt;

&lt;p&gt;Neat!&lt;/p&gt;

&lt;p&gt;&amp;gt; 2) since the demo build file is now just a template (and can&apos;t be run &lt;br/&gt;
&amp;gt; until it&apos;s pacakged) it now seems more like &quot;source&quot; then part of the &lt;br/&gt;
&amp;gt; build system, so i moved it into &quot;src/demo&quot; (which has the added benefit &lt;br/&gt;
&amp;gt; of keeping the root dir a little cleaner)&lt;/p&gt;

&lt;p&gt;Good! Yes I agree that src/demo is a better place for the template file.&lt;/p&gt;</comment>
                    <comment id="12501087" author="michaelbusch" created="Mon, 4 Jun 2007 05:07:08 +0100"  >&lt;p&gt;Works great, Hoss! Thanks again. I just committed this.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12358790" name="lucene-894.patch" size="6049" author="hossman" created="Mon, 4 Jun 2007 00:57:00 +0100" />
                    <attachment id="12358789" name="lucene-894.patch" size="2258" author="hossman" created="Mon, 4 Jun 2007 00:42:56 +0100" />
                    <attachment id="12358586" name="lucene-894.patch" size="6502" author="michaelbusch" created="Thu, 31 May 2007 02:53:37 +0100" />
                    <attachment id="12358492" name="lucene-894.patch" size="7087" author="michaelbusch" created="Wed, 30 May 2007 03:40:06 +0100" />
                    <attachment id="12358402" name="lucene-894.patch" size="4604" author="michaelbusch" created="Tue, 29 May 2007 08:28:42 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>5.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 29 May 2007 18:32:54 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12848</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26835</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>