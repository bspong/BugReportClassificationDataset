<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:19:05 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1805/LUCENE-1805.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1805] CloseableThreadLocal should allow null Objects</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1805</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;CloseableThreadLocal does not allow null Objects in its get() method, but does nothing to prevent them in set(Object). The comment in get() before assert v != null is irrelevant - the application might have passed null.&lt;/p&gt;

&lt;p&gt;Null is an important value for Analyzers. Since tokenStreams (a ThreadLocal private member in Analyzer) is not accessible by extending classes, the only way for an Analyzer to reset the tokenStreams is by calling setPreviousTokenStream(null).&lt;/p&gt;

&lt;p&gt;I will post a patch w/ a test&lt;/p&gt;</description>
                <environment></environment>
            <key id="12432985">LUCENE-1805</key>
            <summary>CloseableThreadLocal should allow null Objects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="shaie">Shai Erera</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Aug 2009 13:59:18 +0100</created>
                <updated>Mon, 16 May 2011 19:15:28 +0100</updated>
                    <resolved>Thu, 13 Aug 2009 15:32:44 +0100</resolved>
                            <version>2.4.1</version>
                                <fixVersion>2.9</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12742821" author="shaie" created="Thu, 13 Aug 2009 14:25:15 +0100"  >&lt;p&gt;Remove assert v != null and added a test case.&lt;/p&gt;

&lt;p&gt;Funny, but it&apos;s as if CTL itself could cause this bug. If you call ctl.get() w/o setting anything first, it creates a WeakReference and set the initValue(), which is ... null !. The first call to get() will return null, the second would fail. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;BTW, TestCloseableThreadLocal is under o.a.l.index. Shouldn&apos;t it be under o.a.l.util? Can whoever assigns this to himself move it?&lt;/p&gt;</comment>
                    <comment id="12742830" author="mikemccand" created="Thu, 13 Aug 2009 15:12:52 +0100"  >&lt;blockquote&gt;&lt;p&gt;If you call ctl.get() w/o setting anything first, it creates a WeakReference and set the initValue(), which is ... null&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t think that&apos;s right?&lt;/p&gt;

&lt;p&gt;It calls initialValue(), and only if that returns a non-null value will it set it.  Else it doesn&apos;t call set?  (So calling get() twice in a row not having called set shouldn&apos;t hit an exception).  I think?&lt;/p&gt;</comment>
                    <comment id="12742831" author="shaie" created="Thu, 13 Aug 2009 15:18:34 +0100"  >&lt;p&gt;Oops, you&apos;re right. I overlooked it. So maybe the second test case I added is not that important, even though it wouldn&apos;t hurt to keep it.&lt;/p&gt;</comment>
                    <comment id="12742834" author="mikemccand" created="Thu, 13 Aug 2009 15:23:40 +0100"  >&lt;p&gt;Attached small tweaks to the test (removed the misleading comment).&lt;/p&gt;

&lt;p&gt;I think it&apos;s ready to commit.  If it looks ok Shai I&apos;ll commit shortly...&lt;/p&gt;</comment>
                    <comment id="12742835" author="shaie" created="Thu, 13 Aug 2009 15:27:04 +0100"  >&lt;p&gt;I was just commenting that I should remove the misleading comment &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;It looks good. Don&apos;t you want to move the test to o.a.l.util as well?&lt;/p&gt;</comment>
                    <comment id="12742836" author="mikemccand" created="Thu, 13 Aug 2009 15:29:45 +0100"  >&lt;blockquote&gt;&lt;p&gt;Don&apos;t you want to move the test to o.a.l.util as well?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Woops, right, I&apos;ll do that before committing.&lt;/p&gt;</comment>
                    <comment id="12742838" author="mikemccand" created="Thu, 13 Aug 2009 15:32:44 +0100"  >&lt;p&gt;Thanks Shai!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12416441" name="LUCENE-1805.patch" size="2224" author="mikemccand" created="Thu, 13 Aug 2009 15:23:40 +0100" />
                    <attachment id="12416437" name="LUCENE-1805.patch" size="2231" author="shaie" created="Thu, 13 Aug 2009 14:25:15 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 13 Aug 2009 14:12:52 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11957</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25921</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>