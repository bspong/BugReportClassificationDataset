<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:00:30 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-400/LUCENE-400.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-400] NGramFilter -- construct n-grams from a TokenStream</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-400</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;This filter constructs n-grams (token combinations up to a fixed size, sometimes&lt;br/&gt;
called &quot;shingles&quot;) from a token stream.&lt;/p&gt;

&lt;p&gt;The filter sets start offsets, end offsets and position increments, so&lt;br/&gt;
highlighting and phrase queries should work.&lt;/p&gt;

&lt;p&gt;Position increments &amp;gt; 1 in the input stream are replaced by filler tokens&lt;br/&gt;
(tokens with termText &quot;_&quot; and endOffset - startOffset = 0) in the output&lt;br/&gt;
n-grams. (Position increments &amp;gt; 1 in the input stream are usually caused by&lt;br/&gt;
removing some tokens, eg. stopwords, from a stream.)&lt;/p&gt;

&lt;p&gt;The filter uses CircularFifoBuffer and UnboundedFifoBuffer from Apache&lt;br/&gt;
Commons-Collections.&lt;/p&gt;

&lt;p&gt;Filter, test case and an analyzer are attached.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
            <key id="12314550">LUCENE-400</key>
            <summary>NGramFilter -- construct n-grams from a TokenStream</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="gsingers">Grant Ingersoll</assignee>
                                <reporter username="apache-bugzilla@sebastian-kirsch.org">Sebastian Kirsch</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jun 2005 07:08:37 +0100</created>
                <updated>Thu, 2 Jun 2011 23:05:03 +0100</updated>
                    <resolved>Sat, 29 Mar 2008 21:09:54 +0000</resolved>
                                            <fixVersion>2.4</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>5</votes>
                        <watches>3</watches>
                                                    <comments>
                    <comment id="12322452" author="apache-bugzilla@sebastian-kirsch.org" created="Wed, 22 Jun 2005 07:09:52 +0100"  >&lt;p&gt;Created an attachment (id=15504)&lt;br/&gt;
NGramFilter&lt;/p&gt;</comment>
                    <comment id="12322453" author="apache-bugzilla@sebastian-kirsch.org" created="Wed, 22 Jun 2005 07:10:29 +0100"  >&lt;p&gt;Created an attachment (id=15505)&lt;br/&gt;
NGramAnalyzerWrapper (wraps an NGramFilter around an analyzer.)&lt;/p&gt;</comment>
                    <comment id="12322454" author="apache-bugzilla@sebastian-kirsch.org" created="Wed, 22 Jun 2005 07:12:35 +0100"  >&lt;p&gt;Created an attachment (id=15506)&lt;br/&gt;
JUnit TestCase for NGramFilter&lt;/p&gt;</comment>
                    <comment id="12322455" author="rnewson@connected.com" created="Wed, 29 Jun 2005 11:26:46 +0100"  >&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;For example, the sentence &quot;please divide this sentence into ngrams&quot; would be&lt;/li&gt;
	&lt;li&gt;tokenized into the tokens &quot;please divide&quot;, &quot;this sentence&quot;, &quot;sentence into&quot;, and&lt;/li&gt;
	&lt;li&gt;&quot;into ngrams&quot;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The comment should read;&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;For example, the sentence &quot;please divide this sentence into ngrams&quot; would be&lt;/li&gt;
	&lt;li&gt;tokenized into the tokens &quot;please divide&quot;, &quot;divide this&quot;, &quot;this sentence&quot;,&lt;br/&gt;
&quot;sentence into&quot;, and&lt;/li&gt;
	&lt;li&gt;&quot;into ngrams&quot;.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12322456" author="apache-bugzilla@sebastian-kirsch.org" created="Fri, 29 Jul 2005 22:56:59 +0100"  >&lt;p&gt;Created an attachment (id=15818)&lt;br/&gt;
JUnit test class for NGramAnalyzerWrapper&lt;/p&gt;

&lt;p&gt;The tests in this class are concerned with the interaction between QueryParser&lt;br/&gt;
and an NGramAnalyzer, and whether searching works as expected on an index&lt;br/&gt;
constructed with an NGramAnalyzer.&lt;/p&gt;

&lt;p&gt;One of the test cases throws an exception that I haven&apos;t investigated yet. So&lt;br/&gt;
proceed with caution if you use the QueryParser with NGramAnalyzer. &lt;/p&gt;

&lt;p&gt;..E....&lt;br/&gt;
Time: 1.771&lt;br/&gt;
There was 1 error:&lt;br/&gt;
1)&lt;br/&gt;
testNGramAnalyzerWrapperPhraseQueryParsingFails(org.apache.lucene.analysis.NGramAnalyzerWrapperTest)java.lang.NullPointerException&lt;/p&gt;

&lt;p&gt;	at&lt;br/&gt;
org.apache.lucene.index.MultipleTermPositions.skipTo(MultipleTermPositions.java:178)&lt;/p&gt;

&lt;p&gt;	at&lt;br/&gt;
org.apache.lucene.search.PhrasePositions.skipTo(PhrasePositions.java:47)&lt;br/&gt;
	at org.apache.lucene.search.PhraseScorer.doNext(PhraseScorer.java:73)&lt;br/&gt;
	at org.apache.lucene.search.PhraseScorer.next(PhraseScorer.java:66)&lt;br/&gt;
	at org.apache.lucene.search.Scorer.score(Scorer.java:47)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:102)&lt;br/&gt;
	at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:65)&lt;br/&gt;
	at org.apache.lucene.search.Hits.&amp;lt;init&amp;gt;(Hits.java:44)&lt;br/&gt;
	at org.apache.lucene.search.Searcher.search(Searcher.java:40)&lt;br/&gt;
	at org.apache.lucene.search.Searcher.search(Searcher.java:32)&lt;br/&gt;
	at&lt;br/&gt;
org.apache.lucene.analysis.NGramAnalyzerWrapperTest.queryParsingTest(NGramAnalyzerWrapperTest.java:75)&lt;/p&gt;

&lt;p&gt;	at&lt;br/&gt;
org.apache.lucene.analysis.NGramAnalyzerWrapperTest.testNGramAnalyzerWrapperPhraseQueryParsingFails(NGramAnalyzerWrapperTest.java:100)&lt;/p&gt;

&lt;p&gt;	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at&lt;br/&gt;
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;/p&gt;

&lt;p&gt;	at&lt;br/&gt;
org.apache.lucene.analysis.NGramAnalyzerWrapperTest.main(NGramAnalyzerWrapperTest.java:36)&lt;/p&gt;


&lt;p&gt;FAILURES!!!&lt;br/&gt;
Tests run: 6,  Failures: 0,  Errors: 1&lt;/p&gt;</comment>
                    <comment id="12419913" author="otis" created="Sun, 9 Jul 2006 22:51:29 +0100"  >&lt;p&gt;Sebastian, ever figured out the problem?  Also, is there a way to get rid of the Commons Collections?  Lucene has no run-time dependencies on other libraries.&lt;/p&gt;</comment>
                    <comment id="12426327" author="apache-bugzilla@sebastian-kirsch.org" created="Mon, 7 Aug 2006 22:14:35 +0100"  >&lt;p&gt;Hi Otis,&lt;/p&gt;

&lt;p&gt;I did not figure out the problem. Getting rid of Commons Collection should be no problem; I am just using them as FIFOs. However, I do not have the time at the moment to implement this.&lt;/p&gt;

&lt;p&gt;Kind regards, Sebastian&lt;/p&gt;</comment>
                    <comment id="12558305" author="gsingers" created="Sat, 12 Jan 2008 22:56:43 +0000"  >&lt;p&gt;Lucene has NGram support&lt;/p&gt;</comment>
                    <comment id="12558350" author="steve_rowe" created="Sun, 13 Jan 2008 05:36:33 +0000"  >&lt;p&gt;Lucene has &lt;b&gt;character&lt;/b&gt; NGram support, but not &lt;b&gt;word&lt;/b&gt; NGram support, which this filter supplies:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;This filter constructs n-grams (token combinations up to a fixed size, sometimes called &quot;shingles&quot;) from a token stream.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                    <comment id="12558401" author="gsingers" created="Sun, 13 Jan 2008 13:33:59 +0000"  >&lt;p&gt;Good catch, Steve.  I will reopen, as a word based ngram filter is useful.&lt;/p&gt;</comment>
                    <comment id="12558495" author="steve_rowe" created="Mon, 14 Jan 2008 04:15:11 +0000"  >&lt;p&gt;Repackaged these four files as a patch, with the following modifications to the code:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Renamed files and variables to refer to &quot;n-grams&quot; as &quot;shingles&quot;, to avoid confusion with the character-level n-gram code already in Lucene&apos;s sandbox&lt;/li&gt;
	&lt;li&gt;Placed code in the o.a.l.analysis.shingle package&lt;/li&gt;
	&lt;li&gt;Converted commons-collections FIFO usages to LinkedLists&lt;/li&gt;
	&lt;li&gt;Removed @author from javadocs&lt;/li&gt;
	&lt;li&gt;Changed deprecated Lucene API usages to alternate forms; addressed all compilation warnings&lt;/li&gt;
	&lt;li&gt;Changed code style to conform to Lucene conventions&lt;/li&gt;
	&lt;li&gt;Changed field setters to return null instead of a reference to the class instance, then changed instantiations to use individual setter calls instead of the chained calling style&lt;/li&gt;
	&lt;li&gt;Added ASF license to each file&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All tests pass.&lt;/p&gt;

&lt;p&gt;Although I left in the ShingleAnalyzerWrapper and its test in the patch, no other Lucene filter (AFAICT) has such a filter wrapping facility.  My vote is to remove these two files.&lt;/p&gt;</comment>
                    <comment id="12558585" author="gsingers" created="Mon, 14 Jan 2008 12:29:02 +0000"  >&lt;p&gt;Thanks, Steve.  I will mark this as 2.4&lt;/p&gt;</comment>
                    <comment id="12558717" author="steve_rowe" created="Mon, 14 Jan 2008 18:40:02 +0000"  >&lt;p&gt;Removed the duplicate link (to &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-759&quot; title=&quot;Add n-gram tokenizers to contrib/analyzers&quot;&gt;&lt;del&gt;LUCENE-759&lt;/del&gt;&lt;/a&gt;), since that issue is about character-level n-grams, and this issue is about word-level n-grams.&lt;/p&gt;</comment>
                    <comment id="12558728" author="otis" created="Mon, 14 Jan 2008 18:55:08 +0000"  >&lt;p&gt;Thanks for bringing this up to date.  I&apos;ll commit it after 2.3 is out.&lt;/p&gt;</comment>
                    <comment id="12574493" author="gsingers" created="Mon, 3 Mar 2008 13:28:15 +0000"  >&lt;p&gt;ping, Otis, do you still plan to commit?&lt;/p&gt;</comment>
                    <comment id="12579933" author="steve_rowe" created="Tue, 18 Mar 2008 17:20:42 +0000"  >&lt;p&gt;re-ping, Otis, do you still plan to commit?&lt;/p&gt;</comment>
                    <comment id="12582075" author="otis" created="Tue, 25 Mar 2008 22:39:26 +0000"  >&lt;p&gt;Sorry for hogging.  Got some local compilation issues with the query builder in contrib, so assigning to Grant to get this in.&lt;/p&gt;</comment>
                    <comment id="12583365" author="gsingers" created="Sat, 29 Mar 2008 21:09:54 +0000"  >&lt;p&gt;Committed revision 642612.&lt;/p&gt;

&lt;p&gt;Thanks Sebastian and Steve&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12312647" name="ASF.LICENSE.NOT.GRANTED--NGramAnalyzerWrapper.java" size="1593" author="apache-bugzilla@sebastian-kirsch.org" created="Wed, 22 Jun 2005 07:10:29 +0100" />
                    <attachment id="12312649" name="ASF.LICENSE.NOT.GRANTED--NGramAnalyzerWrapperTest.java" size="5196" author="apache-bugzilla@sebastian-kirsch.org" created="Fri, 29 Jul 2005 22:56:59 +0100" />
                    <attachment id="12312646" name="ASF.LICENSE.NOT.GRANTED--NGramFilter.java" size="6040" author="apache-bugzilla@sebastian-kirsch.org" created="Wed, 22 Jun 2005 07:09:52 +0100" />
                    <attachment id="12312648" name="ASF.LICENSE.NOT.GRANTED--NGramFilterTest.java" size="5913" author="apache-bugzilla@sebastian-kirsch.org" created="Wed, 22 Jun 2005 07:12:35 +0100" />
                    <attachment id="12373074" name="LUCENE-400.patch" size="26198" author="steve_rowe" created="Mon, 14 Jan 2008 04:15:11 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>5.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>35456</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 29 Jun 2005 10:26:46 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>13349</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>27331</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>