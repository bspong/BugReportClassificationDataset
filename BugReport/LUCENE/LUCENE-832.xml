<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:06:08 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-832/LUCENE-832.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-832] NPE when calling isCurrent() on a ParallellReader</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-832</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;As demonstrated by the test case below, if you call isCurrent() on a ParallelReader it causes an NPE. Fix appears to be to add an isCurrent() to ParallelReader which calls it on the underlying indexes but I&apos;m not sure what other problems may be lurking here. Do methods such as getVersion(), lastModified(), isOptimized() also have to be rewritten or is this a use case where ParallelReader will never mimic IndexReader perfectly? At the very least this behavior should be documented so others know what to expect.&lt;/p&gt;


&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testcase: testIsCurrent(org.apache.lucene.index.TestParallelReader):        Caused an ERROR&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; null&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.lang.NullPointerException&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:502)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.lucene.index.SegmentInfos.readCurrentVersion(SegmentInfos.java:336)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.lucene.index.IndexReader.isCurrent(IndexReader.java:316)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.lucene.index.TestParallelReader.testIsCurrent(TestParallelReader.java:146)&lt;/p&gt;



&lt;p&gt;Index: src/test/org/apache/lucene/index/TestParallelReader.java&lt;br/&gt;
===================================================================&lt;br/&gt;
&amp;#8212; src/test/org/apache/lucene/index/TestParallelReader.java    (revision 518122)&lt;br/&gt;
+++ src/test/org/apache/lucene/index/TestParallelReader.java    (working copy)&lt;br/&gt;
@@ -135,6 +135,15 @@&lt;br/&gt;
       assertEquals(docParallel.get(&quot;f4&quot;), docSingle.get(&quot;f4&quot;));&lt;br/&gt;
     }&lt;br/&gt;
   }&lt;br/&gt;
+  &lt;br/&gt;
+  public void testIsCurrent() throws IOException &lt;/p&gt;
{
+    Directory dir1 = getDir1();
+    Directory dir2 = getDir2();
+    ParallelReader pr = new ParallelReader();
+    pr.add(IndexReader.open(dir1));
+    pr.add(IndexReader.open(dir2));
+    assertTrue(pr.isCurrent());
+  }

&lt;p&gt;   // Fiels 1-4 indexed together:&lt;br/&gt;
   private Searcher single() throws IOException {&lt;/p&gt;</description>
                <environment></environment>
            <key id="12364925">LUCENE-832</key>
            <summary>NPE when calling isCurrent() on a ParallellReader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="michaelbusch">Michael Busch</assignee>
                                <reporter username="pdlug">Paul Dlug</reporter>
                        <labels>
                    </labels>
                <created>Wed, 14 Mar 2007 15:05:30 +0000</created>
                <updated>Wed, 1 Aug 2007 01:43:53 +0100</updated>
                    <resolved>Wed, 1 Aug 2007 01:43:53 +0100</resolved>
                            <version>2.0.0</version>
                <version>2.1</version>
                <version>2.2</version>
                                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12480863" author="hossman" created="Wed, 14 Mar 2007 18:01:14 +0000"  >&lt;p&gt;shades of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-781&quot; title=&quot;NPE in MultiReader.isCurrent() and getVersion()&quot;&gt;&lt;del&gt;LUCENE-781&lt;/del&gt;&lt;/a&gt; here.&lt;/p&gt;</comment>
                    <comment id="12516826" author="michaelbusch" created="Wed, 1 Aug 2007 00:38:47 +0100"  >&lt;p&gt;This patch fixes ParallelReader similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-781&quot; title=&quot;NPE in MultiReader.isCurrent() and getVersion()&quot;&gt;&lt;del&gt;LUCENE-781&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;ParallelReader.getVersion() now throws an&lt;br/&gt;
     UnsupportedOperationException.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;ParallelReader.isOptimized() now checks if all underlying&lt;br/&gt;
     indexes are optimized and returns true in such a case.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;ParallelReader.isCurrent() now checks if all underlying&lt;br/&gt;
     IndexReaders are up to date and returns true in such a case.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Additional tests in TestParallelReader to test these methods.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;All tests pass. I&apos;m planning to commit this soon...&lt;/p&gt;</comment>
                    <comment id="12516840" author="michaelbusch" created="Wed, 1 Aug 2007 01:43:53 +0100"  >&lt;p&gt;Committed.&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12361031">LUCENE-781</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12362924" name="lucene-832.patch" size="4421" author="michaelbusch" created="Wed, 1 Aug 2007 00:38:47 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 14 Mar 2007 18:01:14 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12909</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26898</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>