<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:02:27 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2663/LUCENE-2663.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2663] wrong exception from NativeFSLockFactory (LIA2 test case)</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2663</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;As part of integrating Lucene In Action 2 test cases (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2661&quot; title=&quot;fold in test cases from Lucene in Action 2nd edition&quot;&gt;LUCENE-2661&lt;/a&gt;), I found one of the test cases fail&lt;/p&gt;

&lt;p&gt;the test is pretty simple, and passes on 3.0. The exception you get instead (LockReleaseFailedException) is &lt;br/&gt;
pretty confusing and I think we should fix it.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12474959">LUCENE-2663</key>
            <summary>wrong exception from NativeFSLockFactory (LIA2 test case)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Sep 2010 19:17:19 +0100</created>
                <updated>Wed, 30 Mar 2011 16:50:14 +0100</updated>
                    <resolved>Sun, 3 Oct 2010 10:14:28 +0100</resolved>
                                            <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12914139" author="rcmuir" created="Thu, 23 Sep 2010 19:19:56 +0100"  >&lt;p&gt;for trunk, just change the test to use MockAnalyzer instead of simple... i made the patch from 3x.&lt;/p&gt;</comment>
                    <comment id="12914141" author="thetaphi" created="Thu, 23 Sep 2010 19:25:12 +0100"  >&lt;p&gt;May there be a randomization issue. If both index writers use a different LockFacory, it can easy fail! So at least for one test run, the LockFactory should be identical, else the locking can produce wrong failures/messages, as SimpleFSLock and NativeFSLock can interact very limited, but there are only some security checks, so locking will fail if you mix the implementations.&lt;/p&gt;</comment>
                    <comment id="12914144" author="rcmuir" created="Thu, 23 Sep 2010 19:27:08 +0100"  >&lt;p&gt;The test isnt random. it uses FSDirectory.open&lt;/p&gt;</comment>
                    <comment id="12914146" author="thetaphi" created="Thu, 23 Sep 2010 19:31:18 +0100"  >&lt;p&gt;Sorry, you are right. The exception throws is clearly wrong &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Maybe its related to Shai&apos;s changes in NativeFSLockFactory (which is the default)?&lt;/p&gt;</comment>
                    <comment id="12914160" author="mikemccand" created="Thu, 23 Sep 2010 19:53:30 +0100"  >&lt;p&gt;I think it is the recent changes to NativeFSLockFactory...&lt;/p&gt;

&lt;p&gt;IW tries to first clear the lock, if create=true, and that attempt is causing the exception.  Really this is a holdover from SimpleFSLockFactory, which can leave orphan&apos;d locks... so maybe somehow we shouldn&apos;t do this for other lock factories?&lt;/p&gt;</comment>
                    <comment id="12917190" author="mikemccand" created="Sat, 2 Oct 2010 13:49:11 +0100"  >&lt;p&gt;I think we should remove the call inside IW to dir.clearLock?  This is a holdover from when SimpleFSLockFactory was the default.  And, I think it&apos;s devious/dangerous w/ that lock factory since that lock factory lets you simply erase the lock out from under another open IW.  Ie that call masks bugs.&lt;/p&gt;

&lt;p&gt;All tests pass when I remove it, and, the LIA lock test also passes.&lt;/p&gt;</comment>
                    <comment id="13013411" author="gsingers" created="Wed, 30 Mar 2011 16:50:14 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10030">
                <name>Reference</name>
                                <outwardlinks description="relates to">
                            <issuelink>
            <issuekey id="12474740">LUCENE-2661</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12455396" name="LUCENE-2663_test.patch" size="2910" author="rcmuir" created="Thu, 23 Sep 2010 19:18:06 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 23 Sep 2010 18:25:12 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11177</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25029</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>