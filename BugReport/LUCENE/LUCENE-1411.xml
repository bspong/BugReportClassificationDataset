<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:09:49 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1411/LUCENE-1411.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1411] Enable IndexWriter to open an arbitrary commit point</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1411</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;With a 2-phase commit involving multiple resources, each resource&lt;br/&gt;
first does its prepareCommit and then if all are successful they each&lt;br/&gt;
commit.  If an exception or timeout/power loss is hit in any of the&lt;br/&gt;
resources during prepareCommit or commit, all of the resources must&lt;br/&gt;
then rollback.&lt;/p&gt;

&lt;p&gt;But, because IndexWriter always opens the most recent commit, getting&lt;br/&gt;
Lucene to rollback after commit() has been called is not easy, unless&lt;br/&gt;
you make Lucene the last resource to commit.  A simple workaround is&lt;br/&gt;
to simply remove the segments_N files of the newer commits but that&apos;s&lt;br/&gt;
sort of a hassle.&lt;/p&gt;

&lt;p&gt;To fix this, we just need to add a ctor to IndexWriter that takes an&lt;br/&gt;
IndexCommit.  We recently added this for IndexReader (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1311&quot; title=&quot;Add ability to open prior commits to IndexReader&quot;&gt;&lt;del&gt;LUCENE-1311&lt;/del&gt;&lt;/a&gt;) as&lt;br/&gt;
well.  This ctor is definitely an &quot;expert&quot; method, and only makes&lt;br/&gt;
sense if you have a custom DeletionPolicy that preserves more than&lt;br/&gt;
just the most recent commit.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12405625">LUCENE-1411</key>
            <summary>Enable IndexWriter to open an arbitrary commit point</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Oct 2008 12:39:01 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:08 +0100</updated>
                    <resolved>Mon, 20 Oct 2008 10:49:17 +0100</resolved>
                            <version>2.4</version>
                                <fixVersion>2.9</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12636343" author="mikemccand" created="Thu, 2 Oct 2008 12:48:45 +0100"  >&lt;p&gt;Attached patch.  I think it&apos;s ready to commit but I&apos;ll wait a few days.&lt;/p&gt;

&lt;p&gt;When you open the IndexWriter on a prior commit, what actually happens&lt;br/&gt;
is the IndexWriter opens all commits, and then pulls in the specific&lt;br/&gt;
segments referenced by the prior commit into its in-memory&lt;br/&gt;
SegmentInfos instance.  So this is analagous to doing a &quot;reverse svn&lt;br/&gt;
merge&quot; to undo a series of changes into your local checkout, but, not&lt;br/&gt;
committing that undo until IW.commit() is explicitly called.&lt;/p&gt;

&lt;p&gt;This means it&apos;s still up to the deletion policy to decide what to do&lt;br/&gt;
with the &quot;future&quot; commits on opening the prior commit.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12391352" name="LUCENE-1411.patch" size="18191" author="mikemccand" created="Thu, 2 Oct 2008 12:48:45 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12340</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26317</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>