<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:03:03 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-317/LUCENE-317.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-317] [PATCH] When locks are disabled, IndexWriter.close() throws NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-317</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;If locks are disabled (via setting the System property &apos;disableLuceneLocks&apos; to&lt;br/&gt;
true), IndexWriter throws a NullPointerException on closing. The reason is that&lt;br/&gt;
the attempt to call writeLock.release() fails because writeLock is null.&lt;br/&gt;
To correct this, just check for this case before releasing. A (trivial) patch is&lt;br/&gt;
attached.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: Windows XP&lt;br/&gt;
Platform: PC&lt;/p&gt;</environment>
            <key id="12314467">LUCENE-317</key>
            <summary>[PATCH] When locks are disabled, IndexWriter.close() throws NullPointerException</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="java-dev@lucene.apache.org">Lucene Developers</assignee>
                                <reporter username="siberski@learninglab.de">Wolf Siberski</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Nov 2004 19:20:15 +0000</created>
                <updated>Thu, 2 Jun 2011 23:03:31 +0100</updated>
                    <resolved>Sat, 27 May 2006 02:38:45 +0100</resolved>
                                                            <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12322045" author="siberski@learninglab.de" created="Fri, 26 Nov 2004 19:21:46 +0000"  >&lt;p&gt;Created an attachment (id=13546)&lt;br/&gt;
Check if writeLock is null before releasing&lt;/p&gt;</comment>
                    <comment id="12322046" author="bernhard.messer@intrafind.de" created="Mon, 29 Nov 2004 00:32:47 +0000"  >&lt;p&gt;Wolf,&lt;/p&gt;

&lt;p&gt;can you add a small sample how to raise the NullpointerException. I tried to&lt;br/&gt;
recreate your problem but it never occurs. If you have a look at the&lt;br/&gt;
implementation of IndexWriter, the writeLock member is created and assigned&lt;br/&gt;
within the constructor.&lt;/p&gt;

&lt;p&gt;Lock writeLock = directory.makeLock(IndexWriter.WRITE_LOCK_NAME);&lt;br/&gt;
if (!writeLock.obtain(WRITE_LOCK_TIMEOUT)) // obtain write lock&lt;br/&gt;
   throw new IOException(&quot;Index locked for write: &quot; + writeLock);&lt;br/&gt;
this.writeLock = writeLock;   &lt;/p&gt;

&lt;p&gt;So the only possible chance that it isn&apos;t assigned and has a null value, is when&lt;br/&gt;
the IOException is thrown.&lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Bernhard&lt;/p&gt;</comment>
                    <comment id="12322047" author="siberski@learninglab.de" created="Mon, 29 Nov 2004 01:33:39 +0000"  >&lt;p&gt;Hi Bernard,&lt;/p&gt;

&lt;p&gt;I checked again, and it turned out that I was closing the IndexWriter twice. It&lt;br/&gt;
has nothing to do with Locks being enabled or disabled. Sorry for causing&lt;br/&gt;
unnecessary effort, I should have looked into the issue more thoroughly. Anyway,&lt;br/&gt;
IMHO closing a Writer more than once should do no harm, so the patch may still&lt;br/&gt;
be considered as enhancement.&lt;/p&gt;</comment>
                    <comment id="12322048" author="bernhard.messer@intrafind.de" created="Tue, 30 Nov 2004 05:42:03 +0000"  >&lt;p&gt;reviewed and committed.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12312449" name="ASF.LICENSE.NOT.GRANTED--indexwriter.diff" size="729" author="siberski@learninglab.de" created="Fri, 26 Nov 2004 19:21:46 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                <customfieldname>Bugzilla Id</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>32403</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 29 Nov 2004 00:32:47 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>13432</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>27414</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>