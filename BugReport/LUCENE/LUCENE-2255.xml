<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:13:11 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2255/LUCENE-2255.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2255] IndexWriter.getReader() allocates file handles</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2255</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I am not sure if this is a &quot;bug&quot; or really just me not reading the Javadocs right...&lt;/p&gt;

&lt;p&gt;The IR returned by IW.getReader() leaks file handles if you do not close() it, leading to starvation of the available file handles/process. If it was clear from the docs that this was a &lt;b&gt;new&lt;/b&gt; reader and not some reference owned by the writer then this would probably be ok. But as I read the docs the reader is internally managed by the IW, which at first shot lead me to believe that I shouldn&apos;t close it.&lt;/p&gt;

&lt;p&gt;So perhaps the docs should be amended to clearly state that this is a caller-owns reader that &lt;b&gt;must&lt;/b&gt; be closed? Attaching a simple app that illustrates the problem.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 9.10, Java 6&lt;/p&gt;</environment>
            <key id="12455676">LUCENE-2255</key>
            <summary>IndexWriter.getReader() allocates file handles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="kamstrup">Mikkel Kamstrup Erlandsen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2010 19:57:36 +0000</created>
                <updated>Thu, 25 Feb 2010 10:18:05 +0000</updated>
                    <resolved>Mon, 8 Feb 2010 21:20:45 +0000</resolved>
                                            <fixVersion>2.9.2</fixVersion>
                <fixVersion>3.0.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12831084" author="kamstrup" created="Mon, 8 Feb 2010 19:59:23 +0000"  >&lt;p&gt;Leaks file handles via IW.getReader()&lt;/p&gt;</comment>
                    <comment id="12831095" author="jasonrutherglen" created="Mon, 8 Feb 2010 20:20:30 +0000"  >&lt;p&gt;You&apos;re not the first to report this... I wonder if we should also do a weak ref type of dealie that auto closes the reader for users who aren&apos;t calling IR.close?  &lt;/p&gt;

&lt;p&gt;To answer the question, yes, close on IR must be called.  I can&apos;t directly do anything about the javadocs so I&apos;ll leave that for Mike.&lt;/p&gt;</comment>
                    <comment id="12831107" author="simonw" created="Mon, 8 Feb 2010 20:41:32 +0000"  >&lt;p&gt;I see this coming up multiple times, we should document this properly in the javadoc and on the wiki. Jason, aren&apos;t you the NRT specialist here. What keeps you from attaching a patch for the IW javadoc?&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="12831116" author="jasonrutherglen" created="Mon, 8 Feb 2010 20:58:28 +0000"  >&lt;blockquote&gt;&lt;p&gt;What keeps you from attaching a patch for the IW javadoc? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Laziness and lack of motivation... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  &lt;/p&gt;

&lt;p&gt;I&apos;ll post something to the issue, how&apos;s that?&lt;/p&gt;</comment>
                    <comment id="12831124" author="mikemccand" created="Mon, 8 Feb 2010 21:15:58 +0000"  >&lt;p&gt;This has already been fixed on trunk... we added this to the javadocs a while back:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&amp;lt;p&amp;gt;You must close the 
{@link IndexReader}
&lt;p&gt; returned by&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;this method once you are done using it.&amp;lt;/p&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;While the returned reader used IndexWriter to determine which segments to open, the returned reader is fully independent of the writer.  EG you can close the writer and continue using the reader.  And you must close the reader.&lt;/p&gt;

&lt;p&gt;I&apos;ll backport that fix to 3.0 &amp;amp; 2.9.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12435201" name="LuceneManyCommits.java" size="3417" author="kamstrup" created="Mon, 8 Feb 2010 19:59:23 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 8 Feb 2010 20:20:30 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11534</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25470</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>