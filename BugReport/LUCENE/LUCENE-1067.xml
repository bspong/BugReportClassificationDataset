<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:19:54 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1067/LUCENE-1067.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1067] TestStressIndexing has intermittent failures</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1067</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;See &lt;a href=&quot;http://www.gossamer-threads.com/lists/lucene/java-dev/55092&quot; class=&quot;external-link&quot;&gt;http://www.gossamer-threads.com/lists/lucene/java-dev/55092&lt;/a&gt; copied below:&lt;/p&gt;

&lt;p&gt; OK, I have seen this twice in the last two days:&lt;br/&gt;
Testsuite: org.apache.lucene.index.TestStressIndexing&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 18.58&lt;br/&gt;
sec&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; ------------- Standard Output ---------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.lang.NullPointerException&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at&lt;br/&gt;
org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:67)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at&lt;br/&gt;
org.apache.lucene.store.IndexInput.readInt(IndexInput.java:66)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.lucene.index.SegmentInfos&lt;br/&gt;
$FindSegmentsFile.run(SegmentInfos.java:544)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at&lt;br/&gt;
org&lt;br/&gt;
.apache&lt;br/&gt;
.lucene.index.DirectoryIndexReader.open(DirectoryIndexReader.java:63)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at&lt;br/&gt;
org.apache.lucene.index.IndexReader.open(IndexReader.java:209)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at&lt;br/&gt;
org.apache.lucene.index.IndexReader.open(IndexReader.java:192)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at&lt;br/&gt;
org.apache.lucene.search.IndexSearcher.&amp;lt;init&amp;gt;(IndexSearcher.java:56)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.lucene.index.TestStressIndexing&lt;br/&gt;
$SearcherThread.doWork(TestStressIndexing.java:111)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at org.apache.lucene.index.TestStressIndexing&lt;br/&gt;
$TimedThread.run(TestStressIndexing.java:55)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; ------------- ---------------- ---------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testcase:&lt;br/&gt;
testStressIndexAndSearching&lt;br/&gt;
(org.apache.lucene.index.TestStressIndexing): FAILED&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; hit unexpected exception in search1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: hit unexpected&lt;br/&gt;
exception in search1&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at&lt;br/&gt;
org&lt;br/&gt;
.apache&lt;br/&gt;
.lucene.index.TestStressIndexing.runStressTest(TestStressIndexing.java:&lt;br/&gt;
159)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; at&lt;br/&gt;
org&lt;br/&gt;
.apache&lt;br/&gt;
.lucene&lt;br/&gt;
.index&lt;br/&gt;
.TestStressIndexing&lt;br/&gt;
.testStressIndexAndSearching(TestStressIndexing.java:187)&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.lucene.index.TestStressIndexing FAILED&lt;/p&gt;

&lt;p&gt;Subsequent runs have, however passed. Has anyone else hit this on&lt;br/&gt;
trunk?&lt;/p&gt;

&lt;p&gt;I am running using &quot;ant clean test&quot;&lt;/p&gt;

&lt;p&gt;I&apos;m on a Mac Pro 4 core, 4GB machine, if that helps at all. Not sure&lt;br/&gt;
how to reproduce at this point, but strikes me as a threading issue.&lt;br/&gt;
Oh joy!&lt;/p&gt;

&lt;p&gt;I&apos;ll try to investigate more tomorrow to see if I can dream up a test&lt;br/&gt;
case.&lt;/p&gt;

&lt;p&gt;-Grant &lt;/p&gt;
</description>
                <environment></environment>
            <key id="12383307">LUCENE-1067</key>
            <summary>TestStressIndexing has intermittent failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Nov 2007 11:40:34 +0000</created>
                <updated>Fri, 25 Jan 2008 03:24:11 +0000</updated>
                    <resolved>Tue, 27 Nov 2007 17:02:33 +0000</resolved>
                                            <fixVersion>2.3</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12545885" author="mikemccand" created="Tue, 27 Nov 2007 16:11:01 +0000"  >&lt;p&gt;OK I think this is just a thread safety issue on RAMFile.&lt;/p&gt;

&lt;p&gt;That class has these comments:&lt;/p&gt;

&lt;p&gt;  // Only one writing stream with no concurrent reading streams, so no file synchronization required&lt;/p&gt;

&lt;p&gt;  // Direct read-only access to state supported for streams since a writing stream implies no other concurrent streams&lt;/p&gt;

&lt;p&gt;which were true before lockless commits but after lockless commits are&lt;br/&gt;
not true, specifically for the segments_N and segments.gen files.&lt;/p&gt;

&lt;p&gt;I think this fix is to make &quot;ArrayList buffers&quot; private (it&apos;s package&lt;br/&gt;
private now), add methods to get a buffer &amp;amp; get the number of buffers,&lt;br/&gt;
and make sure all methods that access &quot;buffers&quot; are synchronized.&lt;/p&gt;</comment>
                    <comment id="12545890" author="mikemccand" created="Tue, 27 Nov 2007 16:16:57 +0000"  >&lt;p&gt;Attached patch.  All tests pass. I plan to commit in a day or two.&lt;/p&gt;

&lt;p&gt;With this fix I can&apos;t get the test to fail after running 90+ times on&lt;br/&gt;
the MacPro quad.&lt;/p&gt;</comment>
                    <comment id="12545904" author="yseeley@gmail.com" created="Tue, 27 Nov 2007 16:42:04 +0000"  >&lt;p&gt;Looks good, +1&lt;/p&gt;</comment>
                    <comment id="12545909" author="mikemccand" created="Tue, 27 Nov 2007 16:48:51 +0000"  >&lt;p&gt;Thanks for the review Yonik!  I&apos;ll commit shortly.&lt;/p&gt;</comment>
                    <comment id="12545916" author="mikemccand" created="Tue, 27 Nov 2007 17:02:33 +0000"  >&lt;p&gt;I just committed this.  Thanks Grant for catching this.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12370314" name="LUCENE-1067.patch" size="3398" author="mikemccand" created="Tue, 27 Nov 2007 16:16:57 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 27 Nov 2007 16:11:01 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12678</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26662</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>