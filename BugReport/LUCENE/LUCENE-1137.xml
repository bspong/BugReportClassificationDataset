<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:29:02 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1137/LUCENE-1137.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1137] Token type as BitSet: typeBits()</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1137</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;It is sometimes useful to have a more compact, easy to parse, type representation for Token than the current type() String.  This patch adds a BitSet onto Token, defaulting to null, with accessors for setting bit flags on a Token.  This is useful for communicating information about a token to TokenFilters further down the chain.  &lt;/p&gt;

&lt;p&gt;For example, in the WikipediaTokenizer, the possibility exists that a token could be both a category and bold (or many other variations), yet it is difficult to communicate this without adding in a lot of different Strings for type.  Unlike using the payload information (which could serve this purpose), the BitSet does not get added to the index (although one could easily convert it to a payload.)&lt;/p&gt;</description>
                <environment></environment>
            <key id="12386397">LUCENE-1137</key>
            <summary>Token type as BitSet: typeBits()</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="gsingers">Grant Ingersoll</assignee>
                                <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Jan 2008 16:31:39 +0000</created>
                <updated>Sat, 11 Oct 2008 13:49:35 +0100</updated>
                    <resolved>Thu, 24 Jan 2008 15:01:17 +0000</resolved>
                                            <fixVersion>2.4</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12559575" author="gsingers" created="Wed, 16 Jan 2008 16:47:41 +0000"  >&lt;p&gt;Added get/setTypeBits() method and underlying storage and constructors.&lt;/p&gt;</comment>
                    <comment id="12559588" author="yseeley@gmail.com" created="Wed, 16 Jan 2008 17:02:54 +0000"  >&lt;p&gt;Gack!  I recommended a bitset on Token previously, but I meant an elemental one... an int (32 bits) or a long (64 bits).&lt;br/&gt;
Half of the bits could be reserved for use by Lucene tokenizers, and half could be reserved for users.  I think an actual BitSet is too heavy-weight.&lt;/p&gt;

&lt;p&gt;Just provide a int or long Token.getFlags() and int or long Token.setFlags(), and nothing more (we don&apos;t need to do bit twiddling for users IMO)&lt;/p&gt;</comment>
                    <comment id="12559589" author="steve_rowe" created="Wed, 16 Jan 2008 17:10:00 +0000"  >&lt;p&gt;I see two problems with this patch:&lt;/p&gt;

&lt;p&gt;1. Although in the patch you say that the &quot;type bits&quot; field added by the patch is completely separate from the String type information, you don&apos;t name them with sufficiently different names to distinguish them.&lt;/p&gt;

&lt;p&gt;2. The information encoded by BitSet is a set of &amp;lt;int,boolean&amp;gt; tuples.  These are opaque values.  In order for this to work, every tokenizer in the chain has to be aware of every other one&apos;s use of these.  This makes sharing hard.&lt;/p&gt;

&lt;p&gt;At a minimum, there should be some way to declare who&apos;s using what bit for what purpose - maybe through a static hash table or something?&lt;/p&gt;</comment>
                    <comment id="12559595" author="gsingers" created="Wed, 16 Jan 2008 17:24:47 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The information encoded by BitSet is a set of &amp;lt;int,boolean&amp;gt; tuples. These are opaque values. In order for this to work, every tokenizer in the chain has to be aware of every other one&apos;s use of these. This makes sharing hard.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;To some extent, though, the same is true for the current type() functionality.  One may decide to change the type, based on the value of the current type.&lt;/p&gt;

&lt;p&gt;While I agree the sharing is hard, it is not impossible, as one need just make sure to communicate which bits are available.  I suppose I could see about adding a isClaimed(int position) method or something like that, whereby one can query the chain to see if anyone claims ownership on that position.  I&apos;ll give that a try.  However, to some extent, I also think it is buyer beware in that TokenFilters further down the chain just need to be aware of what is going on.  This is part of constructing an Analyzer that works.&lt;/p&gt;

&lt;p&gt;As for the naming, I suppose we could do Flags, as Yonik suggests.&lt;/p&gt;</comment>
                    <comment id="12559606" author="gsingers" created="Wed, 16 Jan 2008 17:39:32 +0000"  >&lt;p&gt;Never mind on the isClaimed() idea, I don&apos;t see a good way of how that would work.&lt;/p&gt;</comment>
                    <comment id="12559607" author="yseeley@gmail.com" created="Wed, 16 Jan 2008 17:42:14 +0000"  >&lt;p&gt;If we go with the bitset (int or long!!!), &quot;type&quot; could be deprecated... there&apos;s no reason to have both.&lt;/p&gt;

&lt;p&gt;StandardTokenizer could define constants  to replace &lt;br/&gt;
public static final String [] TOKEN_TYPES = new String [] {&lt;br/&gt;
    &quot;&amp;lt;ALPHANUM&amp;gt;&quot;,&lt;br/&gt;
    &quot;&amp;lt;APOSTROPHE&amp;gt;&quot;,&lt;br/&gt;
    &quot;&amp;lt;ACRONYM&amp;gt;&quot;,&lt;br/&gt;
    &quot;&amp;lt;COMPANY&amp;gt;&quot;,&lt;br/&gt;
    &quot;&amp;lt;EMAIL&amp;gt;&quot;,&lt;br/&gt;
    &quot;&amp;lt;HOST&amp;gt;&quot;,&lt;br/&gt;
    &quot;&amp;lt;NUM&amp;gt;&quot;,&lt;br/&gt;
    &quot;&amp;lt;CJ&amp;gt;&quot;&lt;br/&gt;
};&lt;/p&gt;

&lt;p&gt;StandardTokenizer.ALPHANUM, etc&lt;/p&gt;</comment>
                    <comment id="12559627" author="gsingers" created="Wed, 16 Jan 2008 18:41:44 +0000"  >&lt;p&gt;Per feedback from Yonik, changes this to use an int.  The clear() method sets the flags value back to 0.&lt;/p&gt;</comment>
                    <comment id="12559637" author="steve_rowe" created="Wed, 16 Jan 2008 19:16:32 +0000"  >&lt;p&gt;Looks like the constructors still take a BitSet???&lt;/p&gt;

&lt;p&gt;My vote is for long instead of int, to maximize forward compatibility...&lt;/p&gt;</comment>
                    <comment id="12559642" author="gsingers" created="Wed, 16 Jan 2008 19:30:08 +0000"  >&lt;p&gt;Let&apos;s try a patch that actually compiles&lt;/p&gt;</comment>
                    <comment id="12562089" author="gsingers" created="Thu, 24 Jan 2008 15:01:16 +0000"  >&lt;p&gt;Committed on 614891&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12373307" name="LUCENE-1137.patch" size="4369" author="gsingers" created="Wed, 16 Jan 2008 19:30:08 +0000" />
                    <attachment id="12373301" name="LUCENE-1137.patch" size="4371" author="gsingers" created="Wed, 16 Jan 2008 18:41:44 +0000" />
                    <attachment id="12373293" name="LUCENE-1137.patch" size="3500" author="gsingers" created="Wed, 16 Jan 2008 16:47:41 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 16 Jan 2008 17:02:54 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12608</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26592</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>