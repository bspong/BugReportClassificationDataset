<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:19:18 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3378/LUCENE-3378.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3378] Some contribs depend on core tests to be compiled and fail when ant clean was done before</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3378</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;If you do &quot;ant clean&quot; on the root level of Lucene and then go to e.g. contrib/queryparser (3.x only) or contrib/misc (3.x and trunk) and call &quot;ant test&quot;, the build of tests fails:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;contrib/queryparser&apos;s ExtendedableQPTests extend a core TestQueryParser (3.x only, in module this works, of course)&lt;/li&gt;
	&lt;li&gt;contrib/misc/TestIndexSplitter uses a core class to build its index&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;To find the root cause: We should first remove the core tests from contrib classpath, so the issue gets visible even without &quot;ant clean&quot; before. Then we can fix this.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12519108">LUCENE-3378</key>
            <summary>Some contribs depend on core tests to be compiled and fail when ant clean was done before</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Aug 2011 13:55:14 +0100</created>
                <updated>Sun, 27 Nov 2011 12:31:43 +0000</updated>
                    <resolved>Wed, 17 Aug 2011 19:34:57 +0100</resolved>
                            <version>3.4</version>
                <version>4.0-ALPHA</version>
                                <fixVersion>3.4</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>general/test</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13086289" author="rcmuir" created="Wed, 17 Aug 2011 14:03:48 +0100"  >&lt;p&gt;I agree, in some of these cases, we might be able to refactor helper methods and such into tests-framework, which would be cleaner.&lt;/p&gt;

&lt;p&gt;we shouldn&apos;t necessarily do this in all cases, but at least clean up the obvious ones&lt;/p&gt;</comment>
                    <comment id="13086299" author="rcmuir" created="Wed, 17 Aug 2011 14:26:19 +0100"  >&lt;p&gt;patch for trunk&lt;/p&gt;</comment>
                    <comment id="13086302" author="rcmuir" created="Wed, 17 Aug 2011 14:28:21 +0100"  >&lt;p&gt;Here&apos;s the explanation (since patch will not apply as it contains svn moves):&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;disabled the lucene src/test from contrib classpath&lt;/li&gt;
	&lt;li&gt;moved the fieldcacherewritemethod and tests to core src/test, as discussed in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3271&quot; title=&quot;Move &amp;#39;good&amp;#39; contrib/queries classes to Queries module&quot;&gt;&lt;del&gt;LUCENE-3271&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;moved the europarl data file to tests-framework, because some contribs use it&lt;/li&gt;
	&lt;li&gt;moved that createDocument() method from TestIndexWriterReader to DocHelper&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;if there are no objections I would like to commit soon.&lt;/p&gt;</comment>
                    <comment id="13086310" author="thetaphi" created="Wed, 17 Aug 2011 14:39:53 +0100"  >&lt;p&gt;Patch for trunk looks fine! Thanks!&lt;/p&gt;

&lt;p&gt;The stupid 3.x-extends-TestQueryParser problem is more challenging &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13086320" author="rcmuir" created="Wed, 17 Aug 2011 15:00:58 +0100"  >&lt;p&gt;I agree, so the issue is still open for 3.x&lt;/p&gt;

&lt;p&gt;What i did was merge back the applicable improvements from the trunk patch, but the contrib classpath still contains src/test for now.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to look at the queryparser tests, in general maybe we can cleanup here, i&apos;ve noticed a lot of duplication in the tests before.&lt;br/&gt;
hopefully we can clean up the tests a bit and fix the build at the same time...&lt;/p&gt;</comment>
                    <comment id="13086336" author="rcmuir" created="Wed, 17 Aug 2011 15:21:52 +0100"  >&lt;p&gt;analyzers was broken too, i moved VocabularyAssert to tests-framework (trunk too)&lt;/p&gt;</comment>
                    <comment id="13086475" author="rcmuir" created="Wed, 17 Aug 2011 18:46:36 +0100"  >&lt;p&gt;ok this fixes branch_3x.&lt;/p&gt;

&lt;p&gt;I refactored TestQueryParser into a QueryParserTestBase, and extended it by the core TestQP and this ExtendableQP.&lt;/p&gt;

&lt;p&gt;Really we should clean this up more for a bunch of the other QPs, but this is a start and fixes the build.&lt;/p&gt;</comment>
                    <comment id="13086489" author="thetaphi" created="Wed, 17 Aug 2011 19:09:44 +0100"  >&lt;p&gt;I think thats fine as a start. This would not work in test-framework in trunk, but there we dont have that problem, as all QParsers live in one module. So the abstract base class can live there.&lt;/p&gt;</comment>
                    <comment id="13086502" author="rcmuir" created="Wed, 17 Aug 2011 19:34:57 +0100"  >&lt;p&gt;All done... its good you brought this up Uwe, &lt;/p&gt;

&lt;p&gt;in fact the ExtendableQPTest was not overriding the correct method, so really it wasnt being tested (we were just running the core QP tests again!!!!)&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12490648" name="LUCENE-3378.patch" size="20789" author="rcmuir" created="Wed, 17 Aug 2011 14:26:19 +0100" />
                    <attachment id="12490676" name="LUCENE-3378_qp.patch" size="100169" author="rcmuir" created="Wed, 17 Aug 2011 18:46:36 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 17 Aug 2011 13:03:48 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2722</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24318</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>