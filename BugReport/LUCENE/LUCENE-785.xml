<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:09:45 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-785/LUCENE-785.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-785] RAMDirectory not Serializable</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-785</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The current implementation of RAMDirectory throws a NotSerializableException when trying to serialize, due to the inner class KeySet of HashMap not being serializable (god knows why)&lt;/p&gt;

&lt;p&gt;java.io.NotSerializableException: java.util.HashMap$KeySet&lt;br/&gt;
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1081)&lt;/p&gt;

&lt;p&gt;Caused by line 43:&lt;/p&gt;

&lt;p&gt;private Set fileNames = fileMap.keySet();&lt;/p&gt;

&lt;p&gt;EDIT:&lt;/p&gt;

&lt;p&gt;while we&apos;re at it: same goes for inner class Values &lt;/p&gt;

&lt;p&gt;java.io.NotSerializableException: java.util.HashMap$Values&lt;br/&gt;
        at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1081)&lt;/p&gt;

&lt;p&gt;Collection files = fileMap.values();&lt;/p&gt;</description>
                <environment></environment>
            <key id="12361328">LUCENE-785</key>
            <summary>RAMDirectory not Serializable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="matthias.seidel">Matthias Seidel</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jan 2007 13:50:11 +0000</created>
                <updated>Tue, 27 Feb 2007 18:10:40 +0000</updated>
                    <resolved>Sat, 27 Jan 2007 20:40:19 +0000</resolved>
                            <version>2.1</version>
                                <fixVersion>2.1</fixVersion>
                                <component>core/store</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12467831" author="karl.wettin" created="Fri, 26 Jan 2007 14:31:06 +0000"  >&lt;p&gt;Hmm, this must be something fairly new. I had no problems when Serializable was introduced back in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-601&quot; title=&quot;RAMDirectory implements Serializable&quot;&gt;&lt;del&gt;LUCENE-601&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                    <comment id="12467832" author="sqisher" created="Fri, 26 Jan 2007 14:36:25 +0000"  >&lt;p&gt;That&apos;s what I heared from Matthias, too. (We work in the same company.) There were no problems with earlier versions of Lucene 2.1.&lt;/p&gt;</comment>
                    <comment id="12467838" author="mikemccand" created="Fri, 26 Jan 2007 15:05:51 +0000"  >&lt;p&gt;OK, here&apos;s a quick unit test that catches the regression:&lt;/p&gt;

&lt;p&gt;    public void testSerializable() throws IOException &lt;/p&gt;
{
        Directory dir = new RAMDirectory();
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutput out = new ObjectOutputStream(bos);
        out.writeObject(dir);
        out.close();
    }

&lt;p&gt;Using this I tracked down the commit that caused serializability to break:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;http://svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucene/store/RAMDirectory.java?p2=%2Flucene%2Fjava%2Ftrunk%2Fsrc%2Fjava%2Forg%2Fapache%2Flucene%2Fstore%2FRAMDirectory.java&amp;amp;p1=%2Flucene%2Fjava%2Ftrunk%2Fsrc%2Fjava%2Forg%2Fapache%2Flucene%2Fstore%2FRAMDirectory.java&amp;amp;r1=478014&amp;amp;r2=478013&amp;amp;view=diff&amp;amp;pathrev=478014&quot; class=&quot;external-link&quot;&gt;http://svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucene/store/RAMDirectory.java?p2=%2Flucene%2Fjava%2Ftrunk%2Fsrc%2Fjava%2Forg%2Fapache%2Flucene%2Fstore%2FRAMDirectory.java&amp;amp;p1=%2Flucene%2Fjava%2Ftrunk%2Fsrc%2Fjava%2Forg%2Fapache%2Flucene%2Fstore%2FRAMDirectory.java&amp;amp;r1=478014&amp;amp;r2=478013&amp;amp;view=diff&amp;amp;pathrev=478014&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This commit was for &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-709&quot; title=&quot;[PATCH] Enable application-level management of IndexWriter.ramDirectory size&quot;&gt;&lt;del&gt;LUCENE-709&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12468014" author="mikemccand" created="Sat, 27 Jan 2007 12:23:49 +0000"  >&lt;p&gt;Alas, it looks like HashMap.keySet() and .values() are just not serializable, and never will be:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4501848&quot; class=&quot;external-link&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4501848&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think keeping serialization for RAMDirectory is important.&lt;/p&gt;</comment>
                    <comment id="12468059" author="hossman" created="Sat, 27 Jan 2007 19:46:42 +0000"  >&lt;p&gt;maybe i&apos;m missing something, but this seema like a trivail fix ... HashMap is serializable &amp;#8211; it&apos;s just the persistent refrences to the keySet() and values() Collections that arne&apos;t serializable (fileNames and files)&lt;/p&gt;

&lt;p&gt;One is private, the other is package protected, so why don&apos;t we just get ride of them and fetch as needed?  (files isn&apos;t even used except in a Mock subclass for testing purposes)&lt;/p&gt;</comment>
                    <comment id="12468061" author="mikemccand" created="Sat, 27 Jan 2007 20:34:08 +0000"  >&lt;p&gt;I agree, and your fix looks great!  I will commit it.  Thanks Hoss.&lt;/p&gt;</comment>
                    <comment id="12476287" author="mikemccand" created="Tue, 27 Feb 2007 18:10:40 +0000"  >&lt;p&gt;Closing all issues that were resolved for 2.1.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12349743" name="ramdir.serializable.diff" size="3047" author="hossman" created="Sat, 27 Jan 2007 19:46:42 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 26 Jan 2007 14:31:06 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12968</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26945</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>