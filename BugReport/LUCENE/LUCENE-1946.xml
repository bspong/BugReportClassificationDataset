<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:28:00 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1946/LUCENE-1946.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1946] Remove deprecated TokenStream API</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1946</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I looked into clover analysis: It seems to be no longer used since I removed the tests yesterday - I am happy!&lt;/p&gt;</description>
                <environment></environment>
            <key id="12437221">LUCENE-1946</key>
            <summary>Remove deprecated TokenStream API</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Oct 2009 08:27:15 +0100</created>
                <updated>Mon, 16 May 2011 19:15:41 +0100</updated>
                    <resolved>Sun, 11 Oct 2009 18:35:33 +0100</resolved>
                                            <fixVersion>3.0</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12762008" author="thetaphi" created="Sun, 4 Oct 2009 10:00:15 +0100"  >&lt;p&gt;Short and simple patch for Lucene core. The tests were modified yesterday to no longer call deprecated TS methods and no longer use setOnlyUseNewAPI()&lt;/p&gt;</comment>
                    <comment id="12762024" author="thetaphi" created="Sun, 4 Oct 2009 13:50:17 +0100"  >&lt;p&gt;One general question:&lt;/p&gt;

&lt;p&gt;My last patch also removes the ISOLatin1AccentFilter, because it is deprecated. The problem with removing this filter is, that current indexes cannot be used anymore, because you have no possibility to add new documents using this filter in 3.0 or do queries with accents against it. Maybe we should leave this class deprecated alive or move it to contrib? Or we force people to reindex.&lt;/p&gt;

&lt;p&gt;The same applies to DateField from the o.a.l.document package. It is deprecated, so no one should use it, but we cannot remove it, because existing indexes need this support. This is different for e.g. Field.Store.COMPRESS, because you can still read the indexes (decompression is automatically), and can add new content without compression. Or reindex and use a own compression using byte[] stored field (as suggested).&lt;/p&gt;</comment>
                    <comment id="12762027" author="thetaphi" created="Sun, 4 Oct 2009 14:32:56 +0100"  >&lt;p&gt;Some more changes and additional tests (removed by the backwards-testcase removal). It now also fixes contrib/analyzers.&lt;/p&gt;

&lt;p&gt;There are still some problems in contrib like tests or old-style consumers.&lt;/p&gt;</comment>
                    <comment id="12762330" author="michaelbusch" created="Mon, 5 Oct 2009 20:52:10 +0100"  >&lt;p&gt;In case the change in our backwards-compatibility policy happens (see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1698&quot; title=&quot;Change backwards-compatibility policy&quot;&gt;LUCENE-1698&lt;/a&gt;) we could think about removing the old TokenStream API in 3.1, considering how central this API is. &lt;/p&gt;</comment>
                    <comment id="12762375" author="thetaphi" created="Mon, 5 Oct 2009 22:12:04 +0100"  >&lt;p&gt;I already promoted (and also Grant in his webinar) that Lucene 3.0 will not contain the old TokenStream API anymore. Nobody had problems with it (even the UIMA people were very happy about the new API, because it fits better to the UIMA architecture &lt;span class=&quot;error&quot;&gt;&amp;#91;they also have such things like Attribute but called different&amp;#93;&lt;/span&gt; - there was a conference about UIMA in Potsdam).&lt;/p&gt;

&lt;p&gt;I keep this patch pending (only the generics changes are submitted), but all tests for the BW compatibility were removed in my deprecated cleanup, so there are no tests for the old api anymore in trunk.&lt;/p&gt;</comment>
                    <comment id="12762386" author="michaelbusch" created="Mon, 5 Oct 2009 22:23:44 +0100"  >&lt;blockquote&gt;
&lt;p&gt;even the UIMA people were very happy about the new API, because it fits better to the UIMA architecture&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah, I had the feeling they like it too (had lunch with them a couple weeks ago when I was working from Boeblingen).&lt;/p&gt;

&lt;p&gt;I&apos;m personally ok with removing the old API; just thought Grant and others mentioned concerns about removing it too soon, because lots of users have their own TokenStreams.&lt;/p&gt;</comment>
                    <comment id="12764420" author="michaelbusch" created="Sun, 11 Oct 2009 06:18:29 +0100"  >&lt;p&gt;This patch was sitting here for a week now and it seems like nobody objects removing the old API in 3.0.&lt;/p&gt;

&lt;p&gt;So my +1 for committing this!&lt;/p&gt;</comment>
                    <comment id="12764431" author="thetaphi" created="Sun, 11 Oct 2009 09:32:39 +0100"  >&lt;p&gt;+1 from me too. The patch needs some more work, as I stopped somewhere in contrib to remove, as it was not clear to remove it for 3.0I will do the rest now. They only problem is InstantiatedIndexWriter, which still uses the old API to consume. I will try to modify it. But maybe this contrib will get removed (see other issue &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1948&quot; title=&quot;Deprecating InstantiatedIndexWriter&quot;&gt;&lt;del&gt;LUCENE-1948&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;So I will find out what to do.&lt;/p&gt;</comment>
                    <comment id="12764466" author="thetaphi" created="Sun, 11 Oct 2009 16:39:01 +0100"  >&lt;p&gt;Here the patch with all contrib&apos;s fixed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;PrecedenceQueryParser was missing new TokenStream API, I fixed it somehow with States and restoreState. I also added a javacc-target, which was missing&lt;/li&gt;
	&lt;li&gt;InstantiatedIndexWriter was also changed to use the new TokenStream API. The fix is very hackish, but works for the beginning. The class uses lots of Lists/Sets with cloned Token instances inside, so I simple used an AttributeImpl iterator and used copyTo(token). This works most cases (other cases are ignored by a empty Exception catch block). But this should really be fixed or the whole class removed (as suggested)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;There is one question: I removed IsoLatin1Filter. Thismay be a backwards break, so that old indexes using this filter in the analyzer need to be reindexed. But for most cases the AccentFilter would also work, but some hits may be missing when you query such an index. What should we do. Leave the deprecated analyzer in and remove it with 4.0 when all old indexes cannot be read anymore?&lt;/p&gt;</comment>
                    <comment id="12764467" author="rcmuir" created="Sun, 11 Oct 2009 16:43:35 +0100"  >&lt;blockquote&gt;
&lt;p&gt;There is one question: I removed IsoLatin1Filter. Thismay be a backwards break, so that old indexes using this filter in the analyzer need to be reindexed. But for most cases the AccentFilter would also work, but some hits may be missing when you query such an index. What should we do. Leave the deprecated analyzer in and remove it with 4.0 when all old indexes cannot be read anymore?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I do not think this is a backwards break, because IsoLatin1Filter is deprecated?&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; * @deprecated in favor of {@link ASCIIFoldingFilter} which covers a superset 
 * of Latin 1. This class will be removed in Lucene 3.0.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12764472" author="thetaphi" created="Sun, 11 Oct 2009 16:49:40 +0100"  >&lt;p&gt;This is correct. But e.g. NumberTools and DateTools will also stay deprecated in 3.0, because you need them to use Indexes from previous versions.&lt;/p&gt;

&lt;p&gt;So there is a difference between deprecated APIs and deprecated functionality that is maybe needed, as long as old indexes are available. With 4.0 we will change the index format and then the problem is gone.&lt;/p&gt;

&lt;p&gt;But I agree with you, the differences between both classes are so minimal and only western european languages would have used the ISO filter. The superset does not hurt, only when extended chars (&amp;gt;255) are involved.&lt;/p&gt;</comment>
                    <comment id="12764473" author="rcmuir" created="Sun, 11 Oct 2009 16:52:27 +0100"  >&lt;p&gt;Uwe, well this class already uses new tokenstream API, so it is not hurting anything right?&lt;br/&gt;
maybe follow what Mark said and keep it, change the javadoc to say &apos;this class will be removed in Lucene 4.0&apos; ?&lt;/p&gt;

&lt;p&gt;edit. also maybe another option, you could move it to contrib?&lt;/p&gt;</comment>
                    <comment id="12764474" author="thetaphi" created="Sun, 11 Oct 2009 17:03:01 +0100"  >&lt;p&gt;Cool idea. I move it to contrib/analyzers/common. But the class name will stay, the same so it will be in the top-level dir (without language suffix) as the only one.&lt;/p&gt;

&lt;p&gt;With NumberTools/DateField/DateTools we can do the same? This would be good in misc or somewhere else. But we then have to remove support for them from core&apos;s query parser? &amp;#8212; mhhm bad idea for the beginning. I leave it there &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12764476" author="rcmuir" created="Sun, 11 Oct 2009 17:06:46 +0100"  >&lt;blockquote&gt;&lt;p&gt;Cool idea. I move it to contrib/analyzers/common. But the class name will stay, the same so it will be in the top-level dir (without language suffix) as the only one. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;or maybe put it in misc also? I don&apos;t understand the Number/Date issues like you do, so maybe contrib is a bad idea... just throwing it out there.&lt;/p&gt;</comment>
                    <comment id="12764494" author="thetaphi" created="Sun, 11 Oct 2009 18:23:54 +0100"  >&lt;p&gt;Patch with ISOLatin1Filter deprecated with a hint to 4.0 and additional text. I also made the missing TokenStreams (intended not to be extended) final (see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1753&quot; title=&quot;Make not yet final core/contrib TokenStream/Filter implementations final&quot;&gt;&lt;del&gt;LUCENE-1753&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;All test pass. I will commit soon.&lt;/p&gt;</comment>
                    <comment id="12764497" author="thetaphi" created="Sun, 11 Oct 2009 18:35:33 +0100"  >&lt;p&gt;Committed revision: 824116&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310010">
                <name>Incorporates</name>
                                <outwardlinks description="incorporates">
                            <issuelink>
            <issuekey id="12430829">LUCENE-1753</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12421829" name="LUCENE-1946.patch" size="140701" author="thetaphi" created="Sun, 11 Oct 2009 18:23:54 +0100" />
                    <attachment id="12421823" name="LUCENE-1946.patch" size="148502" author="thetaphi" created="Sun, 11 Oct 2009 16:39:01 +0100" />
                    <attachment id="12421228" name="LUCENE-1946.patch" size="91229" author="thetaphi" created="Sun, 4 Oct 2009 14:32:56 +0100" />
                    <attachment id="12421223" name="LUCENE-1946.patch" size="41505" author="thetaphi" created="Sun, 4 Oct 2009 10:00:15 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 5 Oct 2009 19:52:10 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11824</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25779</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>