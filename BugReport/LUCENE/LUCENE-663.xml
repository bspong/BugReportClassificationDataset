<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:28:50 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-663/LUCENE-663.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-663] New feature rich higlighter for Lucene.</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-663</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Well, I refactored (took) some code from two previous highlighters.&lt;br/&gt;
This highlighter:&lt;br/&gt;
+ use TermPositionVector where available&lt;br/&gt;
+ use Analyzer if no TermPositionVector found or is forced to use it.&lt;br/&gt;
+ support for all lucene queries (Term, Phrase with slops, Prefix, Wildcard, Range) except Fuzzy Query (can be implemented easly)&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;has no support for scoring (yet)&lt;/li&gt;
	&lt;li&gt;use same prefix,postfix for accepted terms (yet)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;? It&apos;s written in Java5&lt;/p&gt;

&lt;p&gt;In next release I&apos;d like to add support for Fuzzy, &quot;coloring&quot; f.e. diffrent color for terms btw. phrase terms (slops), scoring of fragments&lt;/p&gt;

&lt;p&gt;It&apos;s apache licensed - I hope so &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I put licene statement in every file&lt;/p&gt;</description>
                <environment></environment>
            <key id="12348414">LUCENE-663</key>
            <summary>New feature rich higlighter for Lucene.</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="kareltejnora">Karel Tejnora</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2006 17:58:45 +0100</created>
                <updated>Tue, 25 Jan 2011 15:40:28 +0000</updated>
                    <resolved>Tue, 25 Jan 2011 15:40:28 +0000</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>3</watches>
                                                    <comments>
                    <comment id="12429816" author="markh" created="Tue, 22 Aug 2006 22:53:30 +0100"  >&lt;p&gt;Hi Karel.&lt;br/&gt;
Many thanks for taking the time to make a contribution.&lt;/p&gt;

&lt;p&gt;I would personally find it useful if you could describe your highlighter in terms of how it differs from existing implementations (the existing one in &quot;contrib&quot; and Ronnie Kolehmainen&apos;s recent contribution here: &lt;a href=&quot;http://issues.apache.org/jira/browse/LUCENE-644?page=all&quot; class=&quot;external-link&quot;&gt;http://issues.apache.org/jira/browse/LUCENE-644?page=all&lt;/a&gt; ) . This would help us understand whether to consider this as an improvement to the existing approach or an alternative with different functionality.&lt;/p&gt;

&lt;p&gt;I know for example that the existing contrib highlighter has all 3 of the functions you list as features (TermPositionVector/Analyzer support and support for all Lucene queries).&lt;/p&gt;

&lt;p&gt;The sorts of improvement I can think of would be if your solution was&lt;br/&gt;
a) faster&lt;br/&gt;
b) a lighter memory footprint&lt;br/&gt;
c) able to highlight span/phrase matches correctly &lt;br/&gt;
d) simpler to use&lt;/p&gt;

&lt;p&gt;So can you clarify what your motivations were and where you see the main differences/improvements over existing code?&lt;/p&gt;

&lt;p&gt;Thanks again,&lt;br/&gt;
Mark&lt;/p&gt;</comment>
                    <comment id="12429848" author="kareltejnora" created="Wed, 23 Aug 2006 01:06:25 +0100"  >&lt;p&gt;Hi,&lt;br/&gt;
yes as I  wrote in the code and keeps author - I borrow small code parts from this contribution &lt;a href=&quot;http://issues.apache.org/jira/browse/LUCENE-644?page=all&quot; class=&quot;external-link&quot;&gt;http://issues.apache.org/jira/browse/LUCENE-644?page=all&lt;/a&gt; &lt;br/&gt;
(where is a small bug when term is on or near to end of field - change lines 321:sb.append(cbuf, 0, EOF ? skip : (surround - skippedChars));  &lt;br/&gt;
276:int readed = reader.read(cbuf, 0, nextStart - pos); 278:sb.append(cbuf,0,readed);&lt;br/&gt;
also from WildcardTermEnum.&lt;/p&gt;

&lt;p&gt;Motivation - I was unable to find a highlighter with good performance and proper phrase highlight (at beginning I needed just phrase with slop 0).&lt;/p&gt;

&lt;p&gt;This highlighter results highlight for query &quot;karel drinks beer&quot;~4 on text karel drinks a lot of beers. Beer is his life. -&amp;gt; &amp;lt;SUFFIX&amp;gt;karel&amp;lt;/SUFFIX&amp;gt; &amp;lt;PREFIX&amp;gt;drinks&amp;lt;SUFFIX&amp;gt; a lot of  czech &amp;lt;PREFIX&amp;gt;beer&amp;lt;/SUFFIX&amp;gt;. Beer is his life.&lt;/p&gt;

&lt;p&gt;I started to implement a stack for phrase query - end up with this.  Still it is not final, fuzzy, span,scoring and coloring needs to be done.&lt;br/&gt;
I mean &apos;Coloring&apos;:&lt;br/&gt;
&amp;lt;PREFIX&amp;gt;karel&amp;lt;/SUFFIX&amp;gt; &amp;lt;PREFIX&amp;gt;drinks&amp;lt;SUFFIX&amp;gt; a &amp;lt;PREFIX1&amp;gt;lot&amp;lt;/SUFFIX1&amp;gt; of  &amp;lt;PREFIX1&amp;gt;czech&amp;lt;/SUFFIX1&amp;gt; &amp;lt;PREFIX&amp;gt;beer&amp;lt;/SUFFIX&amp;gt;. Beer is his life.&lt;/p&gt;

&lt;p&gt;for wild card BMW* -&amp;gt; &amp;lt;PREFIX&amp;gt;BMW&amp;lt;/SUFFIX&amp;gt;&amp;lt;PREFIX&amp;gt;ED&amp;lt;/SUFFIX1&amp;gt;&lt;br/&gt;
etc.&lt;/p&gt;

&lt;p&gt;So user can see why document matches his query.&lt;/p&gt;

&lt;p&gt;Usage is maybe more straightforward:&lt;/p&gt;

&lt;p&gt;Constructs Highlighter where all passed fields will be highlighted using TermPositionVector (where is not tpv null is returned)&lt;/p&gt;

&lt;p&gt;FulltextHighlighter highlighter = new FulltextHighlighter(reader,query,prefix,suffix);&lt;/p&gt;

&lt;p&gt;OR &lt;br/&gt;
Constructs Highlighter where all fields with highlight will be highlighted using Analyzer&lt;/p&gt;

&lt;p&gt;FulltextHighlighter highlighter = new FulltextHighlighter(analyzer,query,prefix,suffix);&lt;/p&gt;

&lt;p&gt;Constructs Highlighter where analyzer or TermVector will be autodetected&lt;br/&gt;
FulltextHighlighter highlighter = new FulltextHighlighter(reader, analyzer,query,prefix,suffix);&lt;/p&gt;

&lt;p&gt;And when iterating hits:&lt;br/&gt;
String higlightedText = highlighter.highlight(luceneDocumentID, luceneDocument, fieldName);  // To use tpv&lt;/p&gt;

&lt;p&gt;OR&lt;br/&gt;
String higlightedText = highlighter.highlight(luceneDocument, fieldName);  // To use analyzer, if tpv usage is forced assert reacts&lt;/p&gt;

&lt;p&gt;it has some options:&lt;br/&gt;
setAnalyzerUnstable(boolean analyzerUnstable)  set it false (default true) if you know that Token t&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_down.gif&quot; height=&quot;19&quot; width=&quot;19&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.startOffset() &amp;lt; t(n+1).startOffset&lt;br/&gt;
setMaxFragments(int i); max fragmets&lt;br/&gt;
setSurround(int surround);&lt;/p&gt;

&lt;p&gt;a) b) I don&apos;t know maybe it will be faster or lighter or none from both but I began because none from contributed and issued give &apos;nice&apos; results.&lt;br/&gt;
Im using a lot queries to search names like &quot;James Bond&quot; OR &quot;Sean Connery&quot; a this gives me nicer view why the document matches my query.&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Or I don&apos;t know how to use google&lt;/p&gt;</comment>
                    <comment id="12430480" author="ronniek" created="Fri, 25 Aug 2006 12:07:01 +0100"  >&lt;p&gt;Karel,&lt;/p&gt;

&lt;p&gt;although tests passed your 3 line fixes indeed look valid, so the files in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-644&quot; title=&quot;Contrib: another highlighter approach&quot;&gt;&lt;del&gt;LUCENE-644&lt;/del&gt;&lt;/a&gt; are updated accordingly. Thanks.&lt;/p&gt;
</comment>
                    <comment id="12442203" author="kareltejnora" created="Sat, 14 Oct 2006 03:45:58 +0100"  >
&lt;p&gt;   [[ Old comment, sent by email on Wed, 23 Aug 2006 02:21:04 +0200 ]]&lt;/p&gt;

&lt;p&gt;It is too late here...&lt;br/&gt;
to&lt;/p&gt;

&lt;p&gt;on text karel drinks a lot of beers. Beer is his life.&lt;/p&gt;

&lt;p&gt;should be :&lt;/p&gt;

&lt;p&gt;on text karel drinks a lot of czech beers. Beer is his life.&lt;/p&gt;


&lt;p&gt;(both are true... but second is better is all cases)&lt;/p&gt;

&lt;p&gt;Well is has support for Fuzzy Term if fuzzy term returns terms from &lt;br/&gt;
query.extractTerms&lt;/p&gt;</comment>
                    <comment id="12447678" author="harini.raghavan@insideview.com" created="Tue, 7 Nov 2006 06:23:05 +0000"  >
&lt;p&gt;   [[ Old comment, sent from unregistered email on Mon, 23 Oct 2006 04:09:23 -0700 ]]&lt;/p&gt;

&lt;p&gt;Hello Karen,&lt;/p&gt;

&lt;p&gt;I want to use the new Highlighter api for matching only phrases and not the individual tokens in the phrase. Can you please tell me where I can find the source for new highlighter api?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Harini&lt;/p&gt;

&lt;p&gt;Quoted from: &lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/-jira--Created%3A-%28LUCENE-663%29-New-feature-rich-higlighter-for-Lucene.-tf2147495.html#a5929597&quot; class=&quot;external-link&quot;&gt;http://www.nabble.com/-jira--Created%3A-%28LUCENE-663%29-New-feature-rich-higlighter-for-Lucene.-tf2147495.html#a5929597&lt;/a&gt;&lt;/p&gt;
</comment>
                    <comment id="12986444" author="thetaphi" created="Tue, 25 Jan 2011 15:40:28 +0000"  >&lt;p&gt;Since Lucene 2.9 we have FastVectorHighlighter which uses TermVectors to highligt. Also the conventional Highlighter was extended to support more query types.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12339332" name="ASF.LICENSE.NOT.GRANTED--lucene-hlt-src.jar" size="17727" author="kareltejnora" created="Tue, 22 Aug 2006 17:58:45 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 22 Aug 2006 21:53:30 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>13089</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>27067</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>