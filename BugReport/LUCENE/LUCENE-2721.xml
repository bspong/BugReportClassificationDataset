<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:05:04 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2721/LUCENE-2721.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2721] Random Failure TestSizeBoundedOptimize#testFirstSegmentTooLarge</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2721</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I am seeing this on trunk  &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
[junit] Testsuite: org.apache.lucene.index.TestSizeBoundedOptimize
    [junit] Testcase: testFirstSegmentTooLarge(org.apache.lucene.index.TestSizeBoundedOptimize):	FAILED
    [junit] expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;
    [junit] junit.framework.AssertionFailedError: expected:&amp;lt;2&amp;gt; but was:&amp;lt;1&amp;gt;
    [junit] 	at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:882)
    [junit] 	at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:848)
    [junit] 	at org.apache.lucene.index.TestSizeBoundedOptimize.testFirstSegmentTooLarge(TestSizeBoundedOptimize.java:160)
    [junit] 
    [junit] 
    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 0.658 sec
    [junit] 
    [junit] ------------- Standard Output ---------------
    [junit] NOTE: reproduce with: ant test -Dtestcase=TestSizeBoundedOptimize -Dtestmethod=testFirstSegmentTooLarge -Dtests.seed=7354441978302993522:-457602792543755447 -Dtests.multiplier=3
    [junit] NOTE: test params are: codec=Standard, locale=sv_SE, timezone=Mexico/BajaNorte
    [junit] ------------- ---------------- ---------------
    [junit] ------------- Standard Error -----------------
    [junit] NOTE: all tests run in this JVM:
    [junit] [TestSizeBoundedOptimize]
    [junit] ------------- ---------------- ---------------
    [junit] Test org.apache.lucene.index.TestSizeBoundedOptimize FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;when running with this seed&lt;br/&gt;
ant test -Dtestcase=TestSizeBoundedOptimize -Dtestmethod=testFirstSegmentTooLarge -Dtests.seed=7354441978302993522:-457602792543755447 -Dtests.multiplier=3&lt;/p&gt;</description>
                <environment></environment>
            <key id="12478149">LUCENE-2721</key>
            <summary>Random Failure TestSizeBoundedOptimize#testFirstSegmentTooLarge</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="shaie">Shai Erera</assignee>
                                <reporter username="simonw">Simon Willnauer</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 Oct 2010 13:09:42 +0100</created>
                <updated>Wed, 30 Mar 2011 16:50:28 +0100</updated>
                    <resolved>Sat, 23 Oct 2010 14:21:59 +0100</resolved>
                            <version>4.0-ALPHA</version>
                <version>CSF branch</version>
                                <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12924184" author="shaie" created="Sat, 23 Oct 2010 13:27:47 +0100"  >&lt;p&gt;I&apos;m checking it&lt;/p&gt;</comment>
                    <comment id="12924185" author="simonw" created="Sat, 23 Oct 2010 13:33:32 +0100"  >&lt;p&gt;here is a patch&lt;/p&gt;</comment>
                    <comment id="12924186" author="shaie" created="Sat, 23 Oct 2010 13:36:10 +0100"  >&lt;p&gt;Found it - the randomness set maxBufferedDocs too small, so smaller segments were created than the test anticipated. I&apos;ll post an update soon.&lt;/p&gt;</comment>
                    <comment id="12924187" author="shaie" created="Sat, 23 Oct 2010 13:48:05 +0100"  >&lt;p&gt;Simon, looks like we were working on it in parallel &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;

&lt;p&gt;The patch you added only takes care of that particular test case. This patch ensures all test cases won&apos;t be hit by this randomness problem, by ensuring IWC is not configured to flush by num docs or small RAM buffer size.&lt;/p&gt;

&lt;p&gt;Patch is against 3x, I&apos;ll port to trunk after I commit.&lt;/p&gt;</comment>
                    <comment id="12924194" author="simonw" created="Sat, 23 Oct 2010 14:10:15 +0100"  >&lt;p&gt;LGTM &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; thx&lt;/p&gt;</comment>
                    <comment id="12924195" author="rcmuir" created="Sat, 23 Oct 2010 14:12:09 +0100"  >&lt;p&gt;I don&apos;t like wiring this stuff for all tests.&lt;/p&gt;

&lt;p&gt;most tests don&apos;t care&lt;/p&gt;</comment>
                    <comment id="12924196" author="shaie" created="Sat, 23 Oct 2010 14:20:50 +0100"  >&lt;p&gt;What do you mean? If maxBufDocs is set low enough (as in this case), the tests that rely on the segments size as committed by them would fail. In fact, all tests care - if I rely on a segment size to be 3, and set maxMergeDocs to 2, but because of randomness there were 2 segments of size 2 + 1, then the test would fail.&lt;/p&gt;</comment>
                    <comment id="12924197" author="shaie" created="Sat, 23 Oct 2010 14:21:59 +0100"  >&lt;p&gt;Committed revision 1026614 (3x).&lt;br/&gt;
Committed revision 1026615 (trunk).&lt;/p&gt;</comment>
                    <comment id="12924213" author="rcmuir" created="Sat, 23 Oct 2010 17:49:28 +0100"  >&lt;p&gt;I don&apos;t think my comment was ambiguous.&lt;/p&gt;

&lt;p&gt;most tests don&apos;t care about this stuff&lt;/p&gt;</comment>
                    <comment id="12924214" author="shaie" created="Sat, 23 Oct 2010 17:55:12 +0100"  >&lt;p&gt;What do you mean by &apos;most test&apos;? Most test classes in Lucene, or most test cases in TestSizeBoundedOptimize? The test cases in the latter (where this &apos;wiring&apos; was done) do care.&lt;/p&gt;</comment>
                    <comment id="13013492" author="gsingers" created="Wed, 30 Mar 2011 16:50:28 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12457900" name="LUCENE-2721.patch" size="8331" author="shaie" created="Sat, 23 Oct 2010 13:48:05 +0100" />
                    <attachment id="12457899" name="LUCENE-2721.patch" size="641" author="simonw" created="Sat, 23 Oct 2010 13:33:31 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sat, 23 Oct 2010 12:27:47 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11126</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24971</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>