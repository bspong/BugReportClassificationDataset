<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:07:46 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2158/LUCENE-2158.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2158] NRT can temporarily lose deletions at high indexing rates</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2158</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;OK, I found a sneaky case where NRT can temporarily lose deletions.&lt;br/&gt;
The deletions aren&apos;t permanently lost - they are seen on the next&lt;br/&gt;
opened NRT reader.&lt;/p&gt;

&lt;p&gt;It happens like this (in IW.getReader):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;First flush() is called, to flush added docs &amp;amp; materialize the&lt;br/&gt;
    deletes.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;The very next statement enters a sync&apos;d block to open the reader,&lt;br/&gt;
    but, if indexing rate is very high, and threads get scheduled&lt;br/&gt;
    &quot;appropriately&quot;, a &quot;natural&quot; flush (due to RAM buffer being full&lt;br/&gt;
    or flush doc count being reached) could be hit before the sync&lt;br/&gt;
    block is entered, in which case that 2nd flush won&apos;t materialize&lt;br/&gt;
    the deletes associated with it, and the returned NRT reader will&lt;br/&gt;
    only see its adds until it&apos;s next reopened.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The fix is simple &amp;#8211; we should materialize deletes inside the sync&lt;br/&gt;
block, not during the flush.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12443349">LUCENE-2158</key>
            <summary>NRT can temporarily lose deletions at high indexing rates</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Dec 2009 09:56:06 +0000</created>
                <updated>Thu, 25 Feb 2010 10:18:04 +0000</updated>
                    <resolved>Wed, 16 Dec 2009 18:28:03 +0000</resolved>
                                            <fixVersion>2.9.2</fixVersion>
                <fixVersion>3.0.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12790639" author="mikemccand" created="Tue, 15 Dec 2009 10:05:19 +0000"  >&lt;p&gt;Attached patch.&lt;/p&gt;

&lt;p&gt;Jake/John, hopefully this explains what you guys were seeing in stress testing Lucene NRT!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12428022" name="LUCENE-2158.patch" size="2949" author="mikemccand" created="Tue, 15 Dec 2009 10:05:19 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11625</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25567</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>