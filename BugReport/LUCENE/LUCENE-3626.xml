<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:28:25 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3626/LUCENE-3626.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3626] Make PKIndexSplitter and MultiPassIndexSplitter work per segment</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3626</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Spinoff from &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3624&quot; title=&quot;Throw exception for &amp;quot;Multi-SortedSource&amp;quot; instead of returning null&quot;&gt;&lt;del&gt;LUCENE-3624&lt;/del&gt;&lt;/a&gt;: DocValuesw merger throws exception on IW.addIndexes(SlowMultiReaderWrapper) as string-index like docvalues cannot provide asSortedSource.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12534218">LUCENE-3626</key>
            <summary>Make PKIndexSplitter and MultiPassIndexSplitter work per segment</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Dec 2011 17:17:05 +0000</created>
                <updated>Fri, 10 May 2013 11:45:02 +0100</updated>
                    <resolved>Sat, 10 Dec 2011 22:35:19 +0000</resolved>
                            <version>3.5</version>
                <version>4.0-ALPHA</version>
                                <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/other</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13164538" author="thetaphi" created="Wed, 7 Dec 2011 17:20:01 +0000"  >&lt;p&gt;This only affects Lucene 4.0, as 3.x has no DocValues. The PKIndexSplitter per-segment variant could be backported to 3.x, but the MultiPassIndexSplitter working on absolute doc-Ids cannot handle that as AtomicReaderContext containing the docBase is not available in 3.x.&lt;/p&gt;</comment>
                    <comment id="13164539" author="thetaphi" created="Wed, 7 Dec 2011 17:21:20 +0000"  >&lt;p&gt;Correction: It could work, but it does not rectify the complexity.&lt;/p&gt;</comment>
                    <comment id="13164687" author="rcmuir" created="Wed, 7 Dec 2011 20:49:12 +0000"  >&lt;p&gt;this issue is &lt;b&gt;not&lt;/b&gt; broken by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3624&quot; title=&quot;Throw exception for &amp;quot;Multi-SortedSource&amp;quot; instead of returning null&quot;&gt;&lt;del&gt;LUCENE-3624&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Prior to &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3624&quot; title=&quot;Throw exception for &amp;quot;Multi-SortedSource&amp;quot; instead of returning null&quot;&gt;&lt;del&gt;LUCENE-3624&lt;/del&gt;&lt;/a&gt;, you just got a NullPointerException instead of a UnsupportedOperationException!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&lt;/p&gt;</comment>
                    <comment id="13164689" author="thetaphi" created="Wed, 7 Dec 2011 20:54:17 +0000"  >&lt;p&gt;Instead of complaining help to fix it. There was no better relation for it.&lt;/p&gt;</comment>
                    <comment id="13164696" author="rcmuir" created="Wed, 7 Dec 2011 21:01:42 +0000"  >&lt;p&gt;I&apos;m not complaining, but you marked my issue as breaking this functionality? thats insanity!&lt;/p&gt;

&lt;p&gt;Lets revisit the situation:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;As of yesterday, if you used one of these tools, &lt;b&gt;all&lt;/b&gt; docvalues fields were &lt;b&gt;silently dropped&lt;/b&gt; and merge succeeded (data loss)&lt;/li&gt;
	&lt;li&gt;I fixed this in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3623&quot; title=&quot;SegmentReader.getFieldNames ignores FieldOption.DOC_VALUES&quot;&gt;&lt;del&gt;LUCENE-3623&lt;/del&gt;&lt;/a&gt;, but in testing exposed the fact that with the data loss fixed, if you had a sortedsource, you would get a non-obvious NullPointerException deep in the docvalues codec stack.&lt;/li&gt;
	&lt;li&gt;Because of this &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3624&quot; title=&quot;Throw exception for &amp;quot;Multi-SortedSource&amp;quot; instead of returning null&quot;&gt;&lt;del&gt;LUCENE-3624&lt;/del&gt;&lt;/a&gt; changes the NullPointerException to UnsupportedOperationException so that its clear that this isn&apos;t working, and why.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="13164698" author="thetaphi" created="Wed, 7 Dec 2011 21:05:53 +0000"  >&lt;p&gt;Change the relations if you like and find better ones, I am out of this issue now - unassigned myself and I will unassign from other Lucene issues now because of this stupidness. Goodbye.&lt;/p&gt;</comment>
                    <comment id="13165274" author="mikemccand" created="Thu, 8 Dec 2011 15:47:08 +0000"  >&lt;p&gt;Shouldn&apos;t we just fix MultiDV to &quot;handle&quot; SortedSource?  Ie, merge the terms &amp;amp; assign ords, across all subs, just like FieldCache does (using MultiTermsEnum) if you ask for DocTermsIndex on a SlowMRWrapper.&lt;/p&gt;

&lt;p&gt;It&apos;s OK for this op to be costly &amp;#8211; SlowMRReader advertises this...&lt;/p&gt;</comment>
                    <comment id="13165327" author="thetaphi" created="Thu, 8 Dec 2011 16:57:31 +0000"  >&lt;p&gt;Mike, I agree with that! +1&lt;/p&gt;

&lt;p&gt;Still we might think about making the index splitter work per segment. The PKIndexSpliter already works with a standard Lucene Filter (by default TermRangeFilter), so it could handle the segmentreaders directly.&lt;/p&gt;</comment>
                    <comment id="13166901" author="thetaphi" created="Sat, 10 Dec 2011 15:31:49 +0000"  >&lt;p&gt;Patch that makes PKIndexSplitter and MultiPassIndexSplitter work per segment.&lt;/p&gt;

&lt;p&gt;It also fixes the stupid MultiReader initialize method which prevents finalness of fields. It also makes MultiReader.starts[]/readerIndex() public to get the doc bases.&lt;/p&gt;</comment>
                    <comment id="13166945" author="thetaphi" created="Sat, 10 Dec 2011 19:06:42 +0000"  >&lt;p&gt;New patch for the changes in trunk. It is ready to commit.&lt;/p&gt;</comment>
                    <comment id="13166990" author="thetaphi" created="Sat, 10 Dec 2011 22:06:48 +0000"  >&lt;p&gt;This can be backported to 3.6&lt;/p&gt;</comment>
                    <comment id="13166992" author="thetaphi" created="Sat, 10 Dec 2011 22:08:03 +0000"  >&lt;p&gt;Committed trunk revision: 1212894&lt;/p&gt;</comment>
                    <comment id="13166997" author="thetaphi" created="Sat, 10 Dec 2011 22:35:19 +0000"  >&lt;p&gt;Committed 3.x revision: 1212906&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12506861" name="LUCENE-3626.patch" size="8850" author="thetaphi" created="Sat, 10 Dec 2011 19:06:42 +0000" />
                    <attachment id="12506850" name="LUCENE-3626.patch" size="11538" author="thetaphi" created="Sat, 10 Dec 2011 15:31:48 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 7 Dec 2011 20:49:12 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>219941</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24072</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>