<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:28:59 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3874/LUCENE-3874.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3874] bogus positions create a corrumpt index</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3874</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Its pretty common that positionIncrement can overflow, this happens really easily &lt;br/&gt;
if people write analyzers that don&apos;t clearAttributes().&lt;/p&gt;

&lt;p&gt;It used to be the case that if this happened (and perhaps still is in 3.x, i didnt check),&lt;br/&gt;
that IW would throw an exception.&lt;/p&gt;

&lt;p&gt;But i couldnt find the code checking this, I wrote a test and it makes a corrumpt index...&lt;/p&gt;</description>
                <environment></environment>
            <key id="12546631">LUCENE-3874</key>
            <summary>bogus positions create a corrumpt index</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Mar 2012 17:54:04 +0000</created>
                <updated>Fri, 10 May 2013 11:44:02 +0100</updated>
                    <resolved>Fri, 16 Mar 2012 11:24:11 +0000</resolved>
                            <version>3.6</version>
                <version>4.0-ALPHA</version>
                                <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13230367" author="rcmuir" created="Thu, 15 Mar 2012 17:55:45 +0000"  >&lt;p&gt;Simple test that overflows posinc.&lt;/p&gt;

&lt;p&gt;Output is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;junit-sequential:
    [junit] Testsuite: org.apache.lucene.index.TestIndexWriterExceptions
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0.239 sec
    [junit] 
    [junit] ------------- Standard Output ---------------
    [junit] CheckIndex failed
    [junit] Segments file=segments_1 numSegments=1 version=4.0 format=FORMAT_4_0 [Lucene 4.0]
    [junit]   1 of 1: name=_0 docCount=1
    [junit]     codec=SimpleText
    [junit]     compound=false
    [junit]     hasProx=true
    [junit]     numFiles=4
    [junit]     size (MB)=0
    [junit]     diagnostics = {os.version=3.0.0-14-generic, os=Linux, lucene.version=4.0-SNAPSHOT, source=flush, os.arch=amd64, java.version=1.6.0_24, java.vendor=Sun Microsystems Inc.}
    [junit]     has deletions [delGen=-1]
    [junit]     test: open reader.........OK
    [junit]     test: fields..............OK [1 fields]
    [junit]     test: field norms.........OK [1 fields]
    [junit]     test: terms, freq, prox...ERROR: java.lang.RuntimeException: term [66 6f 6f]: doc 0: pos -2 is out of bounds
    [junit] java.lang.RuntimeException: term [66 6f 6f]: doc 0: pos -2 is out of bounds
    [junit] 	at org.apache.lucene.index.CheckIndex.testPostings(CheckIndex.java:860)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13230378" author="rcmuir" created="Thu, 15 Mar 2012 18:08:06 +0000"  >&lt;p&gt;3.x too: just s/TextField/Field to port the test&lt;/p&gt;</comment>
                    <comment id="13230397" author="rcmuir" created="Thu, 15 Mar 2012 18:28:33 +0000"  >&lt;p&gt;first cut at a patch, throws IllegalArgumentException and aborts the doc (ensuring fieldState never sees the overflow since i dont trust what happens to it after this!)&lt;/p&gt;</comment>
                    <comment id="13230402" author="mikemccand" created="Thu, 15 Mar 2012 18:32:03 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Crazy we don&apos;t catch this already...&lt;/p&gt;</comment>
                    <comment id="13230677" author="thetaphi" created="Thu, 15 Mar 2012 22:57:24 +0000"  >&lt;p&gt;+8&lt;/p&gt;</comment>
                    <comment id="13231016" author="simonw" created="Fri, 16 Mar 2012 09:59:36 +0000"  >&lt;p&gt;see my comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3876&quot; title=&quot;TestIndexWriterExceptions fails (reproducible)&quot;&gt;&lt;del&gt;LUCENE-3876&lt;/del&gt;&lt;/a&gt; - this triggers reproducible failures on trunk. &lt;/p&gt;</comment>
                    <comment id="13231076" author="rcmuir" created="Fri, 16 Mar 2012 11:24:11 +0000"  >&lt;p&gt;The solution here is 100% correct, we don&apos;t need to reopen it because its test found a separate, unrelated bug.&lt;/p&gt;

&lt;p&gt;any shit that limits your values to smaller than integer.max_value needs its own checks to fit, throwing UOE because its choosing not to support totally legitimate values from the analyzer.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12518501" name="LUCENE-3874.patch" size="2344" author="rcmuir" created="Thu, 15 Mar 2012 18:28:33 +0000" />
                    <attachment id="12518489" name="LUCENE-3874_test.patch" size="1066" author="rcmuir" created="Thu, 15 Mar 2012 17:55:45 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 15 Mar 2012 18:32:03 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>231790</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>23827</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>