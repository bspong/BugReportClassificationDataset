<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:58:02 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1724/LUCENE-1724.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1724] Analysis package calls Java 1.5 API</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1724</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I found compile errors when I tried to compile trunk with 1.4 JVM.&lt;br/&gt;
org.apache.lucene.analysis.NormalizeCharMap&lt;br/&gt;
org.apache.lucene.analysis.MappingCharFilter&lt;/p&gt;

&lt;p&gt;uses Character.valueOf() which has been added in 1.5.&lt;br/&gt;
I added a CharacterCache (+ testcase) with a valueOf method as a replacement for that quite useful method.&lt;/p&gt;

&lt;p&gt;org.apache.lucene.analysis.BaseTokenTestCase&lt;/p&gt;

&lt;p&gt;uses StringBuilder instead of the synchronized version StringBuffer (available in 1.4)&lt;/p&gt;

&lt;p&gt;I will attach a patch shortly.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12429179">LUCENE-1724</key>
            <summary>Analysis package calls Java 1.5 API</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="simonw">Simon Willnauer</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jun 2009 11:01:32 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:28 +0100</updated>
                    <resolved>Tue, 30 Jun 2009 11:51:45 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12725575" author="mikemccand" created="Tue, 30 Jun 2009 11:51:45 +0100"  >&lt;p&gt;Thanks Simon, I just committed this!  I added a deprecated note to CharacterCache to remind us to move to the 1.5 APIs, and replaced the &amp;lt;= 127 with &amp;lt; cache.length.&lt;/p&gt;</comment>
                    <comment id="12725583" author="simonw" created="Tue, 30 Jun 2009 12:37:44 +0100"  >&lt;p&gt;Michael, I wonder why hudson does still not catch this. Who is the hudson admin? We should change the JVM to a 1.4 VM on hudson if possible. If we need to send a request to infrastructure I could do so.&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="12725585" author="thetaphi" created="Tue, 30 Jun 2009 12:44:13 +0100"  >&lt;p&gt;The problem is, some contribs must be build with 1.5. So you need to use at least 1.5 for the whole build. The core and anaylsis javac are parametrized with -source and -target to 1.4 which generates 1.4 java classes out of only 1.4 compatible source code.&lt;/p&gt;

&lt;p&gt;The problem here is, that the java compiler has no possibility to check if a &lt;b&gt;method/class&lt;/b&gt; is available in 1.4, as it only knows his own rt.jar (normally it could e.g. use the @since javadoc tag, but this is not includedin the rt.jar and an annotation is not available). This is a well known problem to all java developers.&lt;/p&gt;</comment>
                    <comment id="12725586" author="thetaphi" created="Tue, 30 Jun 2009 12:48:25 +0100"  >&lt;p&gt;A possible solution would be &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-718&quot; title=&quot;possible build.xml addition to ensure 1.4 class compatibility&quot;&gt;&lt;del&gt;LUCENE-718&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    <comment id="12725587" author="simonw" created="Tue, 30 Jun 2009 12:54:20 +0100"  >&lt;blockquote&gt;&lt;p&gt;A possible solution would be &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-718&quot; title=&quot;possible build.xml addition to ensure 1.4 class compatibility&quot;&gt;&lt;del&gt;LUCENE-718&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Either this way (I use setting boot classpath all the time for different rt.jar) or we split the build procedure into two steps. Frist step: build core with 1.4 JDK Second Step: build contrib with 1.5 JDK. That way we need two hudson &quot;Jobs&quot; with dependencies to each other. I guess hudson lets you define this quite flexible. &lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="12725589" author="thetaphi" created="Tue, 30 Jun 2009 13:00:44 +0100"  >&lt;blockquote&gt;&lt;p&gt;Second Step: build contrib with 1.5 JDK&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Only those with 1.5, all other contribs  together with core. So add something -Djavac.target to ant, that specifies what to compile and test. If it is 1.4, all 1.5 contribs are left out.&lt;/p&gt;

&lt;p&gt;In my opinion, this is too late to change. After 2.9 will come 3.0 with Java 1.5 support. As noted in the mailing lists before, I would suggest, that the release process should simply include a test-compilation with 1.4 (I think it is noted in the Wiki, that this must be done before packaging the artifacts).&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12412149" name="CharacterCache.patch" size="5804" author="simonw" created="Tue, 30 Jun 2009 11:02:36 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 30 Jun 2009 10:51:45 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12035</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26002</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>