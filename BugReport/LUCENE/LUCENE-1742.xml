<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:58:57 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1742/LUCENE-1742.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1742] Wrap SegmentInfos in public class </title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1742</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Wrap SegmentInfos in a public class so that subclasses of MergePolicy do not need to be in the org.apache.lucene.index package.  &lt;/p&gt;</description>
                <environment></environment>
            <key id="12430308">LUCENE-1742</key>
            <summary>Wrap SegmentInfos in public class </summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.png">Trivial</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="jasonrutherglen">Jason Rutherglen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jul 2009 01:44:14 +0100</created>
                <updated>Fri, 10 May 2013 11:44:16 +0100</updated>
                    <resolved>Sun, 26 Jun 2011 13:23:39 +0100</resolved>
                            <version>2.4.1</version>
                                <fixVersion>2.9</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                          <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                    <timeestimate seconds="172800">48h</timeestimate>
                                  <comments>
                    <comment id="12730640" author="jasonrutherglen" created="Tue, 14 Jul 2009 01:59:19 +0100"  >&lt;p&gt;In order for this class to be compatible with out current&lt;br/&gt;
default LogMergePolicy, we&apos;ll need to expose readers from the IW&lt;br/&gt;
reader pool. This is because presumably classes may need to&lt;br/&gt;
access readers such as in&lt;br/&gt;
LogMergePolicy.findMergesToExpungeDeletes.&lt;/p&gt;</comment>
                    <comment id="12730644" author="jasonrutherglen" created="Tue, 14 Jul 2009 02:16:47 +0100"  >&lt;p&gt;After looking at it, I wasn&apos;t sure why we couldn&apos;t simply make&lt;br/&gt;
the read only methods in SegmentInfo and SegmentInfos (and the&lt;br/&gt;
classes) public. &lt;/p&gt;

&lt;p&gt;Maybe this can make it into 2.9?&lt;/p&gt;</comment>
                    <comment id="12730755" author="mikemccand" created="Tue, 14 Jul 2009 10:49:27 +0100"  >&lt;p&gt;I agree it&apos;d be good to do this, and this baby step (making the read-only methods public) seems like a good start.&lt;/p&gt;

&lt;p&gt;Would we want better names here (Segments/Segment), as Earwin suggested a while back?&lt;/p&gt;

&lt;p&gt;Can you also mark these classes as Expert and add the &quot;subject to change w/o warning between releases&quot; caveat?&lt;/p&gt;</comment>
                    <comment id="12731039" author="jasonrutherglen" created="Tue, 14 Jul 2009 19:42:27 +0100"  >&lt;ul&gt;
	&lt;li&gt;Added some more javadocs (as suggested). More could be added&lt;br/&gt;
to the SegmentInfo and SegmentInfos methods.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Made SegmentReader public. I think we need to do this as it&apos;s&lt;br/&gt;
becoming more necessary after &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1483&quot; title=&quot;Change IndexSearcher multisegment searches to search each individual segment using a single HitCollector&quot;&gt;&lt;del&gt;LUCENE-1483&lt;/del&gt;&lt;/a&gt; where the user may&lt;br/&gt;
access individual readers? &lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;Would we want better names here (Segments/Segment), as&lt;br/&gt;
Earwin suggested a while back?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Wouldn&apos;t this require a bunch of renaming/refactoring? Earwin&lt;br/&gt;
what was your suggestion? (couldn&apos;t find it)&lt;/p&gt;</comment>
                    <comment id="12732042" author="mikemccand" created="Thu, 16 Jul 2009 18:34:14 +0100"  >&lt;p&gt;I don&apos;t think we should make IndexWriter&apos;s ReaderPool public just yet?  Maybe instead we can add API to query for whether a segment has pending unflushed deletes?  (And fix core merge policies to use that API when deciding how to expungeDeletes).&lt;/p&gt;</comment>
                    <comment id="12732155" author="jasonrutherglen" created="Thu, 16 Jul 2009 21:55:54 +0100"  >&lt;ul&gt;
	&lt;li&gt;Reader pool isn&apos;t public anymore&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Left methods of reader as public (could roll back?)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I&apos;d rather that readerpool be public, however since it&apos;s new I&lt;br/&gt;
guess we don&apos;t want people relying on it?&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;All tests pass&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;It would be great to get this into 2.9&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12732702" author="mikemccand" created="Fri, 17 Jul 2009 20:47:15 +0100"  >&lt;p&gt;Latest patch looks good Jason!  I&apos;ll commit soon.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;since it&apos;s new I guess we don&apos;t want people relying on it?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right, and, we haven&apos;t thought about / tested for users randomly checking out readers from a writer at different times, it&apos;d make me nervous to expose that now.&lt;/p&gt;</comment>
                    <comment id="12732738" author="jasonrutherglen" created="Fri, 17 Jul 2009 22:07:44 +0100"  >&lt;p&gt;LogMergePolicy needs to access the pooled reader&apos;s num deletes.  I&apos;ll add it, remove IW.hasDeletes, and offer IW.numDeletedDocs(SegmentInfo)&lt;/p&gt;</comment>
                    <comment id="12732755" author="jasonrutherglen" created="Fri, 17 Jul 2009 23:05:54 +0100"  >&lt;ul&gt;
	&lt;li&gt;Added IW.numDeletedDocs method which LogMergePolicy uses to obtain the delCount of an info&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Updated to trunk&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12732915" author="mikemccand" created="Sat, 18 Jul 2009 17:08:05 +0100"  >&lt;p&gt;Attached patch with tiny changes: made a few more read-only methods public, fixed javadoc warning, one formatting fix, added CHANGES.&lt;/p&gt;

&lt;p&gt;I think it&apos;s ready to commit.  I&apos;ll commit soon...&lt;/p&gt;</comment>
                    <comment id="12733002" author="mikemccand" created="Sun, 19 Jul 2009 14:31:36 +0100"  >&lt;p&gt;Thanks Jason!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12413930" name="LUCENE-1742.patch" size="15769" author="mikemccand" created="Sat, 18 Jul 2009 17:08:05 +0100" />
                    <attachment id="12413879" name="LUCENE-1742.patch" size="14049" author="jasonrutherglen" created="Fri, 17 Jul 2009 23:05:54 +0100" />
                    <attachment id="12413736" name="LUCENE-1742.patch" size="12423" author="jasonrutherglen" created="Thu, 16 Jul 2009 21:55:54 +0100" />
                    <attachment id="12413461" name="LUCENE-1742.patch" size="10705" author="jasonrutherglen" created="Tue, 14 Jul 2009 19:42:27 +0100" />
                    <attachment id="12413369" name="LUCENE-1742.patch" size="5331" author="jasonrutherglen" created="Tue, 14 Jul 2009 02:16:47 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>5.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 14 Jul 2009 09:49:27 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12017</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25984</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>