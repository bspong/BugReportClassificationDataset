<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:28:10 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2404/LUCENE-2404.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2404] Improve speed of ThaiWordFilter by CharacterIterator, factor out LowerCasing and also fix some bugs (empty tokens stop iteration)</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2404</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The ThaiWordFilter creates new Strings out of term buffer before passing to The BreakIterator., But BreakIterator can take a CharacterIterator and directly process on it without buffer copying.&lt;br/&gt;
As Java itsself does not provide a CharacterIterator implementation in java.text, we can use the javax.swing.text.Segment class, that operates on a char[] and is even reuseable! This class is very strange but it works and is in JDK 1.4+ and not deprecated.&lt;/p&gt;

&lt;p&gt;The filter also had a bug: It stopped iterating tokens when an empty token occurred. Also the lowercasing for non-thai words was removed and put into the Analyzer by adding LowerCaseFilter.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12462455">LUCENE-2404</key>
            <summary>Improve speed of ThaiWordFilter by CharacterIterator, factor out LowerCasing and also fix some bugs (empty tokens stop iteration)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Apr 2010 18:38:50 +0100</created>
                <updated>Mon, 16 May 2011 19:15:47 +0100</updated>
                    <resolved>Mon, 19 Apr 2010 21:58:17 +0100</resolved>
                                            <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12858615" author="thetaphi" created="Mon, 19 Apr 2010 19:00:09 +0100"  >&lt;p&gt;New patch, which preserves backwards with matchVersion. It adds an LowerCaseFilter in the ctor of ThaiWordFilter automatically, so the bahviour does not change, except a second bug:&lt;br/&gt;
The previous version of the filter did not correctly lowercase a token that contains &quot;ThaiEnglishThai&quot; text. As the filter is now plugged before, it will lowercase this correctly, so its a backwards break.&lt;/p&gt;

&lt;p&gt;Since Version 3.1, the filter is no longer automatically used, instead ThaiAnalyzer plugs it before the filter (I reversed the order in contrast to previous patch to have the same order in deprecated and actual case).&lt;/p&gt;</comment>
                    <comment id="12858618" author="rcmuir" created="Mon, 19 Apr 2010 19:17:27 +0100"  >&lt;p&gt;This is great. it already more than doubles the speed of this filter on english text...&lt;/p&gt;

&lt;p&gt;but this filter has always been cheating with the UnicodeBlock check on charAt(0), as you could have EnglishThaiEnglish too.&lt;br/&gt;
it also cheats because it doesn&apos;t check that the break boundaries are words, and not just spaces or punctuation.&lt;/p&gt;

&lt;p&gt;I suppose the above two things are not much of a problem if you assume StandardTokenizer, but maybe a problem for&lt;br/&gt;
other Tokenizers... tricky to figure out how to make it correct and still as fast as the &apos;cheating&apos;&lt;/p&gt;</comment>
                    <comment id="12858621" author="thetaphi" created="Mon, 19 Apr 2010 19:24:45 +0100"  >&lt;p&gt;Another variant of the previous patch, slightly faster as Robert said, maybe we get an inspiration by that. It uses cloneAttributes and does not create new clones all the time.&lt;/p&gt;</comment>
                    <comment id="12858624" author="rcmuir" created="Mon, 19 Apr 2010 19:32:37 +0100"  >&lt;p&gt;Looking at Uwe&apos;s code points out there is another bug in the old filter, &lt;br/&gt;
it does not really handle position increments correctly.&lt;/p&gt;

&lt;p&gt;So if there is a stopword or some other posInc it gets applied to all&lt;br/&gt;
subwords... in my opinion only the first token should carry this.&lt;/p&gt;

&lt;p&gt;Otherwise you can have problems like &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1852&quot; title=&quot;enablePositionIncrements=&amp;quot;true&amp;quot; can cause searches to fail when they are parsed as phrase queries&quot;&gt;&lt;del&gt;SOLR-1852&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12858645" author="thetaphi" created="Mon, 19 Apr 2010 20:29:31 +0100"  >&lt;p&gt;Yes, this is not a problem if you use the ThaiAnalyzer, as StopFilter comes after this filter. But users of Solr plugging this filter after a StopFilter will have problems.&lt;/p&gt;</comment>
                    <comment id="12858670" author="thetaphi" created="Mon, 19 Apr 2010 21:33:32 +0100"  >&lt;p&gt;New version of the cloneAttributes-version, that produces correct position increments with matchVersion=3.1.&lt;/p&gt;</comment>
                    <comment id="12858672" author="rcmuir" created="Mon, 19 Apr 2010 21:35:38 +0100"  >&lt;p&gt;Nice Uwe. So this patch fixes quite a few bugs and speeds things up... do you want to commit?&lt;/p&gt;</comment>
                    <comment id="12858678" author="thetaphi" created="Mon, 19 Apr 2010 21:43:49 +0100"  >&lt;p&gt;I will commit this soon after adding changes.&lt;/p&gt;</comment>
                    <comment id="12858680" author="thetaphi" created="Mon, 19 Apr 2010 21:58:17 +0100"  >&lt;p&gt;Committed revisions: 935734 (Lucene) &amp;amp; 935739 (Solr)&lt;/p&gt;</comment>
                    <comment id="13013480" author="gsingers" created="Wed, 30 Mar 2011 16:50:26 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12442226" name="LUCENE-2404-2.patch" size="7041" author="thetaphi" created="Mon, 19 Apr 2010 21:33:32 +0100" />
                    <attachment id="12442205" name="LUCENE-2404-2.patch" size="5804" author="thetaphi" created="Mon, 19 Apr 2010 19:24:45 +0100" />
                    <attachment id="12442202" name="LUCENE-2404.patch" size="5107" author="thetaphi" created="Mon, 19 Apr 2010 19:00:09 +0100" />
                    <attachment id="12442201" name="LUCENE-2404.patch" size="4369" author="thetaphi" created="Mon, 19 Apr 2010 18:39:22 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 19 Apr 2010 18:17:27 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11398</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25287</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>