<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:03:53 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1430/LUCENE-1430.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1430] IndexReader.open(String|File) may incorrectly throw AlreadyClosedException</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1430</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Spinoff from here:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;http://www.nabble.com/Runtime-exception-when-creating-IndexSearcher-to20226279.html&quot; class=&quot;external-link&quot;&gt;http://www.nabble.com/Runtime-exception-when-creating-IndexSearcher-to20226279.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you open an IndexSearcher/Reader, passing in String or File, then&lt;br/&gt;
closeDirectory is set to true in the reader.&lt;/p&gt;

&lt;p&gt;If the index has a single segment, then SegmentReader.get is used to&lt;br/&gt;
open the index.  If an IOException is hit in there, the SegmentReader&lt;br/&gt;
closes itself and then closes the directory since closeDirectory is&lt;br/&gt;
true.&lt;/p&gt;

&lt;p&gt;The problem is, the retry logic in SegmentInfos (to look for another&lt;br/&gt;
segments_N to try) kicks in and hits an AlreadyClosedException,&lt;br/&gt;
masking the original root cause.&lt;/p&gt;

&lt;p&gt;Workaround is to separately get the Directory using&lt;br/&gt;
FSDirectory.getDirectory, and then instantiate IndexSearcher/Reader&lt;br/&gt;
from that.&lt;/p&gt;

&lt;p&gt;This manifests as masking the root cause of a corrupted single-segment&lt;br/&gt;
index with a confusing AlreadyClosedException.  You could also hit&lt;br/&gt;
the false exception if the writer was in the process of committing&lt;br/&gt;
(ie, a retry was really needed) or if there is some transient IO&lt;br/&gt;
problem opening the index (eg too many open files).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12407451">LUCENE-1430</key>
            <summary>IndexReader.open(String|File) may incorrectly throw AlreadyClosedException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Oct 2008 19:04:36 +0000</created>
                <updated>Fri, 25 Sep 2009 17:23:12 +0100</updated>
                    <resolved>Thu, 19 Feb 2009 09:47:32 +0000</resolved>
                            <version>2.1</version>
                <version>2.2</version>
                <version>2.3</version>
                <version>2.3.1</version>
                <version>2.3.2</version>
                <version>2.4</version>
                                <fixVersion>2.4.1</fixVersion>
                <fixVersion>2.9</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12643612" author="mikemccand" created="Wed, 29 Oct 2008 19:12:08 +0000"  >&lt;p&gt;Attached patch.  I plan to commit in a day or so.&lt;/p&gt;</comment>
                    <comment id="12644326" author="mikemccand" created="Fri, 31 Oct 2008 16:09:28 +0000"  >&lt;p&gt;Committed revision 709456.&lt;/p&gt;</comment>
                    <comment id="12674853" author="mikemccand" created="Thu, 19 Feb 2009 01:37:22 +0000"  >&lt;p&gt;Reopening for backport to 2.4.1.&lt;/p&gt;</comment>
                    <comment id="12674939" author="mikemccand" created="Thu, 19 Feb 2009 09:47:32 +0000"  >&lt;p&gt;Committed revision 745794 on 2.4 branch.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12393003" name="LUCENE-1430.patch" size="4420" author="mikemccand" created="Wed, 29 Oct 2008 19:12:07 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12321</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26298</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>