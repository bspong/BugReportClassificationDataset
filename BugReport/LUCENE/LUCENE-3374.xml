<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:00:22 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3374/LUCENE-3374.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3374] move nrtcachingdir to core in 4.0</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3374</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;in 4.0 with the IOContext changes this implementation is clean and I think we should move it to core and use it in our tests etc.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12518883">LUCENE-3374</key>
            <summary>move nrtcachingdir to core in 4.0</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Aug 2011 14:50:41 +0100</created>
                <updated>Fri, 10 May 2013 11:42:55 +0100</updated>
                    <resolved>Fri, 16 Dec 2011 02:10:40 +0000</resolved>
                                            <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13085101" author="thetaphi" created="Mon, 15 Aug 2011 15:24:12 +0100"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                    <comment id="13085162" author="mikemccand" created="Mon, 15 Aug 2011 17:52:15 +0100"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Are tests OK w/ randomly using NRTCachingDir?  Might find some interesting bugs...&lt;/p&gt;</comment>
                    <comment id="13085168" author="rcmuir" created="Mon, 15 Aug 2011 17:58:45 +0100"  >&lt;p&gt;I ran them once and they passed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13086609" author="rcmuir" created="Wed, 17 Aug 2011 22:34:24 +0100"  >&lt;p&gt;I ran them again and got a fail:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Testsuite: org.apache.lucene.index.TestCrash
    [junit] Testcase: testWriterAfterCrash(org.apache.lucene.index.TestCrash):	FAILED
    [junit] (null)
    [junit] junit.framework.AssertionFailedError
    [junit] 	at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1535)
    [junit] 	at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1437)
    [junit] 	at org.apache.lucene.store.NRTCachingDirectory.deleteFile(NRTCachingDirectory.java:158)
    [junit] 	at org.apache.lucene.store.MockDirectoryWrapper.deleteFile(MockDirectoryWrapper.java:336)
    [junit] 	at org.apache.lucene.store.MockDirectoryWrapper.deleteFile(MockDirectoryWrapper.java:294)
    [junit] 	at org.apache.lucene.index.IndexFileDeleter.deleteFile(IndexFileDeleter.java:572)
    [junit] 	at org.apache.lucene.index.IndexFileDeleter.&amp;lt;init&amp;gt;(IndexFileDeleter.java:273)
    [junit] 	at org.apache.lucene.index.IndexWriter.&amp;lt;init&amp;gt;(IndexWriter.java:906)
    [junit] 	at org.apache.lucene.index.TestCrash.initIndex(TestCrash.java:39)
    [junit] 	at org.apache.lucene.index.TestCrash.testWriterAfterCrash(TestCrash.java:85)
    [junit] 
    [junit] 
    [junit] Tests run: 7, Failures: 1, Errors: 0, Time elapsed: 6.618 sec
    [junit] 
    [junit] ------------- Standard Error -----------------
    [junit] NOTE: reproduce with: ant test -Dtestcase=TestCrash -Dtestmethod=testWriterAfterCrash -Dtests.seed=3196b05b20cf6a20:6f1b3eaa7f0f71ee:557c08ae3c634d12
    [junit] NOTE: test params are: codec=RandomCodecProvider: {id=MockVariableIntBlock(baseBlockSize=68), content=Pulsing(freqCutoff=16)}, locale=de_CH, timezone=Asia/Jakarta
    [junit] NOTE: all tests run in this JVM:
    [junit] [TestAssertions, TestCharTermAttributeImpl, TestAtomicUpdate, TestByteSlices, TestCodecs, TestCrash]
    [junit] NOTE: Linux 2.6.38-10-generic amd64/Sun Microsystems Inc. 1.6.0_24 (64-bit)/cpus=8,threads=1,free=248890808,total=349569024
    [junit] ------------- ---------------- ---------------
    [junit] TEST org.apache.lucene.index.TestCrash FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I cannot commit this patch just yet, I&apos;ll look into this fail later this evening.&lt;/p&gt;</comment>
                    <comment id="13086711" author="rcmuir" created="Thu, 18 Aug 2011 01:50:51 +0100"  >&lt;p&gt;updated patch: I fixed TestCrash, because this crazy test does evil things that violate the assert (the assert itself looks good and I think we want it enabled).&lt;/p&gt;

&lt;p&gt;So I added expert &apos;maybeWrap&apos; booleans so that crazy tests like this can intentionally not use NRTCachingDir.&lt;/p&gt;

&lt;p&gt;But, there are more problems in other tests (FNFEs). I wired the boolean with a nocommit to true in the patch so that these occur every time. might be a real bug in here...&lt;/p&gt;</comment>
                    <comment id="13086736" author="rcmuir" created="Thu, 18 Aug 2011 02:59:25 +0100"  >&lt;p&gt;patch fixing the fails.&lt;/p&gt;

&lt;p&gt;This directory was &lt;b&gt;seriously screwed&lt;/b&gt; if you use compound file format. &lt;/p&gt;

&lt;p&gt;There&apos;s one fail left in TestFSDir, havent looked yet, might be a false one. &lt;/p&gt;

&lt;p&gt;But we should backport this compound file stuff to 3.x ... maybe make a standalone test for it there.&lt;/p&gt;</comment>
                    <comment id="13086750" author="rcmuir" created="Thu, 18 Aug 2011 03:30:03 +0100"  >&lt;p&gt;ok, all tests pass. The last bugs were stupid (see my comments in the patch), but these are also bugs in FileSwitchDirectory.&lt;/p&gt;

&lt;p&gt;I&apos;m gonna open a separate issue to turn on FileSwitchDirectory in tests and lets fix this stuff there too.&lt;/p&gt;</comment>
                    <comment id="13086855" author="thetaphi" created="Thu, 18 Aug 2011 08:28:42 +0100"  >&lt;p&gt;I assume the bugs in FileSwitchDirectory are the same NotExists Exceptions thrown &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;We should maybe also add FileSwitchDirectory to the list of random directories. It could create two random directories (using LTC.newDirectory(false) 2 times with a suffix on the dir name like &quot;.1&quot; and &quot;.2&quot;) and combine them with a FileSwitchDirectory. The Set&amp;lt;String&amp;gt; of extensions could be a random list of extensions from the IndexFileNames collection.&lt;/p&gt;</comment>
                    <comment id="13086857" author="thetaphi" created="Thu, 18 Aug 2011 08:30:18 +0100"  >&lt;p&gt;Oh, see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-3380&quot; title=&quot;enable FileSwitchDirectory randomly in tests and fix compound-file/NoSuchDirectoryException bugs&quot;&gt;LUCENE-3380&lt;/a&gt; o&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13087066" author="rcmuir" created="Thu, 18 Aug 2011 16:39:52 +0100"  >&lt;p&gt;I don&apos;t want to mix fixing these bugs with moving to core. I&apos;m going to create a separate issue for the bugs.&lt;/p&gt;

&lt;p&gt;The whole compound file stuff seems unfixable, so I&apos;m gonna just fix it like we have it here.&lt;/p&gt;</comment>
                    <comment id="13170700" author="rcmuir" created="Fri, 16 Dec 2011 02:10:40 +0000"  >&lt;p&gt;i turned on this directory in tests, but we should check out TestDoc and TestCrash.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12490735" name="LUCENE-3374.patch" size="25021" author="rcmuir" created="Thu, 18 Aug 2011 03:30:03 +0100" />
                    <attachment id="12490733" name="LUCENE-3374.patch" size="23837" author="rcmuir" created="Thu, 18 Aug 2011 02:59:25 +0100" />
                    <attachment id="12490725" name="LUCENE-3374.patch" size="21788" author="rcmuir" created="Thu, 18 Aug 2011 01:50:51 +0100" />
                    <attachment id="12490431" name="LUCENE-3374.patch" size="16345" author="rcmuir" created="Mon, 15 Aug 2011 14:51:14 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 15 Aug 2011 14:24:12 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4115</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24322</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>