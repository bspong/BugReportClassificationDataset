<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:03:28 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-495/LUCENE-495.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-495] Suggested Patches to MultiPhraseQuery and QueryTermExtractor (for use with HighLighter)</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-495</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I encountered a problem with the Highlighter, where it was not recognizing MultiPhraseQuery.&lt;br/&gt;
To fix this, I developed the following two patches:&lt;/p&gt;

&lt;p&gt;=====================================================&lt;br/&gt;
1. Addition to org.apache.lucene.search.MultiPhraseQuery:&lt;/p&gt;

&lt;p&gt;Add the following method:&lt;/p&gt;

&lt;p&gt;/** Returns the set of terms in this phrase. */&lt;br/&gt;
public Term[] getTerms() {&lt;br/&gt;
  ArrayList allTerms = new ArrayList();&lt;br/&gt;
  Iterator iterator = termArrays.iterator();&lt;br/&gt;
  while (iterator.hasNext()) {&lt;br/&gt;
    Term[] terms = (Term[])iterator.next();&lt;br/&gt;
    for (int i = 0, n = terms.length; i &amp;lt; n; ++i) &lt;/p&gt;
{
      allTerms.add(terms[i]);
    }
&lt;p&gt;  }&lt;br/&gt;
  return (Term[])allTerms.toArray(new Term&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;=====================================================&lt;br/&gt;
2. Patch to org.apache.lucene.search.highlight.QueryTermExtractor:&lt;/p&gt;

&lt;p&gt;a) Add the following import:&lt;br/&gt;
import org.apache.lucene.search.MultiPhraseQuery;&lt;/p&gt;

&lt;p&gt;b) Add the following code to the end of the getTerms(...) method:&lt;br/&gt;
      else  if(query instanceof MultiPhraseQuery)&lt;br/&gt;
              getTermsFromMultiPhraseQuery((MultiPhraseQuery) query, terms, fieldName);&lt;br/&gt;
  }&lt;/p&gt;

&lt;p&gt;c) Add the following method:&lt;br/&gt;
 private static final void getTermsFromMultiPhraseQuery(MultiPhraseQuery query, HashSet terms, String fieldName)&lt;br/&gt;
 {&lt;br/&gt;
   Term[] queryTerms = query.getTerms();&lt;br/&gt;
   int i;&lt;/p&gt;

&lt;p&gt;   for (i = 0; i &amp;lt; queryTerms.length; i++)&lt;br/&gt;
   {&lt;br/&gt;
       if((fieldName==null)||(queryTerms&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.field()==fieldName))&lt;/p&gt;
       {
           terms.add(new WeightedTerm(query.getBoost(),queryTerms[i].text()));
       }
&lt;p&gt;   }&lt;br/&gt;
 }&lt;/p&gt;


&lt;p&gt;=====================================================&lt;/p&gt;

&lt;p&gt;Can the team update the repository?&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Michael Harhen &lt;/p&gt;</description>
                <environment>&lt;p&gt;All&lt;/p&gt;</environment>
            <key id="12328763">LUCENE-495</key>
            <summary>Suggested Patches to MultiPhraseQuery and QueryTermExtractor (for use with HighLighter)</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="mharhen">Michael Harhen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Feb 2006 00:03:37 +0000</created>
                <updated>Thu, 21 Aug 2008 12:35:01 +0100</updated>
                    <resolved>Thu, 21 Aug 2008 12:35:01 +0100</resolved>
                            <version>1.9</version>
                                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12365855" author="hossman" created="Fri, 10 Feb 2006 16:46:01 +0000"  >&lt;p&gt;if you could post a test case (or a patch to an existing test case) that demonstrates the error in the existing code, and shows that your patch fixes that bug, thats one of the best ways to encourage that a patch get applied.&lt;/p&gt;</comment>
                    <comment id="12624337" author="markrmiller@gmail.com" created="Thu, 21 Aug 2008 12:35:01 +0100"  >&lt;p&gt;Both the span and standard Highlighters have support for MultiPhraseQuery at this point.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 10 Feb 2006 16:46:01 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>13254</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>27231</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>