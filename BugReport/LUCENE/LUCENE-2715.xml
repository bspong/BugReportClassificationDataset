<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:03:16 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2715/LUCENE-2715.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2715] optimize fuzzytermsenum per-segment</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2715</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;we can make fuzzyquery about 3% faster by not creating DFA(s) for each segment.&lt;/p&gt;

&lt;p&gt;creating the DFAs is still somewhat heavy: i can address this here too, but this is easy.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12477772">LUCENE-2715</key>
            <summary>optimize fuzzytermsenum per-segment</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Oct 2010 20:55:44 +0100</created>
                <updated>Fri, 10 May 2013 11:42:46 +0100</updated>
                    <resolved>Wed, 20 Oct 2010 13:23:50 +0100</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12922694" author="rcmuir" created="Tue, 19 Oct 2010 20:58:49 +0100"  >&lt;p&gt;here&apos;s a prototype patch:&lt;/p&gt;

&lt;p&gt;Mike tested with his wikipedia test:&lt;/p&gt;

&lt;p&gt;run#1&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps old&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps new&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;% diff&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;united~0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;29.81&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;30.76&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;united~0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6.80&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7.12&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.7%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;run#2&lt;/p&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps old&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;qps new&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;% diff&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;united~0.7&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;29.46&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;30.44&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;united~0.6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6.70&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6.94&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12922776" author="thetaphi" created="Wed, 20 Oct 2010 00:12:45 +0100"  >&lt;p&gt;Optimized patch:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;removed useless interfaces from attribute (inherited)&lt;/li&gt;
	&lt;li&gt;removed interface @Override (die, sunbug, die)&lt;/li&gt;
	&lt;li&gt;equals in AttributeImpls should always compare same implementations (not like copyTo() which can copy to different impl)&lt;/li&gt;
	&lt;li&gt;replaced global field runAutomaton by only the attribute, which now contains List&amp;lt;ByteRunAutomaton&amp;gt;. This is list is also updated now when maxDistance raises, so the automatons are never genated 2 times. This should improve switches between maxDistance. So the whole array is no longer replaced.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All tests pass.&lt;/p&gt;</comment>
                    <comment id="12922786" author="thetaphi" created="Wed, 20 Oct 2010 00:32:15 +0100"  >&lt;p&gt;Redesigned attribute, which is now only wrapper around an ArrayList without get/setter. Heavy reuse enabled now.&lt;/p&gt;

&lt;p&gt;All test still pass &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12922792" author="rcmuir" created="Wed, 20 Oct 2010 00:54:26 +0100"  >&lt;p&gt;Thanks Uwe, these changes sound great!&lt;/p&gt;</comment>
                    <comment id="12922793" author="mikemccand" created="Wed, 20 Oct 2010 00:58:31 +0100"  >&lt;p&gt;Perf w/ latest patch:&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Query&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;QPS clean&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;QPS fuzzy&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Pct diff&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;united~1.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;29.69&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;30.56&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;font color=&quot;green&quot;&gt;2.9%&lt;/font&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;united~2.0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6.72&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7.07&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;font color=&quot;green&quot;&gt;5.2%&lt;/font&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;


&lt;p&gt;Nice!!&lt;/p&gt;</comment>
                    <comment id="12922889" author="thetaphi" created="Wed, 20 Oct 2010 09:38:36 +0100"  >&lt;p&gt;Police reviewed again and found a solution (Robert asked me) how to make the attribute private. As the impl class must be public for AS to load it, the trick is to wrap it in a private static inner class.&lt;/p&gt;

&lt;p&gt;By that the attributes are invisible to both code and javadocs. You can only load and instantiate the class by reflection or when you have a already loaded Class object of the attribute.&lt;/p&gt;

&lt;p&gt;Also added javadocs for ctor (forgot that on MTQ per-seg rewrite issue) and made attribute impl final.&lt;/p&gt;

&lt;p&gt;I think it&apos;s ready to commit. Robert?&lt;/p&gt;</comment>
                    <comment id="12922923" author="rcmuir" created="Wed, 20 Oct 2010 13:02:40 +0100"  >&lt;blockquote&gt;&lt;p&gt;I think it&apos;s ready to commit. Robert?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1, looks great now!&lt;/p&gt;</comment>
                    <comment id="12922936" author="thetaphi" created="Wed, 20 Oct 2010 13:23:50 +0100"  >&lt;p&gt;Committed revision: 1025532&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12457652" name="LUCENE-2715.patch" size="5782" author="thetaphi" created="Wed, 20 Oct 2010 09:38:36 +0100" />
                    <attachment id="12457621" name="LUCENE-2715.patch" size="5028" author="thetaphi" created="Wed, 20 Oct 2010 00:32:15 +0100" />
                    <attachment id="12457618" name="LUCENE-2715.patch" size="5362" author="thetaphi" created="Wed, 20 Oct 2010 00:12:45 +0100" />
                    <attachment id="12457585" name="LUCENE-2715.patch" size="4202" author="rcmuir" created="Tue, 19 Oct 2010 20:58:49 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 19 Oct 2010 23:12:45 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11132</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24977</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>