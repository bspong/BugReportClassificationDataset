<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:02:35 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3541/LUCENE-3541.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3541] remove IndexInput.copyBuf</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3541</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;this looks really broken/dangerous as an instance variable.&lt;/p&gt;

&lt;p&gt;what happens on clone() ?! copyBytes can instead make its own array inside the method.&lt;/p&gt;

&lt;p&gt;its protected, so ill list in the 3.x backwards breaks section since its technically a backwards break.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12529252">LUCENE-3541</key>
            <summary>remove IndexInput.copyBuf</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.png">Critical</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Oct 2011 14:56:55 +0100</created>
                <updated>Sun, 27 Nov 2011 12:29:31 +0000</updated>
                    <resolved>Fri, 28 Oct 2011 17:18:10 +0100</resolved>
                                            <fixVersion>3.5</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="13138393" author="thetaphi" created="Fri, 28 Oct 2011 15:25:24 +0100"  >&lt;p&gt;It&apos;s horrible: When you clone this IndexInput and then in another thread start another copy operation, both will override the others buffer contents. What&apos;s the reason for having this as instance variable. If you create the byte[] in the method and it&apos;s unused afterwards it happily resides in eden space....&lt;/p&gt;</comment>
                    <comment id="13138396" author="rcmuir" created="Fri, 28 Oct 2011 15:31:13 +0100"  >&lt;p&gt;I agree its horrible, if someone properly clone()&apos;s indexinputs and uses threads they are sharing this same buffer and its just asking for corrumption.&lt;/p&gt;</comment>
                    <comment id="13138404" author="rcmuir" created="Fri, 28 Oct 2011 15:36:36 +0100"  >&lt;p&gt;here&apos;s the obvious fix, but no test yet.&lt;/p&gt;</comment>
                    <comment id="13138422" author="rcmuir" created="Fri, 28 Oct 2011 16:03:30 +0100"  >&lt;p&gt;here&apos;s a prototype test (it needs to be toned down, but it does the trick), that fails without the patch, passes with it.&lt;/p&gt;

&lt;p&gt;it will only fail with mmapdirectory, all the other core directories override this method and have some custom implementation already.&lt;/p&gt;</comment>
                    <comment id="13138423" author="rcmuir" created="Fri, 28 Oct 2011 16:05:51 +0100"  >&lt;p&gt;toned down the test, it still fails with mmapdir without the patch.&lt;/p&gt;

&lt;p&gt;i think this is ready to commit.&lt;/p&gt;</comment>
                    <comment id="13138458" author="thetaphi" created="Fri, 28 Oct 2011 16:41:42 +0100"  >&lt;p&gt;+1, commit this as fast as possible, otherwise I will make this a Blocker &lt;b&gt;g&lt;/b&gt;&lt;/p&gt;</comment>
                    <comment id="13157788" author="thetaphi" created="Sun, 27 Nov 2011 12:29:31 +0000"  >&lt;p&gt;Bulk close after release of 3.5&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12501309" name="LUCENE-3541.patch" size="3435" author="rcmuir" created="Fri, 28 Oct 2011 16:05:51 +0100" />
                    <attachment id="12501308" name="LUCENE-3541.patch" size="3480" author="rcmuir" created="Fri, 28 Oct 2011 16:03:30 +0100" />
                    <attachment id="12501301" name="LUCENE-3541.patch" size="964" author="rcmuir" created="Fri, 28 Oct 2011 15:36:36 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Fri, 28 Oct 2011 14:25:24 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>215113</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24156</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>