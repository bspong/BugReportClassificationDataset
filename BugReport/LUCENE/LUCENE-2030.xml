<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:33:25 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2030/LUCENE-2030.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2030] CachingSpanFilter synchronizing on a none final protected object</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2030</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;CachingSpanFilter and CachingWrapperFilter expose their internal cache via a protected member which is lazily instantiated in the getDocSetId method. The current code yields the chance to double instantiate the cache and internally synchronizes on a protected none final member. My first guess is that this member was exposed for testing purposes so it should rather be changed to package private. &lt;/p&gt;

&lt;p&gt;This patch breaks backwards compat while I guess the cleanup is kind of worth breaking it.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12439874">LUCENE-2030</key>
            <summary>CachingSpanFilter synchronizing on a none final protected object</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="simonw">Simon Willnauer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Nov 2009 17:08:24 +0000</created>
                <updated>Wed, 25 Nov 2009 16:47:56 +0000</updated>
                    <resolved>Sun, 8 Nov 2009 21:46:33 +0000</resolved>
                            <version>2.9</version>
                                <fixVersion>3.0</fixVersion>
                                <component>core/search</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12773758" author="thetaphi" created="Thu, 5 Nov 2009 03:05:09 +0000"  >&lt;p&gt;This patch breaks serialization because the de-serializer does not call ctors and so the cache keeps unintialized (=null).&lt;/p&gt;</comment>
                    <comment id="12773761" author="thetaphi" created="Thu, 5 Nov 2009 03:21:53 +0000"  >&lt;p&gt;Fixed patch.&lt;/p&gt;</comment>
                    <comment id="12773814" author="simonw" created="Thu, 5 Nov 2009 07:30:44 +0000"  >&lt;p&gt;Uwe, I&apos;m so glad that you are so keen on stuff like Java serialization! Thanks&lt;/p&gt;</comment>
                    <comment id="12774452" author="thetaphi" created="Fri, 6 Nov 2009 22:27:19 +0000"  >&lt;p&gt;New patch. The previous one had the problem, that it also blocked during creating the Filter/SpanResult. Now it only locks correctly before creating the WeakHashMap at all and when requesting/putting entries. The only problem is, that two threads may create the same DocIdSet at the same time because of cache miss, but that is not a problem at all for correct behaviour.&lt;/p&gt;</comment>
                    <comment id="12774811" author="thetaphi" created="Sun, 8 Nov 2009 19:06:21 +0000"  >&lt;p&gt;New patch that uses ReentrantLock from Java5&apos;s concurrent package. This lock is serializable. All tests pass, will commit soon.&lt;/p&gt;</comment>
                    <comment id="12774829" author="thetaphi" created="Sun, 8 Nov 2009 21:46:32 +0000"  >&lt;p&gt;Committed revision: 833934&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12424315" name="LUCENE-2030.patch" size="4660" author="thetaphi" created="Sun, 8 Nov 2009 19:06:21 +0000" />
                    <attachment id="12424234" name="LUCENE-2030.patch" size="4027" author="thetaphi" created="Fri, 6 Nov 2009 22:27:19 +0000" />
                    <attachment id="12424093" name="LUCENE-2030.patch" size="3379" author="thetaphi" created="Thu, 5 Nov 2009 03:21:53 +0000" />
                    <attachment id="12424040" name="LUCENE-2030.patch" size="2698" author="simonw" created="Wed, 4 Nov 2009 17:09:04 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 5 Nov 2009 03:05:09 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11746</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25695</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>