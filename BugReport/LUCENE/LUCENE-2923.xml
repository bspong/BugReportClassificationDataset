<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:25:02 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2923/LUCENE-2923.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2923] cleanup contrib/demo</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2923</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I don&apos;t think we should include optimize in the demo; many people start from the demo and may think you must optimize to do searching, and that&apos;s clearly not the case.&lt;/p&gt;

&lt;p&gt;I think we should also use a buffered reader in FileDocument?&lt;/p&gt;

&lt;p&gt;And... I&apos;m tempted to remove IndexHTML (and the html parser) entirely.  It&apos;s ancient, and we now have Tika to extract text from many doc formats.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12498800">LUCENE-2923</key>
            <summary>cleanup contrib/demo</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="steve_rowe">Steve Rowe</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Feb 2011 19:31:14 +0000</created>
                <updated>Wed, 30 Mar 2011 16:50:20 +0100</updated>
                    <resolved>Sun, 20 Feb 2011 19:13:41 +0000</resolved>
                                            <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12995490" author="thetaphi" created="Wed, 16 Feb 2011 20:03:08 +0000"  >&lt;p&gt;Yeah, we remove the optimize. Too many people tell me exactly that they should optimize because they see it in almost every demo code. Optimizing is with recent Lucene versions not needed anymore. It&apos;s hard to explain to people, so example code and books should never tell to optimize. In books about lucene there should also be an explanation when optimizing is needed or usefully, put prevent people from always doing this.&lt;/p&gt;</comment>
                    <comment id="12995504" author="mikemccand" created="Wed, 16 Feb 2011 20:43:20 +0000"  >&lt;p&gt;Patch.&lt;/p&gt;</comment>
                    <comment id="12995513" author="markrmiller@gmail.com" created="Wed, 16 Feb 2011 20:56:27 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think we should also use a buffered reader in FileDocument?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And close the reader...&lt;/p&gt;</comment>
                    <comment id="12995518" author="markrmiller@gmail.com" created="Wed, 16 Feb 2011 21:00:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;I don&apos;t think we should include optimize in the demo; &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I wonder if it wouldn&apos;t be better to leave it, but commented out - with a short explanation.&lt;/p&gt;

&lt;p&gt;Optimizing is not necessary, but it clearly has benefits to query perf! If you are not updating often, I think it can make perfect sense.&lt;/p&gt;

&lt;p&gt;So I&apos;m fine with just dropping, but not sure if commenting it out and putting something like:&lt;br/&gt;
// for an index that is not updated often, we might optimize now&lt;/p&gt;

&lt;p&gt;or variation...&lt;/p&gt;</comment>
                    <comment id="12995748" author="mikemccand" created="Thu, 17 Feb 2011 10:50:53 +0000"  >&lt;p&gt;OK new patch, fixing a number of things:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;I close the Reader (thanks Mark).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I cutover to NumericField (and stopped using DateTools) for the&lt;br/&gt;
    &quot;modified&quot; field.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I added a -create option to IndexFiles, so you can see how to&lt;br/&gt;
    CREATE vs CREATE_OR_APPEND&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I left commented-out optional things &amp;#8211; calling optimize,&lt;br/&gt;
    increasing IW&apos;s RAM buffer.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Don&apos;t use Version.LUCENE_CURRENT.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I sucked in test files from Lucene in Action 2E&apos;s tests (open&lt;br/&gt;
    source licenses).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I use addDocument or updateDocument depending on -create.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;I made the &quot;demo html parser&quot; private to modules/benchmark, which&lt;br/&gt;
    had a dependency on it.  Can someone lookover my changes to the&lt;br/&gt;
    build xml files?  (Especially the Maven part, where I completely&lt;br/&gt;
    guessed!).&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;IndexHTML is gone, and the webapp (src/jsp/*) is gone too.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;To apply the patch you first have to do this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;svn mv lucene/contrib/benchmark/src/java/org/apache/lucene/demo/html modules/benchmark/src/java/org/apache/lucene/benchmark/byTask/feeds/demohtml
svn mv lucene/contrib/demo/src/test/org/apache/lucene/demo/html modules/benchmark/src/test/org/apache/lucene/benchmark/byTask/feeds/demohtml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12995807" author="mikemccand" created="Thu, 17 Feb 2011 13:53:40 +0000"  >&lt;p&gt;New patch.&lt;/p&gt;

&lt;p&gt;I inverted IndexFiles -create to IndexFiles -update (ie default is now create, like before).&lt;/p&gt;

&lt;p&gt;Added reference to web-site docs in the jdocs, and added comment on the optional &quot;increase RAM buffer size&quot; that you should also -Xmx your JVM.&lt;/p&gt;

&lt;p&gt;I think it&apos;s ready to commit, but separately we have to fix the web site.&lt;/p&gt;</comment>
                    <comment id="12995816" author="steve_rowe" created="Thu, 17 Feb 2011 14:13:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can someone lookover my changes to the build xml files? (Especially the Maven part, where I completely guessed!).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I skimmed the patch and can see that you removed the specializations of the &lt;tt&gt;dist-maven&lt;/tt&gt; task in both &lt;tt&gt;modules/benchmark/&lt;/tt&gt; and &lt;tt&gt;lucene/contrib/demo/&lt;/tt&gt;.  For benchmark, the specialization was trivial and didn&apos;t change any behavior, so I assume that&apos;s why you dropped it.  In the demo case, the specialization was introduced to be able to deploy the &lt;tt&gt;.war&lt;/tt&gt; file, but since the &lt;tt&gt;.war&lt;/tt&gt; file is no longer produced, the &lt;tt&gt;dist-maven&lt;/tt&gt; specialization is no longer required.  Later today I&apos;ll have time to apply the patch and do sanity checking on the maven outputs.&lt;/p&gt;

&lt;p&gt;One thing left to do (I can handle this separately): change the Maven POMs for the benchmark and demo modules.&lt;/p&gt;</comment>
                    <comment id="12995863" author="mikemccand" created="Thu, 17 Feb 2011 16:00:10 +0000"  >&lt;p&gt;Thanks Steven.&lt;/p&gt;

&lt;p&gt;Right, I removed both because I think &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; we don&apos;t need maven details in the build.xml (since the Maven POMs are now separately configured).. well, and because we don&apos;t make a WAR anymore.&lt;/p&gt;</comment>
                    <comment id="12995896" author="steve_rowe" created="Thu, 17 Feb 2011 16:44:43 +0000"  >&lt;p&gt;Mike, a small typo:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;To apply the patch you first have to do this:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;svn mv lucene/contrib/benchmark/src/java/org/apache/lucene/demo/html modules/benchmark/src/java/org/apache/lucene/benchmark/byTask/feeds/demohtml&lt;/tt&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;That should be &lt;tt&gt;svn mv lucene/contrib/&lt;b&gt;demo&lt;/b&gt;/src/... modules/benchmark/src/...&lt;/tt&gt;&lt;/p&gt;</comment>
                    <comment id="12995944" author="mikemccand" created="Thu, 17 Feb 2011 17:35:45 +0000"  >&lt;p&gt;Woops!  Thanks Steven.&lt;/p&gt;</comment>
                    <comment id="12996698" author="steve_rowe" created="Sat, 19 Feb 2011 04:44:56 +0000"  >&lt;p&gt;This patch adds the following (and includes all of Mike&apos;s patch):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;IntelliJ IDEA configuration adjustments&lt;/li&gt;
	&lt;li&gt;Maven POM adjustments&lt;/li&gt;
	&lt;li&gt;Source and regenerated site docs&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;contrib/demo/build.xml&lt;/tt&gt; builds the Lucene core jar in the &lt;tt&gt;init&lt;/tt&gt; target if it doesn&apos;t exist or if its &lt;tt&gt;.java&lt;/tt&gt; source files are newer than the jar.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;contrib/demo/build.xml&lt;/tt&gt; default target is now &lt;tt&gt;jar-core&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;At Mike&apos;s suggestion on #lucene IRC, added javadoc comment to IndexFiles pointing out that 1 input doc per file is slow, and that good throughput can be gained by putting multiple docs in a single input file.&lt;/li&gt;
	&lt;li&gt;Other minor cleanups&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Committing shortly.&lt;/p&gt;</comment>
                    <comment id="12996746" author="mikemccand" created="Sat, 19 Feb 2011 10:36:48 +0000"  >&lt;p&gt;Thanks Steven!&lt;/p&gt;</comment>
                    <comment id="12996775" author="rcmuir" created="Sat, 19 Feb 2011 13:31:23 +0000"  >&lt;p&gt;Here&apos;s a patch that removes the custom collector and the &quot;-paging false/streaming&quot; option, simplifying the demo a lot more.&lt;/p&gt;</comment>
                    <comment id="12996811" author="steve_rowe" created="Sat, 19 Feb 2011 16:53:08 +0000"  >&lt;blockquote&gt;&lt;p&gt;Here&apos;s a patch that removes the custom collector and the &quot;-paging false/streaming&quot; option, simplifying the demo a lot more.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1.  I think the site docs will also need some revision.&lt;/p&gt;</comment>
                    <comment id="12996812" author="steve_rowe" created="Sat, 19 Feb 2011 16:58:29 +0000"  >&lt;p&gt;Initial patch commited: trunk rev. 1072250, branch_3x rev. 1072386.&lt;/p&gt;

&lt;p&gt;Leaving this issue open to deal with Robert&apos;s patch.&lt;/p&gt;</comment>
                    <comment id="12996813" author="steve_rowe" created="Sat, 19 Feb 2011 17:02:46 +0000"  >&lt;p&gt;The nightly hudson trunk maven build failed last night because the benchmark jar wasn&apos;t being produced by the &lt;tt&gt;dist-maven&lt;/tt&gt; target, which is called from the &lt;tt&gt;generate-maven-artifacts&lt;/tt&gt; target.  From &lt;a href=&quot;https://hudson.apache.org/hudson/job/Lucene-Solr-Maven-trunk/31/consoleText&quot; class=&quot;external-link&quot;&gt;https://hudson.apache.org/hudson/job/Lucene-Solr-Maven-trunk/31/consoleText&lt;/a&gt; :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;dist-maven:
[artifact:deploy] Deploying to file:///usr/home/hudson/hudson-slave/workspace/Lucene-Solr-Maven-trunk/checkout/modules/dist/maven
[artifact:deploy] An error has occurred while processing the Maven artifact tasks.
[artifact:deploy]  Diagnosis:
[artifact:deploy] 
[artifact:deploy] Error deploying artifact &apos;org.apache.lucene:lucene-benchmark:jar&apos;: Error deploying artifact:
 File /usr/home/hudson/hudson-slave/workspace/Lucene-Solr-Maven-trunk/checkout/modules/benchmark/build/lucene-benchmark-4.0-SNAPSHOT.jar does not exist

BUILD FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This can be fixed by putting back the &lt;tt&gt;dist-maven&lt;/tt&gt; specialization that I took out of &lt;tt&gt;modules/benchmark/build.xml&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;target name=&lt;span class=&quot;code-quote&quot;&gt;&quot;dist-maven&quot;&lt;/span&gt; depends=&lt;span class=&quot;code-quote&quot;&gt;&quot;jar-core,javadocs,contrib-build.dist-maven&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Committing shortly.&lt;/p&gt;</comment>
                    <comment id="12996816" author="steve_rowe" created="Sat, 19 Feb 2011 17:21:28 +0000"  >&lt;p&gt;Fix for &lt;tt&gt;modules/benchmark/build.xml&lt;/tt&gt; committed to trunk rev. 1072393.  (branch_3x doesn&apos;t have this problem since it has no modules and the benchmark contrib works the same as the other contribs for the &lt;tt&gt;generate-maven-artifacts&lt;/tt&gt; target.)&lt;/p&gt;</comment>
                    <comment id="12997190" author="steve_rowe" created="Sun, 20 Feb 2011 18:54:43 +0000"  >&lt;p&gt;This patch:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;fixes demo2.html to remove description of the streaming search removed from the SearchFiles demo app by Robert&apos;s patch&lt;/li&gt;
	&lt;li&gt;removes the obsolete &quot;&amp;lt;root directory&amp;gt;&quot; text from the usage message in the IndexFiles demo app, as well as the same info in demo.html&lt;/li&gt;
	&lt;li&gt;Stops the SearchFiles demo app in interactive mode from asking for which page to navigate to when there are zero results - instead asks for another query.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Committing shortly.&lt;/p&gt;</comment>
                    <comment id="12997193" author="steve_rowe" created="Sun, 20 Feb 2011 19:10:56 +0000"  >&lt;p&gt;crap - forgot to commit branch_3x part 3 port...&lt;/p&gt;</comment>
                    <comment id="13013442" author="gsingers" created="Wed, 30 Mar 2011 16:50:20 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12471526" name="LUCENE-2923-part3.patch" size="3392" author="steve_rowe" created="Sun, 20 Feb 2011 18:54:43 +0000" />
                    <attachment id="12471471" name="LUCENE-2923.patch" size="4195" author="rcmuir" created="Sat, 19 Feb 2011 13:31:23 +0000" />
                    <attachment id="12471456" name="LUCENE-2923.patch" size="632047" author="steve_rowe" created="Sat, 19 Feb 2011 04:44:56 +0000" />
                    <attachment id="12471280" name="LUCENE-2923.patch" size="422116" author="mikemccand" created="Thu, 17 Feb 2011 13:53:40 +0000" />
                    <attachment id="12471267" name="LUCENE-2923.patch" size="422682" author="mikemccand" created="Thu, 17 Feb 2011 10:50:53 +0000" />
                    <attachment id="12471223" name="LUCENE-2923.patch" size="380190" author="mikemccand" created="Wed, 16 Feb 2011 20:43:20 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>6.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 16 Feb 2011 20:03:08 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10946</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24769</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>