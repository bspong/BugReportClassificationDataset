<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:57:44 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1843/LUCENE-1843.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1843] Convert some tests to new TokenStream API, better support of cross-impl AttributeImpl.copyTo()</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1843</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;This patch converts some remaining tests to the new TokenStream API and non-deprecated classes.&lt;br/&gt;
This patch also enhances AttributeImpl.copyTo() of Token and TokenWrapper to also support copying e.g. TermAttributeImpl into Token. The target impl must only support all interfaces but must not be of the same type. Token and TokenWrapper use optimized coping without casting to 6 interfaces where possible.&lt;br/&gt;
Maybe the special tokenizers in contrib (shingle matrix and so on using tokens to cache may be enhanced by that). Also Yonik&apos;s request for optimized copying of states between incompatible AttributeSources may be enhanced by that (possibly a new issue).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12433767">LUCENE-1843</key>
            <summary>Convert some tests to new TokenStream API, better support of cross-impl AttributeImpl.copyTo()</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Sat, 22 Aug 2009 13:35:28 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:36 +0100</updated>
                    <resolved>Mon, 24 Aug 2009 13:45:09 +0100</resolved>
                            <version>2.9</version>
                                <fixVersion>2.9</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12746445" author="thetaphi" created="Sat, 22 Aug 2009 13:36:11 +0100"  >&lt;p&gt;Patch - Will commit soon.&lt;/p&gt;</comment>
                    <comment id="12746447" author="thetaphi" created="Sat, 22 Aug 2009 13:40:34 +0100"  >&lt;p&gt;Committed revision: 806847&lt;/p&gt;</comment>
                    <comment id="12746637" author="thetaphi" created="Sun, 23 Aug 2009 18:02:07 +0100"  >&lt;p&gt;There are some more tests, that fail with onlyUseNewAPI in contrib/analyzers.&lt;/p&gt;</comment>
                    <comment id="12746638" author="thetaphi" created="Sun, 23 Aug 2009 18:04:34 +0100"  >&lt;p&gt;From a private mail with Robert Muir:&lt;/p&gt;

&lt;p&gt;yes, all of what you mentioned are problems, and testing for&lt;br/&gt;
attributes that should be there is good in my opinion too.&lt;/p&gt;

&lt;p&gt;I noticed the shingle problem as well, it was strange to test&lt;br/&gt;
termAtt.toString() and expect position increments or types to appear&lt;br/&gt;
:/&lt;/p&gt;

&lt;p&gt;one reason I asked about this, is at some point it would be nice to&lt;br/&gt;
try to factor test cases in lucene contrib. currently, they all have&lt;br/&gt;
same helper methods such as assertAnalyzesTo and this is silly in my&lt;br/&gt;
opinion.&lt;/p&gt;

&lt;p&gt;On Sun, Aug 23, 2009 at 12:57 PM, Uwe Schindler&amp;lt;uwe@thetaphi.de&amp;gt; wrote:&lt;br/&gt;
&amp;gt; There are more problems. The test with getAttribute is good, if you are&lt;br/&gt;
&amp;gt; really sure, if the attribute is really available and want assert this. In&lt;br/&gt;
&amp;gt; all other cases addAttribute should be used to consume a TokenStream. The&lt;br/&gt;
&amp;gt; changed ones were problematic, because they used foreign TokenStreams, do&lt;br/&gt;
&amp;gt; not for sure have all these attributes.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; I thought, all tests in contrib use LuceneTestCase as superclass, but they&lt;br/&gt;
&amp;gt; use the standard junit class. Because of that I did not notice when I put&lt;br/&gt;
&amp;gt; setOnlyUseNewAPI(true) into LuceneTestCase.setUp(), that they are run with&lt;br/&gt;
&amp;gt; the default false setting.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Other problems in these tests are, that some (shingle tests) use&lt;br/&gt;
&amp;gt; TermAttribute.toString() which looks different if the attribute is&lt;br/&gt;
&amp;gt; implemented by TermAttributeImpl (newAPI=true) or Token (newAPI=false).&lt;/p&gt;</comment>
                    <comment id="12746694" author="thetaphi" created="Mon, 24 Aug 2009 00:27:29 +0100"  >&lt;p&gt;Patch that makes all contrib/analyzer tests that work with TokenStreams subclasses of BaseTokenStreamTestCase. This superclass now has a lot of utility methods to check TokenStreams using arrays of strings/ints.&lt;/p&gt;

&lt;p&gt;The patch also contains a better version of SingleTokenTokenStream, using the Token.copyTo() function and a Token/TokenWrapper instance as attribute implementation.&lt;/p&gt;

&lt;p&gt;This patch may still include some unused imports, had no time to check this manually (I am the person, that codes with Notepad...)&lt;/p&gt;</comment>
                    <comment id="12746695" author="thetaphi" created="Mon, 24 Aug 2009 00:28:26 +0100"  >&lt;p&gt;Now the right file.&lt;/p&gt;

&lt;p&gt;Will commit tomorrow.&lt;/p&gt;</comment>
                    <comment id="12746697" author="thetaphi" created="Mon, 24 Aug 2009 01:06:31 +0100"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Small updates&lt;/li&gt;
	&lt;li&gt;forget conversion of two filters in contrib/memory&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Hope this is the last patch.&lt;/p&gt;</comment>
                    <comment id="12746775" author="thetaphi" created="Mon, 24 Aug 2009 09:53:15 +0100"  >&lt;p&gt;Some more tests converted. Also optimized Token.copyTo() to also respect TokenWrapper as target.&lt;/p&gt;</comment>
                    <comment id="12746847" author="thetaphi" created="Mon, 24 Aug 2009 13:45:09 +0100"  >&lt;p&gt;Committed revision: 807190&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12417452" name="LUCENE-1843.patch" size="130787" author="thetaphi" created="Mon, 24 Aug 2009 09:53:15 +0100" />
                    <attachment id="12417430" name="LUCENE-1843.patch" size="124069" author="thetaphi" created="Mon, 24 Aug 2009 01:06:31 +0100" />
                    <attachment id="12417428" name="LUCENE-1843.patch" size="121522" author="thetaphi" created="Mon, 24 Aug 2009 00:28:26 +0100" />
                    <attachment id="12417360" name="LUCENE-1843.patch" size="10466" author="thetaphi" created="Sat, 22 Aug 2009 13:36:11 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11920</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25884</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>