<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:34:23 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3375/LUCENE-3375.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3375] processing a synonym in a token stream will remove the following token from the stream</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3375</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;If you do a phrase search on a field derived from a fieldtype with the synonym filter which includes a synonym, the term following the synonym vanishes after synonym expansion.&lt;/p&gt;

&lt;p&gt;e.g. &lt;a href=&quot;http://host:port/solr/corename/select/?q=desc:%22xyzzy%20%20bbb%20pot%20of%20gold%22&amp;amp;version=2.2&amp;amp;start=0&amp;amp;rows=10&amp;amp;indent=on&amp;amp;debugQuery=true&quot; class=&quot;external-link&quot;&gt;http://host:port/solr/corename/select/?q=desc:%22xyzzy%20%20bbb%20pot%20of%20gold%22&amp;amp;version=2.2&amp;amp;start=0&amp;amp;rows=10&amp;amp;indent=on&amp;amp;debugQuery=true&lt;/a&gt;   (bbb is in the default synonyms file, desc is a &quot;text&quot; fieldtype)&lt;/p&gt;

&lt;p&gt;outputs&lt;br/&gt;
....&lt;br/&gt;
&amp;lt;str name=&quot;rawquerystring&quot;&amp;gt;desc:&quot;xyzzy  bbb pot of gold&quot;&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;querystring&quot;&amp;gt;desc:&quot;xyzzy  bbb pot of gold&quot;&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;parsedquery&quot;&amp;gt;PhraseQuery(desc:&quot;xyzzy bbbb 1 bbbb 2 of gold&quot;)&amp;lt;/str&amp;gt;&lt;br/&gt;
&amp;lt;str name=&quot;parsedquery_toString&quot;&amp;gt;desc:&quot;xyzzy bbbb 1 bbbb 2 of gold&quot;&amp;lt;/str&amp;gt;&lt;br/&gt;
....&lt;/p&gt;

&lt;p&gt;You can also see this behavior using the admin console analysis.jsp&lt;/p&gt;

&lt;p&gt;Solr 3.3 behaves properly.&lt;/p&gt;</description>
                <environment>&lt;p&gt;solr 4.0 built from trunk today&lt;/p&gt;

&lt;p&gt;        Solr Specification Version: 4.0.0.2011.08.11.16.00.45&lt;br/&gt;
	Solr Implementation Version: 4.0-SNAPSHOT 1156711M - simon - 2011-08-11 16:00:45&lt;br/&gt;
	Lucene Specification Version: 4.0-SNAPSHOT&lt;br/&gt;
	Lucene Implementation Version: 4.0-SNAPSHOT 1156556 - simon - 2011-08-11 09:33:46&lt;br/&gt;
	Current Time: Thu Aug 11 21:27:11 EDT 2011&lt;br/&gt;
	Server Start Time:Thu Aug 11 20:59:11 EDT 2011&lt;/p&gt;</environment>
            <key id="12518664">LUCENE-3375</key>
            <summary>processing a synonym in a token stream will remove the following token from the stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="-1">Unassigned</assignee>
                                <reporter username="simon.rosenthal">Simon Rosenthal</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Aug 2011 02:32:05 +0100</created>
                <updated>Sun, 27 Nov 2011 12:31:44 +0000</updated>
                    <resolved>Tue, 16 Aug 2011 17:13:58 +0100</resolved>
                            <version>3.4</version>
                <version>4.0-ALPHA</version>
                                <fixVersion>3.4</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="13085098" author="rcmuir" created="Mon, 15 Aug 2011 15:19:42 +0100"  >&lt;p&gt;Here&apos;s a test case of the bug, thanks for reporting this Simon!&lt;/p&gt;</comment>
                    <comment id="13085109" author="rcmuir" created="Mon, 15 Aug 2011 15:51:28 +0100"  >&lt;p&gt;updated test that includes an expansion of the case, where &apos;bbb&apos; maps to 3 words, in this case it nukes &apos;of&apos; also... so now we can see the general pattern of the bug.&lt;/p&gt;</comment>
                    <comment id="13085148" author="mikemccand" created="Mon, 15 Aug 2011 17:36:20 +0100"  >&lt;p&gt;Nice catch &amp;#8211; thanks Simon!&lt;/p&gt;

&lt;p&gt;The attached patch should fix the issue.  The problem was we were allowing preserveOrig to apply across all output&apos;d tokens, not just the matched input tokens.&lt;/p&gt;</comment>
                    <comment id="13085747" author="rcmuir" created="Tue, 16 Aug 2011 15:46:06 +0100"  >&lt;p&gt;Mike&apos;s patch, but i ported the tests from the old synfilter to boost our test coverage a little bit.&lt;/p&gt;

&lt;p&gt;we could still cleanup and improve these tests but it makes me feel better.&lt;/p&gt;</comment>
                    <comment id="13085805" author="rcmuir" created="Tue, 16 Aug 2011 17:13:58 +0100"  >&lt;p&gt;Thanks again Simon!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12490540" name="LUCENE-3375.patch" size="16140" author="rcmuir" created="Tue, 16 Aug 2011 15:46:06 +0100" />
                    <attachment id="12490442" name="LUCENE-3375.patch" size="8331" author="mikemccand" created="Mon, 15 Aug 2011 17:36:20 +0100" />
                    <attachment id="12490439" name="LUCENE-3375_test.patch" size="2207" author="rcmuir" created="Mon, 15 Aug 2011 15:51:28 +0100" />
                    <attachment id="12490433" name="SOLR-2709_test.patch" size="1921" author="rcmuir" created="Mon, 15 Aug 2011 15:19:42 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 15 Aug 2011 14:19:42 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2724</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24321</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>