<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:35:15 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1793/LUCENE-1793.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1793] remove custom encoding support in Greek/Russian Analyzers</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1793</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;The Greek and Russian analyzers support custom encodings such as KOI-8, they define things like Lowercase and tokenization for these.&lt;/p&gt;

&lt;p&gt;I think that analyzers should support unicode and that conversion/handling of other charsets belongs somewhere else. &lt;/p&gt;

&lt;p&gt;I would like to deprecate/remove the support for these other encodings.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12432624">LUCENE-1793</key>
            <summary>remove custom encoding support in Greek/Russian Analyzers</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Aug 2009 16:14:31 +0100</created>
                <updated>Mon, 16 May 2011 19:15:27 +0100</updated>
                    <resolved>Sat, 22 Aug 2009 21:37:51 +0100</resolved>
                                            <fixVersion>2.9</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12741093" author="rcmuir" created="Sun, 9 Aug 2009 16:21:07 +0100"  >&lt;p&gt;I am guessing the rationale for the current code is to try to reduce index size? (since these languages are double-byte encoded in Unicode).&lt;/p&gt;

&lt;p&gt;If this is the concern, then I think a better solution would be to integrate some form of unicode compression (i.e. BOCU-1) into lucene, rather than try to deal with legacy character sets in this way.&lt;/p&gt;</comment>
                    <comment id="12741098" author="thetaphi" created="Sun, 9 Aug 2009 16:41:22 +0100"  >&lt;p&gt;I would also strongly suggest to remove these custom charsets. They are not unicode conform, because they use char codepoint mappings that simply define an US ASCII char for some of the input chars. The problems begin with mixed language texts.&lt;br/&gt;
This strange (and wrong) mapping can also be seen in the tests: Tests load a KOI-8 file with encoding ISO-8859-1 (to get the native bytes as chars) and then map it. This is very bad!&lt;br/&gt;
The analyzers should really only work on unicode codepoints and nothing more. For backwards compatibility with old indexes (that are encoded using this strange mapping), we have to preserve the charsets for a while, but deprecate all of them and only leave UTF-16 as input (java chars).&lt;/p&gt;

&lt;p&gt;You are right, to reduce index size, it would be good, to also support other encodings in addition to UTF-8 for storage of term text.&lt;/p&gt;</comment>
                    <comment id="12741106" author="rcmuir" created="Sun, 9 Aug 2009 17:32:41 +0100"  >&lt;p&gt;patch that deprecates the custom charsets.&lt;/p&gt;

&lt;p&gt;after a release, a lot of code can be completely removed and these will be much simpler.&lt;/p&gt;

&lt;p&gt;I can add more verbage to these if needed, but I am suspicious that this stuff is actually working correctly...&lt;/p&gt;</comment>
                    <comment id="12741109" author="dmsmith555" created="Sun, 9 Aug 2009 18:39:04 +0100"  >&lt;blockquote&gt;&lt;p&gt;If this is the concern, then I think a better solution would be to integrate some form of unicode compression (i.e. BOCU-1) into lucene, rather than try to deal with legacy character sets in this way.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So it doesn&apos;t get lost, would it be good to open an issue for this? And for alternate encodings?&lt;/p&gt;</comment>
                    <comment id="12741111" author="rcmuir" created="Sun, 9 Aug 2009 18:52:34 +0100"  >&lt;p&gt;good idea, curious what other encodings you had in mind?. I only thought of BOCU because it maintains binary sort order, so it makes sense for an index...&lt;/p&gt;

&lt;p&gt;and it looks like there could be a possible performance benefit to something like these as well over UTF-8 (at least for certain languages): &lt;a href=&quot;http://unicode.org/notes/tn6/#Performance&quot; class=&quot;external-link&quot;&gt;http://unicode.org/notes/tn6/#Performance&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12741173" author="dmsmith555" created="Mon, 10 Aug 2009 04:34:19 +0100"  >&lt;p&gt;I wasn&apos;t thinking about any encoding in particular. It was in reference to Uwe&apos;s comment: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;You are right, to reduce index size, it would be good, to also support other encodings in addition to UTF-8 for storage of term text.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I think that having other encodings can be problematic. Problems that Unicode solves. But if the idea is worthy of discussion then a new issue would be a better place to house it. &lt;/p&gt;

&lt;p&gt;Regarding BOCU it is a patented algorithm requiring a license from IBM for implementation. I gather that it is part of ICU. Not sure if either is a big deal or not. &lt;/p&gt;</comment>
                    <comment id="12741241" author="rcmuir" created="Mon, 10 Aug 2009 10:25:21 +0100"  >&lt;p&gt;DM, you are right this is a better discussion for another issue/place&lt;br/&gt;
I was concerned that we would be taking functionality away, but this is not the case, as Uwe says it is only &quot;strange&quot;.&lt;/p&gt;

&lt;p&gt;I just looked at all these encodings: they are all storing characters in the extended ascii range (&amp;gt; 0x7F)&lt;br/&gt;
Therefore, anyone using this strange encoding support is using 2 bytes per character already! &lt;br/&gt;
For example someone using CP1251 in the russian analyzer is simply storing &#1046; as 0xC6, its being represented as &#198;. (2 bytes in UTF-8)&lt;br/&gt;
So, by deprecating these encodings for unicode, nobody&apos;s index size will double...&lt;/p&gt;</comment>
                    <comment id="12741372" author="earwin" created="Mon, 10 Aug 2009 16:35:22 +0100"  >&lt;blockquote&gt;&lt;p&gt;I am guessing the rationale for the current code is to try to reduce index size? (since these languages are double-byte encoded in Unicode). &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Rationale was most probably to support existing non-unicode systems/databases/files, whatever. My say is - anyone still holding onto koi8, cp1251 and friends should silently do harakiri.&lt;/p&gt;</comment>
                    <comment id="12741462" author="rcmuir" created="Mon, 10 Aug 2009 19:17:59 +0100"  >&lt;p&gt;it seems no one is against this, I will clean this up / add friendly deprecation warnings to the patch.&lt;/p&gt;</comment>
                    <comment id="12745442" author="rcmuir" created="Thu, 20 Aug 2009 15:13:39 +0100"  >&lt;p&gt;patch with more javadocs verbage.&lt;/p&gt;

&lt;p&gt;When do we want to deprecate these strange encodings? might be too late for 2.9 but I think sooner than later would be best.&lt;/p&gt;</comment>
                    <comment id="12745456" author="markrmiller@gmail.com" created="Thu, 20 Aug 2009 16:15:02 +0100"  >&lt;p&gt;We have not started code freeze yet - I&apos;d deprecate if it makes sense.&lt;/p&gt;</comment>
                    <comment id="12745464" author="rcmuir" created="Thu, 20 Aug 2009 16:46:24 +0100"  >&lt;p&gt;updated patch with &quot;removed in next release&quot; changed to &quot;removed in Lucene 3.0&quot;.&lt;/p&gt;

&lt;p&gt;Changes reads:&lt;/p&gt;

&lt;p&gt;Deprecate the custom encoding support in the Greek and Russian&lt;br/&gt;
Analyzers. If you need to index text in these encodings, please use Java&apos;s&lt;br/&gt;
character set conversion facilities (InputStreamReader, etc) during I/O,&lt;br/&gt;
so that Lucene can analyze this text as Unicode instead.&lt;/p&gt;</comment>
                    <comment id="12745465" author="rcmuir" created="Thu, 20 Aug 2009 16:47:25 +0100"  >&lt;p&gt;Setting to 2.9&lt;br/&gt;
I would like to commit in a day or two if there are no objections.&lt;/p&gt;</comment>
                    <comment id="12746496" author="rcmuir" created="Sat, 22 Aug 2009 21:37:51 +0100"  >&lt;p&gt;Committed revision 806886.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12417142" name="LUCENE-1793.patch" size="14787" author="rcmuir" created="Thu, 20 Aug 2009 16:46:24 +0100" />
                    <attachment id="12417138" name="LUCENE-1793.patch" size="14167" author="rcmuir" created="Thu, 20 Aug 2009 15:13:39 +0100" />
                    <attachment id="12416000" name="LUCENE-1793.patch" size="11955" author="rcmuir" created="Sun, 9 Aug 2009 17:32:41 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 9 Aug 2009 15:41:22 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11969</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25933</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>