<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:16:05 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-980/LUCENE-980.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-980] Formatting error in ReportTask in contrib/benchmark</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-980</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I am building a new Task, AnalyzerTask, that lets you change the Analyzer in the loop, thus allowing for the comparison of the same Analyzers over the set of documents.&lt;/p&gt;

&lt;p&gt;My algorithm declaration looks like:&lt;br/&gt;
NewAnalyzer(WhitespaceAnalyzer, SimpleAnalyzer, StopAnalyzer, standard.StandardAnalyzer)&lt;/p&gt;

&lt;p&gt;And it could be longer.&lt;/p&gt;

&lt;p&gt;The exception is:&lt;br/&gt;
Error: cannot execute the algorithm! String index out of range: 85&lt;br/&gt;
java.lang.StringIndexOutOfBoundsException: String index out of range: 85&lt;br/&gt;
	at java.lang.String.substring(String.java:1765)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.utils.Format.format(Format.java:85)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.tasks.ReportTask.tableTitle(ReportTask.java:85)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.tasks.ReportTask.genPartialReport(ReportTask.java:140)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.tasks.RepSumByNameTask.reportSumByName(RepSumByNameTask.java:77)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.tasks.RepSumByNameTask.doLogic(RepSumByNameTask.java:39)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.tasks.PerfTask.runAndMaybeStats(PerfTask.java:83)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doSerialTasks(TaskSequence.java:112)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.tasks.TaskSequence.doLogic(TaskSequence.java:93)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.utils.Algorithm.execute(Algorithm.java:228)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.Benchmark.execute(Benchmark.java:73)&lt;br/&gt;
	at org.apache.lucene.benchmark.byTask.Benchmark.main(Benchmark.java:109)&lt;/p&gt;

&lt;p&gt;The error seems to be caused by the fact that ReportTask uses the OP (operation) column for the String, but then uses the length of the algorithm declaration to index into the String, resulting in the index out of bounds exception.&lt;/p&gt;

&lt;p&gt;The line in question is:&lt;br/&gt;
return (s + padd).substring(0, col.length());&lt;/p&gt;

&lt;p&gt;And probably should be changed to something like:&lt;br/&gt;
    String s1 = (s + padd);&lt;br/&gt;
    return s1.substring(0, Math.min(col.length(), s1.length()));&lt;/p&gt;

&lt;p&gt;Either that or the column should be trimmed.  The workaround is to explicitly name the task.&lt;/p&gt;

&lt;p&gt;If no objections, I will make the change, tomorrow.  &lt;/p&gt;</description>
                <environment></environment>
            <key id="12376108">LUCENE-980</key>
            <summary>Formatting error in ReportTask in contrib/benchmark</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="gsingers">Grant Ingersoll</assignee>
                                <reporter username="gsingers">Grant Ingersoll</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Aug 2007 02:58:30 +0100</created>
                <updated>Fri, 25 Jan 2008 03:24:03 +0000</updated>
                    <resolved>Sat, 18 Aug 2007 13:25:29 +0100</resolved>
                            <version>2.2</version>
                                <fixVersion>2.3</fixVersion>
                                <component>modules/benchmark</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12520135" author="gsingers" created="Thu, 16 Aug 2007 03:08:45 +0100"  >&lt;p&gt;Or the padding could be extended&lt;/p&gt;</comment>
                    <comment id="12520844" author="gsingers" created="Sat, 18 Aug 2007 13:25:29 +0100"  >&lt;p&gt;Committed with patch for 981&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>0.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12763</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26749</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>