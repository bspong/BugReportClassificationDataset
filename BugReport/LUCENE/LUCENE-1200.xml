<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:20:39 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1200/LUCENE-1200.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1200] IndexWriter.addIndexes* can deadlock in rare cases</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1200</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;In somewhat rare cases it&apos;s possible for addIndexes to deadlock&lt;br/&gt;
because it is a synchronized method.&lt;/p&gt;

&lt;p&gt;Normally the merges that are necessary for addIndexes are done&lt;br/&gt;
serially (with the primary thread) because they involve segments from&lt;br/&gt;
an external directory.  However, if mergeFactor of these merges&lt;br/&gt;
complete then a merge becomes necessary for the merged segments, which&lt;br/&gt;
are not external, and so it can run in the background.  If too many BG&lt;br/&gt;
threads need to run (currently &amp;gt; 4) then the &quot;pause primary thread&quot;&lt;br/&gt;
approach adopted in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1164&quot; title=&quot;Improve how ConcurrentMergeScheduler handles too-many-merges case&quot;&gt;&lt;del&gt;LUCENE-1164&lt;/del&gt;&lt;/a&gt; will deadlock, because the addIndexes&lt;br/&gt;
method is holding a lock on IndexWriter.&lt;/p&gt;

&lt;p&gt;This was appearing as a intermittant deadlock in the&lt;br/&gt;
TestIndexWriterMerging test case.&lt;/p&gt;

&lt;p&gt;This issue is not present in 2.3 (it was caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1164&quot; title=&quot;Improve how ConcurrentMergeScheduler handles too-many-merges case&quot;&gt;&lt;del&gt;LUCENE-1164&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The solution is to shrink the scope of synchronization: don&apos;t&lt;br/&gt;
synchronize on the whole method &amp;amp; wrap synchronized(this) in the right&lt;br/&gt;
places inside the methods.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12390141">LUCENE-1200</key>
            <summary>IndexWriter.addIndexes* can deadlock in rare cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Mar 2008 10:14:59 +0000</created>
                <updated>Thu, 8 May 2008 20:47:58 +0100</updated>
                    <resolved>Thu, 6 Mar 2008 11:52:11 +0000</resolved>
                            <version>2.4</version>
                                <fixVersion>2.3.2</fixVersion>
                <fixVersion>2.4</fixVersion>
                                <component>core/index</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12574913" author="mikemccand" created="Tue, 4 Mar 2008 10:17:00 +0000"  >&lt;p&gt;Attached patch.  I plan to commit in a day or two.&lt;/p&gt;</comment>
                    <comment id="12577575" author="hossman" created="Tue, 11 Mar 2008 19:29:22 +0000"  >&lt;p&gt;targeted for 2.3.2 bug fix release&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12377063" name="LUCENE-1200.patch" size="8925" author="mikemccand" created="Tue, 4 Mar 2008 10:17:00 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 11 Mar 2008 19:29:22 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12545</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26529</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>