<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:31:50 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1468/LUCENE-1468.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1468] FSDirectory.list() is inconsistent</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1468</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-638&quot; title=&quot;Can&amp;#39;t put non-index files (e.g. CVS, SVN directories) in a Lucene index directory&quot;&gt;&lt;del&gt;LUCENE-638&lt;/del&gt;&lt;/a&gt; added a check to the FSDirectory.list() method to only return files that are Lucene related. I think this change made the FSDirectory implementation inconsistent with all other methods in Directory. E.g. you can create a file with an arbitrary name using FSDirectory, fileExists() will report that it is there, deleteFile() will remove it, but the array returned by list() will not contain the file.&lt;/p&gt;

&lt;p&gt;The actual issue that was reported in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-638&quot; title=&quot;Can&amp;#39;t put non-index files (e.g. CVS, SVN directories) in a Lucene index directory&quot;&gt;&lt;del&gt;LUCENE-638&lt;/del&gt;&lt;/a&gt; was about sub directories. Those should clearly not be listed, but IMO it is not the responsibility of a Directory implementation to decide what kind of files can be created or listed. The Directory class is an abstraction of a directory and it should&apos;t to more than that.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12409115">LUCENE-1468</key>
            <summary>FSDirectory.list() is inconsistent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Nov 2008 11:01:11 +0000</created>
                <updated>Fri, 25 Sep 2009 17:23:14 +0100</updated>
                    <resolved>Fri, 5 Dec 2008 17:03:23 +0000</resolved>
                            <version>2.1</version>
                <version>2.2</version>
                <version>2.3</version>
                <version>2.3.1</version>
                <version>2.3.2</version>
                <version>2.4</version>
                                <fixVersion>2.9</fixVersion>
                                <component>core/store</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>2</watches>
                                                    <comments>
                    <comment id="12650167" author="mreutegg" created="Mon, 24 Nov 2008 11:02:37 +0000"  >&lt;p&gt;Test cases to illustrate the issue.&lt;/p&gt;</comment>
                    <comment id="12650197" author="mikemccand" created="Mon, 24 Nov 2008 13:14:05 +0000"  >&lt;p&gt;I would tend to agree &amp;#8211; Directory should try to be a &quot;simple conduit&quot; to the filesystem.  It should not filter things in some methods and not others.&lt;/p&gt;

&lt;p&gt;It should be up to the caller to pick &amp;amp; choose which files are of interest.&lt;/p&gt;

&lt;p&gt;EG in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-638&quot; title=&quot;Can&amp;#39;t put non-index files (e.g. CVS, SVN directories) in a Lucene index directory&quot;&gt;&lt;del&gt;LUCENE-638&lt;/del&gt;&lt;/a&gt;, RamDir should pick &amp;amp; choose to copy over only those files referenced by all live commit points.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-385&quot; title=&quot;[PATCH] don&amp;#39;t delete all files in index directory on index creation&quot;&gt;&lt;del&gt;LUCENE-385&lt;/del&gt;&lt;/a&gt; was another issue where filtering was added to FSDir so that when you opened an index with create=true, Lucene would only remove files that look like index files.  This one should already be fixed (I haven&apos;t yet tested though), because we have now deprecated the create=true argument to FSDir in favor of IndexWriter&apos;s create=true.  IndexWriter is smarter and careful (uses IndexFileDeleter; retries delete; keeps old commit points around if the deletion policy says so; etc.) about which files should be deleted.&lt;/p&gt;

&lt;p&gt;Especially as we move towards flexible indexing (&lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1458&quot; title=&quot;Further steps towards flexible indexing&quot;&gt;&lt;del&gt;LUCENE-1458&lt;/del&gt;&lt;/a&gt;), what is and is not an index file is up to the particular codec(s) in use and is no longer a simple list of file extensions.  I had to change quite a few &quot;interesting&quot; places when I created the first codec that used new file extensions.&lt;/p&gt;

&lt;p&gt;So I agree neither list(), nor any other methods in FSDir, should do any filtering.  But because of back compatibility: I don&apos;t think we can suddenly change list() to return all files.  I think we&apos;d have to deprecate list and then add eg &quot;fullList&quot; or &quot;listAll&quot; instead.&lt;/p&gt;</comment>
                    <comment id="12652347" author="mikemccand" created="Tue, 2 Dec 2008 12:02:38 +0000"  >
&lt;p&gt;Attached patch.  I think it&apos;s ready to commit.  I&apos;ll wait a day or&lt;br/&gt;
two.&lt;/p&gt;

&lt;p&gt;I deprecated Directory.list() in favor of the new&lt;br/&gt;
Directory.listAll().  listAll does no filtering, and, never returns&lt;br/&gt;
null (instead throws more meaningful IOExceptions).&lt;/p&gt;

&lt;p&gt;I added a new NoSuchDirectoryException in o.a.l.store, and&lt;br/&gt;
FSDirectory.listAll throws this if the directory does not exist, or if&lt;br/&gt;
it exists but isn&apos;t a directory, so you now get a clearer exception on&lt;br/&gt;
opening an IndexReader an an invalid directory.&lt;/p&gt;

&lt;p&gt;I fixed all places in Lucene core &amp;amp; contrib that called list() to call&lt;br/&gt;
listAll() instead.  I also added test cases to make sure &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-385&quot; title=&quot;[PATCH] don&amp;#39;t delete all files in index directory on index creation&quot;&gt;&lt;del&gt;LUCENE-385&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
and &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-638&quot; title=&quot;Can&amp;#39;t put non-index files (e.g. CVS, SVN directories) in a Lucene index directory&quot;&gt;&lt;del&gt;LUCENE-638&lt;/del&gt;&lt;/a&gt; remain fixed.&lt;/p&gt;</comment>
                    <comment id="12653865" author="mikemccand" created="Fri, 5 Dec 2008 17:03:23 +0000"  >&lt;p&gt;Committed revision 723789.&lt;/p&gt;

&lt;p&gt;Thanks Marcel!&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12394549" name="DirectoryTest.java" size="855" author="mreutegg" created="Mon, 24 Nov 2008 11:02:37 +0000" />
                    <attachment id="12395087" name="LUCENE-1468.patch" size="30653" author="mikemccand" created="Tue, 2 Dec 2008 12:02:38 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 24 Nov 2008 13:14:05 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12283</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26259</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>