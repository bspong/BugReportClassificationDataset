<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:20:56 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2218/LUCENE-2218.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2218] ShingleFilter improvements</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2218</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;ShingleFilter should allow configuration of minimum shingle size (in addition to maximum shingle size), so that it&apos;s possible to (e.g.) output only trigrams instead of bigrams mixed with trigrams.  The token separator used in composing shingles should be configurable too.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12445755">LUCENE-2218</key>
            <summary>ShingleFilter improvements</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="steve_rowe">Steve Rowe</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Jan 2010 06:03:07 +0000</created>
                <updated>Fri, 10 May 2013 11:43:21 +0100</updated>
                    <resolved>Sun, 31 Jan 2010 14:04:37 +0000</resolved>
                            <version>3.0</version>
                                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12801339" author="steve_rowe" created="Sun, 17 Jan 2010 07:40:52 +0000"  >&lt;p&gt;Patch implementing new features, and a patch for a new contrib/benchmark target &quot;shingle&quot;, including a new task NewShingleAnalyzerTask.&lt;/p&gt;

&lt;p&gt;ShingleFilter is largely rewritten here in order to support the new configurable minimum shingle size.&lt;/p&gt;
</comment>
                    <comment id="12801341" author="steve_rowe" created="Sun, 17 Jan 2010 07:46:27 +0000"  >&lt;p&gt;The rewrite included some optimizations (e.g., no longer constructing n StringBuilders for every position in the input stream), and the performance is now modestly better - below is a comparison generated using the attached benchmark patch:&lt;/p&gt;

&lt;p&gt;JAVA:&lt;br/&gt;
java version &quot;1.5.0_15&quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_15-b04)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_15-b04, mixed mode)&lt;/p&gt;

&lt;p&gt;OS:&lt;br/&gt;
cygwin&lt;br/&gt;
WinVistaService Pack 2&lt;br/&gt;
Service Pack 26060022202561&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Max Shingle Size&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Unigrams?&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Unpatched&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Patched&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;StandardAnalyzer&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Improvement&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;no&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.92s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.74s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.19s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;7.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;yes&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.04s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.90s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.19s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.6%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;no&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6.21s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.82s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.19s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;11.2%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;yes&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6.41s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.97s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.19s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;12.1%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12801440" author="steve_rowe" created="Sun, 17 Jan 2010 17:16:06 +0000"  >&lt;p&gt;Output table produced by &lt;tt&gt;compare.shingle.benchmark.tables.pl&lt;/tt&gt; now has &quot;s&quot; (for seconds) in the elapsed time columns&lt;/p&gt;</comment>
                    <comment id="12801501" author="steve_rowe" created="Sun, 17 Jan 2010 20:51:32 +0000"  >&lt;p&gt;In &lt;tt&gt;compare.shingle.benchmark.tables.pl&lt;/tt&gt;, a missing decimal point caused overinflated improvement figures.  Fixed in this patch.&lt;/p&gt;</comment>
                    <comment id="12801502" author="steve_rowe" created="Sun, 17 Jan 2010 20:52:23 +0000"  >&lt;p&gt;New output from the fixed benchmark script - no change in the ShingleFilter patch:&lt;/p&gt;

&lt;p&gt;JAVA:&lt;br/&gt;
java version &quot;1.5.0_15&quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_15-b04)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_15-b04, mixed mode)&lt;/p&gt;

&lt;p&gt;OS:&lt;br/&gt;
cygwin&lt;br/&gt;
WinVistaService Pack 2&lt;br/&gt;
Service Pack 26060022202561&lt;/p&gt;

&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Max Shingle Size&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Unigrams?&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Unpatched&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Patched&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;StandardAnalyzer&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Improvement&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;no&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.03s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.62s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.18s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;16.8%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;yes&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.20s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4.84s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.18s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;13.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;no&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6.42s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.70s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.18s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;20.5%&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;4&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;yes&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;6.53s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;5.89s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2.18s&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;17.3%&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</comment>
                    <comment id="12801503" author="steve_rowe" created="Sun, 17 Jan 2010 20:57:22 +0000"  >&lt;p&gt;I think these patches are now ready to go.&lt;/p&gt;</comment>
                    <comment id="12801530" author="rcmuir" created="Sun, 17 Jan 2010 22:24:57 +0000"  >&lt;p&gt;Hi Steven, looks like a lot of good work.&lt;/p&gt;

&lt;p&gt;I made a trivial change: shingleFilterTestCommon is implemented with assertTokenStreamContents, for better checking. &lt;br/&gt;
It now recently does some good sanity checks for things like clearAttributes, even with save/restore state, etc.&lt;br/&gt;
no change to the code, tests all still pass.&lt;/p&gt;</comment>
                    <comment id="12801630" author="rcmuir" created="Mon, 18 Jan 2010 00:07:40 +0000"  >&lt;p&gt;hey, want to break the benchmark out into a separate jira issue for simplicity?&lt;/p&gt;

&lt;p&gt;its independent of the improvements to shingles and we can use this for other purposes, like realistic benchmarking of save/restoreState across analyzers with varying amounts of boolean Attributes.&lt;/p&gt;</comment>
                    <comment id="12801649" author="steve_rowe" created="Mon, 18 Jan 2010 02:15:38 +0000"  >&lt;blockquote&gt;&lt;p&gt;hey, want to break the benchmark out into a separate jira issue for simplicity? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Done - see &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2223&quot; title=&quot;ShingleFilter benchmark&quot;&gt;&lt;del&gt;LUCENE-2223&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Deleted benchmark patches from this issue.&lt;/p&gt;</comment>
                    <comment id="12801651" author="steve_rowe" created="Mon, 18 Jan 2010 02:23:02 +0000"  >&lt;blockquote&gt;&lt;p&gt;I made a trivial change: shingleFilterTestCommon is implemented with assertTokenStreamContents, for better checking. It now recently does some good sanity checks for things like clearAttributes, even with save/restore state, etc. no change to the code, tests all still pass.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Cool, thanks.  &lt;/p&gt;

&lt;p&gt;FYI, you named your patch &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2118&quot; title=&quot;Intermittent failure in TestIndexWriterMergePolicy.testMaxBufferedDocsChange&quot;&gt;&lt;del&gt;LUCENE-2118&lt;/del&gt;&lt;/a&gt;.patch instead of &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2218&quot; title=&quot;ShingleFilter improvements&quot;&gt;&lt;del&gt;LUCENE-2218&lt;/del&gt;&lt;/a&gt;.patch.&lt;/p&gt;</comment>
                    <comment id="12806228" author="rcmuir" created="Fri, 29 Jan 2010 04:42:45 +0000"  >&lt;p&gt;Steven: ok I reviewed this patch, I really like it.&lt;/p&gt;

&lt;p&gt;I think the new options make this filter more useful, and improved performance on top of this.&lt;br/&gt;
I also feel the new code is easier to understand. &lt;/p&gt;

&lt;p&gt;I will commit in a few days if no one objects.&lt;/p&gt;</comment>
                    <comment id="12806402" author="steve_rowe" created="Fri, 29 Jan 2010 17:25:15 +0000"  >&lt;p&gt;Thanks, Robert.&lt;/p&gt;

&lt;p&gt;I plan on creating a Solr issue to integrate these ShingleFilter changes into ShingleFilterFactory.  I haven&apos;t followed your (and others&apos;) work moving Solr closer to upgrading to Lucene 3.0 - are there issues with that that I should be aware of?&lt;/p&gt;</comment>
                    <comment id="12806409" author="steve_rowe" created="Fri, 29 Jan 2010 17:49:07 +0000"  >&lt;p&gt;I see that &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1674&quot; title=&quot;improve analysis tests, cut over to new API&quot;&gt;SOLR-1674&lt;/a&gt; introduced a new class TestShingleFilterFactory, but &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1657&quot; title=&quot;convert the rest of solr to use the new tokenstream API&quot;&gt;&lt;del&gt;SOLR-1657&lt;/del&gt;&lt;/a&gt; doesn&apos;t have any changes to ShingleFilterFactory, and your list in the description doesn&apos;t include it.&lt;/p&gt;

&lt;p&gt;Are there other Solr-Lucene-3.0-analysis issues I&apos;m missing?&lt;/p&gt;</comment>
                    <comment id="12806495" author="rcmuir" created="Fri, 29 Jan 2010 21:11:22 +0000"  >&lt;p&gt;Steven, all the 3.0-analysis issues are listed in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1657&quot; title=&quot;convert the rest of solr to use the new tokenstream API&quot;&gt;&lt;del&gt;SOLR-1657&lt;/del&gt;&lt;/a&gt;. In &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1674&quot; title=&quot;improve analysis tests, cut over to new API&quot;&gt;SOLR-1674&lt;/a&gt; i added basic unrelated tests to a lot of things.&lt;/p&gt;

&lt;p&gt;the only reason i did this was to just try to improve the tests as a whole, you know to hopefully prevent any changes in lucene contrib from seriously breaking something in Solr, nothing else&lt;br/&gt;
.&lt;br/&gt;
sorry for introducing the confusion.&lt;br/&gt;
in general, there are some minor things left to be done in &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1657&quot; title=&quot;convert the rest of solr to use the new tokenstream API&quot;&gt;&lt;del&gt;SOLR-1657&lt;/del&gt;&lt;/a&gt;, and then there is SynonymsFilter... this is really the big issue remaining, dont&apos; yet have any ideas on how to tackle it.&lt;/p&gt;</comment>
                    <comment id="12806565" author="steve_rowe" created="Fri, 29 Jan 2010 23:47:45 +0000"  >&lt;p&gt;Solr support for the ShingleFilter improvements implemented here: &lt;a href=&quot;https://issues.apache.org/jira/browse/SOLR-1740&quot; title=&quot;ShingleFilterFactory improvements&quot;&gt;&lt;del&gt;SOLR-1740&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="12806824" author="rcmuir" created="Sun, 31 Jan 2010 14:04:37 +0000"  >&lt;p&gt;Committed revision 905043.&lt;/p&gt;</comment>
                    <comment id="12806828" author="rcmuir" created="Sun, 31 Jan 2010 14:14:24 +0000"  >&lt;p&gt;Thanks Steven!&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="10032">
                <name>Blocker</name>
                                <outwardlinks description="blocks">
                            <issuelink>
            <issuekey id="12447061">SOLR-1740</issuekey>
        </issuelink>
                    </outwardlinks>
                                            </issuelinktype>
                        <issuelinktype id="10001">
                <name>dependent</name>
                                                <inwardlinks description="is depended upon by">
                            <issuelink>
            <issuekey id="12447061">SOLR-1740</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12430582" name="LUCENE-2118.patch" size="53592" author="rcmuir" created="Sun, 17 Jan 2010 22:24:57 +0000" />
                    <attachment id="12430538" name="LUCENE-2218.patch" size="53452" author="steve_rowe" created="Sun, 17 Jan 2010 07:40:52 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sun, 17 Jan 2010 22:24:57 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11570</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25507</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>