<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:30:54 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-3305/LUCENE-3305.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-3305] Kuromoji code donation - a new Japanese morphological analyzer</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-3305</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Atilika Inc. (&#12450;&#12486;&#12451;&#12522;&#12459;&#26666;&#24335;&#20250;&#31038;) would like to donate the Kuromoji Japanese morphological analyzer to the Apache Software Foundation in the hope that it will be useful to Lucene and Solr users in Japan and elsewhere.&lt;/p&gt;

&lt;p&gt;The project was started in 2010 since we couldn&apos;t find any high-quality, actively maintained and easy-to-use Java-based Japanese morphological analyzers, and these become many of our design goals for Kuromoji.&lt;/p&gt;

&lt;p&gt;Kuromoji also has a segmentation mode that is particularly useful for search, which we hope will interest Lucene and Solr users.  Compound-nouns, such as &#38306;&#35199;&#22269;&#38555;&#31354;&#28207; (Kansai International Airport) and &#26085;&#26412;&#32076;&#28168;&#26032;&#32862; (Nikkei Newspaper), are segmented as one token with most analyzers.  As a result, a search for &#31354;&#28207; (airport) or &#26032;&#32862; (newspaper) will not give you a for in these words.  Kuromoji can segment these words into &#38306;&#35199; &#22269;&#38555; &#31354;&#28207; and &#26085;&#26412; &#32076;&#28168; &#26032;&#32862;, which is generally what you would want for search and you&apos;ll get a hit.&lt;/p&gt;

&lt;p&gt;We also wanted to make sure the technology has a license that makes it compatible with other Apache Software Foundation software to maximize its usefulness.  Kuromoji has an Apache License 2.0 and all code is currently owned by Atilika Inc.  The software has been developed by my good friend and ex-colleague Masaru Hasegawa and myself.&lt;/p&gt;

&lt;p&gt;Kuromoji uses the so-called IPADIC for its dictionary/statistical model and its license terms are described in NOTICE.txt.&lt;/p&gt;

&lt;p&gt;I&apos;ll upload code distributions and their corresponding hashes and I&apos;d very much like to start the code grant process.  I&apos;m also happy to provide patches to integrate Kuromoji into the codebase, if you prefer that.&lt;/p&gt;

&lt;p&gt;Please advise on how you&apos;d like me to proceed with this.  Thank you.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12513762">LUCENE-3305</key>
            <summary>Kuromoji code donation - a new Japanese morphological analyzer</summary>
                <type id="2" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png">New Feature</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="cm">Christian Moen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jul 2011 08:18:38 +0100</created>
                <updated>Fri, 10 May 2013 11:44:54 +0100</updated>
                    <resolved>Sat, 14 Jan 2012 17:40:40 +0000</resolved>
                                            <fixVersion>3.6</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>6</votes>
                        <watches>8</watches>
                                                    <comments>
                    <comment id="13063754" author="cm" created="Tue, 12 Jul 2011 08:20:11 +0100"  >&lt;p&gt;Kuromoji - a Japanese morphological analyzer&lt;/p&gt;</comment>
                    <comment id="13063755" author="cm" created="Tue, 12 Jul 2011 08:20:44 +0100"  >&lt;p&gt;Kuromoji Solr integration&lt;/p&gt;</comment>
                    <comment id="13063756" author="cm" created="Tue, 12 Jul 2011 08:22:07 +0100"  >&lt;p&gt;MD5 hashes for the attachments are as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MD5 (kuromoji-0.7.6.tar.gz) = 70d3d2f69f0511b86ebe11484cbe1313
MD5 (kuromoji-solr-0.5.3.tar.gz) = b9a54698c9aebc264845e64d3904642d
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13063757" author="cm" created="Tue, 12 Jul 2011 08:24:39 +0100"  >&lt;p&gt;Attaching a brief presentation&lt;/p&gt;</comment>
                    <comment id="13063783" author="simonw" created="Tue, 12 Jul 2011 10:17:50 +0100"  >&lt;p&gt;WOW this is awesome. It seems we need to file some IP clearance here since this is a substantial contribution not developed in the ASF source control or on the mailing list. I will figure out the process here. &lt;/p&gt;

&lt;p&gt;I looked briefly at the sources here and I think we need to put this into a patch rather into a tar.gz. Some of the files don&apos;t have an apache header and some of the files state a copyright in the ASL 2 header. Basically for the code grant you need to put &quot;our&quot; ASL header into each file.&lt;br/&gt;
We also need to apply these sources to our source tree so it is very likely that this goes under /modules/analysis/common can you try to create a patch against trunk? if its is too much of a hassle you can also move the solr integration to a different issue. &lt;/p&gt;

&lt;p&gt;thanks simon&lt;/p&gt;</comment>
                    <comment id="13063814" author="cm" created="Tue, 12 Jul 2011 11:51:41 +0100"  >&lt;p&gt;Thanks a lot, Simon.  I wasn&apos;t sure when we&apos;d update the headers as part of the process, so thanks for clarifying that, too.&lt;/p&gt;

&lt;p&gt;Kuromoji downloads IPADIC as part of its build (from our server in Japan) to make its data structures, which it bundles into its jar file (becomes 11M, but can be made a lot smaller).  Building also requires more than default heap-space, so it&apos;s build is a little convoluted and different from the other code in /modules/analysis/common.&lt;/p&gt;

&lt;p&gt;Kuromoji is also usable independently from search, although, even though search perhaps is its most important application.  Would it be a good idea that I make a patch that puts it in /modules/analysis/kuromoji for now and that we take things from there?&lt;/p&gt;

&lt;p&gt;The quickest way to get Kuromoji in there would be to check the jar file /modules/analysis/kuromoji/lib, but I&apos;m not sure that&apos;s a good way to go.&lt;/p&gt;

&lt;p&gt;I&apos;ll follow up in whatever way you prefer.  Thanks again! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

</comment>
                    <comment id="13063836" author="rcmuir" created="Tue, 12 Jul 2011 12:51:05 +0100"  >&lt;blockquote&gt;
&lt;p&gt;I looked briefly at the sources here and I think we need to put this into a patch rather into a tar.gz. Some of the files don&apos;t have an apache header and some of the files state a copyright in the ASL 2 header. Basically for the code grant you need to put &quot;our&quot; ASL header into each file.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;But these things are separate, right? Can&apos;t he just fix the license headers and upload a new .tar.gz?&lt;/p&gt;

&lt;p&gt;I don&apos;t see anywhere that says a code grant should be a patch, this puts a burden on Christian to do all&lt;br/&gt;
the work, and our trunk moves too fast. Lets defer creating a patch until the code grant stuff is over... anyone could then turn it into a patch.&lt;/p&gt;</comment>
                    <comment id="13063846" author="markrmiller@gmail.com" created="Tue, 12 Jul 2011 13:20:03 +0100"  >&lt;blockquote&gt;&lt;p&gt;But these things are separate, right?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right - looks like all we need is the ASF copyright in the files. The rest can easily be handled after the grant goes through.&lt;/p&gt;</comment>
                    <comment id="13063885" author="cm" created="Tue, 12 Jul 2011 14:32:13 +0100"  >&lt;p&gt;Thanks, Robert and Mark.&lt;/p&gt;

&lt;p&gt;I&apos;ll upload new tarballs where the standard ASF license notice is being used in all Java source files and I&apos;ve also removed author tags to comply better with code standards.  I&apos;ve removed any Atilika Inc. copyrights from NOTICE.txt in both tarballs.&lt;/p&gt;</comment>
                    <comment id="13063886" author="cm" created="Tue, 12 Jul 2011 14:33:31 +0100"  >&lt;p&gt;Now uses standard ASF license notice in all Java source files.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MD5 (kuromoji-0.7.6-asf.tar.gz) = a84f016bd5162e57423a1da181c25f36
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13063887" author="cm" created="Tue, 12 Jul 2011 14:33:57 +0100"  >&lt;p&gt;Now uses standard ASF license notice in all Java source files.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
MD5 (kuromoji-solr-0.5.3-asf.tar.gz) = a3e7d5afba64ec0843be6d4dbb95be1c
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="13063910" author="thetaphi" created="Tue, 12 Jul 2011 14:58:43 +0100"  >&lt;p&gt;Code looks cool. I think we should first do the legal stuff and then produce patches. Robert is currently developing another morphological analyzer (Lucene-Gosen, &lt;a href=&quot;https://code.google.com/p/lucene-gosen/&quot; class=&quot;external-link&quot;&gt;https://code.google.com/p/lucene-gosen/&lt;/a&gt;), but this one uses a LGPL library that cannot be included with Lucene/Solr. The Lucene part has lots of cool attributes and additional TokenFilters, so maybe we combine lucene-gosen with this one (your Apache-2.0 and his TokenFilters+Attributes)? That would be really cool.&lt;/p&gt;</comment>
                    <comment id="13063928" author="cm" created="Tue, 12 Jul 2011 15:32:15 +0100"  >&lt;p&gt;Thanks, Uwe!&lt;/p&gt;

&lt;p&gt;I think we definitely should work together and combine the great work that Robert, Koji &amp;amp; co. have been doing on Lucene-GoSen with Kuromoji to make a highly attractive Japanese linguistics offering that is also an integrated part of Lucene/Solr.&lt;/p&gt;

&lt;p&gt;The attributes do indeed look very nice &amp;#8211; excellent job!  I have several improvements in mind for Kuromoji (and other Japanese related code) and I&apos;m looking forward to working with you to improve some of these things.&lt;/p&gt;

&lt;p&gt;Additional to its license, an issue with GoSen (and Sen) used to be its segmentation quality.  To my knowledge, these analyzers still don&apos;t support so-called &quot;unknown words&quot; which means that words that are not in the dictionaries are treated second-rate, which impacts negatively on segmentation quality.&lt;/p&gt;


</comment>
                    <comment id="13063942" author="koji" created="Tue, 12 Jul 2011 15:58:30 +0100"  >&lt;p&gt;Hi Christian, it&apos;s been a long time. Contribution of Kuromoji to Lucene/Solr sounds really nice! As already Uwe mentioned, lucene-gosen has really good TokenFilters, those are org.apache packages and Apache License. It will be nice if this Japanese tokenizer uses them. Plus, lucene-gosen can use not only IPADIC, but also NAIST JDIC. I&apos;d like the tokenizer to choose dictionary in the future release.&lt;/p&gt;</comment>
                    <comment id="13063955" author="cm" created="Tue, 12 Jul 2011 16:35:14 +0100"  >&lt;p&gt;&#20037;&#12375;&#12406;&#12426;&#12391;&#12377;&#12424;&#12397;&#12290; Thanks a lot, Koji. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I completely agree.  If we can get Kuromoji into the codebase, I&apos;m more than happy to submit patches for your filters so that they will work with Kuromoji.&lt;/p&gt;

&lt;p&gt;Kuromoji has preliminary support for UniDic and it sounds like a good idea to join effort on this as well.  We could support them all; IPADIC, NAIST JDIC and UniDic.&lt;/p&gt;</comment>
                    <comment id="13064422" author="cm" created="Wed, 13 Jul 2011 09:14:47 +0100"  >&lt;p&gt;Please let me know if you need paperwork from me to follow up on this.  Thanks again.&lt;/p&gt;</comment>
                    <comment id="13065774" author="simonw" created="Fri, 15 Jul 2011 09:44:57 +0100"  >&lt;p&gt;Hey Christian, I attache the IP-Clearance form for this code donation. What we need to wrap up this process is &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;a code grant (&lt;a href=&quot;http://www.apache.org/licenses/software-grant.txt&quot; class=&quot;external-link&quot;&gt;http://www.apache.org/licenses/software-grant.txt&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;a CLA from each of you&lt;/li&gt;
	&lt;li&gt;a list of all contributor if there are more than the two of you (&lt;a href=&quot;http://www.apache.org/licenses/icla.txt&quot; class=&quot;external-link&quot;&gt;http://www.apache.org/licenses/icla.txt&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;a CLA from the company owning the IP (&lt;a href=&quot;http://www.apache.org/licenses/cla-corporate.txt&quot; class=&quot;external-link&quot;&gt;http://www.apache.org/licenses/cla-corporate.txt&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;The CLA should go to the secretary, I still need to figure out where the code grant needs to go.&lt;/p&gt;</comment>
                    <comment id="13066210" author="simonw" created="Fri, 15 Jul 2011 22:13:01 +0100"  >&lt;p&gt;koji, I took the issue until the code grant is due etc.&lt;/p&gt;</comment>
                    <comment id="13066786" author="cm" created="Mon, 18 Jul 2011 06:07:14 +0100"  >&lt;p&gt;Thanks, Simon.  Please let me know where I should send the code grant and I&apos;ll file the paperwork.&lt;/p&gt;</comment>
                    <comment id="13068766" author="cm" created="Thu, 21 Jul 2011 03:27:33 +0100"  >&lt;p&gt;Hello again, Simon. Has there been any update as to where I should send the code grant? Many thanks.&lt;/p&gt;</comment>
                    <comment id="13068814" author="simonw" created="Thu, 21 Jul 2011 06:57:15 +0100"  >&lt;p&gt;Christian, apparently we just handle this as the CLA. You fill it out, scan it and send it to secretary@apache.org. Make sure you use the ICLA details when you file it.&lt;/p&gt;

&lt;p&gt;let me know once you those are send.&lt;/p&gt;</comment>
                    <comment id="13069472" author="simonw" created="Fri, 22 Jul 2011 10:55:51 +0100"  >&lt;p&gt;I am going to be away for 2 weeks if somebody wants to continue driving this code grant. please do. Otherwise @christian sorry for the break I will continue once I am back or here and there if I find a computer &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="13069481" author="cm" created="Fri, 22 Jul 2011 11:02:40 +0100"  >&lt;p&gt;Hello Simon.  I&apos;ll file the paperwork over the next couple of days by email and copy you.  Have a brilliant vacation! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="13076069" author="cm" created="Tue, 2 Aug 2011 07:44:27 +0100"  >&lt;p&gt;Hello again, Simon.  I&apos;ve filed the paperwork and copied you on email.  Hope you&apos;re enjoying your vacation!&lt;/p&gt;</comment>
                    <comment id="13080812" author="simonw" created="Mon, 8 Aug 2011 09:23:53 +0100"  >&lt;p&gt;Christina, thanks for filing the paper work, I just called out a vote on dev@l.a.o hope to get this done soon!&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="13081522" author="simonw" created="Tue, 9 Aug 2011 09:53:16 +0100"  >&lt;p&gt;Christian, I see a couple of files in the resource folders that don&apos;t have a license header, we need to make sure that all files do have an ASL 2 license header before we can finish the IP clearance process. Yet, I don&apos;t know much about this segmenter but I guess it works based on a dictionary, no? If so where are the dictionary files since I only see resource files in the test folder but maybe I miss something?&lt;/p&gt;

&lt;p&gt;simon&lt;/p&gt;</comment>
                    <comment id="13081526" author="cm" created="Tue, 9 Aug 2011 10:03:42 +0100"  >&lt;p&gt;Please see &lt;tt&gt;NOTICE.txt&lt;/tt&gt; for information on the dictionaries.&lt;/p&gt;

&lt;p&gt;Kindly let me know which files that require a license header and how I should proceed to provide a revised version.  Do you prefer a complete tarball or can I attach the filed individually to this JIRA?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    <comment id="13081532" author="simonw" created="Tue, 9 Aug 2011 10:17:12 +0100"  >&lt;blockquote&gt;&lt;p&gt;Please see NOTICE.txt for information on the dictionaries.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;so those dictionaries are not ASL licensed, right? I need to check with legal if we can include them into our distribution at all so we need to figure that out first. &lt;/p&gt;</comment>
                    <comment id="13081540" author="cm" created="Tue, 9 Aug 2011 10:32:24 +0100"  >&lt;p&gt;Correct.  You should definitely check this with legal.  I&apos;ve tried to point this out in the description and in my email with the secretary as well.  If there are questions or concerns my legal counsel can possibly assist, but I guess this is something the ASF has to consider by itself.&lt;/p&gt;</comment>
                    <comment id="13086186" author="simonw" created="Wed, 17 Aug 2011 08:42:07 +0100"  >&lt;p&gt;FYI - I created an issue on legal to categorize the IPADIC license &lt;a href=&quot;https://issues.apache.org/jira/browse/LEGAL-97&quot; title=&quot;Categorize IPADIC license&quot;&gt;&lt;del&gt;LEGAL-97&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                    <comment id="13109062" author="rcmuir" created="Tue, 20 Sep 2011 23:59:09 +0100"  >&lt;p&gt;Now that we have some feedback on &lt;a href=&quot;https://issues.apache.org/jira/browse/LEGAL-97&quot; title=&quot;Categorize IPADIC license&quot;&gt;&lt;del&gt;LEGAL-97&lt;/del&gt;&lt;/a&gt;, what is the next step we need to do to move forward with this feature?&lt;/p&gt;</comment>
                    <comment id="13109356" author="simonw" created="Wed, 21 Sep 2011 10:03:02 +0100"  >&lt;p&gt;According to &lt;a href=&quot;https://issues.apache.org/jira/browse/LEGAL-97&quot; title=&quot;Categorize IPADIC license&quot;&gt;&lt;del&gt;LEGAL-97&lt;/del&gt;&lt;/a&gt; we can include the dict files. That means we can finish this code donation and get everything in shape for a commit. I will finish the paper work once I am back from traveling.&lt;/p&gt;
</comment>
                    <comment id="13112410" author="cm" created="Thu, 22 Sep 2011 09:34:26 +0100"  >&lt;p&gt;Thanks for the follow-up, Robert and Simon.  I&apos;ve started working on a patch.&lt;/p&gt;</comment>
                    <comment id="13114579" author="simonw" created="Mon, 26 Sep 2011 11:26:32 +0100"  >&lt;p&gt;here is an updated ip-clearance file. Since this is the first time I do this I would appreciate some feedback or help from other with more experience here. Grant, does that look fine to you?&lt;/p&gt;

&lt;p&gt;I think if we are ok with this we can go ahead and call the vote on incubator.&lt;/p&gt;</comment>
                    <comment id="13143187" author="rcmuir" created="Thu, 3 Nov 2011 14:09:24 +0000"  >&lt;p&gt;Just a ping... whats our next step?&lt;/p&gt;</comment>
                    <comment id="13146568" author="gsingers" created="Tue, 8 Nov 2011 21:02:54 +0000"  >&lt;p&gt;File looks good to me.  You need to check in the file to &lt;a href=&quot;https://svn.apache.org/repos/asf/incubator/public/trunk/site-author/ip-clearance&quot; class=&quot;external-link&quot;&gt;https://svn.apache.org/repos/asf/incubator/public/trunk/site-author/ip-clearance&lt;/a&gt; and then call a vote on general@incubator.apache.org (there should be examples of this in the archives for that list).  Vote is lazy consensus, so don&apos;t expect too much feedback.  Once that vote passes, then the code can be committed.&lt;/p&gt;</comment>
                    <comment id="13146583" author="simonw" created="Tue, 8 Nov 2011 21:39:06 +0000"  >&lt;p&gt;I committed the file to the incubator ip-clearance in revision 1199470. I will go ahead an call an incubator vote now. thanks grant&lt;/p&gt;</comment>
                    <comment id="13146591" author="simonw" created="Tue, 8 Nov 2011 21:51:47 +0000"  >&lt;p&gt;I send the vote to general@incubator ...we will see in 72h! thanks folks&lt;/p&gt;</comment>
                    <comment id="13148803" author="simonw" created="Fri, 11 Nov 2011 22:54:36 +0000"  >&lt;p&gt;here is an initial patch. nothing special just basic integration into the modules/analysis tree. I added a task taht downloads the dicts and puts them in place so I could run the tests. all passing for me... still lots of work but its a start&lt;/p&gt;</comment>
                    <comment id="13148933" author="rcmuir" created="Sat, 12 Nov 2011 01:56:33 +0000"  >&lt;p&gt;looks like we want to add the Lucene analyzer/tokenizer and solr factories from kuromoji-solr-0.5.3-asf.tar.gz&lt;/p&gt;

&lt;p&gt;I&apos;d say once we get stuff going, maybe just download the dictionary, build it, and when committing commit&lt;br/&gt;
the built dictionary under resources/ folder (this is where the script puts it).&lt;/p&gt;

&lt;p&gt;I think for this kind of feature it might be hard to iterate with patches, we should maybe try to get it &lt;br/&gt;
in SVN (trunk) initially and iterate with smaller issues. The code looks pretty clean to me already.&lt;/p&gt;

&lt;p&gt;The produced jar file is somewhat large but I think its still reasonable, so I think we should look past&lt;br/&gt;
this for now? working with Sen before I know some ways we can shrink this a lot, but that would be best&lt;br/&gt;
on a future issue.&lt;/p&gt;

&lt;p&gt;Some java6 apis are here (e.g. unicode normalization). Christian can you confirm this is only for the &lt;br/&gt;
dictionary-build stage? It looked to me like its only needed for ipadic/unidic parsing, but not&lt;br/&gt;
custom dictionary support.&lt;/p&gt;

&lt;p&gt;If its only for the build stage, personally I think thats fine for 3.x too, because I&apos;m suggesting we &lt;br/&gt;
commit a &apos;built&apos; dictionary and we tell people if they want to compile the dictionary themselves they &lt;br/&gt;
need java6? We could put the dictionary-building under a tools/ directory thats java6-only, or we could &lt;br/&gt;
depend on ICU for just the tools/ piece (i think we already have such hacks for generating jflex rules&lt;br/&gt;
for StandardTokenizer) and be fine on java5.&lt;/p&gt;

&lt;p&gt;+1 for the GraphVizFormatter... &lt;/p&gt;</comment>
                    <comment id="13149276" author="simonw" created="Sun, 13 Nov 2011 11:22:22 +0000"  >&lt;p&gt;+1 to all your comments. For 3.x lets figure this out somewhere else... first iterate on trunk and when we have it at a reasonable stage we backport it to 3.x. The vote succeeded so we are good to go!&lt;/p&gt;</comment>
                    <comment id="13149278" author="simonw" created="Sun, 13 Nov 2011 11:25:30 +0000"  >&lt;p&gt;marking fix version 4.0 - lets open a new issue for backporting...&lt;/p&gt;</comment>
                    <comment id="13149642" author="cm" created="Mon, 14 Nov 2011 14:23:15 +0000"  >&lt;p&gt;Thanks a lot, Simon!&lt;/p&gt;

&lt;p&gt;Robert, I agree completely with your comments.  The Unicode normalization is only done at dictionary build time.  Simon has turned it on by default &amp;#8211; its previous default was off.  Perhaps it makes sense to have it on in Lucene&apos;s case...&lt;/p&gt;

&lt;p&gt;Simon, the TokenizerRunner class doesn&apos;t seem to be included in the patch, which might be fine.  It&apos;s not strictly necessary for Lucene, but I think it&apos;s useful to keep it there so the analyzer can easily be run from the command line.  The DebugTokenizer and GraphvizFormatter is there already, which aren&apos;t strictly necessary either, but sometimes quite useful, so I&apos;m think we should add the TokenizerRunner as well &amp;#8211; at least for now.&lt;/p&gt;

&lt;p&gt;Tests didn&apos;t pass in my case, but I&apos;ll look more into this soon.  My tomorrow is very busy, but I&apos;ll have time for this on Wednesday.&lt;/p&gt;</comment>
                    <comment id="13178635" author="rcmuir" created="Tue, 3 Jan 2012 05:17:27 +0000"  >&lt;p&gt;I created a branch here (&lt;a href=&quot;https://svn.apache.org/repos/asf/lucene/dev/branches/lucene3305&quot; class=&quot;external-link&quot;&gt;https://svn.apache.org/repos/asf/lucene/dev/branches/lucene3305&lt;/a&gt;) &lt;br/&gt;
with an initial import of this code, only minor tweaks to get things working in the build so far.&lt;/p&gt;
</comment>
                    <comment id="13179100" author="cm" created="Tue, 3 Jan 2012 22:49:22 +0000"  >&lt;p&gt;Thanks, Robert.&lt;/p&gt;

&lt;p&gt;I&apos;ve built the branch.  I needed to do &lt;tt&gt;ant test -Dargs=&quot;-Dfile.encoding=UTF-8&quot;&lt;/tt&gt; in order to make all the Kuromoji tests pass as some of them assume UTF-8 file encoding. (MacRoman is default on my system.)&lt;/p&gt;

&lt;p&gt;I really appreciate the efforts yourself and Simon have put it.  I also hope to make some meaningful contributions to make sure Kuromoji integrates and works works well with Solr and Lucene.&lt;/p&gt;</comment>
                    <comment id="13179101" author="rcmuir" created="Tue, 3 Jan 2012 22:52:57 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I&apos;ve built the branch. I needed to do ant test -Dargs=&quot;-Dfile.encoding=UTF-8&quot; in order to make all the Kuromoji tests pass as some of them assume UTF-8 file encoding. (MacRoman is default on my system.)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This sounds like a bug in the build, you shouldn&apos;t have to do that (it should be set already). However, my default encoding is UTF-8 so thats why i didn&apos;t catch it. I&apos;ll look into this.&lt;/p&gt;</comment>
                    <comment id="13183950" author="cm" created="Wed, 11 Jan 2012 09:25:28 +0000"  >&lt;p&gt;Patch to fix zero wordid issue.  Backport of fix from kuromoji 0.7.7-SNAPSHOT on Github.&lt;/p&gt;</comment>
                    <comment id="13183958" author="thetaphi" created="Wed, 11 Jan 2012 10:07:33 +0000"  >&lt;p&gt;Hi Christian,&lt;br/&gt;
thanks for the fix. I will aply the patch to the branch. The tests testYabottai() and testTsukitosha() are not hurting, but have no meaning for our variant, because wordid=0 and last wordid have different words (because we presort the whole dictionary for the FST). To make the test really use wordid=0, I should lookup the actual dictionary entries of first and last word.&lt;/p&gt;</comment>
                    <comment id="13183961" author="thetaphi" created="Wed, 11 Jan 2012 10:12:44 +0000"  >&lt;p&gt;Committed development branch revision: 1229948&lt;br/&gt;
Thanks Christian!&lt;/p&gt;</comment>
                    <comment id="13184186" author="rcmuir" created="Wed, 11 Jan 2012 16:44:25 +0000"  >&lt;p&gt;Thank you for fixing that bug!&lt;/p&gt;

&lt;p&gt;By the way, I&apos;ve been reviewing the differences between mecab and kuromoji. In general the differences seem fine to me, &lt;br/&gt;
actually in Kuromoji&apos;s favor (at least for search). Most revolve around middle-dot:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;sentence: &#31169;&#12364;&#12456;&#12489;&#12460;&#12540;&#12539;&#12489;&#12460;&#12391;&#12377;&#12290;
mecab: [&#31169;, &#12364;, &#12456;&#12489;&#12460;&#12540;&#12539;&#12489;&#12460;, &#12391;&#12377;]
kuromoji: [&#31169;, &#12364;, &#12456;&#12489;&#12460;&#12540;, &#12489;&#12460;, &#12391;&#12377;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So I think these are improvements, at least for search (e.g. Kuromoji splits the first/last name here).&lt;/p&gt;

&lt;p&gt;But, there is often funkiness revolving caused by the normalizeEntries option, which, if&lt;br/&gt;
an entry is not NFKC-normalized, it adds an NFKC-normalized entry with the same costs etc. &lt;/p&gt;

&lt;p&gt;However, I think in some cases this skews the costs because e.g. half-width and full-width numbers have different costs.&lt;br/&gt;
So by adding normalized entries with the full-width cost, we sometimes get worse tokenization.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;sentence: Windows95&#23550;&#24540;&#12398;&#12466;&#12540;&#12512;&#12434;&#21205;&#12363;&#12375;&#12383;&#12356;&#12398;&#12391;&#12377;&#12290;
mecab: [Windows, 95, &#23550;&#24540;, &#12398;, &#12466;&#12540;&#12512;, &#12434;, &#21205;&#12363;&#12375;, &#12383;&#12356;, &#12398;, &#12391;&#12377;]
kuromoji: [Windows, 9, 5, &#23550;&#24540;, &#12398;, &#12466;&#12540;&#12512;, &#12434;, &#21205;&#12363;&#12375;, &#12383;&#12356;, &#12398;, &#12391;&#12377;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I changed the default locally of &apos;normalizeEntries&apos; to false and it seemed to totally fix this, and all&lt;br/&gt;
the differences vs. mecab then seemed positive. &lt;/p&gt;

&lt;p&gt;I think we should disable normalizeEntries by default so that no costs are potentially skewed... opinions?&lt;/p&gt;</comment>
                    <comment id="13184206" author="cm" created="Wed, 11 Jan 2012 17:17:43 +0000"  >&lt;p&gt;The middle dot character (nakaguro) is treated as character class SYMBOL in order to provoke a split.  This is by design and we override IPADIC in this case since we feel the split behaviour is more reasonable for most applications.&lt;/p&gt;

&lt;p&gt;Having said this, I&apos;d expect input&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&#31169;&#12364;&#12456;&#12489;&#12460;&#12540;&#12539;&#12489;&#12460;&#12391;&#12377;&#12290;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to produce segmentation&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&#31169;&#12288;&#12364;&#12288;&#12456;&#12489;&#12460;&#12540;&#12288;&#12539;&#12288;&#12489;&#12460;&#12288;&#12391;&#12377;&#12288;&#12290;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The middle dot &#12539; seems to have been removed in your case.  Are you deliberately removing it somewhere?&lt;/p&gt;


&lt;p&gt;You&apos;re right about the NFKC-normalization.  It&apos;s turned off by default in the Kuromoji on Github.  I think disabling this is a reasonable default, but I think it&apos;s a good idea to have the option of doing NFKC-normalization prior to segmentation in the Tokenizer/Analyzer (Lucene).&lt;/p&gt;</comment>
                    <comment id="13184243" author="rcmuir" created="Wed, 11 Jan 2012 18:04:38 +0000"  >&lt;blockquote&gt;
&lt;p&gt;The middle dot &#12539; seems to have been removed in your case. Are you deliberately removing it somewhere?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Just in my debugging &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;(Separately: i did add an option to doTokenize to not emit punctuation tokens, and the lucene analyzer uses it by default, otherwise&lt;br/&gt;
index size and searches are affected by many tokens like &quot;&#12290;&quot;... but thats unrelated here)&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;You&apos;re right about the NFKC-normalization. It&apos;s turned off by default in the Kuromoji on Github. I think disabling this is a reasonable default, but I think it&apos;s a good idea to have the option of doing NFKC-normalization prior to segmentation in the Tokenizer/Analyzer (Lucene).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yeah i agree, we can add a charfilter that uses the incremental normalization api.&lt;/p&gt;</comment>
                    <comment id="13185153" author="rcmuir" created="Thu, 12 Jan 2012 19:13:29 +0000"  >&lt;p&gt;updated patch, showing differences from branch and trunk. &lt;/p&gt;

&lt;p&gt;I think this is ready to commit to trunk.&lt;/p&gt;</comment>
                    <comment id="13185199" author="rcmuir" created="Thu, 12 Jan 2012 20:11:39 +0000"  >&lt;p&gt;I committed this to trunk. &lt;/p&gt;

&lt;p&gt;I&apos;ll let hudson chew on it a bit before backporting to branch 3.x, but in general&lt;br/&gt;
I think we&apos;ve hammered on this enough that its ready to be backported too.&lt;/p&gt;

&lt;p&gt;Its a big contribution so I&apos;m sure minor things might pop up but we can just open new issues...&lt;/p&gt;

&lt;p&gt;Big thanks to Christian for the contribution... this is awesome!&lt;/p&gt;</comment>
                    <comment id="13185215" author="simonw" created="Thu, 12 Jan 2012 20:40:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;I committed this to trunk.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;YAY! thanks everyone!&lt;/p&gt;</comment>
                    <comment id="13185222" author="rcmuir" created="Thu, 12 Jan 2012 20:45:28 +0000"  >&lt;p&gt;Yes, thanks also to Uwe for lots of work compressing data and refactoring, and Mike for tuning the fsts.&lt;/p&gt;</comment>
                    <comment id="13186277" author="rcmuir" created="Sat, 14 Jan 2012 17:40:41 +0000"  >&lt;p&gt;backported to 3.x. Thanks again Christian!!! Such an awesome addition!&lt;/p&gt;</comment>
                    <comment id="13186514" author="cm" created="Sun, 15 Jan 2012 14:07:54 +0000"  >&lt;p&gt;Thanks for excellent work integrating Kuromoji, Robert.  Also thanks to everybody who has made helped and made this happen. &lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12496462" name="ip-clearance-Kuromoji.xml" size="6137" author="simonw" created="Mon, 26 Sep 2011 11:26:31 +0100" />
                    <attachment id="12486570" name="ip-clearance-Kuromoji.xml" size="5828" author="simonw" created="Fri, 15 Jul 2011 09:44:57 +0100" />
                    <attachment id="12486182" name="kuromoji-0.7.6-asf.tar.gz" size="144160" author="cm" created="Tue, 12 Jul 2011 14:33:31 +0100" />
                    <attachment id="12486153" name="kuromoji-0.7.6.tar.gz" size="145068" author="cm" created="Tue, 12 Jul 2011 08:20:11 +0100" />
                    <attachment id="12486155" name="Kuromoji short overview .pdf" size="252900" author="cm" created="Tue, 12 Jul 2011 08:24:39 +0100" />
                    <attachment id="12486183" name="kuromoji-solr-0.5.3-asf.tar.gz" size="9165" author="cm" created="Tue, 12 Jul 2011 14:33:57 +0100" />
                    <attachment id="12486154" name="kuromoji-solr-0.5.3.tar.gz" size="9238" author="cm" created="Tue, 12 Jul 2011 08:20:44 +0100" />
                    <attachment id="12510412" name="LUCENE-3305.patch" size="343888" author="rcmuir" created="Thu, 12 Jan 2012 19:13:29 +0000" />
                    <attachment id="12503436" name="LUCENE-3305.patch" size="458802" author="simonw" created="Fri, 11 Nov 2011 22:54:36 +0000" />
                    <attachment id="12510169" name="wordid0.patch" size="5556" author="cm" created="Wed, 11 Jan 2012 09:25:28 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>10.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 12 Jul 2011 09:17:50 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2264</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>24391</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>