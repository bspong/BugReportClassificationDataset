<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 12:58:13 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1369/LUCENE-1369.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1369] Eliminate unnecessary uses of Hashtable and Vector</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1369</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Lucene uses Vector, Hashtable and Enumeration when it doesn&apos;t need to. Changing to ArrayList and HashMap may provide better performance.&lt;/p&gt;

&lt;p&gt;There are a few places Vector shows up in the API. IMHO, List should have been used for parameters and return values.&lt;/p&gt;

&lt;p&gt;There are a few distinct usages of these classes:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;internal but with ArrayList or HashMap would do as well. These can simply be replaced.&lt;/li&gt;
	&lt;li&gt;internal and synchronization is required. Either leave as is or use a collections synchronization wrapper.&lt;/li&gt;
	&lt;li&gt;As a parameter to a method where List or Map would do as well. For contrib, just replace. For core, deprecate current and add new method signature.&lt;/li&gt;
	&lt;li&gt;Generated by JavaCC. (All *.jj files.) Nothing to be done here.&lt;/li&gt;
	&lt;li&gt;As a base class. Not sure what to do here. (Only applies to SegmentInfos extends Vector, but it is not used in a safe manner in all places. Perhaps, implements List would be better.)&lt;/li&gt;
	&lt;li&gt;As a return value from a package protected method, but synchronization is not used. Change return type.&lt;/li&gt;
	&lt;li&gt;As a return value to a final method. Change to List or Map.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In using a Vector the following iteration pattern is frequently used.&lt;br/&gt;
for (int i = 0; i &amp;lt; v.size(); i++) {&lt;br/&gt;
  Object o = v.elementAt&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.gif&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;;&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;This is an indication that synchronization is unimportant. The list could change during iteration.&lt;/p&gt;
</description>
                <environment></environment>
            <key id="12403278">LUCENE-1369</key>
            <summary>Eliminate unnecessary uses of Hashtable and Vector</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="dmsmith">DM Smith</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Aug 2008 20:24:10 +0100</created>
                <updated>Mon, 1 Dec 2008 10:52:59 +0000</updated>
                    <resolved>Sun, 7 Sep 2008 20:23:44 +0100</resolved>
                            <version>2.3.2</version>
                                <fixVersion>2.4</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12628306" author="mikemccand" created="Thu, 4 Sep 2008 12:08:13 +0100"  >&lt;p&gt;This patch looks good, thanks DM!&lt;/p&gt;

&lt;p&gt;The only issue I had was the addition of &quot;implements PrecedenceQueryParserConstants&quot; in PrecedenceQueryParser.jj:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; class PrecedenceQueryParser &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; PrecedenceQueryParserConstants {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I ran javacc 3.2, which apparently also inserts its own &quot;implements PrecedenceQueryParserConstants&quot;, it failed to compile.&lt;/p&gt;

&lt;p&gt;I plan to commit in a day or two.&lt;/p&gt;</comment>
                    <comment id="12628996" author="mikemccand" created="Sun, 7 Sep 2008 20:23:44 +0100"  >&lt;p&gt;Thanks DM!&lt;/p&gt;</comment>
                    <comment id="12651889" author="markrmiller@gmail.com" created="Mon, 1 Dec 2008 00:39:41 +0000"  >&lt;p&gt;Did we break our back compat guarantee here? This changes some protected signatures in queryparser. If someone was overriding them (which is what they are intended for), dropping in the new jar could cause hard to track down silent changes (the new method is called, the old one you may have overridden is not). There is a similar issue with adding more expressive range query syntax that I plan to finish up, so whats the verdict on these types of changes? Might as well do as many at once as we can if we are going to do it.&lt;/p&gt;</comment>
                    <comment id="12651894" author="yseeley@gmail.com" created="Mon, 1 Dec 2008 01:06:30 +0000"  >&lt;p&gt;It&apos;s definitely iffy - that&apos;s why I didn&apos;t do these replacements in QueryParser when I did the others.&lt;/p&gt;</comment>
                    <comment id="12651964" author="mikemccand" created="Mon, 1 Dec 2008 10:52:59 +0000"  >&lt;p&gt;Ugh, that was definitely a break in back-compat &amp;#8211; my bad.&lt;/p&gt;

&lt;p&gt;I missed that this change would mean we silently stop calling the Vector-based methods in subclasses.&lt;/p&gt;

&lt;p&gt;I&apos;ll send an email to java-user.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12389122" name="LUCENE-1369.patch" size="88647" author="dmsmith" created="Thu, 28 Aug 2008 20:39:56 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 4 Sep 2008 11:08:13 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12382</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26362</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>