<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:30:22 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-1389/LUCENE-1389.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-1389] SimpleSpanFragmenter can create very short fragments</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-1389</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;Line 74 of SimpleSpanFragmenter returns true when the current token is the start of a hit on a span or phrase, thus starting a new fragment. Two problems occur:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The previous fragment may be very short, but if it contains a hit it will be combined with the new fragment later so this disappears.&lt;/li&gt;
	&lt;li&gt;If the token is close to a natural fragment boundary the new fragment will end up very short; possibly even as short as just the span or phrase itself. This is the result of creating a new fragment without incrementing currentNumFrags.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;To fix, remove or comment out line 74. The result is that fragments average to the fragment size unless a span or phrase hit is towards the end of the fragment - that fragment is made larger and the following fragment shorter to accommodate the hit.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12404528">LUCENE-1389</key>
            <summary>SimpleSpanFragmenter can create very short fragments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="markrmiller@gmail.com">Mark Miller</assignee>
                                <reporter username="andrew_duffy">Andrew Duffy</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Sep 2008 11:54:38 +0100</created>
                <updated>Fri, 25 Sep 2009 17:23:08 +0100</updated>
                    <resolved>Thu, 13 Nov 2008 00:02:21 +0000</resolved>
                            <version>2.3.2</version>
                                <fixVersion>2.9</fixVersion>
                                <component>modules/highlighter</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12631765" author="andrew_duffy" created="Wed, 17 Sep 2008 14:03:41 +0100"  >&lt;p&gt;Another problem with the simple fragmenters is that they can produce a very short fragment at the end of the stream. The attached diff from the trunk SimpleSpanFragmenter.java remembers how long the text being fragmented is and doesn&apos;t make a fragment break if the token is less than half a fragment away from the end of the text. SimpleFragmenter could easily be changed in the same way.&lt;/p&gt;</comment>
                    <comment id="12631796" author="andrew_duffy" created="Wed, 17 Sep 2008 15:40:36 +0100"  >&lt;p&gt;I&apos;ve attached another diff, again from the trunk version. There is a slight optimisation - the span loop is broken early when a span is found at the current position.&lt;/p&gt;

&lt;p&gt;The main change is to start(String), though. Previously, it set currentPosition to 0, meaning every position was off by one and spans were not matched. It now starts currentPosition at -1 so the first token position ends up 0 as it should.&lt;/p&gt;</comment>
                    <comment id="12637122" author="markrmiller@gmail.com" created="Mon, 6 Oct 2008 17:01:52 +0100"  >&lt;p&gt;Thanks Andrew!&lt;/p&gt;</comment>
                    <comment id="12647128" author="markrmiller@gmail.com" created="Thu, 13 Nov 2008 00:02:21 +0000"  >&lt;p&gt;Thanks Andrew.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12391547" name="Lucene-1389.patch" size="3597" author="markrmiller@gmail.com" created="Mon, 6 Oct 2008 17:01:52 +0100" />
                    <attachment id="12390275" name="positions.patch" size="1340" author="andrew_duffy" created="Wed, 17 Sep 2008 15:40:36 +0100" />
                    <attachment id="12390266" name="tailfragments.patch" size="1240" author="andrew_duffy" created="Wed, 17 Sep 2008 14:03:41 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 6 Oct 2008 16:01:52 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12362</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26342</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>