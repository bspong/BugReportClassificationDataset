<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:00:28 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2384/LUCENE-2384.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2384] Reset zzBuffer in StandardTokenizerImpl* when lexer is reset.</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2384</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;When indexing large documents, the lexer buffer may stay large forever. This sub-issue resets the lexer buffer back to the default on reset(Reader).&lt;/p&gt;

&lt;p&gt;This is done on the enclosing issue.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12461522">LUCENE-2384</key>
            <summary>Reset zzBuffer in StandardTokenizerImpl* when lexer is reset.</summary>
                <type id="7" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png">Sub-task</type>
                    <parent id="12440859">LUCENE-2074</parent>
                        <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Apr 2010 12:06:11 +0100</created>
                <updated>Wed, 1 Dec 2010 14:49:53 +0000</updated>
                    <resolved>Fri, 29 Oct 2010 14:53:36 +0100</resolved>
                            <version>3.0.1</version>
                                <fixVersion>2.9.4</fixVersion>
                <fixVersion>3.0.3</fixVersion>
                <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12854901" author="ecerulm" created="Thu, 8 Apr 2010 12:12:52 +0100"  >&lt;p&gt;The mailing list discussion that originated this is &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://lucene.markmail.org/thread/ndmcgffg2mnwjo47&quot; class=&quot;external-link&quot;&gt;http://lucene.markmail.org/thread/ndmcgffg2mnwjo47&lt;/a&gt;&lt;/p&gt;
</comment>
                    <comment id="12854902" author="rcmuir" created="Thu, 8 Apr 2010 12:18:05 +0100"  >&lt;p&gt;If tokenizers like StandardTokenizer just end out reading things into ram anyway, we should remove Reader from the Tokenizer interface.&lt;/p&gt;

&lt;p&gt;supporting reader instead of simply tokenizing the entire doc causes our tokenizers to be very very complex (see CharTokenizer).&lt;br/&gt;
It would be nice to remove this complexity, if the objective doesn&apos;t really work anyway.&lt;/p&gt;</comment>
                    <comment id="12854903" author="thetaphi" created="Thu, 8 Apr 2010 12:20:47 +0100"  >&lt;p&gt;For JFlex this does not help as the Jflex-generated code always needs a Reader. This is special here, the lexer will not need to load the whole document into the reader, it only needs sometimes a large look forward/backwards buffer.&lt;/p&gt;</comment>
                    <comment id="12854905" author="ecerulm" created="Thu, 8 Apr 2010 12:23:00 +0100"  >&lt;p&gt;patch to reset the zzBuffer when the input is reseted. The code is really taken from &lt;a href=&quot;https://sourceforge.net/mailarchive/message.php?msg_id=444070.38422.qm@web38901.mail.mud.yahoo.com&quot; class=&quot;external-link&quot;&gt;https://sourceforge.net/mailarchive/message.php?msg_id=444070.38422.qm@web38901.mail.mud.yahoo.com&lt;/a&gt;  so I can&apos;t really grant license to use it but I think the guy realeased it as public domain by posting it to the mailing list. &lt;/p&gt;

&lt;p&gt;I tested it and it seems to work for me. Just including it here is case somebody want to apply the patch directly to 3.0.1 (although it&apos;s better to wait for 3.1)&lt;/p&gt;</comment>
                    <comment id="12854906" author="rcmuir" created="Thu, 8 Apr 2010 12:25:45 +0100"  >&lt;blockquote&gt;&lt;p&gt;For JFlex this does not help as the Jflex-generated code always needs a Reader.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This can be fixed. Currently all I/O in all tokenizers is broken and buggy, and does not correctly handle special cases around their &apos;buffering&apos;.&lt;/p&gt;

&lt;p&gt;The only one that is correct is CharTokenizer, but at what cost? It has so much complexity because of this Reader issue.&lt;/p&gt;

&lt;p&gt;We should stop pretending like we can really stream docs with Reader.&lt;br/&gt;
We should stop pretending like 8GB documents or something exist, where we cant just analyze the whole doc at once and make things simple.&lt;br/&gt;
And then we can fix the lucene tokenizers to be correct.&lt;/p&gt;</comment>
                    <comment id="12854908" author="thetaphi" created="Thu, 8 Apr 2010 12:38:20 +0100"  >&lt;blockquote&gt;
&lt;p&gt;patch to reset the zzBuffer when the input is reseted. The code is really taken from &lt;a href=&quot;https://sourceforge.net/mailarchive/message.php?msg_id=444070.38422.qm@web38901.mail.mud.yahoo.com&quot; class=&quot;external-link&quot;&gt;https://sourceforge.net/mailarchive/message.php?msg_id=444070.38422.qm@web38901.mail.mud.yahoo.com&lt;/a&gt; so I can&apos;t really grant license to use it but I think the guy realeased it as public domain by posting it to the mailing list. &lt;br/&gt;
I tested it and it seems to work for me. Just including it here is case somebody want to apply the patch directly to 3.0.1 (although it&apos;s better to wait for 3.1)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Your fix adds an addtional complexity. Just reset the buffer back to the default ZZ_BUFFERSIZE if grown on reset. Your patch always reallocates a new buffer.&lt;/p&gt;

&lt;p&gt;Use this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; void reset(Reader r) {
  &lt;span class=&quot;code-comment&quot;&gt;// reset to &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; buffer size, &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; buffer has grown
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (zzBuffer.length &amp;gt; ZZ_BUFFERSIZE) {
    zzBuffer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[ZZ_BUFFERSIZE];
  }
  yyreset(r);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    <comment id="12855198" author="thetaphi" created="Thu, 8 Apr 2010 23:57:48 +0100"  >&lt;p&gt;Committed revision: 932163&lt;/p&gt;</comment>
                    <comment id="12868192" author="thetaphi" created="Mon, 17 May 2010 13:13:59 +0100"  >&lt;p&gt;The zzBuffer bug is fixed in JFlex r591, we should add a version check and remove the code. Also WikipediaTokenizer&apos;s files should be regened.&lt;/p&gt;</comment>
                    <comment id="12868208" author="thetaphi" created="Mon, 17 May 2010 13:52:55 +0100"  >&lt;p&gt;Patch for 3.x and trunk. The 3.x patch also contains the lost merge of JFlex 1.5 update in Wikipedia&lt;/p&gt;</comment>
                    <comment id="12868213" author="thetaphi" created="Mon, 17 May 2010 14:16:04 +0100"  >&lt;p&gt;Committed:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;trunk revision: 945130&lt;/li&gt;
	&lt;li&gt;3x revision: 945133&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    <comment id="12926257" author="rcmuir" created="Fri, 29 Oct 2010 14:00:26 +0100"  >&lt;p&gt;reopening for possible 2.9.4/3.0.3 backport.&lt;/p&gt;</comment>
                    <comment id="12926283" author="thetaphi" created="Fri, 29 Oct 2010 14:53:36 +0100"  >&lt;p&gt;Backported to 3.0 branch revision: 1028739&lt;br/&gt;
Backported to 2.9 branch revision: 1028744&lt;/p&gt;</comment>
                </comments>
                <issuelinks>
                        <issuelinktype id="12310010">
                <name>Incorporates</name>
                                                <inwardlinks description="is part of">
                            <issuelink>
            <issuekey id="12440859">LUCENE-2074</issuekey>
        </issuelink>
                    </inwardlinks>
                            </issuelinktype>
                    </issuelinks>
                <attachments>
                    <attachment id="12444671" name="LUCENE-2384-3x.patch" size="25550" author="thetaphi" created="Mon, 17 May 2010 13:52:55 +0100" />
                    <attachment id="12444670" name="LUCENE-2384-trunk.patch" size="9471" author="thetaphi" created="Mon, 17 May 2010 13:52:55 +0100" />
                    <attachment id="12441139" name="reset.diff" size="1840" author="ecerulm" created="Thu, 8 Apr 2010 12:23:00 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Thu, 8 Apr 2010 11:12:52 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11417</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25307</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>