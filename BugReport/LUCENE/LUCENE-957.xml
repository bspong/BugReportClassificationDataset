<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:05:22 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-957/LUCENE-957.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-957] Lucene RAM Directory doesn&apos;t work for Index Size &gt; 8 GB</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-957</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;from user list - &lt;a href=&quot;http://www.gossamer-threads.com/lists/lucene/java-user/50982&quot; class=&quot;external-link&quot;&gt;http://www.gossamer-threads.com/lists/lucene/java-user/50982&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Problem seems to be casting issues in RAMInputStream.&lt;/p&gt;

&lt;p&gt;Line 90:&lt;br/&gt;
      bufferStart = BUFFER_SIZE * currentBufferIndex;&lt;br/&gt;
both rhs are ints while lhs is long.&lt;br/&gt;
so a very large product would first overflow MAX_INT, become negative, and only then (auto) casted to long, but this is too late. &lt;/p&gt;

&lt;p&gt;Line 91: &lt;br/&gt;
     bufferLength = (int) (length - bufferStart);&lt;br/&gt;
both rhs are longs while lhs is int.&lt;br/&gt;
so the (int) cast result may turn negative and the logic that follows would be wrong.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12373683">LUCENE-957</key>
            <summary>Lucene RAM Directory doesn&apos;t work for Index Size &gt; 8 GB</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/bug.png">Bug</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png">Resolved</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="doronc">Doron Cohen</assignee>
                                <reporter username="doronc">Doron Cohen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jul 2007 23:51:41 +0100</created>
                <updated>Sat, 28 Jul 2007 02:49:17 +0100</updated>
                    <resolved>Thu, 19 Jul 2007 17:51:20 +0100</resolved>
                                                            <component>core/store</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>1</watches>
                                                    <comments>
                    <comment id="12512302" author="doronc" created="Fri, 13 Jul 2007 00:05:33 +0100"  >&lt;p&gt;Patch fixing int / long cast issues in RAMInputStream.&lt;/p&gt;

&lt;p&gt;All tests pass but non of those actually demonstrates the bug being fixed. I don&apos;t currently have a large enough index to test this.&lt;/p&gt;

&lt;p&gt;I will wait for a manual test by Murali (who reported this issue), and for at least one patch review.&lt;/p&gt;</comment>
                    <comment id="12512829" author="doronc" created="Sun, 15 Jul 2007 22:52:36 +0100"  >&lt;p&gt;Previous patch apparently did not fix the bug - a casting problem in RAMOutputStream had to be fixed. &lt;br/&gt;
Updated patch adds a test imitating ramFile larger than maxint. &lt;br/&gt;
For this had to make the allocation of a new byte array in RAMFile overridable. &lt;br/&gt;
The new test fails before fixing RAMOutputStream (affecting RAMDirectory constructor from FS). However the issues in RAMInputStream in fact do not cause failures, yet they should be fixed. &lt;/p&gt;

&lt;p&gt;With a test in place I now feel confident in this fix - will commit it in a day or two if there are no reservations.&lt;/p&gt;</comment>
                    <comment id="12513943" author="doronc" created="Thu, 19 Jul 2007 17:51:20 +0100"  >&lt;p&gt;committed.&lt;/p&gt;</comment>
                    <comment id="12516123" author="muraalee" created="Sat, 28 Jul 2007 02:49:17 +0100"  >&lt;p&gt;Doron Cohon,&lt;/p&gt;

&lt;p&gt;Thanks a tonne. I tried your first patch and it didn&apos;t work. Today i saw your message and checked out the source from head and built it.&lt;br/&gt;
It worked !!!&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12361860" name="lucene-957.patch" size="8330" author="doronc" created="Sun, 15 Jul 2007 22:52:36 +0100" />
                    <attachment id="12361725" name="lucene-957.patch" size="1439" author="doronc" created="Fri, 13 Jul 2007 00:05:33 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Sat, 28 Jul 2007 01:49:17 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>12785</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>26772</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>