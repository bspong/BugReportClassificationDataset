<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:03:26 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2226/LUCENE-2226.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2226] move contrib/snowball to contrib/analyzers</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2226</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;to fix bugs in some duplicate, handcoded impls of these stemmers (nl, fr, ru, etc) we should simply merge snowball and analyzers, and replace the buggy impls with the proper snowball stemfilters.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12445845">LUCENE-2226</key>
            <summary>move contrib/snowball to contrib/analyzers</summary>
                <type id="3" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/task.png">Task</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jan 2010 17:47:09 +0000</created>
                <updated>Fri, 10 May 2013 11:43:20 +0100</updated>
                    <resolved>Thu, 21 Jan 2010 02:48:40 +0000</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                <component>modules/analysis</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12801876" author="rcmuir" created="Mon, 18 Jan 2010 17:51:45 +0000"  >&lt;p&gt;this patch simply moves snowball functionality into contrib/analyzers. it doesn&apos;t try to fix bugs or remove duplication yet.&lt;br/&gt;
no packages are changed so it doesnt cause any breaks.&lt;/p&gt;

&lt;p&gt;before applying patch, run the following:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;# move tests
mkdir contrib/analyzers/common/src/test/org/apache/lucene/analysis/snowball
svn add contrib/analyzers/common/src/test/org/apache/lucene/analysis/snowball
svn move contrib/snowball/src/test/org/apache/lucene/analysis/snowball/* contrib/analyzers/common/src/test/org/apache/lucene/analysis/snowball
# move resources
mkdir contrib/analyzers/common/src/resources/org/apache/lucene/analysis/snowball
svn add contrib/analyzers/common/src/resources/org/apache/lucene/analysis/snowball
svn move contrib/snowball/src/resources/org/apache/lucene/analysis/snowball/* contrib/analyzers/common/src/resources/org/apache/lucene/analysis/snowball
# move java
mkdir contrib/analyzers/common/src/java/org/apache/lucene/analysis/snowball
svn add contrib/analyzers/common/src/java/org/apache/lucene/analysis/snowball
svn move contrib/snowball/src/java/org/apache/lucene/analysis/snowball/* contrib/analyzers/common/src/java/org/apache/lucene/analysis/snowball
mkdir -p contrib/analyzers/common/src/java/org/tartarus/snowball/ext
svn add contrib/analyzers/common/src/java/org/tartarus
svn move contrib/snowball/src/java/org/tartarus/snowball/ext/* contrib/analyzers/common/src/java/org/tartarus/snowball/ext
svn move contrib/snowball/src/java/org/tartarus/snowball/*.java contrib/analyzers/common/src/java/org/tartarus/snowball
# move LICENSES/README files
svn move contrib/snowball/SNOWBALL-LICENSE.txt contrib/analyzers/common
svn move contrib/snowball/README.txt contrib/analyzers/common
# remove snowball
svn rm contrib/snowball
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                    <comment id="12801885" author="rcmuir" created="Mon, 18 Jan 2010 18:13:07 +0000"  >&lt;p&gt;hello, i know this is an extremely simple change technically, but i would like to hear if anyone is against this move.&lt;/p&gt;

&lt;p&gt;if no one objects i&apos;d like to commit in a few days, to make progress on fixing some of these problems.&lt;/p&gt;</comment>
                    <comment id="12801912" author="dmsmith" created="Mon, 18 Jan 2010 19:27:47 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;However this is a very minor break in bw compat: drop in jar replacement. The user will have to delete the snowball jar and use the contrib/analyzer one, if not already done.&lt;/p&gt;</comment>
                    <comment id="12801970" author="rcmuir" created="Mon, 18 Jan 2010 21:50:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;However this is a very minor break in bw compat: drop in jar replacement. The user will have to delete the snowball jar and use the contrib/analyzer one, if not already done.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;what else can we do though other than move it? the packages are the same&lt;/p&gt;

&lt;p&gt;Half of me agrees with your comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2055&quot; title=&quot;Fix buggy stemmers and Remove duplicate analysis functionality&quot;&gt;&lt;del&gt;LUCENE-2055&lt;/del&gt;&lt;/a&gt; that we should have solid back compat for contrib analyzers.&lt;br/&gt;
The other half says that this compat is already acheived via the build mechanism: simply use the old jar files, and that any work we do for compat here is wasted.&lt;/p&gt;

&lt;p&gt;what i am certain about is that this stuff isn&apos;t stable like core lucene and to clean it up, its going to take a long time if we restrict ourselves with the same policy that a stable library (core lucene) has.&lt;/p&gt;</comment>
                    <comment id="12801972" author="markrmiller@gmail.com" created="Mon, 18 Jan 2010 21:56:08 +0000"  >&lt;p&gt;Contribs back compat policy is that there is no back compat policy unless that contrib specifically states one.&lt;/p&gt;</comment>
                    <comment id="12802004" author="dmsmith" created="Tue, 19 Jan 2010 00:43:04 +0000"  >&lt;p&gt;Robert, I&apos;m suggesting that you move it. But that in CHANGES.txt that you make it clear that part of the user&apos;s responsibility in upgrading is to delete the snowball jar. I&apos;ve been bit too many times by having both the old jar and a new jar in the classpath. I know better but ....&lt;/p&gt;

&lt;p&gt;I&apos;d more or less agree with you that one could stay with old jars if it weren&apos;t for bug fixes. Some bug fixes, such as in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2055&quot; title=&quot;Fix buggy stemmers and Remove duplicate analysis functionality&quot;&gt;&lt;del&gt;LUCENE-2055&lt;/del&gt;&lt;/a&gt;, will partially invalidate an index, requiring it to be rebuilt to work as expected. I think these need to be done and should not require bw compat maintenance of the bug.&lt;/p&gt;

&lt;p&gt;Mark, that is my understanding too. I wasn&apos;t commenting on the policy but on the fact of the possible breakage. I think it is a courtesy to notify users of a change to which they might need to pay attention. I don&apos;t know that&apos;s spelled out in the policy, but I think it should be. Not that a lack of notice is a guarantee of no breakage but that a notice is a guarantee of breakage (at least under some circumstances).&lt;/p&gt;

&lt;p&gt;Is there any contrib that specifically states one? I couldn&apos;t find it. That said, the last release went to great lengths to preserve bw compat in some contribs, especially contrib/analyzers/common. This is attested to by the Version attribute. Is that the implicit statement of the policy? It is clear that Snowball has broken backward compatibility in the past. I presume it will in the future. The smartcn package is marked experimental. The analysis/common is not clear as it has the Version stuff.&lt;/p&gt;

&lt;p&gt;Part of what Robert is saying (or at least what I am hearing): Snowball should be trusted, but contrib/common stemmers should not. If the latter had an implicit bw compat policy (in view of the Version usage), does that indicate that Snowball should inherit the bw compat? (I&apos;m being a bit argumentative, I know. ATM, I don&apos;t think it is that important. But after all the dust settles and this i18n stuff is solid, I think it might be reasonable to make a stronger bw compat statement.)&lt;/p&gt;

&lt;p&gt;Regarding the policy, I think it is good and give users confidence in the stability of Lucene and the longevity of their indexes. As I see it, the bw compat policy covers English well, western European ok, but other languages poorly. Other than English it is likely that one is using a contrib to do analysis. I think that ultimately it will be important for bw compat to cover non-English well. I might be wrong here, any large project is likely to index non-English texts and will need index level compatibility. Right now the only option is to use contrib as a copy source.&lt;/p&gt;

&lt;p&gt;As I see it the bw compat policy covers several things:&lt;br/&gt;
1) index compatibilty across 2 major releases.&lt;br/&gt;
2) api compatibility within 1 major release.&lt;br/&gt;
3) drop in jar compatibility from one release to the next. Going to a x.0 release requires deprecations to be addressed.&lt;/p&gt;

&lt;p&gt;I think these are in the order that I care about them. WRT 2), I really only care about semantic changes. As long as there is a good mechanism to identify what I need to do, I really don&apos;t care that the call interface changes when there is semantic equivalence.&lt;br/&gt;
WRT 3) I don&apos;t care at all.&lt;/p&gt;

&lt;p&gt;And regarding 1), I&apos;d rather have correctness and have bugs fixed, causing a bw break than preserve a &quot;bad&quot; index.&lt;/p&gt;

&lt;p&gt;But that&apos;s just me. Just one.....&lt;/p&gt;
</comment>
                    <comment id="12802011" author="markrmiller@gmail.com" created="Tue, 19 Jan 2010 00:58:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;Mark, that is my understanding too. I wasn&apos;t commenting on the policy but on the fact of the possible breakage. I think it is a courtesy to notify users of a change to which they might need to pay attention. I don&apos;t know that&apos;s spelled out in the policy, but I think it should be. Not that a lack of notice is a guarantee of no breakage but that a notice is a guarantee of breakage (at least under some circumstances).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right - I was just pointing out that jar drop in is far from a requirement in contrib. We do always try and play nice anyway.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is there any contrib that specifically states one? I couldn&apos;t find it. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Don&apos;t think so - meaning there is no back compat policy in contrib - I think as a contrib matures, its up to those working on it to decide that its reached a state that deserves a policy of some kind. The Highlighter could probably use one at this point, but at the same time, nothing has created too much of an outcry at this point.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The analysis/common is not clear as it has the Version stuff.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Right - just because there is no policy doesn&apos;t mean we shouldn&apos;t make any attempts at back compat - but the issue you brought up is not something easily addressed, nor I think, large enough to worry about with the proper warning in Changes. Users should be wary of contrib on upgrading - unless it presents a strong back compat policy.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;But after all the dust settles and this i18n stuff is solid, I think it might be reasonable to make a stronger bw compat statement.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree - now that contrib has been getting some much needed love recently, I think it should start heading towards some back compat promises - especially concerning analyzers. We already do tend to bend over backwards when we can anyway.&lt;/p&gt;

&lt;p&gt;I think we are on the same page - I&apos;m just not very worried about the break you mention - I think its a perfectly acceptable growing pain. And I think our back compat has been so week because contrib has been a bit of a wasteland in the past - no one was willing to take ownership of a lot of this stuff - especially the language analyzers. That has change recently. As the devs clean up and consolidate this stuff properly, I think we can work towards stronger promises in the future.&lt;/p&gt;</comment>
                    <comment id="12802034" author="rcmuir" created="Tue, 19 Jan 2010 02:01:21 +0000"  >&lt;p&gt;Hi DM, I wanted to give my opinion on some of your comments:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Robert, I&apos;m suggesting that you move it. But that in CHANGES.txt that you make it clear that part of the user&apos;s responsibility in upgrading is to delete the snowball jar. I&apos;ve been bit too many times by having both the old jar and a new jar in the classpath. I know better but ...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ok, I&apos;ll improve the wording in CHANGES.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I&apos;d more or less agree with you that one could stay with old jars if it weren&apos;t for bug fixes. Some bug fixes, such as in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2055&quot; title=&quot;Fix buggy stemmers and Remove duplicate analysis functionality&quot;&gt;&lt;del&gt;LUCENE-2055&lt;/del&gt;&lt;/a&gt;, will partially invalidate an index, requiring it to be rebuilt to work as expected. I think these need to be done and should not require bw compat maintenance of the bug.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;ok, we can discuss this on that issue when the time comes. personally I am for &quot;fixing the bug&quot; which means for this case using snowball instead. i&apos;d like to remove the old cruft, maybe we decide we should keep it around with Version for a while, but not too long, i think 2 major releases is too long in this case, since lucene major releases don&apos;t seem to happen that often.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Part of what Robert is saying (or at least what I am hearing): Snowball should be trusted, but contrib/common stemmers should not.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;no, I am not trying to imply this really. Snowball has its own problems (Karl Wettin and I both reported problems to their mailing list recently), but for these languages, its better to simply use snowball itself rather than some code that tries to implement one of its algorithms, but doesn&apos;t quite do it right.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think that ultimately it will be important for bw compat to cover non-English well.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, and we can continue to do this. but ultimately is a long time away, contrib/analyzers still needs some work, and even then, for non-english some stuff is simply outside of our control, i.e. Myanmar unicode model changing between 5.1 and 5.2, things like that. &lt;/p&gt;

&lt;p&gt;but for this change, we simply need to move things from one contrib to another, the packages are left unchanged. &lt;/p&gt;

&lt;p&gt;If i knew of an easy way to &apos;move things from one jar to another and preserve drop-in jar back compat&apos;, i would do it. But i think this concept doesn&apos;t even make sense for what we are doing here?&lt;/p&gt;</comment>
                    <comment id="12802040" author="dmsmith" created="Tue, 19 Jan 2010 02:11:32 +0000"  >&lt;blockquote&gt;&lt;p&gt;But i think this concept doesn&apos;t even make sense for what we are doing here?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree. A comment in CHANGES should be sufficient&lt;/p&gt;</comment>
                    <comment id="12803143" author="rcmuir" created="Thu, 21 Jan 2010 02:48:40 +0000"  >&lt;p&gt;Committed revision 901505.&lt;/p&gt;</comment>
                    <comment id="12803210" author="thetaphi" created="Thu, 21 Jan 2010 07:20:40 +0000"  >&lt;p&gt;Here the fix for the javadocs-all target after hudson build failure.&lt;/p&gt;

&lt;p&gt;Committed revision: 901576&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12431010" name="LUCENE-2226-javadocs.patch" size="1802" author="thetaphi" created="Thu, 21 Jan 2010 07:20:40 +0000" />
                    <attachment id="12430662" name="LUCENE-2226.patch" size="7763" author="rcmuir" created="Mon, 18 Jan 2010 17:51:45 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>2.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Mon, 18 Jan 2010 19:27:47 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11562</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25499</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>