<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:29:39 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2659/LUCENE-2659.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2659] lucenetestcase ease of use improvements</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2659</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;I started working on this in &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2658&quot; title=&quot;TestIndexWriterExceptions random failure: AIOOBE in ByteBlockPool.allocSlice&quot;&gt;&lt;del&gt;LUCENE-2658&lt;/del&gt;&lt;/a&gt;, here is the finished patch.&lt;/p&gt;

&lt;p&gt;There are some problems with LuceneTestCase:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a tests beforeClass, or the test itself (its @befores and its method), might have some&lt;br/&gt;
  random behavior, but only the latter can be reproduced with -Dtests.seed&lt;/li&gt;
	&lt;li&gt;if you want to do things in beforeClass, you have to use a different API: newDirectory(random)&lt;br/&gt;
  instead of newDirectory, etc.&lt;/li&gt;
	&lt;li&gt;for a new user, the current output can be verbose, confusing and overwhelming.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, I refactored this class to address these problems. &lt;br/&gt;
A class still needs 2 seeds internally, as the beforeClass will only run once, &lt;br/&gt;
but the methods or setUp() might run many times, especially when increasing iterations.&lt;/p&gt;

&lt;p&gt;but lucenetestcase deals with this, and the &quot;seed&quot; is 128-bit (UUID): &lt;br/&gt;
the MSB is initialized in beforeClass, the LSB varied for each method run.&lt;br/&gt;
if you provide a seed with a -D, they are both fixed to the UUID you provided.&lt;/p&gt;

&lt;p&gt;I fixed the API to be consistent, so you should be able to migrate a test from &lt;br/&gt;
setUp() to beforeClass() &lt;span class=&quot;error&quot;&gt;&amp;#91;junit3 to junit4&amp;#93;&lt;/span&gt; without changing parameters.&lt;/p&gt;

&lt;p&gt;The codec, locale, timezone is only printed once at the end if any tests fail, &lt;br/&gt;
as its per-class anyway (setup in beforeClass)&lt;/p&gt;

&lt;p&gt;finally, when a test fails, you get a single &quot;reproduce with&quot; command line you can copy and paste to reproduce.&lt;br/&gt;
this way you dont have to spend time trying to figure out what the command line should be.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Tests run: 2, Failures: 2, Errors: 0, Time elapsed: 0.197 sec
    [junit]
    [junit] ------------- Standard Output ---------------
    [junit] NOTE: reproduce with: ant test -Dtestcase=TestExample -Dtestmethod=testMethodA 
              -Dtests.seed=a51e707b-6550-7800-9f8c-72622d14bf5f
    [junit] NOTE: reproduce with: ant test -Dtestcase=TestExample -Dtestmethod=testMethodB 
              -Dtests.seed=a51e707b-6550-7800-f7eb-2efca3820738
    [junit] NOTE: test params are: codec=PreFlex, locale=ar_LY, timezone=Etc/UCT
    [junit] ------------- ---------------- ---------------
    [junit] Test org.apache.lucene.util.TestExample FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
            <key id="12474656">LUCENE-2659</key>
            <summary>lucenetestcase ease of use improvements</summary>
                <type id="6" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/requirement.png">Test</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="rcmuir">Robert Muir</assignee>
                                <reporter username="rcmuir">Robert Muir</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Sep 2010 05:17:27 +0100</created>
                <updated>Wed, 30 Mar 2011 16:50:09 +0100</updated>
                    <resolved>Thu, 23 Sep 2010 13:34:21 +0100</resolved>
                                            <fixVersion>3.1</fixVersion>
                <fixVersion>4.0-ALPHA</fixVersion>
                                <component>general/test</component>
                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12914007" author="rcmuir" created="Thu, 23 Sep 2010 13:34:21 +0100"  >&lt;p&gt;Committed revision 1000424, 1000430 (3x)&lt;/p&gt;</comment>
                    <comment id="13013380" author="gsingers" created="Wed, 30 Mar 2011 16:50:09 +0100"  >&lt;p&gt;Bulk close for 3.1&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12455114" name="LUCENE-2659.patch" size="24074" author="rcmuir" created="Tue, 21 Sep 2010 05:17:58 +0100" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>1.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 30 Mar 2011 15:50:09 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11180</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25033</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>