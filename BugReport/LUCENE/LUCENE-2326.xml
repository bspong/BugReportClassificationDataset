<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:23:35 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2326/LUCENE-2326.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2326] Remove SVN.exe and revision numbers from build.xml by svn-copy the backwards branch and linking snowball tests by svn:externals</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2326</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;As we often need to update backwards tests together with trunk and always have to update the branch first, record rev no, and update build xml, I would simply like to do a svn copy/move of the backwards branch.&lt;/p&gt;

&lt;p&gt;After a release, this is simply also done:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
svn rm backwards
svn cp releasebranch backwards
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;By this we can simply commit in one pass, create patches in one pass.&lt;/p&gt;

&lt;p&gt;The snowball tests are currently downloaded by svn.exe, too. These need a fixed version for checkout. I would like to change this to use svn:externals. Will provide patch, soon.&lt;/p&gt;</description>
                <environment></environment>
            <key id="12459291">LUCENE-2326</key>
            <summary>Remove SVN.exe and revision numbers from build.xml by svn-copy the backwards branch and linking snowball tests by svn:externals</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.png">Major</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="thetaphi">Uwe Schindler</assignee>
                                <reporter username="thetaphi">Uwe Schindler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Mar 2010 16:55:29 +0000</created>
                <updated>Fri, 10 May 2013 11:44:00 +0100</updated>
                    <resolved>Thu, 18 Mar 2010 14:06:56 +0000</resolved>
                                            <fixVersion>4.0-ALPHA</fixVersion>
                                        <due></due>
                    <votes>0</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12846000" author="rcmuir" created="Tue, 16 Mar 2010 17:02:10 +0000"  >&lt;p&gt;I agree i think its nice to see a patch to lucene that includes &lt;br/&gt;
any changes to the backwards tests.&lt;/p&gt;

&lt;p&gt;Mike did this with &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-2111&quot; title=&quot;Wrapup flexible indexing&quot;&gt;&lt;del&gt;LUCENE-2111&lt;/del&gt;&lt;/a&gt; and i was shocked, until&lt;br/&gt;
I found out he was doing it manually with cat.&lt;/p&gt;</comment>
                    <comment id="12846008" author="thetaphi" created="Tue, 16 Mar 2010 17:20:41 +0000"  >&lt;p&gt;I think the ideal case for this would be that the backwards folder simply contains the src-folder of the previous branch (after creation). No extra folder like now in between, so it looks like &quot;/backwards/src/...&quot;. After a release, one would first &quot;svn rm&quot; the old and then &quot;svn copy&quot; the src folder of the previously created release branch to trunk. I would add this to the release todo.&lt;/p&gt;

&lt;p&gt;On this change, all committers must first manually do a operating-system &quot;rm -rf&quot; on the backwards folder by calling &quot;ant clean-backwards&quot; before svn up. Maybe create a patch before &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.gif&quot; height=&quot;20&quot; width=&quot;20&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    <comment id="12846108" author="mikemccand" created="Tue, 16 Mar 2010 20:42:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;This sounds sooo much better than what we do now.&lt;/p&gt;</comment>
                    <comment id="12846189" author="thetaphi" created="Tue, 16 Mar 2010 22:47:35 +0000"  >&lt;p&gt;Here the patch, before applying do the following (in main checkout folder):&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ant clean-backwards
svn mkdir ./backwards
svn cp https://svn.apache.org/repos/asf/lucene/java/branches/lucene_3_0_back_compat_tests/src backwards/src
svn propset svn:externals &quot;data -r500 svn://svn.tartarus.org/snowball/trunk/data&quot; contrib/analyzers/common/src/test/org/apache/lucene/analysis/snowball
svn propdel svn:ignore contrib/analyzers/common/src/test/org/apache/lucene/analysis/snowball
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then apply patch and run svn up.&lt;/p&gt;</comment>
                    <comment id="12846198" author="thetaphi" created="Tue, 16 Mar 2010 23:11:26 +0000"  >&lt;p&gt;I added one thing (as discussed with rmuir):&lt;br/&gt;
As the snowball test data is too much, i excluded it from the src jar. The test will not fail, but instead print a warning, that the data is missing. So the test will also pass, if e.g. hudson fails to checkout the external svn repo.&lt;/p&gt;</comment>
                    <comment id="12846361" author="thetaphi" created="Wed, 17 Mar 2010 09:59:00 +0000"  >&lt;p&gt;New patch, which has some optimizations. It now also allows to run &quot;ant test&quot; from a source distribution ZIP/TGZ, which does not contain the backwards folder. The tests will not fail, instead print a warning message.&lt;/p&gt;</comment>
                    <comment id="12846362" author="thetaphi" created="Wed, 17 Mar 2010 09:59:23 +0000"  >&lt;p&gt;Will commit soon to trunk and merge to flex.&lt;/p&gt;</comment>
                    <comment id="12846406" author="thetaphi" created="Wed, 17 Mar 2010 13:23:47 +0000"  >&lt;p&gt;Committed revision: 924207&lt;/p&gt;</comment>
                    <comment id="12846743" author="rcmuir" created="Thu, 18 Mar 2010 05:00:13 +0000"  >&lt;p&gt;This use of svn:externals causes a problem for snowball, it does not always fetch the correct revision&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Testcase: testStemmers(org.apache.lucene.analysis.snowball.TestSnowballVocab): FAILED&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; term 0 expected:&amp;lt;amtsgeheimnis[]&amp;gt; but was:&amp;lt;amtsgeheimnis&lt;span class=&quot;error&quot;&gt;&amp;#91;s&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.ComparisonFailure: term 0 expected:&amp;lt;amtsgeheimnis[]&amp;gt; but was:&amp;lt;amtsgeheimnis&lt;span class=&quot;error&quot;&gt;&amp;#91;s&amp;#93;&lt;/span&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is sporatic and not easy to reproduce.&lt;/p&gt;

&lt;p&gt;You can clearly see that its fetching the wrong revision by looking at:&lt;br/&gt;
&lt;a href=&quot;http://svn.tartarus.org/snowball/trunk/data/german/output.txt?r1=432&amp;amp;r2=527&quot; class=&quot;external-link&quot;&gt;http://svn.tartarus.org/snowball/trunk/data/german/output.txt?r1=432&amp;amp;r2=527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Where rev 527 expects &quot;amtsgeheimnis&quot;, but rev 500 should expect &quot;amtsgeheimniss&quot;&lt;/p&gt;</comment>
                    <comment id="12846778" author="thetaphi" created="Thu, 18 Mar 2010 07:24:19 +0000"  >&lt;p&gt;What did you to for this to happen?&lt;/p&gt;

&lt;p&gt;You can only reproduce this (and this was also possible with your previous setup), if you go onto the data folder and update there. If you update from top-level (outside the data folder), it works always. Maybe the problem lies in the fact, that you had the data already checked out before our reorganisation (from previous test runs). Can you simply delete the data folder with a OS&apos; rm and update again?&lt;/p&gt;

&lt;p&gt;Maybe it was a problem with svn server?&lt;/p&gt;</comment>
                    <comment id="12846852" author="rcmuir" created="Thu, 18 Mar 2010 11:25:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;What did you to for this to happen? &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Uwe, the problem happened to Mark... and this test data has &lt;b&gt;always&lt;/b&gt; been rev 500.&lt;/p&gt;

&lt;p&gt;svn.exe simply got the wrong revision. Its probably a bug in svn, I don&apos;t think you did anything wrong.&lt;/p&gt;

&lt;p&gt;But at the same time, we don&apos;t want random test failures.&lt;/p&gt;</comment>
                    <comment id="12846860" author="thetaphi" created="Thu, 18 Mar 2010 11:49:30 +0000"  >&lt;p&gt;Man, I reverted the snowball part.&lt;/p&gt;

&lt;p&gt;Lets change to a zip file as the tests will never change. This svn in build.xml is too much dependent on your local installation of svn tools. I dont like it.&lt;/p&gt;</comment>
                    <comment id="12846863" author="rcmuir" created="Thu, 18 Mar 2010 11:56:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;Lets change to a zip file as the tests will never change&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree, but this zip file will be pretty large!&lt;/p&gt;

&lt;p&gt;Thanks for temporarily changing it to do the checkout instead&lt;/p&gt;</comment>
                    <comment id="12846895" author="thetaphi" created="Thu, 18 Mar 2010 13:32:47 +0000"  >&lt;p&gt;Here the patch without external references. The data dir was cleaned up (removed the large unneeded diff.txt files) and the zip compressed with -9.&lt;/p&gt;</comment>
                    <comment id="12846897" author="thetaphi" created="Thu, 18 Mar 2010 13:34:35 +0000"  >&lt;p&gt;Sorry, ZIP file has wrong name. Fixed here locally (test+zip).&lt;/p&gt;</comment>
                    <comment id="12846900" author="rcmuir" created="Thu, 18 Mar 2010 13:42:45 +0000"  >&lt;p&gt;Thanks Uwe, this simplifies our tests.&lt;/p&gt;

&lt;p&gt;Its nice to remove a network connection (it seems reliable so far, but...)&lt;/p&gt;</comment>
                    <comment id="12846916" author="thetaphi" created="Thu, 18 Mar 2010 14:06:56 +0000"  >&lt;p&gt;Committed revision: 924781 (with correct zip file name)&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12439020" name="LUCENE-2326.patch" size="13189" author="thetaphi" created="Wed, 17 Mar 2010 09:58:59 +0000" />
                    <attachment id="12438983" name="LUCENE-2326.patch" size="11223" author="thetaphi" created="Tue, 16 Mar 2010 22:47:35 +0000" />
                    <attachment id="12439159" name="LUCENE-2326-snowball-try2.patch" size="5587" author="thetaphi" created="Thu, 18 Mar 2010 13:32:47 +0000" />
                    <attachment id="12439160" name="TestVnowballVocabData.zip" size="3128133" author="thetaphi" created="Thu, 18 Mar 2010 13:32:47 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>4.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Tue, 16 Mar 2010 17:02:10 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11468</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    <customfieldvalue key="10120"><![CDATA[Patch Available]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25399</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>