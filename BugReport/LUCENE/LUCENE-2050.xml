<!-- 
RSS generated by JIRA (5.2.8#851-sha1:3262fdc28b4bc8b23784e13eadc26a22399f5d88) at Tue Jul 16 13:08:40 UTC 2013

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary add field=key&field=summary to the URL of your request.
For example:
https://issues.apache.org/jira/si/jira.issueviews:issue-xml/LUCENE-2050/LUCENE-2050.xml?field=key&field=summary
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>5.2.8</version>
        <build-number>851</build-number>
        <build-date>26-02-2013</build-date>
    </build-info>

<item>
            <title>[LUCENE-2050] Improve contrib/benchmark for testing near-real-time search performance</title>
                <link>https://issues.apache.org/jira/browse/LUCENE-2050</link>
                <project id="12310110" key="LUCENE">Lucene - Core</project>
                        <description>&lt;p&gt;It&apos;s not easy to test NRT performance right now w/ contrib/benchmark.&lt;br/&gt;
I&apos;ve made some initial fixes to improve this:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Added new &apos;&amp;amp;&apos;, that can follow any task within a serial sequence,&lt;br/&gt;
    to &quot;background&quot; the task (just like a shell).  The test runs in&lt;br/&gt;
    the BG, and then at the end of all serial tasks, any still running&lt;br/&gt;
    BG tasks are stopped &amp;amp; joined.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added WaitTask that simply waits; useful for controlling how long&lt;br/&gt;
    the BG&apos;d tasks get to run.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Added RollbackIndex task, which is real handy for using a given&lt;br/&gt;
    index for an NRT test, doing a bunch of updates, then reverting it&lt;br/&gt;
    all so your next run uses the same starting index&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;Fixed the existing NearRealTimeReaderTask to simply periodically&lt;br/&gt;
    open the new reader (previously it was also running a fixed&lt;br/&gt;
    search), and removed its own threading (since &amp;amp; can do that&lt;br/&gt;
    now). It periodically wakes up, opens the new reader, and swaps it&lt;br/&gt;
    into the PerfRunData, at the schedule you specify.  I switched all&lt;br/&gt;
    usage of PerfRunData&apos;s get/setIndexReader APIs to use ref&lt;br/&gt;
    counting.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;With these changes you can now make some very simple but powerful&lt;br/&gt;
algs, eg:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
OpenIndex
{
  NearRealtimeReader(0.5) &amp;amp;
  # Warm
  Search
  { &lt;span class=&quot;code-quote&quot;&gt;&quot;Index1&quot;&lt;/span&gt; AddDoc &amp;gt; : * : 100/sec &amp;amp;
  [ { &lt;span class=&quot;code-quote&quot;&gt;&quot;Search&quot;&lt;/span&gt; Search &amp;gt; : * ] : 4 &amp;amp;
  Wait(30.0)
}
CloseReader
RollbackIndex
RepSumByName
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This alg first opens the IndexWriter, then spawns the BG thread to&lt;br/&gt;
reopen the NRT reader twice per second, does one warming Search (in&lt;br/&gt;
the FG), spans a new thread to index documents at the rate of 100 per&lt;br/&gt;
second, then spawns 4 search threads that do as many searches as they&lt;br/&gt;
can.  We then wait for 30 seconds, then stop all the threads, revert&lt;br/&gt;
the index, and report.&lt;/p&gt;

&lt;p&gt;The patch is a work in progress &amp;#8211; it generally works, but there&apos;re a&lt;br/&gt;
few nocommits, and, we may want to improve reporting (though I think&lt;br/&gt;
that&apos;s a separate issue).&lt;/p&gt;</description>
                <environment></environment>
            <key id="12440324">LUCENE-2050</key>
            <summary>Improve contrib/benchmark for testing near-real-time search performance</summary>
                <type id="4" iconUrl="https://issues.apache.org/jira/images/icons/issuetypes/improvement.png">Improvement</type>
                                <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.png">Minor</priority>
                    <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png">Closed</status>
                    <resolution id="1">Fixed</resolution>
                                <assignee username="mikemccand">Michael McCandless</assignee>
                                <reporter username="mikemccand">Michael McCandless</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Nov 2009 19:48:33 +0000</created>
                <updated>Wed, 25 Nov 2009 16:47:57 +0000</updated>
                    <resolved>Sat, 14 Nov 2009 11:14:21 +0000</resolved>
                                            <fixVersion>3.0</fixVersion>
                                <component>modules/benchmark</component>
                        <due></due>
                    <votes>1</votes>
                        <watches>0</watches>
                                                    <comments>
                    <comment id="12776054" author="mikemccand" created="Tue, 10 Nov 2009 19:56:51 +0000"  >&lt;p&gt;Attached patch.&lt;/p&gt;</comment>
                    <comment id="12776740" author="jasonrutherglen" created="Wed, 11 Nov 2009 23:38:27 +0000"  >&lt;p&gt;Very nice Mike, I&apos;ll try this out with trunk and &lt;a href=&quot;https://issues.apache.org/jira/browse/LUCENE-1313&quot; title=&quot;Near Realtime Search (using a built in RAMDirectory)&quot;&gt;&lt;del&gt;LUCENE-1313&lt;/del&gt;&lt;/a&gt;, compare, and report using the python script.&lt;/p&gt;</comment>
                    <comment id="12777492" author="mikemccand" created="Fri, 13 Nov 2009 13:26:19 +0000"  >&lt;p&gt;Patch attached.  I think it&apos;s ready to commit.&lt;/p&gt;

&lt;p&gt;I also have a Python script that tests NRT performance, sequencing through combinations of reopen rate X indexing rate; I&apos;ll open a new issue for that.&lt;/p&gt;</comment>
                    <comment id="12777493" author="mikemccand" created="Fri, 13 Nov 2009 13:29:40 +0000"  >&lt;p&gt;Woops, last patch was missing added files &amp;#8211; this one should fix it.&lt;/p&gt;</comment>
                </comments>
                    <attachments>
                    <attachment id="12424846" name="LUCENE-2050.patch" size="43367" author="mikemccand" created="Fri, 13 Nov 2009 13:29:40 +0000" />
                    <attachment id="12424845" name="LUCENE-2050.patch" size="38057" author="mikemccand" created="Fri, 13 Nov 2009 13:26:19 +0000" />
                    <attachment id="12424499" name="LUCENE-2050.patch" size="31503" author="mikemccand" created="Tue, 10 Nov 2009 19:56:51 +0000" />
                </attachments>
            <subtasks>
        </subtasks>
                <customfields>
                                <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                <customfieldname>Attachment count</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>3.0</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                <customfield id="customfield_12310220" key="com.atlassian.jira.ext.charting:firstresponsedate">
                <customfieldname>Date of First Response</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>Wed, 11 Nov 2009 23:38:27 +0000</customfieldvalue>

                </customfieldvalues>
            </customfield>
                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Global Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>11727</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310120" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                <customfieldname>Lucene Fields</customfieldname>
                <customfieldvalues>
                        <customfieldvalue key="10121"><![CDATA[New]]></customfieldvalue>
    
                </customfieldvalues>
            </customfield>
                                            <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                <customfieldname>Rank</customfieldname>
                <customfieldvalues>
                    <customfieldvalue>25675</customfieldvalue>
                </customfieldvalues>
            </customfield>
                                                                                    <customfield id="customfield_12310222" key="com.atlassian.jira.ext.charting:timeinstatus">
                <customfieldname>Time in Status</customfieldname>
                <customfieldvalues>
                    
                </customfieldvalues>
            </customfield>
                            </customfields>
    </item>
</channel>
</rss>