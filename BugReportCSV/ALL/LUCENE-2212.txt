add a test for PorterStemFilter
There are no tests for PorterStemFilter yet svn history reveals some very minor cleanups etc. The only thing executing its code in tests is a test or two in SmartChinese tests. This patch runs the StemFilter against Martin Porter s test data set for this stemmer checking for expected output. The zip file is 100KB added to src test if this is too large I can change it to download the data instead. the test itself the test data 100KB zipped for src test org apache lucene analysis folder. Note on his website he says The Porter stemmer should be regarded as frozen that is strictly defined and not amenable to further modification. So the only benefit to downloading this data instead of adding it to svn would be to save space. See http tartarus.org martin PorterStemmer Nice robert I was adding a test class for PorterStemFilter during LUCENE-2198 to test the KeywordAttr. Yet this looks very good though. I wonder if we should use GetResourcesAsStream rather than the system property. the resources should always be on the classpath. I wonder if we should use GetResourcesAsStream rather than the system property. the resources should always be on the classpath. I don t think we should because otherwise the test becomes complicated. This test reads thru voc.txt sequentially and for each line in the file verifies the expected output against the same line in output.txt With ZipFile it does buffering and such transparently to make this very simple. With ZipInputStream i would have to do this myself. updated patch with getResource ZipFile will commit this test at the end of the day unless anyone objects. updated patch with getResource ZipFile thanks will commit this test at the end of the day unless anyone objects. 1 go ahead Committed revision 900031. The test caused a failure if run in a filesystem with spaces in the checkouts location. Attached is a patch. Committed revision 900154
