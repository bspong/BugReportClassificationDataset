move core module to a subdirectory
Actually the jackrabbit svn holds the code for the main module in the top level dir http svn.apache.org repos asf incubator jackrabbit trunk and all the subprojects in subdirectories http svn.apache.org repos asf incubator jackrabbit trunk contrib given this layout is not possible to checkout from svn only the main module if you get trunk you get all and you can t work to different modules using any IDE which doesn t support nested projects namely Eclipse . I would like to request moving the main module that means moving all the files and directories in trunk except contrib from http svn.apache.org repos asf incubator jackrabbit trunk to http svn.apache.org repos asf incubator jackrabbit trunk jackrabbit following the usual organization of maven-based projects and solving these problems... Sounds reasonable. 1 from me. 1 from me too. fabrizio I ve been lurking for a while in the maven list and I read you joined the devs recently. congratulations and thanks for your help .Generally I m in favour for moving the main module in a subdirectory so count me as a 1. I have two minor concerns questions though - Will this change cause any trouble when we generate the website with maven Remember we run into issues when we had the sub project structure api commons core . - Repeating the project name in the repository path seems a bit awkward to me. But I have to admit that I don t really have a better name. core main repository jcr are crossing my mind but as I said not one of them seems to be first choice.How about just dropping the contrib folder to http svn.apache.org repos asf incubator jackrabbit contrib and keeping the trunk as it is now - Will this change cause any trouble when we generate the website with maven Remember we run into issues when we had the sub project structure api commons core . No this should not break anything in the site since at the moment no site is generated for contrib - Repeating the project name in the repository path seems a bit awkward to me. yes but the project dir should have the same name as the artifact id in maven. And jackrabbit is a good name for the main artifact. How about just dropping the contrib folder to http svn.apache.org repos asf incubator jackrabbit contrib and keeping the trunk as it is now you can t have a trunk tags and branches for contrib in this way you should create a jackrabbit contrib trunk dir at least... but I would prefer the first solution.There are at least some tools that expect the tag and branch directories to be at .. tags and .. branches from the main project directory trunk . Keeping the main directory where it is now also minimizes the disruption for existing checkouts and build environments. I also don t believe we should ever need tags or branches for the contrib stuff. The contrib projects should be graduated into independent projects if they start having their own release cycles with the associated tags and brances. And while we re at it we could take the opportunity to rename contrib to sandbox as already discussed a few times on the mailing list. So I d like to do the following to resolve this issue     svn move -m JCR-227 Move contrib one level up and rename it to sandbox         https svn.apache.org repos asf incubator jackrabbit trunk contrib         https svn.apache.org repos asf incubator jackrabbit sandbox I think this solves the main problems checking out the entire tree troubles with nested projects while minimizing the changes for existing checkouts and project documentation.moving the contribs outof the trunk is not a good idea. as you mentioned some tools expect the trunk tags and branches directories imo a SNV repository not following the suggested trunk tags branches structure is corrupt and since the contribs are currently tight to the jackrabbit version it also makes sense to tag branch them together with jackrabbit. furthermore the stuff in contrib is not just playground stuff but subproject people use rmi jdbcpm etc . so renaming this to sandbox feels a bit awkward. 1 for moving the main source to a sub directory eg core I agree with Tobias not having a trunk for contrib is not a good solution... I still prefer the first solution moving the core module to a subdirectory. Btw the maven scm plugin supports a different svn layout you can specify there the tags directory is expected using the maven.scm.svn.tag.base property.I seem to have the minority opinion. So a revised suggestion based on Fabrizios original proposal     svn mkdir jackrabbit     for DIR in ls grep -v jackrabbit grep -v contrib do         svn move DIR jackrabbit     done      edit the README.txt and other documents accordingly     svn commit -m JCR-227 Move the main project module to a subdirectory furthermore the stuff in contrib is not just playground stuff but subproject people use rmi jdbcpm etc . so renaming this to sandbox feels a bit awkward. In many apache projects the sandbox is not just a playground it s a place for preparing projects for inclusion in a release either in the main project or as an independent library. Then I think it s a good idea to rename contrib to sandbox and move out those projects that are candidates to be included in the first release. Creating a sandbox will give users a better idea of the current state of each subproject. The contrib projects should be graduated into independent projects if they start having their own release cycles with the associated tags and brances. Well I m not sure whether each subproject should have its own release cycle. It might lead to fiefdoms and lack of support in some subprojects. I mean that if each subproject has its own release cycle the maintainer of project A wouldn t care about fixing bugs of project B. I prefer a relasease that include the core and subprojects see option A below. Note that it doesn t mean that it will be distributed as a single jar a distribution layout may include many libraries. A binary distribution bin   start-rmiserver.bat   start-webdavserver.bat   stop-rmiserver.bat   stop-webdavserver.bat  ....sh ext   textfilters.jar doc  ... lib   jackrabbit-1.0.jar   jcr-rmi-1.0.jar   jcr-server-1.0.jar   dependency-....jar   .... regarding svn layout I prefer to keep it as standard as possible see http svnbook.red-bean.com en 1.1 ch05s04.html svn-ch-5-sect-6.1 With unified release cycle A jackrabbit      branches      tags      trunk        core        jcr-rmi        jcr-server        sandbox          ... And if there s consensus for independent relase cycles I think we should keep it standard too B jackrabbit    core      branches      tags      trunk    jcr-rmi      branches      tags      trunk    sandbox      branches      tags      trunk    ... Edgar Poce wrote Well I m not sure whether each subproject should have its own release cycle. Agreed. My point was that if we end up in such a situation the subproject should either be integrated in the main release cycle or graduated into a separate project. The Jackrabbit project should only make Jackrabbit releases. - Any more comments on this issue There are four main options here ordered by the impact on existing development environments and documentation.     a Do nothing keep the current svn layout.     b Move ... jackrabbit trunk contrib to ... jackrabbit sandbox. no tags or brances for sandbox unless combined with option d     c Move ... jackrabbit trunk to ... jackrabbit trunk core and leave contrib where it is. using core instead of jackrabbit to avoid repetition     d Make separate trunk tags brances subfolders for ... jackrabbit core and other project folders. I m still in favor of option b but the majority seems to prefer option c. I ll implement option c on next week unless more opinions are raised.c Move ... jackrabbit trunk to ... jackrabbit trunk core and leave contrib where it is. using core instead of jackrabbit to avoid repetition last comment always in favour of c but using jackrabbit and not core in order to maintain it consistent with the maven artifact id. As a maven user if I look in svn for the code that has been used to create a jar called jackrabbit-1.0.jar I will never look in a module called core Another option is naming it jackrabbit-core and changing the artifact id again...fabrizio last comment always in favour of c but using jackrabbit and not core in order to maintain it consistent with the maven artifact id. OK ... jackrabbit trunk jackrabbit it is then.The directory structure has now been changed as proposed in the original request.
