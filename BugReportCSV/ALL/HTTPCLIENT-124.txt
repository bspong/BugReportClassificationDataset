MultipartPost closes input stream
This is something of a collection of issues that are all interrelated. 1. MultipartPost calls close on the outputstream it retrieved from HttpConnection which causes an exception to be thrown later on. This call should be replaced with a call to flush . 2. The MultipartPost classes do not have any logging in them. We should add trace statements at a minimum. 3. new FilePart String File throws a null pointer exception. 4. The tests in TestPartsNoHost are broken. I ll attach patches for these fixes in a moment broken down as much as possible.Created an attachment id 3666 Fixes the tests for the Parts classes. Created an attachment id 3667 Adds logging to FilePart and Part as well as fixing the null pointer exception in FilePart. Created an attachment id 3668 Adds logging to MultipartPostMethod and fixes the problem with it closing the connection. These patches will fix these bugs but it should be noted that due to HTTPCLIENT-122 there will still be some problems when using Authentication as unexpectedly closed connections usually by timeouts will be reused by HttpMultiClient.Patches 3666 3667 3668 were applied and passed the test-nohost suite. Please re-test and close if possible.Re-tested and working correctly.
