add checks to MockTokenizer to enforce proper consumption
we can enforce things like consumer properly iterates through tokenstream lifeycle via MockTokenizer. this could catch bugs in consumers that don t call reset etc. a first stab at a patch i got the core tests passing but it still be better and there are problems in contrib. updated patch with fixes for contrib though highlighter still remains and some TODOs are not resolved. Updated patch I think this is ready to commit. I added a boolean to allow the workflow checks to be disabled in very exceptional cases e.g. TestIndexWriterExceptions s CrashingTokenFilter so in general we can do pretty good checking. Sorry in the previous patch I had disabled the checks accidentally by default in MockAnalyzer Committed revision 1102290. I know the checks aren t totally perfect but I think this is an important step to switching all of our APIs over to reusableTokenStream LUCENE-3040 and ultimately looking at a way to do something like deprecate tokenStream. For this reason I will now look at backporting to 3.x backported to 3.x in revision 1102812 Bulk closing for 3.2
