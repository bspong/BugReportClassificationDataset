IndexWriter.deleteDocuments bug
IndexWriter.deleteDocuments fails random testing I added deleteDocuments to TestStressIndexing2 for my peace of mind Solr doesn t use these methods yet . Unfortunately the test now fails. I hope it s a test problem but the code is simple enough that it looks correct to me. I haven t tracked it down further... I figured I d report it ASAP. I also don t know if it s broken in 2.3.1 or not. I think this is a false alarm. The assertion that s failing is this assertTrue termDocs1.next where that termDocs was just seek d to a term seen in the id field. But it can legitimately be false if we deleted the doc and didn t replace it. I modified the test to accept a false return here if so go and verify the other index also returns a corresponding false. Attached new version of the patch. Yonik does that sound right If so I ll commit this change to the test it s a good addition . Yay Thanks Mike you beat me to it by a couple of minutes. I think this is a false alarm. I just found out the same thing. It s a good test though. Ok phew I ll commit the improvement to test.
