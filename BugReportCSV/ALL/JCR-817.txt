TCK vs available property types
The TCK tests allow configuration of node type property names to tests specific property types but they do not take into account that a given repository may not support a specific property type this is similar to issue JCR-801 about multiple workspace support . JSR-170 is a bit fuzzy here it requires all types but does not require that every type actually exists on a settable node type. In practice a repository may support reference properties on the builtin nodetypes for version storage but nowhere else. Thus there should be a way to configure the tests so that specific property type tests are left out. Again there are a few possibilities to do that 1 reserve a special property name for the case where the test should be skipped PROPERTY TYPE NOT SUPPORT or 2 add new config flags. The latter arguably is the cleaner approach the former avoids introducing new configuration parameters. Thus I m leaning to 2 . Feedback appreciated. After discussing this with Marcel the new proposal is to have the affected test cases explicitly check that the store allows setting the property to the desired type and if it doesn t thow an NotExecutableException we want a convenience method in AbstractJCRTest so that the code required to check isn t duplicated all over the place . Revision 522894 add convenience method to AbstractJCRTest use it in SetPropertyNodeTest leaving issue open to do the same with other test cases. Revision 522953 same for Double property related tests.Revision 523029 same for Reference property related test. Revision 523341 same for ReferencesTest.java Revision 523684 same for NodeUUIDTest.java. Revision 572636 for SetValueLockExceptionTest.java. Do you plan more work on this issue or should we mark it as resolved for Jackrabbit 1.4 No I currently do not plan to make more changes. I can open a new issue at a later point of time if more work needs to be done. Good thanks. Resolved as fixed for Jackrabbit 1.4.
