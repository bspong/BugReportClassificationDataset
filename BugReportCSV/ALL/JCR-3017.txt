Version history recovery fails in case a version does not have a jcr frozenNode
With JCR-2551 in place a version recovery mode has been introduced. Problem now is that in case a version is encountered that misses a mandatory jcr frozenNode an InternalError is thrown by o.a.j.c.version.InternalVersionHistoryImpl createVersionInstance. Since o.a.j.c.RepositoryChecker checkVersionHistory only catches Exception it fails to catch it properly which leads to a complete repository shutdown. Throwing for example a RuntimeException instead fixes the problem.introduce a new specific subclass of RTE for these situations and use it where appropriatePatch looks good to me. 1trunk 1179548 2.2 1179551
