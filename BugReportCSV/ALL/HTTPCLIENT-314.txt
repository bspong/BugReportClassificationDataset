New socket timeout value wont have effect if connection is reused
Reported by Teemu Tingander Teemu.Tingander at tecnomen.fi on The Jakarta Commons HttpClient Developer List snip Changing read timeout wont affect after successful method execution using same connection.. This seems to be a bug in HttpClient class method executeMethod HostConfiguration ... .. The problematic section seems to be if section checking if connection is open method.setStrictMode strictMode                      if connection.isOpen                 connection.setConnectionTimeout connectionTimeout connection.setSoTimeout soTimeout                 connection.open                 if connection.isProxied connection.isSecure                     method new ConnectMethod method                                 Problem can be solved by moving the line out of if section method.setStrictMode strictMode connection.setSoTimeout soTimeout                      if connection.isOpen                 connection.setConnectionTimeout connectionTimeout                 connection.open                 if connection.isProxied connection.isSecure                     method new ConnectMethod method                               snip Created an attachment id 10195 Patch 1 This should do it I think. Any comments. MikeI did not test it but it looks trivial. Go for it.Same here. Looks ok to me. OlegPatch applied to 2.0. This problem is a little more difficult in HEAD. The socket timeout is set in HttpConnection.open and setSoTimeout is deprecated. Any preference on how we should handle this Here are a few quick ideas that come to mind  - un-deprecate setSoTimeout  - add a method for synchronizing an HttpConnection with its params  - remove support for changing a connection once opened  - something else... MikeCreated an attachment id 10228 Patch against HEAD take 1 Mike I beleive that should do the trick OlegPatch committed to CVS HEAD. Oleg
