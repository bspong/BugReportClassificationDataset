Set-Cookie2 and Set-Cookie
Acording to RFC2965 9.1                                                  User agents that    receive in the same response both a Set-Cookie and Set-Cookie2    response header for the same cookie MUST discard the Set-Cookie    information and use only the Set-Cookie2 information. this is read that the header for a cetain cookie but not all cookie. So Server can send only Set-Cookie header for some cookies and for cookies send Set-Cookie2 Set-cookie both. But httpclient implementation handles this that if find any set-cookie2 header then ignores all Set-cookie header. I know some sites use set-cookie2 only for cookies which needs  more flexible exiration handling and for other cookies use only Set-Cookie. One of exmaples of such sites I know is TDNet Database service provided by Tokyo Stock Exchange. So the preferred implementation is that if set-cookie2 header  found for a certain cookie then cookie value is set from set-cookie2 header if not then from Set-Cookie header.Currently HttpClient offers only VERY limited support for Set-Cookie2 headers. It basically treats them as RFC2109 style cookies. HttpClient has never been properly tested for the RFC2965 compliance. RFC2965 support has been planned for 3.0 release. You are absolutely accurate in pointing out the flaw in the cookie handling logic. We are committed to fixing this bug. The question is when Folks any strong opinions regarding as to when this bug must be fixed OlegRFC2965 support implemented in the SVN trunk to be released as HttpClient 3.1 Oleg
