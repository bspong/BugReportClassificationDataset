repositoryConfig should use setter for its internal components
From the mailing list not archived at the moment Jukka s reply I refactored the config classes last year but didn t change the way the config instances are being used by Jackrabbit. In general I think that a IoC approach use setters to configure the Jackrabbit components would be better than passing config objects around and letting the components to instantiate any subcomponents based on the configuration. This is why I didn t really want to make the config constructors public otherwise we d easily up with backwards compatibility issues if we were to change the way configuration is handled. should be tested.note that allowing an application to dynamically modify the configuration after the repository has been initialized may lead to unexpected results. jackrabbit s code expects the configuration to be immutable. public access modifyers and setters have been intentionally omitted for this reason. if those are to be made public the documentation has to clearly and explicitly mention the danger of dynamically changing the configuration. personally i d prefer a tool where a config xml file dom tree could be easily built programmatically rather than messing around with the live config. i strongly oppose to apply the suggested patch. stefan is right - the internals of jackrabbit rely on the fact that the config classes are immutable. we should not break this. i suggest to create some sort of ConfigBuilder which has all the relevant getter and setter methods and a create method that creates the immutable config objects.i strongly oppose to apply the suggested patch. stefan is right - the internals of jackrabbit rely on the fact that the config classes are immutable. we should not break this. i suggest to create some sort of ConfigBuilder which has all the relevant getter and setter methods and a create method that creates the immutable config objects.I agree that keeping the config objects immutable would be good. A better solution than the proposed patch is just to make the config constructors public. That way we d get some of the dynamic configurability that Costin needs while keeping the config objects immutable. Of course the classes are not final so they are not absolutely immutable. Any objections to making them final I think that a ComponentBuilder essentially an IoC tool would be a better approach than a ConfigBuilder because it would give much more flexibility. For example a database persistence manager could then have a DataSource as a configuration option instead of the database connection settings. But that s a different discussion.Fixed by making the config constructors public. I also made the config classes final and added a bit of documentation about configuration handling.The constructor for BeanConfig needs to be made public because all the Config elements rely on it for instantiation right now the constructor is protected . The constructor for BeanConfig needs to be made public because all the Config elements rely on it for instantiation right now the constructor is protected . You are right I m sorry that I missed that. The BeanConfig is not really meant to be a part of the public interface it is currently used in a bit cumbersome manner to construct the strongly typed Config subclasses by just passing the parsed BeanConfig to the parent copy constructor from the Config subclass. I changed the visibility of the BeanConfig constructors in revision 370793. I hope this covers your immediate needs.Thanks. I m not in a hurry so I can wait on this one - it s not fun to constantly work on the configuration 
