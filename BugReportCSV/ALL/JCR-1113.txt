Refactor the Mapper DescriptotReader classes
I would like to refactor the mappers and the descriptor readers in order to Create an abstract mapper impl because both Mapper classes have a lot of code in common AnnotedObjectMapper DigesterMapperImpl . Only the readers are different. The Mappers can make exactly the same process. The Mapper classes should not have the responsibility to create the jcr node types. This can be done outside the mapper and it should be an optional operation. There are certainly some use cases where node type creation is not necessary. Right now the annotated object mapper creates jcr node types. 1 This would probably also benefit Sling as I have my own implementation of the Mapper interface there because I read the descriptors using kxml which is more light weight and has far less dependencies than Commons Digester. So I stole much of the code of the DigesterMapperImpl regarding descriptor verification ... Also removing the node type stuff from the DigesterMapper would remove the dependency on the Jackrabbit-Core package which may or may not be available in certain use cases. Another reason why I do not use the DigesterMapperImpl in Sling.The mapper class have been refactored. there is a common ancester. Digestion annotation are in the jcr-mapping subproject
