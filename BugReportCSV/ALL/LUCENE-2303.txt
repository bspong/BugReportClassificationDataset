Remove code duplication from Token class just extend TermAttributeImpl
This issue removes the code duplication from Token as it shares the whole char buffer handling code with TermAttributeImpl. This issue removes this duplication by just extending TermAttributeImpl. When the parent issue LUCENE-2302 will extend TermAttribute to support CharSequence and Appendable and also the new BytesRefAttribute gets added Token will automatically provide this too so no further code duplication. This code should also be committed to trunk as it has nothing to do with flex. Updated patch that also moves the DEFAULT TYPE constant into the interface. This removes code duplication too. Backwards tests pass. Small improvements to the patch removed an inconsistency in type s null check added null check in hashCode too as type may be null . Also changed this in TypeAttributeImpl. Will commit this soon to trunk and merge up to head in flex. Committed trunk revision 920237
