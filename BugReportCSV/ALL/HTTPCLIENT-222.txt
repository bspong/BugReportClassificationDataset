Via NTLM proxy to SSL Apache BasicAuth. - worked in may 22nd but broken in beta1
Hi there This morning I downloaded beta 1 and tried a small piece of code to connect to a SSLified apache server using basic authentication via a MS-Proxy 2.0 with NTLM enabled. The sourcecode of my crashme is based on the 1st attachment for HTTPCLIENT-153. It differs from the original in using basic authentication for the webserver instead of NTLM. It failed with this error 10-jun-2003 16 39 05 org.apache.commons.httpclient.HttpMethodBase processAuthenticationResponse INFO Already tried to authenticate to website but still receiving 407. Status 407 Proxy authentication required Then I downloaded a fresh night build commons-httpclient-20030605 which also failed Then I went back to an old build from May commons-httpclient-20030522 which worked like a charm Using MSIE I can succesfully connect to the apache server. I know it s not a problem with typos because I have MSIE ask me for all creds. Seems somethings got broken along the way. If I can help please ask Cheers.Could you please produce the wire log of the HTTP session that works using build 20030522 and the one that does not using beta-1 Please refer to the HttpClient logging guide below for more details http jakarta.apache.org commons httpclient logging.html Oleg Created an attachment id 6737 works with 20030522 alpha3 Created an attachment id 6738 fails with 2.0 beta1 I ll look into this one sometime this week. I can t promise an instantaneous response though. What JDK are you using btw If you are running anything below JDK 1.4 do you mind trying to reproduce the problem using the newest JDK from Sun Oleg I am running 1.4.1 02. I don t mind running with a nighty build for a while but I hope you can find the time to put it in the 2.0 final release. Thanks for the quick feedback And again if you need help or extra info please do contact me.NTLM proxy support in Beta-1 is indeed broken. I believe I have found the cause of the problem. Expect a patch soon. OlegCreated an attachment id 6771 Patch take 1 hmm yeah that current code would break NTLM.. Oleg you re patch looks good to me. We ll have to create full tests for NTLM to ensure connections stay open properly. I can take a look at that once I get this whole committer thing sorted out.Patch committed Oleg
