304 response status handling
I have an IBM WebSphere server that returns 304 responses with a Content- Length header set to something other than 0 and the server is not closing the connection. According to the HTTP RFC http www.w3.org Protocols rfc2616 rfc2616-sec10.html sec10.3.5 The 304 response MUST NOT contain a message-body and thus is always terminated by the first empty line after the header fields. Obviously the web server is returning a bad response but the HTTPClient blocks waiting on data in the response even though there shouldn t be any. Other HTTP clients browsers do not have this issue and seem to ignore the fact that the server set an invalid Content-Length in the response.Created an attachment id 14625 Patch take 1 This should take care of the problem. Please let me know what you think Please note the patch is against SVN trunk . OlegLooks good to me. MikeDid not run the tests but seems to do the job right. Thanks for test coverage Patch committed to SVN trunk and HTTPCLIENT 2 0 BRANCH Oleg
