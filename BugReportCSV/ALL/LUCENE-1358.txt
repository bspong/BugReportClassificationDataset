Deadlock for some Query objects in the equals method f.ex. PhraseQuery in a concurrent environment
Some Query objects in lucene 2.3.2 and previous versions have internal variables using Vector. These variables are used during the call to the equals method. In a concurrent environment a deadlock might occur. The attached code example shows this happening in lucene 2.3.2 but the patch in LUCENE-1346 fixes this issue though that doesn t seem to be the intention of that patch according to the description It sounds like you are simply demonstrating an old bug right If so then we can close this issue since LUCENE-1346 fixed the bug you described I didn t verify that . Yes it can be closed. I didn t find the bug anywhere in JIRA so thought it was good to have it documented since it affected the last official release.
