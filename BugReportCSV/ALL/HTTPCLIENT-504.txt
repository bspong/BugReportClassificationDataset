max connections per host setting does not work
When using the MultiThreadedHttpConnectionManager the default maximal connections per host port cannot be exceeded allowed maximum is 2 by default . Attempts to exceed this by manually setting the max connections using HttpConnectionManagerParams setMaxConnectionsPerHost fail. This is caused by a bug in the MultiThreadedHttpConnectionManager.Created an attachment id 16566 PATCH Commons HttpClient Jan The patch looks good to me. Before the patch can be checked it though the TestHttpConnectionManager class needs to be extented with a unit test for this bug. Would you also be willing to provide the test case s OlegFair enough I will attempt to do this. It won t be on short notice but i might have some substantial amount of time next friday. Jan.The problem is actually much more severe than I initially though. The bug causes HttpClient to enter an endless busy loop. I suggest a slightly more radical fix for the problem to ensure that no busy loop can occur even if the pool settings are wrong. Patch coming in a sec OlegCreated an attachment id 16585 Patch a different take test case Please review and let me know what you think OlegFolks This issue blocks the RC4 release. Could someone please review the patch so we could move on with the release OlegLooks fine to me. MikePatch checked in Oleg
