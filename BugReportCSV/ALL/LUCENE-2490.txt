 ant generate-maven-artifacts should work for lucene solr 3.x 
The maven build scripts need to be updated so that solr uses the artifacts from lucene. For consistency we should be able to have a different maven version then the version That is we want to build 3.1-SNAPSHOT with a jar file 3.1-dev this lets lucene get built as lucene-3.1-dev and builds solr as a -SNAPSHOT but references the lucene jars. dependency groupId org.apache.lucene groupId artifactId lucene-spatial artifactId - version 2.9.1 version version lucene maven version version dependency This patch swaps -dev for -SNAPSHOT and references the version consistently across lucene and solr. With this patch you can run ant generate-maven-artifacts and it builds the same version for lucene and solr Ryan why is it necessary to switch from -dev to -SNAPSHOT Maven can deal with -dev as a version suffix can t it I ask because I m looking at adding functionality in Lucene and Solr to install Maven jars in the user s local repository and I was planning on going the route of making everything -dev. I ll add a link here after I make an issue and put up a patch. yes I think maven can deal with something other then -SNAPSHOT.jar files but it would require getting the pom files all sorted Ð a non-trivial task at least something beyond my skills attention . Changing to -SNAPSHOT makes the maven stuff work easy peasy BUT it breaks the back compat tests that assume -dev and I have not figured out how to fix it yet. If you can get things to work keeping the -dev and still marked as a SNAPSHOT build that would be great If you can get things to work keeping the -dev and still marked as a SNAPSHOT build that would be great Hmm why is it a requirement that it s marked as a SNAPSHOT build in maven SNAPSHOT builds get checked and replaced often. If its not a SNAPSHOT it gets downloaded once and that is that. We needs some way to reference the trunk builds from maven I was focusing on the local repo install use case where each install overwrites the previous same-named install. What use case are you thinking of What deploy target is intended Yes I guess there are two issues going on... 1. have ant generate-maven-artifacts build a lucene solr combo that works 2. get hudson to deploy SNAPSHOT artifacts to https repository.apache.org content groups snapshots-group with snapshot artifacts people can knowing develop against the latest from trunk or branch-3x applied to 3.x and trunk This does not change to -SNAPSHOT.... that could perhaps happen in a different issue fyi - this broke Solr s build as lucene version was changed to version but not everywhere. Committing a fix now. Bulk close for 3.1
