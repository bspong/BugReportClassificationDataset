FST serialization and deserialization from plain DataInput DataOutput streams.
Currently the automaton can be saved only to a Directory instance IndexInput IndexOutput . 1 Maybe one way to do this is to change FST to take DataInput Output not IndexInput Output then make DataInputFromInputStream DataOutputToOutputStream wrapper classes I tried that before but CodecUtil.writeHeader requires IndexOutput for example and does make use of its methods internally . But it doesn t really use it right its just abusing getFilePointer to check that you wrote all ascii It could perhaps more clearly convert to bytes itself and check either by checking the length of the bytes or using US-ASCII charset with onUnmappableCharacter and friends set to CodingErrorAction.REPORT and then use writeBytes Dawid does this help Yes it does Ð thanks Robert. I will provide a patch that fixes it all but I m stuck doing some perf. analysis in fstlookup. Committed to the trunk patch provided by Robert Muir .
