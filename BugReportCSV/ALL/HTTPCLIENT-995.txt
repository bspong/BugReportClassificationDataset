cache returns cached responses even if validators not consistent with all conditional headers
This is a MUST-level requirement in the RFC where if both ETags and Last-Modified dates are used as validators in a conditional request a cache cannot return a cached response unless it is consistent with all the conditional headers in the request. There is a unit test for this already but it is incorrect it uses If-Unmodified-Since instead of If-Modified-Since in the test case . The attached patch addresses this issue. In addition we are now very explicit about not using cached responses for conditionals we don t currently understand support namely If-Range If-Match for GETs and If-Unmodified-Since for GETs . This patch is contributed to the ASF with the permission of my employer. Patch checked in. Oleg
