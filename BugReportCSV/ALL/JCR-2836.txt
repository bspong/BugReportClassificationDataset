Unclosed threads in Jackrabbit
The Tomcat integration test added in JCR-2831 shows the following warnings about Jackrabbit threads that remain in place even after the repository has been closed 08-Dec-2010 12 14 58 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE The web application appears to have started a thread named Timer-1 but has failed to stop it. This is very likely to create a memory leak. 08-Dec-2010 12 14 58 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE The web application appears to have started a thread named DynamicPooledExecutor but has failed to stop it. This is very likely to create a memory leak. 08-Dec-2010 12 14 58 org.apache.catalina.loader.WebappClassLoader clearReferencesThreads SEVERE The web application appears to have started a thread named Timer-2 but has failed to stop it. This is very likely to create a memory leak. It would be best to close all such background threads even if they are singleton daemon threads and thus unlikely to cause trouble when left unattended.Fixed in revisions 1055068 1055070 and 1055071.In revision 1055117 I also fixed some Tomcat warnings about uncleared thread-local variables created by the PerQueryCache class most likely due to the way it was being used from the IOCounters class. All changes merged to the 2.2 branch in revisions 1055123 and 1055124.
