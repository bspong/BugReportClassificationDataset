redirect not handled correctly if location header doesn t have a protocol
Http redirect is not handled correctly if the location header doesn t have a protocol e.g. Location web tbghome.nsf pages index a java.net.MalformedURLException is throw in this case. The correct behavior is to inherit the protocol from current URL. The relevant code is in HttpMethodBase.execute The reason is a typo in the code HttpMethodBase line 526 if location.getValue .startsWith should be replaced by if location.getValue .startsWith The handling of relative v.s. absolute URL are completely messed up here. This bug has been marked as a duplicate of 5870 The indicated behavior is accurate according to the HTTP specification but many browsers including Netscape Mozilla and MSIE will do the obvious and allow such relative headers. At least some builds of the Lynx browser will also complain in these cases and probably other browsers as well so you may want to consider addressing the problem within the web app server. But since following relative redirects is a fairly common behavior and the appropriate action to take is pretty clear we should probably just add at least conditional support for this to either HTTP Client. Fixed in rev. 1.24 of HttpMethodBase. Nightly builds on after 15 Jan should follow relative Location headers in the reasonable way. The other bug is the duplicate. HTTPCLIENT-6 has been marked as a duplicate of this bug. 
