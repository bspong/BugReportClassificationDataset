Change contrib spatial to use trie s NumericUtils and remove NumberUtils
Currently spatial contrib includes a copy of NumberUtils from solr otherwise it would depend on solr Once LUCENE-1496 is sorted out this copy should be removed. This issue depends on LUCENE 1496 which is set to won t fix. I guess I can close resolve this too. Any concers Speak up please simon LUCENE-1496 is won t fix because trie s NumericUtils subsumes Solr s NumberUtils ie we now need to migrate local lucene to NumericUtils. And we want to do this for 2.9 since local lucene is not yet released and we have the freedom to make such an otherwise drastic change to the index format. I ll update this issue to reflect it s new goal. I ll take this one if you haven t started on it Simon... Attached patch. I added utility methods to NumericUtil to do double float - string and v v and then did a straight replacement everywhere NumberUtils was used and removed NumberUtils. Hey Mike thanks for taking this. I was too busy last week and I rather spent time on Lucene-1566. I looked at the patch - looks good to me. I wonder if it would make sense to do some cleanup in the code final vars and args etc. and if we should remove this logging code. It makes sense to use logging but afaik there is no ultimate logging api in lucene so i would rather go for removing the logging code before we release. Is that worth a new issue simon Patch looks good. The best is that you can now use the double FieldCache which should speed up the LocalLucene queries and needs less memory. By the way I was also tending to add these convenience methods to NumericUtils For completeness shoudl we also add them for the ones with the shift value at the end an char I was reluctant to do this. I think the easy conversion methods to from String withou shift would be enough. For completeness shoudl we also add them for the ones with the shift value at the end an char I was reluctant to do this. Let s hold off add these when the need first arises I wonder if it would make sense to do some cleanup in the code final vars and args etc. and if we should remove this logging code Agreed Ð looks like you ve opened a new issue for this already thanks I ll commit shortly.
