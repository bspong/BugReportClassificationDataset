Add solr s artifact signing scripts into lucene s build.xml common-build.xml
Solr has nice artifact signing scripts in its common-build.xml and build.xml. For me as release manager of 3.0 it would have be good to have them also when building lucene artifacts. I will investigate how to add them to src artifacts and maven artifacts Patch with a heavy improved version of solrs macros I changed For security reasons the password is not passed through command line you can see it with ps -ef . Also passphrase does not work with newer 2.x versions of gpg. The correct way is the same as in Mike McCandless Python script to pass passphrase-fd 0 then it read the passphrase from stdin piping in the password using the inputstring task attribute of ant. added batch parameter to gpg. Without in GUI environments it ignores the passed-in password and uses gpg-agent no manual signing of every file it uses the apply ant task that starts a process for every file in a fileset and also supplies a source - desfilename mapping which appends .asc add default-key with a default value of CODE SIGNING KEY you can override with -Dgpg.key YourHexKeyOrEmail The only problem is that appy does not print the command lines or some filelist. You only get a message at the end that applied gpg to x files which is fine. Usage ant sign-artifacts -Dgpg.exe path to gpg -Dgpg.key YourHexKeyOrEmail -Dgpg.passphrase 12345 All parameters are optional defaults are gpg.exe gpg gpg.key CODE SIGNING KEY gpg.passphrase none if not given you are asked to input I forgot the target has no dependencies on maven run before or dist-src bin. You have to run dist-src dist-bin and generate-maven-artifacts before esle it would simply sign no files or more it would break because dist-folder does not exist Updated patch that needs only requires trunk s minimum ANT version 1.7.0. Secure password input is only available if ant 1.7.1 and java 6 is used. Committed revision 912115
