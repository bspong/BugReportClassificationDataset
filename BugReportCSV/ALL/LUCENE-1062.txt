Improved Payloads API
We want to make some optimizations to the Payloads API. See following thread for related discussions http www.gossamer-threads.com lists lucene java-dev 54708 We want to add the following methods to Payload public void setPayload byte data public void setPayload byte data int offset int length public byte getPayload public int getPayloadOffset public Object clone Also Payload should implement Cloneable. Furthermore we want to add a fieldName arg to Similarity.scorePayload . I think we can also remove the experimental warnings from the Payload APIs now Patch that contains all changes mentioned above. In case a filter wants to remove a Payload from a Token shall we offer a method like clearPayload or is setPayload null good enough setPayload null seems fine to remove a payload. I find Payload.getPayload a bit confusing - how about renaming Payload methods from setPayload byte data setPayload byte data int offset int length getPayload to setData byte data setData byte data int offset int length getData I agree Doron. You proposed method names are better. OK I changed the method names in this patch and also made the no-arg constructor of Payload public. All tests pass. I m planning to commit this soon. Patch looks good Maybe note in the javadoc for Payload ctor setData that a reference is held to the provided array no copy is made Thanks for reviewing OK I ll add that to the javadocs and commit it then. Committed.
