Fix pulsingcodec to reuse its enums
PulsingCodec currently doesnt always reuse its enums which could lead to behavior like LUCENE-3515. The problem is sometimes it returns the wrapped enum but other times it returns its pulsingenum depending upon whether terms are pulsed... we can use the fact that these enums allow attributes to keep the reuse information for both so it can reuse when stepping through terms. first cut at a patch all test pass as well as the TestForTooMuchCloning on LUCENE-3515. But I would like a review fyi the stupid purpose of the map is mostly theoretical in case of Pulsing Pulsing Pulsing Standard or something crazy. I m not even sure if this is possible given how pulsing works today... its too insane to think through added a reuse test for pulsings fails without patch creates 7 enums instead of 2 Attributes policeman sees no problems in the attributes. The rest I don t understand ok i think clear and copyTo should be no-ops here. if someone wraps their custom enum with pulsing they might have a per-doc attribute and we don t want them clearing away the reuse information. it also makes no sense to copy this reuse stuff to another docsenum. patch with a nested case Pulsing1 Pulsing2 Standard . See the comments in the test we actually create 4 enums when we could really reuse more. But its correct and I think this is good enough for this crazy case. Looks great Ð 1 to commit 
