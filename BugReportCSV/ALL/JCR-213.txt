Avoid creation of more than one jackrabbit instance with the same configuration
based on the mailing list archive it seems new users often run more than one jackrabbit instance with the same configuration. I propose to lock the repository by creating an empty file called .lock at the repository home on startup and remove it on shutdown. If the lock file is found on jackrabbit startup the following message will be logged The repository home at home.getAbsolutePath appears to be in use. If you are sure it s not in use please delete the file at lock.getAbsolutePath . Probably the repository was not shutdown properly. I no one objects I ll apply this patch.Sounds useful 1 from me. PS. Should the releaseRepositoryLock call be placed at the end of the shutdown method instead of the beginning additionally to deleting the file explicitely i woud also mark it for auto-deletion by calling File.deleteOnExit i woud also mark it for auto-deletion by calling File.deleteOnExit I would not. Apart from deleteOnExit being prone to memory problems I think the existence of the lock file beyond the life time of the repository would indicate problems. i woud also mark it for auto-deletion by calling File.deleteOnExit I would not. Apart from deleteOnExit being prone to memory problems I think the existence of the lock file beyond the life time of the repository would indicate problems. I agree with felix. anyway the change proposed by tobi can be added later if needed. PS. Should the releaseRepositoryLock call be placed at the end of the shutdown method instead of the beginning I agree. thanks for your comments See http bugs.sun.com bugdatabase view bug.do bug id 4513817 for more information about the File.deleteOnExit memory problems.
