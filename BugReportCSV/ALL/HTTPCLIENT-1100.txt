Missing Content-Length header makes cached entry invalid
A cached entry whose original response didn t carry a Content-Length header should not be rejected for considered invalid because the length of its cached content is different from the non-existing Content-Length header value. The attached patch only verifies the lengths if the header was originally present.Hi Bart Your patch looks great although we need you to grant license to the ASF to include your patch. Can you either edit your attachment to grant ASF permission or re-upload it with the proper permissions Thanks Jon By the way I suppose this is presumed by my earlier response but I agree this is a bug. The cache entry should only be considered invalid if there is a Content-Length header present and it does not match the length of the cached response body. If a Content-Length header is not present then the entry should be presumed valid at least per the sense of this test . with license granted to ASFHi Bart patch applied to trunk. I ll also work on backporting this to the other release branches. ...and by the way Bart thanks very much for your contribution Also backported to the 4.1.x release branch.
