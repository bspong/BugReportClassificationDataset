introduce HttpRoutePlanner interface
Define an interface to determine a route for a given target host. Create default implementation replacing DefaultHttpClient.determineRoute ... Implementations will need access to params and or request. The interface fits into HttpConn but DHC.dR ... uses client parameters. Either move parameters to HttpConn or keep default implementation in HttpClient. Alternative implementations could evaluate Java system properties related to proxy settings. Hi Roland this could be a starting point for this issue i hope if i ve cirrectly undestood the spirit.  AndreaHi Andrea yes you ve definitely got the spirit right - Thanks a lot. If you could make one more tweak to it instead of passing the planner to the constructor of the HttpClient implementations could you use the default instantiation strategy that Oleg has implemented for the other helper objects I m about to wrap it up for today and will be offline tomorrow evening. If Oleg doesn t check it in I ll do it later this week. This issue should remain open though as there are a fews things left to figure out. In particular I don t like the dependency of the route planner on the connection manager. It needs the scheme registry though. I m afraid there might be a bigger design problem lurking behind. thanks again   Roland Hi this patch has the fix you suggested...and is more smartinsted of passing the parameter to the constructor Thanks for the suggest  AndreaHi Andrea I had to made a few modifications before committing your patch. Technically the problem was that your additions to HttpConn were depending on HttpClient which is something I d prefer to avoid. - HttpRoutePlanner returns a route not a routed request - default implementation currently in client it still depends on a constant defined in HttpClientParams - attribute in AbstractHttpClient is private and accessed via getter to ensure initialization - added license headers I had to remove the author tags for now since your CLA is not on file. I ll put them in when your name is listed here http people.apache.org jim committers.html unlistedclas Thanks a lot for this contribution   Roland I ve moved DefaultHttpRoutePlanner from client to conn along with the DEFAULT PROXY parameter.
