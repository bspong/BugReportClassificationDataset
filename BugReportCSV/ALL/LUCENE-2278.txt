FastVectorHighlighter highlighted term is out of alignment in multi-valued NOT ANALYZED field
Fix and a test case attached. Besides passing docid fieldname to FVH can there be another method that accepts the original text to be highlighted like getBestFragment final FieldQuery fieldQuery IndexReader reader String originalText int fragCharSize So the field content can be stored outside of lucene resulting in a smaller index. DIGY getBestFragment method needs docId and fieldName in order to get a TermPositionVector object from IndexReader when trying to make snippets. FVH could be acceptable an array of String so that it can make snippets from String outside of Lucene rather than stored values. But it is out of this thread. I ll commit in a few days. Committed revision 916090. reopening for possible 2.9.4 3.0.3 backport. Committed revision 1028833 2.9 1028839 3.0 .
