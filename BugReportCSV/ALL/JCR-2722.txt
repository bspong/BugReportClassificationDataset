Add a filtered RangeIterator
It would be useful to have a FilteredRangeIterator utility class that can be used to apply arbitrary filters on other RangeIterators.There is already org.apache.jackrabbit.commons.flat.FilterIterator which might get reused for thisThanks. I m looking for something that implements also RangeIterator and allows for more than just a single element to be pre-fetched so that the getSize method could return an accurate result for short iterators even before the client application has consumed the iterator.at revision 987435 i added jackrabbit trunk jackrabbit-jcr-commons src main java org apache jackrabbit commons iterator FilteringNodeIterator.java that takes a NodeIterator and a Predicate in the constructor... that could be a starting point... i just needed it for nodes that s why i didn t pay special attention to the other rangeiterator types. I added a new FilteredRangeIterator class in revision 987567 based on the previous classes mentioned above. Both of the other classes serve a slightly different purpose than the new one so merging all the code into a single class may be a bit difficult. For now I think we can live with all three classes.With revision 988172 the RowIteratorAdapter class changed it s signature which causes IllegalAccessErrors for all code which has been compiled with the older version. The old version used a constructor with a RangeIterator which is now not available anymoreGood point thanks I reverted the troublesome changes in revision 988970. The constructor changes I made earlier were only backwards compatible after recompiling downstream sources. Perhaps we should add some automatic binary backwards compatibility checker as a part of the build of client-visible components like jcr-commons.
