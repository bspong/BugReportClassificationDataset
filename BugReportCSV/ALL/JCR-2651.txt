Add a OnWorkspaceInconsistency with logging only
If a Workspace performs a re-index on startup with a inconsistency in it the process will fail now. The new OnWorkspaceInconsistency log will only log the inconsistency but the reindex-process will not failwith this patch you can set on the SearchIndex in the workspace.xml file param name onWorkspaceInconsistency value log Committed revision 953585.Hello Claus there is a small issue with the committed patch I used in on my Jackrabbit 1.x deployment . The output is as follows 2010-07-20 16 39 08 367 ERROR OnWorkspaceInconsistency - Node Ljava.lang.Object 18f238fc. Please run a consistency check on this workspace has missing child In the code you are concatenating the arguments object array with a string    log.error Node has missing child new Object ... . Please run a consistency check on this workspace so it results in replacing only the first argument. I guess you intention was to do    log.error Node has missing child . Please run a consistency check on this workspace new Object ... instead. Kind regards SergiyHi Sergiy Yes you are right. I have seen it and commited the modified code into the trunk some times ago. So in the upcoming release it will work - greets clausThank you Claus I am looking forward getting 1.6.3 - Kind regards SergiyWe normally avoid backporting new features to patch releases so targeting 2.2.0 for this unless there s a good rationale for doing otherwise.Hi Jukka I know that we should not backport new features but we need it in our environment and we are not planing to upgrade jackrabbit. So it would be fine to have it in the 1.6 branch. greetsOK I guess we can do this in 1.6.3 as it s the tail end of the 1.x release cycle. However unless we want to do a 1.7 release I wouldn t count on too many changes other than bugfixes being backported to 1.x anymore.Merged to the 1.6 branch in revision 982501.
