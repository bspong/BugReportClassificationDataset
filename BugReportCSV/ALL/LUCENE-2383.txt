Some small fixes after the flex merge...
Changes Re-introduced specialization optimization to FieldCacheRangeQuery also fixed bug was failing to check deletions in advance Changes 2 checkIndex methods from protected - public Add some missing null checks when calling MultiFields.getFields or IndexReader.fields Tweak d CHANGES a bit Removed some small dead code FCRF looks ok I would only change the nextDoc loop in the deletions-aware iterator to do doc if doc maxDoc return doc NO MORE DOCS while skipDocs.get doc matchDoc doc return doc and the same in advance little bit changed for doc target doc maxDoc doc if skipDocs.get doc matchDoc doc return doc return doc NO MORE DOCS The try catch is then unneeded. This seems clearer for me. The non-skipdocs iterator is performanter with the try...catch as it preserves one bounds check. But we need to do the bounds check here in all cases why not do up-front Thanks Uwe I agree that s cleaner Ð I ll commit shortly. I merged fix to 29x and 30x. 3x already had the fix branch was cut after this landed . Woops Ð wrong issue Ð please disregard the comment above 
