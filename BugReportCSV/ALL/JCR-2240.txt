Binary value may leave temp file behind
The following call leaves a temp file behind that is never deleted InputStream in ... ValueFactory vf .... vf.createBinary in .dispose Only happens when the datastore is disabled.does it depend on a specific ValueFactory implementation where is the tmp file created in the system tmp dir does it depend on a specific ValueFactory implementation don t know. I don t think it s possible to configure a different implementation right where is the tmp file created in the system tmp dir yes it s the system temp dir. I guess never deleted is not correct. The files are actually deleted but only at the discretion of the garbage collection and the finalizer. I guess never deleted is not correct. The files are actually deleted but only at the discretion of the garbage collection and the finalizer. in which case i wouldn t qualify this issue as major bug but rather as an improvement. i assume the tmp files are created by o.a.j.util.TransientFileFactory. tmp files will be deleted when their associated marker objects are reclaimed by the garbage collector. in which case i wouldn t qualify this issue as major bug but rather as an improvement. agreed on the priority but I still think this is a bug because dispose is explicitly and I would expect that it frees resources that the Binary instance holds. Anyway the required changes to fix this bug are already present in the patch for JCR-2238. I suggest we keep this issue open until JCR-2238 is fixed and then set it to fixed as well.This issue has been fixed as part of JCR-2238.
