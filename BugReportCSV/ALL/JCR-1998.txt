Initialize hierarchy cache on startup
In some cases it may be desirable to initialize the hierarchy cache in the search index on startup. Currently this initialization is done in the background. For larger workspaces this puts considerable load on the repository and may slow down access and queries. There should be a configuration parameter that forces the repository to initialize the hierarchy cache on startup and only return the repository instance when the initialization is completed. The default value would be the current behaviour using background thread . The default value would be the current behaviour using background thread This is actually wrong. The cache initialization was introduced in 1.5.0 JCR-1337 then improved and put into a background thread in current trunk JCR-1884 . Which means it should be the other way around. Default is to not run initialization in a background thread. Proposed patch.Committed patch in revision 748066Merged changes into 1.4 branch in revision 748140Rethinking the initialization in a background thread again I now come to the conclusion that it should be initialized either completely on startup or not at all. A background thread puts additional load on the process possibly fighting for I O with other startup procedures.Proposed patch.Since we already released a version of this in 1.4.9 I d rather keep this closed and open a new issue for any further changes. We can drop the 1.6.0 tag from this issue if you want to make major changes in trunk. Since we already released a version of this in 1.4.9 I d rather keep this closed and open a new issue for any further changes. Make sense. I ve created a new issue JCR-2027.
