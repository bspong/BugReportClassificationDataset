SegmentMerger should assert .del and .s files are not passed to createCompoundFile
Spinoff from LUCENE-3126. SegmentMerger.createCompoundFile does not document that it should not receive files that are not included in the .cfs such as .del and .s separate norms . Today that method is called from code which ensures that but we should Add some documentation to clarify that. Add some asserts so that if a test or other code running w -ea does that we catch it. Will post a patch soon Patch against 3x adds asserts to SM test to ensure they are not allowed. All core tests pass. Looks good Maybe sharpen the comment to something like this method creates a compound file for all files returned by info.files . While generally this may include separate norms and deletion files this SegmentInfo must not reference such files when this method is called because they are not allowed within a compound file. Something like that... Maybe sharpen the comment to something like Thanks Mike. Changed as you suggest. Committed revision 1127601 3x . Committed revision 1127602 trunk . Bulk closing for 3.2
