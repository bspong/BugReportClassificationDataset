Jcr2Spi ExportSysViewTest testExportSysView handler session saveBinary occasionally failing
from time to time i saw ExportSysViewTest testExportSysView handler session saveBinary test failing. this doesn t occur consistently and i never managed to reproduce it when running the tests in the idea. This was just captured by Hudson see http hudson.zones.apache.org hudson job Jackrabbit-trunk org.apache.jackrabbit jackrabbit-spi2jcr 244 testReport org.apache.jackrabbit.test TestAll testExportSysView handler workspace skipBinary recurse The stack trace of the test failure is junit.framework.AssertionFailedError Could not read target node testdata serialization target test NodeTypes Node mix referenceable javax.jcr.PathNotFoundException testdata serialization target test NodeTypes Node mix referenceable at junit.framework.Assert.fail Assert.java 47 at org.apache.jackrabbit.test.api.TreeComparator.compare TreeComparator.java 346 at org.apache.jackrabbit.test.api.TreeComparator.compare TreeComparator.java 362 at org.apache.jackrabbit.test.api.TreeComparator.compare TreeComparator.java 362 at org.apache.jackrabbit.test.api.TreeComparator.compare TreeComparator.java 307 at org.apache.jackrabbit.test.api.TreeComparator.compare TreeComparator.java 295 at org.apache.jackrabbit.test.api.TreeComparator.compare TreeComparator.java 288 at org.apache.jackrabbit.test.api.SerializationTest.doTest SerializationTest.java 683 at org.apache.jackrabbit.test.api.SerializationTest.testExportSysView handler workspace skipBinary recurse SerializationTest.java 638 the failure only occurs with referenceable nodes and their subtree. as far as i can tell it is due to misbehaviour of the lookup uniqueID - nodeEntry.
