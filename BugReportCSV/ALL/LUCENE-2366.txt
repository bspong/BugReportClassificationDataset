LLRect.createBox returned box does not contains all points in center distance disc
LLRect createBox computation of a bouding box for a disc given center and distance doest not contains all the point in the distance. Example the point north by distance doest not have Lat inferior of Lat of the UpperRight corner of the returned box Test case for LLRect.createBox I will work on this and have a patch very soon. This patch solves LUCENE-2366 but create a regression in TestCartesian.testAntiM. I ll try to narrow it and fix it. Ok found was due to a lack of normalisation of FloatLatLong uppon construction I should fix this in a another patch The new LUCENE-2366.patch pass the TestantiM test. ready to evaluate Corrected a path problem in the patch file I reviewed the code as it still raise an error in the TestCartesian.testAntiM In fact the error is coming from double startX beginAt - beginAt 1 double startY beginAt - startX should give a whole number double endX endAt - endAt 1 double endY endAt -endX should give a whole number CartesianPolyFilterBuilder.getShapeLoop the double handling that should give a whole number does not. If you pass my version of LUCENE-2359 that does not rely on this code anymore everything is fine. Committed revision 933754.
