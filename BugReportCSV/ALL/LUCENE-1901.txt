TermAttributeImpl.equals does not check termLength
If you look at the code from equals I think it misses this check other.termLength this.termLength This check must be before the comparison of the arrays. You are right I will fix it. The simpliest is to check if termlength o.thermLength before the for-loop. The code is then equals to Token.java I think this was a copy n paste bug . Committed revision 812666 Thanks Daniel Shane Patch with test case that fails before the fix and now passes using a different patch name since the fix patch is already commited . Thanks. I committed the patch. I also added the same test to Token.java because it could have the same problem. At revision 812690
