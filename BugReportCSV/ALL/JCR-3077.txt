WeightedHighlighter does not encode XML markup characters
See JCR-2611 the same problem applies to WeightedHighlighter.This patch - adds a test case - puts the convenience method escape into the base class and uses it throughout - fixes a Javadoc typo - fixes WeightedHighlighter to invoke the escaping as well - removes static from two methods on WeightedHighlightersee prev. comment whitespace fixed a tiny feedback on your patch - adds a test case I think it would be better if the test was in the ExcerptTest class. - puts the convenience method escape into the base class and uses it throughout I like the escape refactoring. Why is it not static Text.encodeIllegalXMLCharacters is static what is the gain of adding a non-static method to call a static one - removes static from two methods on WeightedHighlighter What is the benefit of making methods non static updated patch uses ExcerptTest instead a tiny feedback on your patch Merci. I think it would be better if the test was in the ExcerptTest class. Yep I just did that. I like the escape refactoring. Why is it not static Text.encodeIllegalXMLCharacters is static what is the gain of adding a non-static method to call a static one It needs to be non-static to that classes that extend from the DefaultHighLighter can override it. What is the benefit of making methods non static So that they can call the other methods I made non-static for the reason above - cool 1 for the patch then.Fixed with r11731962.2 r1173250Merged to the 2.1 branch in revision 1174630 and to 2.0 in revision 1174642.Merged to the 1.6 branch in revision 1174650.
