don t require an analyzer if all fields are NOT ANALYZED
This seems wierd if you analyze only NOT ANALYZED fields you must have an analyzer null will not work because documentsinverter wants it for things like offsetGap 1 1 This is also weird if you index only NumericFields. You need to pass whatever random analyzer that crosses your mind at the moment just so that it s used to get the offset gap and posIncr. Robert perhaps we should add an explicit test in core which ensures we can pass a null Analyzer to IWC when we index only NOT ANALYZED and NumericFields Robert perhaps we should add an explicit test in core which ensures we can pass a null Analyzer to IWC when we index only NOT ANALYZED and NumericFields I don t like the idea of any kind of test or documentation that says we explicitly support null. Then suddenly null is an officially supported value for Analyzer and people start wanting it in other places. If we must have a test here to proceed I would instead prefer to cancel as Won t fix. Also remember we are wanting to fully decouple indexing from analysis LUCENE-2309 at which point IndexWriter Config will no longer even see an Analyzer the use of an Analyzer or any other app-specific pipeline capability etc. will be hidden to IW under the IndexableField API. At that point this problem of having to pass some random Analyzer or null should go away because you should then only be required to pass an Analyzer to FieldTypes that do analyze their field text. At that point this problem of having to pass some random Analyzer or null should go away because you should then only be required to pass an Analyzer to FieldTypes that do analyze their field text. Right and the last thing i want to see is some sophisticated backwards layer crappy hacks because we enabled null on this issue Basically I think we should make it work right now but undocumented and unspecified. If you pass Analyzer null to IW you need to be prepared for NPE. Ok I agree. 1 to commit. Shai you want to take this I am working on something else at the moment Yes I ll commit this. Thanks Committed revision 1147530 trunk . Committed revision 1147532 3x . I did not include a CHANGES entry because we don t want to advertise null as a supported value for IW. Thanks Robert 
