SearcherManager and NRTManager should be in the same package
I didnt even know NRTManager was still around because its in the .index package whereas SearcherManager is in the .search package. Separately I don t like that this stuff is so hard with core lucene... would it be so bad if this stuff was added to core I suspect a lot of people have issues with this stuff see http www.lucidimagination.com search document 37964e5f0e5d733b for example. Worst case is just that combine mistakes with trying to manage this stuff with MMap unmapping and total lack of error detection for searching closed readers LUCENE-3439 and its a mess. I think NRTManager should move to oal.search And I think moving to core is a good idea. here is a patch that moves NRTManager SearcherManager into core. Both are now in o.a.l.search - To apply the patch run the bash file first or the included svn commands Thanks Simon Can we also move SearcherLifetimeManager And... I think we should move NRTCachingDirectory as well or we can do this separately... . here is a patch that moves NRTManager SearcherManager into core. Both are now in o.a.l.search - To apply the patch run the bash file first or the included svn commands I m curious why you used svn copy instead of svn move Can we also move SearcherLifetimeManager I wasn t sure about this one - SeracherManager and NRTManager went through serious refactorings since they where added. But we can still do that if it is in core... I will mover the NRTCachingDirectory in a different issue. I m curious why you used svn copy instead of svn move I used svn cp since the patch removes the files and otherwise some systems have problems if the files don t exist anymore. I used svn mv to create the patch actually OK we can leave SearcherLifetimeMGR in contrib for now... new patch moving SearcherLifetimeManager into core and adds additional lucene.experimental to NRTManagerReopenThread SearcherLifetimeManager I think this is ready. new patch containing CHANGES entries next iteration moving NRTCachingDirectory to core too. TestNRTManager depends on it and I think its worth it anyway so lets do it here to while we on it. I will open a follow up to enable this in tests etc. moving NRTCachingDirectory to core too 1 - if it s the normal recommendation for NRT it should be part of core. committed to trunk and backported to 3.x Bulk close after release of 3.5
