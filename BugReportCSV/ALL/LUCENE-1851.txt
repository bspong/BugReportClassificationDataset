 ant javacc in root project should also properly create contrib surround Java files
For consistency after LUCENE-1829 which did the same for contrib queryparser Paul do you have time to create a patch file I ll review it and test it if you don t have time let me know. changes fixed jjdoc - removed StandardTokenizer.jj added surround parser QueryParser.jj and StandardSyntaxParser.jj fixed surround build.xml to build javacc fixed surround ... QueryParser.jj small change to allow javacc to process the file updated clean-javacc and javacc targets Hi Paul I found some time to write a patch for this If you have time can you try my patch. I ve meanwhile switched to ubuntu and I had to install javacc which was easy. Then I still had to apply the attached patch for javacc to common-build.xml and put the following line in build.properties javacc.home usr share java After that these worked fine with Luis patch applied from contrib surround ant clean ant javacc ant test Since the patch does not change the tests of the surround parser the change to the .jj file still passed all the tests. From the top directory ant clean ant javacc ant test-contrib also worked fine. So in all this was a very nice excuse to reinstall javacc Patch works fine for me too. Will commit soon. Committed revision 807835. Thanks for the patch Luis and for testing Paul After svn update I still have the output below so I think the commit missed some files affected by the patch svn diff find contrib surround -name .jj Index contrib surround src java org apache lucene queryParser surround parser QueryParser.jj Ñ contrib surround src java org apache lucene queryParser surround parser QueryParser.jj revision 807956 contrib surround src java org apache lucene queryParser surround parser QueryParser.jj working copy -184 7 184 7 DEFAULT SKIP - WHITESPACE WHITESPACE Operator tokens in increasing order of precedence Reopening only to make sure my last comment is not missed before the impending 2.9 release. javacc javacc Java Compiler Compiler Version 4.2 Parser Generator javacc type javacc with no arguments for help javacc Reading from file home lafa kisor2 workspace eclipse33 lucene trunk2 contrib surround src java org apache lucene queryParser surround parser QueryParser.jj . . . javacc org.javacc.parser.ParseException Encountered at line 187 column 3. javacc Was expecting one of javacc STRING LITERAL ... javacc ... javacc javacc Detected 1 errors and 0 warnings. I just re-synced and see the same problem I think Michael forgot to commit the QueryParser.jj changes I made. Fixed it. Sorry about that. Committed revision 808224. Everything working as expected now. Thanks.
