Lazy Atomic Loading Stopwords in SmartCN
The default constructor in SmartChineseAnalyzer loads the default jar embedded stopwords each time the constructor is invoked. This should be atomically loaded only once in an unmodifiable set. attached patch Simon everything is ok but i have one comment the new test testChineseStopWordsNull I think this is a duplicate of the one above. here is the context Punctuation is handled in a strange way if you disable stopwords In this example the IDEOGRAPHIC FULL STOP is converted into a comma. if you don t supply true to the constructor or use a different stopwords list then punctuation is indexed. public void testChineseStopWordsOff throws Exception Analyzer ca new SmartChineseAnalyzer false doesnt load stopwords String sentence String result assertAnalyzesTo ca sentence result public void testChineseStopWordsNull throws IOException Analyzer ca new SmartChineseAnalyzer false sets stopwords to empty set String sentence String result assertAnalyzesTo ca sentence result assertAnalyzesToReuse ca sentence result Thanks robert good catch I was adding one test with null in the constructor but I missed to finish it apparently. I merged it into testChineseStopWordsOff . Patch attached. Simon cool. I like it now think its a good improvement same as with Persian and Arabic thanks commited in r823285 thx robert for reviewing
