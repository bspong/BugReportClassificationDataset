PrecedenceQueryParser misinterprets queries starting with NOT
 NOT foo AND baz is parsed as - foo baz instead of -foo bar . I m setting parser.setDefaultOperator PrecedenceQueryParser.AND OPERATOR but the issue applies otherwise too. Yeah this was noted by Erik in the svn logs. Unfortunately it looks like PQP has been basically dormant read undergoing bitrot since then so not only is NOT precedence not handled but a lot of other changes that have been made to QP aren t in PQP. Based on its state we should prob deprecate PrecedenceQueryParser in favor of the precedence thats about to land in the new QueryParser impl. The precedence queryparser is now fixed for this bug its implemented with the QP in contrib per LUCENE-1938 I verified with this test case which I committed LUCENE-792 public void testNOT throws Exception Analyzer a new MockAnalyzer MockTokenizer.WHITESPACE false assertQueryEquals NOT foo AND bar a -foo bar Bulk close for 3.1
