Fix rawtypes warnings for Java 7 compiler
Java 7 changed the warnings a little bit Java 6 only knew unchecked warning type applying for all types of generics violations like missing generics raw types Java 7 still knows unchecked but only emits warning if the call is really unchecked. Declaration of variables fields or constructing instances without type param now emits rawtypes warning. The changes above causes the Java 7 compile now emit lots of rawtypes warnings where Java 6 is silent. The easy fix is to suppres both warning types SuppressWarnings unchecked rawtypes for all those places. Changes are easy to do will provide patch later This also makes the eclipse compiler more silent because rawtypes was ported from the eclipse compiler to Java 7. Patch that fixes most warnings in Lucene Core and modules. Partly also Solr. I will commit this now as it gets outdated soon. Will then backport ask eclipse to fix 3.x. Committed trunk Revision 1297048 Now backporting... Btw I also changed lots of non-rawtypes warnings like accessing static fields on wrong type subclass or more horrible with instance . This was also producing warning in Java 7. Patch for 3.x affecting also Lucene Core mainly parts of Solr . Still contrib is like in trunk on TODO list especially grouping . Will commit now. Committed 3.x revision 1297074 I will keep this issue open for more cleanups. 2nd part of checnges for trunk. Grouping module is unfixable without knowledge on the generics. We should add rawtypes everywhere Part2 for branch3x. Will commit now. Committed 2nd patch trunk revision 1297162 Committed 2nd patch 3.x revision 1297189 I ve fixed most of the grouping compile warnings. I now only see this warning during compilation warning options bootstrap class path not set in conjunction with -source 1.6 Also fixed the warnings for the join module. warning options bootstrap class path not set in conjunction with -source 1.6 Its because you are compiling the code with Java 7 but using 1.6 compatibility. Previous versions did not complain about that e.g. compiling 1.5 code with 1.6 . This warning simply says that you should have a different bootstrap classpath with only the 1.6 JDK rt.jar in it so the compiler can check that the methods classes you are using are really existing. If you compoile against Java 7 s rt.jar this is not guaranteed. The warning is obsolete for us as we also check java 6 and java 5 for 3.x . This is fixed no serious warnings anymore. Contrib has some and of course Solr but that s not specific to Java 7.
