davex remoting has a performance bottleneck due limit of 2 http connections
The spi2dav service implementation use of HttpClient did not support configuration of the maximum amount of http connections to the server. The default value in the HttpClient code is two. This was a performance bottleneck. This work makes the number of connections configurable via a parameter to the map passed to the repository factory. It also fixes a concurrency issue which was exposed by the increased concurrency effected by this work. This fix is a replacement of a HashMap cache of client connections with a ConcurrentHashMap thanks to the java 1.5 available in Jackrabbit 2.x USAGE Set the number of connections Spi2davRepositoryServiceFactory.PARAM MAX HTTP CONNECTIONS when creating a factory via the dav or davex rep factories. Default is 20. NOTE See also the server side fixes JCR-3027 The patch on that ticket allows configuration of the concurrency level on the server which should be tuned in conjunction with the client side connection levels. ÊI ve already been testing my fixes on the 2.2.5 release. I m going to port them to the trunk and run my tests there before attaching the patch.Here are patches against the trunk. Note I ve been running these against 2.2.5 and they work great there too.thanks a lot for the patches. i will take a look and apply them as soon as possible.applied patch with quite some modification. specially the comments did not match the code which made it a bit cumbersome. in addition it would be nice if the formatting would match the overall coding style used in jackrabbit. thanks anyway for your effort. Angela I will do better next time. Can you point me to some coding style standards I ll very happy to use them.as far as i remember we mostly follow the java coding convention see http www.oracle.com technetwork java codeconv-138413.html .
