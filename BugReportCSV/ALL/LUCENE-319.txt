 PATCH Loosing first matching document in BooleanQuery
This patch fixes loosing of first matching document when BooleanQuery with BooleanClause.Occur.SHOULD is added to another BooleanQuery. Created an attachment id 13609 The patch public boolean next should not modify bucketTable.first when it founds matching document because it is modified in score . Created an attachment id 13610 Test Case to demonstrate the bug Thank you for the bug. However I think that the patch is not correct. The bug was introduced in the current CVS head by an optimization in BooleanScorer. It does not affect the current release. I tried to fix the bug. Seems to work. But I am not 100 sure. Another way to fix the bug would be to switch off the optimization by simply deleting score HitCollector hc and score HitCollector hc int max implementation from BooleanScorer. I tried this and it works too. Christoph
