HttpState.setCookiePolicy is completely ignored
Though this method is deprecated it currently has no effect and gives no warning that it does nothing. A patch that fixes this problem is coming shortly. MikeCreated an attachment id 12721 Fix1 Mike there s a slight problem with your patch. Consider the following scenario 1 the user sets default cookie policy using the deprecated apache.commons.httpclient.cookiespec system property 2 that causes the cookie policy parameter to be created in the default parameter collection 3 which effectively renders HttpState cookiePolicy having no effect It is a fringe case but it is not totally impossible How about this patch coming shortly Created an attachment id 12741 Patch take 2 Works for me. MikePatch committed Oleg
