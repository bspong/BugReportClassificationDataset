JCR2SPI NamespaceRegistryImpl.unregisterNamespace passes prefix to storage when uri is expected
When trying to unregister a namespace through SPI Jackrabbit throws a NamespaceException prefix is not a registered namespace uri. javax.jcr.NamespaceRegistry.unregisterNamespace String prefix expects the namespace prefix. Though org.apache.jackrabbit.jcr2spi.NamespaceRegistryImpl.unregisterNamespace String prefix calls directly org.apache.jackrabbit.jcr2spi.NamespaceStorage.unregisterNamespace String uri which expects the namespace uri. The namespace registry should first retrieve the uri for the provided prefix.the exception is misleading. afaik unregistering a namespace is not supported in jackrabbit at all anyways. http www.mail-archive.com users jackrabbit.apache.org msg17391.html the exception could be more explicit though.While Jackrabbit core might not support unregistering namespaces jcr2spi should do so. From the call sequence of calls described this seems to be a bug.Fixed at revision 1133332
