Add doBeforeFlush to IndexWriter
IndexWriter has doAfterFlush which can be overridden by extensions in order to perform operations after flush has been called. Since flush is final one can only override doAfterFlush. This issue will handle two things Make doAfterFlush protected instead of package-private to allow for easier extendability of IW. Add doBeforeFlush which will be called by flush before it starts to allow extensions to perform any operations before flush begings. Will post a patch shortly. BTW any chance to get it out in 3.0.1 Added doBeforeFlush call to it in doFlushInternal Changed doAfterFlush to protected Renamed testDoAfterFlush to testDoBeforeAfterFlush in TestIndexWriter also fixed a bug in the test . I think this is ready for commit. Would be great if it can go out in 3.0.1 as well Patch looks good... thanks Shai I think it s fine to backport to 3.0.x trivial change but the 3.0.1 train has likely already left the building Ð we ve voting now take 2 on the artifacts. Maybe I ll backport and if we end up re-spinning it ll be in 3.0.1 Else 3.0.2... Thanks Shai Woops not on 3.0.1 likely . Merged to 2.9 revision 949507
