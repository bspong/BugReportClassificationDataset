method.getURI returns escaped URIs but it shouldn t
Hi guys Please consider the following imaginary and simplified code URI u new URI http some.host.com 41.html true HttpClient httpClient new HttpClient GetMethod method new GetMethod method.setURI u URI u2 method.getURI System.out.println 1. u System.out.println 2. new String u.getRawURI System.out.println 3. u.getURI System.out.println 4. u2 System.out.println 5. new String u2.getRawURI System.out.println 6. u2.getURI The result that you ll get is 1. http some.host.com 41.html 2. http some.host.com 41.html 3. http some.host.com A.html 4. http some.host.com 2541.html 5. http some.host.com 2541.html 6. http some.host.com 41.html You can see that for lines 4 5 and 6 the URI suddenly gets escaped the percent sign gets converted to 25 . Why is that Am I doing something wrong Is this the desired behaviour I would have expected to get the SAME URI back without any escaping. Besides I have another question After executing a method httpClient.executeMethod method what will method.getURI return The URI after all redirections or the original URI It seems I get the URI after the redirections which is fine but the documentation doesn t say that. It only explicitly says that the getPath method has that behaviour. Best regards and thanks BisserCreated an attachment id 14368 Patch take 1 This should take care of the problem. Please review OlegHi Oleg Thank you for the patch. Did you write to me to review the changes Or was it intended for the other developers I could try to test it myself but I m in the process of changing jobs right now and I cannot say how soon I will be able to do that. I will try to find the time though. Best regards BisserBisser I was primarily referring to my fellow HttpClient committers. If you happen to have time on your hands to do some testing it ll certainly be welcome. Otherwise the patch will get reviewed by some one else OlegFolks any objections to committing this one OlegLook good. Any test cases Created an attachment id 14612 Patch test case All right. The same patch a test case. If I hear no complaints I ll commit the patch in a couple of days OlegExcellent.Looks good. MikePatch committed Oleg
