JCR2SPI does not provide actual size on RangeIterator.getSize 
Currently JCR2SPI always returns -1 on RangeIterator.getSize . This return value is legal meaning unknown but may cause clients to simply iterate through the whole list when what they really want is simply the count. Use case The use case is to count the number of members of a NT FOLDER without having to open up the NT FOLDER and count all the members and I assume load them into memory To make this happen we probably need to move away from simple Iterators on the SPI level and put quite some additional work into JCR2SPI. Feedback appreciated.i would suggest modify the LazyItemIterator to apply the same logic as present currently in the query.NodeIteratorImpl - take the size of original collection as estimation for the number of Items available during iteration. - recalculated the size if entries that cannot be resolved to Items are found during the iteration. this would have the following benefits - if nothing changes in the meantime the size estimate is accurate - no extra effort to calculate the size upon before creating the iterator - don t modify lazy behaviour of the iterator drawback - size may shrink during iteration. julian would that be suitable for you But that would still require to completely iterate through what the SPI implementation returned right I would really prefer if we could avoid iterating through the children if all the caller wants to know is their number.  noe... you get the size immediately. but it may not be totally accurate if nodes are removed after accessing the iterator or if nodes are removed by somebody else and cachebehaviour is observation or if you refresh the session after accessing the iterator . in any case if during iteration an invalid removed item is encountered the effective size will be lower. that may happen in any case. that s an built in consequence of the lazy iteration and not an effect of whatever size-value detection. the only thing that changes initially i thought that -1 would be more appropriate than a size value that is not 100 correct. angelafor the record translation of oral communication the problem julian is referring to is 2-folded 1 the -1 return value of the RangeIterator implementation. 2 the fact that RepositoryService.getChildInfos returns an Iterator - thus the caller needs to iterate in order to      detect the size. That could be improved thus making not only the ItemIterator lazy but also the code that      populates the hierarchy. Let s put 2 to a separate SPI issue. vale If nobody object i m going to solve this issue as suggested. angela fixed rev 599349
