Manually set Cookie Authorization headers get discarded
HttpClient discards all the Cookie Authorization headers including those manually set when populating request header collection with automatically generated headers.Created an attachment id 8711 Patch take 1 The patch should take care of the problem. Feedback welcome. OlegHello Oleg I have just taken a look at it. In combination with pluggable cookie policies this patch provides everything I would need. Cookies can be set manually with or without being extended by the cookies from the HttpState. Resolving clashes between manually set cookies and those in the state is the responsibility of whom who sets cookies manually. And someone who wants his cookie header to be removed automatically shouldn t set it in the first place - No wait there is one thing RFC 2965 in section 3.3.4 last paragraph before the note specifies that cookies shall be sent in a defined order those with more specific paths preceeding those with less specific paths. Considering the fuss of parsing manually set cookie headers I wouldn t want this to be implemented by the HTTP Client. But that should at least be pointed out somewhere in the JavaDocs. In HttpMethod. set add RequestHeader cheers   Roland Looks good to me. MikePatch committed. OlegFunny When I reported this bug I was told this would never get fixed. Glad to see it s fixed. -Eric
