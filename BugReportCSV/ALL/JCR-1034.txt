Unable to save session after saving a renamed node
TransientRepository repo new TransientRepository applications test repository.xml applications test Session s repo.login new SimpleCredentials test .toCharArray if s.getRootNode .hasNode parent s.getRootNode .getNode parent .remove s.save create parent node Node parent s.getRootNode .addNode parent create node to rename parent.addNode newnode s.save rename node s.move parent newnode parent renamedNewNode save renamed node s.getRootNode .getNode parent renamedNewNode .save try to save session FAILS s.save s.logout fixed in svn rev. 561000It seems that this breaks test test case org.apache.jackrabbit.test.api SessionTest.testMoveConstraintViolationExceptionSrc which seems to verfiy that an exception is thrown. Unless that test case somehow is broken I recommend to back out the change and to resolve this issue as invalid. reopening test cases fail legitimatelythe real issue is that it is possible to save a renamed node without saving its parent. a ConstraintViolationException should be thrown instead indicating that the parent of a renamed node needs to be saved as well. fixed in svn r562512Merged to the 1.3 branch in revision 577701.
