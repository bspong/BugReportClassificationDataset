SpellChecker does not work properly on calling indexDictionary after clearIndex
We have to call clearIndex and indexDictionary to rebuild dictionary from fresh. The call to SpellChecker clearIndex function does not reset the searcher. Hence when we call indexDictionary after that many entries that are already in the stale searcher will not be indexed. Also I see that IndexReader reader is used for the sole purpose of obtaining the docFreq of a given term in exist function. This functionality can also be obtained by using just the searcher by calling searcher.docFreq. Thus can we get away completely with reader and code associated with it like if IndexReader.isLocked spellIndex IndexReader.unlock spellIndex and the reader related code in finalize Suggested patch. One more small query. We have requirement where we have to add new words to our dictionary quite frequently. So multiple threads may concurrently call indexDictionary. This will cause problems as each call to indexDictionary will create a new IndexWriter. So is it possible to make indexDictionary function synchronized Like this public synchronized void indexDictionary Dictionary dict throws IOException ........ This patch no longer applies. Could you provide a new patch against trunk Also please use 2-spaces for indentation. Thanks. As for synchronizing indexDictionary method why not add synchronization logic to your application Suggested patch against trunk Thank you for the patch Committed revision 659013.
