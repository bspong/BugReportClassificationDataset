RMIC not working in subprojects when compiling parent using maven2
This is because there is a bug such that if you have a child build which uses the ant plugin it inherits the plugin dependencies of the first time the plugin is declared. The workaround is to put the antrun plugin in the toplevel and add the java jar to its plugin dependencies. reference http mail-archives.apache.org mod mbox maven-users 200602.mbox 3CC2CDEFBECFC9A14892BCCFB4C95F4868044F8230 EX-201.mail.navisite.com 3E Patch attached works fine for me. Please give any comments if it works for you.Excellent thanks That works fine committed in revision 482149.reopening as the applied batch breaks the build on mac osx. the m2 build on mac osx 10.4 did work before the patch had been applied. the hard-coded dependency on tools.jar causes the build to fail complaining about the missing dependency. note that there s no tools.jar in the mac jdk. the classes contained in tools.jar are on a mac included in classes.jar on the boot classpath. temporary workaround for building jackrabit on a mac remove the tools.jar dependency in the top-level pom.Fixed I think so the Mac issue in revision 483230 by adding a Mac-specific build profile. I don t have a Mac available for testing this so please reopen if the issue remains. btw http jira.codehaus.org browse MANTRUN-20still not working still not working I assume that the issue is limited to Mac since things work for me on Windows and Linux. Should the classes.jar be added in the mac profile Where s the jar located classes.jar is on the boot classpath so there s no need to add it on a mac. the tools.jar i.e. classes.jar dependency is not needed on a mac.Ah I think I know what the problem is I forgot to remove the tools.jar dependency from jackrabbit-jcr-rmi pom.xml in revision 482149 when I added the dependency in trunk pom.xml. The profiles in trunk pom.xml of course didn t affect the remaining dependency setting in jackrabbit-jcr-rmi pom.xml. It should be possible to fix the issue by restoring the profile settings in trunk pom.xml reverting 48344 and removing the extra dependency from jackrabbit-jcr-rmi pom.xml. The profiles in jackrabbit-jcr-rmi pom.xml introduced in 48344 should not be needed after that.fixed in Revision 483468.
