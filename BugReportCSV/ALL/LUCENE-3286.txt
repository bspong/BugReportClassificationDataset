Move XML QueryParser to queryparser module
The XML QueryParser will be ported across to queryparser module. As part of this work we ll move the QP s demo into the demo module. we had an idea to expand the demo module to cover more than just the basics now e.g. including examples and such . Maybe we can put it there Sounds like a great location for it. Okay I thought about the demo code a little more. Yes I think its a great idea to put it into the demo contrib which hopefully will become a module one day . To make the directory layout more standard I will Move the packages from xml-query-parser src demo java into demo src java Move the contents xml-query-parser src demo WebContent into demo src resources org apache lucene demo xmlqp Its a bit ugly still but when the demo contrib grows we might be able to clean it up someway. Patch which moves the demo into the demo contrib. This adds a temporary dependency from the demo contrib to the xml-query-parser contrib. Once this is committed I ll be moving the XML qp into the QP module so the dependency will change. This also adds the servlet-api dependency as a lib to the demo module. I noticed before it was an optional dependency and IntelliJ was tacking on Solr s version. This makes it cleaner and standard. Command for patch coming up. Command for patch svn move parents lucene contrib xml-query-parser src demo java org apache lucene xmlparser webdemo FormBasedXmlQueryDemo.java lucene contrib demo src java org apache lucene demo xmlparser FormBasedXmlQueryDemo.java svn move parents lucene contrib xml-query-parser src demo WebContent lucene contrib demo src resources org apache lucene demo xmlparser svn copy parents solr lib servlet-api-2.4.jar lucene contrib demo lib servlet-api-2.4.jar svn copy parents solr lib servlet-api-LICENSE-ASL.txt lucene contrib demo lib servlet-api-LICENSE-ASL.txt svn copy parents solr lib servlet-api-NOTICE.txt lucene contrib demo lib servlet-api-NOTICE.txt svn delete lucene contrib xml-query-parser src demo Moved demo code into demo contrib. Committed revision 1159002. New patch which moves the actual parser into the queryparser module. There is currently a dependency problem related to the FuzzyLikeThisQuery which I m about to move in another issue. Things are untested at this stage. Will move further forward soon. Command for patch svn move parents lucene contrib xml-query-parser docs modules queryparser docs xml svn move lucene contrib xml-query-parser README.htm modules queryparser docs xml README.htm svn move parents lucene contrib xml-query-parser src java org apache lucene xmlparser modules queryparser src java org apache lucene queryparser xml svn move parents lucene contrib xml-query-parser src test org apache lucene xmlparser modules queryparser src test org apache lucene queryparser xml svn move lucene contrib xml-query-parser dtddocbuild.xml modules queryparser xmldtddocbuild.xml svn move parents lucene contrib xml-query-parser LuceneContribQuery.dtd modules queryparser src resources org apache lucene queryparser xml LuceneContribQuery.dtd svn move lucene contrib xml-query-parser LuceneCoreQuery.dtd modules queryparser src resources org apache lucene queryparser xml LuceneCoreQuery.dtd svn delete lucene contrib xml-query-parser svn delete dev-tools idea lucene contrib xml-query-parser svn delete dev-tools maven lucene contrib xml-query-parser New patch which incorporates the creation of the sandbox as well as cleaning up more references to the XML queryparser. Command for patch svn move parents lucene contrib xml-query-parser docs modules queryparser docs xml svn move lucene contrib xml-query-parser README.htm modules queryparser docs xml README.htm svn move parents lucene contrib xml-query-parser src java org apache lucene xmlparser modules queryparser src java org apache lucene queryparser xml svn move parents lucene contrib xml-query-parser src test org apache lucene xmlparser modules queryparser src test org apache lucene queryparser xml svn move lucene contrib xml-query-parser dtddocbuild.xml modules queryparser xmldtddocbuild.xml svn move parents lucene contrib xml-query-parser LuceneContribQuery.dtd modules queryparser src resources org apache lucene queryparser xml LuceneContribQuery.dtd svn move lucene contrib xml-query-parser LuceneCoreQuery.dtd modules queryparser src resources org apache lucene queryparser xml LuceneCoreQuery.dtd svn delete lucene contrib xml-query-parser svn delete dev-tools idea lucene contrib xml-query-parser svn delete dev-tools maven lucene contrib xml-query-parser I ll commit this in a day or so. New patch which uses the same commands that removes the XML QP dependencies from solr s build.xml Another patch removing more xml QP build dependencies. Hm from what I understand of Luke it depends on the XML QueryParser. Consequently moving the QP breaks Luke. This isn t a problem really except for the luke ant target which downloads versions of Luke which are now incompatible. Any thoughts on how to address this The target seems a little inflexible since if any dependent code is moved it doesn t work anymore. Yet it seems useful for testing changes that are compatible. Okay there doesn t seem anyway to support the luke target going forward. So I m going to comment it out in the build.xml and when the incompatibility issue is addressed it can be added back in. I ll wait for some of the GSoC merges to be completed and then I ll commit this. Updated patch to incorporate FieldType changes. Commented out the luke target and included a description as to why. I m going to commit this tomorrow. Committed revision 1165174.
