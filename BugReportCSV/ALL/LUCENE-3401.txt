need to ensure that sims that use collection-level stats e.g. sumTotalTermFreq handle non-existent field
Because of things like queryNorm unfortunately similarities have to handle the case where they are asked to computeStats for a term where the field does not exist at all. Note they will never have to actually score anything but unless we break how queryNorm works for TFIDF we have to deal with this case . I noticed this while doing some benchmarking so i created a test to test some cases like this across all the sims. here s test with fix to SimilarityBase. I tried to rearrange this in a way that its not confusing. Also for the record i think its garbage that some stats such as docFreq just silently return 0 here but for things like sumTotalTermFreq is a hassle... Its already annoying we have to deal with the -1 preflex case here too... maybe we should add helper methods to IndexSearcher so at least you only have one case added another related test no problems though
