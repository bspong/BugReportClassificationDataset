IllegalStateException Authentication state already initialized
Hi I am running HttpClient 3.0 RC2 in my application and a user send me a logfile telling IllegalStateException Authentication state already initialized . He wanted to access a site on SUN.com and is behind a proxy. The site seems to redirect to a different domain. I have attached a Debug Trace HttpClient log. BenCreated an attachment id 14698 Debug Trace Log This was a nasty one. It turned out the bug had effect only in the combination of preemptive proxy authentication and a cross-site redirect. Luckily the fix is very straightforward. OlegCreated an attachment id 14733 Patch take1 Folks please review and let me know what you think OlegLooks good Oleg. No need to attribute my authorship to code new test class I have not written though.Looks good. MikePatch committed. OlegI am still seeing this bug find the Debug Trace Log attached. Version HttpClient 3.0 RC2 Error Authentication state already initialized The user is sitting behind a Proxy Server that requires NTLM Authentication. RSSOwl is using NTCredentials with the Username Password Host and Domain the user has entered for this Proxy. BenCreated an attachment id 14926 Debug Trace using 3.0 RC2 Benjamin The fix will be included in the coming RC3 release. For the time being consider using the latest nightly builds OlegThanks I will. BenUsing nightly commons-httpclient-20050504.tar.gz I am still getting this error. Is the fix not yet committed to the nightlies BenBen The patch has been checked in on Apr 19th. The fix should have made it to the 20050504 nightly. If you are reasonably sure you are getting the same exception please reopen the bug and attach a wire context log demonstrating the problem Oleg
