Pass a context struct to Weight scorer instead of naked booleans
Weight scorer AtomicReaderContext boolean boolean is hard to extend if another boolean like needsScoring or similar flags information need to be passed to Scorers. An immutable struct would make such an extension trivial way easier. here is a patch that adds a ScorerContext to replace those two booleans. ScorerContext follows a copy on write pattern similar to a builder pattern that only modifies the context if the values actually change. Seems pretty straight forward so far. Looks good I would make the ctor private and then use ScorerContext.default .x .y as pattern default returns the template . I like this design more I would make the ctor private and then use ScorerContext.default .x .y as pattern default returns the template . I like this design more Jawohl - Since default is a keyword in java I used ScorerContext def instead. I fixed some JDoc issues made all ScorerContext ctors private and added a changes.txt entry seems like we are good to go 1 to commit looks good. For later we should fix BooleanQuery.explain to use default context too. topScorer true is wrong for explain but has no effect here . Committed revision 1058592. thanks uwe for the review
