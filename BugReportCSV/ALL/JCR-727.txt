NamespaceRegistryTest uses an invalid URI as namespace URI
The test cases use www.apache.org ... as a namespace URI but this is not a URI. Suggest to fix by using a proper URI such as by prefixing with http . A related question is what our expectation is for JCR implementations. Are they allowed to reject something that doesn t parse as a URI according to RFC3986 Fixed with revision 502263. A related question is what our expectation is for JCR implementations. Are they allowed to reject something that doesn t parse as a URI according to RFC3986 I don t recall the JCR spec saying anything about this but since XML namespace http www.w3.org TR REC-xml-names names are RFC 3986 URIs I think it would be perfectly OK for a repository implementatino to only allow valid URIs. One concrete benefit of such a policy would be the avoidance of invalid namespace names in XML exports. In fact we may even want to consider enforcing this in Jackrabbit. PS. The www.apache.org ... name can actually be interpreted as a relative URI and is only deprecated but not strictly prohibited by the current XML namespace spec. Just a nit www.apache.org ... is a relative reference http greenbytes.de tech webdav rfc3986.html rfc.section.4.2 gt but not a URI http greenbytes.de tech webdav rfc3986.html rfc.section.3 gt . Thanks for the terminology update The devil s in the details... The XML namespace spec says An XML namespace is identified by a URI reference RFC3986 meaning both full URIs and relative URI references. The current version adds a note that deprecates the use of relative URI references. The JCR spec somewhat vaguely says Namespacing in a content repository is patterned after namespacing in XML. As in XML the prefix is actually shorthand for the full namespace which is a URI. It seems fair to interpret this as meaning that only full URIs are allowed as JCR namespaces.
