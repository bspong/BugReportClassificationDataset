Separate javadocs for core and contribs
A while ago we had a discussion on java-dev about separating the javadocs for the contrib modules instead of having only one big javadoc containing the core and contrib classes. This patch Adds new targets to build.xml javadocs-all Generates Javadocs for the core demo and contrib classes javadocs-core Generates Javadocs for the core classes javadocs-demo Generates Javadocs for the demo classes javadocs-contrib Using contrib-crawl it generates the Javadocs for all contrib modules except similarity currently empty and gdata. Adds submenues to the Javadocs link on the Lucene site with links to the different javadocs Includes the javadocs in the maven artifacts Remarks I removed the ant target javadocs-internal because I didn t want to add corresponding targets for all new javadocs target. Instead I defined a new property javadoc.access so now ant -Djavadoc.access package can be used in combination with any of the javadocs targets. Is this ok I didn t include gdata yet because it uses build files that don t extend Lucenes standard build files. Here s a preview http people.apache.org buschmi site-preview index.html Please let me know what you think about these changes Some small improvements Moved property javadoc.link to common-build.xml so that the link is available in the contrib javadocs as well. Linked the core demo and contrib javadocs with the combined javadocs which makes these javadocs much nicer. The combined javadocs now go into the same directory as before so bookmarks will still work after we applied this patch. I also updated the preview. I m planning to commit this tomorrow... any objections Did anyone look at the preview yet This has been somewhere far down on my todo list for quite a while so I was going to try the patch but a committed version would certainly be easier. In case you prefer someone else to try this before committing could you wait a short week Looks good. I think we need to put GData in before committing. Also I don t know ANT well enough but is there anyway to have it automatically do the contrib packages without having to explicitly specify it Just one less thing to remember to add when adding new contrib packages. If it s not a quick fix don t worry about. Looks good. I think we need to put GData in before committing. GData has build files that don t extend common-build.xml so there s always extra work that needs to be done when we add a new feature to our build like maven artifacts or these javadocs improvements . It doesn t seem that Simon is still around but we should decide on how we re going to maintain gdata. I ll open a new issue for that and not put GData in this patch. Also I don t know ANT well enough but is there anyway to have it automatically do the contrib packages without having to explicitly specify it Just one less thing to remember to add when adding new contrib packages. If it s not a quick fix don t worry about. Hmm not sure how to do that. There s a TODO comment in the build file for a long time. I think I ll commit this patch and we can simplify that in the future if someone knows who to do this with Ant. we should decide on how we re going to maintain gdata Are many folks using Lucene s gdata server If no one is using it and it s not maintained then it should probably be dropped from trunk. If someone decides to start maintaining it later then they could update it and re-add it to trunk. The take2 patch works fine for me. Also this works fine ant -Djavadoc.access private javadocs-core but it generates two minor javadoc warnings. Grant ant javadocs generates everything combined and everything seperately and ant javadocs-contrib works as expected. the note about keeping the contrib list uptodate with the group list should also mention keeping the list in site.xml uptodate. we could probably make that site.xml list autogenerated by the javadoc target but that would require someone with ant fu and forrest fu thinking about it carefully ... in the meantime a reminder note would be handy. Are many folks using Lucene s gdata server If no one is using it and it s not maintained then it should probably be dropped from trunk. If someone decides to start maintaining it later then they could update it and re-add it to trunk. 1 The take2 patch works fine for me. Thanks for trying I will commit then... the note about keeping the contrib list uptodate with the group list should also mention keeping the list in site.xml uptodate. Agreed. I ll update the comment. Committed. OK this should be up live on the site now. I still have to check into why the site isn t being copied properly. Will do when I get back from ApacheCon.
