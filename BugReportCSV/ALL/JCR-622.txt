Auto Reconnect for RMI Repository
If i bind the RepositoryAccessServlet to a RMI Repository and then reboot the Repository i get a NullpointerException. Stack java.lang.NullPointerException at org.apache.jackrabbit.webdav.jcr.JcrDavException. init JcrDavException.java 111 at org.apache.jackrabbit.webdav.simple.DavSessionProviderImpl.attachSession DavSessionProviderImpl.java 99 at org.apache.jackrabbit.server.AbstractWebdavServlet.service AbstractWebdavServlet.java 181 If i deploy jackrabbit in a Model 3 Environment this Situation can happen very often. thanks clausThe best option would probably be to wrap the RMI repository client in a TransientRepository instance potentially with an extra feature that invalidates an acquired repository client when a login fails with a remote exception. hi all .. are there any solutions for this bug we need a fix for our production environment so maybe someone can fix it for a next release thanks claus I did have a look at this before Christmas but I only have a partial fix to this. Fixing this properly requires tracking a bit more information than is currently used and deciding what if anything to do with live sessions that get broken by the underlying remote repository disappearing.Hi Jukka Do you have more Informations about broken sessions What partial fix do you have I need some fix for this issue because we can not go into production until this issue is fixed. We are in a Model 3 Deployment and our Client Applications have the WebDAVServlet which connects to a RMI Repository Server. If this Server now restart all client applications must restartet. Hope for fix clausadjusted subject since it s not the repository access servlet that needs to do a reconnect but rather the rmi layer.I ll take a shot at fixing this already for the 1.3 release.Fixed mostly in revision 527797. All JCR-RMI clients that use the default ClientRepositoryFactory will now automatically reconnect if the remote repository reference breaks.
