The move method doesn t remove the source node
Here is a small unit test that demonstrate that the method move doesn t remove the source node.seems to be an o.a j.core.CachingHierarchyManager issue which seems to be getting out of sync corrupted somehow. note that Workspace.move does work correctly. it s the current session s view which is inconsistent.passing on to the CachingHierarchyManager expert There was some bad assumption in the PathMap located in jackrabbit-jcr-commons after moving node1 to result the CachingHierarchyManager determined that its internal representation of the root tnode had become invalid and therefore told its PathMap to remove it. The PathMap has some check to prevent the root node from being completely removed but unfortunately forgot to remove its children and associated object which left an orphaned node1 child in the root node s children map. Fixed in revision 542838.Merged to the 1.3 branch in revision 544239.
