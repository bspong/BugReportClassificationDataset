Missing a null check in BooleanQuery.toString String 
Our queryParser tokenizer in some situations creates null query and was added as a clause to Boolean query. When we try to log the query NPE is thrown from log booleanQuery . In BooleanQuery.toString String a simple null check is overlooked. Patch added to fix the NPE Could one argue that maybe your queryParser tokenizer shouldn t create null queries and add them to BooleanQuery clauses Your patch uses different spacing should be 2 . Also check this Ñ Users jwang projects lucene 2 3 1 src java org apache lucene search BooleanQuery.java revision 641933 Users jwang projects lucene 2 3 1 src java org apache lucene search BooleanQuery.java working copy Note the full path to the modified file. You should make a diff with svn diff src java ..... instead. Thanks. Could one argue that maybe your queryParser tokenizer shouldn t create null queries and add them to BooleanQuery clauses I would argue that But I also would argue that a resilient toString is a good idea anyway. I m going to commit this unless anyone objects. Thanks John 
