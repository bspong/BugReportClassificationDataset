Minor RFC 2109 2965 violation
Hi all we received this bug report for the debian commons-httpclient package debian bugreport The following bug is present in upstream 2.0.2 and 3.0RC3 at least as far as I can tell by testing. The specification grammar for the Cookie and Cookie2 HTTP headers specified by RFC 2109 section 4.3.4 and RFC 2965 section 3.3.4 respectively require that the ordering of pairs is Version NAME path domain and in RFC 2965 port after domain . However HTTPClient produces a cookie string with the domain pair appearing before rather than after the path pair. The RFCs specifically do not use either the grammar or the clarifying text can occur in any order that occurs in the sections that define the Set-Cookie and Set-Cookie2 headers 4.2.2 and 3.2.2 respectively . Since the sections in question do not in fact discuss the issue of pair ordering in Set-Cookie Set-Cookie2 at all other than in using a grammar that clearly expresses the requirement and since the complimentary header explicitly permits them to occur in any order it seems likely that HTTPClient is not the only client with this issue and that most servers will accomodate this situation in fact for it to have gone unnoticed for this long it seems likely that either I m badly misreading the specification or no major server has a problem coping with this . debian bugreport For your reference the debian bug number http bugs.debian.org cgi-bin bugreport.cgi bug 329245 Regards WolfgangI fail to see why the order of attributes should matter but I do not mind sticking the the strict interpretation of the spec OlegCreated an attachment id 16481 Test cases This is a patch for the test cases.Created an attachment id 16482 Proposed fix This one is easy to fix. Please note that this patch is probably not orthogonal to the changes on the cookie2 branch and will probably produce a merge conflict.Looks good to me. As far as I know RFC2109 spec has not changed in the cookie2 branch at all. So just patch away. We ll worry about the cookie2 branch later OlegPatch committed. In reply to commene. As far as I know RFC2109 spec has not changed in the cookie2 branch at all. So just patch away. We ll worry about the cookie2 branch later Oleg I will make the corresponding changes in the Cookie2 branch soon although this seems like a very low priority change to me. Samit
