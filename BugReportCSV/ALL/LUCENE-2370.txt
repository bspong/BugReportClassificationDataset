Reintegrate flex branch into trunk
This issue is for reintegrating the flex branch into current trunk. I will post the patch here for review and commit when all contributors to flex have reviewed the patch. Before committing I will tag both trunk and flex. Here the patch just for review You cannot really apply it as it does not contains changes that are simply svn copied from flex that are all new files added by flex . The idea behind this patch is only that everybody working on flex should scroll through it and verify that actually changed files are fine e.g. we did not miss a change to trunk in flex such a missing merge would apply as a revert in the patch . My working copy tests fine only solr is not compiling anymore because of recent changes in NumericUtils internal class that are non backwards compatible. I will commit this patch before and break solr but will fix it soon sorry new patch. The flex branch still contains some whitespace problems in contrib but this is ok for now. I will check them and fix as far as i see. we did not miss a change to trunk in flex such a missing merge would apply as a revert in the patch . BUILD.txt common-build.xml contrib benchmark CHANGES.txt Here a new patch with lots of cleanups thanks rmuir. Also reverted whitespace-only files Here some fixes for Solr makes it compile after flex merge has some really dirty hacks. Numeric field contents should no longer be seen as Strings they are now BytesRefs. This affects AnalysisRequestHandler and also the converter methods in TrieField type. They should use BytesRefs after flex has landed. New patch reverted all files with whitespace-only changes. Here the final patch after cooperative reviewing in IRC. I will commit the merge now for Solr Lucene. The following points are still broken DirectoryReader readded a bug Mike McCandless knows TestIndexWriterReader in trunk and backwards has some test commented out they have to do with above problem The bug is LUCENE-1976 Ð after flex is landed thanks Uwe I ll fix the bug again. Committed revision 931278 I leave the issue open until the bugs are fixed. Mike fixed the missing merges Thanks.
