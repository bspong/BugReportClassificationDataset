SSL contrib files do not use standard javax.net.ssl package provided from JDK 1.4.2
Hi all While trying to use ssl on AIX i found that some of the files contributed in src contrib org apache commons httpclient contrib ssl were making hard references to com.sun.net.ssl package. Since JDK 1.4.2 one shall use the javax.net.ssl package instead. I have then 1 fixed the source files appropriately 2 updated the build.xml to also build a commons-http-client-contrib.jar I will attached to this bug report the resulting unified diff to include in svnCreated an attachment id 17520 patches for build.xml and ssl contrib files Hope this will help In reply to comment 0 Hi all While trying to use ssl on AIX i found that some of the files contributed in src contrib org apache commons httpclient contrib ssl were making hard references to com.sun.net.ssl package. Since JDK 1.4.2 one shall use the javax.net.ssl package instead. I have then 1 fixed the source files appropriately Christian HttpClient 3.0 needs to be Java 1.2.2 compatible. It cannot use Java 1.4 specific interfaces. One of the reasons why all these classes are in the contrib package is that they ought not to be used without customization. This is also a reason why we do not distribute the contrib code in a form of a jar package OlegI understand the portability issue but if you use a JDK 1.2.2 with JSSE downloaded from sun my patch will work since it provides the javax.net.ssl packages. Moreover if you look at the StrictSSLProtocolSocketFactory.java code you will se it is already using the javax.net.ssl framework. In reply to comment 3 I understand the portability issue but if you use a JDK 1.2.2 with JSSE downloaded from sun my patch will work since it provides the javax.net.ssl packages. No it will not. Please correct me if I am wrong but javax.net.ssl.X509TrustManager class for instance is not available in the JSSE 1.0.3 http java.sun.com products jsse doc apidoc index.html OlegCorrect. I would then at least expect http common project to provide - a copy of the files to be used with old JSSE - another copy fully portable across JDK 14 and recommended for such JDKs At least people would use the portable version for new projects instead of keeping forever SUN hard references. This is also motivated by the fact that SUN announces the end of life for JSSE 1.0.3 xxx within the next two months JSSE 1.0.3 xx will EOL March 30 2006 in alignment with J2SE 1.3.1. extract from http java.sun.com products jsse index-103.html Let me reiterate two things one again 1 HttpClient 3.0 requires Java 1.2.2 compile-time compatibility. Period. End of story. 2 Artifacts in the contrib package are distributed as reference material only and may not be fit for use in production without customization. They for this reason are NOT a part of the offical HttpClient distribution. Period. End of story. HttpClient 4.0 will require JRE 1.4. This will enable us to remove Sun JRE specific code from the contrib package. OlegSince stuff in contrib isn t production code and not part of the core I don t understand why you do not want to at least provide the patches under a ssl.jdk14 directory under contrib . This will hurt noone and people will decide which one they will use as base code for their project they will at least know there is a SUN reference there . Anyhow i just wanted to submit back a solution to a the pb i found if you don t feel it may be of interest for others feel free to discard the patches attached. In reply to comment 7 Since stuff in contrib isn t production code and not part of the core I don t understand why you do not want to at least provide the patches under a ssl.jdk14 directory under contrib . This will hurt noone and people will decide which one they will use as base code for their project they will at least know there is a SUN reference there . Give me a single reason why I should maintain TWO versions of the same stuff I seriously doubt you will stick around to maintain this code. If want to make a real contribution feel free to pick up any of the bug reports targeted for 3.1 release and run with it. This will be highly appreciated. http wiki.apache.org jakarta-httpclient HttpComponentsProjectRoadmap Alternatively consider posting your patches to the HttpClient user list. This way your patches will end up in the mail archive and the code you wrote will be made accessible to those who search the archives for a solution to similar problems. Oleg Ê Since contrib isn t production you are not entitled to maintain it so what s the matter Anyhow giving up. This is useless to discuss this way.Bug reopened. See for details http www.mail-archive.com httpclient-dev 40jakarta.apache.org msg03039.html OlegPatches for ssl contrib classes checked in Oleg
