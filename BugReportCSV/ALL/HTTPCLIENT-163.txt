HttpClient does not compile out of the box in IBM s VisualAge IDE
This was observed with IBM VisualAge 3.5 which runs JDK1.2.2 Importing the HTTPClient source code into the IDE brings up a compilation error in org.apache.commons.httpclient.HttpMethodBase. The initialization of private ResponseConsumedWatcher m responseWatcher using an anyonymous inner class seems to cause some trouble. Implicated code private ResponseConsumedWatcher m responseWatcher new ResponseConsumedWatcher public void responseConsumed responseBodyConsumed The error message is Field initialization The constructor invoked to create org.apache.commons.httpclient.HttpMethodBase 1 with arguments is not defined ...but only in the context of HttpMethodBase String uri constructor i.e. the HttpMethodBase constructor can be compiled HttpMethodBase String uri cannot be compiled with error Cannot create constructor due to incorrect field initialization . I interpret this to mean that the compiler is looking for a parameterless constructor for the anonymous class in the context of HttpMethodBase String uri . The message did not really make sense to me. Checked the syntax checked in the Language Definition whether setting up an anonymous class like that is permitted found nothing obviously wrong. Fix The code above is equivalent to constructing the instance at the beginning of each constructor of the enclosing class. A copy and paste of the construction code into each of the two constructors fixes things...until the next update.IBM s compiler is known to be a bit picky about the syntax sometimes which personally I find okay . Strange though that Eclipse does not have problems. Easy to fix and important to make the sources compatible to common compilers. So scheduling this for beta.David You will need to provide your own patch for this. The current cvs HEAD builds fine with jdk1.2.2 still 3 tests failing and j2sdk1.4.1. I don t have VisualAge only Eclipse and Sun runtimes so can t test any patch either but will take your word for it as long as jdk1.2.2 and j2sdk1.4.1 are still OK. Created an attachment id 5079 fix Attached is a patch that fixes this particular case. There may be other places in the code base that will not compile in VisualAge. I tried to get IBM s 1.2.2 JDK but it seems that it is no longer available. Only 1.3 is on their site now and it does not seem to be as picky. Just to note Visual Age is nearly at its end of life. IBM will no longer be supporting it after the end of the year. They are recommending that people upgrade to WebSphere Application Developer which is just Eclipse plus some extras like hooks into WebSphere. Mike
