Findbugs reports and fixes
Ran findbugs 0.94.rc1 on 3.0RC4. Fixed a few of the obvious ones patches to follow and made notes on the remainder - see the TODO markers in code. Also created a findbugs target in build.xml - see appropriate patch fileCreated an attachment id 17021 Patch to add findbugs Created an attachment id 17022 fb-excludes.xml - Finbugs exclusions Created an attachment id 17023 fb-csv.xsl - convert fb output to CSV Created an attachment id 17024 patch showing actual and suggested fixes Sebastian We have to concentrate on the most essential stuff for the 3.0 release such as potential synchronization problems. For instance I think it is just too late to start introducing serialVersionUIDs in HttpClient 3.x. Can you also exclude test and contrib classes from the patch There s no point in fixing those. As to the findbugs build target and related classes would it be a big deal for you to port those to HttpComponents as well OlegCreated an attachment id 17026 Patch without contrib and test files Sorry I thought I had excluded all the test code. I did not notice that some test code was not in files called Test .java. Using Eclipse it s very easy to pick and choose which files to include when applying patches but I guess other patch applications are not as versatile. I ll have a look at extending Findbugs to HttpComponents.Created an attachment id 17033 Patch take 1 Here s my take at what should go into the 3.0 release. Please review and let me know what you think Oleg From update of attachment 17033 No need to set shutdown as volatile anymore in IdleConnectionTimeoutThread.java - all the references are now in synchronized methods. Folks are there any objections to committing the patch assuming shutdown is no longer set as volatile Please review the patch because it is effectively blocking the 3.0 release. OlegI just spotted something that appeared to be a pretty severe bug in the IdleConnectionTimeoutThread class. I checked in all the fixes but those to IdleConnectionTimeoutThread and will file a new bug report shortly OlegLet us revisit this issue in the course of 3.1 development and fix a few other known issues such as serialVersionUID in serializeable classes OlegserialVersionUID in serializeable classes have been fixed in HttpCore. Oleg
