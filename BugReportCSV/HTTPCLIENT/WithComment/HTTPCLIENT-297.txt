DigestScheme.authenticate returns invalid authorization string when algorithm is null
DigestScheme.authenticate returns invalid authorization string when algorithm is null. I traced the bug and found the following from the method call authenticate Credentials credentials String method String uri calls authenticate UsernamePasswordCredentials credentials             Map params calls createDigest String uname String pwd             Map params   and properly defaults algorithm to MD5 if null but the final call to createDigestHeader String uname Map params             String digest does not default algorithm to MD5 if nullI ll take care of that immediately.Created an attachment id 9225 Proposed fix patch against src The patch changes the behaviour to suppress out optional fields that are not present. DigestScheme now only accepts a challenge if all fields required by RFC 2617 are present. Otherwise an exception is thrown. Test cases have been updated accordingly. The test case also makes sure there is not null string in the response. Please review.The patch looks good to me. OlegPatch committed to 2.0 branch. Still needs porting to CVS HEAD.Odi Will you be able to finish this one off or shall I take it over OlegPlease take over Oleg. I am really busy at the moment. Sorry for that.Actually it appears the problem has been fixed in the CVS HEAD with this patch quite a while ago http cvs.apache.org viewcvs.cgi jakarta-commons httpclient src java org apache commons httpclient auth DigestScheme.java r1 1.8 r2 1.9 diff format h There s pretty much nothing that needs porting. Just an additional check for presence of realm attribute and a few corrections in the test cases OlegCreated an attachment id 11359 Patch against CVS HEAD Committed to the CVS HEAD Oleg
