Wrong creation of AuthScope object
Class Name org.apache.http.client.protocol.RequestAuthCache Line 118-119 Issue Want to create a new Object of AuthScope by passing host name port and scheme name but due to incorrect constructor call Getting a object with realm name as scheme name. Current Code Credentials creds credsProvider.getCredentials new AuthScope host.getHostName host.getPort null schemeName Definitely looks wrong but maybe it should be AuthScope host.getHostName host.getPort authScheme.getRealm schemeName Seems to me it might be sensible to add a new ctor AuthScope HttpHost AuthScheme and consider deprecating the ctors with multiple Strings.Definitely a bug. sigh Oleg Sebb RequestAuthCache is a special case. In the most common scenario AuthScope is created by the user when adding credentials to a CredentialsProvider and at the point AuthScheme is simply not available. So we cannot replace the AuthScope String int String String constructor with AuthScope Host AuthScheme . One possibility could be to create AuthRealm class that is simply a wrapper around String. Oleg Gaurav I committed a fix for the problem with the AuthScope generated by the RequestAuthCache when looking up credentials for preemptive authentication. Could you please re-test your application against the latest shapshot off SVN trunk Oleg
