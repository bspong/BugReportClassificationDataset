Problem getting the HTTPClient to use HTTP 1.0 with a proxy server
I am using HTTPClient 3.0-rc1. I am connecting to an HTTPS site through a proxy. I used HTTPLook to see the HTTP messages between the Proxy and the HTTPClient. I noticed that it always used HTTP 1.1 and setVersion on either the httpclient and the method do not help. I could not find how to get the HTTPClient to use HTTP 1.0 with the proxy. Looking at the ConnectMethod class the HTTP1.1 was indeed hardcoded. Thanks riad HTTPCLIENT-431 has been marked as a duplicate of this bug. HTTPCLIENT-430 has been marked as a duplicate of this bug. HTTP 1.1 for CONNECT method is not really hardcoded. The trouble is that the CONNECT method takes its parameters from the client ignoring those set at the method and host level. Anyways it is a serious bug. I ll start working on a fix OlegRiad My apologies. You are absolutely right. HTTP 1.1 for CONNECT was indeed hardcoded. The rationale behind this decision probably was HTTP spec compliance. HTTP CONNECT method was initially defined in HTTP 1.1 specification only. However there are enough HTTP 1.0 proxies which implement certain HTTP 1.1 features including SSL tunneling support. So the decision to restrict HTTP CONNECT to HTTP 1.1 was certainly wrong. My bad. A patch coming shortly OlegCreated an attachment id 14271 Patch take 1 This should take care of the problem. Please let me know what you think OlegSince the fix is pretty straightforward and is backed by a fair number of test cases I have taken liberty of committing the patch without a formal okay of another committer. Oleg
