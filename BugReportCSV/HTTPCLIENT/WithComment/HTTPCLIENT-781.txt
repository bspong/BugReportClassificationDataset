Respect Keep-Alive Header
HttpClient currently does not respect the Keep-Alive header tokens timeout max etc.. and continues to use the persistent connection beyond limits the server requests. This leads to failure and falling back to HttpRequestRetryHandler when it should instead just use a new connection explicitly.committed fix please tweak the API param names as desired. i went with a strategy of adding a valid duration to any release event and storing the data in the existing IdleConnectionHandler since it already stored time-sensitive info. worked out pretty nicely i think.Sam I made some changes to the DefaultConnectionKeepAliveStrategy class and added more test cases. Please review. I also think it would be better if getKeepAliveDuration returned both TimeUnit and long in one go. Something like class KeepAliveInfo     long getTime   TimeUnit getUnit Or we dropped TimeUnit altogether. OlegI found a similiar issue with 3.1. Will you fix 3.1 because I am using axis1 with CommonsHTTPSender which depends on httpclient3.xDaniel 3.1 is considered end of life. It is unlikely that there will be another release. We accept patches if they have sufficient test coverage however.i cleaned up the code a bit including removing getUnit from the keep alive strategy. i think the new API is a little better but could go either way.I also like it better this way. Oleg
