Error reading data
Hi I have some problems with HttpClient HEAD. It works fine with a build of 20020720 of HttpClient though. It seems HttpClient is not reading correctly the returned HTTP response. I m attaching the logs. Here is the output from Cactus build       java junit Testcase testLongProcess took 3.645 sec       java junit Caused an ERROR       java junit Failed to get the test results. This is probably due to an error that happen ed on the server side when trying to execute the tests. Here is what was returned by the server html head Long Process head body Some data body html       java junit       java junit org.apache.cactus.util.ChainedRuntimeException Failed to get the test resul ts. This is probably due to an error that happened on the server side when trying to execute the tes ts. Here is what was returned by the server html head Long Process head body Some data bod y html       java junit       java junit at org.apache.cactus.client.AbstractHttpClient.doTest Unknown Source       java junit at org.apache.cactus.AbstractWebTestCase.runWebTest Unknown Source       java junit at org.apache.cactus.AbstractWebTestCase.runGenericTest Unknown Sour ce       java junit at org.apache.cactus.ServletTestCase.runTest Unknown Source       java junit at org.apache.cactus.AbstractTestCase.runBare Unknown Source       java junit org.apache.cactus.client.ParsingException Not a valid response. First 100 c haracters of the reponse webresult HTTP 1.1 200 OK       java junit Server Resin 2.1.2       java junit Content-Length 23       java junit Date Tue 13 Aug 2002 08 45 2       java junit at org.apache.cactus.client.WebTestResultParser.readExceptionClassna me Unknown Source       java junit at org.apache.cactus.client.WebTestResultParser.parse Unknown Source Thanks -VincentCreated an attachment id 2695 HttpClient logs The in the attachment the response looks like it came back twice or doubled up somehow The wire log shows the response to be webresult webresult HTTP 1.1 200 OK Server Resin 2.1.2 Content-Length 23 Date Tue 13 Aug 2002 08 45 21 GMT webresult webresult HTTP 1.1 200 OK Server Resin 2.1.2 Content-Length 23 Date Tue 13 Aug 2002 08 45 21 GMT webresult webresult Its highly doubtful that the response actually came back like that from the webserver. But somehow when doing the read from the stream it looks like it was read twice and perhaps the tail end of a 3rd right at the start. Not sure if the stream was not fully empied from the previous read but it looks like its all the same request because of the timestamp being identical. This looks like a http GET not http HEAD as stated in the initial comments GET test ServletRedirector Cactus Service GET RESULTS HTTP 1.1 r n The in the attachment the response looks like it came back twice or doubled up somehow yep. As I said this does not happen with a build of HttpClient dated 20020720 so something must have changed in HttpClient in that regards. Not sure if the stream was not fully empied from the previous read but it looks like its all the same request because of the timestamp being identical. What can we do to further debug the problem This looks like a http GET not http HEAD as stated in the initial comments GET test ServletRedirector Cactus Service GET RESULTS HTTP 1.1 r n When I said HEAD I meant CVS HEAD not HTTP HEAD ... - Yes I m doing a GET ...Is this still a problem Vincent Hi Jeff It seems it was fixed in one of the other HttpClient bug fix some time ago. Anyway everything is working fine now. Thanks -Vincent
