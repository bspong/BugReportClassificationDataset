J2EE FORM authentication also affects pluggable authentication 
Add support for J2EE style FORM authentication type. Unlike the BASIC and DIGEST types this is not handled by HTTP headers so needs an adjustment to the way in which the authentication is sent. As far as i can tell from my testing with one or two J2EE servers the way to successfully login requires request of a protected page which will respond with the login FORM and then the submission of that form. The two requests must be associated with one another using the jsessionid cookie. It seems to me that this bug must be solved in cooperation with the recent discussions of pluggable authentication module. i suggestion the following signature PluggableAuthenticator.authenticate HttpMethod method HttpState state . This mirrors the existing Authenticator method but also requires change to the state object to allow access to the connection properties i dont know how this affects MultiClient . Alternately we could go for PluggableAuthenticator.authenticate HttpMethod method HttpClient client . In either case Authenticator needs a way to know which plugin to call. I suggest modification of HttpMethodBase to detect the j security check form action in the response and automatically submit credentials if they are provided using the new class J2EEFormAuthenticator implements PluggableAuthenticator.I personally do not see an elegant way of implementing the requested feature and what is more do not think that J2EE authentication should be supported by the stock version of HttpClient at all. Authentication logic in HttpClient has undergone several radical changes since this feature request was filed. The monolithic HttpAuthenticator has been restructured into smaller AuthScheme interface implementing modules and deprecated. Besides form-based authentication is not a part of HTTP protocol and should probably better be built on top of HttpClient instead of being kind of shoved in. All that makes me kind of lean towards marking this bug as WONTFIX . What do you think guys Am I being too lazy and unimaginative Oleg Agreed. This is not something that needs to be fixed. Form authentication is just like posting into any other form. It is not another kind of HTTP authentication. This type of authentication should be handed using PostMethod. MikeIf there are any fresh and bright ideas or and practical suggestions as to how J2EE authentication can be implemented without causing too much of design badness feel free to reopen the bug report. Patches welcome Oleg
