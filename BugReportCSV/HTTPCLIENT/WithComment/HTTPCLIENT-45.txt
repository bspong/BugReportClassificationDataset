HTTP Version configuration and tracking
HTTP version tracking is currently oversimplified with a single http11 boolean. Extend this to handle any http version simply and efficiently. Possible suggestion get rid of setHttp11 an isHttp11 void setHttpVersion String version String getHttpVersion boolean isHttpVersion String version Created an attachment id 6043 Simple httpstatus code lookup optimizations Jandalf Overall the patch looks fine to me. Of course code has become less readable but quite often there is a trade-off between source code readability and machine code efficiency java.util.Hashtable import can be removed I think OlegI ll be working on this one. OlegCreated an attachment id 7493 HTTP version patch take 1 It s just a small step toward improving the HTTP protocol versioning in HttpClient. Folks let me know what you think. OlegOleg Very nice. I think this is a clean solution to the problem. I have a few comments  - HttpVersion.parse no longer handles the http status of HTTP . Though this is an obviously non-standard value it is something that we intentionally added support for.  - HttpVersion should implement hashCode .  - HttpVersion.equals Object does the following test         if obj null obj instanceof HttpVersion   Though this is not an error the test for null is not necessary as instanceof already handles this case. Mike Created an attachment id 7515 HTTP version patch take 2 I can hardly imagine that one would want to put instances of HttpVersion class into a hash map but of course I see no harm in having a hashCode implementation. What do you think it can be useful for OlegI don t know of a good reason to hash HttpVersions either. I think it is just good practice to override equals and hashCode together. MikeThis looks very good I have one very minor suggestion In EntityEnclosingMethod change this                   Chunked transfer encoding not allowed for HTTP 1.0 to this                   Chunked transfer encoding not allowed for                  getHttpVersion Created an attachment id 7581 HTTP version patch take 3 If nobody complains loudly I ll commit this patch tonight. OlegPatch committed. Oleg
