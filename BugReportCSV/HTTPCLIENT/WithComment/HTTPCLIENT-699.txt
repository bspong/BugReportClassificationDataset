Performance tuning
Pascal There has been a great deal of changes since alpha1. We are pretty much about to release alpha2. Could you please build your patches off the SVN trunk OlegSo what this patch is trying to do is save on Object instances. I really wonder what kind of use case creates that many instances of HttpState that this is a problem - It replaces the use of a CookieIdentityComparator with a static method. That s the part I disgust. It would be nicer to require CookieIdentityComparator to be thread-safe Comparators are stateless almost always so no big deal and provide a static instance. It tries to do the cookie expiry without iterator. It s a bit fragile like that but should work. Just needs proper test coverage. I can t see any savings in the changes to getCookies . matchCredentials has been inlined because the static method has no access to initialize the non-static field. Could just as well make the method non-static. I really wonder what kind of use case creates that many instances of HttpState How about SOAP It replaces the use of a CookieIdentityComparator with a static method. It eliminates two class casts within a loop too. Creating a class for 6 lines of code if it is only used once doesn t seem right. I can t see any savings in the changes to getCookies . Again a class cast. None of these changes are major but if you accept them I ll go through the whole codebase and improve things bit by bit. That is the way I usually work. Pascal I am closing this issue as WONTFIX for now. Feel free to re-open it if you port your patch to the latest SVN snapshot. Oleg
