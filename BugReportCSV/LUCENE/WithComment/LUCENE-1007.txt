Flexibility to turn on off any flush triggers
See discussion at http www.gossamer-threads.com lists lucene java-dev 53186 Provide the flexibility to turn on off any flush triggers - ramBufferSize maxBufferedDocs and maxBufferedDeleteTerms. One of ramBufferSize and maxBufferedDocs must be enabled. Just got around to do the patch The patch includes changes to IndexWriter and DocumentsWriter to provide the flexibility to turn on off any flush triggers. Necessary changes to a couple of unit tests. Also remove some unused imports. All unit tests pass. One question Should we count buffered delete terms towards ram buffer used Feel like we should. On the other hand numBytesUsed only counts ram space which can be recycled. Thanks Ning I will have a look at the patch. One question Should we count buffered delete terms towards ram buffer used Feel like we should. On the other hand numBytesUsed only counts ram space which can be recycled. I think we should still count this ram usage with numBytesUsed Even though it s not directly recycled this memory usage does still last for a very long time ie longer than a single document s processing until flush happens so I think it should be counted. Take2 counts buffered delete terms towards ram buffer used. A test case for it is added. This patch looks good thanks Ning I made a few small changes including how RAM usage of buffered delete term is calculated. Attached take3. I plan to commit in a day or two. One more thing about the approximation of actual bytes used for buffered delete term just remember Integer.SIZE returns the number of bits used should convert it to number of bytes. Whoa good catch OK I ll divide by 8. I just committed this. Thanks Ning and Doron 
