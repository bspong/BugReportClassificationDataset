Remove GCJ IndexReader specializations
These specializations are outdated unsupported most probably pointless due to the speed of modern JVMs and I bet nobody uses them Mike you said you are going to ask people on java-user anybody replied that they need it . While giving nothing they make SegmentReader instantiation code look real ugly. If nobody objects I m going to post a patch that removes these from Lucene. In my cca 10 year history of being around Lucene I think I saw GCJ mentioned only about half a dozen times. Mike you said you are going to ask people on java-user anybody replied that they need it I did ask http www.mail-archive.com java-user lucene.apache.org msg26726.html And nobody answered. So I think we should remove it and the org.apache.lucene.SegmentReader.class system property Can you post a patch Thanks. Is there a reason why test-tag does not depend on compile-tag Previously I could just run ant test-tag and it downloaded the tag compiled it and run the tests. Now I need to run ant compile-tag test-tag . Is there a reason why test-tag does not depend on compile-tag Previously I could just run ant test-tag and it downloaded the tag compiled it and run the tests. Now I need to run ant compile-tag test-tag . Ugh my bad. I ll fix... I think test-core is broken too ... I think test-core is broken too ... It should be fixed now I reverted it . You re right. I updated build.xml but the change for test-core was actually in common-build.xml. sorry for the false alarm. I did ask http www.mail-archive.com java-user lucene.apache.org msg26726.html And nobody answered. So I think we should remove it and the org.apache.lucene.SegmentReader.class system property Can you post a patch Thanks. FWIW Google code search pops up a few uses in publicly available code... http www.google.co.uk codesearch hl en lr q org.apache.lucene.SegmentReader.class -package 3Arepos 2Fasf 2Flucene 2Fjava sbtn Search What jumps out at me is that apparently older versions of Compass relied on this feature ... it looks like Compass 2.0 eliminated the need for this class but i just wanted to point this out. Mike are we going to postpone actual deletion of these classes for 3.0 I thought so Ie deprecate now remove in 3.0 I thought we re doing everything right now as it is broken already. And I have a half-written patch with SR cleanup after GCJ removal OK since they are broken already anyway let s remove them now But I think we should wait until 3.0 to remove respecting the org.apache.lucene.SegmentReader.class property. I ll remove src gcj in a day or two... Removed the SegmentReader system property in Lucene 3.0
