Cleanup Test TokenStreams so they are reusable
Many TokenStreams created in tests are not reusable. Some do some really messy things which prevent their reuse so we may have to change the tests themselves. We ll target back porting this to 3x. Patch which adds state resetting to TokenStreams created in tests. The only other TSs which are not reusable are done so by design to test that something can handle non-reusable TSs. When we made reuse mandatory we can drop these tests and remove the non reusable TSs. Better patch which removes changing the state of a static variable. I ll commit this in day or so. looks good Committed revision 1161488. I or someone else will get to back porting this at another stage. Found some more. Patch which addresses the remaining non-reusable TSs. Patch also takes a swing at the deprecated PatternAnalyzer s Tokenizers even though they were neither Tokenizers nor in tests . Committed revision 1161986. I understand Robert is backporting the changes. If I find anymore I ll address them in LUCENE-3396. Found another. Okay I m going to stop resolving this till I m sure we re clear. Patch addresses the SynonymTokenizer note not a Tokenizer in HighlighterTest which was only resetting its actual Tokenizer once. Committed revision 1161993. thanks for all this cleanup work chris this makes our codebase much cleaner and test real examples Very very welcome work All TokenStreams are now reusable.
