GData Server - Milestone 3 Patch Bugfixes Documentation
For Milestone 3 added Features Update Delete Concurrency Version control Second storage impl. based on Db4o. Distributed Storage moved all configuration in one single config file. removed dependencies in testcases. added schema validation for and all xml files in the project Configuration etc. added JavaDoc much better Performance after reusing some resources added recovering component to lucene based storage to recover entries after a server crash or OOM Error very simple solved test case fail on hyperthread multi core machines hossman give it a go Yonik Doug could you get that stuff in the svn please regards simon The diff file with the no. 2 is broken. Use the one with the no. 1 Ð simon Removed some lines after running a code analysis tool. Prevent some possible null pointer exc. Releasing all resources of StorageQueries I localy applied gdata 06 07 25.diff but ant test fails for me WinXP cygwin . Here is the first exception junit Standard Error junit Jul 25 2006 2 40 33 PM org.apache.lucene.gdata.server.registry.GDataServerRegistry registerComponent junit INFO no configuration for ComponentType STORAGECONTROLLER junit org.apache.lucene.gdata.server.registry.RegistryException component already registered Ð STORAGECONTROLLER junit at org.apache.lucene.gdata.server.registry.GDataServerRegistry.registerComponent GDataServerRegistry.java 297 junit at org.apache.lucene.gdata.server.TestGDataRequest.setUp TestGDataRequest.java 50 junit at junit.framework.TestCase.runBare TestCase.java 125 junit at junit.framework.TestResult 1.protect TestResult.java 106 junit at junit.framework.TestResult.runProtected TestResult.java 124 junit at junit.framework.TestResult.run TestResult.java 109 junit at junit.framework.TestCase.run TestCase.java 118 junit at junit.framework.TestSuite.runTest TestSuite.java 208 junit at junit.framework.TestSuite.run TestSuite.java 203 junit at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run JUnitTestRunner.java 297 junit at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch JUnitTestRunner.java 672 junit at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main JUnitTestRunner.java 567 junit org.apache.lucene.gdata.server.registry.RegistryException component already registered Ð STORAGECONTROLLER junit at org.apache.lucene.gdata.server.registry.GDataServerRegistry.registerComponent GDataServerRegistry.java 297 junit at org.apache.lucene.gdata.server.TestGDataRequest.setUp TestGDataRequest.java 50 junit at junit.framework.TestCase.runBare TestCase.java 125 junit at junit.framework.TestResult 1.protect TestResult.java 106 junit at junit.framework.TestResult.runProtected TestResult.java 124 junit at junit.framework.TestResult.run TestResult.java 109 junit at junit.framework.TestCase.run TestCase.java 118 junit at junit.framework.TestSuite.runTest TestSuite.java 208 junit at junit.framework.TestSuite.run TestSuite.java 203 junit at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run JUnitTestRunner.java 297 junit at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch JUnitTestRunner.java 672 junit at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main JUnitTestRunner.java 567 Hey Yonik this exception will be catched and is alright not nice I will remove it but this is not the cause of the test failure. I guess you don t have db4o jar in your classpath right That might cause the problem. I did alter the build file to omitt the db4o dependent classes but that does not work for junit. Junit seems to look up the classes in the source folder and not from the compiled classes. I couldn t find a way to exclude this. There should be a way to set a junit.exclude property in the top level build file. I will attach the build file diffs to the issue. If the test still fails I would appreciate if you could attach the ant junit output as XML to the issue. I tried it on 4 different machines with is not an excuse . Thanks Simon common-build.diff java trunk common-build.xml gdata-build xml.diff java trunk contrib gdata-server build.xml applied gdata s build.xml patch applied common-build.xml patch by hand since patch failed. I also excuded the following part of the patch property name javacc.home location common.dir property name javacc.home location home simon application private javacc -3.2 Things still fail...attaching test.out Added Missing xml schema file caused ant test fail. I found 0 failure and 2 errors in the test.out this was caused by a missing file in the test classpath folder. I added the file to svn there was just a little missing . Well I do feel not very well with commiting such huge patches this is quiet error-prone isn t it So how could we improve this procedure for me and for you. I guess we can t get a patch every day once a week would be quiet good. I would suggest a fix day for me adding a new patch which gives you a week to commit it. That would make development much easier for me and there will be less patch mistakes. Btw. thanks for removing my edited line from the common-build.xml patch I will add the clean patch again in a minute. regards simon removed local path in build file OK I ve committed the changes. I see a lot of exceptions in the tests but ant junit reports 0 failures.
