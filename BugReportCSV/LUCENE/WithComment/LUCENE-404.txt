Crash when querying an index using multiple term positions.
file MultipleTermPositions.java line 201 function skipTo int . This refers to the source that can currently be downloaded from the lucene site Lucene v. 1.4.3. The function peek returns null because top also retruned null . There is no check for this as far as I can understand. The function doc is called on a null-object which results in a NullPointerException. I switched the specified line to this one while termPositionsQueue.peek null target termPositionsQueue.peek .doc This got rid of the crash for me. Hi Hans Could you attach a small test case that triggers the bug This way I can easily check if the current version of Lucene from SVN is also affected. Bug 35668 has been marked as a duplicate of this bug. I get this same error on the latest from SVN r219350 . I may be able to put together a test case in a bit... Created an attachment id 15692 A test case that reproduces this null point exception I attached a test case that reproduces this bug. I verified that the proposed change fixes this test case as well. Thanks the fix and its test case have been committed.
