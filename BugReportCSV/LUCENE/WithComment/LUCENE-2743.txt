SimpleText is too slow
If you are unlucky enough to get SimpleText codec on the TestBasics span query test then it runs very slowly... Attached patch that simply loads every term into RAM into a TreeMap. On my machine this drops TestBasics from 74 sec to 18 sec... The TreeMap should use the enum s termsComparator Or is it not configurable You can t change the term comp used by SimpleText So I think ByteRef s natural order is correct matches what .getComparator returns .... here are some times using ant test-core -Dtests.directory SimpleFSDirectory -Dtests.codec SimpleText -Dtests.seed 1 1 this is just core tests before patch 6 05 after patch 4 38 So this is a nice improvement I think for hudson it might make a difference when the multiplier is kicked in especially.
