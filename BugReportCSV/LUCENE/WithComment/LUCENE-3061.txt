Open IndexWriter API to allow custom MergeScheduler implementation
IndexWriter s getNextMerge and merge OneMerge are package-private which makes it impossible for someone to implement his own MergeScheduler. We should open up these API as well as any other that can be useful for custom MS implementations. Open up necessary API add TestCustomMergeScheduler under src test o.a.l index publicapi. The changes are very trivial. If you would like to suggest alternative package I should put the test in I will gladly do it. All of those the public API tests are directly under o.a.lucene at the moment. Thanks Uwe Following your comment I noticed there is a TestMergeSchedulerExternal under o.a.l which covers extending ConcurrentMergeScheduler. So I moved my MS impl test case there. I think this is ready to commit Mark these as experimental I don t think they are experimental though Ð they exist for ages. We only made them public. I get your point - you don t think we should commit to this API signature but IMO we should Ð if MS is a valid extension point by applications we must support this API otherwise MS cannot be extended at all. Also getNextMerge jdoc specifies Expert the MergeScheeduler calls this method ... - this kind of makes this API public long time ago only it wasn t. I think they should be experimental Eg MS itself is . I didn t notice MS is experimental. It s weird to me that it is. Perhaps we need another tag lucene.expert with same semantics as experimental but better name. Experimental feels like I m touching stuff that is not fully ready yet. But nm I ll tag these method as experimental. We can discuss the expert tag on the list outside this issue. I ll commit shortly. Committed revision 1098543 3x . Committed revision 1098576 trunk . Bulk closing for 3.2
