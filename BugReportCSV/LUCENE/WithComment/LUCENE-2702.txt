BytesRefHash get should expect a BytesRef instances for consistency
BytesRefHash get should use a provided BytesRef instances instead of the internally used scratch. This is how all other APIs currently work and we should be consistent. here is a patch 1 thanks for taking care . As soon as this is committed I can change the patch for LUCENE-2690. Is BytesRefHash get int currently not used anywhere except tests because you had to change nothing Is BytesRefHash get int currently not used anywhere except tests because you had to change nothing no currently not since consumers like TermVectorsTermsWriter go through the ParallelPostingsArray and access the shared ByteBlockPool directly - they somewhat bypass the get method call though. We left that in during the refactoring. 1 thanks for taking care . As soon as this is committed I can change the patch for LUCENE-2690. alright - I might do that in one go though. committed in rev. 1022453
