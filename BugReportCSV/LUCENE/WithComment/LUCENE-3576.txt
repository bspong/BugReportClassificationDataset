TestBackwardsCompatibility needs terms with U E000 to U FFFF
we changed sort order in 4.0 and have sophisticated backwards compatibility e.g. surrogates dance but we don t test this at all in TestBackwardsCompatibility. for example nothing handles this case for term vectors... Here s the patch to make the index from 3.x s testbackwards and a simple test for trunk that fails. I also attached the zip. I ll work on fixing the preflex codec s termvectorsreader writer now. 1 we need to test term vectors w surrogates better Here s a patch fixing the bug. PreFlexRW now writes term vectors in UTF-16 order.
