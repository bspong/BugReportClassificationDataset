Remove unnecessary array wrapping when calling varargs methods
varargs method callers don t have to wrap args in arrays Patches implementing the idea thanks to IntelliJ s Redundant array creation inspection that found all these . In branch 3x I didn t change anything under lucene backwards . Also converted one Arrays.asList new Integer 0 to Collections.emptyList and several Arrays.asList new CLASS ... to Arrays. CLASS asList ... . Also converted one Arrays.asList new Integer 0 to Collections.emptyList But these are different right specifically the first is mutable but the latter is immutable Also converted one Arrays.asList new Integer 0 to Collections.emptyList But these are different right specifically the first is mutable but the latter is immutable Hmm I hadn t considered that. Ordinarily I might argue that for a test of sorting an empty list immutability is not a problem. However LUCENE-2989 switched this exact line away from Collections.emptyList to what it is now. So in this version of the branch 3x patch I ve reverted that change and added a comment pointing to LUCENE-2989. Also converted one Arrays.asList new Integer 0 to Collections.emptyList But these are different right specifically the first is mutable but the latter is immutable Immutability is not a problem an empty array cannot change. The answer is correct the IBM JDK has a bug making the Collection s.emptyList not implement RandomAccess. Can you add a comment if not already there And thats not the only bug in IBM JDK. Several version don t even run trunk tests because ServiceLoader is mixing up the classpath it uses broken Harmony code and the RW codec comes after the core codecs. So in this version of the branch 3x patch I ve reverted that change and added a comment pointing to LUCENE-2989. This also affects trunk the trunk patch still contains emptyList . So in this version of the branch 3x patch I ve reverted that change and added a comment pointing to LUCENE-2989. This also affects trunk the trunk patch still contains emptyList . Thanks I forgot that. This version of the trunk patch puts back emptyList and adds the LUCENE-2989 comment. I plan on committing later today. Committed to branch 3x and trunk. Thanks Uwe and Robert for your reviews.
