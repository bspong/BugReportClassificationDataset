exceptions from other threads in beforeclass etc do not fail the test
Lots of tests create indexes in beforeClass methods but if an exception is thrown from another thread it won t fail the test... e.g. this test passes public class TestExc extends LuceneTestCase BeforeClass public static void beforeClass new Thread public void run throw new RuntimeException boo .start public void test this is because the uncaught exception handler is in setup teardown This is solved by 3808 but I can also fix it on the trunk if you need a temporary fix. A patch against the trunk extracting uncaught exceptions management to a class and test rule. There are tiny differences to previous implementations Ð the exception is logged to stderr at the time it is thrown and parent handler is NOT invoked because it d cause double detection and the default handler s job is only to dump the stack . I will commit immediately 
