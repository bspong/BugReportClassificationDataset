 patch better support gcj compilation
There are two methods in IndexReader.java called delete . That is a reserved keyword in C and these methods cause trouble for gcj which implements a clever workaround in renaming them delete but the OS X dynamic linker doesn t pick-up on it. The attached patch renames delete int to deleteDocument int and delete Term to deleteDocuments Term and deprecates the delete methods as requested by Doug Cutting . Created an attachment id 13080 patch for delete methods in IndexReader.java Do you think this is a bug in the OS X linker Can other linkers handle symbols named delete If it s not a linker bug then it s a GCJ bug no Java and C have different reserved words and GCJ needs a mechanism to escape these when they conflict. If adding dollar sign breaks the linker then perhaps GCJ should do this some other way. I m not saying that we should or shouldn t integrate this patch rather that we should consider the patch a workaround for a bug with GCJ and or the OS-X linker. Since it s an API change it s a workaround that we may never undo. Still we should use it as an opportunity to improve GCJ or OS X so that the next time someone reasonably names a method delete in Java they don t prohibit themselves from using GCJ or GCJ on OS X . Applied manually . There were no votes against this change and 1.9 is the right time to do this sort of change.
