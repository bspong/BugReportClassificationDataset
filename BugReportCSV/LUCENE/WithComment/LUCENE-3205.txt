remove MultiTermQuery get inc clear totalNumberOfTerms
This method is not correct if the index has more than one segment. Its also not thread safe and it means calling query.rewrite modifies the original query. All of these things add up to confusion I think we should remove this from multitermquery the only thing that uses it is the NRQ tests which conditionalizes all the asserts anyway. I am perfectly fine to remove it. For analysis and debugging NRQ it would still be good to have something but I suggest to change the tests I will simply request TermsEnum and count terms possibly on MultiTerms . Should I take the issue and modify my tests yes please do uwe can you move this forward for a possible 3.5 release any time soon Working on a new test that counts the returned TermsEnum as replacement in TestNRQ. Working on a new test that counts the returned TermsEnum as replacement in TestNRQ. thanks uwe Patch with improved tests and removed stats functions for trunk . I will commit this soon and merge backwards but only deprecate in 3.x . Committed trunk revision 1201329 Patch for 3.x Committed 3.x revision 1201334 Bulk close after release of 3.5
