indexwriter creates unwanted termvector info
I noticed today that when I build a big index in Solr I get some unwanted termvector info even though I didn t request any. This does not happen on 3x - not sure when it started happening on trunk. Here s a test program that reproduces the issue. This seems to have some relationship to shared docstores. If you put an IW.commit in the loop you never see the issue. It only seems to happen when the IW session is still open and a new segment is flushed. Hence if you raise the buffer size you will also avoid the extra termvector info in this test. Hmmmm I know why this is happening Ð I caused this when fixing intermittent test failures with LUCENE-2759. Ugh. But do you see any end-user issue eg exception Or it s just that IW is now creating files that it should not which is a real issue that we need to fix . And in fact I see it happening even if you put IW.commit in the loop and it happens in 3.x 3.0.x and 2.9.x as far as I can tell I backported LUCENE-2759 there . Nope - no end user exceptions - I just happened to notice that one of my test indexes was 10 bigger than I expected. w.r.t. 3x that s certainly possible - the 3x Solr index I compared against was built 2 months ago.
