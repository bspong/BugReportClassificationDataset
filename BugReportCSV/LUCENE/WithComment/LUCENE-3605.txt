revisit segments.gen sleeping
in LUCENE-3601 i worked up a change where we intentionally crash all un-fsynced files in tests to ensure that we are calling sync on files when we should. I think this would be nice to do always and with some fixes all tests pass . But this is super-slow sometimes because when we corrupt the unsynced segments.gen it causes SIS.read to take 500ms each time and in checkindex for some reason we do this twice which seems wrong . I can workaround this for now for tests just do a partial crash that avoids corrupting the segments.gen but I wanted to create this issue for discussion about the sleeping non-fsyncing of segments.gen just because i guess its possible someone could hit this slowness. Patch I removed the sleep retry loop in loading the segments.gen file I don t think SIS should do any sleeping it s risky an app could in theory hit the net 0.5 second sleep here . I also changed SegmentInfos.finishCommit to sync this file if it was written successfully but to suppress exceptions but then try to delete the file since a reader could have it open as we try to commit which is fine the file is optional since we use dir listing to locate segments N . I agree... i think we can also remove the now unused defaultGenFileRetryPauseMsec and its setter too I meant getter... you already nuked the setter Woops Ð I ll nuke the getter 
