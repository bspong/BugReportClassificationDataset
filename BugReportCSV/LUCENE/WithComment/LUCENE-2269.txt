don t download extract 20 000 files when doing the build
When you build lucene it downloads and extracts some data for contrib benchmark especially the 20 000 files for the reuters corpus. this is only needed for one test and these 20 000 files drive IDEs and such crazy. instead of doing this by default we should only download extract data if you specifically ask like wikipedia collation do etc for the qualityrun test instead use a linedoc formatted 587-line text file similar to reuters.first20.lines.txt already used by benchmark. patch data file that goes in contrib benchmark src test o a l benchmark quality the test is setup to use it in zipped form. if no one objects will commit this tomorrow to speed up the build and increase the lifespan of our hard drives. Patch looks great This speeds up the test from 16.8 sec - 1.5 sec for me. Only thing is I think you don t have to unzip yourself Ð benchmark can decompress .bz2 itself on the fly. great idea Mike I removed all unzipping code and changed the file to the smaller bz2 which is handled automagically by benchmark. i also added a note about this test for the future NOTE if the default scoring or StandardAnalyzer is changed then this test will no work correctly as it does not dynamically generate its test trec topics qrels this is nothing new but in my opinion an improvement in the future would be to dynamically generate these files it would also test the QualityQueriesFinder functionality but we would need to add the fake documents etc for the test to work too. will commit shortly Committed revision 912333.
