FVH uncontrollable color tags
The multi-colored tags is a feature of FVH. But it is uncontrollable or more precisely unexpected by users that which color is used for each terms. The patch. It fixes the problem when usePhraseHighlighter true. When the flag is false and FVH works on N-gram field not a few terms may be created in tree then it causes uncontrollable. But I think the case of using usePhraseHighlighter false with N-gram field is rare the attached patch will be enough. bulk move 3.2 - 3.3 I ll commit soon. trunk Committed revision 1170908. 3x Committed revision 1170913. Bulk close after release of 3.5 The change from HashSet to ArrayList for flatQueries resulted in very significant slowdown in some of our e-discovery queries after upgrade from 3.4.0 to 3.5.0. Our queries sometime contain tens of thousands of terms. As a result major portion of execution time for such queries is now spent in the flatQueries.contains sourceQuery method calls. Uh that is not good news. Please don t hesitate to open a ticket. Patches would be welcome as I don t have time to look into it for a few weeks... Created LUCENE-3719 with a patch.
