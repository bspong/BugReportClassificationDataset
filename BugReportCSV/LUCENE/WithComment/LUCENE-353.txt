Locking bug
In org.apache.lucene.store.Lock line 57 lucene 1 4 final branch if sleepCount maxSleepCount is incorrect the sleepCount is incremented before the compare causing it throwing the exception with out waiting for at least 1 interation. Should be changed instead to if sleepCount maxSleepCount As this is a self-contained simple fix I am not submitting a patch. Thanks -John You re right the Lock.obtain long method never actually waits when using the default settings. Does anyone know of a reason why this should not be fixed This is fixed now in SVN. Did not realize it was fixed already. Just in case if someone wants to check it in this is a unit test that shows original problem.
