Backport FSTs to 3.x
Initial patch. TestFSTs passes... I pulled back DataInput Output too. Lucene backwards tests failed because IO.copyBytes changed from IndexInput to DataInput... Here s just some random stuff I thought about noticed some of it only vaguely to this issue should we name the thing o.a.l.u.fst in trunk too if FST is going to go into 3.x i think we should do a check to ensure all classes are experimental I think we should consider cutting Builder over to the new CharsRef we need to discuss things like autosuggest file formats etc At least so we are all on the same page wrt any backwards policy... should we name the thing o.a.l.u.fst in trunk too Good idea... I ll do that w this issue. if FST is going to go into 3.x i think we should do a check to ensure all classes are experimental OK will do... there were a few missing I ll fix trunk too . I think we should consider cutting Builder over to the new CharsRef I agree but I think we should do this separately I ll open an issue... we need to discuss things like autosuggest file formats etc At least so we are all on the same page wrt any backwards policy... Yes... maybe the same policy as the index So if you create auto-suggest FST in 3.x 4.x s suggest module will be able to read it use it The FST itself is already versioned uses CodecUtil to read write the header so we should be all set to impl whatever policy we work out. New patch for 3.x. I think it s ready to commit. I advertised the break of IndexOutput.copyBytes 1st arg now takes DataInput not IndexInput and remove the backwards test cases that broke from this. I also added in missing experimental tags. Committed to 3.x. I still need to move fst under oal.util for trunk... bulk close for 3.3
