Allow PackedInts.ReaderIterator to advance more than one value
The iterator-like API in LUCENE-2186 makes effective use of PackedInts.ReaderIterator but frequently skips multiple values. ReaderIterator currently requires to loop over ReaderInterator next to advance to a certain value. We should allow ReaderIterator to expose a advance ord method to make use-cases like that more efficient. This issue is somewhat part of my efforts to make LUCENE-2186 smaller while breaking it up in little issues for parts which can be generally useful. here is a patch - comments welcome Since this API is new in 4.0 I wonder if we should then rename it to PackedIntsEnum or PackedIntsIterator since ReaderIterator is a very general term. Another option would be to just name it Iterator since it already has a name context because its an inner class. Looks good Simon Maybe instead of public int docID we should name it public int ord Ie the index is not always a docID eg when the fixed-gap terms index uses packed ints it s the term ord . Ie the index is not always a docID eg when the fixed-gap terms index uses packed ints it s the term ord . Ah good point - I will fix. changed ReaderIterator docId to ReaderIterator ord I will commit tomorrow if nobody objects committed in rev. 998445
