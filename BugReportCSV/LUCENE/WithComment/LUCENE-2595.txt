most tests should use MockRAMDirectory not RAMDirectory
heres a patch switching tests over some fail i didnt even look at resolving these yet . I think once we fix this we can look at moving the test system where it tests a variety of directory impls and supports something like -Dtests.directoryImpl or something like that to run all the tests against a specific impl. updated patch all tests pass. I did add one TODO to investigate in TestIW public void testCommitOnCloseOptimize throws IOException MockRAMDirectory dir new MockRAMDirectory dir.setPreventDoubleWrite false TODO should this be disabled here Committed revision 984232. I ll backport LUCENE-2594 to 3x first. Committed revision 984299 to 3x Bulk close for 3.1
