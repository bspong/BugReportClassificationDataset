IndexReader.listCommits should return a List and not an abstract Collection
Spinoff from here http www.mail-archive.com dev lucene.apache.org msg07509.html Patch against 3x Changes listCommits signature to return a List IndexCommit DirReader.listCommits sorts the list in the end. Added a test case to TestIndexReader. IndexCommit implements Comparable. Removed impl from CommitPoint which also removed a redundant duplicate gen member . I did not implement ReaderCommit to support deletes. Obtaining the lock for this purpose does not seem the right way to me ... IndexWriter has a deleteUnusedFiles which the application can use. If the app only does IR.listCommits then being able to delete is an advantage but otherwise it will need to mess with LockObtainFail exceptions. Not sure it s worth the efforts. I believe it is ready to commit. I ll wait a day or two until I commit it. Your comments are welcome. Shai looks good to me 1 to commit Committed revision 1034080 1034144 3x . Due to backwards tests failure I kept the method signature as returning Collection and only documented the new behavior. Committed revision 1034140 trunk . Java 5 allows covariant return types. Could we not declare both methods in 3.x and deprecate the old one In trunk we can remove it and only provide List. We cannot declare both methods But backwards does not fail now Bulk close for 3.1
