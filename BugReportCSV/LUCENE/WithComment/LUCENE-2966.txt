SegmentReader.doCommit should be sync d norms methods need not be sync d
I fixed the failure in TestNRTThreads but in the process tripped an assert because SegmentReader.doCommit isn t sync d. So I sync d it but I don t think the norms APIs need to be sync d Ð we populate norms up front and then never change them. Un-sync ing them is important so that in the NRT case calling IW.commit doesn t block searches trying to pull norms. Also some small code refactoring. Simple patch. Pushing this to 3.2 Ð removing sync d from the norms methods is a tad spooky and I think the concurrency bug only results in a false assert trip so we can let this fix bake only in trunk I think... Bulk closing for 3.2
