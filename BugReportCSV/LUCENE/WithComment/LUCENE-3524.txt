Add direct PackedInts.Reader impl that reads directly from disk on each get
Spinoff from LUCENE-3518. If we had a direct PackedInts.Reader impl we could use that instead of the RandomAccessReaderIterator. 1 RandomAccessReaderIterator can go away then I guess.... yet why does this block LUCENE-3515 did you mean to link LUCENE-3518 instead yet why does this block LUCENE-3515 did you mean to link LUCENE-3518 instead Duh wrong issue Ð I fixed it Patch removing the RandomAccessReaderIterator and switching PackedInts.getDirectReader to returning a PackedInts.Reader. At first I added throws IOException to PackedInts.Reader.get but this very quickly got out of hand Ð many methods up the stack needing to throw IOE. So instead I wrap the IOE in an unchecked IllegalStateException like the DocValues impls were doing . new patch removing PackedIntValues DirectPackedIntsSource since we now have the same interface for direct in-mem access. Patch looks good mike I think we should backport and add a changes entry too no new patch removing PackedIntValues DirectPackedIntsSource Ahh good catch patch looks good Thanks. I think we should backport and add a changes entry too no Actually 3.x doesn t have the ReaderIterator I didn t backport yet since we don t need it there so I think we can wait on backporting.
