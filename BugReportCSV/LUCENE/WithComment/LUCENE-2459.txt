FilterIndexReader doesn t work correctly with post-flex SegmentMerger
IndexWriter.addIndexes IndexReader... internally uses SegmentMerger to add data from input index readers. However SegmentMerger uses the new post-flex API to do this which bypasses the pre-flex TermEnum TermPositions API that FilterIndexReader implements. As a result filtering is not applied. Modified unit test to illustrate the problem. The test passes with this patch. I m not completely sure it coveres all cases though. Thanks Andrzej Ð this is indeed a bug. Your fix using flex API on pre-flex API emulation is good for now so I think we can commit to trunk. But we are going to remove the pre-flex APIs and make the flex APIs abstract soonish at which point all FilterIndexReader impls for trunk will have to cutover to flex. I ll commit shortly. Thanks Andrzej 
