BoostingNearQuery class prototype 
This patch implements term boosting for SpanNearQuery. Refer to http www.gossamer-threads.com lists lucene java-user 62779 This patch works but probably needs more work. I don t like the use of instanceof but I didn t want to touch Spans or TermSpans. Also the payload code is mostly a copy of what s in BoostingTermQuery and could be common-sourced somewhere. Feel free to throw darts at it Note that this patch requires java 1.5 or later easily modified to run on 1.4 Here is version of patch for Java 1.4 Some minor updates. Makes the Near spans public and moves the BNQ to the payloads package. Peter we need tests before this can be committed. Here is an updated patch for the 2.4 branch. It s 6 months late because I missed Grant s e-mail requesting me to retest. I was just recently looking to see what became of the original patch. Peter Hi Peter This looks good I think it just needs some unit tests and then it will be good. As I was debugging a unit test for BoostingNearQuery I discovered that not all the payloads were getting read. The needToLoadPayload flag on the termpos was getting reset on the last term in the span by NearSpansOrdered. Then I noticed that the term positions aren t even needed in BNQ because they were already collected by the Spans in matchPayload . So here is a newer simpler implementation of BNQ along with some unit tests. Peter Peter can you bring this up to date I think this could go into 2.9 if you can do so fairly quickly. New version that works with current trunk 8 5 09 Minor mods and some javadocs. Looks pretty good. I made sumPayloads more generic and protected so that one could override it and do other things besides sum. Committed revision 801667. thanks Peter 
