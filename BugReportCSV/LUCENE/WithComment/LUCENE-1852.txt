Fix remaining localization test failures in lucene
see also LUCENE-1836 and LUCENE-1846 all tests should pass under different locales. the fix is to run ant test under different locales look and fix problems and use the LocalizedTestCase from LUCENE-1836 to keep them from coming back. the same approach as LUCENE-1836 fixes the core queryparser but I am running ant test under a few locales to look for more problems. patch needs the LocalizedTestCase impl from LUCENE-1836 all remaining locale-dependent test failures in core contrib to my knowledge only tested a few locales as it takes some time. but when issues were found converted to LocalizedTestCase which tests all locales I reviewed the code all changes look good to me. I tested it and it looks good . Michael can you commit this patch with LUCENE-1836 both are related and this issue prereqs it. Luis thanks for the review. yes this one needs LUCENE-1836 committed first because it has LocalizedTestCase. Looks good. Robert did you find any other failing tests If not we could commit. Uwe no. But i only tested under the following th TH Thai ko KR Korean ar JO Arabic but any problems under these only found issues under thai and korean and I switched to LocalizedTestCase so those components test all locales. Shall I commit this one too in my opinion the issue should be resolved. I tested the problematic locales different calendars wacky date formats with whitespace and the changes are identical to LUCENE-1836 only different queryparsers . for each of these queryparsers now all locales are run under the tests so we should be good to go. But i honestly cannot say i ran ant test under all 50 locales great work and testing I ll commit shortly... i will mention under some of these locales back compat tests will fail for the same reasons. it is my understanding these are the tests from 2.4.x against the current code don t think its wise to fix them in the next release the back compat tests will pass if we fix them now right Committed revision 807499. it is my understanding these are the tests from 2.4.x against the current code don t think its wise to fix them in the next release the back compat tests will pass if we fix them now right Yeah IMO we don t need to fix them anymore. We re close to the release so soonish the ones you just fixed will be the back compat ones.
