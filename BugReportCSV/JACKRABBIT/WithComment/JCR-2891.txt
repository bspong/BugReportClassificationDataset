VersionManagerImplRestore internalRestoreFrozen method has identity versus equals bug
In method protected void internalRestoreFrozen NodeStateEx state                                          InternalFrozenNode freeze                                          VersionSelector vsel                                          Set InternalVersion restored                                          boolean removeExisting                                          boolean copy in the VersionManagerImplRestore class line 557 the code performs an instead of calling the NodeId.equals method. We ran into problems with the code that executes below this trying to restore a folder node throws an ItemExistsException since same sibling not allowed on folder nodes Index VersionManagerImplRestore.java VersionManagerImplRestore.java revision 1071104 VersionManagerImplRestore.java working copy -554 7 554 7                  NodeId nodeId vh.getVersionableId                  if stateMgr.hasItemState nodeId                      restoredChild state.getNode nodeId - if restoredChild.getParentId state.getNodeId if restoredChild.getParentId .equals state.getNodeId                           if same parent ignore                       else if removeExisting                          NodeStateEx parent restoredChild.getNode restoredChild.getParentId fixed in trunk svn rev. 1071562 Merged to the 2.2 branch in revision 1071647 and to the 2.1 branch in revision 1071652.
