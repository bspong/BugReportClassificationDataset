Registering node type names with spaces fails in clustered environment
Registering a node type name that contains at least one space in a clustered environment will cause a JournalException in cluster nodes trying to read that change back from the journal. The stack trace observed is JournalException Parse error while reading node type definition.        at AbstractRecord.readNodeTypeDef AbstractRecord.java 245        ... Caused by ParseException Missing delimiter for beginning of node type name internal line 47        at Lexer.fail Lexer.java 148        ... package names and intermediate frames omitted for brevity .Internally a node type definition is serialized deserialized via CompactNodeTypeDefWriter CompactNodeTypeDefReader . The writer serializes QName as is i.e. without escaping any character inside it. The reader on the other hand treats spaces as token delimeters and will therefore fail if some QName contains spaces. Fixed by encoding decoding QNames with ISO9075 before writing after reading in revision 534843. Thanks to Martijn Hendriks for reporting this bug.Merged to the 1.3 branch in revision 544223.
