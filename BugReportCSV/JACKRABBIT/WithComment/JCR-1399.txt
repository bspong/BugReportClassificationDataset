Backport JCR-1197 Node.restore may throw InvalidItemStateException
Backport issue JCR-1197 Node.restore may throw InvalidItemStateException to 1.3 branch for 1.3.4 separate issue to avoid re-opening JCR-1197 which was already released with 1.4 .Patch against current 1.3 branch revision 629174 .Unit test for this problem based on https issues.apache.org jira secure attachment 12368670 CheckoutFailure.javaReplaced unit test patch with one that includes the Apache license header.Created a separate issue for the unit test at JCR-1420 and moved the patch over there. Separates actual patch and test code for discussion problems and release note entries.The test case is better handled as an integral part of this issue. Applied the product patch in revision 631257 and the test case from JCR-1420 in revision 631261. Resolving as Fixed. Thanks PS. I didn t change the formatting to avoid messing with your checkout but going forward could you please only use spaces instead of tabs for indentation.
