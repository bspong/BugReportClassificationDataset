JCAResourceAdapter must implement Serializable
We are running Weblogic 10.0 servers in cluster environment. When deploying the rar we always get this warning from weblogic stdout.log Jan 15 2009 2 42 10 AM PST Warning Connector BEA-190155 Compliance checking validation of the resource adapter home user jackrabbit rar jackrabbit-jca-1.5.0.rar resulted in the following warnings The ra.xml resourceadapter-class class org.apache.jackrabbit.jca.JCAResourceAdapter should implement java.io.Serializable but does not. When trying to do the JNDI lookup the repository we got the error No Object found jackrabbit null . The jackrabbit entry in the jndi tree is visible only as a javax.naming.reference and not as the JCARepositoryHandle due to the above warning. Due to that we can t deploy jackrabbit-jca in Test Production environment. I m no expert in JCA but feel it is fairly easy to implement Serializable for JCAResourceAdapter. Please help us out. Are you sure the null object is because of that warning I would suppose the serializable problem should be logged as an error if it was truly critical...Yes I m. The jackrabbit entry in weblogic JNDI tree is not populated with org.apache.jackrabbit.jca.JCAResourceAdapter at all showing a red instead. Originally I deployed the same jackrabbit-jca.rar in the dev server which is single non-cluster server environment. Everything worked great. However as soon as I moved to the cluster environment JCAResourceAdapter just couldn t fit. Yes I agree JCAResourceAdapter must implement Serializable. Otherwise it won t be deployable in any cluster environment.A picture worths a thousand of words. I m attaching the the snapshots of JNDI lookup entry called JCRRepo in a single WLS 10 server and in WLS cluster servers. Just from the color of that entry you can tell the difference.Not a blocker as this only affects specific environments. Would anyone be interested in writing a patch for this The required changes don t seem too complex.ok if it is only to implement Serializeable i will fix it - Committed in rev. 820257Thanks a lot Claus. Where can I download this rev. Sorry for my innocence.It will be available in the upcoming 2.0 release or if you want we can backport it to the 1.6.1 realease or you can download the current build from http hudson.zones.apache.org hudson view Jackrabbit job Jackrabbit-trunk greets clausgreat Claus. I just downloaded the build 864 and will test it as soon as the cluster environment is available need make a request to get it scheduled . BTW do you have any timeline for the upcoming 2.0 release It will be very exciting. Thanks MichaelClaus I m getting java.lang.NoClassDefFoundError javax jcr Binary exception after deploying build 864. I m using jcr-1.0.jar and couldn t find javax jcr Binary there.the current trunk is compiled against the new jcr 2.0 api. if you need it in a older version we can backport it or you must apply it it by yourself greets claussure Claus. I applied jcr-2.0-b114.jar and moved over the javax jcr Binary . However another exception comes up. javax.resource.ResourceException Failed to create session Cannot instantiate persistence manager org.apache.jackrabbit.core.persistence.bundle.BundleFsPersistenceManager . I guess it is another jackrabbit jcr upgrade issue. Our current configuration is based on jackrabbit release 1.5. The following is the repository.xml. Do you see anything wrong with the configuration of BundleFsPersistenceManager Thanks Michael xml version 1.0 encoding ISO-8859-1 DOCTYPE Repository PUBLIC - The Apache Software Foundation DTD Jackrabbit 1.2 EN http jackrabbit.apache.org dtd repository-1.4.dtd Repository      FileSystem class org.apache.jackrabbit.core.fs.local.LocalFileSystem          param name path value data repo-home repository      FileSystem      Security appName Jackrabbit          AccessManager class org.apache.jackrabbit.core.security.SimpleAccessManager          LoginModule class org.apache.jackrabbit.core.security.SimpleLoginModule                  param name anonymous value anonymous          LoginModule          Security      Workspaces rootPath doc-archives JCRRepo workspaces defaultWorkspace default      Workspace name wsp.name          FileSystem class org.apache.jackrabbit.core.fs.local.LocalFileSystem                  param name path value wsp.home          FileSystem          PersistenceManager class org.apache.jackrabbit.core.persistence.bundle.BundleFsPersistenceManager                  param name bundlecacheSize value 8                  param name consistencyCheck value false                  param name errorHandling value          PersistenceManager          Dont want a SearchIndex setup for Indexing      Workspace      Versioning rootPath rep.home versions          FileSystem class org.apache.jackrabbit.core.fs.local.LocalFileSystem              param name path value rep.home versions          FileSystem          PersistenceManager class org.apache.jackrabbit.core.state.xml.XMLPersistenceManager      Versioning      Cluster id weblogic.Name          Journal class org.apache.jackrabbit.core.journal.FileJournal          param name revision value doc-archives JCRRepo cluster-revision revision.log          param name directory value doc-archives JCRRepo cluster-journal          Journal Cluster Repository Hi Unrelated to the problem I m not sure if you know about the disadvantages of the BundleFsPersistenceManager. See http wiki.apache.org jackrabbit PersistenceManagerFAQ If the JVM process is killed the repository might turn inconsistent .Good point. We ll probably use database MS SQL Server in production environment. We re still working on the cluster issue.
