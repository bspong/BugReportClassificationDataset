Hide ugly repository init code for OCM
Hide repository namespace registration and ocm discriminator node type registration in implementation of OCMThis patch applies only to implememntation code. It s upt to author of OCM to put it into interfaceThe full story http www.mail-archive.com dev jackrabbit.apache.org msg11205.html I made patch. Can you check it It is no longer necessary to use the ocm namespace and the ocm discriminator mixin type. Here is a summary of the current situation 1. If the jcr node type is map to only java class it is always possible to find the class name to instantiate. So a discriminator an extra property which will contains the class name is not necessary. 2. if the same node type is mapped to different java classes we have different situations Ê a. If the class is mapped to the unstructured node type or a node type that gives you the possibility to add extra properties OCM will create a new property ocm classname . b. If it is not possible to add this property due to strong constrains in the corresponding node type OCM will try to add the mixin type ocm discriminator .Thnks it works fine at least in my case. I removed init code an my project passed tests. I do not use restrictive node types so I did not checked case b.
