Login performance drop when using DefaultAccessManager
JCR-2700 caused a drop in login performance when using DefaultAccessManager. The drop is caused by the initialization of the LRU map used in CompiledPermissionsImpl.I suggest to use a LRU map which starts out with a smaller size and grows up to a maximum size to improve performance during initialization. Performance with pre initialized LRU map 5000 items LoginLogoutTest min 10 50 90 max 2.2 150 162 205 241 363 2.2-btree-usermanager-repository 426 434 555 631 767 2.2-default-usermanager-repository 427 440 560 642 735 Performance with LRU map preinitialized to 1024 items which grows up to 5000 items if necessary LoginLogoutTest min 10 50 90 max 2.2 151 162 200 222 405 2.2-btree-usermanager-repository 255 261 288 307 445 2.2-default-usermanager-repository 251 259 285 300 464 In both runs the first test uses SimpleAccessManager while the second and third test use DefaultAccessManager. The first run exhibits a much larger drop in login performance than the second run.Fixed at revision 1036450
