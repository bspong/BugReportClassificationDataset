SimpleWebdavServlet avoid 404 for the root collection
in order to avoid strange 404 error when accessing the root collection in simple webdav servlet thus missing workspace name that request should either be redirected or handled by a create fake root that has no correspondance in the jsr170 repository.i haven t integrated this code into my own build yet so i am not familiar with it but couldn t the root collection simply use the default workspace i certainly don t want to have to specify a workspace name in my webdav urls so i ll have to address this one way or another.rather not... but you don t have to have the workspace in your webdav urls we have nice get set methods for the factory as suggested by brian some time ago. just reset it to the simple loc factory sounds like a plan discussion of variants 1 redirection to the default-workspace when accessing the not-existing root collection - login with null workspace and redirect to resource representing the repository root-node thus including the workspace name obtained from the session. - my favorite solution. but windows builtin dav client does not respect      redirects. therefore dropped. 2 build a fake-root resource resource with no representation in the repository. none of the write or lock methods would be allowed. it would only serve as collection for all the available workspaces. - separate resource implementation needed see also jcr package - need to make sure that the new Repository-login is issued when the     user accesses any of the workspace resources and its members - perhaps confusing if the root does not allow any write operation would be an option but i m not sure whether its really favorable.... 3 don t allow connection without valid resource-locator perform Repository.login with null workspace in case the locator obtained from the dav-request does not provide workspace information e.g. when using the simple-resourcelocator of if the workspace is . validation check however is delegated to the resource implementation itself - thus throwing 404 if the locator is null or does not provide a resourcepath. consequence when using webdav jcr DavLocatorFactoryImpl accessing the root-collection thus connecting without valid workspace name is not possible. switching back to the factory implementation in webdav simple allows connection without workspace name. implemented option 3 with rev. 349905 as a first fix of the inconsistency that connection to the root works but then results in 404. thus with default installation connection to the non existing root collection is not allowed any more. resolving issue fixed. we may reopen it if we find out that another solution would be much better.
