spi2dav JSR 283 NodeType Management
can t reopen the original JSR 283 NodeType Management subtask which was closed premature. the spi2dav still misses the implementation and so does the server-side part.Do we need this for 2.0 or can we postpone to a later release 1 for postponing.TODO registration of node types is the only left task. adjusting summary as it only affects spi2dav ex - jcr-serverWhen is this planned Any estimate for fixing this This patch implements the missing feature. We would love to see this soon in a release 2.2.6 or 2.3 . Then we no longer need to use a patched version.This patch implements the missing featureawesome thanks uwe would love to see this integrated. just tested it on the trunk branch for 2.3 and it works fine. one note for the record this is only working to create node types or add properties. non-trivial operations i.e. removing a property of a node type lead to an exception in the cnd handling code just as happens when you try to do such a change from the cli.hi uwe thanks a lot for the patch. looks good. i only have 1 minor issues a could you for completeness handle the JCR NODETYPES CND LN property upon PROPFIND as well b the jcr tests related to node type registration are still commented in jcr2dav pom.xml and spi2dav pom.xml 1     could you uncomment those as part of the patch and make sure that they pass that would be great. thanks in advance angela 1 the commented tests JCR-2454 node type registration        org.apache.jackrabbit.test.api.nodetype.NodeTypeCreationTest testRegisterNodeType        org.apache.jackrabbit.test.api.nodetype.NodeTypeCreationTest testRegisterNodeTypes hi angela while b is clear and seems to be ok with just uncommenting the tests if have actually no clue what I should do for a . Please give me a pointer where to start ... kind regards Uwehttp www.webdav.org specs rfc4918.html METHOD PROPFIND http www.webdav.org specs rfc4918.html METHOD PROPPATCHHi OK I found the place to start - I assume a PROPFIND for JCR NODETYPES CND LN on the workspace should return a CND representation of all registered node types this is in analogy to the namespaces - 404 else what it already does . kind regards UweReworked the patch for tests PROPFIND and allowUpdateHi please find the slightly changed patch attached. One major change PROPFIND for nodetypes-cnd was implemented. In order to use CompactNodeTypeDefWriter jackrabbit-jcr-server needs to depend on jackrabbit-spi and jackrabbit-spi-commons not sure if that s a problem . Also the client now sends the allowUpdate-Flag is not a problem for the JAVA client as this is already checked on the client side but other clients have to set it now . If there any further comments let me know. Kind regards Uweapplied slightly modified patch provided by uwe jaeger. - i didn t include the PROPFIND functionality but created a new issue JCR-2948  for this which depends on JCR-2946 - in addition i added a draft version for unregistration of node types which then fails in jackrabbit-core . final note i would like to review this in a calm moment... somehow i m not yet convinced that this is the way to go... maybe i will find some time in the future to update my webdav-jcr mapping document... that would help me to think carefully about it. leaving it for the time being and resolving the issue.
