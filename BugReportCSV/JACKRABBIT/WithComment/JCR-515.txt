Enhance test data
Running the test cases currently results in a number of test cases that cannot be run. Mostly because not enough test data is in the repository to execute the test. You can find out the affected test cases by setting the log level for org.apache.jackrabbit.test to DEBUG and grep for executable in the jcr.log file. This returns the following list testGetDeclaringNodeType org.apache.jackrabbit.test.api.nodetype.PropertyDefTest not executable testIsMandatory org.apache.jackrabbit.test.api.nodetype.NodeDefTest not executable testValueConstraintNotSatisfied org.apache.jackrabbit.test.api.nodetype.CanSetPropertyBinaryTest not executable testValueConstraintNotSatisfied org.apache.jackrabbit.test.api.nodetype.CanSetPropertyBooleanTest not executable testValueConstraintNotSatisfied org.apache.jackrabbit.test.api.nodetype.CanSetPropertyDoubleTest not executable testGetSize org.apache.jackrabbit.test.api.observation.EventIteratorTest not executable testGetAttribute org.apache.jackrabbit.test.api.SessionReadMethodsTest not executable testReferenceableRootNode org.apache.jackrabbit.test.api.ReferenceableRootNodesTest not executable testBinaryProperty org.apache.jackrabbit.test.api.SetValueConstraintViolationExceptionTest not executable testBooleanProperty org.apache.jackrabbit.test.api.SetValueConstraintViolationExceptionTest not executable testDoubleProperty org.apache.jackrabbit.test.api.SetValueConstraintViolationExceptionTest not executable testReferenceProperty org.apache.jackrabbit.test.api.SetValueConstraintViolationExceptionTest not executable testMultipleReferenceProperty org.apache.jackrabbit.test.api.SetValueConstraintViolationExceptionTest not executable testBinaryProperty org.apache.jackrabbit.test.api.SetPropertyConstraintViolationExceptionTest not executable testBooleanProperty org.apache.jackrabbit.test.api.SetPropertyConstraintViolationExceptionTest not executable testDoubleProperty org.apache.jackrabbit.test.api.SetPropertyConstraintViolationExceptionTest not executable testReferenceProperty org.apache.jackrabbit.test.api.SetPropertyConstraintViolationExceptionTest not executable Test data in Jackrabbit should be enhanced in order to run those test cases successfully.I m only seeing not executable errors in JSR 283 or jackrabbit-core tests not in the JCR 1.0 tests.Oops I was grepping the log file for the wrong things. Reopening since the following API tests can still not be run testReferenceableRootNode org.apache.jackrabbit.test.api.ReferenceableRootNodesTest not executable Root node is not referenceable testReferenceProperty org.apache.jackrabbit.test.api.SetValueConstraintViolationExceptionTest not executable Not able to create required test items. testMultipleReferenceProperty org.apache.jackrabbit.test.api.SetValueConstraintViolationExceptionTest not executable Not able to create required test items. testNodeNotReferenceable org.apache.jackrabbit.test.api.SetValueValueFormatExceptionTest not executable Node type test canSetProperty does not support a single valued Reference property called prop1 testReferenceProperty org.apache.jackrabbit.test.api.SetPropertyConstraintViolationExceptionTest not executable Not able to create required test items. testDocOrderIndexedNotation org.apache.jackrabbit.test.api.query.XPathPosIndexTest not executable Workspace does not contain enough content under testdata query. At least 3 nodes are required for this test. testDocOrderPositionFunction org.apache.jackrabbit.test.api.query.XPathDocOrderTest not executable Repository does not support document order on result set. testDocOrderPositionIndex org.apache.jackrabbit.test.api.query.XPathDocOrderTest not executable Repository does not support document order on result set. testDocOrderLastFunction org.apache.jackrabbit.test.api.query.XPathDocOrderTest not executable Repository does not support document order on result set. testDocOrderFirstFunction org.apache.jackrabbit.test.api.query.XPathDocOrderTest not executable Repository does not support document order on result set. testIsMandatory org.apache.jackrabbit.test.api.nodetype.NodeDefTest not executable Workspace does not contain any node with a mandatory child node definition testGetSize org.apache.jackrabbit.test.api.observation.EventIteratorTest not executable EventIterator.getSize returns unavailable size. Not sure how many of these can be resolved by extending the test data. I ll look into this.The set of non-executable test cases is now down to testDocOrderIndexedNotation org.apache.jackrabbit.test.api.query.XPathPosIndexTest not executable Workspace does not contain enough content under testdata query. At least 3 nodes are required for this test. testDocOrderPositionFunction org.apache.jackrabbit.test.api.query.XPathDocOrderTest not executable Repository does not support document order on result set. testDocOrderPositionIndex org.apache.jackrabbit.test.api.query.XPathDocOrderTest not executable Repository does not support document order on result set. testDocOrderLastFunction org.apache.jackrabbit.test.api.query.XPathDocOrderTest not executable Repository does not support document order on result set. testDocOrderFirstFunction org.apache.jackrabbit.test.api.query.XPathDocOrderTest not executable Repository does not support document order on result set. testNodeIsModifiedAfterSecondSetPolicy org.apache.jackrabbit.test.api.security.AccessControlPolicyTest not executable null testAddAbstractPrivilege org.apache.jackrabbit.test.api.security.AccessControlListTest not executable No abstract privilege found. testReferenceableRootNode org.apache.jackrabbit.test.api.ReferenceableRootNodesTest not executable Root node is not referenceable These all would require changes in our implementation or default configuration even XPathPosIndexTest requires document order support so they can t be addressed only by adding more test data. Thus resolving this as fixed.
