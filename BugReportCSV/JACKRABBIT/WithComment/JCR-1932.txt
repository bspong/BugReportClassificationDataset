Session.getAttributes call always returns an empty array
Repository repository new RMIRemoteRepository localhost 1099 jackrabbit.repository SimpleCredentials c new SimpleCredentials alex ok .toCharArray c.setAttribute anAttribute aValue Session s repository.login c aWorkspace String attr s.getAttributeNames array attr is empty. according to docs it should contains attributes from the SimpleCredentials object.Looking at the SessionImpl code I see that the member attributes which is read by getAttributeNames and getAttribute String is never written to. The solution would be to change the RepositoryImpl.login Credentials String method to pass on the attributes array through to createSession - createSessionInstance - XASessionImpl constructor - SessionImpl constructor.In revision 744954 I added a protected SessionImpl.setAttribute method for this purpose. This avoids having to pass stuff through multiple methods and constructors.The protected setAttributes method is a bit too much like an API enhancement to my taste so I d rather schedule this fix for release in Jackrabbit 1.6.0 instead of in 1.5.x. However if someone needs this functionality already in a 1.5.x release then I wouldn t be too opposed to merging the change there.
