Too many open files when merging large index segments
When large index segments are merged it may happen that lots of smaller index segments are created but have to wait until the large index merge has completed. This may lead to a too many open files exception on some system. We should find a solution where large index merges are better decoupled from regular index operations.Index segments are now merged with a configurable number of background threads used to be just 1 . The default pool size is set to 2 and can be changed with the following parameter param name indexMergerPoolSize value 5 Implemented in revision 792109Merged to the 1.x branch in revision 801245.The change leveraged java.util.concurrent classes and adapting the code to work in Java 1.4 environments would have been non-trivial. So I simply reverted the change from the 1.x branch in revision 801913. We ll have this only in Jackrabbit 2.0.
