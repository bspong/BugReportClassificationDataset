RepositoryService.checkin should return information about newly created version
We have a mismatch between Node.checkin which returns a new Version object and RepositoryService.checkin which returns void. Client of SPI such as JCR2SPI thus will have to make an additional request for the base version property with the obvious drawbacks another call and a potential cause for a race condition . Proposal change the return code to NodeId. Êno objections. we originally had it but then got rid of the return values and later on re-added a return value to the merge equivalent... so having it for checkin would be find with me as well. Proposal 1 Allow checkin to return a NodeId or null for easier migration of existing SPI impls 2 Use the non-null return value in JCR2SPI to avoid fetching the base version. Then finally 3 Get rid of the support for null return values. Implemented as proposed with revision 649071 and 649073 handing over to Angela for changes in Sandbox.fixed in the sandbox - spi-logger - spi-rmi - spi2dav with rev. 649183. regarding 3 ... julian when would you like to change that i would either skip 3 at all allow null return or forbid null return right from the beginning. what do you think angela It was supposed to make the deployment of the change easier. If we now have all impls actually doing this I can execute step 3. step 3 completed at rev. 649276
