PlainTextExtractor returns an empty reader when encoding is unsupported
PlainTextExtractor is failing to index text files. Searching for content in text files is not coming back with results. On the extractText InputStream stream String type String encoding method the encoding is coming in as an empty string and it throws the java.io.UnsupportedEncodingException at line 40 return new InputStreamReader stream encoding . modifying the following statement fixes the problem before if encoding null after if encoding null encoding.equals I guess there should rather be a guard for unsupported encodings than an empty string. There are a lot more String values for encoding that will throw an UnsupportedEncodingException. I suggest we catch the exception and use the default encoding in that case. Fixed in revision 707304Merged to the 1.5 branch in revision 708616.
