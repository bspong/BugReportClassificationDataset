Clustering
Implement basic clustering i.e. make two or more repositories available at the same time allowing them to stay in sync with changes applied to only one of them.Initial commit 471766 Features still missing - Automatic archival of journal log entries to save space - Using a database as backend for the journalQuestion. Does this feature include the situation where there are 3 or more nodes all writing to Jackrabbit.... or is it the use case where there is one master jackrabbit and a number of slave read-only jackrabbits My understnading of JCR-169 was that it was asking for the former is all writable .... but not a problem if this wont address that aspect. ThanksThanks for geting started on this issue. Its a high priority one for us and perhaps many other Jackrabbit users. Couple of questions 1 Is the search index in other clusters also synced up if each cluster has the index in its local disk Or is it required to have the search index in a common file system 2 Are the other clusters updated immediately For example if one cluster adds a new node is it immediately visible to other sessions in other clusters as is mandated by the JCR spec Thanks I quickly gained the impression that creating a file for every journal record could lead to serious problems because file systems are usually not very good in handling a lot of entries. I therefore changed the default file-based journal implementation to append records to one file until its size has passed some limit. Verified that this works Fixed in revision 473383.Is this issue ready for resolution The basic clustering stuff is in so I suggest to resolve this issue as Fixed Fix version 1.2 and file new issues for any specific problems that still may remain or come up.Initial implementation available. New issues will be filed separately.We did some tests with 3 clusternodes. We had problems with the following use case JBoss-4.0.5-GA with latest JCA and latest Jackrabbit. Only Jackrabbit is configured for clustering JBoss is running standalone on each clusternode. All 3 clusternodes already have several jcr-nodes and an existing index-folder. 2 nodes are running the third node is stopped. Added a jcr-node on clusternode A the new jcr-node is immediately visible on clusternode B after a browser refresh of course . Then I start clusternode C which boots up normaly. I then load my testapp. Consoleoutput shows that all jcr-nodes are loaded except the one added on clusternode A. It just stopps working there I don t get an exception and no response in the browser window. If I delete the index-folder in the local workspace folder everything works fine. So I suppose that item changes are not properly merged into existing index if a clusternode was down. I haven t had the time yet to dig into this. Maybe someone can confirm this behavior with another configuration I will file a new jira issue if I know more about this...
