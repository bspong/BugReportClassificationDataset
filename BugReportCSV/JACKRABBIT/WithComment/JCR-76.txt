PersistenceManager sanity check
Library that provides a framework for testing the repository consistency and repairing it if necessary.It only contains a single test that checks and repairs the children referencial integrity.Documentation in javadocsHow to run command line See org.apache.jackrabbit.sanitycheck.console.SanityCheckRunner javadocs changes - pluggable checks through Apache commons-chain - pluggable fixes through Apache commons-chain Checks - CheckTree   Checks the tree consistency nodes and properties - CheckParentsExist   Checks all the parents exist in the workspace - CheckReferenceProperty   Checks the referenced node exists in the workspace PM or in the versioning PM. Fixes - RemoveChildNodeEntry - RemoveParentEntry - RemoveProperty - RemovePropertyEntry - RemoveValue I plan to add a GUI and a few more checks and fixes.Changes - 0.16.4.1 compatibility New Inconsistencies - UnableToReadNodeInconsistency - UnableToReadPropertyInconsistencyThis seems like an useful tool. Should we integrate it directly into Jackrabbit or bundle it as a contrib project Just in case there s consensus for adding it I think contrib would be better. The fixes might create new inconsistencies because there are no checks for node type constraints.Added to contrib sanitycheck in revision 454433. The tool is a bit outdated already but I think it would make sense to update it and perhaps migrate some features into jackrabbit-core so that a repository could be configured to automatically run consistency checks during startup.
