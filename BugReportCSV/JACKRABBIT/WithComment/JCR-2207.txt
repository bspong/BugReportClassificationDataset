XATest error commit from different thread but same XID must not block
I m seeing the following test error quite often in the CI server at work testDistributedThreadAccess org.apache.jackrabbit.core.XATest Time elapsed 0.213 sec ERROR javax.transaction.SystemException commit from different thread but same XID must not block at org.apache.jackrabbit.core.UserTransactionImpl.commit UserTransactionImpl.java 147 at org.apache.jackrabbit.core.XATest.testDistributedThreadAccess XATest.java 1637 It seems to be a system-specific issue as I ve never seen the same error locally or on Hudson.I increased the block detection timeout from 0.2 seconds to 1.0 seconds in revision 793240. This seems to have helped so I m resolving this as Fixed.Merged to the 1.x branch in revision 801234.Hi Jukka i found that your change will never throw the SystemException. I have changed the code in the DefaultISMLocking so that the Exception should occure but it doesn t the Testcase works always. You re right thanks I fixed the timeout handling in revision 816124.
