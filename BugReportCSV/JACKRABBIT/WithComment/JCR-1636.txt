Make shutdown hooks in TransientFileFactory removable
TransientFileFactory class always registers shutdown hook. So if jackrabbit classes were loaded by web-app classloader they will not be released when web-app is undeployed if jackrabbit-jcr-commons JAR is inside WAR . This causes classloader leak. It seems to be useful to have ability to cancel TransientFileFactory s shutdown hook when application is going to be unloaded to avoid classloader leak.Attaching a workaround patch. It adds a static method which executes same actions as shutdown hook does and unregisters shutdown hook.applied patch in svn r663634. thanks I m not sure is it correct to reopen the issue but it turned out that the supplied patch breaks class unloading in some cases. I m going to attach a patch which stops the reaper thread too so no problems arise because of it.This patch stops the ReaperThread on shutdown too.Once a patch is applied to svn and the bug is closed it is better to create another issue instead of re-opening. You can link to this bug with relates to to connect the dots. The new JCR-1668 you created is a good fit - I created the link and close this bug could you upload your patch to the other issue and provide the comments so they are coming directly from you and not from me 
