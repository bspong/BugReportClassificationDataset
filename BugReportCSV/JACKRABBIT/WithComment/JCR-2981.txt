Bundle of events may be dropped due to NP.
In 1 if the resolver fails to lookup a node entry a NP is thrown. This exception will break the loop which forwards the events to the observer in 2 . This will result in an observer not receiving events that he should have. 1 org.apache.jackrabbit.jcr2spi.hierarchy.HierarchyManagerImpl lookup ItemId workspaceItemId 2 org.apache.jackrabbit.jcr2spi.WorkspaceManager onEventReceived EventBundle eventBundles InternalEventListener lstnrs HierarchyManagerImpl.java.patch Fixes the NP..hi timothee could also provide a test that illustrates the issue that would be great. some time ago i filed an issue that might be related to this one see JCR-2566 ... having a test would help a lot.From the logs 2011-06-01 17 30 58 665 DEBUG org.apache.jackrabbit.jcr2spi.WorkspaceManager - Dump java.lang.NullPointerException         at org.apache.jackrabbit.jcr2spi.hierarchy.HierarchyManagerImpl.lookup HierarchyManagerImpl.java 92         at org.apache.jackrabbit.jcr2spi.hierarchy.HierarchyEventListener.pushEvents HierarchyEventListener.java 152         at org.apache.jackrabbit.jcr2spi.hierarchy.HierarchyEventListener.onEvent HierarchyEventListener.java 96         at org.apache.jackrabbit.jcr2spi.WorkspaceManager.onEventReceived WorkspaceManager.java 781         at org.apache.jackrabbit.jcr2spi.WorkspaceManager.access 1100 WorkspaceManager.java 122         at org.apache.jackrabbit.jcr2spi.WorkspaceManager ChangePolling.run WorkspaceManager.java 1158         at java.lang.Thread.run Thread.java 680 applied the patch provided by timothee. thanks again.This was merged to the 2.2 branch in revision 1137915.
