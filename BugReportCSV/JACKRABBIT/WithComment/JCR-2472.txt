spi2dav Accessing moved referenceble nodes results in PathNotFoundException
the following code fragment causes a PathNotFoundException on an existing path and there seems to be no way to recover the session from this incorrect state assuming an existing nt file node at path apps foo bar.txt Node n1 session.getNode apps foo bar.txt Node n2 n1.getNode jcr content n2.setProperty jcr data new java.io.ByteArrayInputStream String blahblah .getBytes n2.save Workspace ws0 session.getWorkspace ws0.move apps foo apps foo1 Node n3 session.getNode apps foo1 bar.txt Node n4 n3.getNode jcr content n4.refresh false Node n5 n3.getNode jcr content PathNotFoundException Please note that the preceeding Node.refresh call seems to cause the inconsistency. the problem doesn t occur when omitting this call.executing the code provided by stefan works if executed in spi2jcr but not with spi2dav ex . i therefore assume that this is a problem with workspace-move in spi2dav - changing component accordingly.the problem occurs both with workspace and with session move and is caused by the uri-lookup that isn t adjusted. since that part of the spi2dav is marked with TODOs and needs to be reviewed anyway i will add a simple fix that just clears the lookup after successful move without making expensive checks if a node having a uniqueID part in the NodeID was part of the moved tree. in addition i will add a testcase to jcr2spi thanks for the code-sniplet 
