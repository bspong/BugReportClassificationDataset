Support for single-workspace repositories
There should be a way to configure the test cases in a way such that NodeTest.java can pass although the repository implementation does not support multiple workspaces. The cleanest approach probably would be to allow javax.jcr.tck.workspacename to stay undefined and to skip the tests in that case. Alternatives would be a special name indicating lack of support for other workspaces or an additional config variable. More thoughts on this - leaving javax.jcr.tck.workspacename undefined may be too obscure as an empty string may be a valid workspace name and in fact it is in my impl being the name of the single default workspace - another alternative would be to set it to the name of a known-not-to-exist workspace and just to catch NoSuchWorkspaceExceptions mapping them to NotExecutableExceptions the drawback here that it may obscure typos in the config. Thus my new proposal is to compute once for all whether the repository supports multiple workspaces get available workspace names on superuser session and check the array size to be 1 and then throw NotExecutableExceptions whenever a different workspace is needed. If there are no objections I ll add this tomorrow. Thus my new proposal is to compute once for all whether the repository supports multiple workspaces get available workspace names on superuser session and check the array size to be 1 and then throw NotExecutableExceptions whenever a different workspace is needed. Nice and easy 1 Fixed with revision 521728.
