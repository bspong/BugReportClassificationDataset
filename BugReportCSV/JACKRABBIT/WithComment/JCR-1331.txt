Improper deprecation of Locked class
The Locked class in the jcr-commons package has been deprecated with 1.4 and moved to the spi-commons. However as this is a common class which does not depend on the spi it should rather stay in jcr-commons. The dependencies to spi can simply be removed again.Fixed in revision 613834. Thanks What about the version in the spi-commons Shouldn t it be deprecated Probably but we shouldn t deprecate things in a patch release so it ll have to wait until 1.5. Anyway I ve added the deprecate marker to spi-commons in revision 613841. I ll figure out how to best handle these changes in terms of release tracking.Thanks sorry. i don t agree on this change. and jukka i would expect that you wait at least for one day before you make such modifications. my suggestion to move the Locked class was by intention i expect that at least give me the change to tell you so. can you please revert your modification made with r613841 unless we reached consensus on this issue thanks angela sorry. i don t agree on this change. Ah I m sorry for jumping the fox here. I ve reverted my changes in revision 614158. For the record the reverted changes are included in the attached patch. and jukka i would expect that you wait at least for one day before you make such modifications. My apologies. I thought this was a clear-cut issue so I didn t wait for review. Obviously I was wrong. Was there some other reason than the Name dependencies for moving the Locked class was there some other reason than the Name dependencies for moving the Locked class Name NamespaceResolver and NamePathResolver. apart from that there was no reason... and i don t have any strong feeling for the Locked class in particular nor about it s position in the code. but i expect that we have a minimal response time to give everybody the time to look at a patch. apart from that i expect that patches and suggestions are really looked at before they are commited. this applies both for this one and the one in JCR-1169 which was open for almost a month and already suggested in the devlist before . that s all. Name NamespaceResolver and NamePathResolver. My patch replaces all those dependencies with code like the following     session.getNamespacePrefix http www.jcp.org jcr mix 1.0 lockable After that change the Lockable class only depends on the JCR API and should be just fine in jcr-commons. Most notably it meets the criteria defined in 1      The jackrabbit-jcr-commons package should contain generic utility     classes that work on top of the JCR API. The classes should handle     names and paths in string format and use the namespace methods on     javax.jcr.Session where name manipulation is needed. apart from that there was no reason... and i don t have any strong feeling for the Locked class in particular nor about it s position in the code. OK thanks. Unless anyone has further objections I ll re-commit the patch in a few days time. 1 http www.mail-archive.com dev jackrabbit.apache.org msg06698.html Unless anyone has further objections I ll re-commit the patch in a few days time. fine with me. adjusting affected projects.Re-purposing this as a purely jcr-commons issue to avoid cross-component complexity. We should add a separate issue to deprecate the class in spi-commons 1.5.Fixed in jackrabbit-jcr-commons in revision 638099. Merged to the 1.4 branch in revision 638100.Closing issue has been release in jackrabbit-jcr-commons 1.4.2
