ManageableCollectionUtil should not throw unsupported JcrMapping exception
Many times the object model d code cannot be altered for ocm. To avoid the unsupported exception in almost all such cases use a delegating wrapper class to encapsulate a Collection. The wrapper class implements MaangeableCollection. Since delegation is a performance hit make the test below the last resort for object conversion in the method public static ManageableCollection getManageableCollection Object object Proposed catchall test and program action             if object instanceof Collection                 return new ManageableCollectionImpl Collection object              Dan I m sorry but I forget some details on this issue. If I understand you want a generic implementation for the interface ManageableCollection based on the java collection . Two things are needed to implement this fix      1 A new class ManageableCollectionImpl or ManageableCollectionWrapper if you prefer.              Wraps any Collection under ManageableCollection interface.      2 A final test in ManageableCollectionUtil.getManageableCollection Object object that returns the wrapped Collection              when object s own class is not directly a ManageableCollection. I implemented this code in a local copy for myself at the same time that I generated the JIRA. This has been working wiht no problems for lots of EMF object model testing for 2 weeks. But I do not have a simple JUnit for you. Suggest you use a LinkedList in some object model. It should eliminate the exception in most case for arbitrary object models where code is either not available or not easily changed. Note I did NOT mean that the unsupported exception should be removed Just that it gets thrown when it really doesn t need to be. Keep throwing the exception where object is not a Collection.Of course the user will need to implement a custom CollectionConvert when his object model as a Collection that is not a standard ManageableCollection. He has to build his Collection by iterating on the ManageableCollection that is supplied.Hi. You face the same problem as I did. After using my patch it seems to work. It s attatched to my issue in case you want to use it https issues.apache.org jira browse JCR-1325solved by the resolution of JCR-1325
