Deadlock when executing Version operations
This only happens when a XA transaction is committed without changes. In XAVersionManager there is a check in the InternalXAResource returned by getXAResourceBegin which only acquires the write lock on the version manager if there are version related changes in the transaction. This kind of check is missing in the methods XAVersionManager.prepare commit rollback .XAVersionManager now only participates in XATransaction when there are version operations. Fixed in trunk in revision 637865Merged to the 1.4 branch in revision 638060.Merged to the 1.3 branch in revision 641274.
