JCRUrlConnection relies on nt file nt resource
The JCRUrlConnection class implementing the jcr URL handler for the JCR class loader relies on the fact that the intended primary type of the jcr content child node of an nt file node is of type nt resource. When writing files with the Jackrabbit WebDAV server this is not the case as the jcr content child node is of type nt unstructured. As a result the JCRUrlConnection.connect method fails with an ItemNotFoundException in the Util.getProperty Item method because the primary item of the nt unstructured node type is not defined.Removed the dependency on the concrete types of nodes accessed. Rather check for the actual data present or not. This mostly is of importance in the Util class providing access to the URL s data property. The other location of importance is the JCRURLConnection.connect method which loads the content length content type and last modification time fields from the repository. Fixed in Rev. 697778.Backported fix from Rev. 697778 in trunk to 1.4 branch Rev. 697809 to prepare for classloader 1.4.1 release
