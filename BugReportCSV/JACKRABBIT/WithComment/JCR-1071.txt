PROPPATCH on collection gets 403 Forbidden
DefaultHandler.canImport PropertyImportContext boolean prevents setting properties PROPPATCH on collections through WebDAV ... returns 403 Forbidden. It checks to see whether the contextItem is not a collection or has a jcr content node. This test fails for a collection and should probably allow collections or nodes that have a jcr content subnode. Here is a patch for the change Index jackrabbit-jcr-server src main java org apache jackrabbit server io DefaultHandler.java jackrabbit-jcr-server src main java org apache jackrabbit server io DefaultHandler.java revision 567695 jackrabbit-jcr-server src main java org apache jackrabbit server io DefaultHandler.java working copy -570 7 570 7                    Item contextItem context.getImportRoot          try - return contextItem null contextItem.isNode isCollection Node contextItem .hasNode JcrConstants.JCR CONTENT return contextItem null contextItem.isNode isCollection Node contextItem .hasNode JcrConstants.JCR CONTENT           catch RepositoryException e              log.error Unexpected error e.getMessage              return false the reason for denying importProperties for the DefaultHandler was that its default nodetype nt folder does not allow for any properties to be modified or removed. however i agree that the default handler should at least try to import properties specially since the default node types can be changed.applied patch at rev. 571397 i let litmus run and there were no new issues found. note that i didn t perform specific tests for proppatch on collections. Merged to the 1.3 branch in revision 577815.
