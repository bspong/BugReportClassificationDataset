SessionItemStateManager.getIdOfRootTransientNodeState may cause NPE
regression of JCR-2425 in certain scenarios calling SessionItemStateManager.getIdOfRootTransientNodeState may cause a NPE. Test case         Repository repository new TransientRepository         Session session repository.login                 new SimpleCredentials admin admin .toCharArray         Session session2 repository.login                 new SimpleCredentials admin admin .toCharArray         try             while session.getRootNode .hasNode test                 session.getRootNode .getNode test .remove                          Node test session.getRootNode .addNode test             session.save             Node x test.addNode x             session.save             Node x2 session2.getRootNode .getNode test .getNode x             x2.remove             x.addNode b             session2.save             session.save throws NPE          finally             session.logout             session2.logout          fixed in svn r1101046Merged to the 2.2 branch in revision 1174762 to 2.1 in 1174764 and to 2.0 in 1174772.
