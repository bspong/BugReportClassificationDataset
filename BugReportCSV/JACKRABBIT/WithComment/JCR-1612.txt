Reintroduce NamespaceStorage
hi jukka i open this issue as a reminder of our recent discussion in basel we decided that you will - reintroduce the NamespaceStorage you recently removed from jcr2spi - reintroduce a namespace cache in jcr2spi but using a simple map instead of NamespaceCache object in addition we agreed that we want to share the NamespaceRegistryImpl between jcr2spi and jackrabbit-core and you volenteered to provide a patch for that. thanks in advance angelawhat is the status of this issue shall we split it into separate issues 1 reverting the changes 2 further enhancement to impl. a shared nsp-registry would it be possible to fix the main part 1 for 1.5.0 as it is scheduled Yep I m still looking at having some resolution to this before 1.5. The more I look at this the more I think that the NamespaceStorage interface just doesn t make much sense for jackrabbit-core. I ll restore it and the cache in jcr2spi but unless someone has a good idea on how to implement part 2 I think we should just drop it. but unless someone has a good idea on how to implement part 2 I think we should just drop it. fine by me. we can still create an new enhancement issue if we have a brilliant idea.Restored NamespaceStorage and simple namespace caching in revisions 705925 and 705932.Hmm revision 705932 caused a test failure so I reverted it in revision 705937. In fact it seems impossible to do implement a repository-level namespace cache on top of the RepositoryService interface without making the assumption that namespace mappings are session-independent. This assumption is not supported by the RepositoryService design that has SessionInfo as an argument to all namespace methods not only those where write authorization could be needed. I know we agreed to reintroduce the cache but should we reconsider based on the above observation At least I suggest that we limit the scope of this issue to NamespaceStorage and if there really is a need for the cache open a separate issue to track the cache feature.
